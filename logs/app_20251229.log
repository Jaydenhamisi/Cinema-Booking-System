{"timestamp": "2025-12-29T12:30:05.677787+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-29T12:30:05.677997+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-29T12:30:05.678272+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.678504+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.678631+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.678755+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.678881+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.679003+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.679124+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.679246+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.679367+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.679488+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.679609+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.679770+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.679892+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.680015+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.680217+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.680371+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.680506+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.680717+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.680915+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.681029+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.681148+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.681256+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.681369+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.681476+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.681705+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.682021+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.682181+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.682313+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.682433+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.682564+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.682770+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.683096+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.683405+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.683724+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.683988+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.684162+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.684333+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.684586+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.684835+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.685148+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.685498+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.685743+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.685937+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.686055+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.686166+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.686274+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.686397+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.686564+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.686781+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.686922+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.687045+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.687188+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.687332+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.687469+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.687756+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.688055+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.688384+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.688719+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.689058+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.689446+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.689719+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-29T12:30:05.689927+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-29T12:30:18.424841+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "37eed2d5-07c3-43de-9f2f-b4abea3bfc2a"}
{"timestamp": "2025-12-29T12:30:22.678647+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.middleware", "message": "\u2717 POST /auth/register \u2192 FAILED (4.116s)", "module": "middleware", "function": "dispatch", "line": 83, "request_id": "37eed2d5-07c3-43de-9f2f-b4abea3bfc2a", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 143, in __init__\n    self._dbapi_connection = engine.raw_connection()\n                             ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 3301, in raw_connection\n    return self.pool.connect()\n           ~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 447, in connect\n    return _ConnectionFairy._checkout(self)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 1264, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 711, in checkout\n    rec = pool._do_get()\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\pool\\impl.py\", line 177, in _do_get\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\pool\\impl.py\", line 175, in _do_get\n    return self._create_connection()\n           ~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 388, in _create_connection\n    return _ConnectionRecord(self)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 673, in __init__\n    self.__connect()\n    ~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 899, in __connect\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 895, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\create.py\", line 661, in connect\n    return dialect.connect(*cargs, **cparams)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 629, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\psycopg2\\__init__.py\", line 135, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\npsycopg2.OperationalError: connection to server at \"localhost\" (::1), port 5432 failed: Connection refused (0x0000274D/10061)\n\tIs the server running on that host and accepting TCP/IP connections?\nconnection to server at \"localhost\" (127.0.0.1), port 5432 failed: Connection refused (0x0000274D/10061)\n\tIs the server running on that host and accepting TCP/IP connections?\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\middleware.py\", line 57, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    raise app_exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 390, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 291, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\concurrency.py\", line 38, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\to_thread.py\", line 56, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 2485, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 976, in run\n    result = context.run(func, *args)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\auth\\router.py\", line 32, in register\n    user = auth_service.register_user(db, payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\auth\\service.py\", line 40, in register_user\n    existing = self.repo.get_user_by_email(db, payload.email)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\auth\\repository.py\", line 13, in get_user_by_email\n    .first()\n     ~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2239, in _execute_internal\n    conn = self._connection_for_bind(bind)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2108, in _connection_for_bind\n    return trans._connection_for_bind(engine, execution_options)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"<string>\", line 2, in _connection_for_bind\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\state_changes.py\", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 1187, in _connection_for_bind\n    conn = bind.connect()\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 3277, in connect\n    return self._connection_cls(self)\n           ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 145, in __init__\n    Connection._handle_dbapi_exception_noconnection(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        err, dialect, engine\n        ^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2440, in _handle_dbapi_exception_noconnection\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 143, in __init__\n    self._dbapi_connection = engine.raw_connection()\n                             ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 3301, in raw_connection\n    return self.pool.connect()\n           ~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 447, in connect\n    return _ConnectionFairy._checkout(self)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 1264, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 711, in checkout\n    rec = pool._do_get()\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\pool\\impl.py\", line 177, in _do_get\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\pool\\impl.py\", line 175, in _do_get\n    return self._create_connection()\n           ~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 388, in _create_connection\n    return _ConnectionRecord(self)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 673, in __init__\n    self.__connect()\n    ~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 899, in __connect\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 895, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\create.py\", line 661, in connect\n    return dialect.connect(*cargs, **cparams)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 629, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\psycopg2\\__init__.py\", line 135, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\nsqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at \"localhost\" (::1), port 5432 failed: Connection refused (0x0000274D/10061)\n\tIs the server running on that host and accepting TCP/IP connections?\nconnection to server at \"localhost\" (127.0.0.1), port 5432 failed: Connection refused (0x0000274D/10061)\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)"}
{"timestamp": "2025-12-29T12:31:18.558500+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-29T12:31:35.864549+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-29T12:31:35.865046+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-29T12:31:35.865320+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.865605+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.866052+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.866513+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.867160+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.867550+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.867881+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.868229+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.868557+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.869042+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.869565+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.869994+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.870598+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.871140+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.871620+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.872120+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.872660+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.873146+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.873604+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.874211+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.874802+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.875201+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.875574+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.876058+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.876461+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.876790+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.877167+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.877689+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.878137+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.878740+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.879360+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.879893+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.880450+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.880944+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.881618+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.882379+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.882887+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.883414+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.883772+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.884113+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.884531+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.884970+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.885325+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.885659+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.885977+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.886420+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.886902+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.887659+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.888209+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.888695+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.889070+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.889408+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.889788+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.890228+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.890943+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.891765+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.892282+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.892708+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.893213+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.893632+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.894066+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-29T12:31:35.894522+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-29T12:31:45.851258+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:45.982822+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:45.983094+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:45.987739+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:45.988187+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:45.991296+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:45.991644+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:45.993532+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:45.996528+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:45.996934+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00065s] {'email_1': 'test_1767011503.794034@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.234869+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.235479+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00065s] {'email': 'test_1767011503.794034@example.com', 'hashed_password': '$2b$12$zVDaBYUfa0bSmeeNzH3feekdmAN6SmYK8.JWnBM5wlwGKXqBw4MhK', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.241781+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.247225+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.248873+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.249552+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00079s] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.251931+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 25, 'email': 'test_1767011503.794034@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.253944+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.272006+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.273707+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.274224+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00062s] {'user_id_1': 25, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.281979+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.282399+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'user_id': 25, 'name': None, 'email': 'test_1767011503.794034@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.289248+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.294132+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.295324+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.295688+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.298567+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 25, 'user_id': 25, 'email': 'test_1767011503.794034@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.298772+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.298965+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.299299+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.300482+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.301999+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.302470+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.3061s ago] {'email_1': 'test_1767011503.794034@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.535625+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 25, 'email': 'test_1767011503.794034@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.536755+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.536923+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 30, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.539654+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.689s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.540641+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.543320+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/login", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "43e1aa2d-8633-47d1-8bf0-8622b6963512"}
{"timestamp": "2025-12-29T12:31:46.549157+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "43e1aa2d-8633-47d1-8bf0-8622b6963512"}
{"timestamp": "2025-12-29T12:31:46.549918+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "43e1aa2d-8633-47d1-8bf0-8622b6963512"}
{"timestamp": "2025-12-29T12:31:46.550315+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.5541s ago] {'email_1': 'test_1767011503.794034@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "43e1aa2d-8633-47d1-8bf0-8622b6963512"}
{"timestamp": "2025-12-29T12:31:46.755613+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 25, 'email': 'test_1767011503.794034@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "43e1aa2d-8633-47d1-8bf0-8622b6963512"}
{"timestamp": "2025-12-29T12:31:46.756679+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "43e1aa2d-8633-47d1-8bf0-8622b6963512"}
{"timestamp": "2025-12-29T12:31:46.756853+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 30, "request_id": "43e1aa2d-8633-47d1-8bf0-8622b6963512"}
{"timestamp": "2025-12-29T12:31:46.757902+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/login \u2192 200 (0.215s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "43e1aa2d-8633-47d1-8bf0-8622b6963512"}
{"timestamp": "2025-12-29T12:31:46.758840+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "43e1aa2d-8633-47d1-8bf0-8622b6963512"}
{"timestamp": "2025-12-29T12:31:46.760195+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /profiles/me", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b04be8c3-cf62-4dfc-bc3e-e7180a7c7ec6"}
{"timestamp": "2025-12-29T12:31:46.764516+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b04be8c3-cf62-4dfc-bc3e-e7180a7c7ec6"}
{"timestamp": "2025-12-29T12:31:46.765692+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b04be8c3-cf62-4dfc-bc3e-e7180a7c7ec6"}
{"timestamp": "2025-12-29T12:31:46.766104+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b04be8c3-cf62-4dfc-bc3e-e7180a7c7ec6"}
{"timestamp": "2025-12-29T12:31:46.769365+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b04be8c3-cf62-4dfc-bc3e-e7180a7c7ec6"}
{"timestamp": "2025-12-29T12:31:46.769835+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.4963s ago] {'user_id_1': 25, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b04be8c3-cf62-4dfc-bc3e-e7180a7c7ec6"}
{"timestamp": "2025-12-29T12:31:46.776442+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /profiles/me \u2192 200 (0.016s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b04be8c3-cf62-4dfc-bc3e-e7180a7c7ec6"}
{"timestamp": "2025-12-29T12:31:46.777696+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b04be8c3-cf62-4dfc-bc3e-e7180a7c7ec6"}
{"timestamp": "2025-12-29T12:31:46.779770+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "39754b6c-8c53-4804-9c31-9b6720f4105c"}
{"timestamp": "2025-12-29T12:31:46.782941+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "39754b6c-8c53-4804-9c31-9b6720f4105c"}
{"timestamp": "2025-12-29T12:31:46.785057+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "39754b6c-8c53-4804-9c31-9b6720f4105c"}
{"timestamp": "2025-12-29T12:31:46.785453+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'title_1': 'The Matrix Reloaded 1767011506.778131'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "39754b6c-8c53-4804-9c31-9b6720f4105c"}
{"timestamp": "2025-12-29T12:31:46.793691+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "39754b6c-8c53-4804-9c31-9b6720f4105c"}
{"timestamp": "2025-12-29T12:31:46.794361+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00066s] {'title': 'The Matrix Reloaded 1767011506.778131', 'description': 'Test movie: The Matrix Reloaded 1767011506.778131', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "39754b6c-8c53-4804-9c31-9b6720f4105c"}
{"timestamp": "2025-12-29T12:31:46.797522+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "39754b6c-8c53-4804-9c31-9b6720f4105c"}
{"timestamp": "2025-12-29T12:31:46.801911+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "39754b6c-8c53-4804-9c31-9b6720f4105c"}
{"timestamp": "2025-12-29T12:31:46.803014+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "39754b6c-8c53-4804-9c31-9b6720f4105c"}
{"timestamp": "2025-12-29T12:31:46.803376+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "39754b6c-8c53-4804-9c31-9b6720f4105c"}
{"timestamp": "2025-12-29T12:31:46.805611+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 22}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "39754b6c-8c53-4804-9c31-9b6720f4105c"}
{"timestamp": "2025-12-29T12:31:46.806706+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "39754b6c-8c53-4804-9c31-9b6720f4105c"}
{"timestamp": "2025-12-29T12:31:46.806952+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "39754b6c-8c53-4804-9c31-9b6720f4105c"}
{"timestamp": "2025-12-29T12:31:46.808650+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.029s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "39754b6c-8c53-4804-9c31-9b6720f4105c"}
{"timestamp": "2025-12-29T12:31:46.809679+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "39754b6c-8c53-4804-9c31-9b6720f4105c"}
{"timestamp": "2025-12-29T12:31:46.811333+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "28ed3698-bf2d-4113-bf30-8c31d8193f7a"}
{"timestamp": "2025-12-29T12:31:46.814299+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "28ed3698-bf2d-4113-bf30-8c31d8193f7a"}
{"timestamp": "2025-12-29T12:31:46.815765+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "28ed3698-bf2d-4113-bf30-8c31d8193f7a"}
{"timestamp": "2025-12-29T12:31:46.816213+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'name_1': 'Standard Layout 1767011506.809646'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "28ed3698-bf2d-4113-bf30-8c31d8193f7a"}
{"timestamp": "2025-12-29T12:31:46.821400+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "28ed3698-bf2d-4113-bf30-8c31d8193f7a"}
{"timestamp": "2025-12-29T12:31:46.822084+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'name': 'Standard Layout 1767011506.809646', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "28ed3698-bf2d-4113-bf30-8c31d8193f7a"}
{"timestamp": "2025-12-29T12:31:46.825500+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "28ed3698-bf2d-4113-bf30-8c31d8193f7a"}
{"timestamp": "2025-12-29T12:31:46.829761+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "28ed3698-bf2d-4113-bf30-8c31d8193f7a"}
{"timestamp": "2025-12-29T12:31:46.830609+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "28ed3698-bf2d-4113-bf30-8c31d8193f7a"}
{"timestamp": "2025-12-29T12:31:46.830894+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00041s] {'pk_1': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "28ed3698-bf2d-4113-bf30-8c31d8193f7a"}
{"timestamp": "2025-12-29T12:31:46.833136+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 21}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "28ed3698-bf2d-4113-bf30-8c31d8193f7a"}
{"timestamp": "2025-12-29T12:31:46.834369+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "28ed3698-bf2d-4113-bf30-8c31d8193f7a"}
{"timestamp": "2025-12-29T12:31:46.834548+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "28ed3698-bf2d-4113-bf30-8c31d8193f7a"}
{"timestamp": "2025-12-29T12:31:46.835816+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.025s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "28ed3698-bf2d-4113-bf30-8c31d8193f7a"}
{"timestamp": "2025-12-29T12:31:46.836695+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "28ed3698-bf2d-4113-bf30-8c31d8193f7a"}
{"timestamp": "2025-12-29T12:31:46.838233+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "dfb39553-71bd-40b2-85a3-9b325db8e444"}
{"timestamp": "2025-12-29T12:31:46.841058+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "dfb39553-71bd-40b2-85a3-9b325db8e444"}
{"timestamp": "2025-12-29T12:31:46.842479+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dfb39553-71bd-40b2-85a3-9b325db8e444"}
{"timestamp": "2025-12-29T12:31:46.843055+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'name_1': 'Screen 1 1767011506.83652', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dfb39553-71bd-40b2-85a3-9b325db8e444"}
{"timestamp": "2025-12-29T12:31:46.848460+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dfb39553-71bd-40b2-85a3-9b325db8e444"}
{"timestamp": "2025-12-29T12:31:46.848958+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'id_1': 21, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dfb39553-71bd-40b2-85a3-9b325db8e444"}
{"timestamp": "2025-12-29T12:31:46.851802+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dfb39553-71bd-40b2-85a3-9b325db8e444"}
{"timestamp": "2025-12-29T12:31:46.852232+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'name': 'Screen 1 1767011506.83652', 'capacity': 150, 'seat_layout_id': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dfb39553-71bd-40b2-85a3-9b325db8e444"}
{"timestamp": "2025-12-29T12:31:46.855856+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "dfb39553-71bd-40b2-85a3-9b325db8e444"}
{"timestamp": "2025-12-29T12:31:46.860512+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "dfb39553-71bd-40b2-85a3-9b325db8e444"}
{"timestamp": "2025-12-29T12:31:46.866259+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dfb39553-71bd-40b2-85a3-9b325db8e444"}
{"timestamp": "2025-12-29T12:31:46.866582+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'pk_1': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dfb39553-71bd-40b2-85a3-9b325db8e444"}
{"timestamp": "2025-12-29T12:31:46.868973+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 21}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "dfb39553-71bd-40b2-85a3-9b325db8e444"}
{"timestamp": "2025-12-29T12:31:46.870030+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "dfb39553-71bd-40b2-85a3-9b325db8e444"}
{"timestamp": "2025-12-29T12:31:46.870213+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "dfb39553-71bd-40b2-85a3-9b325db8e444"}
{"timestamp": "2025-12-29T12:31:46.871435+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.033s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "dfb39553-71bd-40b2-85a3-9b325db8e444"}
{"timestamp": "2025-12-29T12:31:46.872263+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "dfb39553-71bd-40b2-85a3-9b325db8e444"}
{"timestamp": "2025-12-29T12:31:46.874363+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.877013+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.878435+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.879035+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00063s] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.882222+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.882724+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00069s] {'pk_1': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.886412+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.887105+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00071s] {'screen_id_1': 21, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.894451+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.894768+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 22, 'screen_id': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.898703+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.903032+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.904090+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.904487+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'pk_1': 18}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.907999+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.908333+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.910695+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.911090+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'pk_1': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.913269+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 18}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.914764+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.915060+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.916468+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.042s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.917822+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.919765+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /seatavailability/grid/18", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "634a8a58-158d-4bc6-b80f-9b0dae96e1c8"}
{"timestamp": "2025-12-29T12:31:46.922603+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "634a8a58-158d-4bc6-b80f-9b0dae96e1c8"}
{"timestamp": "2025-12-29T12:31:46.924055+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "634a8a58-158d-4bc6-b80f-9b0dae96e1c8"}
{"timestamp": "2025-12-29T12:31:46.925169+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'showtime_id_1': 18}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "634a8a58-158d-4bc6-b80f-9b0dae96e1c8"}
{"timestamp": "2025-12-29T12:31:46.931634+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /seatavailability/grid/18 \u2192 200 (0.012s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "634a8a58-158d-4bc6-b80f-9b0dae96e1c8"}
{"timestamp": "2025-12-29T12:31:46.932633+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "634a8a58-158d-4bc6-b80f-9b0dae96e1c8"}
{"timestamp": "2025-12-29T12:31:46.934520+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.937204+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.938019+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.938476+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.1729s ago] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.942667+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.943070+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'user_id': 25, 'showtime_id': 18, 'seat_code': 'R5-8', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 12, 31, 46, 942142, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 12, 41, 46, 941135, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.948856+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.953205+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.954506+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.954989+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'pk_1': 17}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.957309+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 17, 'user_id': 25, 'showtime_id': 18, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.958328+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.961588+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.962624+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.962953+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'showtime_id_1': 18, 'seat_code_1': 'R5-8', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.966395+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.966732+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'seat_code': 'R5-8', 'showtime_id': 18, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.971345+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.971675+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'status': 'LOCKED', 'locked_by_user_id': 25, 'lock_expires_at': datetime.datetime(2025, 12, 29, 12, 41, 46, 970206, tzinfo=datetime.timezone.utc), 'seat_locks_id': 14}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.974442+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.978642+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.979452+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.979819+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00038s] {'pk_1': 14}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.981928+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 18, 'seat_code': 'R5-8', 'user_id': 25, 'expires_at': '2025-12-29T12:41:46.970206+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.982324+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.982658+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 30, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.983115+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.984173+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.984644+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 17, 'user_id': 25, 'showtime_id': 18, 'seat_code': 'R5-8'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.985050+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 17", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.986864+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.988134+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.988784+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'user_id': 25, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 17}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.994623+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.998680+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.999908+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:47.000224+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'pk_1': 17}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:47.002121+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 17, 'reservation_id': 17, 'user_id': 25, 'showtime_id': 18, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:47.002264+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:47.002527+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 17", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:47.002754+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:47.003732+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:47.005058+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:47.006752+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:47.007117+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'actor_id': 25, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 17, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 17, \"user_id\": 25, \"showtime_id\": 18, \"seat_code\": \"R5-8\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 12, 31, 47, 6352, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:47.012213+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:47.015891+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:47.017055+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:47.017625+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'pk_1': 17}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:47.019912+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:47.020793+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:47.022085+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.088s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:47.022918+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:47.024575+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "eb607afb-7e29-4f1f-b734-6ddee8cc44f7"}
{"timestamp": "2025-12-29T12:31:47.026703+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "eb607afb-7e29-4f1f-b734-6ddee8cc44f7"}
{"timestamp": "2025-12-29T12:31:47.027216+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "eb607afb-7e29-4f1f-b734-6ddee8cc44f7"}
{"timestamp": "2025-12-29T12:31:47.027743+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2621s ago] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "eb607afb-7e29-4f1f-b734-6ddee8cc44f7"}
{"timestamp": "2025-12-29T12:31:47.030980+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "eb607afb-7e29-4f1f-b734-6ddee8cc44f7"}
{"timestamp": "2025-12-29T12:31:47.031371+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'user_id_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "eb607afb-7e29-4f1f-b734-6ddee8cc44f7"}
{"timestamp": "2025-12-29T12:31:47.033329+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.009s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "eb607afb-7e29-4f1f-b734-6ddee8cc44f7"}
{"timestamp": "2025-12-29T12:31:47.034287+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "eb607afb-7e29-4f1f-b734-6ddee8cc44f7"}
{"timestamp": "2025-12-29T12:31:47.035996+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/order/17/initiate", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "32417ad2-a450-4b71-b19b-47bee543ec55"}
{"timestamp": "2025-12-29T12:31:47.038712+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "32417ad2-a450-4b71-b19b-47bee543ec55"}
{"timestamp": "2025-12-29T12:31:47.039343+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32417ad2-a450-4b71-b19b-47bee543ec55"}
{"timestamp": "2025-12-29T12:31:47.039662+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2742s ago] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32417ad2-a450-4b71-b19b-47bee543ec55"}
{"timestamp": "2025-12-29T12:31:47.042896+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO payment_attempts (order_id, amount_attempted, status, final_amount, failure_reason, provider_payment_id, created_at) VALUES (%(order_id)s, %(amount_attempted)s, %(status)s, %(final_amount)s, %(failure_reason)s, %(provider_payment_id)s, %(created_at)s) RETURNING payment_attempts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32417ad2-a450-4b71-b19b-47bee543ec55"}
{"timestamp": "2025-12-29T12:31:47.043175+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'order_id': 17, 'amount_attempted': 10.0, 'status': 'PENDING', 'final_amount': 10.0, 'failure_reason': None, 'provider_payment_id': None, 'created_at': datetime.datetime(2025, 12, 29, 12, 31, 47, 42515, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32417ad2-a450-4b71-b19b-47bee543ec55"}
{"timestamp": "2025-12-29T12:31:47.048326+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "32417ad2-a450-4b71-b19b-47bee543ec55"}
{"timestamp": "2025-12-29T12:31:47.052824+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "32417ad2-a450-4b71-b19b-47bee543ec55"}
{"timestamp": "2025-12-29T12:31:47.054273+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32417ad2-a450-4b71-b19b-47bee543ec55"}
{"timestamp": "2025-12-29T12:31:47.054582+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'pk_1': 10}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32417ad2-a450-4b71-b19b-47bee543ec55"}
{"timestamp": "2025-12-29T12:31:47.056687+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.pending with payload: {'payment_attempt_id': 10, 'order_id': 17, 'amount_attempted': 10.0, 'final_amount': 10.0}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "32417ad2-a450-4b71-b19b-47bee543ec55"}
{"timestamp": "2025-12-29T12:31:47.057631+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.pending to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "32417ad2-a450-4b71-b19b-47bee543ec55"}
{"timestamp": "2025-12-29T12:31:47.057775+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: payment.pending", "module": "event_bus", "function": "publish", "line": 30, "request_id": "32417ad2-a450-4b71-b19b-47bee543ec55"}
{"timestamp": "2025-12-29T12:31:47.059311+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/order/17/initiate \u2192 200 (0.023s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "32417ad2-a450-4b71-b19b-47bee543ec55"}
{"timestamp": "2025-12-29T12:31:47.060255+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "32417ad2-a450-4b71-b19b-47bee543ec55"}
{"timestamp": "2025-12-29T12:31:47.061913+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/10/confirm", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "f79b2b1c-8b75-4dde-8c2d-5278c3f065d6"}
{"timestamp": "2025-12-29T12:31:47.064412+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f79b2b1c-8b75-4dde-8c2d-5278c3f065d6"}
{"timestamp": "2025-12-29T12:31:47.065080+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f79b2b1c-8b75-4dde-8c2d-5278c3f065d6"}
{"timestamp": "2025-12-29T12:31:47.065645+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.3s ago] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f79b2b1c-8b75-4dde-8c2d-5278c3f065d6"}
{"timestamp": "2025-12-29T12:31:47.068696+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id AS payment_attempts_id, payment_attempts.order_id AS payment_attempts_order_id, payment_attempts.amount_attempted AS payment_attempts_amount_attempted, payment_attempts.status AS payment_attempts_status, payment_attempts.final_amount AS payment_attempts_final_amount, payment_attempts.failure_reason AS payment_attempts_failure_reason, payment_attempts.provider_payment_id AS payment_attempts_provider_payment_id, payment_attempts.created_at AS payment_attempts_created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f79b2b1c-8b75-4dde-8c2d-5278c3f065d6"}
{"timestamp": "2025-12-29T12:31:47.068934+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'pk_1': 10}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f79b2b1c-8b75-4dde-8c2d-5278c3f065d6"}
{"timestamp": "2025-12-29T12:31:47.071303+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f79b2b1c-8b75-4dde-8c2d-5278c3f065d6"}
{"timestamp": "2025-12-29T12:31:47.071707+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'pk_1': 17}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f79b2b1c-8b75-4dde-8c2d-5278c3f065d6"}
{"timestamp": "2025-12-29T12:31:47.073692+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f79b2b1c-8b75-4dde-8c2d-5278c3f065d6"}
{"timestamp": "2025-12-29T12:31:47.101608+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.middleware", "message": "\u2717 POST /payments/10/confirm \u2192 FAILED (0.013s)", "module": "middleware", "function": "dispatch", "line": 83, "request_id": "f79b2b1c-8b75-4dde-8c2d-5278c3f065d6", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 151, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\streams\\memory.py\", line 126, in receive\n    raise EndOfStream from None\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\middleware.py\", line 57, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    raise app_exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 390, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 291, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\concurrency.py\", line 38, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\to_thread.py\", line 56, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 2485, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 976, in run\n    result = context.run(func, *args)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\payment\\router.py\", line 50, in confirm_payment_route\n    return mark_payment_succeeded(\n        db=db,\n        payment_attempt_id=payment_attempt_id,\n        provider_payment_id=provider_payment_id\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\payment\\service.py\", line 66, in mark_payment_succeeded\n    raise ValidationError(\"Final amount not equal to order amount\")\napp.core.errors.ValidationError: Final amount not equal to order amount"}
{"timestamp": "2025-12-29T12:36:42.477940+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-29T12:36:44.800029+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-29T12:36:44.800382+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-29T12:36:44.800700+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.800964+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.801183+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.801465+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.801741+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.801993+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.802276+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.802520+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.802712+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.803124+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.803581+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.804113+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.804588+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.804989+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.805409+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.805743+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.806007+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.806368+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.806713+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.807013+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.807319+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.807607+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.807903+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.808139+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.808466+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.808725+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.809056+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.809394+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.809822+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.810178+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.810502+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.810831+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.811091+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.811303+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.811572+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.811809+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.812018+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.812246+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.812483+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.812755+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.812962+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.813164+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.813401+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.813654+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.813852+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.814166+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.814489+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.814891+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.815083+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.815254+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.815486+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.815730+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.815963+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.816218+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.816492+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.816782+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.817086+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.817407+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.817671+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.817913+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.818118+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-29T12:36:44.818335+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-29T12:36:56.506971+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.565736+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.566178+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.569115+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.569421+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.571668+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.572295+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.574875+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.577924+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.578468+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00065s] {'email_1': 'test_1767011814.451531@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.804808+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.805387+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00066s] {'email': 'test_1767011814.451531@example.com', 'hashed_password': '$2b$12$mwEWXO1ssLZFF9YqviwBru7IB.2woYJ8katH3SXHo0uz9LY9uzZOy', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.807425+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.812616+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.813999+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.814355+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.816666+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 26, 'email': 'test_1767011814.451531@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.818067+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.841204+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.842651+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.842895+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'user_id_1': 26, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.846539+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.846952+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00042s] {'user_id': 26, 'name': None, 'email': 'test_1767011814.451531@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.849264+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.853627+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.854466+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.854905+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00036s] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.857016+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 26, 'user_id': 26, 'email': 'test_1767011814.451531@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.857178+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.857305+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.857535+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.858558+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.859828+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.860153+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2826s ago] {'email_1': 'test_1767011814.451531@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:57.073816+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 26, 'email': 'test_1767011814.451531@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:57.074912+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:57.075098+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:57.076438+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.570s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:57.077581+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:57.079585+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/login", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "555c15fc-02e2-4bf2-a584-85732f5de5c0"}
{"timestamp": "2025-12-29T12:36:57.084681+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "555c15fc-02e2-4bf2-a584-85732f5de5c0"}
{"timestamp": "2025-12-29T12:36:57.085269+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "555c15fc-02e2-4bf2-a584-85732f5de5c0"}
{"timestamp": "2025-12-29T12:36:57.085591+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.508s ago] {'email_1': 'test_1767011814.451531@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "555c15fc-02e2-4bf2-a584-85732f5de5c0"}
{"timestamp": "2025-12-29T12:36:57.293404+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 26, 'email': 'test_1767011814.451531@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "555c15fc-02e2-4bf2-a584-85732f5de5c0"}
{"timestamp": "2025-12-29T12:36:57.294529+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "555c15fc-02e2-4bf2-a584-85732f5de5c0"}
{"timestamp": "2025-12-29T12:36:57.294763+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "555c15fc-02e2-4bf2-a584-85732f5de5c0"}
{"timestamp": "2025-12-29T12:36:57.295886+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/login \u2192 200 (0.216s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "555c15fc-02e2-4bf2-a584-85732f5de5c0"}
{"timestamp": "2025-12-29T12:36:57.296805+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "555c15fc-02e2-4bf2-a584-85732f5de5c0"}
{"timestamp": "2025-12-29T12:36:57.298176+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /profiles/me", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "94d7a898-dca7-4e26-b804-5d5775138c94"}
{"timestamp": "2025-12-29T12:36:57.300881+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "94d7a898-dca7-4e26-b804-5d5775138c94"}
{"timestamp": "2025-12-29T12:36:57.302002+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "94d7a898-dca7-4e26-b804-5d5775138c94"}
{"timestamp": "2025-12-29T12:36:57.302490+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "94d7a898-dca7-4e26-b804-5d5775138c94"}
{"timestamp": "2025-12-29T12:36:57.307108+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "94d7a898-dca7-4e26-b804-5d5775138c94"}
{"timestamp": "2025-12-29T12:36:57.307660+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.465s ago] {'user_id_1': 26, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "94d7a898-dca7-4e26-b804-5d5775138c94"}
{"timestamp": "2025-12-29T12:36:57.310799+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /profiles/me \u2192 200 (0.013s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "94d7a898-dca7-4e26-b804-5d5775138c94"}
{"timestamp": "2025-12-29T12:36:57.312031+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "94d7a898-dca7-4e26-b804-5d5775138c94"}
{"timestamp": "2025-12-29T12:36:57.314125+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "fff5f147-7285-46f5-9607-2555b4337021"}
{"timestamp": "2025-12-29T12:36:57.316616+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "fff5f147-7285-46f5-9607-2555b4337021"}
{"timestamp": "2025-12-29T12:36:57.319159+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "fff5f147-7285-46f5-9607-2555b4337021"}
{"timestamp": "2025-12-29T12:36:57.319996+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00093s] {'title_1': 'The Matrix Reloaded 1767011817.312387'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "fff5f147-7285-46f5-9607-2555b4337021"}
{"timestamp": "2025-12-29T12:36:57.324198+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "fff5f147-7285-46f5-9607-2555b4337021"}
{"timestamp": "2025-12-29T12:36:57.325114+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'title': 'The Matrix Reloaded 1767011817.312387', 'description': 'Test movie: The Matrix Reloaded 1767011817.312387', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "fff5f147-7285-46f5-9607-2555b4337021"}
{"timestamp": "2025-12-29T12:36:57.327206+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "fff5f147-7285-46f5-9607-2555b4337021"}
{"timestamp": "2025-12-29T12:36:57.332338+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "fff5f147-7285-46f5-9607-2555b4337021"}
{"timestamp": "2025-12-29T12:36:57.333515+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "fff5f147-7285-46f5-9607-2555b4337021"}
{"timestamp": "2025-12-29T12:36:57.333794+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "fff5f147-7285-46f5-9607-2555b4337021"}
{"timestamp": "2025-12-29T12:36:57.336137+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 23}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "fff5f147-7285-46f5-9607-2555b4337021"}
{"timestamp": "2025-12-29T12:36:57.337125+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "fff5f147-7285-46f5-9607-2555b4337021"}
{"timestamp": "2025-12-29T12:36:57.337268+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "fff5f147-7285-46f5-9607-2555b4337021"}
{"timestamp": "2025-12-29T12:36:57.338593+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.025s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "fff5f147-7285-46f5-9607-2555b4337021"}
{"timestamp": "2025-12-29T12:36:57.339768+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "fff5f147-7285-46f5-9607-2555b4337021"}
{"timestamp": "2025-12-29T12:36:57.341544+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "ad525f6c-b428-4bcf-99af-147eff0798a8"}
{"timestamp": "2025-12-29T12:36:57.344110+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ad525f6c-b428-4bcf-99af-147eff0798a8"}
{"timestamp": "2025-12-29T12:36:57.345349+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ad525f6c-b428-4bcf-99af-147eff0798a8"}
{"timestamp": "2025-12-29T12:36:57.345962+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'name_1': 'Standard Layout 1767011817.339759'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ad525f6c-b428-4bcf-99af-147eff0798a8"}
{"timestamp": "2025-12-29T12:36:57.349799+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ad525f6c-b428-4bcf-99af-147eff0798a8"}
{"timestamp": "2025-12-29T12:36:57.350158+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'name': 'Standard Layout 1767011817.339759', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ad525f6c-b428-4bcf-99af-147eff0798a8"}
{"timestamp": "2025-12-29T12:36:57.352374+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "ad525f6c-b428-4bcf-99af-147eff0798a8"}
{"timestamp": "2025-12-29T12:36:57.356854+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ad525f6c-b428-4bcf-99af-147eff0798a8"}
{"timestamp": "2025-12-29T12:36:57.357878+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ad525f6c-b428-4bcf-99af-147eff0798a8"}
{"timestamp": "2025-12-29T12:36:57.358425+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ad525f6c-b428-4bcf-99af-147eff0798a8"}
{"timestamp": "2025-12-29T12:36:57.360793+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 22}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "ad525f6c-b428-4bcf-99af-147eff0798a8"}
{"timestamp": "2025-12-29T12:36:57.361782+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "ad525f6c-b428-4bcf-99af-147eff0798a8"}
{"timestamp": "2025-12-29T12:36:57.361924+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "ad525f6c-b428-4bcf-99af-147eff0798a8"}
{"timestamp": "2025-12-29T12:36:57.363101+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "ad525f6c-b428-4bcf-99af-147eff0798a8"}
{"timestamp": "2025-12-29T12:36:57.364114+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ad525f6c-b428-4bcf-99af-147eff0798a8"}
{"timestamp": "2025-12-29T12:36:57.365536+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "9ecb180d-ddd7-47b6-84ad-98739cdfa4cb"}
{"timestamp": "2025-12-29T12:36:57.368539+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9ecb180d-ddd7-47b6-84ad-98739cdfa4cb"}
{"timestamp": "2025-12-29T12:36:57.369888+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ecb180d-ddd7-47b6-84ad-98739cdfa4cb"}
{"timestamp": "2025-12-29T12:36:57.370241+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'name_1': 'Screen 1 1767011817.363803', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ecb180d-ddd7-47b6-84ad-98739cdfa4cb"}
{"timestamp": "2025-12-29T12:36:57.373507+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ecb180d-ddd7-47b6-84ad-98739cdfa4cb"}
{"timestamp": "2025-12-29T12:36:57.373952+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'id_1': 22, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ecb180d-ddd7-47b6-84ad-98739cdfa4cb"}
{"timestamp": "2025-12-29T12:36:57.376401+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ecb180d-ddd7-47b6-84ad-98739cdfa4cb"}
{"timestamp": "2025-12-29T12:36:57.376868+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'name': 'Screen 1 1767011817.363803', 'capacity': 150, 'seat_layout_id': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ecb180d-ddd7-47b6-84ad-98739cdfa4cb"}
{"timestamp": "2025-12-29T12:36:57.378885+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "9ecb180d-ddd7-47b6-84ad-98739cdfa4cb"}
{"timestamp": "2025-12-29T12:36:57.383610+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9ecb180d-ddd7-47b6-84ad-98739cdfa4cb"}
{"timestamp": "2025-12-29T12:36:57.389205+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ecb180d-ddd7-47b6-84ad-98739cdfa4cb"}
{"timestamp": "2025-12-29T12:36:57.389433+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ecb180d-ddd7-47b6-84ad-98739cdfa4cb"}
{"timestamp": "2025-12-29T12:36:57.391703+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 22}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "9ecb180d-ddd7-47b6-84ad-98739cdfa4cb"}
{"timestamp": "2025-12-29T12:36:57.392593+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "9ecb180d-ddd7-47b6-84ad-98739cdfa4cb"}
{"timestamp": "2025-12-29T12:36:57.392772+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "9ecb180d-ddd7-47b6-84ad-98739cdfa4cb"}
{"timestamp": "2025-12-29T12:36:57.393927+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.028s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "9ecb180d-ddd7-47b6-84ad-98739cdfa4cb"}
{"timestamp": "2025-12-29T12:36:57.394798+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "9ecb180d-ddd7-47b6-84ad-98739cdfa4cb"}
{"timestamp": "2025-12-29T12:36:57.396453+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.398870+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.399839+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.400400+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.403312+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.403532+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.406370+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.406807+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'screen_id_1': 22, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.409716+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.409984+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 23, 'screen_id': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.411953+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.416537+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.417585+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.417973+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'pk_1': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.421209+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.421681+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.424047+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.424393+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.425804+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 19}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.426698+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.426936+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.428646+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.032s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.429577+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.431377+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /seatavailability/grid/19", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b869094f-3222-4081-b6fb-88b8611aafd3"}
{"timestamp": "2025-12-29T12:36:57.433805+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b869094f-3222-4081-b6fb-88b8611aafd3"}
{"timestamp": "2025-12-29T12:36:57.435413+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b869094f-3222-4081-b6fb-88b8611aafd3"}
{"timestamp": "2025-12-29T12:36:57.435961+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'showtime_id_1': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b869094f-3222-4081-b6fb-88b8611aafd3"}
{"timestamp": "2025-12-29T12:36:57.438708+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /seatavailability/grid/19 \u2192 200 (0.007s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b869094f-3222-4081-b6fb-88b8611aafd3"}
{"timestamp": "2025-12-29T12:36:57.439771+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b869094f-3222-4081-b6fb-88b8611aafd3"}
{"timestamp": "2025-12-29T12:36:57.441559+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.444565+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.445341+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.445950+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.144s ago] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.449515+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.450164+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'user_id': 26, 'showtime_id': 19, 'seat_code': 'R5-8', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 12, 36, 57, 449026, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 12, 46, 57, 448148, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.452658+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.456989+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.458092+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.458314+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'pk_1': 18}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.460470+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 18, 'user_id': 26, 'showtime_id': 19, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.461440+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.463040+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.464555+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.464983+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00087s] {'showtime_id_1': 19, 'seat_code_1': 'R5-8', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.467859+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.468103+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00040s] {'seat_code': 'R5-8', 'showtime_id': 19, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.470839+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.471193+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00042s] {'status': 'LOCKED', 'locked_by_user_id': 26, 'lock_expires_at': datetime.datetime(2025, 12, 29, 12, 46, 57, 469401, tzinfo=datetime.timezone.utc), 'seat_locks_id': 15}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.472899+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.476534+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.477804+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.478274+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00073s] {'pk_1': 15}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.480237+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 19, 'seat_code': 'R5-8', 'user_id': 26, 'expires_at': '2025-12-29T12:46:57.469401+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.480404+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.480525+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.480819+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.481968+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.482662+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 18, 'user_id': 26, 'showtime_id': 19, 'seat_code': 'R5-8'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.482971+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 18", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.484755+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.485930+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.486167+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00043s] {'user_id': 26, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 18}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.488411+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.492308+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.493458+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.493699+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'pk_1': 18}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.495443+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 18, 'reservation_id': 18, 'user_id': 26, 'showtime_id': 19, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.495672+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.496122+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 18", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.518344+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.520360+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.520756+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.526380+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 18, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.526586+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.527254+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 18, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.529420+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Failed to update order pricing: 'OrderRepository' object has no attribute 'get_by_id'", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 114, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\order\\handlers.py\", line 100, in on_pricing_snapshot_created\n    order = repo.get_by_id(db, order_id)\n            ^^^^^^^^^^^^^^\nAttributeError: 'OrderRepository' object has no attribute 'get_by_id'"}
{"timestamp": "2025-12-29T12:36:57.530903+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.531123+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 18: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.531530+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.533151+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.533415+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 18", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.533777+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.535041+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.536843+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.538108+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.538469+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'actor_id': 26, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 18, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 18, \"user_id\": 26, \"showtime_id\": 19, \"seat_code\": \"R5-8\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 12, 36, 57, 537685, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.541410+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.545710+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.547059+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.547612+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00072s] {'pk_1': 18}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.549802+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.550673+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.552063+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.111s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.552918+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.554846+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "68feca7d-745e-4a48-b18d-278834625a61"}
{"timestamp": "2025-12-29T12:36:57.557266+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "68feca7d-745e-4a48-b18d-278834625a61"}
{"timestamp": "2025-12-29T12:36:57.557940+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68feca7d-745e-4a48-b18d-278834625a61"}
{"timestamp": "2025-12-29T12:36:57.558230+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2565s ago] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68feca7d-745e-4a48-b18d-278834625a61"}
{"timestamp": "2025-12-29T12:36:57.561321+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68feca7d-745e-4a48-b18d-278834625a61"}
{"timestamp": "2025-12-29T12:36:57.561564+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'user_id_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68feca7d-745e-4a48-b18d-278834625a61"}
{"timestamp": "2025-12-29T12:36:57.563620+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.009s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "68feca7d-745e-4a48-b18d-278834625a61"}
{"timestamp": "2025-12-29T12:36:57.564589+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "68feca7d-745e-4a48-b18d-278834625a61"}
{"timestamp": "2025-12-29T12:36:57.566305+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/order/18/initiate", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "ee6efedf-5017-4462-9b0b-18594762b3ba"}
{"timestamp": "2025-12-29T12:36:57.568489+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ee6efedf-5017-4462-9b0b-18594762b3ba"}
{"timestamp": "2025-12-29T12:36:57.569011+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ee6efedf-5017-4462-9b0b-18594762b3ba"}
{"timestamp": "2025-12-29T12:36:57.569227+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2676s ago] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ee6efedf-5017-4462-9b0b-18594762b3ba"}
{"timestamp": "2025-12-29T12:36:57.572688+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO payment_attempts (order_id, amount_attempted, status, final_amount, failure_reason, provider_payment_id, created_at) VALUES (%(order_id)s, %(amount_attempted)s, %(status)s, %(final_amount)s, %(failure_reason)s, %(provider_payment_id)s, %(created_at)s) RETURNING payment_attempts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ee6efedf-5017-4462-9b0b-18594762b3ba"}
{"timestamp": "2025-12-29T12:36:57.572960+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'order_id': 18, 'amount_attempted': 10.0, 'status': 'PENDING', 'final_amount': 10.0, 'failure_reason': None, 'provider_payment_id': None, 'created_at': datetime.datetime(2025, 12, 29, 12, 36, 57, 572318, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ee6efedf-5017-4462-9b0b-18594762b3ba"}
{"timestamp": "2025-12-29T12:36:57.574983+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "ee6efedf-5017-4462-9b0b-18594762b3ba"}
{"timestamp": "2025-12-29T12:36:57.579058+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ee6efedf-5017-4462-9b0b-18594762b3ba"}
{"timestamp": "2025-12-29T12:36:57.580249+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ee6efedf-5017-4462-9b0b-18594762b3ba"}
{"timestamp": "2025-12-29T12:36:57.580478+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'pk_1': 11}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ee6efedf-5017-4462-9b0b-18594762b3ba"}
{"timestamp": "2025-12-29T12:36:57.583131+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.pending with payload: {'payment_attempt_id': 11, 'order_id': 18, 'amount_attempted': 10.0, 'final_amount': 10.0}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "ee6efedf-5017-4462-9b0b-18594762b3ba"}
{"timestamp": "2025-12-29T12:36:57.584328+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.pending to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "ee6efedf-5017-4462-9b0b-18594762b3ba"}
{"timestamp": "2025-12-29T12:36:57.584529+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: payment.pending", "module": "event_bus", "function": "publish", "line": 31, "request_id": "ee6efedf-5017-4462-9b0b-18594762b3ba"}
{"timestamp": "2025-12-29T12:36:57.585800+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/order/18/initiate \u2192 200 (0.019s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "ee6efedf-5017-4462-9b0b-18594762b3ba"}
{"timestamp": "2025-12-29T12:36:57.586996+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ee6efedf-5017-4462-9b0b-18594762b3ba"}
{"timestamp": "2025-12-29T12:36:57.588554+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/11/confirm", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "2f880832-3145-4b2f-9fa7-94df960df245"}
{"timestamp": "2025-12-29T12:36:57.591070+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2f880832-3145-4b2f-9fa7-94df960df245"}
{"timestamp": "2025-12-29T12:36:57.591701+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f880832-3145-4b2f-9fa7-94df960df245"}
{"timestamp": "2025-12-29T12:36:57.592055+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2903s ago] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f880832-3145-4b2f-9fa7-94df960df245"}
{"timestamp": "2025-12-29T12:36:57.595454+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id AS payment_attempts_id, payment_attempts.order_id AS payment_attempts_order_id, payment_attempts.amount_attempted AS payment_attempts_amount_attempted, payment_attempts.status AS payment_attempts_status, payment_attempts.final_amount AS payment_attempts_final_amount, payment_attempts.failure_reason AS payment_attempts_failure_reason, payment_attempts.provider_payment_id AS payment_attempts_provider_payment_id, payment_attempts.created_at AS payment_attempts_created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f880832-3145-4b2f-9fa7-94df960df245"}
{"timestamp": "2025-12-29T12:36:57.595820+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'pk_1': 11}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f880832-3145-4b2f-9fa7-94df960df245"}
{"timestamp": "2025-12-29T12:36:57.598407+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f880832-3145-4b2f-9fa7-94df960df245"}
{"timestamp": "2025-12-29T12:36:57.598763+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'pk_1': 18}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f880832-3145-4b2f-9fa7-94df960df245"}
{"timestamp": "2025-12-29T12:36:57.600808+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2f880832-3145-4b2f-9fa7-94df960df245"}
{"timestamp": "2025-12-29T12:36:57.614106+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.middleware", "message": "\u2717 POST /payments/11/confirm \u2192 FAILED (0.014s)", "module": "middleware", "function": "dispatch", "line": 83, "request_id": "2f880832-3145-4b2f-9fa7-94df960df245", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 151, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\streams\\memory.py\", line 126, in receive\n    raise EndOfStream from None\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\middleware.py\", line 57, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    raise app_exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 390, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 291, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\concurrency.py\", line 38, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\to_thread.py\", line 56, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 2485, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 976, in run\n    result = context.run(func, *args)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\payment\\router.py\", line 50, in confirm_payment_route\n    return mark_payment_succeeded(\n        db=db,\n        payment_attempt_id=payment_attempt_id,\n        provider_payment_id=provider_payment_id\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\payment\\service.py\", line 66, in mark_payment_succeeded\n    raise ValidationError(\"Final amount not equal to order amount\")\napp.core.errors.ValidationError: Final amount not equal to order amount"}
{"timestamp": "2025-12-29T12:40:23.459710+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-29T12:40:25.317088+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-29T12:40:25.317353+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-29T12:40:25.317555+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.317721+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.317838+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.317949+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.318124+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.318240+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.318415+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.318611+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.318799+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.318939+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.319124+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.319320+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.319449+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.319565+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.319681+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.319795+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.319906+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.320071+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.320363+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.320552+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.320809+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.321109+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.321388+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.321775+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.322175+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.322489+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.322746+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.322909+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.323088+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.323273+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.323494+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.323729+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.323984+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.324202+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.324387+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.324652+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.325006+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.325197+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.325374+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.325605+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.325809+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.325962+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.326081+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.326268+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.326511+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.326631+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.326748+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.326863+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.326976+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.327174+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.327391+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.327626+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.327830+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.328026+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.328294+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.328548+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.328761+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.328974+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.329218+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.329395+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.329514+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-29T12:40:25.329623+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-29T12:40:45.410759+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.454240+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.454655+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.457075+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.457407+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.459495+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.459862+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.462467+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.465069+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.465497+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'email_1': 'test_1767012043.352704@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.690243+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.690723+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00063s] {'email': 'test_1767012043.352704@example.com', 'hashed_password': '$2b$12$dcPE5bJyLqJWV89/GLE.6eP4jRynulA.3iP.7.TlidyqtshvPyk7i', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.692873+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.698461+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.700182+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.700669+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00072s] {'pk_1': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.703130+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 27, 'email': 'test_1767012043.352704@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.704796+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.727469+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.729001+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.729237+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'user_id_1': 27, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.733049+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.733440+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'user_id': 27, 'name': None, 'email': 'test_1767012043.352704@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.736408+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.740954+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.742170+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.742686+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00070s] {'pk_1': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.744896+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 27, 'user_id': 27, 'email': 'test_1767012043.352704@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.745058+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.745187+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.745417+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.746909+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.748344+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.748865+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2839s ago] {'email_1': 'test_1767012043.352704@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.963990+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 27, 'email': 'test_1767012043.352704@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.965178+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.965361+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.966700+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.556s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.967693+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.969941+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/login", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "c344426e-8a70-4595-a0c9-7a2d3a9f6655"}
{"timestamp": "2025-12-29T12:40:45.978499+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c344426e-8a70-4595-a0c9-7a2d3a9f6655"}
{"timestamp": "2025-12-29T12:40:45.979405+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c344426e-8a70-4595-a0c9-7a2d3a9f6655"}
{"timestamp": "2025-12-29T12:40:45.979838+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.5149s ago] {'email_1': 'test_1767012043.352704@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c344426e-8a70-4595-a0c9-7a2d3a9f6655"}
{"timestamp": "2025-12-29T12:40:46.189316+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 27, 'email': 'test_1767012043.352704@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "c344426e-8a70-4595-a0c9-7a2d3a9f6655"}
{"timestamp": "2025-12-29T12:40:46.190513+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "c344426e-8a70-4595-a0c9-7a2d3a9f6655"}
{"timestamp": "2025-12-29T12:40:46.190977+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "c344426e-8a70-4595-a0c9-7a2d3a9f6655"}
{"timestamp": "2025-12-29T12:40:46.192217+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/login \u2192 200 (0.222s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "c344426e-8a70-4595-a0c9-7a2d3a9f6655"}
{"timestamp": "2025-12-29T12:40:46.193088+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c344426e-8a70-4595-a0c9-7a2d3a9f6655"}
{"timestamp": "2025-12-29T12:40:46.194513+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /profiles/me", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "e33ef20f-136c-4f14-a0f6-c0833cd1c488"}
{"timestamp": "2025-12-29T12:40:46.197484+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e33ef20f-136c-4f14-a0f6-c0833cd1c488"}
{"timestamp": "2025-12-29T12:40:46.198714+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e33ef20f-136c-4f14-a0f6-c0833cd1c488"}
{"timestamp": "2025-12-29T12:40:46.199121+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00067s] {'pk_1': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e33ef20f-136c-4f14-a0f6-c0833cd1c488"}
{"timestamp": "2025-12-29T12:40:46.202421+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e33ef20f-136c-4f14-a0f6-c0833cd1c488"}
{"timestamp": "2025-12-29T12:40:46.202719+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.4739s ago] {'user_id_1': 27, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e33ef20f-136c-4f14-a0f6-c0833cd1c488"}
{"timestamp": "2025-12-29T12:40:46.205739+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /profiles/me \u2192 200 (0.011s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "e33ef20f-136c-4f14-a0f6-c0833cd1c488"}
{"timestamp": "2025-12-29T12:40:46.206941+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "e33ef20f-136c-4f14-a0f6-c0833cd1c488"}
{"timestamp": "2025-12-29T12:40:46.208825+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "50217c0d-ffda-439f-b16e-bf90b1b4e97e"}
{"timestamp": "2025-12-29T12:40:46.211391+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "50217c0d-ffda-439f-b16e-bf90b1b4e97e"}
{"timestamp": "2025-12-29T12:40:46.213468+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50217c0d-ffda-439f-b16e-bf90b1b4e97e"}
{"timestamp": "2025-12-29T12:40:46.213701+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'title_1': 'The Matrix Reloaded 1767012046.20737'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50217c0d-ffda-439f-b16e-bf90b1b4e97e"}
{"timestamp": "2025-12-29T12:40:46.217078+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50217c0d-ffda-439f-b16e-bf90b1b4e97e"}
{"timestamp": "2025-12-29T12:40:46.217426+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00070s] {'title': 'The Matrix Reloaded 1767012046.20737', 'description': 'Test movie: The Matrix Reloaded 1767012046.20737', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50217c0d-ffda-439f-b16e-bf90b1b4e97e"}
{"timestamp": "2025-12-29T12:40:46.219447+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "50217c0d-ffda-439f-b16e-bf90b1b4e97e"}
{"timestamp": "2025-12-29T12:40:46.223666+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "50217c0d-ffda-439f-b16e-bf90b1b4e97e"}
{"timestamp": "2025-12-29T12:40:46.224768+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50217c0d-ffda-439f-b16e-bf90b1b4e97e"}
{"timestamp": "2025-12-29T12:40:46.225226+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50217c0d-ffda-439f-b16e-bf90b1b4e97e"}
{"timestamp": "2025-12-29T12:40:46.227932+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 24}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "50217c0d-ffda-439f-b16e-bf90b1b4e97e"}
{"timestamp": "2025-12-29T12:40:46.228933+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "50217c0d-ffda-439f-b16e-bf90b1b4e97e"}
{"timestamp": "2025-12-29T12:40:46.229088+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "50217c0d-ffda-439f-b16e-bf90b1b4e97e"}
{"timestamp": "2025-12-29T12:40:46.230494+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "50217c0d-ffda-439f-b16e-bf90b1b4e97e"}
{"timestamp": "2025-12-29T12:40:46.231543+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "50217c0d-ffda-439f-b16e-bf90b1b4e97e"}
{"timestamp": "2025-12-29T12:40:46.233328+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "397a1a48-2e88-4b5b-be83-1a013ae4be43"}
{"timestamp": "2025-12-29T12:40:46.236043+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "397a1a48-2e88-4b5b-be83-1a013ae4be43"}
{"timestamp": "2025-12-29T12:40:46.237499+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "397a1a48-2e88-4b5b-be83-1a013ae4be43"}
{"timestamp": "2025-12-29T12:40:46.237922+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'name_1': 'Standard Layout 1767012046.231532'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "397a1a48-2e88-4b5b-be83-1a013ae4be43"}
{"timestamp": "2025-12-29T12:40:46.241122+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "397a1a48-2e88-4b5b-be83-1a013ae4be43"}
{"timestamp": "2025-12-29T12:40:46.241576+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'name': 'Standard Layout 1767012046.231532', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "397a1a48-2e88-4b5b-be83-1a013ae4be43"}
{"timestamp": "2025-12-29T12:40:46.243402+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "397a1a48-2e88-4b5b-be83-1a013ae4be43"}
{"timestamp": "2025-12-29T12:40:46.247504+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "397a1a48-2e88-4b5b-be83-1a013ae4be43"}
{"timestamp": "2025-12-29T12:40:46.248744+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "397a1a48-2e88-4b5b-be83-1a013ae4be43"}
{"timestamp": "2025-12-29T12:40:46.249081+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "397a1a48-2e88-4b5b-be83-1a013ae4be43"}
{"timestamp": "2025-12-29T12:40:46.251235+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 23}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "397a1a48-2e88-4b5b-be83-1a013ae4be43"}
{"timestamp": "2025-12-29T12:40:46.252121+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "397a1a48-2e88-4b5b-be83-1a013ae4be43"}
{"timestamp": "2025-12-29T12:40:46.252252+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "397a1a48-2e88-4b5b-be83-1a013ae4be43"}
{"timestamp": "2025-12-29T12:40:46.253559+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.020s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "397a1a48-2e88-4b5b-be83-1a013ae4be43"}
{"timestamp": "2025-12-29T12:40:46.254847+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "397a1a48-2e88-4b5b-be83-1a013ae4be43"}
{"timestamp": "2025-12-29T12:40:46.256084+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "44423d49-eb9f-477e-bd53-4058d545760e"}
{"timestamp": "2025-12-29T12:40:46.258566+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "44423d49-eb9f-477e-bd53-4058d545760e"}
{"timestamp": "2025-12-29T12:40:46.259903+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "44423d49-eb9f-477e-bd53-4058d545760e"}
{"timestamp": "2025-12-29T12:40:46.260456+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00066s] {'name_1': 'Screen 1 1767012046.254409', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "44423d49-eb9f-477e-bd53-4058d545760e"}
{"timestamp": "2025-12-29T12:40:46.263849+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "44423d49-eb9f-477e-bd53-4058d545760e"}
{"timestamp": "2025-12-29T12:40:46.264225+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00064s] {'id_1': 23, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "44423d49-eb9f-477e-bd53-4058d545760e"}
{"timestamp": "2025-12-29T12:40:46.266403+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "44423d49-eb9f-477e-bd53-4058d545760e"}
{"timestamp": "2025-12-29T12:40:46.266837+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00040s] {'name': 'Screen 1 1767012046.254409', 'capacity': 150, 'seat_layout_id': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "44423d49-eb9f-477e-bd53-4058d545760e"}
{"timestamp": "2025-12-29T12:40:46.268763+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "44423d49-eb9f-477e-bd53-4058d545760e"}
{"timestamp": "2025-12-29T12:40:46.272667+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "44423d49-eb9f-477e-bd53-4058d545760e"}
{"timestamp": "2025-12-29T12:40:46.277815+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "44423d49-eb9f-477e-bd53-4058d545760e"}
{"timestamp": "2025-12-29T12:40:46.278073+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "44423d49-eb9f-477e-bd53-4058d545760e"}
{"timestamp": "2025-12-29T12:40:46.280498+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 23}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "44423d49-eb9f-477e-bd53-4058d545760e"}
{"timestamp": "2025-12-29T12:40:46.281512+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "44423d49-eb9f-477e-bd53-4058d545760e"}
{"timestamp": "2025-12-29T12:40:46.281663+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "44423d49-eb9f-477e-bd53-4058d545760e"}
{"timestamp": "2025-12-29T12:40:46.282783+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.027s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "44423d49-eb9f-477e-bd53-4058d545760e"}
{"timestamp": "2025-12-29T12:40:46.283685+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "44423d49-eb9f-477e-bd53-4058d545760e"}
{"timestamp": "2025-12-29T12:40:46.285394+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.288315+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.289482+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.289914+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.292871+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.293264+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.296352+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.296765+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'screen_id_1': 23, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.299588+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.300072+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 24, 'screen_id': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.302439+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.306490+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.307381+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.307603+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00042s] {'pk_1': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.311371+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.311731+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00085s] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.313874+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.314287+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.315880+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 20}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.316886+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.317024+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.318121+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.033s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.319083+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.320803+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /seatavailability/grid/20", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "320645b3-173c-4eb3-b41b-8a85da4f0038"}
{"timestamp": "2025-12-29T12:40:46.323470+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "320645b3-173c-4eb3-b41b-8a85da4f0038"}
{"timestamp": "2025-12-29T12:40:46.325209+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "320645b3-173c-4eb3-b41b-8a85da4f0038"}
{"timestamp": "2025-12-29T12:40:46.325792+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'showtime_id_1': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "320645b3-173c-4eb3-b41b-8a85da4f0038"}
{"timestamp": "2025-12-29T12:40:46.328801+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /seatavailability/grid/20 \u2192 200 (0.008s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "320645b3-173c-4eb3-b41b-8a85da4f0038"}
{"timestamp": "2025-12-29T12:40:46.329844+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "320645b3-173c-4eb3-b41b-8a85da4f0038"}
{"timestamp": "2025-12-29T12:40:46.331776+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.334282+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.334806+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.335269+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.1368s ago] {'pk_1': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.338829+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.339216+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'user_id': 27, 'showtime_id': 20, 'seat_code': 'R5-8', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 12, 40, 46, 338456, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 12, 50, 46, 337591, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.341424+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.346101+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.347697+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.348268+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00065s] {'pk_1': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.351186+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 19, 'user_id': 27, 'showtime_id': 20, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.352445+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.354936+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.355974+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.356303+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'showtime_id_1': 20, 'seat_code_1': 'R5-8', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.359829+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.360287+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'seat_code': 'R5-8', 'showtime_id': 20, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.363097+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.363499+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'status': 'LOCKED', 'locked_by_user_id': 27, 'lock_expires_at': datetime.datetime(2025, 12, 29, 12, 50, 46, 361881, tzinfo=datetime.timezone.utc), 'seat_locks_id': 16}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.365559+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.369333+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.370175+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.370391+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00038s] {'pk_1': 16}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.372573+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 20, 'seat_code': 'R5-8', 'user_id': 27, 'expires_at': '2025-12-29T12:50:46.361881+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.372727+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.372844+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.373257+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.374334+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.374975+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 19, 'user_id': 27, 'showtime_id': 20, 'seat_code': 'R5-8'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.375245+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 19", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.376877+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.378280+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.378642+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'user_id': 27, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.381028+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.384887+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.385999+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.386287+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'pk_1': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.388436+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 19, 'reservation_id': 19, 'user_id': 27, 'showtime_id': 20, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.388791+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.389412+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 19", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.414145+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.415822+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.416303+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.419108+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 19, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.419308+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.420211+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 19, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.433559+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.434783+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.435212+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'pk_1': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.438894+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.439411+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.441317+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.445437+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.446136+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.446627+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.06063s ago] {'pk_1': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.448592+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 19 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.448930+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.450046+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.450243+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 19: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.450487+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.451707+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.452063+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 19", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.452502+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.453787+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.455815+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.457487+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.458189+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'actor_id': 27, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 19, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 19, \"user_id\": 27, \"showtime_id\": 20, \"seat_code\": \"R5-8\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 12, 40, 46, 456988, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.460714+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.465120+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.466571+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.466856+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'pk_1': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.470090+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.471483+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.472767+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.141s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.473646+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.475543+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "16e79842-63b2-4f6f-a633-b855555283a2"}
{"timestamp": "2025-12-29T12:40:46.478440+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "16e79842-63b2-4f6f-a633-b855555283a2"}
{"timestamp": "2025-12-29T12:40:46.479104+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "16e79842-63b2-4f6f-a633-b855555283a2"}
{"timestamp": "2025-12-29T12:40:46.479673+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2811s ago] {'pk_1': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "16e79842-63b2-4f6f-a633-b855555283a2"}
{"timestamp": "2025-12-29T12:40:46.483527+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "16e79842-63b2-4f6f-a633-b855555283a2"}
{"timestamp": "2025-12-29T12:40:46.483993+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00088s] {'user_id_1': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "16e79842-63b2-4f6f-a633-b855555283a2"}
{"timestamp": "2025-12-29T12:40:46.487792+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.012s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "16e79842-63b2-4f6f-a633-b855555283a2"}
{"timestamp": "2025-12-29T12:40:46.489214+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "16e79842-63b2-4f6f-a633-b855555283a2"}
{"timestamp": "2025-12-29T12:40:46.491081+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/order/19/initiate", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "52d16839-652d-420b-9ae4-f39761b38862"}
{"timestamp": "2025-12-29T12:40:46.493978+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "52d16839-652d-420b-9ae4-f39761b38862"}
{"timestamp": "2025-12-29T12:40:46.494809+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "52d16839-652d-420b-9ae4-f39761b38862"}
{"timestamp": "2025-12-29T12:40:46.495350+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2968s ago] {'pk_1': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "52d16839-652d-420b-9ae4-f39761b38862"}
{"timestamp": "2025-12-29T12:40:46.499790+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO payment_attempts (order_id, amount_attempted, status, final_amount, failure_reason, provider_payment_id, created_at) VALUES (%(order_id)s, %(amount_attempted)s, %(status)s, %(final_amount)s, %(failure_reason)s, %(provider_payment_id)s, %(created_at)s) RETURNING payment_attempts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "52d16839-652d-420b-9ae4-f39761b38862"}
{"timestamp": "2025-12-29T12:40:46.500396+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'order_id': 19, 'amount_attempted': 10.0, 'status': 'PENDING', 'final_amount': 10.0, 'failure_reason': None, 'provider_payment_id': None, 'created_at': datetime.datetime(2025, 12, 29, 12, 40, 46, 499290, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "52d16839-652d-420b-9ae4-f39761b38862"}
{"timestamp": "2025-12-29T12:40:46.502661+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "52d16839-652d-420b-9ae4-f39761b38862"}
{"timestamp": "2025-12-29T12:40:46.507075+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "52d16839-652d-420b-9ae4-f39761b38862"}
{"timestamp": "2025-12-29T12:40:46.508424+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "52d16839-652d-420b-9ae4-f39761b38862"}
{"timestamp": "2025-12-29T12:40:46.508869+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'pk_1': 12}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "52d16839-652d-420b-9ae4-f39761b38862"}
{"timestamp": "2025-12-29T12:40:46.511729+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.pending with payload: {'payment_attempt_id': 12, 'order_id': 19, 'amount_attempted': 10.0, 'final_amount': 10.0}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "52d16839-652d-420b-9ae4-f39761b38862"}
{"timestamp": "2025-12-29T12:40:46.512778+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.pending to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "52d16839-652d-420b-9ae4-f39761b38862"}
{"timestamp": "2025-12-29T12:40:46.513020+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: payment.pending", "module": "event_bus", "function": "publish", "line": 31, "request_id": "52d16839-652d-420b-9ae4-f39761b38862"}
{"timestamp": "2025-12-29T12:40:46.514572+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/order/19/initiate \u2192 200 (0.024s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "52d16839-652d-420b-9ae4-f39761b38862"}
{"timestamp": "2025-12-29T12:40:46.515432+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "52d16839-652d-420b-9ae4-f39761b38862"}
{"timestamp": "2025-12-29T12:40:46.517323+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/12/confirm", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "971a55fc-8e76-484f-bc99-0c881bdd3f36"}
{"timestamp": "2025-12-29T12:40:46.519633+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "971a55fc-8e76-484f-bc99-0c881bdd3f36"}
{"timestamp": "2025-12-29T12:40:46.520306+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "971a55fc-8e76-484f-bc99-0c881bdd3f36"}
{"timestamp": "2025-12-29T12:40:46.520666+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.3223s ago] {'pk_1': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "971a55fc-8e76-484f-bc99-0c881bdd3f36"}
{"timestamp": "2025-12-29T12:40:46.524009+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id AS payment_attempts_id, payment_attempts.order_id AS payment_attempts_order_id, payment_attempts.amount_attempted AS payment_attempts_amount_attempted, payment_attempts.status AS payment_attempts_status, payment_attempts.final_amount AS payment_attempts_final_amount, payment_attempts.failure_reason AS payment_attempts_failure_reason, payment_attempts.provider_payment_id AS payment_attempts_provider_payment_id, payment_attempts.created_at AS payment_attempts_created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "971a55fc-8e76-484f-bc99-0c881bdd3f36"}
{"timestamp": "2025-12-29T12:40:46.524522+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00062s] {'pk_1': 12}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "971a55fc-8e76-484f-bc99-0c881bdd3f36"}
{"timestamp": "2025-12-29T12:40:46.527563+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "971a55fc-8e76-484f-bc99-0c881bdd3f36"}
{"timestamp": "2025-12-29T12:40:46.527894+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'pk_1': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "971a55fc-8e76-484f-bc99-0c881bdd3f36"}
{"timestamp": "2025-12-29T12:40:46.530231+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "971a55fc-8e76-484f-bc99-0c881bdd3f36"}
{"timestamp": "2025-12-29T12:40:46.542219+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.middleware", "message": "\u2717 POST /payments/12/confirm \u2192 FAILED (0.015s)", "module": "middleware", "function": "dispatch", "line": 83, "request_id": "971a55fc-8e76-484f-bc99-0c881bdd3f36", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 151, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\streams\\memory.py\", line 126, in receive\n    raise EndOfStream from None\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\middleware.py\", line 57, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    raise app_exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 390, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 291, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\concurrency.py\", line 38, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\to_thread.py\", line 56, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 2485, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 976, in run\n    result = context.run(func, *args)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\payment\\router.py\", line 50, in confirm_payment_route\n    return mark_payment_succeeded(\n        db=db,\n        payment_attempt_id=payment_attempt_id,\n        provider_payment_id=provider_payment_id\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\payment\\service.py\", line 66, in mark_payment_succeeded\n    raise ValidationError(\"Final amount not equal to order amount\")\napp.core.errors.ValidationError: Final amount not equal to order amount"}
{"timestamp": "2025-12-29T12:46:04.811685+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-29T12:46:07.159725+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-29T12:46:07.160196+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-29T12:46:07.160495+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.160707+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.160880+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.161029+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.161202+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.161421+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.161579+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.161758+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.161910+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.162050+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.162212+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.162353+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.162561+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.162785+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.163044+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.163286+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.163506+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.163678+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.163876+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.164040+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.164170+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.164312+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.164467+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.164602+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.164742+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.165044+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.165256+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.165478+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.165689+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.165902+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.166100+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.166399+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.166632+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.166876+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.167073+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.167217+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.167365+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.167494+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.167624+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.167936+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.168276+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.168631+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.169037+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.169241+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.169427+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.169664+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.169971+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.170289+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.170636+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.171007+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.171258+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.171485+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.171635+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.171773+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.171918+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.172330+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.172644+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.172961+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.173161+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.173395+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.173756+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-29T12:46:07.174109+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-29T12:46:21.791536+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:21.848015+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:21.848307+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:21.850808+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:21.851092+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:21.853156+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:21.853475+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:21.855908+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:21.858618+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:21.859192+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00066s] {'email_1': 'test_1767012379.733983@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.084698+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.085093+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'email': 'test_1767012379.733983@example.com', 'hashed_password': '$2b$12$6Nv7IGKLL.S6kBt0SvWqRutCnW5B6XvwT80qJ6RgitvSMwhB31YPq', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.087143+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.093039+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.094526+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.095029+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00071s] {'pk_1': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.097396+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 28, 'email': 'test_1767012379.733983@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.098700+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.134854+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.136484+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.136908+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'user_id_1': 28, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.141186+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.141563+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'user_id': 28, 'name': None, 'email': 'test_1767012379.733983@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.143991+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.148266+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.149414+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.149898+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'pk_1': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.152617+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 28, 'user_id': 28, 'email': 'test_1767012379.733983@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.153005+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.153241+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.153643+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.155349+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.156871+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.157390+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2989s ago] {'email_1': 'test_1767012379.733983@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.370718+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 28, 'email': 'test_1767012379.733983@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.371734+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.371899+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.373157+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.582s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.374105+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.376635+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/login", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "91d10ec2-cdbd-4f14-a7b9-2b8f007a5128"}
{"timestamp": "2025-12-29T12:46:22.382054+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "91d10ec2-cdbd-4f14-a7b9-2b8f007a5128"}
{"timestamp": "2025-12-29T12:46:22.382786+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "91d10ec2-cdbd-4f14-a7b9-2b8f007a5128"}
{"timestamp": "2025-12-29T12:46:22.383185+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.5248s ago] {'email_1': 'test_1767012379.733983@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "91d10ec2-cdbd-4f14-a7b9-2b8f007a5128"}
{"timestamp": "2025-12-29T12:46:22.588448+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 28, 'email': 'test_1767012379.733983@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "91d10ec2-cdbd-4f14-a7b9-2b8f007a5128"}
{"timestamp": "2025-12-29T12:46:22.589508+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "91d10ec2-cdbd-4f14-a7b9-2b8f007a5128"}
{"timestamp": "2025-12-29T12:46:22.589724+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "91d10ec2-cdbd-4f14-a7b9-2b8f007a5128"}
{"timestamp": "2025-12-29T12:46:22.590855+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/login \u2192 200 (0.214s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "91d10ec2-cdbd-4f14-a7b9-2b8f007a5128"}
{"timestamp": "2025-12-29T12:46:22.591762+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "91d10ec2-cdbd-4f14-a7b9-2b8f007a5128"}
{"timestamp": "2025-12-29T12:46:22.593340+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /profiles/me", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "a1068721-e954-4e44-a724-185f19c95256"}
{"timestamp": "2025-12-29T12:46:22.596364+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a1068721-e954-4e44-a724-185f19c95256"}
{"timestamp": "2025-12-29T12:46:22.597500+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a1068721-e954-4e44-a724-185f19c95256"}
{"timestamp": "2025-12-29T12:46:22.598113+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00062s] {'pk_1': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a1068721-e954-4e44-a724-185f19c95256"}
{"timestamp": "2025-12-29T12:46:22.601970+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a1068721-e954-4e44-a724-185f19c95256"}
{"timestamp": "2025-12-29T12:46:22.602660+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.4661s ago] {'user_id_1': 28, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a1068721-e954-4e44-a724-185f19c95256"}
{"timestamp": "2025-12-29T12:46:22.605854+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /profiles/me \u2192 200 (0.012s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "a1068721-e954-4e44-a724-185f19c95256"}
{"timestamp": "2025-12-29T12:46:22.606877+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a1068721-e954-4e44-a724-185f19c95256"}
{"timestamp": "2025-12-29T12:46:22.609158+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "cfb4679a-b64e-439a-a0a7-acbb9a857618"}
{"timestamp": "2025-12-29T12:46:22.611850+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cfb4679a-b64e-439a-a0a7-acbb9a857618"}
{"timestamp": "2025-12-29T12:46:22.613944+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cfb4679a-b64e-439a-a0a7-acbb9a857618"}
{"timestamp": "2025-12-29T12:46:22.614262+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'title_1': 'The Matrix Reloaded 1767012382.607642'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cfb4679a-b64e-439a-a0a7-acbb9a857618"}
{"timestamp": "2025-12-29T12:46:22.617739+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cfb4679a-b64e-439a-a0a7-acbb9a857618"}
{"timestamp": "2025-12-29T12:46:22.618120+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00072s] {'title': 'The Matrix Reloaded 1767012382.607642', 'description': 'Test movie: The Matrix Reloaded 1767012382.607642', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cfb4679a-b64e-439a-a0a7-acbb9a857618"}
{"timestamp": "2025-12-29T12:46:22.620087+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "cfb4679a-b64e-439a-a0a7-acbb9a857618"}
{"timestamp": "2025-12-29T12:46:22.624495+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cfb4679a-b64e-439a-a0a7-acbb9a857618"}
{"timestamp": "2025-12-29T12:46:22.625445+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cfb4679a-b64e-439a-a0a7-acbb9a857618"}
{"timestamp": "2025-12-29T12:46:22.625725+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cfb4679a-b64e-439a-a0a7-acbb9a857618"}
{"timestamp": "2025-12-29T12:46:22.627959+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 25}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "cfb4679a-b64e-439a-a0a7-acbb9a857618"}
{"timestamp": "2025-12-29T12:46:22.629157+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "cfb4679a-b64e-439a-a0a7-acbb9a857618"}
{"timestamp": "2025-12-29T12:46:22.629701+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "cfb4679a-b64e-439a-a0a7-acbb9a857618"}
{"timestamp": "2025-12-29T12:46:22.630889+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "cfb4679a-b64e-439a-a0a7-acbb9a857618"}
{"timestamp": "2025-12-29T12:46:22.631729+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "cfb4679a-b64e-439a-a0a7-acbb9a857618"}
{"timestamp": "2025-12-29T12:46:22.633673+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "800553f9-fb3e-4d15-863c-f1d9517e12d9"}
{"timestamp": "2025-12-29T12:46:22.636351+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "800553f9-fb3e-4d15-863c-f1d9517e12d9"}
{"timestamp": "2025-12-29T12:46:22.637420+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "800553f9-fb3e-4d15-863c-f1d9517e12d9"}
{"timestamp": "2025-12-29T12:46:22.637777+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00040s] {'name_1': 'Standard Layout 1767012382.631882'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "800553f9-fb3e-4d15-863c-f1d9517e12d9"}
{"timestamp": "2025-12-29T12:46:22.641166+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "800553f9-fb3e-4d15-863c-f1d9517e12d9"}
{"timestamp": "2025-12-29T12:46:22.641527+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'name': 'Standard Layout 1767012382.631882', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "800553f9-fb3e-4d15-863c-f1d9517e12d9"}
{"timestamp": "2025-12-29T12:46:22.643975+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "800553f9-fb3e-4d15-863c-f1d9517e12d9"}
{"timestamp": "2025-12-29T12:46:22.648371+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "800553f9-fb3e-4d15-863c-f1d9517e12d9"}
{"timestamp": "2025-12-29T12:46:22.649319+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "800553f9-fb3e-4d15-863c-f1d9517e12d9"}
{"timestamp": "2025-12-29T12:46:22.649619+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "800553f9-fb3e-4d15-863c-f1d9517e12d9"}
{"timestamp": "2025-12-29T12:46:22.652131+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 24}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "800553f9-fb3e-4d15-863c-f1d9517e12d9"}
{"timestamp": "2025-12-29T12:46:22.653565+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "800553f9-fb3e-4d15-863c-f1d9517e12d9"}
{"timestamp": "2025-12-29T12:46:22.653783+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "800553f9-fb3e-4d15-863c-f1d9517e12d9"}
{"timestamp": "2025-12-29T12:46:22.655765+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "800553f9-fb3e-4d15-863c-f1d9517e12d9"}
{"timestamp": "2025-12-29T12:46:22.657035+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "800553f9-fb3e-4d15-863c-f1d9517e12d9"}
{"timestamp": "2025-12-29T12:46:22.658393+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "958d8bab-4854-4306-85f3-da81c6fef8ea"}
{"timestamp": "2025-12-29T12:46:22.661256+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "958d8bab-4854-4306-85f3-da81c6fef8ea"}
{"timestamp": "2025-12-29T12:46:22.662793+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "958d8bab-4854-4306-85f3-da81c6fef8ea"}
{"timestamp": "2025-12-29T12:46:22.663218+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'name_1': 'Screen 1 1767012382.656697', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "958d8bab-4854-4306-85f3-da81c6fef8ea"}
{"timestamp": "2025-12-29T12:46:22.666106+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "958d8bab-4854-4306-85f3-da81c6fef8ea"}
{"timestamp": "2025-12-29T12:46:22.666416+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'id_1': 24, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "958d8bab-4854-4306-85f3-da81c6fef8ea"}
{"timestamp": "2025-12-29T12:46:22.668636+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "958d8bab-4854-4306-85f3-da81c6fef8ea"}
{"timestamp": "2025-12-29T12:46:22.669210+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'name': 'Screen 1 1767012382.656697', 'capacity': 150, 'seat_layout_id': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "958d8bab-4854-4306-85f3-da81c6fef8ea"}
{"timestamp": "2025-12-29T12:46:22.671117+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "958d8bab-4854-4306-85f3-da81c6fef8ea"}
{"timestamp": "2025-12-29T12:46:22.675306+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "958d8bab-4854-4306-85f3-da81c6fef8ea"}
{"timestamp": "2025-12-29T12:46:22.680905+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "958d8bab-4854-4306-85f3-da81c6fef8ea"}
{"timestamp": "2025-12-29T12:46:22.681240+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "958d8bab-4854-4306-85f3-da81c6fef8ea"}
{"timestamp": "2025-12-29T12:46:22.683342+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 24}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "958d8bab-4854-4306-85f3-da81c6fef8ea"}
{"timestamp": "2025-12-29T12:46:22.684674+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "958d8bab-4854-4306-85f3-da81c6fef8ea"}
{"timestamp": "2025-12-29T12:46:22.684851+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "958d8bab-4854-4306-85f3-da81c6fef8ea"}
{"timestamp": "2025-12-29T12:46:22.685941+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.028s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "958d8bab-4854-4306-85f3-da81c6fef8ea"}
{"timestamp": "2025-12-29T12:46:22.686931+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "958d8bab-4854-4306-85f3-da81c6fef8ea"}
{"timestamp": "2025-12-29T12:46:22.688820+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.690966+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.691936+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.692334+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00040s] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.695215+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.695448+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.698099+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.698530+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'screen_id_1': 24, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.701511+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.701774+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 25, 'screen_id': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.703731+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.707927+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.709342+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.709747+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00071s] {'pk_1': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.713157+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.713387+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.715886+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.716183+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.717658+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 21}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.718688+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.718829+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.719926+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.031s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.720769+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.722526+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /seatavailability/grid/21", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "da237471-9bcc-4fdb-b25e-62adb57c8031"}
{"timestamp": "2025-12-29T12:46:22.725028+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "da237471-9bcc-4fdb-b25e-62adb57c8031"}
{"timestamp": "2025-12-29T12:46:22.726560+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da237471-9bcc-4fdb-b25e-62adb57c8031"}
{"timestamp": "2025-12-29T12:46:22.726914+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00042s] {'showtime_id_1': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da237471-9bcc-4fdb-b25e-62adb57c8031"}
{"timestamp": "2025-12-29T12:46:22.729880+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /seatavailability/grid/21 \u2192 200 (0.007s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "da237471-9bcc-4fdb-b25e-62adb57c8031"}
{"timestamp": "2025-12-29T12:46:22.731023+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "da237471-9bcc-4fdb-b25e-62adb57c8031"}
{"timestamp": "2025-12-29T12:46:22.733127+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.736140+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.736858+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.737200+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.14s ago] {'pk_1': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.740463+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.740774+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'user_id': 28, 'showtime_id': 21, 'seat_code': 'R5-8', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 12, 46, 22, 740093, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 12, 56, 22, 739234, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.742949+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.747506+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.748444+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.748707+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00037s] {'pk_1': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.750966+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 20, 'user_id': 28, 'showtime_id': 21, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.752368+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.754411+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.755337+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.755580+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00040s] {'showtime_id_1': 21, 'seat_code_1': 'R5-8', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.758842+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.759243+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'seat_code': 'R5-8', 'showtime_id': 21, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.762108+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.762393+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00042s] {'status': 'LOCKED', 'locked_by_user_id': 28, 'lock_expires_at': datetime.datetime(2025, 12, 29, 12, 56, 22, 760872, tzinfo=datetime.timezone.utc), 'seat_locks_id': 17}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.764060+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.768002+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.768855+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.769221+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'pk_1': 17}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.771750+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 21, 'seat_code': 'R5-8', 'user_id': 28, 'expires_at': '2025-12-29T12:56:22.760872+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.771938+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.772102+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.772362+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.773573+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.774093+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 20, 'user_id': 28, 'showtime_id': 21, 'seat_code': 'R5-8'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.774340+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 20", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.775863+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.777286+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.777755+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00074s] {'user_id': 28, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.780445+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.784279+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.785363+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.785622+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'pk_1': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.787693+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 20, 'reservation_id': 20, 'user_id': 28, 'showtime_id': 21, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.787839+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.788194+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 20", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.817785+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.819386+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.819890+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.822803+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 20, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.823259+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.823967+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 20, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.849569+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.850746+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.851126+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'pk_1': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.854555+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.855007+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.857129+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.861626+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.862332+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.862704+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.07743s ago] {'pk_1': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.864901+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 20 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.865235+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.866181+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.866385+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 20: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.866732+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.868292+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.868470+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 20", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.868788+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.870109+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.871943+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.873307+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.873729+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'actor_id': 28, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 20, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 20, \"user_id\": 28, \"showtime_id\": 21, \"seat_code\": \"R5-8\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 12, 46, 22, 872834, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.876609+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.880377+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.881653+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.882108+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'pk_1': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.884367+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.885578+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.887600+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.154s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.891324+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.893646+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "281379d0-3556-476a-83d9-1ee7a876c93c"}
{"timestamp": "2025-12-29T12:46:22.897645+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "281379d0-3556-476a-83d9-1ee7a876c93c"}
{"timestamp": "2025-12-29T12:46:22.898805+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "281379d0-3556-476a-83d9-1ee7a876c93c"}
{"timestamp": "2025-12-29T12:46:22.899506+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.302s ago] {'pk_1': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "281379d0-3556-476a-83d9-1ee7a876c93c"}
{"timestamp": "2025-12-29T12:46:22.909164+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "281379d0-3556-476a-83d9-1ee7a876c93c"}
{"timestamp": "2025-12-29T12:46:22.914280+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00499s] {'user_id_1': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "281379d0-3556-476a-83d9-1ee7a876c93c"}
{"timestamp": "2025-12-29T12:46:22.918192+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.025s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "281379d0-3556-476a-83d9-1ee7a876c93c"}
{"timestamp": "2025-12-29T12:46:22.919694+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "281379d0-3556-476a-83d9-1ee7a876c93c"}
{"timestamp": "2025-12-29T12:46:22.922050+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/order/20/initiate", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "9500afa8-28a1-4f1f-876c-fd1082d7cf4c"}
{"timestamp": "2025-12-29T12:46:22.925115+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9500afa8-28a1-4f1f-876c-fd1082d7cf4c"}
{"timestamp": "2025-12-29T12:46:22.926669+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9500afa8-28a1-4f1f-876c-fd1082d7cf4c"}
{"timestamp": "2025-12-29T12:46:22.927575+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.3299s ago] {'pk_1': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9500afa8-28a1-4f1f-876c-fd1082d7cf4c"}
{"timestamp": "2025-12-29T12:46:22.932145+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9500afa8-28a1-4f1f-876c-fd1082d7cf4c"}
{"timestamp": "2025-12-29T12:46:22.932409+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.08195s ago] {'pk_1': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9500afa8-28a1-4f1f-876c-fd1082d7cf4c"}
{"timestamp": "2025-12-29T12:46:22.934952+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO payment_attempts (order_id, amount_attempted, status, final_amount, failure_reason, provider_payment_id, created_at) VALUES (%(order_id)s, %(amount_attempted)s, %(status)s, %(final_amount)s, %(failure_reason)s, %(provider_payment_id)s, %(created_at)s) RETURNING payment_attempts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9500afa8-28a1-4f1f-876c-fd1082d7cf4c"}
{"timestamp": "2025-12-29T12:46:22.935271+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'order_id': 20, 'amount_attempted': 1000, 'status': 'PENDING', 'final_amount': 1000, 'failure_reason': None, 'provider_payment_id': None, 'created_at': datetime.datetime(2025, 12, 29, 12, 46, 22, 934559, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9500afa8-28a1-4f1f-876c-fd1082d7cf4c"}
{"timestamp": "2025-12-29T12:46:22.938272+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "9500afa8-28a1-4f1f-876c-fd1082d7cf4c"}
{"timestamp": "2025-12-29T12:46:22.942492+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9500afa8-28a1-4f1f-876c-fd1082d7cf4c"}
{"timestamp": "2025-12-29T12:46:22.943585+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9500afa8-28a1-4f1f-876c-fd1082d7cf4c"}
{"timestamp": "2025-12-29T12:46:22.943850+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'pk_1': 13}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9500afa8-28a1-4f1f-876c-fd1082d7cf4c"}
{"timestamp": "2025-12-29T12:46:22.946781+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.pending with payload: {'payment_attempt_id': 13, 'order_id': 20, 'amount_attempted': 1000, 'final_amount': 1000}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "9500afa8-28a1-4f1f-876c-fd1082d7cf4c"}
{"timestamp": "2025-12-29T12:46:22.948053+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.pending to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "9500afa8-28a1-4f1f-876c-fd1082d7cf4c"}
{"timestamp": "2025-12-29T12:46:22.948215+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: payment.pending", "module": "event_bus", "function": "publish", "line": 31, "request_id": "9500afa8-28a1-4f1f-876c-fd1082d7cf4c"}
{"timestamp": "2025-12-29T12:46:22.949559+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/order/20/initiate \u2192 200 (0.028s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "9500afa8-28a1-4f1f-876c-fd1082d7cf4c"}
{"timestamp": "2025-12-29T12:46:22.950393+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "9500afa8-28a1-4f1f-876c-fd1082d7cf4c"}
{"timestamp": "2025-12-29T12:46:22.952263+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/13/confirm", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.954574+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.955335+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.955765+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.3585s ago] {'pk_1': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.959011+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id AS payment_attempts_id, payment_attempts.order_id AS payment_attempts_order_id, payment_attempts.amount_attempted AS payment_attempts_amount_attempted, payment_attempts.status AS payment_attempts_status, payment_attempts.final_amount AS payment_attempts_final_amount, payment_attempts.failure_reason AS payment_attempts_failure_reason, payment_attempts.provider_payment_id AS payment_attempts_provider_payment_id, payment_attempts.created_at AS payment_attempts_created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.959284+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'pk_1': 13}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.962581+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.963043+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00072s] {'pk_1': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.965652+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE payment_attempts SET status=%(status)s, provider_payment_id=%(provider_payment_id)s WHERE payment_attempts.id = %(payment_attempts_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.965886+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00041s] {'status': 'SUCCEEDED', 'provider_payment_id': 'mock_payment_13', 'payment_attempts_id': 13}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.967360+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.971444+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.971974+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.972277+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.02885s ago] {'pk_1': 13}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.975288+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.975709+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'pk_1': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.977473+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.succeeded with payload: {'payment_attempt_id': 13, 'order_id': 20, 'final_amount': 1000.0}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.978560+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.succeeded to 4 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.979295+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.983442+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.987285+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.event_bus", "message": "\u274c Event handler failed: payment.succeeded -> on_payment_succeeded: 'user_email'", "module": "event_bus", "function": "_safe_invoke", "line": 45, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\event_bus.py\", line 42, in _safe_invoke\n    await handler(payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\notification\\handlers.py\", line 11, in on_payment_succeeded\n    send_booking_confirmation(payload)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\notification\\service.py\", line 31, in send_booking_confirmation\n    to_email=payload[\"user_email\"],\n             ~~~~~~~^^^^^^^^^^^^^^\nKeyError: 'user_email'"}
{"timestamp": "2025-12-29T12:46:22.990024+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.990612+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.990982+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.1179s ago] {'actor_id': None, 'actor_type': 'user', 'action': 'payment.succeeded', 'target_id': 20, 'target_type': 'order', 'payload': '{\"payment_attempt_id\": 13, \"order_id\": 20, \"final_amount\": 1000.0}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 12, 46, 22, 990215, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.993265+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:23.058342+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.event_bus", "message": "\u274c Event handler failed: payment.succeeded -> on_payment_succeeded: (psycopg2.errors.NotNullViolation) null value in column \"actor_id\" of relation \"audit_logs\" violates not-null constraint\nDETAIL:  Failing row contains (21, null, user, payment.succeeded, 20, order, {\"payment_attempt_id\": 13, \"order_id\": 20, \"final_amount\": 1000...., null, 2025-12-29 12:46:22.990215+00).\n\n[SQL: INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id]\n[parameters: {'actor_id': None, 'actor_type': 'user', 'action': 'payment.succeeded', 'target_id': 20, 'target_type': 'order', 'payload': '{\"payment_attempt_id\": 13, \"order_id\": 20, \"final_amount\": 1000.0}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 12, 46, 22, 990215, tzinfo=datetime.timezone.utc)}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)", "module": "event_bus", "function": "_safe_invoke", "line": 45, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\npsycopg2.errors.NotNullViolation: null value in column \"actor_id\" of relation \"audit_logs\" violates not-null constraint\nDETAIL:  Failing row contains (21, null, user, payment.succeeded, 20, order, {\"payment_attempt_id\": 13, \"order_id\": 20, \"final_amount\": 1000...., null, 2025-12-29 12:46:22.990215+00).\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\event_bus.py\", line 42, in _safe_invoke\n    await handler(payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\audit\\handlers.py\", line 44, in on_payment_succeeded\n    write_audit_log(\n    ~~~~~~~~~~~~~~~^\n        db=db,\n        ^^^^^^\n    ...<5 lines>...\n        payload=payload,\n        ^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\audit\\service.py\", line 31, in write_audit_log\n    return repo.create(db, entry)\n           ~~~~~~~~~~~^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\audit\\repository.py\", line 17, in create\n    db.commit()\n    ~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2030, in commit\n    trans.commit(_to_root=True)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^\n  File \"<string>\", line 2, in commit\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\state_changes.py\", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 1311, in commit\n    self._prepare_impl()\n    ~~~~~~~~~~~~~~~~~~^^\n  File \"<string>\", line 2, in _prepare_impl\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\state_changes.py\", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 1286, in _prepare_impl\n    self.session.flush()\n    ~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 4331, in flush\n    self._flush(objects)\n    ~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 4466, in _flush\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 4427, in _flush\n    flush_context.execute()\n    ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py\", line 466, in execute\n    rec.execute(self)\n    ~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py\", line 642, in execute\n    util.preloaded.orm_persistence.save_obj(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self.mapper,\n        ^^^^^^^^^^^^\n        uow.states_for_mapper_hierarchy(self.mapper, False, False),\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        uow,\n        ^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\persistence.py\", line 93, in save_obj\n    _emit_insert_statements(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        base_mapper,\n        ^^^^^^^^^^^^\n    ...<3 lines>...\n        insert,\n        ^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\persistence.py\", line 1233, in _emit_insert_statements\n    result = connection.execute(\n        statement,\n        params,\n        execution_options=execution_options,\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\nsqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column \"actor_id\" of relation \"audit_logs\" violates not-null constraint\nDETAIL:  Failing row contains (21, null, user, payment.succeeded, 20, order, {\"payment_attempt_id\": 13, \"order_id\": 20, \"final_amount\": 1000...., null, 2025-12-29 12:46:22.990215+00).\n\n[SQL: INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id]\n[parameters: {'actor_id': None, 'actor_type': 'user', 'action': 'payment.succeeded', 'target_id': 20, 'target_type': 'order', 'payload': '{\"payment_attempt_id\": 13, \"order_id\": 20, \"final_amount\": 1000.0}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 12, 46, 22, 990215, tzinfo=datetime.timezone.utc)}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)"}
{"timestamp": "2025-12-29T12:46:23.066980+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/13/confirm \u2192 200 (0.115s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:23.068011+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:23.070071+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "48592919-53a5-467c-aa7c-6770550631ca"}
{"timestamp": "2025-12-29T12:46:23.072739+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "48592919-53a5-467c-aa7c-6770550631ca"}
{"timestamp": "2025-12-29T12:46:23.073456+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48592919-53a5-467c-aa7c-6770550631ca"}
{"timestamp": "2025-12-29T12:46:23.073917+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.4766s ago] {'pk_1': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48592919-53a5-467c-aa7c-6770550631ca"}
{"timestamp": "2025-12-29T12:46:23.077216+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48592919-53a5-467c-aa7c-6770550631ca"}
{"timestamp": "2025-12-29T12:46:23.077529+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.173s ago] {'user_id_1': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48592919-53a5-467c-aa7c-6770550631ca"}
{"timestamp": "2025-12-29T12:46:23.079944+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.010s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "48592919-53a5-467c-aa7c-6770550631ca"}
{"timestamp": "2025-12-29T12:46:23.081209+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "48592919-53a5-467c-aa7c-6770550631ca"}
{"timestamp": "2025-12-29T12:49:52.992641+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-29T12:49:55.217462+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-29T12:49:55.217864+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-29T12:49:55.218078+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.218233+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.218374+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.218579+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.218801+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.219034+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.219374+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.219763+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.220107+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.220542+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.220934+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.221272+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.221574+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.221963+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.222372+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.222750+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.223171+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.223504+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.223721+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.223993+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.224253+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.224489+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.224780+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.225143+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.225512+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.225837+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.226239+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.226612+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.227002+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.227378+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.227770+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.228310+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.228884+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.229214+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.229494+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.229785+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.230051+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.230305+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.230505+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.230676+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.230826+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.230954+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.231086+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.231232+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.231397+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.231599+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.231838+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.232124+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.232418+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.233068+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.233370+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.233654+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.233942+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.234172+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.234439+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.234724+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.234948+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.235137+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.235326+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.235581+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.235951+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-29T12:49:55.236363+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-29T12:50:10.365973+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.411668+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.411997+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.414381+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.414762+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.416705+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.417175+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.419360+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.422310+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.422706+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00063s] {'email_1': 'test_1767012608.301873@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.648502+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.648905+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'email': 'test_1767012608.301873@example.com', 'hashed_password': '$2b$12$4JZaqz5nOkUHUPe1xlSl2e71NaMPUv3bg9Os1F1U5vzPE4lW60n2a', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.651114+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.657157+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.658435+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.658858+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.661366+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 29, 'email': 'test_1767012608.301873@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.662566+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.696159+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.697665+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.697997+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'user_id_1': 29, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.702286+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.702917+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'user_id': 29, 'name': None, 'email': 'test_1767012608.301873@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.705311+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.709886+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.711062+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.711453+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00064s] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.713702+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 29, 'user_id': 29, 'email': 'test_1767012608.301873@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.713909+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.714096+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.714393+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.715506+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.717039+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.717590+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2954s ago] {'email_1': 'test_1767012608.301873@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.929441+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 29, 'email': 'test_1767012608.301873@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.930567+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.930728+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.932221+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.567s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.933279+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.935720+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/login", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "bfb74b22-25fb-495d-be8c-f4c8ead95967"}
{"timestamp": "2025-12-29T12:50:10.942934+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bfb74b22-25fb-495d-be8c-f4c8ead95967"}
{"timestamp": "2025-12-29T12:50:10.945352+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bfb74b22-25fb-495d-be8c-f4c8ead95967"}
{"timestamp": "2025-12-29T12:50:10.945959+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.5237s ago] {'email_1': 'test_1767012608.301873@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bfb74b22-25fb-495d-be8c-f4c8ead95967"}
{"timestamp": "2025-12-29T12:50:11.154534+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 29, 'email': 'test_1767012608.301873@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "bfb74b22-25fb-495d-be8c-f4c8ead95967"}
{"timestamp": "2025-12-29T12:50:11.155650+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "bfb74b22-25fb-495d-be8c-f4c8ead95967"}
{"timestamp": "2025-12-29T12:50:11.155814+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "bfb74b22-25fb-495d-be8c-f4c8ead95967"}
{"timestamp": "2025-12-29T12:50:11.156783+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/login \u2192 200 (0.221s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "bfb74b22-25fb-495d-be8c-f4c8ead95967"}
{"timestamp": "2025-12-29T12:50:11.157635+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "bfb74b22-25fb-495d-be8c-f4c8ead95967"}
{"timestamp": "2025-12-29T12:50:11.159129+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /profiles/me", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "0b583b95-e975-49c4-ac69-79f1a3881548"}
{"timestamp": "2025-12-29T12:50:11.161976+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0b583b95-e975-49c4-ac69-79f1a3881548"}
{"timestamp": "2025-12-29T12:50:11.163242+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0b583b95-e975-49c4-ac69-79f1a3881548"}
{"timestamp": "2025-12-29T12:50:11.163614+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0b583b95-e975-49c4-ac69-79f1a3881548"}
{"timestamp": "2025-12-29T12:50:11.166953+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0b583b95-e975-49c4-ac69-79f1a3881548"}
{"timestamp": "2025-12-29T12:50:11.167611+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.4698s ago] {'user_id_1': 29, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0b583b95-e975-49c4-ac69-79f1a3881548"}
{"timestamp": "2025-12-29T12:50:11.170556+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /profiles/me \u2192 200 (0.011s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "0b583b95-e975-49c4-ac69-79f1a3881548"}
{"timestamp": "2025-12-29T12:50:11.171586+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0b583b95-e975-49c4-ac69-79f1a3881548"}
{"timestamp": "2025-12-29T12:50:11.174078+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b3aefc68-a8bc-4788-ba5f-e2d9489ce7fa"}
{"timestamp": "2025-12-29T12:50:11.176814+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b3aefc68-a8bc-4788-ba5f-e2d9489ce7fa"}
{"timestamp": "2025-12-29T12:50:11.178765+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b3aefc68-a8bc-4788-ba5f-e2d9489ce7fa"}
{"timestamp": "2025-12-29T12:50:11.179222+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'title_1': 'The Matrix Reloaded 1767012611.172205'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b3aefc68-a8bc-4788-ba5f-e2d9489ce7fa"}
{"timestamp": "2025-12-29T12:50:11.182837+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b3aefc68-a8bc-4788-ba5f-e2d9489ce7fa"}
{"timestamp": "2025-12-29T12:50:11.183286+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'title': 'The Matrix Reloaded 1767012611.172205', 'description': 'Test movie: The Matrix Reloaded 1767012611.172205', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b3aefc68-a8bc-4788-ba5f-e2d9489ce7fa"}
{"timestamp": "2025-12-29T12:50:11.185757+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b3aefc68-a8bc-4788-ba5f-e2d9489ce7fa"}
{"timestamp": "2025-12-29T12:50:11.190233+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b3aefc68-a8bc-4788-ba5f-e2d9489ce7fa"}
{"timestamp": "2025-12-29T12:50:11.191517+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b3aefc68-a8bc-4788-ba5f-e2d9489ce7fa"}
{"timestamp": "2025-12-29T12:50:11.191969+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b3aefc68-a8bc-4788-ba5f-e2d9489ce7fa"}
{"timestamp": "2025-12-29T12:50:11.195256+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 26}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "b3aefc68-a8bc-4788-ba5f-e2d9489ce7fa"}
{"timestamp": "2025-12-29T12:50:11.196513+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b3aefc68-a8bc-4788-ba5f-e2d9489ce7fa"}
{"timestamp": "2025-12-29T12:50:11.196855+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "b3aefc68-a8bc-4788-ba5f-e2d9489ce7fa"}
{"timestamp": "2025-12-29T12:50:11.198135+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.024s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b3aefc68-a8bc-4788-ba5f-e2d9489ce7fa"}
{"timestamp": "2025-12-29T12:50:11.199018+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b3aefc68-a8bc-4788-ba5f-e2d9489ce7fa"}
{"timestamp": "2025-12-29T12:50:11.201305+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b2f37a8d-3f85-4931-bde4-c4e4c3819e34"}
{"timestamp": "2025-12-29T12:50:11.204011+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b2f37a8d-3f85-4931-bde4-c4e4c3819e34"}
{"timestamp": "2025-12-29T12:50:11.205387+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b2f37a8d-3f85-4931-bde4-c4e4c3819e34"}
{"timestamp": "2025-12-29T12:50:11.205758+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'name_1': 'Standard Layout 1767012611.199249'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b2f37a8d-3f85-4931-bde4-c4e4c3819e34"}
{"timestamp": "2025-12-29T12:50:11.208924+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b2f37a8d-3f85-4931-bde4-c4e4c3819e34"}
{"timestamp": "2025-12-29T12:50:11.209301+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'name': 'Standard Layout 1767012611.199249', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b2f37a8d-3f85-4931-bde4-c4e4c3819e34"}
{"timestamp": "2025-12-29T12:50:11.211173+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b2f37a8d-3f85-4931-bde4-c4e4c3819e34"}
{"timestamp": "2025-12-29T12:50:11.215287+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b2f37a8d-3f85-4931-bde4-c4e4c3819e34"}
{"timestamp": "2025-12-29T12:50:11.216478+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b2f37a8d-3f85-4931-bde4-c4e4c3819e34"}
{"timestamp": "2025-12-29T12:50:11.216809+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b2f37a8d-3f85-4931-bde4-c4e4c3819e34"}
{"timestamp": "2025-12-29T12:50:11.219057+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 25}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "b2f37a8d-3f85-4931-bde4-c4e4c3819e34"}
{"timestamp": "2025-12-29T12:50:11.220107+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b2f37a8d-3f85-4931-bde4-c4e4c3819e34"}
{"timestamp": "2025-12-29T12:50:11.220318+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "b2f37a8d-3f85-4931-bde4-c4e4c3819e34"}
{"timestamp": "2025-12-29T12:50:11.221598+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.020s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b2f37a8d-3f85-4931-bde4-c4e4c3819e34"}
{"timestamp": "2025-12-29T12:50:11.222418+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b2f37a8d-3f85-4931-bde4-c4e4c3819e34"}
{"timestamp": "2025-12-29T12:50:11.224153+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "5f972926-9f6c-4fc3-bc68-d463f71e9222"}
{"timestamp": "2025-12-29T12:50:11.226550+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "5f972926-9f6c-4fc3-bc68-d463f71e9222"}
{"timestamp": "2025-12-29T12:50:11.228271+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f972926-9f6c-4fc3-bc68-d463f71e9222"}
{"timestamp": "2025-12-29T12:50:11.228799+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00067s] {'name_1': 'Screen 1 1767012611.222245', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f972926-9f6c-4fc3-bc68-d463f71e9222"}
{"timestamp": "2025-12-29T12:50:11.232491+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f972926-9f6c-4fc3-bc68-d463f71e9222"}
{"timestamp": "2025-12-29T12:50:11.232854+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'id_1': 25, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f972926-9f6c-4fc3-bc68-d463f71e9222"}
{"timestamp": "2025-12-29T12:50:11.235472+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f972926-9f6c-4fc3-bc68-d463f71e9222"}
{"timestamp": "2025-12-29T12:50:11.235949+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'name': 'Screen 1 1767012611.222245', 'capacity': 150, 'seat_layout_id': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f972926-9f6c-4fc3-bc68-d463f71e9222"}
{"timestamp": "2025-12-29T12:50:11.238068+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "5f972926-9f6c-4fc3-bc68-d463f71e9222"}
{"timestamp": "2025-12-29T12:50:11.242609+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "5f972926-9f6c-4fc3-bc68-d463f71e9222"}
{"timestamp": "2025-12-29T12:50:11.248474+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f972926-9f6c-4fc3-bc68-d463f71e9222"}
{"timestamp": "2025-12-29T12:50:11.248813+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f972926-9f6c-4fc3-bc68-d463f71e9222"}
{"timestamp": "2025-12-29T12:50:11.250970+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 25}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "5f972926-9f6c-4fc3-bc68-d463f71e9222"}
{"timestamp": "2025-12-29T12:50:11.252079+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "5f972926-9f6c-4fc3-bc68-d463f71e9222"}
{"timestamp": "2025-12-29T12:50:11.252229+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "5f972926-9f6c-4fc3-bc68-d463f71e9222"}
{"timestamp": "2025-12-29T12:50:11.253325+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.029s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "5f972926-9f6c-4fc3-bc68-d463f71e9222"}
{"timestamp": "2025-12-29T12:50:11.254124+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "5f972926-9f6c-4fc3-bc68-d463f71e9222"}
{"timestamp": "2025-12-29T12:50:11.255787+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.257904+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.259071+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.259560+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.262717+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.263204+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00070s] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.266218+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.266718+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'screen_id_1': 25, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.269507+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.269944+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 26, 'screen_id': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.271979+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.276006+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.276894+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.277295+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00041s] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.280348+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.280683+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.282712+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.283243+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.284927+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 22}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.285869+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.286005+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.287041+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.031s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.287775+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.289566+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /seatavailability/grid/22", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "a63be856-7a89-4692-9bfd-a5165f61cb80"}
{"timestamp": "2025-12-29T12:50:11.291943+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a63be856-7a89-4692-9bfd-a5165f61cb80"}
{"timestamp": "2025-12-29T12:50:11.293896+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a63be856-7a89-4692-9bfd-a5165f61cb80"}
{"timestamp": "2025-12-29T12:50:11.294263+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'showtime_id_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a63be856-7a89-4692-9bfd-a5165f61cb80"}
{"timestamp": "2025-12-29T12:50:11.297381+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /seatavailability/grid/22 \u2192 200 (0.008s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "a63be856-7a89-4692-9bfd-a5165f61cb80"}
{"timestamp": "2025-12-29T12:50:11.298455+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a63be856-7a89-4692-9bfd-a5165f61cb80"}
{"timestamp": "2025-12-29T12:50:11.300498+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.303155+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.303980+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.304337+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.1413s ago] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.307653+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.307942+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00043s] {'user_id': 29, 'showtime_id': 22, 'seat_code': 'R5-8', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 12, 50, 11, 307294, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 0, 11, 306444, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.310344+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.314120+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.315459+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.315897+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00065s] {'pk_1': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.318017+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 21, 'user_id': 29, 'showtime_id': 22, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.319693+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.322434+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.323576+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.323875+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'showtime_id_1': 22, 'seat_code_1': 'R5-8', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.327857+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.328460+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00069s] {'seat_code': 'R5-8', 'showtime_id': 22, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.331823+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.332368+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00078s] {'status': 'LOCKED', 'locked_by_user_id': 29, 'lock_expires_at': datetime.datetime(2025, 12, 29, 13, 0, 11, 330231, tzinfo=datetime.timezone.utc), 'seat_locks_id': 18}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.334635+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.339113+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.340636+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.341046+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00064s] {'pk_1': 18}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.343038+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 22, 'seat_code': 'R5-8', 'user_id': 29, 'expires_at': '2025-12-29T13:00:11.330231+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.343251+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.343470+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.343735+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.344768+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.345153+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 21, 'user_id': 29, 'showtime_id': 22, 'seat_code': 'R5-8'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.345395+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 21", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.347077+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.348182+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.348431+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00037s] {'user_id': 29, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.350818+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.354988+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.355997+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.356386+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00042s] {'pk_1': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.358677+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 21, 'reservation_id': 21, 'user_id': 29, 'showtime_id': 22, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.358998+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.359931+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 21", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.382485+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.384401+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.384723+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.387971+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 21, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.388145+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.388527+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 21, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.412389+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.413501+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.413836+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'pk_1': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.417134+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.417511+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.419659+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.423671+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.424289+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.424608+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.0687s ago] {'pk_1': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.426567+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 21 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.426811+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.427679+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.427835+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 21: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.428071+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.429315+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.429473+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 21", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.429774+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.431019+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.432695+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.433934+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.434399+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'actor_id': 29, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 21, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 21, \"user_id\": 29, \"showtime_id\": 22, \"seat_code\": \"R5-8\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 12, 50, 11, 433459, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.437638+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.441415+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.442680+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.443123+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.445318+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.446267+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.447468+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.147s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.448420+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.450422+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "a4fe1618-c1a2-4145-aaa9-852a052aec12"}
{"timestamp": "2025-12-29T12:50:11.452597+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a4fe1618-c1a2-4145-aaa9-852a052aec12"}
{"timestamp": "2025-12-29T12:50:11.453175+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a4fe1618-c1a2-4145-aaa9-852a052aec12"}
{"timestamp": "2025-12-29T12:50:11.453611+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2905s ago] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a4fe1618-c1a2-4145-aaa9-852a052aec12"}
{"timestamp": "2025-12-29T12:50:11.456983+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a4fe1618-c1a2-4145-aaa9-852a052aec12"}
{"timestamp": "2025-12-29T12:50:11.457224+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'user_id_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a4fe1618-c1a2-4145-aaa9-852a052aec12"}
{"timestamp": "2025-12-29T12:50:11.459469+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.009s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "a4fe1618-c1a2-4145-aaa9-852a052aec12"}
{"timestamp": "2025-12-29T12:50:11.460428+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a4fe1618-c1a2-4145-aaa9-852a052aec12"}
{"timestamp": "2025-12-29T12:50:11.462192+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/order/21/initiate", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "3754164b-3723-44f9-8417-38185cc90451"}
{"timestamp": "2025-12-29T12:50:11.464822+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3754164b-3723-44f9-8417-38185cc90451"}
{"timestamp": "2025-12-29T12:50:11.465687+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3754164b-3723-44f9-8417-38185cc90451"}
{"timestamp": "2025-12-29T12:50:11.466188+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.3031s ago] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3754164b-3723-44f9-8417-38185cc90451"}
{"timestamp": "2025-12-29T12:50:11.469136+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3754164b-3723-44f9-8417-38185cc90451"}
{"timestamp": "2025-12-29T12:50:11.469433+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.05616s ago] {'pk_1': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3754164b-3723-44f9-8417-38185cc90451"}
{"timestamp": "2025-12-29T12:50:11.471907+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO payment_attempts (order_id, amount_attempted, status, final_amount, failure_reason, provider_payment_id, created_at) VALUES (%(order_id)s, %(amount_attempted)s, %(status)s, %(final_amount)s, %(failure_reason)s, %(provider_payment_id)s, %(created_at)s) RETURNING payment_attempts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3754164b-3723-44f9-8417-38185cc90451"}
{"timestamp": "2025-12-29T12:50:11.472296+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'order_id': 21, 'amount_attempted': 1000, 'status': 'PENDING', 'final_amount': 1000, 'failure_reason': None, 'provider_payment_id': None, 'created_at': datetime.datetime(2025, 12, 29, 12, 50, 11, 471479, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3754164b-3723-44f9-8417-38185cc90451"}
{"timestamp": "2025-12-29T12:50:11.474493+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "3754164b-3723-44f9-8417-38185cc90451"}
{"timestamp": "2025-12-29T12:50:11.478116+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3754164b-3723-44f9-8417-38185cc90451"}
{"timestamp": "2025-12-29T12:50:11.479418+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3754164b-3723-44f9-8417-38185cc90451"}
{"timestamp": "2025-12-29T12:50:11.479653+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'pk_1': 14}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3754164b-3723-44f9-8417-38185cc90451"}
{"timestamp": "2025-12-29T12:50:11.481830+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.pending with payload: {'payment_attempt_id': 14, 'order_id': 21, 'amount_attempted': 1000, 'final_amount': 1000}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "3754164b-3723-44f9-8417-38185cc90451"}
{"timestamp": "2025-12-29T12:50:11.482761+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.pending to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "3754164b-3723-44f9-8417-38185cc90451"}
{"timestamp": "2025-12-29T12:50:11.482944+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: payment.pending", "module": "event_bus", "function": "publish", "line": 31, "request_id": "3754164b-3723-44f9-8417-38185cc90451"}
{"timestamp": "2025-12-29T12:50:11.484655+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/order/21/initiate \u2192 200 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "3754164b-3723-44f9-8417-38185cc90451"}
{"timestamp": "2025-12-29T12:50:11.485554+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "3754164b-3723-44f9-8417-38185cc90451"}
{"timestamp": "2025-12-29T12:50:11.487096+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/14/confirm", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.489165+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.489800+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.490100+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.3272s ago] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.493423+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id AS payment_attempts_id, payment_attempts.order_id AS payment_attempts_order_id, payment_attempts.amount_attempted AS payment_attempts_amount_attempted, payment_attempts.status AS payment_attempts_status, payment_attempts.final_amount AS payment_attempts_final_amount, payment_attempts.failure_reason AS payment_attempts_failure_reason, payment_attempts.provider_payment_id AS payment_attempts_provider_payment_id, payment_attempts.created_at AS payment_attempts_created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.493705+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'pk_1': 14}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.496752+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.497074+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'pk_1': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.499607+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE payment_attempts SET status=%(status)s, provider_payment_id=%(provider_payment_id)s WHERE payment_attempts.id = %(payment_attempts_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.499970+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'status': 'SUCCEEDED', 'provider_payment_id': 'mock_payment_14', 'payment_attempts_id': 14}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.501564+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.505498+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.506046+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.506475+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.02714s ago] {'pk_1': 14}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.509296+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.509558+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'pk_1': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.510899+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.succeeded with payload: {'payment_attempt_id': 14, 'order_id': 21, 'final_amount': 1000.0}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.512049+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.succeeded to 4 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.512638+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.514488+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.514953+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.515196+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.102s ago] {'pk_1': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.517414+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET is_completed=%(is_completed)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.517648+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00039s] {'is_completed': True, 'orders_id': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.519239+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.522791+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.523528+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.523857+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.1679s ago] {'pk_1': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.525766+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.completed with payload: {'order_id': 21}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.525941+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.completed to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.526110+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: order.completed", "module": "event_bus", "function": "publish", "line": 31, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.526384+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.527619+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.531273+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.event_bus", "message": "\u274c Event handler failed: payment.succeeded -> on_payment_succeeded: 'user_email'", "module": "event_bus", "function": "_safe_invoke", "line": 45, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\event_bus.py\", line 42, in _safe_invoke\n    await handler(payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\notification\\handlers.py\", line 11, in on_payment_succeeded\n    send_booking_confirmation(payload)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\notification\\service.py\", line 31, in send_booking_confirmation\n    to_email=payload[\"user_email\"],\n             ~~~~~~~^^^^^^^^^^^^^^\nKeyError: 'user_email'"}
{"timestamp": "2025-12-29T12:50:11.534306+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.534872+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.535283+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.1015s ago] {'actor_id': None, 'actor_type': 'user', 'action': 'payment.succeeded', 'target_id': 21, 'target_type': 'order', 'payload': '{\"payment_attempt_id\": 14, \"order_id\": 21, \"final_amount\": 1000.0}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 12, 50, 11, 534488, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.537608+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.556267+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.event_bus", "message": "\u274c Event handler failed: payment.succeeded -> on_payment_succeeded: (psycopg2.errors.NotNullViolation) null value in column \"actor_id\" of relation \"audit_logs\" violates not-null constraint\nDETAIL:  Failing row contains (23, null, user, payment.succeeded, 21, order, {\"payment_attempt_id\": 14, \"order_id\": 21, \"final_amount\": 1000...., null, 2025-12-29 12:50:11.534488+00).\n\n[SQL: INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id]\n[parameters: {'actor_id': None, 'actor_type': 'user', 'action': 'payment.succeeded', 'target_id': 21, 'target_type': 'order', 'payload': '{\"payment_attempt_id\": 14, \"order_id\": 21, \"final_amount\": 1000.0}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 12, 50, 11, 534488, tzinfo=datetime.timezone.utc)}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)", "module": "event_bus", "function": "_safe_invoke", "line": 45, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\npsycopg2.errors.NotNullViolation: null value in column \"actor_id\" of relation \"audit_logs\" violates not-null constraint\nDETAIL:  Failing row contains (23, null, user, payment.succeeded, 21, order, {\"payment_attempt_id\": 14, \"order_id\": 21, \"final_amount\": 1000...., null, 2025-12-29 12:50:11.534488+00).\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\event_bus.py\", line 42, in _safe_invoke\n    await handler(payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\audit\\handlers.py\", line 44, in on_payment_succeeded\n    write_audit_log(\n    ~~~~~~~~~~~~~~~^\n        db=db,\n        ^^^^^^\n    ...<5 lines>...\n        payload=payload,\n        ^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\audit\\service.py\", line 31, in write_audit_log\n    return repo.create(db, entry)\n           ~~~~~~~~~~~^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\audit\\repository.py\", line 17, in create\n    db.commit()\n    ~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2030, in commit\n    trans.commit(_to_root=True)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^\n  File \"<string>\", line 2, in commit\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\state_changes.py\", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 1311, in commit\n    self._prepare_impl()\n    ~~~~~~~~~~~~~~~~~~^^\n  File \"<string>\", line 2, in _prepare_impl\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\state_changes.py\", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 1286, in _prepare_impl\n    self.session.flush()\n    ~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 4331, in flush\n    self._flush(objects)\n    ~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 4466, in _flush\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 4427, in _flush\n    flush_context.execute()\n    ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py\", line 466, in execute\n    rec.execute(self)\n    ~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py\", line 642, in execute\n    util.preloaded.orm_persistence.save_obj(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self.mapper,\n        ^^^^^^^^^^^^\n        uow.states_for_mapper_hierarchy(self.mapper, False, False),\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        uow,\n        ^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\persistence.py\", line 93, in save_obj\n    _emit_insert_statements(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        base_mapper,\n        ^^^^^^^^^^^^\n    ...<3 lines>...\n        insert,\n        ^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\persistence.py\", line 1233, in _emit_insert_statements\n    result = connection.execute(\n        statement,\n        params,\n        execution_options=execution_options,\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\nsqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column \"actor_id\" of relation \"audit_logs\" violates not-null constraint\nDETAIL:  Failing row contains (23, null, user, payment.succeeded, 21, order, {\"payment_attempt_id\": 14, \"order_id\": 21, \"final_amount\": 1000...., null, 2025-12-29 12:50:11.534488+00).\n\n[SQL: INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id]\n[parameters: {'actor_id': None, 'actor_type': 'user', 'action': 'payment.succeeded', 'target_id': 21, 'target_type': 'order', 'payload': '{\"payment_attempt_id\": 14, \"order_id\": 21, \"final_amount\": 1000.0}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 12, 50, 11, 534488, tzinfo=datetime.timezone.utc)}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)"}
{"timestamp": "2025-12-29T12:50:11.565229+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/14/confirm \u2192 200 (0.078s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.566222+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.568040+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "d1b33a09-ab68-4282-99ad-a09be8fd76d6"}
{"timestamp": "2025-12-29T12:50:11.570675+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d1b33a09-ab68-4282-99ad-a09be8fd76d6"}
{"timestamp": "2025-12-29T12:50:11.571405+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1b33a09-ab68-4282-99ad-a09be8fd76d6"}
{"timestamp": "2025-12-29T12:50:11.571872+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.4088s ago] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1b33a09-ab68-4282-99ad-a09be8fd76d6"}
{"timestamp": "2025-12-29T12:50:11.575573+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1b33a09-ab68-4282-99ad-a09be8fd76d6"}
{"timestamp": "2025-12-29T12:50:11.575839+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.1191s ago] {'user_id_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1b33a09-ab68-4282-99ad-a09be8fd76d6"}
{"timestamp": "2025-12-29T12:50:11.577943+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.010s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "d1b33a09-ab68-4282-99ad-a09be8fd76d6"}
{"timestamp": "2025-12-29T12:50:11.579385+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d1b33a09-ab68-4282-99ad-a09be8fd76d6"}
{"timestamp": "2025-12-29T12:54:58.976919+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-29T12:55:00.842911+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-29T12:55:00.843219+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-29T12:55:00.843434+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.843632+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.843796+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.843973+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.844163+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.844354+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.844574+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.844746+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.844945+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.845173+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.845414+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.845649+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.845827+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.845982+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.846163+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.846422+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.846606+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.846804+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.847102+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.847533+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.847956+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.848296+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.848532+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.848801+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.849095+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.849455+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.849715+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.850031+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.850515+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.851150+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.851639+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.852091+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.852592+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.853077+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.853496+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.853778+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.854113+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.854443+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.854776+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.855136+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.855466+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.855775+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.856027+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.856314+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.856626+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.856981+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.857378+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.857711+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.858019+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.858351+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.858718+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.859049+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.859295+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.859649+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.859943+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.860278+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.860595+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.860804+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.861095+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.861386+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.861675+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-29T12:55:00.861973+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-29T12:55:39.830946+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-29T12:55:41.772326+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-29T12:55:41.772914+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-29T12:55:41.773373+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.773858+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.774161+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.774434+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.774612+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.774804+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.775024+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.775292+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.775477+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.775761+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.776100+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.776669+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.777112+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.777507+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.777901+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.778294+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.778603+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.778980+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.779345+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.779681+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.780010+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.780408+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.780789+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.781118+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.781582+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.781955+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.782195+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.782555+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.782955+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.783331+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.783733+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.784093+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.784435+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.784756+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.785098+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.785403+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.785711+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.786017+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.786235+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.786599+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.787056+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.787417+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.787939+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.788768+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.789134+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.789512+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.789909+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.790340+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.790913+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.791386+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.791889+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.792303+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.792701+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.793087+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.793587+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.794469+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.794894+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.795276+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.795606+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.795997+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.796310+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-29T12:55:41.796687+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-29T12:56:39.812225+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-29T12:56:41.749896+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-29T12:56:41.750250+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-29T12:56:41.750707+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.750991+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.751276+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.751592+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.751837+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.752071+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.752251+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.752439+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.752629+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.752996+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.753498+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.753861+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.754139+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.754563+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.754962+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.755443+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.755946+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.756417+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.756849+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.757302+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.757792+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.758133+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.758409+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.758745+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.759135+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.759522+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.760030+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.760408+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.760744+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.761072+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.761366+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.761597+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.761827+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.762059+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.762294+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.762497+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.762796+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.763171+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.763550+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.763899+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.764290+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.765144+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.765545+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.765940+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.766556+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.766969+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.767272+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.767622+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.767931+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.768196+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.768544+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.769428+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.769920+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.770449+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.771162+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.771766+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.772397+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.772892+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.773339+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.773617+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.773825+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-29T12:56:41.774017+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-29T12:57:16.638774+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-29T13:02:44.161300+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-29T13:02:44.161523+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-29T13:02:44.161686+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.161843+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.162036+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.162190+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.162335+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.162479+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.162621+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.162997+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.163202+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.163367+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.163526+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.163675+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.163899+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.164100+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.164365+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.164544+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.164722+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.164889+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.165051+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.165197+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.165342+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.165491+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.165713+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.165978+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.166283+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.166527+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.166741+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.166934+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.167091+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.167259+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.167423+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.167641+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.167802+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.167961+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.168090+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.168208+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.168335+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.168483+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.168644+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.168803+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.168924+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.169091+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.169220+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.169345+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.169497+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.169667+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.169819+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.169963+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.170102+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.170223+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.170407+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.170529+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.170663+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.170965+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.171262+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.171586+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.171856+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.172134+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.172388+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.172608+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.172823+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-29T13:02:44.173036+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-29T13:02:56.353733+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.441601+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.441980+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.444833+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.445111+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.447451+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.447883+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.450204+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.453238+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.453557+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'email_1': 'test_1767013374.290238@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.681702+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.682144+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'email': 'test_1767013374.290238@example.com', 'hashed_password': '$2b$12$v4D4o6gtKVtTX2RWlDEI6uCOPa.8Rv7K6K8ow4UbZR8GwLLgwtkqK', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.684637+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.689611+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.691280+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.691720+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00067s] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.694106+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 30, 'email': 'test_1767013374.290238@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.695866+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.731071+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.732721+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.733107+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'user_id_1': 30, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.737889+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.738280+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'user_id': 30, 'name': None, 'email': 'test_1767013374.290238@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.741342+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.745826+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.746874+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.747354+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.749754+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 30, 'user_id': 30, 'email': 'test_1767013374.290238@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.749981+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.750200+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.750573+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.751801+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.753498+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.753856+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.3008s ago] {'email_1': 'test_1767013374.290238@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.995646+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 30, 'email': 'test_1767013374.290238@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.996677+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.996834+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.999945+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.646s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:57.000959+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:57.003329+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/login", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "ea17b05b-cc92-448e-a10b-33110914af4c"}
{"timestamp": "2025-12-29T13:02:57.008393+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ea17b05b-cc92-448e-a10b-33110914af4c"}
{"timestamp": "2025-12-29T13:02:57.009161+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea17b05b-cc92-448e-a10b-33110914af4c"}
{"timestamp": "2025-12-29T13:02:57.009584+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.5565s ago] {'email_1': 'test_1767013374.290238@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea17b05b-cc92-448e-a10b-33110914af4c"}
{"timestamp": "2025-12-29T13:02:57.215002+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 30, 'email': 'test_1767013374.290238@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "ea17b05b-cc92-448e-a10b-33110914af4c"}
{"timestamp": "2025-12-29T13:02:57.216006+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "ea17b05b-cc92-448e-a10b-33110914af4c"}
{"timestamp": "2025-12-29T13:02:57.216181+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "ea17b05b-cc92-448e-a10b-33110914af4c"}
{"timestamp": "2025-12-29T13:02:57.217267+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/login \u2192 200 (0.214s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "ea17b05b-cc92-448e-a10b-33110914af4c"}
{"timestamp": "2025-12-29T13:02:57.218076+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ea17b05b-cc92-448e-a10b-33110914af4c"}
{"timestamp": "2025-12-29T13:02:57.219551+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /profiles/me", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "57c11e9d-fe7f-488f-952f-4a0972a250bd"}
{"timestamp": "2025-12-29T13:02:57.223885+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "57c11e9d-fe7f-488f-952f-4a0972a250bd"}
{"timestamp": "2025-12-29T13:02:57.225125+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "57c11e9d-fe7f-488f-952f-4a0972a250bd"}
{"timestamp": "2025-12-29T13:02:57.225417+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "57c11e9d-fe7f-488f-952f-4a0972a250bd"}
{"timestamp": "2025-12-29T13:02:57.228674+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "57c11e9d-fe7f-488f-952f-4a0972a250bd"}
{"timestamp": "2025-12-29T13:02:57.229051+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.4965s ago] {'user_id_1': 30, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "57c11e9d-fe7f-488f-952f-4a0972a250bd"}
{"timestamp": "2025-12-29T13:02:57.234558+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /profiles/me \u2192 200 (0.015s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "57c11e9d-fe7f-488f-952f-4a0972a250bd"}
{"timestamp": "2025-12-29T13:02:57.236164+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "57c11e9d-fe7f-488f-952f-4a0972a250bd"}
{"timestamp": "2025-12-29T13:02:57.238162+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "7988b050-ca42-412c-beb7-2ed05567445e"}
{"timestamp": "2025-12-29T13:02:57.240526+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7988b050-ca42-412c-beb7-2ed05567445e"}
{"timestamp": "2025-12-29T13:02:57.243452+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7988b050-ca42-412c-beb7-2ed05567445e"}
{"timestamp": "2025-12-29T13:02:57.243831+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00067s] {'title_1': 'The Matrix Reloaded 1767013377.236505'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7988b050-ca42-412c-beb7-2ed05567445e"}
{"timestamp": "2025-12-29T13:02:57.247197+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7988b050-ca42-412c-beb7-2ed05567445e"}
{"timestamp": "2025-12-29T13:02:57.247689+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'title': 'The Matrix Reloaded 1767013377.236505', 'description': 'Test movie: The Matrix Reloaded 1767013377.236505', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7988b050-ca42-412c-beb7-2ed05567445e"}
{"timestamp": "2025-12-29T13:02:57.249734+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "7988b050-ca42-412c-beb7-2ed05567445e"}
{"timestamp": "2025-12-29T13:02:57.253816+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7988b050-ca42-412c-beb7-2ed05567445e"}
{"timestamp": "2025-12-29T13:02:57.254944+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7988b050-ca42-412c-beb7-2ed05567445e"}
{"timestamp": "2025-12-29T13:02:57.255289+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'pk_1': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7988b050-ca42-412c-beb7-2ed05567445e"}
{"timestamp": "2025-12-29T13:02:57.257592+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 27}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "7988b050-ca42-412c-beb7-2ed05567445e"}
{"timestamp": "2025-12-29T13:02:57.258520+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "7988b050-ca42-412c-beb7-2ed05567445e"}
{"timestamp": "2025-12-29T13:02:57.258675+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "7988b050-ca42-412c-beb7-2ed05567445e"}
{"timestamp": "2025-12-29T13:02:57.259916+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "7988b050-ca42-412c-beb7-2ed05567445e"}
{"timestamp": "2025-12-29T13:02:57.260750+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "7988b050-ca42-412c-beb7-2ed05567445e"}
{"timestamp": "2025-12-29T13:02:57.262532+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "44484cc7-349e-4a82-8165-ef8d1579b0b4"}
{"timestamp": "2025-12-29T13:02:57.265605+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "44484cc7-349e-4a82-8165-ef8d1579b0b4"}
{"timestamp": "2025-12-29T13:02:57.266834+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "44484cc7-349e-4a82-8165-ef8d1579b0b4"}
{"timestamp": "2025-12-29T13:02:57.267209+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'name_1': 'Standard Layout 1767013377.260928'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "44484cc7-349e-4a82-8165-ef8d1579b0b4"}
{"timestamp": "2025-12-29T13:02:57.270606+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "44484cc7-349e-4a82-8165-ef8d1579b0b4"}
{"timestamp": "2025-12-29T13:02:57.270912+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'name': 'Standard Layout 1767013377.260928', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "44484cc7-349e-4a82-8165-ef8d1579b0b4"}
{"timestamp": "2025-12-29T13:02:57.273433+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "44484cc7-349e-4a82-8165-ef8d1579b0b4"}
{"timestamp": "2025-12-29T13:02:57.277773+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "44484cc7-349e-4a82-8165-ef8d1579b0b4"}
{"timestamp": "2025-12-29T13:02:57.278739+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "44484cc7-349e-4a82-8165-ef8d1579b0b4"}
{"timestamp": "2025-12-29T13:02:57.278988+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "44484cc7-349e-4a82-8165-ef8d1579b0b4"}
{"timestamp": "2025-12-29T13:02:57.281364+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 26}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "44484cc7-349e-4a82-8165-ef8d1579b0b4"}
{"timestamp": "2025-12-29T13:02:57.282305+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "44484cc7-349e-4a82-8165-ef8d1579b0b4"}
{"timestamp": "2025-12-29T13:02:57.282440+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "44484cc7-349e-4a82-8165-ef8d1579b0b4"}
{"timestamp": "2025-12-29T13:02:57.283581+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.021s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "44484cc7-349e-4a82-8165-ef8d1579b0b4"}
{"timestamp": "2025-12-29T13:02:57.284675+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "44484cc7-349e-4a82-8165-ef8d1579b0b4"}
{"timestamp": "2025-12-29T13:02:57.286454+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "daabd8f4-412a-4567-95cd-ab34fb8debf0"}
{"timestamp": "2025-12-29T13:02:57.289240+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "daabd8f4-412a-4567-95cd-ab34fb8debf0"}
{"timestamp": "2025-12-29T13:02:57.291273+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "daabd8f4-412a-4567-95cd-ab34fb8debf0"}
{"timestamp": "2025-12-29T13:02:57.291824+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00097s] {'name_1': 'Screen 1 1767013377.284284', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "daabd8f4-412a-4567-95cd-ab34fb8debf0"}
{"timestamp": "2025-12-29T13:02:57.295264+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "daabd8f4-412a-4567-95cd-ab34fb8debf0"}
{"timestamp": "2025-12-29T13:02:57.295782+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'id_1': 26, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "daabd8f4-412a-4567-95cd-ab34fb8debf0"}
{"timestamp": "2025-12-29T13:02:57.298737+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "daabd8f4-412a-4567-95cd-ab34fb8debf0"}
{"timestamp": "2025-12-29T13:02:57.299288+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'name': 'Screen 1 1767013377.284284', 'capacity': 150, 'seat_layout_id': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "daabd8f4-412a-4567-95cd-ab34fb8debf0"}
{"timestamp": "2025-12-29T13:02:57.301767+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "daabd8f4-412a-4567-95cd-ab34fb8debf0"}
{"timestamp": "2025-12-29T13:02:57.305717+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "daabd8f4-412a-4567-95cd-ab34fb8debf0"}
{"timestamp": "2025-12-29T13:02:57.310502+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "daabd8f4-412a-4567-95cd-ab34fb8debf0"}
{"timestamp": "2025-12-29T13:02:57.310980+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "daabd8f4-412a-4567-95cd-ab34fb8debf0"}
{"timestamp": "2025-12-29T13:02:57.313484+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 26}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "daabd8f4-412a-4567-95cd-ab34fb8debf0"}
{"timestamp": "2025-12-29T13:02:57.314627+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "daabd8f4-412a-4567-95cd-ab34fb8debf0"}
{"timestamp": "2025-12-29T13:02:57.314810+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "daabd8f4-412a-4567-95cd-ab34fb8debf0"}
{"timestamp": "2025-12-29T13:02:57.315900+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.030s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "daabd8f4-412a-4567-95cd-ab34fb8debf0"}
{"timestamp": "2025-12-29T13:02:57.317060+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "daabd8f4-412a-4567-95cd-ab34fb8debf0"}
{"timestamp": "2025-12-29T13:02:57.318614+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.320895+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.321873+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.322278+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00041s] {'pk_1': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.325010+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.325317+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.328112+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.328681+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'screen_id_1': 26, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.332629+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.333007+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 27, 'screen_id': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.335656+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.340139+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.341216+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.341489+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.344473+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.344761+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'pk_1': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.346999+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.347407+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.349000+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 23}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.349918+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.350057+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.351147+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.033s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.351854+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.354066+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /seatavailability/grid/23", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "f9029b9c-4943-4b2d-b2df-9f9aa1a6a6b9"}
{"timestamp": "2025-12-29T13:02:57.356311+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f9029b9c-4943-4b2d-b2df-9f9aa1a6a6b9"}
{"timestamp": "2025-12-29T13:02:57.357846+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f9029b9c-4943-4b2d-b2df-9f9aa1a6a6b9"}
{"timestamp": "2025-12-29T13:02:57.358519+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'showtime_id_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f9029b9c-4943-4b2d-b2df-9f9aa1a6a6b9"}
{"timestamp": "2025-12-29T13:02:57.362126+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /seatavailability/grid/23 \u2192 200 (0.008s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "f9029b9c-4943-4b2d-b2df-9f9aa1a6a6b9"}
{"timestamp": "2025-12-29T13:02:57.362938+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f9029b9c-4943-4b2d-b2df-9f9aa1a6a6b9"}
{"timestamp": "2025-12-29T13:02:57.365359+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.368527+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.369701+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.370057+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.1451s ago] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.373603+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.373903+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'user_id': 30, 'showtime_id': 23, 'seat_code': 'R5-8', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 13, 2, 57, 373206, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 12, 57, 372350, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.376410+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.380629+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.381703+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.381972+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.384206+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 22, 'user_id': 30, 'showtime_id': 23, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.385462+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.387693+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.388655+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.388916+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00043s] {'showtime_id_1': 23, 'seat_code_1': 'R5-8', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.391783+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.392031+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00043s] {'seat_code': 'R5-8', 'showtime_id': 23, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.395260+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.395569+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'status': 'LOCKED', 'locked_by_user_id': 30, 'lock_expires_at': datetime.datetime(2025, 12, 29, 13, 12, 57, 393792, tzinfo=datetime.timezone.utc), 'seat_locks_id': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.397426+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.402099+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.403147+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.403560+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'pk_1': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.407969+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 23, 'seat_code': 'R5-8', 'user_id': 30, 'expires_at': '2025-12-29T13:12:57.393792+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.408515+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.408932+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.409506+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.411340+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.412399+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 22, 'user_id': 30, 'showtime_id': 23, 'seat_code': 'R5-8'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.412811+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 22", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.416035+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.417988+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.418619+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00076s] {'user_id': 30, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.423293+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.428767+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.430533+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.431263+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00079s] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.434084+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 22, 'reservation_id': 22, 'user_id': 30, 'showtime_id': 23, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.434451+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.435921+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 22", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.454168+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.456064+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.456611+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.460424+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 22, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.460864+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.462099+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 22, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.480275+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.481634+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.481895+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.485584+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.485918+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00042s] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.488125+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.492183+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.492890+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.493251+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.06313s ago] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.495448+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 22 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.495713+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.496785+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.497023+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 22: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.497366+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.499148+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.499365+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 22", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.499638+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.500822+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.502451+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.503832+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.504173+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'actor_id': 30, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 22, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 22, \"user_id\": 30, \"showtime_id\": 23, \"seat_code\": \"R5-8\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 2, 57, 503420, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.506896+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.510956+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.512277+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.512637+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.515075+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.516179+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.517555+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.152s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.518517+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.520256+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "961de99d-6d59-4404-aa0c-01e4977a6718"}
{"timestamp": "2025-12-29T13:02:57.522637+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "961de99d-6d59-4404-aa0c-01e4977a6718"}
{"timestamp": "2025-12-29T13:02:57.523366+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "961de99d-6d59-4404-aa0c-01e4977a6718"}
{"timestamp": "2025-12-29T13:02:57.523939+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2988s ago] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "961de99d-6d59-4404-aa0c-01e4977a6718"}
{"timestamp": "2025-12-29T13:02:57.527215+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "961de99d-6d59-4404-aa0c-01e4977a6718"}
{"timestamp": "2025-12-29T13:02:57.527667+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'user_id_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "961de99d-6d59-4404-aa0c-01e4977a6718"}
{"timestamp": "2025-12-29T13:02:57.531536+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.011s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "961de99d-6d59-4404-aa0c-01e4977a6718"}
{"timestamp": "2025-12-29T13:02:57.532560+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "961de99d-6d59-4404-aa0c-01e4977a6718"}
{"timestamp": "2025-12-29T13:02:57.534969+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/order/22/initiate", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "e96fd47a-e790-4517-bd1f-0f3d7c3aa68a"}
{"timestamp": "2025-12-29T13:02:57.538190+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e96fd47a-e790-4517-bd1f-0f3d7c3aa68a"}
{"timestamp": "2025-12-29T13:02:57.539227+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e96fd47a-e790-4517-bd1f-0f3d7c3aa68a"}
{"timestamp": "2025-12-29T13:02:57.539669+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.3147s ago] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e96fd47a-e790-4517-bd1f-0f3d7c3aa68a"}
{"timestamp": "2025-12-29T13:02:57.543299+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e96fd47a-e790-4517-bd1f-0f3d7c3aa68a"}
{"timestamp": "2025-12-29T13:02:57.543930+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.06228s ago] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e96fd47a-e790-4517-bd1f-0f3d7c3aa68a"}
{"timestamp": "2025-12-29T13:02:57.547202+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO payment_attempts (order_id, amount_attempted, status, final_amount, failure_reason, provider_payment_id, created_at) VALUES (%(order_id)s, %(amount_attempted)s, %(status)s, %(final_amount)s, %(failure_reason)s, %(provider_payment_id)s, %(created_at)s) RETURNING payment_attempts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e96fd47a-e790-4517-bd1f-0f3d7c3aa68a"}
{"timestamp": "2025-12-29T13:02:57.547738+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'order_id': 22, 'amount_attempted': 1000, 'status': 'PENDING', 'final_amount': 1000, 'failure_reason': None, 'provider_payment_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 2, 57, 546732, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e96fd47a-e790-4517-bd1f-0f3d7c3aa68a"}
{"timestamp": "2025-12-29T13:02:57.550668+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "e96fd47a-e790-4517-bd1f-0f3d7c3aa68a"}
{"timestamp": "2025-12-29T13:02:57.554983+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e96fd47a-e790-4517-bd1f-0f3d7c3aa68a"}
{"timestamp": "2025-12-29T13:02:57.556090+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e96fd47a-e790-4517-bd1f-0f3d7c3aa68a"}
{"timestamp": "2025-12-29T13:02:57.556456+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'pk_1': 15}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e96fd47a-e790-4517-bd1f-0f3d7c3aa68a"}
{"timestamp": "2025-12-29T13:02:57.559464+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e96fd47a-e790-4517-bd1f-0f3d7c3aa68a"}
{"timestamp": "2025-12-29T13:02:57.559717+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00043s] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e96fd47a-e790-4517-bd1f-0f3d7c3aa68a"}
{"timestamp": "2025-12-29T13:02:57.561342+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.pending with payload: {'payment_attempt_id': 15, 'order_id': 22, 'amount_attempted': 1000, 'final_amount': 1000, 'user_id': 30}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "e96fd47a-e790-4517-bd1f-0f3d7c3aa68a"}
{"timestamp": "2025-12-29T13:02:57.562522+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.pending to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "e96fd47a-e790-4517-bd1f-0f3d7c3aa68a"}
{"timestamp": "2025-12-29T13:02:57.562908+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: payment.pending", "module": "event_bus", "function": "publish", "line": 31, "request_id": "e96fd47a-e790-4517-bd1f-0f3d7c3aa68a"}
{"timestamp": "2025-12-29T13:02:57.564106+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/order/22/initiate \u2192 200 (0.030s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "e96fd47a-e790-4517-bd1f-0f3d7c3aa68a"}
{"timestamp": "2025-12-29T13:02:57.564988+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "e96fd47a-e790-4517-bd1f-0f3d7c3aa68a"}
{"timestamp": "2025-12-29T13:02:57.566774+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/15/confirm", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.569974+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.570612+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.570983+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.3461s ago] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.574194+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id AS payment_attempts_id, payment_attempts.order_id AS payment_attempts_order_id, payment_attempts.amount_attempted AS payment_attempts_amount_attempted, payment_attempts.status AS payment_attempts_status, payment_attempts.final_amount AS payment_attempts_final_amount, payment_attempts.failure_reason AS payment_attempts_failure_reason, payment_attempts.provider_payment_id AS payment_attempts_provider_payment_id, payment_attempts.created_at AS payment_attempts_created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.574672+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'pk_1': 15}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.577246+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.577511+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.579799+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE payment_attempts SET status=%(status)s, provider_payment_id=%(provider_payment_id)s WHERE payment_attempts.id = %(payment_attempts_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.580019+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00038s] {'status': 'SUCCEEDED', 'provider_payment_id': 'mock_payment_15', 'payment_attempts_id': 15}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.582243+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.586150+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.586821+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.587210+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.03122s ago] {'pk_1': 15}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.593019+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.594212+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.03401s ago] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.596377+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.succeeded with payload: {'payment_attempt_id': 15, 'order_id': 22, 'final_amount': 1000.0, 'user_id': 30}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.598253+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.succeeded to 4 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.599498+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.602813+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.604776+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.605539+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.1238s ago] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.609521+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET is_completed=%(is_completed)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.610389+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00073s] {'is_completed': True, 'orders_id': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.612545+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.617437+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.618587+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.619139+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.1888s ago] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.622107+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.completed with payload: {'order_id': 22}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.622381+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.completed to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.622611+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: order.completed", "module": "event_bus", "function": "publish", "line": 31, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.622946+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.624098+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.625856+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.626345+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.626594+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.8942s ago] {'user_id_1': 30, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.629329+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.630348+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.632006+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.632459+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.632846+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.1292s ago] {'actor_id': 30, 'actor_type': 'user', 'action': 'payment.succeeded', 'target_id': 22, 'target_type': 'order', 'payload': '{\"payment_attempt_id\": 15, \"order_id\": 22, \"final_amount\": 1000.0, \"user_id\": 30}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 2, 57, 632170, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.634740+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.639044+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.639658+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.640044+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.1279s ago] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.641889+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.642912+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.644224+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/15/confirm \u2192 200 (0.077s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.645462+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.646886+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "cd336f34-43eb-4553-8e01-b2320dd509b0"}
{"timestamp": "2025-12-29T13:02:57.649112+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cd336f34-43eb-4553-8e01-b2320dd509b0"}
{"timestamp": "2025-12-29T13:02:57.649734+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd336f34-43eb-4553-8e01-b2320dd509b0"}
{"timestamp": "2025-12-29T13:02:57.650073+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.4252s ago] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd336f34-43eb-4553-8e01-b2320dd509b0"}
{"timestamp": "2025-12-29T13:02:57.652845+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd336f34-43eb-4553-8e01-b2320dd509b0"}
{"timestamp": "2025-12-29T13:02:57.653087+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.1262s ago] {'user_id_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd336f34-43eb-4553-8e01-b2320dd509b0"}
{"timestamp": "2025-12-29T13:02:57.655084+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.008s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "cd336f34-43eb-4553-8e01-b2320dd509b0"}
{"timestamp": "2025-12-29T13:02:57.655896+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "cd336f34-43eb-4553-8e01-b2320dd509b0"}
{"timestamp": "2025-12-29T13:11:53.136988+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-29T13:11:55.370784+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-29T13:11:55.371008+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-29T13:11:55.371206+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.371347+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.371464+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.371587+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.371760+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.371886+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.372005+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.372147+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.372291+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.372479+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.372605+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.372729+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.372866+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.373031+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.373175+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.373326+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.373468+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.373592+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.373711+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.373826+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.373999+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.374122+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.374249+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.374389+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.374550+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.374711+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.374929+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.375151+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.375456+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.375710+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.375973+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.376289+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.376603+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.376845+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.376975+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.377116+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.377253+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.377486+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.377725+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.377931+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.378072+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.378216+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.378374+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.378518+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.378664+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.378805+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.378943+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.379088+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.379229+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.379367+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.379506+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.379652+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.379790+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.379928+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.380064+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.380180+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.380293+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.380436+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.380688+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.380952+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.381191+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-29T13:11:55.381400+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-29T13:14:47.091841+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-29T13:14:49.142939+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-29T13:14:49.143258+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-29T13:14:49.143466+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.143803+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.144090+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.144361+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.144615+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.144820+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.144941+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.145070+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.145192+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.145309+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.145443+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.145557+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.145756+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.146047+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.146206+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.146400+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.146563+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.146681+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.146858+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.147094+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.147400+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.147659+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.147810+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.148007+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.148286+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.148508+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.148672+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.148890+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.149122+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.149390+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.149623+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.149851+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.150082+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.150235+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.150349+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.150463+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.150639+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.150895+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.151174+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.151413+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.151616+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.151897+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.152244+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.152589+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.152830+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.152994+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.153150+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.153336+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.153472+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.153664+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.153885+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.154112+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.154272+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.154419+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.154543+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.154741+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.155051+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.155300+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.155465+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.155582+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.155711+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-29T13:14:49.155891+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-29T13:17:08.697936+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-29T13:17:10.711925+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-29T13:17:10.712188+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-29T13:17:10.712421+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.712575+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.712845+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.713312+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.713713+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.714162+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.714413+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.714580+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.714751+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.714895+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.715017+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.715134+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.715250+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.715439+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.715559+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.715691+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.716008+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.716433+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.716958+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.717582+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.717912+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.718126+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.718398+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.718659+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.718947+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.719225+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.719498+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.719891+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.720123+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.720248+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.720362+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.720483+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.721078+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.721231+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.721349+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.721504+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.721827+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.722129+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.722323+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.722445+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.722558+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.722669+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.722780+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.722897+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.723010+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.723121+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.723230+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.723339+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.723449+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.723557+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.723668+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.723929+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.724194+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.724467+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.724671+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.724838+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.724988+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.725196+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.725412+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/showtimes/{showtime_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.725637+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.725801+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.725927+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-29T13:17:10.726096+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-29T13:18:30.874475+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-29T13:18:33.162754+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-29T13:18:33.163059+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-29T13:18:33.163289+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.163475+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.163675+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.163928+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.164233+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.164459+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.164687+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.164909+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.165122+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.165369+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.165599+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.165818+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.166092+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.166558+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.166983+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.167358+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.167768+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.168115+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.168392+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.168691+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.169026+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.169295+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.169643+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.169915+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.170209+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.170447+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.170663+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.170843+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.171065+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.171418+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.171721+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.172041+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.172268+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.172444+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.172656+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.172945+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.173305+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.173604+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.173865+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.174093+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.174334+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.174539+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.174780+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.175025+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.175265+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.175531+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.175877+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.176235+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.176566+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.176822+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.177023+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.177198+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.177376+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.177560+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.177796+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.178018+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.178233+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.178521+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.178746+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/showtimes/{showtime_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.178953+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.179127+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.179382+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-29T13:18:33.179659+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-29T13:19:06.965543+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "a72bc11c-b804-4a1c-b6b5-9ed325b435b9"}
{"timestamp": "2025-12-29T13:19:06.971791+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 422 (0.006s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "a72bc11c-b804-4a1c-b6b5-9ed325b435b9"}
{"timestamp": "2025-12-29T13:19:09.026294+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "86fa9678-c94a-4593-a4a9-9b5b89f507af"}
{"timestamp": "2025-12-29T13:19:09.027897+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 422 (0.002s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "86fa9678-c94a-4593-a4a9-9b5b89f507af"}
{"timestamp": "2025-12-29T13:19:11.069567+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "6c25050e-ec5f-4753-8725-0cd306833331"}
{"timestamp": "2025-12-29T13:19:11.071251+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 422 (0.002s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "6c25050e-ec5f-4753-8725-0cd306833331"}
{"timestamp": "2025-12-29T13:19:13.119642+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "3f136641-ee8c-4ca1-b6c8-071e8d861b86"}
{"timestamp": "2025-12-29T13:19:13.121136+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 422 (0.001s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "3f136641-ee8c-4ca1-b6c8-071e8d861b86"}
{"timestamp": "2025-12-29T13:19:15.162565+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b48a79b1-95fb-4dc7-af18-f91d6e357e98"}
{"timestamp": "2025-12-29T13:19:15.164727+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 422 (0.002s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b48a79b1-95fb-4dc7-af18-f91d6e357e98"}
{"timestamp": "2025-12-29T13:20:40.538325+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-29T13:20:42.437616+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-29T13:20:42.437869+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-29T13:20:42.438013+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.438249+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.438478+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.438744+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.439025+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.439331+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.439536+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.439724+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.439928+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.440171+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.440353+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.440535+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.440731+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.440948+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.441113+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.441358+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.441644+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.441940+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.442244+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.442511+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.442841+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.443164+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.443343+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.443474+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.443594+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.443712+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.443829+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.443944+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.444072+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.444299+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.444578+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.444992+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.445397+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.445630+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.445767+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.445889+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.446004+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.446165+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.446398+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.446682+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.446905+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.447225+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.447572+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.447890+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.448149+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.448323+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.448536+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.448699+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.448906+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.449165+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.449447+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.449715+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.449955+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.450156+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.450324+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.450519+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.450715+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.450943+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.451330+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/showtimes/{showtime_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.451660+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.451975+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.452333+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-29T13:20:42.452764+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-29T13:20:55.152297+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.242722+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.243142+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.246147+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.246431+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.248950+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.249391+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.251605+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.255078+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.255405+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00069s] {'email_1': 'test_admin_1767014453.093281@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.484360+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.484811+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'email': 'test_admin_1767014453.093281@example.com', 'hashed_password': '$2b$12$Mr13cMkYN6QBHceSo0qBe.gQ/m9i9o.3ZbigvxwMEP8nHhvFITpda', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.488753+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.494355+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.495883+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.496410+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00070s] {'pk_1': 31}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.498763+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 31, 'email': 'test_admin_1767014453.093281@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.500403+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.527922+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.529452+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.529856+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'user_id_1': 31, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.534191+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.534890+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00073s] {'user_id': 31, 'name': None, 'email': 'test_admin_1767014453.093281@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.538856+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.544462+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.545675+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.545977+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'pk_1': 31}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.548201+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 31, 'user_id': 31, 'email': 'test_admin_1767014453.093281@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.548397+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.548569+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.549021+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.550420+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.551960+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.552542+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2976s ago] {'email_1': 'test_admin_1767014453.093281@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.786097+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 31, 'email': 'test_admin_1767014453.093281@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.787381+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.787638+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.790185+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.638s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.791378+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:57.839323+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b3b00414-ceac-4e4b-83a2-77d9c2edc87e"}
{"timestamp": "2025-12-29T13:20:57.842316+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 422 (0.003s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b3b00414-ceac-4e4b-83a2-77d9c2edc87e"}
{"timestamp": "2025-12-29T13:20:59.893839+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:20:59.897674+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:20:59.898392+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:20:59.898955+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.644s ago] {'email_1': 'test_admin_1767014457.8438218@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.106781+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.107193+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.623s ago] {'email': 'test_admin_1767014457.8438218@example.com', 'hashed_password': '$2b$12$OCiF/GNzU2RVTdEe1umy3OB/Uyi4fZFSdTvV39edEG5FDjkLDpHGS', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.108967+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.113703+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.114351+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.114724+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.619s ago] {'pk_1': 32}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.116859+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 32, 'email': 'test_admin_1767014457.8438218@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.117820+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.119780+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.120498+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.120995+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.592s ago] {'user_id_1': 32, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.123304+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.123574+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.59s ago] {'user_id': 32, 'name': None, 'email': 'test_admin_1767014457.8438218@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.125538+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.129819+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.130258+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.130622+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.585s ago] {'pk_1': 32}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.133172+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 32, 'user_id': 32, 'email': 'test_admin_1767014457.8438218@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.133364+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.133516+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.133811+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.134868+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.136046+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.136587+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.882s ago] {'email_1': 'test_admin_1767014457.8438218@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.340026+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 32, 'email': 'test_admin_1767014457.8438218@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.341237+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.341470+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.342608+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.449s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.343674+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:02.387967+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "6a4724db-c318-4edb-a6ae-c6926b0e2849"}
{"timestamp": "2025-12-29T13:21:02.389526+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 422 (0.002s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "6a4724db-c318-4edb-a6ae-c6926b0e2849"}
{"timestamp": "2025-12-29T13:21:04.436219+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.438952+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.439572+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.439977+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 9.185s ago] {'email_1': 'test_admin_1767014462.3905213@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.648361+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.648640+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 9.165s ago] {'email': 'test_admin_1767014462.3905213@example.com', 'hashed_password': '$2b$12$V0uu0mrEFQkrAWkpQOmpk.AkT4jKS./t6hSzMgzL4jcxAs25vdOHq', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.650288+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.657378+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.658441+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.659101+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 9.163s ago] {'pk_1': 33}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.662393+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 33, 'email': 'test_admin_1767014462.3905213@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.664624+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.668136+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.669298+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.669896+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 9.141s ago] {'user_id_1': 33, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.673870+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.674515+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 9.141s ago] {'user_id': 33, 'name': None, 'email': 'test_admin_1767014462.3905213@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.677118+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.682235+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.682942+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.683481+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 9.138s ago] {'pk_1': 33}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.687209+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 33, 'user_id': 33, 'email': 'test_admin_1767014462.3905213@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.687755+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.688408+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.689223+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.690791+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.692040+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.692378+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 9.438s ago] {'email_1': 'test_admin_1767014462.3905213@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.911035+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 33, 'email': 'test_admin_1767014462.3905213@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.912148+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.912373+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.913554+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.477s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.914497+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:06.960381+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "5e13db79-ada7-4c2c-836c-fc3c8d2f9452"}
{"timestamp": "2025-12-29T13:21:06.961779+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 422 (0.001s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "5e13db79-ada7-4c2c-836c-fc3c8d2f9452"}
{"timestamp": "2025-12-29T13:21:09.008761+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.011738+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.012706+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.013188+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 13.76s ago] {'email_1': 'test_admin_1767014466.9629178@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.218568+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.219172+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 13.74s ago] {'email': 'test_admin_1767014466.9629178@example.com', 'hashed_password': '$2b$12$EwrFa.yr/ehXnynYmtbfP.J0zu8yRqw.Y2dpBd7hP/6o3Ho7q0huu', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.220923+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.226935+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.227790+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.228188+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 13.73s ago] {'pk_1': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.230265+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 34, 'email': 'test_admin_1767014466.9629178@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.231625+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.234123+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.234720+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.234963+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 13.71s ago] {'user_id_1': 34, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.237104+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.237420+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 13.7s ago] {'user_id': 34, 'name': None, 'email': 'test_admin_1767014466.9629178@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.239645+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.244578+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.245417+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.245922+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 13.7s ago] {'pk_1': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.248333+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 34, 'user_id': 34, 'email': 'test_admin_1767014466.9629178@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.248538+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.248742+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.249041+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.250167+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.251536+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.252037+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14s ago] {'email_1': 'test_admin_1767014466.9629178@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.455434+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 34, 'email': 'test_admin_1767014466.9629178@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.456637+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.456868+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.457943+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.449s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.458827+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:11.514179+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "289df08e-149c-49de-9877-549c866f1dd2"}
{"timestamp": "2025-12-29T13:21:11.515860+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 422 (0.002s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "289df08e-149c-49de-9877-549c866f1dd2"}
{"timestamp": "2025-12-29T13:21:13.564760+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.567607+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.568198+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.568529+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 18.31s ago] {'email_1': 'test_admin_1767014471.5169668@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.773812+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.774445+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 18.29s ago] {'email': 'test_admin_1767014471.5169668@example.com', 'hashed_password': '$2b$12$ITZMKWeTFp1sl2WfnBz7Neza1z1X9kEzUOuBDEXU2No8Ak93TJWK6', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.776597+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.781217+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.781840+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.782378+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 18.29s ago] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.784871+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 35, 'email': 'test_admin_1767014471.5169668@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.786217+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.788252+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.788753+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.789172+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 18.26s ago] {'user_id_1': 35, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.791591+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.791820+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 18.26s ago] {'user_id': 35, 'name': None, 'email': 'test_admin_1767014471.5169668@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.793701+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.797780+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.798706+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.799076+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 18.25s ago] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.801208+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 35, 'user_id': 35, 'email': 'test_admin_1767014471.5169668@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.801436+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.801567+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.801808+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.802939+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.804357+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.804848+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 18.55s ago] {'email_1': 'test_admin_1767014471.5169668@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:14.008864+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 35, 'email': 'test_admin_1767014471.5169668@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:14.009999+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:14.010202+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:14.011400+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.447s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:14.012346+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:16.052335+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "31899cd0-da15-4581-9894-12e369b9ce71"}
{"timestamp": "2025-12-29T13:21:16.054094+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 422 (0.002s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "31899cd0-da15-4581-9894-12e369b9ce71"}
{"timestamp": "2025-12-29T13:23:43.316238+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-29T13:23:45.475365+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-29T13:23:45.475623+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-29T13:23:45.475777+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.475914+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.476144+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.476389+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.476663+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.476822+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.477055+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.477241+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.477373+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.477491+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.477605+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.477721+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.477850+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.477979+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.478259+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.478739+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.479088+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.479428+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.479728+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.479962+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.480211+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.480439+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.480594+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.480724+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.480884+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.481036+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.481242+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.481405+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.481529+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.481645+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.481754+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.481982+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.482195+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.482328+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.482500+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.482695+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.482839+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.482958+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.483069+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.483187+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.483297+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.483406+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.483515+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.483731+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.483992+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.484206+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.484518+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.484790+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.484996+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.485263+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.485544+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.485762+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.485957+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.486206+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.486432+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.486642+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.486798+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.486934+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.487156+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/showtimes/{showtime_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.487402+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.487557+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.487739+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-29T13:23:45.488028+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-29T13:23:57.436780+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.486838+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.487295+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.489683+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.489948+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.491978+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.492295+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.494694+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.497298+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.497764+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'email_1': 'test_admin_1767014635.389653@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.726747+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.727151+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'email': 'test_admin_1767014635.389653@example.com', 'hashed_password': '$2b$12$bD7ggNRKUBjkp1uFa/N/hu2DxBWNAhPsSx/zNwjXytCE7qmcoxG6m', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.729637+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.735557+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.737150+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.737649+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00064s] {'pk_1': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.739937+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 36, 'email': 'test_admin_1767014635.389653@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.741113+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.758253+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.759904+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.760327+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00066s] {'user_id_1': 36, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.764106+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.764701+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'user_id': 36, 'name': None, 'email': 'test_admin_1767014635.389653@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.767209+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.772858+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.773780+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.774057+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00042s] {'pk_1': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.776309+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 36, 'user_id': 36, 'email': 'test_admin_1767014635.389653@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.776545+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.776818+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.777478+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.778931+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.780211+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.780616+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2835s ago] {'email_1': 'test_admin_1767014635.389653@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.990431+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 36, 'email': 'test_admin_1767014635.389653@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.991486+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.991734+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.993026+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.557s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.994158+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:24:00.042814+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "8008d3fb-98e1-40cf-8387-076b8006d3c1"}
{"timestamp": "2025-12-29T13:24:00.044749+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 422 (0.002s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "8008d3fb-98e1-40cf-8387-076b8006d3c1"}
{"timestamp": "2025-12-29T13:24:02.092045+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.095623+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.096600+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.097210+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.6s ago] {'email_1': 'test_admin_1767014640.046023@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.306785+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.307286+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.581s ago] {'email': 'test_admin_1767014640.046023@example.com', 'hashed_password': '$2b$12$Zmk7HjANGxkmR8xRvRsar.N3M4Vodu3eknUbmTJwwFBCC1xIt5kAO', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.309343+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.314220+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.315170+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.315676+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.579s ago] {'pk_1': 37}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.317906+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 37, 'email': 'test_admin_1767014640.046023@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.319213+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.321765+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.322349+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.322643+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.563s ago] {'user_id_1': 37, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.325454+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.325983+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.562s ago] {'user_id': 37, 'name': None, 'email': 'test_admin_1767014640.046023@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.327960+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.332211+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.333014+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.333572+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.56s ago] {'pk_1': 37}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.336047+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 37, 'user_id': 37, 'email': 'test_admin_1767014640.046023@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.336259+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.336530+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.336910+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.338313+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.339476+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.339797+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.843s ago] {'email_1': 'test_admin_1767014640.046023@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.544340+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 37, 'email': 'test_admin_1767014640.046023@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.545506+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.545791+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.547048+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.456s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.548158+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:04.588074+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "abf54f30-37ad-4a33-b61f-96248303d35a"}
{"timestamp": "2025-12-29T13:24:04.589813+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 422 (0.002s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "abf54f30-37ad-4a33-b61f-96248303d35a"}
{"timestamp": "2025-12-29T13:24:06.630132+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.632963+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.633631+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.633990+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 9.137s ago] {'email_1': 'test_admin_1767014644.5912158@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.838051+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.838379+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 9.112s ago] {'email': 'test_admin_1767014644.5912158@example.com', 'hashed_password': '$2b$12$KK5jKIfnoghF8idBHCvxUuJ.tnHAU2zzQHVeqhdRbP1edmLG5A7ne', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.840001+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.844368+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.845094+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.845531+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 9.109s ago] {'pk_1': 38}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.847816+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 38, 'email': 'test_admin_1767014644.5912158@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.849254+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.851257+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.851842+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.852144+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 9.093s ago] {'user_id_1': 38, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.855000+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.855530+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 9.092s ago] {'user_id': 38, 'name': None, 'email': 'test_admin_1767014644.5912158@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.857734+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.862970+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.863879+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.864294+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 9.091s ago] {'pk_1': 38}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.866694+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 38, 'user_id': 38, 'email': 'test_admin_1767014644.5912158@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.866933+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.867185+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.867460+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.868808+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.870280+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.870631+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 9.374s ago] {'email_1': 'test_admin_1767014644.5912158@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:07.075702+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 38, 'email': 'test_admin_1767014644.5912158@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:07.076980+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:07.077211+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:07.078478+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.448s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:07.079507+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:09.135289+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "dab8a5e9-8b0e-461a-907b-fbe1e48f4f53"}
{"timestamp": "2025-12-29T13:24:09.136744+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 422 (0.001s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "dab8a5e9-8b0e-461a-907b-fbe1e48f4f53"}
{"timestamp": "2025-12-29T13:24:11.179802+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.183333+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.184045+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.184417+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 13.69s ago] {'email_1': 'test_admin_1767014649.1378145@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.391297+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.391649+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 13.67s ago] {'email': 'test_admin_1767014649.1378145@example.com', 'hashed_password': '$2b$12$uBBnM8UAXU6uQICowNbBZ.KAR2VTOCAeVqfo1LQbSFSt/7QI7B6nq', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.393369+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.398626+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.399207+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.399454+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 13.66s ago] {'pk_1': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.401470+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 39, 'email': 'test_admin_1767014649.1378145@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.402370+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.404268+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.404879+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.405111+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 13.65s ago] {'user_id_1': 39, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.407536+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.407761+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 13.64s ago] {'user_id': 39, 'name': None, 'email': 'test_admin_1767014649.1378145@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.409452+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.413847+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.414444+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.414733+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 13.64s ago] {'pk_1': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.416751+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 39, 'user_id': 39, 'email': 'test_admin_1767014649.1378145@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.416999+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.417118+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.417475+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.418639+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.419761+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.420003+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 13.92s ago] {'email_1': 'test_admin_1767014649.1378145@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.623267+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 39, 'email': 'test_admin_1767014649.1378145@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.624585+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.624964+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.626257+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.447s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.627228+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:13.679397+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "561b8d3f-3bef-4cfc-ad5b-042324e1e13a"}
{"timestamp": "2025-12-29T13:24:13.681137+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 422 (0.002s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "561b8d3f-3bef-4cfc-ad5b-042324e1e13a"}
{"timestamp": "2025-12-29T13:24:15.730310+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.733263+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.733928+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.734324+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 18.24s ago] {'email_1': 'test_admin_1767014653.6823537@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.941123+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.941853+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 18.22s ago] {'email': 'test_admin_1767014653.6823537@example.com', 'hashed_password': '$2b$12$iItW4c0AvVMNVAqEGAWutO7DwaG8WQmYU7302/Nilo5voQkXTYDae', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.943588+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.948512+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.949291+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.949642+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 18.21s ago] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.951654+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 40, 'email': 'test_admin_1767014653.6823537@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.953055+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.955759+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.956496+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.956770+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 18.2s ago] {'user_id_1': 40, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.959434+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.959994+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 18.2s ago] {'user_id': 40, 'name': None, 'email': 'test_admin_1767014653.6823537@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.961754+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.965930+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.966698+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.967117+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 18.19s ago] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.969211+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 40, 'user_id': 40, 'email': 'test_admin_1767014653.6823537@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.969417+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.969553+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.969789+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.970850+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.972117+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.972716+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 18.48s ago] {'email_1': 'test_admin_1767014653.6823537@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:16.177080+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 40, 'email': 'test_admin_1767014653.6823537@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:16.178045+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:16.178216+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:16.179314+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.449s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:16.180360+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:18.219863+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "c5166f91-2f09-47b8-add4-b347789ba889"}
{"timestamp": "2025-12-29T13:24:18.221593+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 422 (0.002s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "c5166f91-2f09-47b8-add4-b347789ba889"}
{"timestamp": "2025-12-29T13:25:42.204909+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-29T13:25:44.561184+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-29T13:25:44.561407+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-29T13:25:44.561556+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.561717+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.562042+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.562325+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.562515+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.562653+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.562823+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.563020+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.563189+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.563337+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.563465+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.563610+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.563794+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.563916+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.564029+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.564143+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.564257+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.564369+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.564481+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.564592+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.564703+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.564914+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.565042+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.565155+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.565268+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.565420+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.565640+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.565858+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.566029+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.566223+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.566363+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.566570+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.566720+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.566870+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.567029+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.567232+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.567414+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.567590+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.567809+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.567952+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.568092+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.568225+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.568366+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.568511+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.568672+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.568845+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.569017+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.569165+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.569310+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.569470+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.569615+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.569745+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.569868+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.570072+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.570329+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.570517+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.570689+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.570939+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.571105+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/showtimes/{showtime_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.571298+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.571480+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.571649+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-29T13:25:44.571832+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-29T13:26:03.234430+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.292133+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.292705+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.295930+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.296578+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.299356+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.299827+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.302169+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.304847+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.305470+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'email_1': 'test_admin_1767014761.1741905@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.535984+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.536418+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00065s] {'email': 'test_admin_1767014761.1741905@example.com', 'hashed_password': '$2b$12$AsS6sSd0MQEnPK1EUqPl2OmgqRmYwryWtN4TJADY0IUsAi3H4VVA2', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.538591+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.545656+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.547151+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.547610+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00062s] {'pk_1': 41}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.550584+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 41, 'email': 'test_admin_1767014761.1741905@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.552234+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.583868+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.585406+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.585785+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'user_id_1': 41, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.589885+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.590438+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00069s] {'user_id': 41, 'name': None, 'email': 'test_admin_1767014761.1741905@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.593387+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.597789+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.599385+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.599908+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00082s] {'pk_1': 41}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.602303+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 41, 'user_id': 41, 'email': 'test_admin_1767014761.1741905@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.602571+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.602806+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.603333+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.604737+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.606318+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.606807+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.3021s ago] {'email_1': 'test_admin_1767014761.1741905@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.830356+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 41, 'email': 'test_admin_1767014761.1741905@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.831576+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.831832+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.833212+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.599s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.834548+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:05.873618+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "a86d53c1-0b5f-437f-b2ea-10fa925e7d0e"}
{"timestamp": "2025-12-29T13:26:05.876960+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a86d53c1-0b5f-437f-b2ea-10fa925e7d0e"}
{"timestamp": "2025-12-29T13:26:05.878741+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a86d53c1-0b5f-437f-b2ea-10fa925e7d0e"}
{"timestamp": "2025-12-29T13:26:05.879271+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'title_1': 'Test Movie 1767014761.1741905'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a86d53c1-0b5f-437f-b2ea-10fa925e7d0e"}
{"timestamp": "2025-12-29T13:26:05.883922+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a86d53c1-0b5f-437f-b2ea-10fa925e7d0e"}
{"timestamp": "2025-12-29T13:26:05.884494+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00063s] {'title': 'Test Movie 1767014761.1741905', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a86d53c1-0b5f-437f-b2ea-10fa925e7d0e"}
{"timestamp": "2025-12-29T13:26:05.886786+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "a86d53c1-0b5f-437f-b2ea-10fa925e7d0e"}
{"timestamp": "2025-12-29T13:26:05.892228+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a86d53c1-0b5f-437f-b2ea-10fa925e7d0e"}
{"timestamp": "2025-12-29T13:26:05.893537+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a86d53c1-0b5f-437f-b2ea-10fa925e7d0e"}
{"timestamp": "2025-12-29T13:26:05.894071+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00077s] {'pk_1': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a86d53c1-0b5f-437f-b2ea-10fa925e7d0e"}
{"timestamp": "2025-12-29T13:26:05.896778+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 28}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "a86d53c1-0b5f-437f-b2ea-10fa925e7d0e"}
{"timestamp": "2025-12-29T13:26:05.898298+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "a86d53c1-0b5f-437f-b2ea-10fa925e7d0e"}
{"timestamp": "2025-12-29T13:26:05.898588+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "a86d53c1-0b5f-437f-b2ea-10fa925e7d0e"}
{"timestamp": "2025-12-29T13:26:05.900418+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.027s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "a86d53c1-0b5f-437f-b2ea-10fa925e7d0e"}
{"timestamp": "2025-12-29T13:26:05.901491+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a86d53c1-0b5f-437f-b2ea-10fa925e7d0e"}
{"timestamp": "2025-12-29T13:26:07.957411+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "463f4179-6b59-46ac-8e4b-a2e5534e259f"}
{"timestamp": "2025-12-29T13:26:07.960798+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "463f4179-6b59-46ac-8e4b-a2e5534e259f"}
{"timestamp": "2025-12-29T13:26:07.962090+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "463f4179-6b59-46ac-8e4b-a2e5534e259f"}
{"timestamp": "2025-12-29T13:26:07.962594+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'name_1': 'Test Layout 1767014761.1741905'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "463f4179-6b59-46ac-8e4b-a2e5534e259f"}
{"timestamp": "2025-12-29T13:26:07.966422+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "463f4179-6b59-46ac-8e4b-a2e5534e259f"}
{"timestamp": "2025-12-29T13:26:07.966835+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'name': 'Test Layout 1767014761.1741905', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "463f4179-6b59-46ac-8e4b-a2e5534e259f"}
{"timestamp": "2025-12-29T13:26:07.969134+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "463f4179-6b59-46ac-8e4b-a2e5534e259f"}
{"timestamp": "2025-12-29T13:26:07.973643+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "463f4179-6b59-46ac-8e4b-a2e5534e259f"}
{"timestamp": "2025-12-29T13:26:07.974649+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "463f4179-6b59-46ac-8e4b-a2e5534e259f"}
{"timestamp": "2025-12-29T13:26:07.975240+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'pk_1': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "463f4179-6b59-46ac-8e4b-a2e5534e259f"}
{"timestamp": "2025-12-29T13:26:07.977659+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 27}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "463f4179-6b59-46ac-8e4b-a2e5534e259f"}
{"timestamp": "2025-12-29T13:26:07.978903+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "463f4179-6b59-46ac-8e4b-a2e5534e259f"}
{"timestamp": "2025-12-29T13:26:07.979132+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "463f4179-6b59-46ac-8e4b-a2e5534e259f"}
{"timestamp": "2025-12-29T13:26:07.980506+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.023s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "463f4179-6b59-46ac-8e4b-a2e5534e259f"}
{"timestamp": "2025-12-29T13:26:07.981759+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "463f4179-6b59-46ac-8e4b-a2e5534e259f"}
{"timestamp": "2025-12-29T13:26:10.017062+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "bc63e413-09a8-4627-921e-2224c26f0acb"}
{"timestamp": "2025-12-29T13:26:10.019774+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bc63e413-09a8-4627-921e-2224c26f0acb"}
{"timestamp": "2025-12-29T13:26:10.021866+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bc63e413-09a8-4627-921e-2224c26f0acb"}
{"timestamp": "2025-12-29T13:26:10.022442+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00101s] {'name_1': 'Test Screen 1767014761.1741905', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bc63e413-09a8-4627-921e-2224c26f0acb"}
{"timestamp": "2025-12-29T13:26:10.026651+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bc63e413-09a8-4627-921e-2224c26f0acb"}
{"timestamp": "2025-12-29T13:26:10.027127+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00070s] {'id_1': 27, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bc63e413-09a8-4627-921e-2224c26f0acb"}
{"timestamp": "2025-12-29T13:26:10.034453+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bc63e413-09a8-4627-921e-2224c26f0acb"}
{"timestamp": "2025-12-29T13:26:10.035159+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00063s] {'name': 'Test Screen 1767014761.1741905', 'capacity': 150, 'seat_layout_id': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bc63e413-09a8-4627-921e-2224c26f0acb"}
{"timestamp": "2025-12-29T13:26:10.037712+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "bc63e413-09a8-4627-921e-2224c26f0acb"}
{"timestamp": "2025-12-29T13:26:10.043407+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bc63e413-09a8-4627-921e-2224c26f0acb"}
{"timestamp": "2025-12-29T13:26:10.044601+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bc63e413-09a8-4627-921e-2224c26f0acb"}
{"timestamp": "2025-12-29T13:26:10.045105+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'pk_1': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bc63e413-09a8-4627-921e-2224c26f0acb"}
{"timestamp": "2025-12-29T13:26:10.047864+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 27}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "bc63e413-09a8-4627-921e-2224c26f0acb"}
{"timestamp": "2025-12-29T13:26:10.049219+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "bc63e413-09a8-4627-921e-2224c26f0acb"}
{"timestamp": "2025-12-29T13:26:10.049581+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "bc63e413-09a8-4627-921e-2224c26f0acb"}
{"timestamp": "2025-12-29T13:26:10.051407+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.034s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "bc63e413-09a8-4627-921e-2224c26f0acb"}
{"timestamp": "2025-12-29T13:26:10.052387+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "bc63e413-09a8-4627-921e-2224c26f0acb"}
{"timestamp": "2025-12-29T13:26:12.091838+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "8d49d493-daf1-4dd2-a3c8-56e9756e7930"}
{"timestamp": "2025-12-29T13:26:12.095260+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 422 (0.003s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "8d49d493-daf1-4dd2-a3c8-56e9756e7930"}
{"timestamp": "2025-12-29T13:26:14.138768+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.141836+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.142701+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.143190+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.84s ago] {'email_1': 'test_admin_1767014772.096821@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.356050+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.356513+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.82s ago] {'email': 'test_admin_1767014772.096821@example.com', 'hashed_password': '$2b$12$bkJJtyxk1zdIXH7iie9HPOCwCZ6o1iDnsPlfXJXGKfi3vfvqwN/8a', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.358577+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.364046+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.364778+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.365332+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.82s ago] {'pk_1': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.367391+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 42, 'email': 'test_admin_1767014772.096821@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.368577+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.370970+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.371742+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.372151+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.79s ago] {'user_id_1': 42, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.374544+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.375088+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.79s ago] {'user_id': 42, 'name': None, 'email': 'test_admin_1767014772.096821@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.377171+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.382429+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.383590+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.384250+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.79s ago] {'pk_1': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.386698+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 42, 'user_id': 42, 'email': 'test_admin_1767014772.096821@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.387008+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.387314+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.387864+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.389742+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.391178+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.391634+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 11.09s ago] {'email_1': 'test_admin_1767014772.096821@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.597197+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 42, 'email': 'test_admin_1767014772.096821@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.598555+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.598816+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.599929+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.461s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.600954+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:16.639515+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "d2741109-3da4-44d9-b11c-c86adac587a9"}
{"timestamp": "2025-12-29T13:26:16.642204+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d2741109-3da4-44d9-b11c-c86adac587a9"}
{"timestamp": "2025-12-29T13:26:16.642877+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d2741109-3da4-44d9-b11c-c86adac587a9"}
{"timestamp": "2025-12-29T13:26:16.643267+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.76s ago] {'title_1': 'Test Movie 1767014772.096821'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d2741109-3da4-44d9-b11c-c86adac587a9"}
{"timestamp": "2025-12-29T13:26:16.646097+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d2741109-3da4-44d9-b11c-c86adac587a9"}
{"timestamp": "2025-12-29T13:26:16.647065+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.76s ago] {'title': 'Test Movie 1767014772.096821', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d2741109-3da4-44d9-b11c-c86adac587a9"}
{"timestamp": "2025-12-29T13:26:16.649485+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "d2741109-3da4-44d9-b11c-c86adac587a9"}
{"timestamp": "2025-12-29T13:26:16.655301+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d2741109-3da4-44d9-b11c-c86adac587a9"}
{"timestamp": "2025-12-29T13:26:16.656089+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d2741109-3da4-44d9-b11c-c86adac587a9"}
{"timestamp": "2025-12-29T13:26:16.656557+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.76s ago] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d2741109-3da4-44d9-b11c-c86adac587a9"}
{"timestamp": "2025-12-29T13:26:16.658769+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 29}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "d2741109-3da4-44d9-b11c-c86adac587a9"}
{"timestamp": "2025-12-29T13:26:16.660076+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "d2741109-3da4-44d9-b11c-c86adac587a9"}
{"timestamp": "2025-12-29T13:26:16.660346+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "d2741109-3da4-44d9-b11c-c86adac587a9"}
{"timestamp": "2025-12-29T13:26:16.661890+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "d2741109-3da4-44d9-b11c-c86adac587a9"}
{"timestamp": "2025-12-29T13:26:16.663006+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d2741109-3da4-44d9-b11c-c86adac587a9"}
{"timestamp": "2025-12-29T13:26:18.709519+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "d78f539f-44c4-40a8-8abe-0b4181cfe29a"}
{"timestamp": "2025-12-29T13:26:18.712293+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d78f539f-44c4-40a8-8abe-0b4181cfe29a"}
{"timestamp": "2025-12-29T13:26:18.712964+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d78f539f-44c4-40a8-8abe-0b4181cfe29a"}
{"timestamp": "2025-12-29T13:26:18.713423+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.75s ago] {'name_1': 'Test Layout 1767014772.096821'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d78f539f-44c4-40a8-8abe-0b4181cfe29a"}
{"timestamp": "2025-12-29T13:26:18.715727+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d78f539f-44c4-40a8-8abe-0b4181cfe29a"}
{"timestamp": "2025-12-29T13:26:18.716241+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.75s ago] {'name': 'Test Layout 1767014772.096821', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d78f539f-44c4-40a8-8abe-0b4181cfe29a"}
{"timestamp": "2025-12-29T13:26:18.719850+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "d78f539f-44c4-40a8-8abe-0b4181cfe29a"}
{"timestamp": "2025-12-29T13:26:18.724027+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d78f539f-44c4-40a8-8abe-0b4181cfe29a"}
{"timestamp": "2025-12-29T13:26:18.724900+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d78f539f-44c4-40a8-8abe-0b4181cfe29a"}
{"timestamp": "2025-12-29T13:26:18.725372+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.75s ago] {'pk_1': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d78f539f-44c4-40a8-8abe-0b4181cfe29a"}
{"timestamp": "2025-12-29T13:26:18.727955+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 28}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "d78f539f-44c4-40a8-8abe-0b4181cfe29a"}
{"timestamp": "2025-12-29T13:26:18.729159+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "d78f539f-44c4-40a8-8abe-0b4181cfe29a"}
{"timestamp": "2025-12-29T13:26:18.729507+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "d78f539f-44c4-40a8-8abe-0b4181cfe29a"}
{"timestamp": "2025-12-29T13:26:18.731044+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "d78f539f-44c4-40a8-8abe-0b4181cfe29a"}
{"timestamp": "2025-12-29T13:26:18.732156+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d78f539f-44c4-40a8-8abe-0b4181cfe29a"}
{"timestamp": "2025-12-29T13:26:20.752933+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "9567e0eb-abce-4b01-8b39-9e11f7ea2733"}
{"timestamp": "2025-12-29T13:26:20.755741+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9567e0eb-abce-4b01-8b39-9e11f7ea2733"}
{"timestamp": "2025-12-29T13:26:20.756492+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9567e0eb-abce-4b01-8b39-9e11f7ea2733"}
{"timestamp": "2025-12-29T13:26:20.756934+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.74s ago] {'name_1': 'Test Screen 1767014772.096821', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9567e0eb-abce-4b01-8b39-9e11f7ea2733"}
{"timestamp": "2025-12-29T13:26:20.759730+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9567e0eb-abce-4b01-8b39-9e11f7ea2733"}
{"timestamp": "2025-12-29T13:26:20.760283+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.73s ago] {'id_1': 28, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9567e0eb-abce-4b01-8b39-9e11f7ea2733"}
{"timestamp": "2025-12-29T13:26:20.762330+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9567e0eb-abce-4b01-8b39-9e11f7ea2733"}
{"timestamp": "2025-12-29T13:26:20.762823+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.73s ago] {'name': 'Test Screen 1767014772.096821', 'capacity': 150, 'seat_layout_id': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9567e0eb-abce-4b01-8b39-9e11f7ea2733"}
{"timestamp": "2025-12-29T13:26:20.764803+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "9567e0eb-abce-4b01-8b39-9e11f7ea2733"}
{"timestamp": "2025-12-29T13:26:20.769389+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9567e0eb-abce-4b01-8b39-9e11f7ea2733"}
{"timestamp": "2025-12-29T13:26:20.770074+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9567e0eb-abce-4b01-8b39-9e11f7ea2733"}
{"timestamp": "2025-12-29T13:26:20.770607+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.73s ago] {'pk_1': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9567e0eb-abce-4b01-8b39-9e11f7ea2733"}
{"timestamp": "2025-12-29T13:26:20.773097+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 28}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "9567e0eb-abce-4b01-8b39-9e11f7ea2733"}
{"timestamp": "2025-12-29T13:26:20.774223+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "9567e0eb-abce-4b01-8b39-9e11f7ea2733"}
{"timestamp": "2025-12-29T13:26:20.774431+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "9567e0eb-abce-4b01-8b39-9e11f7ea2733"}
{"timestamp": "2025-12-29T13:26:20.775537+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.023s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "9567e0eb-abce-4b01-8b39-9e11f7ea2733"}
{"timestamp": "2025-12-29T13:26:20.776591+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "9567e0eb-abce-4b01-8b39-9e11f7ea2733"}
{"timestamp": "2025-12-29T13:26:22.835389+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "ae2fc372-c039-441c-a564-c70b3e65d32a"}
{"timestamp": "2025-12-29T13:26:22.837513+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 422 (0.002s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "ae2fc372-c039-441c-a564-c70b3e65d32a"}
{"timestamp": "2025-12-29T13:26:24.881335+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:24.884398+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:24.885187+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:24.885714+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 21.58s ago] {'email_1': 'test_admin_1767014782.8390186@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.103290+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.103770+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 21.57s ago] {'email': 'test_admin_1767014782.8390186@example.com', 'hashed_password': '$2b$12$7B/9N0t/kxlvIo9PJwkPXeZrJY6dJuDI..BzT/NvcAKbOdJoGTg62', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.105543+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.110483+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.111400+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.111992+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 21.57s ago] {'pk_1': 43}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.114361+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 43, 'email': 'test_admin_1767014782.8390186@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.115467+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.117752+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.118522+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.118890+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 21.53s ago] {'user_id_1': 43, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.121257+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.121676+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 21.53s ago] {'user_id': 43, 'name': None, 'email': 'test_admin_1767014782.8390186@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.123332+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.127119+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.128127+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.128502+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 21.53s ago] {'pk_1': 43}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.130651+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 43, 'user_id': 43, 'email': 'test_admin_1767014782.8390186@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.130937+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.131144+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.131496+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.132405+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.133877+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.134394+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 21.83s ago] {'email_1': 'test_admin_1767014782.8390186@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.339853+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 43, 'email': 'test_admin_1767014782.8390186@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.341414+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.341662+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.342880+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.462s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.343883+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:27.392840+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "139a9b21-3de3-4b3d-84d4-616af27f87c8"}
{"timestamp": "2025-12-29T13:26:27.395328+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "139a9b21-3de3-4b3d-84d4-616af27f87c8"}
{"timestamp": "2025-12-29T13:26:27.396014+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "139a9b21-3de3-4b3d-84d4-616af27f87c8"}
{"timestamp": "2025-12-29T13:26:27.396453+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 21.52s ago] {'title_1': 'Test Movie 1767014782.8390186'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "139a9b21-3de3-4b3d-84d4-616af27f87c8"}
{"timestamp": "2025-12-29T13:26:27.399542+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "139a9b21-3de3-4b3d-84d4-616af27f87c8"}
{"timestamp": "2025-12-29T13:26:27.400107+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 21.52s ago] {'title': 'Test Movie 1767014782.8390186', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "139a9b21-3de3-4b3d-84d4-616af27f87c8"}
{"timestamp": "2025-12-29T13:26:27.401829+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "139a9b21-3de3-4b3d-84d4-616af27f87c8"}
{"timestamp": "2025-12-29T13:26:27.406247+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "139a9b21-3de3-4b3d-84d4-616af27f87c8"}
{"timestamp": "2025-12-29T13:26:27.407158+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "139a9b21-3de3-4b3d-84d4-616af27f87c8"}
{"timestamp": "2025-12-29T13:26:27.407733+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 21.51s ago] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "139a9b21-3de3-4b3d-84d4-616af27f87c8"}
{"timestamp": "2025-12-29T13:26:27.409956+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 30}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "139a9b21-3de3-4b3d-84d4-616af27f87c8"}
{"timestamp": "2025-12-29T13:26:27.411219+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "139a9b21-3de3-4b3d-84d4-616af27f87c8"}
{"timestamp": "2025-12-29T13:26:27.411558+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "139a9b21-3de3-4b3d-84d4-616af27f87c8"}
{"timestamp": "2025-12-29T13:26:27.413066+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.020s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "139a9b21-3de3-4b3d-84d4-616af27f87c8"}
{"timestamp": "2025-12-29T13:26:27.414087+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "139a9b21-3de3-4b3d-84d4-616af27f87c8"}
{"timestamp": "2025-12-29T13:26:29.457595+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "2d88262b-196b-4958-bf8c-074f3af700fa"}
{"timestamp": "2025-12-29T13:26:29.460551+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2d88262b-196b-4958-bf8c-074f3af700fa"}
{"timestamp": "2025-12-29T13:26:29.461171+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2d88262b-196b-4958-bf8c-074f3af700fa"}
{"timestamp": "2025-12-29T13:26:29.461642+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 21.5s ago] {'name_1': 'Test Layout 1767014782.8390186'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2d88262b-196b-4958-bf8c-074f3af700fa"}
{"timestamp": "2025-12-29T13:26:29.464105+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2d88262b-196b-4958-bf8c-074f3af700fa"}
{"timestamp": "2025-12-29T13:26:29.464632+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 21.5s ago] {'name': 'Test Layout 1767014782.8390186', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2d88262b-196b-4958-bf8c-074f3af700fa"}
{"timestamp": "2025-12-29T13:26:29.466357+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2d88262b-196b-4958-bf8c-074f3af700fa"}
{"timestamp": "2025-12-29T13:26:29.471573+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2d88262b-196b-4958-bf8c-074f3af700fa"}
{"timestamp": "2025-12-29T13:26:29.472435+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2d88262b-196b-4958-bf8c-074f3af700fa"}
{"timestamp": "2025-12-29T13:26:29.472890+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 21.5s ago] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2d88262b-196b-4958-bf8c-074f3af700fa"}
{"timestamp": "2025-12-29T13:26:29.475373+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 29}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "2d88262b-196b-4958-bf8c-074f3af700fa"}
{"timestamp": "2025-12-29T13:26:29.476522+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2d88262b-196b-4958-bf8c-074f3af700fa"}
{"timestamp": "2025-12-29T13:26:29.476803+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "2d88262b-196b-4958-bf8c-074f3af700fa"}
{"timestamp": "2025-12-29T13:26:29.478286+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.021s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "2d88262b-196b-4958-bf8c-074f3af700fa"}
{"timestamp": "2025-12-29T13:26:29.479244+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2d88262b-196b-4958-bf8c-074f3af700fa"}
{"timestamp": "2025-12-29T13:26:31.529580+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "d9484162-e97b-4f32-9497-5fd1146aceec"}
{"timestamp": "2025-12-29T13:26:31.532678+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d9484162-e97b-4f32-9497-5fd1146aceec"}
{"timestamp": "2025-12-29T13:26:31.533479+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d9484162-e97b-4f32-9497-5fd1146aceec"}
{"timestamp": "2025-12-29T13:26:31.533905+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 21.51s ago] {'name_1': 'Test Screen 1767014782.8390186', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d9484162-e97b-4f32-9497-5fd1146aceec"}
{"timestamp": "2025-12-29T13:26:31.536647+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d9484162-e97b-4f32-9497-5fd1146aceec"}
{"timestamp": "2025-12-29T13:26:31.537281+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 21.51s ago] {'id_1': 29, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d9484162-e97b-4f32-9497-5fd1146aceec"}
{"timestamp": "2025-12-29T13:26:31.539513+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d9484162-e97b-4f32-9497-5fd1146aceec"}
{"timestamp": "2025-12-29T13:26:31.540007+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 21.51s ago] {'name': 'Test Screen 1767014782.8390186', 'capacity': 150, 'seat_layout_id': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d9484162-e97b-4f32-9497-5fd1146aceec"}
{"timestamp": "2025-12-29T13:26:31.541886+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "d9484162-e97b-4f32-9497-5fd1146aceec"}
{"timestamp": "2025-12-29T13:26:31.546612+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d9484162-e97b-4f32-9497-5fd1146aceec"}
{"timestamp": "2025-12-29T13:26:31.547369+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d9484162-e97b-4f32-9497-5fd1146aceec"}
{"timestamp": "2025-12-29T13:26:31.547881+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 21.5s ago] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d9484162-e97b-4f32-9497-5fd1146aceec"}
{"timestamp": "2025-12-29T13:26:31.550427+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 29}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "d9484162-e97b-4f32-9497-5fd1146aceec"}
{"timestamp": "2025-12-29T13:26:31.552132+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "d9484162-e97b-4f32-9497-5fd1146aceec"}
{"timestamp": "2025-12-29T13:26:31.552563+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "d9484162-e97b-4f32-9497-5fd1146aceec"}
{"timestamp": "2025-12-29T13:26:31.554298+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.025s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "d9484162-e97b-4f32-9497-5fd1146aceec"}
{"timestamp": "2025-12-29T13:26:31.555504+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d9484162-e97b-4f32-9497-5fd1146aceec"}
{"timestamp": "2025-12-29T13:26:33.607874+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "6bdd5fe4-b6c2-4aff-8235-031f363ad1b5"}
{"timestamp": "2025-12-29T13:26:33.609881+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 422 (0.002s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "6bdd5fe4-b6c2-4aff-8235-031f363ad1b5"}
{"timestamp": "2025-12-29T13:26:35.639928+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.642737+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.643381+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.643815+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.34s ago] {'email_1': 'test_admin_1767014793.6117089@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.855026+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.855634+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.32s ago] {'email': 'test_admin_1767014793.6117089@example.com', 'hashed_password': '$2b$12$0q1womj8WXmEboCE.mtC8OwlM2ed2wAZG9U7K/SmznovZ8Lvj4ZFa', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.857898+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.863003+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.863865+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.864496+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.32s ago] {'pk_1': 44}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.866601+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 44, 'email': 'test_admin_1767014793.6117089@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.867773+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.870431+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.871362+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.871956+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.29s ago] {'user_id_1': 44, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.874926+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.875411+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.29s ago] {'user_id': 44, 'name': None, 'email': 'test_admin_1767014793.6117089@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.877497+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.882006+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.882806+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.883259+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.28s ago] {'pk_1': 44}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.885540+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 44, 'user_id': 44, 'email': 'test_admin_1767014793.6117089@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.885800+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.885995+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.886444+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.887873+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.889300+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.889716+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.59s ago] {'email_1': 'test_admin_1767014793.6117089@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:36.108929+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 44, 'email': 'test_admin_1767014793.6117089@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:36.110353+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:36.110633+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:36.112138+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.472s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:36.113359+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:38.156491+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "2ff9b0f3-217d-4511-ab5d-a8f22fb4fa77"}
{"timestamp": "2025-12-29T13:26:38.160118+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2ff9b0f3-217d-4511-ab5d-a8f22fb4fa77"}
{"timestamp": "2025-12-29T13:26:38.161046+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ff9b0f3-217d-4511-ab5d-a8f22fb4fa77"}
{"timestamp": "2025-12-29T13:26:38.161618+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.28s ago] {'title_1': 'Test Movie 1767014793.6117089'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ff9b0f3-217d-4511-ab5d-a8f22fb4fa77"}
{"timestamp": "2025-12-29T13:26:38.165651+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ff9b0f3-217d-4511-ab5d-a8f22fb4fa77"}
{"timestamp": "2025-12-29T13:26:38.166827+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.28s ago] {'title': 'Test Movie 1767014793.6117089', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ff9b0f3-217d-4511-ab5d-a8f22fb4fa77"}
{"timestamp": "2025-12-29T13:26:38.169575+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2ff9b0f3-217d-4511-ab5d-a8f22fb4fa77"}
{"timestamp": "2025-12-29T13:26:38.175361+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2ff9b0f3-217d-4511-ab5d-a8f22fb4fa77"}
{"timestamp": "2025-12-29T13:26:38.176542+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ff9b0f3-217d-4511-ab5d-a8f22fb4fa77"}
{"timestamp": "2025-12-29T13:26:38.177221+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.28s ago] {'pk_1': 31}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ff9b0f3-217d-4511-ab5d-a8f22fb4fa77"}
{"timestamp": "2025-12-29T13:26:38.180184+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 31}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "2ff9b0f3-217d-4511-ab5d-a8f22fb4fa77"}
{"timestamp": "2025-12-29T13:26:38.181724+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2ff9b0f3-217d-4511-ab5d-a8f22fb4fa77"}
{"timestamp": "2025-12-29T13:26:38.182090+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "2ff9b0f3-217d-4511-ab5d-a8f22fb4fa77"}
{"timestamp": "2025-12-29T13:26:38.184421+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.028s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "2ff9b0f3-217d-4511-ab5d-a8f22fb4fa77"}
{"timestamp": "2025-12-29T13:26:38.185720+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2ff9b0f3-217d-4511-ab5d-a8f22fb4fa77"}
{"timestamp": "2025-12-29T13:26:40.235168+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "7f175569-901e-4bb1-94cc-57c47f75a654"}
{"timestamp": "2025-12-29T13:26:40.238626+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7f175569-901e-4bb1-94cc-57c47f75a654"}
{"timestamp": "2025-12-29T13:26:40.239506+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f175569-901e-4bb1-94cc-57c47f75a654"}
{"timestamp": "2025-12-29T13:26:40.240236+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.28s ago] {'name_1': 'Test Layout 1767014793.6117089'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f175569-901e-4bb1-94cc-57c47f75a654"}
{"timestamp": "2025-12-29T13:26:40.244039+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f175569-901e-4bb1-94cc-57c47f75a654"}
{"timestamp": "2025-12-29T13:26:40.244733+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.28s ago] {'name': 'Test Layout 1767014793.6117089', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f175569-901e-4bb1-94cc-57c47f75a654"}
{"timestamp": "2025-12-29T13:26:40.247062+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "7f175569-901e-4bb1-94cc-57c47f75a654"}
{"timestamp": "2025-12-29T13:26:40.251416+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7f175569-901e-4bb1-94cc-57c47f75a654"}
{"timestamp": "2025-12-29T13:26:40.252314+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f175569-901e-4bb1-94cc-57c47f75a654"}
{"timestamp": "2025-12-29T13:26:40.253144+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.28s ago] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f175569-901e-4bb1-94cc-57c47f75a654"}
{"timestamp": "2025-12-29T13:26:40.256187+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 30}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "7f175569-901e-4bb1-94cc-57c47f75a654"}
{"timestamp": "2025-12-29T13:26:40.258072+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "7f175569-901e-4bb1-94cc-57c47f75a654"}
{"timestamp": "2025-12-29T13:26:40.258503+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "7f175569-901e-4bb1-94cc-57c47f75a654"}
{"timestamp": "2025-12-29T13:26:40.260289+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.025s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "7f175569-901e-4bb1-94cc-57c47f75a654"}
{"timestamp": "2025-12-29T13:26:40.261883+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "7f175569-901e-4bb1-94cc-57c47f75a654"}
{"timestamp": "2025-12-29T13:26:42.311866+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "2efb256c-1420-421e-826e-befa01db32c8"}
{"timestamp": "2025-12-29T13:26:42.315078+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2efb256c-1420-421e-826e-befa01db32c8"}
{"timestamp": "2025-12-29T13:26:42.315894+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2efb256c-1420-421e-826e-befa01db32c8"}
{"timestamp": "2025-12-29T13:26:42.316456+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.3s ago] {'name_1': 'Test Screen 1767014793.6117089', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2efb256c-1420-421e-826e-befa01db32c8"}
{"timestamp": "2025-12-29T13:26:42.319778+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2efb256c-1420-421e-826e-befa01db32c8"}
{"timestamp": "2025-12-29T13:26:42.320260+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.29s ago] {'id_1': 30, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2efb256c-1420-421e-826e-befa01db32c8"}
{"timestamp": "2025-12-29T13:26:42.322352+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2efb256c-1420-421e-826e-befa01db32c8"}
{"timestamp": "2025-12-29T13:26:42.322941+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.29s ago] {'name': 'Test Screen 1767014793.6117089', 'capacity': 150, 'seat_layout_id': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2efb256c-1420-421e-826e-befa01db32c8"}
{"timestamp": "2025-12-29T13:26:42.324927+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2efb256c-1420-421e-826e-befa01db32c8"}
{"timestamp": "2025-12-29T13:26:42.330940+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2efb256c-1420-421e-826e-befa01db32c8"}
{"timestamp": "2025-12-29T13:26:42.331849+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2efb256c-1420-421e-826e-befa01db32c8"}
{"timestamp": "2025-12-29T13:26:42.332397+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.29s ago] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2efb256c-1420-421e-826e-befa01db32c8"}
{"timestamp": "2025-12-29T13:26:42.335095+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 30}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "2efb256c-1420-421e-826e-befa01db32c8"}
{"timestamp": "2025-12-29T13:26:42.336603+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2efb256c-1420-421e-826e-befa01db32c8"}
{"timestamp": "2025-12-29T13:26:42.336975+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "2efb256c-1420-421e-826e-befa01db32c8"}
{"timestamp": "2025-12-29T13:26:42.338921+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.027s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "2efb256c-1420-421e-826e-befa01db32c8"}
{"timestamp": "2025-12-29T13:26:42.340175+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2efb256c-1420-421e-826e-befa01db32c8"}
{"timestamp": "2025-12-29T13:26:44.389783+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "3112ee0e-505a-4772-80e1-13276bc5afe9"}
{"timestamp": "2025-12-29T13:26:44.392183+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 422 (0.002s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "3112ee0e-505a-4772-80e1-13276bc5afe9"}
{"timestamp": "2025-12-29T13:26:46.442116+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.445239+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.446056+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.446497+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 43.14s ago] {'email_1': 'test_admin_1767014804.3940573@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.659842+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.660335+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 43.13s ago] {'email': 'test_admin_1767014804.3940573@example.com', 'hashed_password': '$2b$12$rhjrETDs3b5XZYb2kM2ru.vcDFJJvpDcUASIrzoC9nF4aHYa0vk5q', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.661977+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.666391+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.667217+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.667753+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 43.12s ago] {'pk_1': 45}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.670025+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 45, 'email': 'test_admin_1767014804.3940573@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.671289+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.673593+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.674300+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.674672+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 43.09s ago] {'user_id_1': 45, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.677340+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.677827+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 43.09s ago] {'user_id': 45, 'name': None, 'email': 'test_admin_1767014804.3940573@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.679592+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.683397+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.684206+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.684727+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 43.09s ago] {'pk_1': 45}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.686597+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 45, 'user_id': 45, 'email': 'test_admin_1767014804.3940573@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.686828+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.687030+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.687323+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.688353+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.689716+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.690208+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 43.39s ago] {'email_1': 'test_admin_1767014804.3940573@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.897696+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 45, 'email': 'test_admin_1767014804.3940573@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.898950+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.899264+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.900443+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.458s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.901455+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:48.940811+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "bf13a03d-c11c-4625-9e08-d8338ed89682"}
{"timestamp": "2025-12-29T13:26:48.943556+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bf13a03d-c11c-4625-9e08-d8338ed89682"}
{"timestamp": "2025-12-29T13:26:48.944297+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf13a03d-c11c-4625-9e08-d8338ed89682"}
{"timestamp": "2025-12-29T13:26:48.944720+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 43.07s ago] {'title_1': 'Test Movie 1767014804.3940573'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf13a03d-c11c-4625-9e08-d8338ed89682"}
{"timestamp": "2025-12-29T13:26:48.947287+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf13a03d-c11c-4625-9e08-d8338ed89682"}
{"timestamp": "2025-12-29T13:26:48.947895+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 43.06s ago] {'title': 'Test Movie 1767014804.3940573', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf13a03d-c11c-4625-9e08-d8338ed89682"}
{"timestamp": "2025-12-29T13:26:48.949923+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "bf13a03d-c11c-4625-9e08-d8338ed89682"}
{"timestamp": "2025-12-29T13:26:48.955368+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bf13a03d-c11c-4625-9e08-d8338ed89682"}
{"timestamp": "2025-12-29T13:26:48.956104+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf13a03d-c11c-4625-9e08-d8338ed89682"}
{"timestamp": "2025-12-29T13:26:48.956511+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 43.06s ago] {'pk_1': 32}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf13a03d-c11c-4625-9e08-d8338ed89682"}
{"timestamp": "2025-12-29T13:26:48.958598+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 32}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "bf13a03d-c11c-4625-9e08-d8338ed89682"}
{"timestamp": "2025-12-29T13:26:48.959713+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "bf13a03d-c11c-4625-9e08-d8338ed89682"}
{"timestamp": "2025-12-29T13:26:48.960013+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "bf13a03d-c11c-4625-9e08-d8338ed89682"}
{"timestamp": "2025-12-29T13:26:48.961639+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.021s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "bf13a03d-c11c-4625-9e08-d8338ed89682"}
{"timestamp": "2025-12-29T13:26:48.962629+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "bf13a03d-c11c-4625-9e08-d8338ed89682"}
{"timestamp": "2025-12-29T13:26:51.002118+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "f8e1a9a2-3327-4c42-867b-3b98c30807a5"}
{"timestamp": "2025-12-29T13:26:51.004979+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f8e1a9a2-3327-4c42-867b-3b98c30807a5"}
{"timestamp": "2025-12-29T13:26:51.005633+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f8e1a9a2-3327-4c42-867b-3b98c30807a5"}
{"timestamp": "2025-12-29T13:26:51.006144+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 43.04s ago] {'name_1': 'Test Layout 1767014804.3940573'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f8e1a9a2-3327-4c42-867b-3b98c30807a5"}
{"timestamp": "2025-12-29T13:26:51.008572+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f8e1a9a2-3327-4c42-867b-3b98c30807a5"}
{"timestamp": "2025-12-29T13:26:51.009032+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 43.04s ago] {'name': 'Test Layout 1767014804.3940573', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f8e1a9a2-3327-4c42-867b-3b98c30807a5"}
{"timestamp": "2025-12-29T13:26:51.010910+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "f8e1a9a2-3327-4c42-867b-3b98c30807a5"}
{"timestamp": "2025-12-29T13:26:51.015852+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f8e1a9a2-3327-4c42-867b-3b98c30807a5"}
{"timestamp": "2025-12-29T13:26:51.016659+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f8e1a9a2-3327-4c42-867b-3b98c30807a5"}
{"timestamp": "2025-12-29T13:26:51.017097+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 43.04s ago] {'pk_1': 31}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f8e1a9a2-3327-4c42-867b-3b98c30807a5"}
{"timestamp": "2025-12-29T13:26:51.019297+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 31}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "f8e1a9a2-3327-4c42-867b-3b98c30807a5"}
{"timestamp": "2025-12-29T13:26:51.020410+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "f8e1a9a2-3327-4c42-867b-3b98c30807a5"}
{"timestamp": "2025-12-29T13:26:51.020658+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "f8e1a9a2-3327-4c42-867b-3b98c30807a5"}
{"timestamp": "2025-12-29T13:26:51.021791+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.020s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "f8e1a9a2-3327-4c42-867b-3b98c30807a5"}
{"timestamp": "2025-12-29T13:26:51.023015+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f8e1a9a2-3327-4c42-867b-3b98c30807a5"}
{"timestamp": "2025-12-29T13:26:53.068176+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "ddd72ca6-54c2-44b1-9883-ac6c227fd04f"}
{"timestamp": "2025-12-29T13:26:53.071089+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ddd72ca6-54c2-44b1-9883-ac6c227fd04f"}
{"timestamp": "2025-12-29T13:26:53.071967+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ddd72ca6-54c2-44b1-9883-ac6c227fd04f"}
{"timestamp": "2025-12-29T13:26:53.072558+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 43.05s ago] {'name_1': 'Test Screen 1767014804.3940573', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ddd72ca6-54c2-44b1-9883-ac6c227fd04f"}
{"timestamp": "2025-12-29T13:26:53.075458+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ddd72ca6-54c2-44b1-9883-ac6c227fd04f"}
{"timestamp": "2025-12-29T13:26:53.076009+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 43.05s ago] {'id_1': 31, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ddd72ca6-54c2-44b1-9883-ac6c227fd04f"}
{"timestamp": "2025-12-29T13:26:53.078282+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ddd72ca6-54c2-44b1-9883-ac6c227fd04f"}
{"timestamp": "2025-12-29T13:26:53.078708+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 43.05s ago] {'name': 'Test Screen 1767014804.3940573', 'capacity': 150, 'seat_layout_id': 31}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ddd72ca6-54c2-44b1-9883-ac6c227fd04f"}
{"timestamp": "2025-12-29T13:26:53.080945+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "ddd72ca6-54c2-44b1-9883-ac6c227fd04f"}
{"timestamp": "2025-12-29T13:26:53.085682+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ddd72ca6-54c2-44b1-9883-ac6c227fd04f"}
{"timestamp": "2025-12-29T13:26:53.086670+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ddd72ca6-54c2-44b1-9883-ac6c227fd04f"}
{"timestamp": "2025-12-29T13:26:53.087306+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 43.04s ago] {'pk_1': 31}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ddd72ca6-54c2-44b1-9883-ac6c227fd04f"}
{"timestamp": "2025-12-29T13:26:53.090027+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 31}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "ddd72ca6-54c2-44b1-9883-ac6c227fd04f"}
{"timestamp": "2025-12-29T13:26:53.091350+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "ddd72ca6-54c2-44b1-9883-ac6c227fd04f"}
{"timestamp": "2025-12-29T13:26:53.091687+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "ddd72ca6-54c2-44b1-9883-ac6c227fd04f"}
{"timestamp": "2025-12-29T13:26:53.093498+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.025s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "ddd72ca6-54c2-44b1-9883-ac6c227fd04f"}
{"timestamp": "2025-12-29T13:26:53.094638+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ddd72ca6-54c2-44b1-9883-ac6c227fd04f"}
{"timestamp": "2025-12-29T13:26:55.130851+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "23e183e5-7c25-49ba-abf6-9b742efc58df"}
{"timestamp": "2025-12-29T13:26:55.132543+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 422 (0.002s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "23e183e5-7c25-49ba-abf6-9b742efc58df"}
{"timestamp": "2025-12-29T13:28:56.057399+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-29T13:28:58.280734+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-29T13:28:58.281036+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-29T13:28:58.281200+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.281370+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.281525+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.281756+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.282001+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.282168+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.282312+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.282453+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.282667+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.282867+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.283010+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.283157+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.283301+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.283441+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.283580+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.283727+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.283867+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.284017+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.284164+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.284313+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.284460+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.284762+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.285134+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.285420+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.285640+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.285890+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.286112+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.286336+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.286617+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.286856+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.287010+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.287179+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.287375+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.287546+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.287669+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.287781+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.287888+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.287993+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.288109+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.288339+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.288563+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.288812+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.289056+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.289213+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.289324+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.289432+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.289595+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.289964+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.290121+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.290259+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.290381+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.290514+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.290753+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.290955+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.291136+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.291429+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.291641+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.291818+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.291956+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/showtimes/{showtime_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.292069+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.292185+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.292290+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-29T13:28:58.292393+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-29T13:29:16.145955+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.193142+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.193597+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.195682+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.195897+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.197453+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.197662+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.199620+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.202786+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.203136+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00067s] {'email_1': 'test_admin_1767014954.0904438@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.428123+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.428683+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'email': 'test_admin_1767014954.0904438@example.com', 'hashed_password': '$2b$12$nfSsSYkPodDKfrzTkr1nre/r9RyUpc4h1etUGaDc4l9prqy6nHnz6', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.430808+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.435970+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.437325+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.437808+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'pk_1': 46}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.440108+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 46, 'email': 'test_admin_1767014954.0904438@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.441344+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.475474+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.477072+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.477482+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00063s] {'user_id_1': 46, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.481660+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.482045+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00062s] {'user_id': 46, 'name': None, 'email': 'test_admin_1767014954.0904438@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.485165+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.489424+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.490513+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.491006+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'pk_1': 46}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.493257+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 46, 'user_id': 46, 'email': 'test_admin_1767014954.0904438@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.493428+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.493593+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.493898+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.494965+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.496328+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.496616+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2942s ago] {'email_1': 'test_admin_1767014954.0904438@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.711412+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 46, 'email': 'test_admin_1767014954.0904438@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.712607+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.712847+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.714123+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.568s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.715304+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:18.759285+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "efc5e5e5-a707-48b7-8fd2-4de8e430dbd6"}
{"timestamp": "2025-12-29T13:29:18.763007+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "efc5e5e5-a707-48b7-8fd2-4de8e430dbd6"}
{"timestamp": "2025-12-29T13:29:18.765274+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "efc5e5e5-a707-48b7-8fd2-4de8e430dbd6"}
{"timestamp": "2025-12-29T13:29:18.765911+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00065s] {'title_1': 'Test Movie 1767014954.0904438'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "efc5e5e5-a707-48b7-8fd2-4de8e430dbd6"}
{"timestamp": "2025-12-29T13:29:18.769860+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "efc5e5e5-a707-48b7-8fd2-4de8e430dbd6"}
{"timestamp": "2025-12-29T13:29:18.770300+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'title': 'Test Movie 1767014954.0904438', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "efc5e5e5-a707-48b7-8fd2-4de8e430dbd6"}
{"timestamp": "2025-12-29T13:29:18.772707+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "efc5e5e5-a707-48b7-8fd2-4de8e430dbd6"}
{"timestamp": "2025-12-29T13:29:18.778151+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "efc5e5e5-a707-48b7-8fd2-4de8e430dbd6"}
{"timestamp": "2025-12-29T13:29:18.779224+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "efc5e5e5-a707-48b7-8fd2-4de8e430dbd6"}
{"timestamp": "2025-12-29T13:29:18.779571+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'pk_1': 33}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "efc5e5e5-a707-48b7-8fd2-4de8e430dbd6"}
{"timestamp": "2025-12-29T13:29:18.782298+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 33}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "efc5e5e5-a707-48b7-8fd2-4de8e430dbd6"}
{"timestamp": "2025-12-29T13:29:18.783906+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "efc5e5e5-a707-48b7-8fd2-4de8e430dbd6"}
{"timestamp": "2025-12-29T13:29:18.784181+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "efc5e5e5-a707-48b7-8fd2-4de8e430dbd6"}
{"timestamp": "2025-12-29T13:29:18.786548+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.027s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "efc5e5e5-a707-48b7-8fd2-4de8e430dbd6"}
{"timestamp": "2025-12-29T13:29:18.788018+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "efc5e5e5-a707-48b7-8fd2-4de8e430dbd6"}
{"timestamp": "2025-12-29T13:29:20.838940+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b09f62d2-a3df-44eb-81a5-f3e1ec2fdc90"}
{"timestamp": "2025-12-29T13:29:20.842654+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b09f62d2-a3df-44eb-81a5-f3e1ec2fdc90"}
{"timestamp": "2025-12-29T13:29:20.844079+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b09f62d2-a3df-44eb-81a5-f3e1ec2fdc90"}
{"timestamp": "2025-12-29T13:29:20.845111+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00062s] {'name_1': 'Test Layout 1767014954.0904438'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b09f62d2-a3df-44eb-81a5-f3e1ec2fdc90"}
{"timestamp": "2025-12-29T13:29:20.848769+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b09f62d2-a3df-44eb-81a5-f3e1ec2fdc90"}
{"timestamp": "2025-12-29T13:29:20.849232+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'name': 'Test Layout 1767014954.0904438', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b09f62d2-a3df-44eb-81a5-f3e1ec2fdc90"}
{"timestamp": "2025-12-29T13:29:20.851354+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b09f62d2-a3df-44eb-81a5-f3e1ec2fdc90"}
{"timestamp": "2025-12-29T13:29:20.855823+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b09f62d2-a3df-44eb-81a5-f3e1ec2fdc90"}
{"timestamp": "2025-12-29T13:29:20.856759+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b09f62d2-a3df-44eb-81a5-f3e1ec2fdc90"}
{"timestamp": "2025-12-29T13:29:20.857131+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'pk_1': 32}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b09f62d2-a3df-44eb-81a5-f3e1ec2fdc90"}
{"timestamp": "2025-12-29T13:29:20.859606+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 32}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "b09f62d2-a3df-44eb-81a5-f3e1ec2fdc90"}
{"timestamp": "2025-12-29T13:29:20.860621+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b09f62d2-a3df-44eb-81a5-f3e1ec2fdc90"}
{"timestamp": "2025-12-29T13:29:20.860758+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "b09f62d2-a3df-44eb-81a5-f3e1ec2fdc90"}
{"timestamp": "2025-12-29T13:29:20.862037+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.023s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b09f62d2-a3df-44eb-81a5-f3e1ec2fdc90"}
{"timestamp": "2025-12-29T13:29:20.863089+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b09f62d2-a3df-44eb-81a5-f3e1ec2fdc90"}
{"timestamp": "2025-12-29T13:29:22.919860+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "7c12e44a-4165-49c4-9fc2-67b410474687"}
{"timestamp": "2025-12-29T13:29:22.923039+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7c12e44a-4165-49c4-9fc2-67b410474687"}
{"timestamp": "2025-12-29T13:29:22.924364+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7c12e44a-4165-49c4-9fc2-67b410474687"}
{"timestamp": "2025-12-29T13:29:22.924957+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'name_1': 'Test Screen 1767014954.0904438', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7c12e44a-4165-49c4-9fc2-67b410474687"}
{"timestamp": "2025-12-29T13:29:22.928303+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7c12e44a-4165-49c4-9fc2-67b410474687"}
{"timestamp": "2025-12-29T13:29:22.928819+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'id_1': 32, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7c12e44a-4165-49c4-9fc2-67b410474687"}
{"timestamp": "2025-12-29T13:29:22.935925+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7c12e44a-4165-49c4-9fc2-67b410474687"}
{"timestamp": "2025-12-29T13:29:22.936418+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'name': 'Test Screen 1767014954.0904438', 'capacity': 150, 'seat_layout_id': 32}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7c12e44a-4165-49c4-9fc2-67b410474687"}
{"timestamp": "2025-12-29T13:29:22.938548+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "7c12e44a-4165-49c4-9fc2-67b410474687"}
{"timestamp": "2025-12-29T13:29:22.944241+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7c12e44a-4165-49c4-9fc2-67b410474687"}
{"timestamp": "2025-12-29T13:29:22.945644+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7c12e44a-4165-49c4-9fc2-67b410474687"}
{"timestamp": "2025-12-29T13:29:22.946117+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00066s] {'pk_1': 32}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7c12e44a-4165-49c4-9fc2-67b410474687"}
{"timestamp": "2025-12-29T13:29:22.948659+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 32}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "7c12e44a-4165-49c4-9fc2-67b410474687"}
{"timestamp": "2025-12-29T13:29:22.949990+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "7c12e44a-4165-49c4-9fc2-67b410474687"}
{"timestamp": "2025-12-29T13:29:22.950382+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "7c12e44a-4165-49c4-9fc2-67b410474687"}
{"timestamp": "2025-12-29T13:29:22.952000+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.032s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "7c12e44a-4165-49c4-9fc2-67b410474687"}
{"timestamp": "2025-12-29T13:29:22.953218+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "7c12e44a-4165-49c4-9fc2-67b410474687"}
{"timestamp": "2025-12-29T13:29:24.999710+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:25.002898+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:25.004053+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:25.004568+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'pk_1': 33}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:25.007889+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:25.008277+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'pk_1': 32}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:25.011213+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:25.011723+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'screen_id_1': 32, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:25.016267+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:25.016910+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 33, 'screen_id': 32}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:25.019951+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:25.025039+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:25.026722+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:25.027182+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00074s] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:25.031121+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:25.031761+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00073s] {'pk_1': 33}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:25.034754+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:25.035133+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'pk_1': 32}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:25.037149+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 24}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:25.038871+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:25.039245+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:25.042319+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.043s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:25.043795+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:27.098736+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.101904+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.102729+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.103179+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.9s ago] {'email_1': 'test_booking_1767014965.0434582@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.313779+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.314224+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.89s ago] {'email': 'test_booking_1767014965.0434582@example.com', 'hashed_password': '$2b$12$iFNi9AqlNkDVIittacrfhOdBkbTn/YePdwqmFrA7PmChHlII75Ug2', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.316024+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.321407+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.322659+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.323272+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.89s ago] {'pk_1': 47}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.326634+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 47, 'email': 'test_booking_1767014965.0434582@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.328484+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.331453+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.332376+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.333126+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.86s ago] {'user_id_1': 47, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.335563+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.335903+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.85s ago] {'user_id': 47, 'name': None, 'email': 'test_booking_1767014965.0434582@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.337780+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.342592+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.343238+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.343833+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.85s ago] {'pk_1': 47}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.346146+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 47, 'user_id': 47, 'email': 'test_booking_1767014965.0434582@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.346483+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.346756+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.347059+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.348209+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.349741+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.350157+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 11.15s ago] {'email_1': 'test_booking_1767014965.0434582@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.557412+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 47, 'email': 'test_booking_1767014965.0434582@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.558677+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.558905+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.559942+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.461s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.561048+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:29.591891+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.596892+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.598225+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.598602+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00069s] {'pk_1': 47}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.602859+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.603520+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'user_id': 47, 'showtime_id': 24, 'seat_code': 'R5-5', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 13, 29, 29, 602348, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 39, 29, 601408, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.606356+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.610547+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.611741+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.612016+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.614360+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 23, 'user_id': 47, 'showtime_id': 24, 'seat_code': 'R5-5'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.615372+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.617366+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.618778+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.619115+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'showtime_id_1': 24, 'seat_code_1': 'R5-5', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.622753+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.623075+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'seat_code': 'R5-5', 'showtime_id': 24, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.626400+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.626684+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00042s] {'status': 'LOCKED', 'locked_by_user_id': 47, 'lock_expires_at': datetime.datetime(2025, 12, 29, 13, 39, 29, 625255, tzinfo=datetime.timezone.utc), 'seat_locks_id': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.628702+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.632663+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.633450+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.633657+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00034s] {'pk_1': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.635441+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 24, 'seat_code': 'R5-5', 'user_id': 47, 'expires_at': '2025-12-29T13:39:29.625255+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.635592+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.635709+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.635934+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.636839+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.637365+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 23, 'user_id': 47, 'showtime_id': 24, 'seat_code': 'R5-5'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.637796+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 23", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.639417+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.640623+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.640869+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'user_id': 47, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.643544+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.647745+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.648733+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.648951+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00036s] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.651261+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 23, 'reservation_id': 23, 'user_id': 47, 'showtime_id': 24, 'seat_code': 'R5-5'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.651559+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.651939+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 23", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.679489+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.681102+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.681462+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.686032+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 23, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.686354+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.687206+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 23, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.711459+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.712628+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.712946+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.716799+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.717150+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.719743+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.724270+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.725014+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.725363+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.07665s ago] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.727477+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 23 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.727927+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.729075+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.729292+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 23: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.729737+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.730933+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.731184+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 23", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.731440+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.732683+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.734520+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.735801+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.736147+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'actor_id': 47, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 23, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 23, \"user_id\": 47, \"showtime_id\": 24, \"seat_code\": \"R5-5\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 29, 29, 735391, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.738710+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.742812+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.744134+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.744512+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00062s] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.746709+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.747573+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.749258+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.157s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.750273+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:31.793291+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "28305859-bc9d-4e8b-9480-fb1561bf5195"}
{"timestamp": "2025-12-29T13:29:31.795908+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "28305859-bc9d-4e8b-9480-fb1561bf5195"}
{"timestamp": "2025-12-29T13:29:31.796570+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "28305859-bc9d-4e8b-9480-fb1561bf5195"}
{"timestamp": "2025-12-29T13:29:31.796927+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 2.199s ago] {'pk_1': 47}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "28305859-bc9d-4e8b-9480-fb1561bf5195"}
{"timestamp": "2025-12-29T13:29:31.800159+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "28305859-bc9d-4e8b-9480-fb1561bf5195"}
{"timestamp": "2025-12-29T13:29:31.800613+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'user_id_1': 47}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "28305859-bc9d-4e8b-9480-fb1561bf5195"}
{"timestamp": "2025-12-29T13:29:31.805236+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.012s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "28305859-bc9d-4e8b-9480-fb1561bf5195"}
{"timestamp": "2025-12-29T13:29:31.806267+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "28305859-bc9d-4e8b-9480-fb1561bf5195"}
{"timestamp": "2025-12-29T13:29:33.855428+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/order/23/initiate", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "e98d7925-6c46-4473-a3e6-cf09aae4463a"}
{"timestamp": "2025-12-29T13:29:33.857960+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e98d7925-6c46-4473-a3e6-cf09aae4463a"}
{"timestamp": "2025-12-29T13:29:33.858800+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e98d7925-6c46-4473-a3e6-cf09aae4463a"}
{"timestamp": "2025-12-29T13:29:33.859309+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.261s ago] {'pk_1': 47}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e98d7925-6c46-4473-a3e6-cf09aae4463a"}
{"timestamp": "2025-12-29T13:29:33.862692+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e98d7925-6c46-4473-a3e6-cf09aae4463a"}
{"timestamp": "2025-12-29T13:29:33.863104+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.151s ago] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e98d7925-6c46-4473-a3e6-cf09aae4463a"}
{"timestamp": "2025-12-29T13:29:33.866072+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO payment_attempts (order_id, amount_attempted, status, final_amount, failure_reason, provider_payment_id, created_at) VALUES (%(order_id)s, %(amount_attempted)s, %(status)s, %(final_amount)s, %(failure_reason)s, %(provider_payment_id)s, %(created_at)s) RETURNING payment_attempts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e98d7925-6c46-4473-a3e6-cf09aae4463a"}
{"timestamp": "2025-12-29T13:29:33.866653+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'order_id': 23, 'amount_attempted': 1000, 'status': 'PENDING', 'final_amount': 1000, 'failure_reason': None, 'provider_payment_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 29, 33, 865590, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e98d7925-6c46-4473-a3e6-cf09aae4463a"}
{"timestamp": "2025-12-29T13:29:33.869696+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "e98d7925-6c46-4473-a3e6-cf09aae4463a"}
{"timestamp": "2025-12-29T13:29:33.874810+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e98d7925-6c46-4473-a3e6-cf09aae4463a"}
{"timestamp": "2025-12-29T13:29:33.876237+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e98d7925-6c46-4473-a3e6-cf09aae4463a"}
{"timestamp": "2025-12-29T13:29:33.876642+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'pk_1': 16}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e98d7925-6c46-4473-a3e6-cf09aae4463a"}
{"timestamp": "2025-12-29T13:29:33.879637+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e98d7925-6c46-4473-a3e6-cf09aae4463a"}
{"timestamp": "2025-12-29T13:29:33.879948+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e98d7925-6c46-4473-a3e6-cf09aae4463a"}
{"timestamp": "2025-12-29T13:29:33.881895+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.pending with payload: {'payment_attempt_id': 16, 'order_id': 23, 'amount_attempted': 1000, 'final_amount': 1000, 'user_id': 47}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "e98d7925-6c46-4473-a3e6-cf09aae4463a"}
{"timestamp": "2025-12-29T13:29:33.882884+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.pending to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "e98d7925-6c46-4473-a3e6-cf09aae4463a"}
{"timestamp": "2025-12-29T13:29:33.883050+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: payment.pending", "module": "event_bus", "function": "publish", "line": 31, "request_id": "e98d7925-6c46-4473-a3e6-cf09aae4463a"}
{"timestamp": "2025-12-29T13:29:33.884182+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/order/23/initiate \u2192 200 (0.029s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "e98d7925-6c46-4473-a3e6-cf09aae4463a"}
{"timestamp": "2025-12-29T13:29:33.885081+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "e98d7925-6c46-4473-a3e6-cf09aae4463a"}
{"timestamp": "2025-12-29T13:29:35.931823+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/16/confirm", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.934353+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.935419+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.935785+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.338s ago] {'pk_1': 47}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.939085+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id AS payment_attempts_id, payment_attempts.order_id AS payment_attempts_order_id, payment_attempts.amount_attempted AS payment_attempts_amount_attempted, payment_attempts.status AS payment_attempts_status, payment_attempts.final_amount AS payment_attempts_final_amount, payment_attempts.failure_reason AS payment_attempts_failure_reason, payment_attempts.provider_payment_id AS payment_attempts_provider_payment_id, payment_attempts.created_at AS payment_attempts_created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.939481+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'pk_1': 16}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.942498+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.942785+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.945419+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE payment_attempts SET status=%(status)s, provider_payment_id=%(provider_payment_id)s WHERE payment_attempts.id = %(payment_attempts_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.945753+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'status': 'SUCCEEDED', 'provider_payment_id': 'mock_payment_16', 'payment_attempts_id': 16}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.947792+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.951824+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.952506+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.952962+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 2.077s ago] {'pk_1': 16}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.955455+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.955729+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 2.076s ago] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.956872+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.succeeded with payload: {'payment_attempt_id': 16, 'order_id': 23, 'final_amount': 1000.0, 'user_id': 47}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.958059+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.succeeded to 4 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.958544+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.960203+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.960669+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.960878+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.249s ago] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.963394+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET is_completed=%(is_completed)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.963728+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00038s] {'is_completed': True, 'orders_id': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.965391+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.968922+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.969536+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.969932+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.321s ago] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.972141+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.completed with payload: {'order_id': 23}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.972297+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.completed to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.972419+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: order.completed", "module": "event_bus", "function": "publish", "line": 31, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.972634+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.973671+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.975600+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.976081+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.976294+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 19.5s ago] {'user_id_1': 47, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.979315+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.980491+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.982211+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.982639+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.982921+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.247s ago] {'actor_id': 47, 'actor_type': 'user', 'action': 'payment.succeeded', 'target_id': 23, 'target_type': 'order', 'payload': '{\"payment_attempt_id\": 16, \"order_id\": 23, \"final_amount\": 1000.0, \"user_id\": 47}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 29, 35, 982400, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.984983+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.988897+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.989409+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.989686+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.246s ago] {'pk_1': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.991565+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.993187+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.994544+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/16/confirm \u2192 200 (0.063s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.995511+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:38.041942+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "d03b1aef-094d-4709-8d09-8c135c004c9f"}
{"timestamp": "2025-12-29T13:29:38.044482+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d03b1aef-094d-4709-8d09-8c135c004c9f"}
{"timestamp": "2025-12-29T13:29:38.045095+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d03b1aef-094d-4709-8d09-8c135c004c9f"}
{"timestamp": "2025-12-29T13:29:38.045441+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 8.448s ago] {'pk_1': 47}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d03b1aef-094d-4709-8d09-8c135c004c9f"}
{"timestamp": "2025-12-29T13:29:38.048146+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d03b1aef-094d-4709-8d09-8c135c004c9f"}
{"timestamp": "2025-12-29T13:29:38.048615+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.249s ago] {'user_id_1': 47}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d03b1aef-094d-4709-8d09-8c135c004c9f"}
{"timestamp": "2025-12-29T13:29:38.050828+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.009s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "d03b1aef-094d-4709-8d09-8c135c004c9f"}
{"timestamp": "2025-12-29T13:29:38.051739+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d03b1aef-094d-4709-8d09-8c135c004c9f"}
{"timestamp": "2025-12-29T13:29:40.093026+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.095806+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.096607+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.097128+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.89s ago] {'email_1': 'test_admin_1767014978.0521476@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.304806+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.305161+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.88s ago] {'email': 'test_admin_1767014978.0521476@example.com', 'hashed_password': '$2b$12$ecd8GrrNDlPMkbnGDdFPNekB67sNDS78Dr6Nm4ARvkS7B1yRQ7hR.', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.307155+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.311985+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.312842+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.313355+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.88s ago] {'pk_1': 48}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.315913+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 48, 'email': 'test_admin_1767014978.0521476@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.317218+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.319682+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.320248+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.320624+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.84s ago] {'user_id_1': 48, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.323018+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.323415+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.84s ago] {'user_id': 48, 'name': None, 'email': 'test_admin_1767014978.0521476@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.325350+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.329484+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.330132+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.330423+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.84s ago] {'pk_1': 48}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.332924+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 48, 'user_id': 48, 'email': 'test_admin_1767014978.0521476@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.333237+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.333567+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.333933+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.335161+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.336467+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.336856+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 24.13s ago] {'email_1': 'test_admin_1767014978.0521476@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.542430+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 48, 'email': 'test_admin_1767014978.0521476@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.543704+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.543919+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.545079+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.452s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.546294+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:42.589456+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "f6aa4315-3640-4f30-b29b-950db07c0fe3"}
{"timestamp": "2025-12-29T13:29:42.591934+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f6aa4315-3640-4f30-b29b-950db07c0fe3"}
{"timestamp": "2025-12-29T13:29:42.592515+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f6aa4315-3640-4f30-b29b-950db07c0fe3"}
{"timestamp": "2025-12-29T13:29:42.592834+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.83s ago] {'title_1': 'Test Movie 1767014978.0521476'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f6aa4315-3640-4f30-b29b-950db07c0fe3"}
{"timestamp": "2025-12-29T13:29:42.595459+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f6aa4315-3640-4f30-b29b-950db07c0fe3"}
{"timestamp": "2025-12-29T13:29:42.596052+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.83s ago] {'title': 'Test Movie 1767014978.0521476', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f6aa4315-3640-4f30-b29b-950db07c0fe3"}
{"timestamp": "2025-12-29T13:29:42.598092+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "f6aa4315-3640-4f30-b29b-950db07c0fe3"}
{"timestamp": "2025-12-29T13:29:42.603396+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f6aa4315-3640-4f30-b29b-950db07c0fe3"}
{"timestamp": "2025-12-29T13:29:42.604427+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f6aa4315-3640-4f30-b29b-950db07c0fe3"}
{"timestamp": "2025-12-29T13:29:42.604865+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.83s ago] {'pk_1': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f6aa4315-3640-4f30-b29b-950db07c0fe3"}
{"timestamp": "2025-12-29T13:29:42.606999+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 34}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "f6aa4315-3640-4f30-b29b-950db07c0fe3"}
{"timestamp": "2025-12-29T13:29:42.608018+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "f6aa4315-3640-4f30-b29b-950db07c0fe3"}
{"timestamp": "2025-12-29T13:29:42.608234+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "f6aa4315-3640-4f30-b29b-950db07c0fe3"}
{"timestamp": "2025-12-29T13:29:42.609283+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.020s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "f6aa4315-3640-4f30-b29b-950db07c0fe3"}
{"timestamp": "2025-12-29T13:29:42.610465+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f6aa4315-3640-4f30-b29b-950db07c0fe3"}
{"timestamp": "2025-12-29T13:29:44.653990+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "6b788084-fff7-4595-9a34-f9a14f2f74ae"}
{"timestamp": "2025-12-29T13:29:44.656662+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6b788084-fff7-4595-9a34-f9a14f2f74ae"}
{"timestamp": "2025-12-29T13:29:44.657291+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6b788084-fff7-4595-9a34-f9a14f2f74ae"}
{"timestamp": "2025-12-29T13:29:44.657662+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.81s ago] {'name_1': 'Test Layout 1767014978.0521476'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6b788084-fff7-4595-9a34-f9a14f2f74ae"}
{"timestamp": "2025-12-29T13:29:44.660362+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6b788084-fff7-4595-9a34-f9a14f2f74ae"}
{"timestamp": "2025-12-29T13:29:44.660691+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.81s ago] {'name': 'Test Layout 1767014978.0521476', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6b788084-fff7-4595-9a34-f9a14f2f74ae"}
{"timestamp": "2025-12-29T13:29:44.662543+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6b788084-fff7-4595-9a34-f9a14f2f74ae"}
{"timestamp": "2025-12-29T13:29:44.668121+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6b788084-fff7-4595-9a34-f9a14f2f74ae"}
{"timestamp": "2025-12-29T13:29:44.668929+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6b788084-fff7-4595-9a34-f9a14f2f74ae"}
{"timestamp": "2025-12-29T13:29:44.669470+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.81s ago] {'pk_1': 33}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6b788084-fff7-4595-9a34-f9a14f2f74ae"}
{"timestamp": "2025-12-29T13:29:44.671958+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 33}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "6b788084-fff7-4595-9a34-f9a14f2f74ae"}
{"timestamp": "2025-12-29T13:29:44.673432+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6b788084-fff7-4595-9a34-f9a14f2f74ae"}
{"timestamp": "2025-12-29T13:29:44.673678+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "6b788084-fff7-4595-9a34-f9a14f2f74ae"}
{"timestamp": "2025-12-29T13:29:44.675243+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.021s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "6b788084-fff7-4595-9a34-f9a14f2f74ae"}
{"timestamp": "2025-12-29T13:29:44.676316+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6b788084-fff7-4595-9a34-f9a14f2f74ae"}
{"timestamp": "2025-12-29T13:29:46.713420+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "3f7fba08-5be7-4b2c-a5cd-be3aa74fc8b6"}
{"timestamp": "2025-12-29T13:29:46.715985+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3f7fba08-5be7-4b2c-a5cd-be3aa74fc8b6"}
{"timestamp": "2025-12-29T13:29:46.716608+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f7fba08-5be7-4b2c-a5cd-be3aa74fc8b6"}
{"timestamp": "2025-12-29T13:29:46.716978+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'name_1': 'Test Screen 1767014978.0521476', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f7fba08-5be7-4b2c-a5cd-be3aa74fc8b6"}
{"timestamp": "2025-12-29T13:29:46.720011+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f7fba08-5be7-4b2c-a5cd-be3aa74fc8b6"}
{"timestamp": "2025-12-29T13:29:46.720510+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'id_1': 33, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f7fba08-5be7-4b2c-a5cd-be3aa74fc8b6"}
{"timestamp": "2025-12-29T13:29:46.723188+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f7fba08-5be7-4b2c-a5cd-be3aa74fc8b6"}
{"timestamp": "2025-12-29T13:29:46.723895+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'name': 'Test Screen 1767014978.0521476', 'capacity': 150, 'seat_layout_id': 33}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f7fba08-5be7-4b2c-a5cd-be3aa74fc8b6"}
{"timestamp": "2025-12-29T13:29:46.726094+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "3f7fba08-5be7-4b2c-a5cd-be3aa74fc8b6"}
{"timestamp": "2025-12-29T13:29:46.730652+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3f7fba08-5be7-4b2c-a5cd-be3aa74fc8b6"}
{"timestamp": "2025-12-29T13:29:46.731452+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f7fba08-5be7-4b2c-a5cd-be3aa74fc8b6"}
{"timestamp": "2025-12-29T13:29:46.731932+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'pk_1': 33}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f7fba08-5be7-4b2c-a5cd-be3aa74fc8b6"}
{"timestamp": "2025-12-29T13:29:46.734038+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 33}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "3f7fba08-5be7-4b2c-a5cd-be3aa74fc8b6"}
{"timestamp": "2025-12-29T13:29:46.734977+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "3f7fba08-5be7-4b2c-a5cd-be3aa74fc8b6"}
{"timestamp": "2025-12-29T13:29:46.735108+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "3f7fba08-5be7-4b2c-a5cd-be3aa74fc8b6"}
{"timestamp": "2025-12-29T13:29:46.736148+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.023s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "3f7fba08-5be7-4b2c-a5cd-be3aa74fc8b6"}
{"timestamp": "2025-12-29T13:29:46.737048+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "3f7fba08-5be7-4b2c-a5cd-be3aa74fc8b6"}
{"timestamp": "2025-12-29T13:29:48.785621+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:48.788261+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:48.788875+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:48.789225+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'pk_1': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:48.792056+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:48.792718+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'pk_1': 33}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:48.794914+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:48.795304+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.78s ago] {'screen_id_1': 33, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:48.797317+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:48.797689+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.78s ago] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 34, 'screen_id': 33}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:48.801373+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:48.805752+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:48.806425+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:48.806840+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.78s ago] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:48.809587+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:48.809849+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.78s ago] {'pk_1': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:48.811775+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:48.812073+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.78s ago] {'pk_1': 33}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:48.813903+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 25}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:48.815016+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:48.815262+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:48.816443+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.031s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:48.817668+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:50.863221+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:50.865801+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:50.866459+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:50.866977+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.66s ago] {'email_1': 'test_cancel_1767014988.8173316@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.070993+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.071521+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.64s ago] {'email': 'test_cancel_1767014988.8173316@example.com', 'hashed_password': '$2b$12$Eud0lOYCS3Ui.C63OGqGc.JAu.ptCOFeCBW0He/WdPHmVg90e4oEa', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.073294+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.077789+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.078466+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.078828+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.64s ago] {'pk_1': 49}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.081059+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 49, 'email': 'test_cancel_1767014988.8173316@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.082147+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.084316+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.084952+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.085377+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.61s ago] {'user_id_1': 49, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.087648+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.087931+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.61s ago] {'user_id': 49, 'name': None, 'email': 'test_cancel_1767014988.8173316@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.089919+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.094216+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.094690+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.094933+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.61s ago] {'pk_1': 49}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.097312+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 49, 'user_id': 49, 'email': 'test_cancel_1767014988.8173316@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.097539+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.097781+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.098145+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.099185+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.100443+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.100796+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.9s ago] {'email_1': 'test_cancel_1767014988.8173316@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.304603+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 49, 'email': 'test_cancel_1767014988.8173316@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.305916+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.306179+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.307348+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.444s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.308341+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:53.347711+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.350309+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.350917+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.351257+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.75s ago] {'pk_1': 49}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.354193+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.354742+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.75s ago] {'user_id': 49, 'showtime_id': 25, 'seat_code': 'R6-6', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 13, 29, 53, 353765, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 39, 53, 353495, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.357086+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.361893+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.362772+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.363144+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.75s ago] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.365222+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 24, 'user_id': 49, 'showtime_id': 25, 'seat_code': 'R6-6'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.366238+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.368460+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.369268+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.369615+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.75s ago] {'showtime_id_1': 25, 'seat_code_1': 'R6-6', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.372302+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.372772+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.75s ago] {'seat_code': 'R6-6', 'showtime_id': 25, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.375467+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.375993+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.75s ago] {'status': 'LOCKED', 'locked_by_user_id': 49, 'lock_expires_at': datetime.datetime(2025, 12, 29, 13, 39, 53, 374628, tzinfo=datetime.timezone.utc), 'seat_locks_id': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.377955+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.383004+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.383856+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.384331+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.75s ago] {'pk_1': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.386318+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 25, 'seat_code': 'R6-6', 'user_id': 49, 'expires_at': '2025-12-29T13:39:53.374628+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.386672+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.386821+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.387062+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.388090+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.389093+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 24, 'user_id': 49, 'showtime_id': 25, 'seat_code': 'R6-6'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.389430+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 24", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.391191+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.391742+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.392025+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.75s ago] {'user_id': 49, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.394692+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.398540+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.399056+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.399324+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.75s ago] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.401233+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 24, 'reservation_id': 24, 'user_id': 49, 'showtime_id': 25, 'seat_code': 'R6-6'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.401409+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.402190+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 24", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.403769+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.404249+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.404484+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.72s ago] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.406474+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 24, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.406626+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.407106+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 24, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.408604+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.409195+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.409569+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.7s ago] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.411801+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.412244+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.7s ago] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.413717+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.417458+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.418059+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.418376+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.77s ago] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.420176+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 24 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.420412+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.421400+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.421549+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 24: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.421844+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.422947+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.423104+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 24", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.423448+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.424836+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.426369+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.426765+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.427036+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.69s ago] {'actor_id': 49, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 24, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 24, \"user_id\": 49, \"showtime_id\": 25, \"seat_code\": \"R6-6\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 29, 53, 426538, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.428957+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.433285+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.433903+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.434385+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.69s ago] {'pk_1': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.436500+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.437545+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.438662+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.091s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.439917+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:55.492151+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "6109b8d1-5f34-4776-adf5-6873811c6ea6"}
{"timestamp": "2025-12-29T13:29:55.494754+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6109b8d1-5f34-4776-adf5-6873811c6ea6"}
{"timestamp": "2025-12-29T13:29:55.495363+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6109b8d1-5f34-4776-adf5-6873811c6ea6"}
{"timestamp": "2025-12-29T13:29:55.495658+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 25.9s ago] {'pk_1': 49}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6109b8d1-5f34-4776-adf5-6873811c6ea6"}
{"timestamp": "2025-12-29T13:29:55.498342+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6109b8d1-5f34-4776-adf5-6873811c6ea6"}
{"timestamp": "2025-12-29T13:29:55.498807+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.7s ago] {'user_id_1': 49}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6109b8d1-5f34-4776-adf5-6873811c6ea6"}
{"timestamp": "2025-12-29T13:29:55.501007+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.009s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "6109b8d1-5f34-4776-adf5-6873811c6ea6"}
{"timestamp": "2025-12-29T13:29:55.501935+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6109b8d1-5f34-4776-adf5-6873811c6ea6"}
{"timestamp": "2025-12-29T13:29:57.549789+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/order/24/initiate", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "783adc66-65da-4ff9-9833-82f25a43a928"}
{"timestamp": "2025-12-29T13:29:57.552209+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "783adc66-65da-4ff9-9833-82f25a43a928"}
{"timestamp": "2025-12-29T13:29:57.552813+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "783adc66-65da-4ff9-9833-82f25a43a928"}
{"timestamp": "2025-12-29T13:29:57.553165+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 27.96s ago] {'pk_1': 49}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "783adc66-65da-4ff9-9833-82f25a43a928"}
{"timestamp": "2025-12-29T13:29:57.556050+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "783adc66-65da-4ff9-9833-82f25a43a928"}
{"timestamp": "2025-12-29T13:29:57.556518+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 27.84s ago] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "783adc66-65da-4ff9-9833-82f25a43a928"}
{"timestamp": "2025-12-29T13:29:57.558586+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO payment_attempts (order_id, amount_attempted, status, final_amount, failure_reason, provider_payment_id, created_at) VALUES (%(order_id)s, %(amount_attempted)s, %(status)s, %(final_amount)s, %(failure_reason)s, %(provider_payment_id)s, %(created_at)s) RETURNING payment_attempts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "783adc66-65da-4ff9-9833-82f25a43a928"}
{"timestamp": "2025-12-29T13:29:57.559008+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.69s ago] {'order_id': 24, 'amount_attempted': 1000, 'status': 'PENDING', 'final_amount': 1000, 'failure_reason': None, 'provider_payment_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 29, 57, 558151, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "783adc66-65da-4ff9-9833-82f25a43a928"}
{"timestamp": "2025-12-29T13:29:57.560703+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "783adc66-65da-4ff9-9833-82f25a43a928"}
{"timestamp": "2025-12-29T13:29:57.565682+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "783adc66-65da-4ff9-9833-82f25a43a928"}
{"timestamp": "2025-12-29T13:29:57.566388+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "783adc66-65da-4ff9-9833-82f25a43a928"}
{"timestamp": "2025-12-29T13:29:57.566774+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.69s ago] {'pk_1': 17}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "783adc66-65da-4ff9-9833-82f25a43a928"}
{"timestamp": "2025-12-29T13:29:57.569348+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "783adc66-65da-4ff9-9833-82f25a43a928"}
{"timestamp": "2025-12-29T13:29:57.569804+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.69s ago] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "783adc66-65da-4ff9-9833-82f25a43a928"}
{"timestamp": "2025-12-29T13:29:57.571385+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.pending with payload: {'payment_attempt_id': 17, 'order_id': 24, 'amount_attempted': 1000, 'final_amount': 1000, 'user_id': 49}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "783adc66-65da-4ff9-9833-82f25a43a928"}
{"timestamp": "2025-12-29T13:29:57.572765+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.pending to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "783adc66-65da-4ff9-9833-82f25a43a928"}
{"timestamp": "2025-12-29T13:29:57.572997+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: payment.pending", "module": "event_bus", "function": "publish", "line": 31, "request_id": "783adc66-65da-4ff9-9833-82f25a43a928"}
{"timestamp": "2025-12-29T13:29:57.574149+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/order/24/initiate \u2192 200 (0.024s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "783adc66-65da-4ff9-9833-82f25a43a928"}
{"timestamp": "2025-12-29T13:29:57.575068+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "783adc66-65da-4ff9-9833-82f25a43a928"}
{"timestamp": "2025-12-29T13:29:59.615035+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/17/confirm", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.618406+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.619187+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.619699+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 30.02s ago] {'pk_1': 49}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.625670+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id AS payment_attempts_id, payment_attempts.order_id AS payment_attempts_order_id, payment_attempts.amount_attempted AS payment_attempts_amount_attempted, payment_attempts.status AS payment_attempts_status, payment_attempts.final_amount AS payment_attempts_final_amount, payment_attempts.failure_reason AS payment_attempts_failure_reason, payment_attempts.provider_payment_id AS payment_attempts_provider_payment_id, payment_attempts.created_at AS payment_attempts_created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.626565+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.69s ago] {'pk_1': 17}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.630324+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.631192+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.69s ago] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.634125+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE payment_attempts SET status=%(status)s, provider_payment_id=%(provider_payment_id)s WHERE payment_attempts.id = %(payment_attempts_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.634993+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.69s ago] {'status': 'SUCCEEDED', 'provider_payment_id': 'mock_payment_17', 'payment_attempts_id': 17}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.637401+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.643824+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.645236+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.645974+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 25.77s ago] {'pk_1': 17}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.649598+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.650330+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 25.77s ago] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.652450+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.succeeded with payload: {'payment_attempt_id': 17, 'order_id': 24, 'final_amount': 1000.0, 'user_id': 49}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.654416+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.succeeded to 4 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.655710+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.658452+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.659349+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.660305+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 29.95s ago] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.664349+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET is_completed=%(is_completed)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.664903+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.7s ago] {'is_completed': True, 'orders_id': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.667135+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.672826+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.673834+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.674499+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 30.03s ago] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.677604+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.completed with payload: {'order_id': 24}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.677902+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.completed to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.678222+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: order.completed", "module": "event_bus", "function": "publish", "line": 31, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.678624+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.679827+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.681981+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.682763+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.684856+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 43.21s ago] {'user_id_1': 49, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.690478+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.692535+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.695017+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.695596+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.696020+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 29.96s ago] {'actor_id': 49, 'actor_type': 'user', 'action': 'payment.succeeded', 'target_id': 24, 'target_type': 'order', 'payload': '{\"payment_attempt_id\": 17, \"order_id\": 24, \"final_amount\": 1000.0, \"user_id\": 49}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 29, 59, 695200, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.698258+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.702354+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.703077+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.703441+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 29.96s ago] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.705542+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.706601+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.707740+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/17/confirm \u2192 200 (0.093s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.708819+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:30:01.757228+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/24/cancel", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.760208+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.760845+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.761179+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.16s ago] {'pk_1': 49}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.764535+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id AS reservations_id, reservations.user_id AS reservations_user_id, reservations.showtime_id AS reservations_showtime_id, reservations.seat_code AS reservations_seat_code, reservations.status AS reservations_status, reservations.created_at AS reservations_created_at, reservations.expires_at AS reservations_expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.764878+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.767173+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE reservations SET status=%(status)s, expires_at=%(expires_at)s WHERE reservations.id = %(reservations_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.767472+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'status': 'CANCELLED', 'expires_at': None, 'reservations_id': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.769048+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.773946+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.774495+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.774761+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.16s ago] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.776867+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.cancelled with payload: {'reservation_id': 24}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.778002+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.cancelled to 4 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.778849+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_cancelled completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.779179+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Order handler received reservation.cancelled: {'reservation_id': 24}", "module": "handlers", "function": "on_reservation_cancelled", "line": 50, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.780677+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.781515+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.reservation_id = %(reservation_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.781963+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00036s] {'reservation_id_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.784051+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.cancelled with payload: {'order_id': 24}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.784212+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.cancelled to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.784336+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: order.cancelled", "module": "event_bus", "function": "publish", "line": 31, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.784556+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.785770+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_cancelled completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.788035+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.788887+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.reservation_id = %(reservation_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.789292+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.007732s ago] {'reservation_id_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.792755+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.order_id = %(order_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.793313+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'order_id_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.796425+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT refunds.id, refunds.reservation_id, refunds.payment_attempt_id, refunds.amount, refunds.reason, refunds.created_at, refunds.status \nFROM refunds \nWHERE refunds.reservation_id = %(reservation_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.796780+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'reservation_id_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.803005+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO refunds (reservation_id, payment_attempt_id, amount, reason, created_at, status) VALUES (%(reservation_id)s, %(payment_attempt_id)s, %(amount)s, %(reason)s, %(created_at)s, %(status)s) RETURNING refunds.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.803409+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'reservation_id': 24, 'payment_attempt_id': 17, 'amount': 1000.0, 'reason': 'reservation_cancelled', 'created_at': datetime.datetime(2025, 12, 29, 13, 30, 1, 802620, tzinfo=datetime.timezone.utc), 'status': 'ISSUED'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.808722+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.812872+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.813905+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT refunds.id, refunds.reservation_id, refunds.payment_attempt_id, refunds.amount, refunds.reason, refunds.created_at, refunds.status \nFROM refunds \nWHERE refunds.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.814278+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'pk_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.816997+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id AS payment_attempts_id, payment_attempts.order_id AS payment_attempts_order_id, payment_attempts.amount_attempted AS payment_attempts_amount_attempted, payment_attempts.status AS payment_attempts_status, payment_attempts.final_amount AS payment_attempts_final_amount, payment_attempts.failure_reason AS payment_attempts_failure_reason, payment_attempts.provider_payment_id AS payment_attempts_provider_payment_id, payment_attempts.created_at AS payment_attempts_created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.817230+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'pk_1': 17}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.818551+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: refund.issued with payload: {'refund_id': 1, 'reservation_id': 24, 'payment_attempt_id': 17, 'amount': 1000.0}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.819062+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.825244+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.event_bus", "message": "\u274c Event handler failed: reservation.cancelled -> on_reservation_cancelled: asyncio.run() cannot be called from a running event loop", "module": "event_bus", "function": "_safe_invoke", "line": 45, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\event_bus.py\", line 42, in _safe_invoke\n    await handler(payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\refund\\handlers.py\", line 34, in on_reservation_cancelled\n    issue_refund_from_event(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        db,\n        ^^^\n    ...<2 lines>...\n        reason=\"reservation_cancelled\"\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\refund\\service.py\", line 58, in issue_refund_from_event\n    publish_event(event[\"type\"], event[\"payload\"])\n    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\shared\\services\\event_publisher.py\", line 17, in publish_event\n    asyncio.run(event_bus.publish(event_type, payload))\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 191, in run\n    raise RuntimeError(\n        \"asyncio.run() cannot be called from a running event loop\")\nRuntimeError: asyncio.run() cannot be called from a running event loop"}
{"timestamp": "2025-12-29T13:30:01.831516+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.832011+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.832374+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.1s ago] {'actor_id': None, 'actor_type': 'user', 'action': 'reservation.cancelled', 'target_id': 24, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 24}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 30, 1, 831705, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.834853+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.854789+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.event_bus", "message": "\u274c Event handler failed: reservation.cancelled -> on_reservation_cancelled: (psycopg2.errors.NotNullViolation) null value in column \"actor_id\" of relation \"audit_logs\" violates not-null constraint\nDETAIL:  Failing row contains (30, null, user, reservation.cancelled, 24, reservation, {\"reservation_id\": 24}, null, 2025-12-29 13:30:01.831705+00).\n\n[SQL: INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id]\n[parameters: {'actor_id': None, 'actor_type': 'user', 'action': 'reservation.cancelled', 'target_id': 24, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 24}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 30, 1, 831705, tzinfo=datetime.timezone.utc)}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)", "module": "event_bus", "function": "_safe_invoke", "line": 45, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\npsycopg2.errors.NotNullViolation: null value in column \"actor_id\" of relation \"audit_logs\" violates not-null constraint\nDETAIL:  Failing row contains (30, null, user, reservation.cancelled, 24, reservation, {\"reservation_id\": 24}, null, 2025-12-29 13:30:01.831705+00).\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\event_bus.py\", line 42, in _safe_invoke\n    await handler(payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\audit\\handlers.py\", line 28, in on_reservation_cancelled\n    write_audit_log(\n    ~~~~~~~~~~~~~~~^\n        db=db,\n        ^^^^^^\n    ...<5 lines>...\n        payload=payload,\n        ^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\audit\\service.py\", line 31, in write_audit_log\n    return repo.create(db, entry)\n           ~~~~~~~~~~~^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\audit\\repository.py\", line 17, in create\n    db.commit()\n    ~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2030, in commit\n    trans.commit(_to_root=True)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^\n  File \"<string>\", line 2, in commit\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\state_changes.py\", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 1311, in commit\n    self._prepare_impl()\n    ~~~~~~~~~~~~~~~~~~^^\n  File \"<string>\", line 2, in _prepare_impl\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\state_changes.py\", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 1286, in _prepare_impl\n    self.session.flush()\n    ~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 4331, in flush\n    self._flush(objects)\n    ~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 4466, in _flush\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 4427, in _flush\n    flush_context.execute()\n    ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py\", line 466, in execute\n    rec.execute(self)\n    ~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py\", line 642, in execute\n    util.preloaded.orm_persistence.save_obj(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self.mapper,\n        ^^^^^^^^^^^^\n        uow.states_for_mapper_hierarchy(self.mapper, False, False),\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        uow,\n        ^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\persistence.py\", line 93, in save_obj\n    _emit_insert_statements(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        base_mapper,\n        ^^^^^^^^^^^^\n    ...<3 lines>...\n        insert,\n        ^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\persistence.py\", line 1233, in _emit_insert_statements\n    result = connection.execute(\n        statement,\n        params,\n        execution_options=execution_options,\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\nsqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column \"actor_id\" of relation \"audit_logs\" violates not-null constraint\nDETAIL:  Failing row contains (30, null, user, reservation.cancelled, 24, reservation, {\"reservation_id\": 24}, null, 2025-12-29 13:30:01.831705+00).\n\n[SQL: INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id]\n[parameters: {'actor_id': None, 'actor_type': 'user', 'action': 'reservation.cancelled', 'target_id': 24, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 24}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 30, 1, 831705, tzinfo=datetime.timezone.utc)}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)"}
{"timestamp": "2025-12-29T13:30:01.863433+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/24/cancel \u2192 200 (0.106s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.864469+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:03.918001+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:03.920634+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:03.921315+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:03.921692+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.72s ago] {'email_1': 'test_admin_1767015001.8649912@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.125442+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.125800+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.7s ago] {'email': 'test_admin_1767015001.8649912@example.com', 'hashed_password': '$2b$12$5GmuJQ6pnsrsKJFFsIbKR.V1xIYGr/A829CIKQKAN.qJfnIZLcBiq', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.127538+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.131502+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.132410+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.132902+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.7s ago] {'pk_1': 50}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.134906+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 50, 'email': 'test_admin_1767015001.8649912@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.135922+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.138062+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.138654+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.138986+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.66s ago] {'user_id_1': 50, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.141747+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.142078+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.66s ago] {'user_id': 50, 'name': None, 'email': 'test_admin_1767015001.8649912@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.143665+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.147857+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.148316+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.148530+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.66s ago] {'pk_1': 50}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.150786+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 50, 'user_id': 50, 'email': 'test_admin_1767015001.8649912@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.150947+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.151168+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.151534+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.152873+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.154124+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.154355+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.95s ago] {'email_1': 'test_admin_1767015001.8649912@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.357912+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 50, 'email': 'test_admin_1767015001.8649912@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.358986+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.359174+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.360253+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.442s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.361197+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:06.402828+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "d8aa0942-6eb7-4f0b-b042-e30195ac88a0"}
{"timestamp": "2025-12-29T13:30:06.405696+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d8aa0942-6eb7-4f0b-b042-e30195ac88a0"}
{"timestamp": "2025-12-29T13:30:06.406312+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8aa0942-6eb7-4f0b-b042-e30195ac88a0"}
{"timestamp": "2025-12-29T13:30:06.406671+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.64s ago] {'title_1': 'Test Movie 1767015001.8649912'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8aa0942-6eb7-4f0b-b042-e30195ac88a0"}
{"timestamp": "2025-12-29T13:30:06.409263+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8aa0942-6eb7-4f0b-b042-e30195ac88a0"}
{"timestamp": "2025-12-29T13:30:06.409771+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.64s ago] {'title': 'Test Movie 1767015001.8649912', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8aa0942-6eb7-4f0b-b042-e30195ac88a0"}
{"timestamp": "2025-12-29T13:30:06.411828+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "d8aa0942-6eb7-4f0b-b042-e30195ac88a0"}
{"timestamp": "2025-12-29T13:30:06.417052+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d8aa0942-6eb7-4f0b-b042-e30195ac88a0"}
{"timestamp": "2025-12-29T13:30:06.417951+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8aa0942-6eb7-4f0b-b042-e30195ac88a0"}
{"timestamp": "2025-12-29T13:30:06.418247+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.64s ago] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8aa0942-6eb7-4f0b-b042-e30195ac88a0"}
{"timestamp": "2025-12-29T13:30:06.420305+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 35}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "d8aa0942-6eb7-4f0b-b042-e30195ac88a0"}
{"timestamp": "2025-12-29T13:30:06.421290+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "d8aa0942-6eb7-4f0b-b042-e30195ac88a0"}
{"timestamp": "2025-12-29T13:30:06.421465+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "d8aa0942-6eb7-4f0b-b042-e30195ac88a0"}
{"timestamp": "2025-12-29T13:30:06.422725+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.020s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "d8aa0942-6eb7-4f0b-b042-e30195ac88a0"}
{"timestamp": "2025-12-29T13:30:06.423678+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d8aa0942-6eb7-4f0b-b042-e30195ac88a0"}
{"timestamp": "2025-12-29T13:30:08.464855+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "8d472196-2272-4cc5-9519-e73671cf1c19"}
{"timestamp": "2025-12-29T13:30:08.467554+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8d472196-2272-4cc5-9519-e73671cf1c19"}
{"timestamp": "2025-12-29T13:30:08.468091+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8d472196-2272-4cc5-9519-e73671cf1c19"}
{"timestamp": "2025-12-29T13:30:08.468437+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.63s ago] {'name_1': 'Test Layout 1767015001.8649912'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8d472196-2272-4cc5-9519-e73671cf1c19"}
{"timestamp": "2025-12-29T13:30:08.471024+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8d472196-2272-4cc5-9519-e73671cf1c19"}
{"timestamp": "2025-12-29T13:30:08.471492+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.62s ago] {'name': 'Test Layout 1767015001.8649912', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8d472196-2272-4cc5-9519-e73671cf1c19"}
{"timestamp": "2025-12-29T13:30:08.473537+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "8d472196-2272-4cc5-9519-e73671cf1c19"}
{"timestamp": "2025-12-29T13:30:08.478438+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8d472196-2272-4cc5-9519-e73671cf1c19"}
{"timestamp": "2025-12-29T13:30:08.479028+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8d472196-2272-4cc5-9519-e73671cf1c19"}
{"timestamp": "2025-12-29T13:30:08.479449+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.62s ago] {'pk_1': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8d472196-2272-4cc5-9519-e73671cf1c19"}
{"timestamp": "2025-12-29T13:30:08.482100+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 34}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "8d472196-2272-4cc5-9519-e73671cf1c19"}
{"timestamp": "2025-12-29T13:30:08.483391+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "8d472196-2272-4cc5-9519-e73671cf1c19"}
{"timestamp": "2025-12-29T13:30:08.483718+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "8d472196-2272-4cc5-9519-e73671cf1c19"}
{"timestamp": "2025-12-29T13:30:08.485113+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.020s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "8d472196-2272-4cc5-9519-e73671cf1c19"}
{"timestamp": "2025-12-29T13:30:08.486126+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "8d472196-2272-4cc5-9519-e73671cf1c19"}
{"timestamp": "2025-12-29T13:30:10.526045+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "77daceda-c85b-4810-b72a-509e7291f94e"}
{"timestamp": "2025-12-29T13:30:10.528943+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "77daceda-c85b-4810-b72a-509e7291f94e"}
{"timestamp": "2025-12-29T13:30:10.529625+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "77daceda-c85b-4810-b72a-509e7291f94e"}
{"timestamp": "2025-12-29T13:30:10.529954+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.61s ago] {'name_1': 'Test Screen 1767015001.8649912', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "77daceda-c85b-4810-b72a-509e7291f94e"}
{"timestamp": "2025-12-29T13:30:10.532307+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "77daceda-c85b-4810-b72a-509e7291f94e"}
{"timestamp": "2025-12-29T13:30:10.532539+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.61s ago] {'id_1': 34, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "77daceda-c85b-4810-b72a-509e7291f94e"}
{"timestamp": "2025-12-29T13:30:10.534474+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "77daceda-c85b-4810-b72a-509e7291f94e"}
{"timestamp": "2025-12-29T13:30:10.534771+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.6s ago] {'name': 'Test Screen 1767015001.8649912', 'capacity': 150, 'seat_layout_id': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "77daceda-c85b-4810-b72a-509e7291f94e"}
{"timestamp": "2025-12-29T13:30:10.536650+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "77daceda-c85b-4810-b72a-509e7291f94e"}
{"timestamp": "2025-12-29T13:30:10.540875+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "77daceda-c85b-4810-b72a-509e7291f94e"}
{"timestamp": "2025-12-29T13:30:10.541676+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "77daceda-c85b-4810-b72a-509e7291f94e"}
{"timestamp": "2025-12-29T13:30:10.542198+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.6s ago] {'pk_1': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "77daceda-c85b-4810-b72a-509e7291f94e"}
{"timestamp": "2025-12-29T13:30:10.544396+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 34}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "77daceda-c85b-4810-b72a-509e7291f94e"}
{"timestamp": "2025-12-29T13:30:10.545328+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "77daceda-c85b-4810-b72a-509e7291f94e"}
{"timestamp": "2025-12-29T13:30:10.545472+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "77daceda-c85b-4810-b72a-509e7291f94e"}
{"timestamp": "2025-12-29T13:30:10.546684+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.021s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "77daceda-c85b-4810-b72a-509e7291f94e"}
{"timestamp": "2025-12-29T13:30:10.547789+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "77daceda-c85b-4810-b72a-509e7291f94e"}
{"timestamp": "2025-12-29T13:30:12.589083+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:12.591985+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:12.592713+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:12.593087+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.59s ago] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:12.595831+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:12.596332+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.59s ago] {'pk_1': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:12.598783+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:12.599432+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.59s ago] {'screen_id_1': 34, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:12.601621+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:12.602032+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.59s ago] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 35, 'screen_id': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:12.604264+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:12.608529+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:12.609254+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:12.609597+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.58s ago] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:12.612119+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:12.612558+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.58s ago] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:12.614371+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:12.614855+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.58s ago] {'pk_1': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:12.616442+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 26}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:12.617506+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:12.617642+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:12.618837+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.030s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:12.620186+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:14.667902+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.670469+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.671159+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.671615+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.47s ago] {'email_1': 'test_failpay_1767015012.6198866@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.883739+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.884467+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.46s ago] {'email': 'test_failpay_1767015012.6198866@example.com', 'hashed_password': '$2b$12$en4pS7.uQNpkwp7wxOtaXeZMia8yLV7EwUqKzvzYcA0VGgxUBddJm', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.886676+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.891513+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.892667+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.893274+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.46s ago] {'pk_1': 51}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.895989+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 51, 'email': 'test_failpay_1767015012.6198866@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.897596+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.900008+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.900670+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.901049+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.43s ago] {'user_id_1': 51, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.903357+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.903891+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.42s ago] {'user_id': 51, 'name': None, 'email': 'test_failpay_1767015012.6198866@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.906211+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.910379+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.911333+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.911813+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.42s ago] {'pk_1': 51}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.914008+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 51, 'user_id': 51, 'email': 'test_failpay_1767015012.6198866@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.914255+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.914438+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.914837+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.916171+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.917907+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.918439+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.72s ago] {'email_1': 'test_failpay_1767015012.6198866@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:15.121709+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 51, 'email': 'test_failpay_1767015012.6198866@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:15.123243+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:15.123589+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:15.124896+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.457s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:15.125872+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:17.164510+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.167473+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.168216+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.168548+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.57s ago] {'pk_1': 51}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.171515+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.172074+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.57s ago] {'user_id': 51, 'showtime_id': 26, 'seat_code': 'R7-7', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 13, 30, 17, 171071, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 40, 17, 170793, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.174261+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.178790+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.179662+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.180063+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.57s ago] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.182272+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 25, 'user_id': 51, 'showtime_id': 26, 'seat_code': 'R7-7'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.183592+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.185973+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.186693+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.187032+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.57s ago] {'showtime_id_1': 26, 'seat_code_1': 'R7-7', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.189801+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.190342+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.57s ago] {'seat_code': 'R7-7', 'showtime_id': 26, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.192542+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.192853+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.57s ago] {'status': 'LOCKED', 'locked_by_user_id': 51, 'lock_expires_at': datetime.datetime(2025, 12, 29, 13, 40, 17, 191937, tzinfo=datetime.timezone.utc), 'seat_locks_id': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.194626+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.198833+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.199420+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.199796+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.57s ago] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.201973+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 26, 'seat_code': 'R7-7', 'user_id': 51, 'expires_at': '2025-12-29T13:40:17.191937+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.202221+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.202538+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.202982+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.204089+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.204812+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 25, 'user_id': 51, 'showtime_id': 26, 'seat_code': 'R7-7'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.205113+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 25", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.206692+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.207319+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.207670+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.57s ago] {'user_id': 51, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.210052+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.213862+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.214383+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.214724+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.57s ago] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.216952+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 25, 'reservation_id': 25, 'user_id': 51, 'showtime_id': 26, 'seat_code': 'R7-7'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.217202+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.218068+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 25", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.219762+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.220319+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.220631+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.54s ago] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.223372+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 25, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.223775+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.224606+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 25, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.226332+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.226859+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.227075+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.52s ago] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.229334+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.229874+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.51s ago] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.231754+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.236399+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.237319+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.237878+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.59s ago] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.240597+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 25 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.241139+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.242402+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.242728+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 25: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.243386+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.244861+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.245198+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 25", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.245709+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.246879+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.249206+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.249859+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.250390+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.52s ago] {'actor_id': 51, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 25, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 25, \"user_id\": 51, \"showtime_id\": 26, \"seat_code\": \"R7-7\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 30, 17, 249391, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.252977+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.257229+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.258067+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.258549+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.52s ago] {'pk_1': 31}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.261051+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.262110+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.263359+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.099s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.264371+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:19.307276+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "c7bec67a-404b-4177-90ae-0d466118d5ef"}
{"timestamp": "2025-12-29T13:30:19.310149+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c7bec67a-404b-4177-90ae-0d466118d5ef"}
{"timestamp": "2025-12-29T13:30:19.310833+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c7bec67a-404b-4177-90ae-0d466118d5ef"}
{"timestamp": "2025-12-29T13:30:19.311296+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 49.71s ago] {'pk_1': 51}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c7bec67a-404b-4177-90ae-0d466118d5ef"}
{"timestamp": "2025-12-29T13:30:19.314725+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c7bec67a-404b-4177-90ae-0d466118d5ef"}
{"timestamp": "2025-12-29T13:30:19.315275+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.52s ago] {'user_id_1': 51}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c7bec67a-404b-4177-90ae-0d466118d5ef"}
{"timestamp": "2025-12-29T13:30:19.317501+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.010s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "c7bec67a-404b-4177-90ae-0d466118d5ef"}
{"timestamp": "2025-12-29T13:30:19.318549+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c7bec67a-404b-4177-90ae-0d466118d5ef"}
{"timestamp": "2025-12-29T13:30:21.369095+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/order/25/initiate", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "c53fe3e6-af4d-466a-b806-492061a2f319"}
{"timestamp": "2025-12-29T13:30:21.371984+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c53fe3e6-af4d-466a-b806-492061a2f319"}
{"timestamp": "2025-12-29T13:30:21.372615+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c53fe3e6-af4d-466a-b806-492061a2f319"}
{"timestamp": "2025-12-29T13:30:21.373013+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 51.78s ago] {'pk_1': 51}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c53fe3e6-af4d-466a-b806-492061a2f319"}
{"timestamp": "2025-12-29T13:30:21.375851+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c53fe3e6-af4d-466a-b806-492061a2f319"}
{"timestamp": "2025-12-29T13:30:21.376543+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 51.66s ago] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c53fe3e6-af4d-466a-b806-492061a2f319"}
{"timestamp": "2025-12-29T13:30:21.378487+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO payment_attempts (order_id, amount_attempted, status, final_amount, failure_reason, provider_payment_id, created_at) VALUES (%(order_id)s, %(amount_attempted)s, %(status)s, %(final_amount)s, %(failure_reason)s, %(provider_payment_id)s, %(created_at)s) RETURNING payment_attempts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c53fe3e6-af4d-466a-b806-492061a2f319"}
{"timestamp": "2025-12-29T13:30:21.378946+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.51s ago] {'order_id': 25, 'amount_attempted': 1000, 'status': 'PENDING', 'final_amount': 1000, 'failure_reason': None, 'provider_payment_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 30, 21, 378061, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c53fe3e6-af4d-466a-b806-492061a2f319"}
{"timestamp": "2025-12-29T13:30:21.380752+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "c53fe3e6-af4d-466a-b806-492061a2f319"}
{"timestamp": "2025-12-29T13:30:21.385813+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c53fe3e6-af4d-466a-b806-492061a2f319"}
{"timestamp": "2025-12-29T13:30:21.386345+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c53fe3e6-af4d-466a-b806-492061a2f319"}
{"timestamp": "2025-12-29T13:30:21.386624+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.51s ago] {'pk_1': 18}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c53fe3e6-af4d-466a-b806-492061a2f319"}
{"timestamp": "2025-12-29T13:30:21.388876+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c53fe3e6-af4d-466a-b806-492061a2f319"}
{"timestamp": "2025-12-29T13:30:21.389363+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.51s ago] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c53fe3e6-af4d-466a-b806-492061a2f319"}
{"timestamp": "2025-12-29T13:30:21.391087+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.pending with payload: {'payment_attempt_id': 18, 'order_id': 25, 'amount_attempted': 1000, 'final_amount': 1000, 'user_id': 51}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "c53fe3e6-af4d-466a-b806-492061a2f319"}
{"timestamp": "2025-12-29T13:30:21.392097+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.pending to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "c53fe3e6-af4d-466a-b806-492061a2f319"}
{"timestamp": "2025-12-29T13:30:21.392237+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: payment.pending", "module": "event_bus", "function": "publish", "line": 31, "request_id": "c53fe3e6-af4d-466a-b806-492061a2f319"}
{"timestamp": "2025-12-29T13:30:21.393259+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/order/25/initiate \u2192 200 (0.024s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "c53fe3e6-af4d-466a-b806-492061a2f319"}
{"timestamp": "2025-12-29T13:30:21.394111+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c53fe3e6-af4d-466a-b806-492061a2f319"}
{"timestamp": "2025-12-29T13:30:23.433877+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /admin/payments/18/fail", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "543d406c-56b0-4264-90eb-ae104a74a08f"}
{"timestamp": "2025-12-29T13:30:23.436360+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "543d406c-56b0-4264-90eb-ae104a74a08f"}
{"timestamp": "2025-12-29T13:30:23.436955+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "543d406c-56b0-4264-90eb-ae104a74a08f"}
{"timestamp": "2025-12-29T13:30:23.437287+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 53.84s ago] {'pk_1': 50}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "543d406c-56b0-4264-90eb-ae104a74a08f"}
{"timestamp": "2025-12-29T13:30:23.441108+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "543d406c-56b0-4264-90eb-ae104a74a08f"}
{"timestamp": "2025-12-29T13:30:23.442836+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /admin/payments/18/fail \u2192 403 (0.009s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "543d406c-56b0-4264-90eb-ae104a74a08f"}
{"timestamp": "2025-12-29T13:30:25.500169+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.503394+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.504052+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.504404+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.3s ago] {'email_1': 'test_admin_1767015023.4440458@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.711571+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.711950+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.29s ago] {'email': 'test_admin_1767015023.4440458@example.com', 'hashed_password': '$2b$12$Pi0NJsWK259EpRYqFuP45uuisJEHbX9HIrgi2BOvYwdQK2yVooMpm', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.715348+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.719879+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.720530+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.720920+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.28s ago] {'pk_1': 52}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.722916+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 52, 'email': 'test_admin_1767015023.4440458@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.723947+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.725833+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.726504+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.727036+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.25s ago] {'user_id_1': 52, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.729458+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.729820+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.25s ago] {'user_id': 52, 'name': None, 'email': 'test_admin_1767015023.4440458@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.731602+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.735651+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.736116+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.736445+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.25s ago] {'pk_1': 52}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.738961+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 52, 'user_id': 52, 'email': 'test_admin_1767015023.4440458@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.739161+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.739285+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.739515+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.740582+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.741581+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.741975+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.54s ago] {'email_1': 'test_admin_1767015023.4440458@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.947056+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 52, 'email': 'test_admin_1767015023.4440458@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.948303+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.948515+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.949700+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.450s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.950574+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:27.991630+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "06ddf6fc-18d2-4391-908c-6789b0e41af9"}
{"timestamp": "2025-12-29T13:30:27.994104+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "06ddf6fc-18d2-4391-908c-6789b0e41af9"}
{"timestamp": "2025-12-29T13:30:27.994878+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "06ddf6fc-18d2-4391-908c-6789b0e41af9"}
{"timestamp": "2025-12-29T13:30:27.995192+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.23s ago] {'title_1': 'Test Movie 1767015023.4440458'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "06ddf6fc-18d2-4391-908c-6789b0e41af9"}
{"timestamp": "2025-12-29T13:30:27.997585+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "06ddf6fc-18d2-4391-908c-6789b0e41af9"}
{"timestamp": "2025-12-29T13:30:27.998006+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.23s ago] {'title': 'Test Movie 1767015023.4440458', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "06ddf6fc-18d2-4391-908c-6789b0e41af9"}
{"timestamp": "2025-12-29T13:30:27.999757+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "06ddf6fc-18d2-4391-908c-6789b0e41af9"}
{"timestamp": "2025-12-29T13:30:28.003827+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "06ddf6fc-18d2-4391-908c-6789b0e41af9"}
{"timestamp": "2025-12-29T13:30:28.004628+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "06ddf6fc-18d2-4391-908c-6789b0e41af9"}
{"timestamp": "2025-12-29T13:30:28.005140+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.23s ago] {'pk_1': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "06ddf6fc-18d2-4391-908c-6789b0e41af9"}
{"timestamp": "2025-12-29T13:30:28.007431+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 36}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "06ddf6fc-18d2-4391-908c-6789b0e41af9"}
{"timestamp": "2025-12-29T13:30:28.008314+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "06ddf6fc-18d2-4391-908c-6789b0e41af9"}
{"timestamp": "2025-12-29T13:30:28.008445+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "06ddf6fc-18d2-4391-908c-6789b0e41af9"}
{"timestamp": "2025-12-29T13:30:28.009503+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.018s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "06ddf6fc-18d2-4391-908c-6789b0e41af9"}
{"timestamp": "2025-12-29T13:30:28.010481+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "06ddf6fc-18d2-4391-908c-6789b0e41af9"}
{"timestamp": "2025-12-29T13:30:30.057051+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "686682e8-e598-4882-aba8-8e00bfcdd4b6"}
{"timestamp": "2025-12-29T13:30:30.059583+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "686682e8-e598-4882-aba8-8e00bfcdd4b6"}
{"timestamp": "2025-12-29T13:30:30.060181+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "686682e8-e598-4882-aba8-8e00bfcdd4b6"}
{"timestamp": "2025-12-29T13:30:30.060555+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.22s ago] {'name_1': 'Test Layout 1767015023.4440458'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "686682e8-e598-4882-aba8-8e00bfcdd4b6"}
{"timestamp": "2025-12-29T13:30:30.063078+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "686682e8-e598-4882-aba8-8e00bfcdd4b6"}
{"timestamp": "2025-12-29T13:30:30.063483+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.22s ago] {'name': 'Test Layout 1767015023.4440458', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "686682e8-e598-4882-aba8-8e00bfcdd4b6"}
{"timestamp": "2025-12-29T13:30:30.065516+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "686682e8-e598-4882-aba8-8e00bfcdd4b6"}
{"timestamp": "2025-12-29T13:30:30.069599+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "686682e8-e598-4882-aba8-8e00bfcdd4b6"}
{"timestamp": "2025-12-29T13:30:30.070232+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "686682e8-e598-4882-aba8-8e00bfcdd4b6"}
{"timestamp": "2025-12-29T13:30:30.070717+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.21s ago] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "686682e8-e598-4882-aba8-8e00bfcdd4b6"}
{"timestamp": "2025-12-29T13:30:30.072921+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 35}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "686682e8-e598-4882-aba8-8e00bfcdd4b6"}
{"timestamp": "2025-12-29T13:30:30.073805+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "686682e8-e598-4882-aba8-8e00bfcdd4b6"}
{"timestamp": "2025-12-29T13:30:30.073943+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "686682e8-e598-4882-aba8-8e00bfcdd4b6"}
{"timestamp": "2025-12-29T13:30:30.075107+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.018s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "686682e8-e598-4882-aba8-8e00bfcdd4b6"}
{"timestamp": "2025-12-29T13:30:30.076083+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "686682e8-e598-4882-aba8-8e00bfcdd4b6"}
{"timestamp": "2025-12-29T13:30:32.123903+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "7bc64145-ebd8-4371-9fad-819cb3b84399"}
{"timestamp": "2025-12-29T13:30:32.126441+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7bc64145-ebd8-4371-9fad-819cb3b84399"}
{"timestamp": "2025-12-29T13:30:32.127093+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7bc64145-ebd8-4371-9fad-819cb3b84399"}
{"timestamp": "2025-12-29T13:30:32.127451+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.2s ago] {'name_1': 'Test Screen 1767015023.4440458', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7bc64145-ebd8-4371-9fad-819cb3b84399"}
{"timestamp": "2025-12-29T13:30:32.130037+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7bc64145-ebd8-4371-9fad-819cb3b84399"}
{"timestamp": "2025-12-29T13:30:32.130491+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.2s ago] {'id_1': 35, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7bc64145-ebd8-4371-9fad-819cb3b84399"}
{"timestamp": "2025-12-29T13:30:32.132340+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7bc64145-ebd8-4371-9fad-819cb3b84399"}
{"timestamp": "2025-12-29T13:30:32.132589+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.2s ago] {'name': 'Test Screen 1767015023.4440458', 'capacity': 150, 'seat_layout_id': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7bc64145-ebd8-4371-9fad-819cb3b84399"}
{"timestamp": "2025-12-29T13:30:32.134544+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "7bc64145-ebd8-4371-9fad-819cb3b84399"}
{"timestamp": "2025-12-29T13:30:32.139473+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7bc64145-ebd8-4371-9fad-819cb3b84399"}
{"timestamp": "2025-12-29T13:30:32.140042+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7bc64145-ebd8-4371-9fad-819cb3b84399"}
{"timestamp": "2025-12-29T13:30:32.140300+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.2s ago] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7bc64145-ebd8-4371-9fad-819cb3b84399"}
{"timestamp": "2025-12-29T13:30:32.142712+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 35}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "7bc64145-ebd8-4371-9fad-819cb3b84399"}
{"timestamp": "2025-12-29T13:30:32.144201+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "7bc64145-ebd8-4371-9fad-819cb3b84399"}
{"timestamp": "2025-12-29T13:30:32.144383+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "7bc64145-ebd8-4371-9fad-819cb3b84399"}
{"timestamp": "2025-12-29T13:30:32.145432+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "7bc64145-ebd8-4371-9fad-819cb3b84399"}
{"timestamp": "2025-12-29T13:30:32.146324+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "7bc64145-ebd8-4371-9fad-819cb3b84399"}
{"timestamp": "2025-12-29T13:30:34.185633+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:34.188114+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:34.188672+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:34.188929+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.19s ago] {'pk_1': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:34.191574+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:34.192058+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.19s ago] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:34.194057+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:34.194364+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.18s ago] {'screen_id_1': 35, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:34.196195+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:34.196643+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.18s ago] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 36, 'screen_id': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:34.198419+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:34.203052+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:34.204013+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:34.204557+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.18s ago] {'pk_1': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:34.207882+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:34.208345+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.18s ago] {'pk_1': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:34.210676+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:34.211072+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.18s ago] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:34.212756+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 27}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:34.213881+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:34.214028+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:34.215124+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.030s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:34.216180+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:36.274502+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.277248+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.277873+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.278212+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 80.08s ago] {'email_1': 'test_admincancel_1767015034.2159493@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.482675+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.483282+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 80.06s ago] {'email': 'test_admincancel_1767015034.2159493@example.com', 'hashed_password': '$2b$12$6mLVaRl3.lqN0MzNdGsgrubVlgIbtXaTuJf90w4gQ/Qg5Iy/dcH7q', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.485112+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.490540+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.491300+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.491741+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 80.06s ago] {'pk_1': 53}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.493882+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 53, 'email': 'test_admincancel_1767015034.2159493@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.494834+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.496700+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.497448+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.497829+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 80.02s ago] {'user_id_1': 53, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.500243+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.500524+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 80.02s ago] {'user_id': 53, 'name': None, 'email': 'test_admincancel_1767015034.2159493@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.502358+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.506936+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.507742+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.508167+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 80.02s ago] {'pk_1': 53}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.510630+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 53, 'user_id': 53, 'email': 'test_admincancel_1767015034.2159493@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.510843+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.510977+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.511212+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.512291+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.513628+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.513969+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 80.31s ago] {'email_1': 'test_admincancel_1767015034.2159493@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.717663+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 53, 'email': 'test_admincancel_1767015034.2159493@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.719212+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.719451+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.720517+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.446s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.721417+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:38.765899+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.768945+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.769655+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.770086+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.17s ago] {'pk_1': 53}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.773375+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.774045+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.17s ago] {'user_id': 53, 'showtime_id': 27, 'seat_code': 'R8-8', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 13, 30, 38, 772839, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 40, 38, 772544, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.776035+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.782048+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.782791+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.783302+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.17s ago] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.785330+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 26, 'user_id': 53, 'showtime_id': 27, 'seat_code': 'R8-8'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.786519+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.789042+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.789917+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.790500+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.17s ago] {'showtime_id_1': 27, 'seat_code_1': 'R8-8', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.793006+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.793480+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.17s ago] {'seat_code': 'R8-8', 'showtime_id': 27, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.796069+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.796457+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.17s ago] {'status': 'LOCKED', 'locked_by_user_id': 53, 'lock_expires_at': datetime.datetime(2025, 12, 29, 13, 40, 38, 795139, tzinfo=datetime.timezone.utc), 'seat_locks_id': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.798244+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.802738+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.803453+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.803876+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.17s ago] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.806007+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 27, 'seat_code': 'R8-8', 'user_id': 53, 'expires_at': '2025-12-29T13:40:38.795139+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.806276+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.806570+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.807038+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.808362+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.809493+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 26, 'user_id': 53, 'showtime_id': 27, 'seat_code': 'R8-8'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.809863+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 26", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.811544+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.812213+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.812670+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.17s ago] {'user_id': 53, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.815632+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.819928+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.820581+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.820908+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.17s ago] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.823364+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 26, 'reservation_id': 26, 'user_id': 53, 'showtime_id': 27, 'seat_code': 'R8-8'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.823606+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.824028+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 26", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.825506+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.826194+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.826628+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.15s ago] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.828906+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 26, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.829229+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.830063+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 26, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.831843+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.832583+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.832978+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.12s ago] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.835292+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.835630+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.12s ago] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.837327+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.841540+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.842141+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.842991+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.19s ago] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.845302+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 26 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.845541+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.846557+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.846798+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 26: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.847210+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.848434+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.848632+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 26", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.848995+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.850406+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.852267+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.852879+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.853326+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.12s ago] {'actor_id': 53, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 26, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 26, \"user_id\": 53, \"showtime_id\": 27, \"seat_code\": \"R8-8\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 30, 38, 852440, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.855519+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.860179+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.860655+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.860857+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.12s ago] {'pk_1': 32}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.863048+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.864275+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.866241+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.100s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.869538+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:40.913761+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /admin/reservations/26/cancel", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "9d9e50bd-2afb-4aa5-9f2f-3417c36139b9"}
{"timestamp": "2025-12-29T13:30:40.916221+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9d9e50bd-2afb-4aa5-9f2f-3417c36139b9"}
{"timestamp": "2025-12-29T13:30:40.916821+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9d9e50bd-2afb-4aa5-9f2f-3417c36139b9"}
{"timestamp": "2025-12-29T13:30:40.917262+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.32s ago] {'pk_1': 52}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9d9e50bd-2afb-4aa5-9f2f-3417c36139b9"}
{"timestamp": "2025-12-29T13:30:40.920000+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "9d9e50bd-2afb-4aa5-9f2f-3417c36139b9"}
{"timestamp": "2025-12-29T13:30:40.921667+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /admin/reservations/26/cancel \u2192 403 (0.008s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "9d9e50bd-2afb-4aa5-9f2f-3417c36139b9"}
{"timestamp": "2025-12-29T13:30:42.948353+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:42.951007+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:42.951624+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:42.951958+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.75s ago] {'email_1': 'test_admin_1767015040.9226742@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.156391+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.156835+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.73s ago] {'email': 'test_admin_1767015040.9226742@example.com', 'hashed_password': '$2b$12$gjGHC3ChXc/8lVdsnCvs9ucCBTCSpBBa6WaUa3v58jSog4NKsZuIK', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.158449+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.163512+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.164235+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.164731+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.73s ago] {'pk_1': 54}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.166771+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 54, 'email': 'test_admin_1767015040.9226742@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.167821+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.169742+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.170457+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.170935+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.7s ago] {'user_id_1': 54, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.173171+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.173429+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.69s ago] {'user_id': 54, 'name': None, 'email': 'test_admin_1767015040.9226742@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.174957+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.178793+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.179287+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.179616+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.69s ago] {'pk_1': 54}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.181365+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 54, 'user_id': 54, 'email': 'test_admin_1767015040.9226742@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.181521+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.181747+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.182105+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.183191+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.184376+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.184625+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.98s ago] {'email_1': 'test_admin_1767015040.9226742@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.390617+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 54, 'email': 'test_admin_1767015040.9226742@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.391691+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.391964+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.393157+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.445s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.394093+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:45.445047+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "109fabe5-ad4f-4139-a7e3-d1e97429bfbf"}
{"timestamp": "2025-12-29T13:30:45.447730+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "109fabe5-ad4f-4139-a7e3-d1e97429bfbf"}
{"timestamp": "2025-12-29T13:30:45.448420+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "109fabe5-ad4f-4139-a7e3-d1e97429bfbf"}
{"timestamp": "2025-12-29T13:30:45.448875+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.69s ago] {'title_1': 'Test Movie 1767015040.9226742'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "109fabe5-ad4f-4139-a7e3-d1e97429bfbf"}
{"timestamp": "2025-12-29T13:30:45.451716+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "109fabe5-ad4f-4139-a7e3-d1e97429bfbf"}
{"timestamp": "2025-12-29T13:30:45.452228+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.68s ago] {'title': 'Test Movie 1767015040.9226742', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "109fabe5-ad4f-4139-a7e3-d1e97429bfbf"}
{"timestamp": "2025-12-29T13:30:45.454161+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "109fabe5-ad4f-4139-a7e3-d1e97429bfbf"}
{"timestamp": "2025-12-29T13:30:45.460230+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "109fabe5-ad4f-4139-a7e3-d1e97429bfbf"}
{"timestamp": "2025-12-29T13:30:45.461535+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "109fabe5-ad4f-4139-a7e3-d1e97429bfbf"}
{"timestamp": "2025-12-29T13:30:45.462200+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.68s ago] {'pk_1': 37}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "109fabe5-ad4f-4139-a7e3-d1e97429bfbf"}
{"timestamp": "2025-12-29T13:30:45.465015+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 37}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "109fabe5-ad4f-4139-a7e3-d1e97429bfbf"}
{"timestamp": "2025-12-29T13:30:45.466126+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "109fabe5-ad4f-4139-a7e3-d1e97429bfbf"}
{"timestamp": "2025-12-29T13:30:45.466408+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "109fabe5-ad4f-4139-a7e3-d1e97429bfbf"}
{"timestamp": "2025-12-29T13:30:45.467474+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "109fabe5-ad4f-4139-a7e3-d1e97429bfbf"}
{"timestamp": "2025-12-29T13:30:45.468363+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "109fabe5-ad4f-4139-a7e3-d1e97429bfbf"}
{"timestamp": "2025-12-29T13:30:47.521215+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "6146f8e2-4296-4719-80e3-02d777fdf4df"}
{"timestamp": "2025-12-29T13:30:47.523823+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6146f8e2-4296-4719-80e3-02d777fdf4df"}
{"timestamp": "2025-12-29T13:30:47.524423+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6146f8e2-4296-4719-80e3-02d777fdf4df"}
{"timestamp": "2025-12-29T13:30:47.524782+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.68s ago] {'name_1': 'Test Layout 1767015040.9226742'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6146f8e2-4296-4719-80e3-02d777fdf4df"}
{"timestamp": "2025-12-29T13:30:47.527322+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6146f8e2-4296-4719-80e3-02d777fdf4df"}
{"timestamp": "2025-12-29T13:30:47.527790+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.68s ago] {'name': 'Test Layout 1767015040.9226742', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6146f8e2-4296-4719-80e3-02d777fdf4df"}
{"timestamp": "2025-12-29T13:30:47.529576+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6146f8e2-4296-4719-80e3-02d777fdf4df"}
{"timestamp": "2025-12-29T13:30:47.534899+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6146f8e2-4296-4719-80e3-02d777fdf4df"}
{"timestamp": "2025-12-29T13:30:47.535582+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6146f8e2-4296-4719-80e3-02d777fdf4df"}
{"timestamp": "2025-12-29T13:30:47.535972+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.68s ago] {'pk_1': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6146f8e2-4296-4719-80e3-02d777fdf4df"}
{"timestamp": "2025-12-29T13:30:47.538427+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 36}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "6146f8e2-4296-4719-80e3-02d777fdf4df"}
{"timestamp": "2025-12-29T13:30:47.539605+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6146f8e2-4296-4719-80e3-02d777fdf4df"}
{"timestamp": "2025-12-29T13:30:47.539788+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "6146f8e2-4296-4719-80e3-02d777fdf4df"}
{"timestamp": "2025-12-29T13:30:47.541243+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.020s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "6146f8e2-4296-4719-80e3-02d777fdf4df"}
{"timestamp": "2025-12-29T13:30:47.542307+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6146f8e2-4296-4719-80e3-02d777fdf4df"}
{"timestamp": "2025-12-29T13:30:49.578684+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "29011ec4-9d78-406f-b6c0-bd146725dae7"}
{"timestamp": "2025-12-29T13:30:49.581368+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "29011ec4-9d78-406f-b6c0-bd146725dae7"}
{"timestamp": "2025-12-29T13:30:49.582038+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "29011ec4-9d78-406f-b6c0-bd146725dae7"}
{"timestamp": "2025-12-29T13:30:49.582376+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.66s ago] {'name_1': 'Test Screen 1767015040.9226742', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "29011ec4-9d78-406f-b6c0-bd146725dae7"}
{"timestamp": "2025-12-29T13:30:49.584886+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "29011ec4-9d78-406f-b6c0-bd146725dae7"}
{"timestamp": "2025-12-29T13:30:49.585263+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.66s ago] {'id_1': 36, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "29011ec4-9d78-406f-b6c0-bd146725dae7"}
{"timestamp": "2025-12-29T13:30:49.587398+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "29011ec4-9d78-406f-b6c0-bd146725dae7"}
{"timestamp": "2025-12-29T13:30:49.587669+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.65s ago] {'name': 'Test Screen 1767015040.9226742', 'capacity': 150, 'seat_layout_id': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "29011ec4-9d78-406f-b6c0-bd146725dae7"}
{"timestamp": "2025-12-29T13:30:49.589346+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "29011ec4-9d78-406f-b6c0-bd146725dae7"}
{"timestamp": "2025-12-29T13:30:49.595260+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "29011ec4-9d78-406f-b6c0-bd146725dae7"}
{"timestamp": "2025-12-29T13:30:49.595878+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "29011ec4-9d78-406f-b6c0-bd146725dae7"}
{"timestamp": "2025-12-29T13:30:49.596224+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.65s ago] {'pk_1': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "29011ec4-9d78-406f-b6c0-bd146725dae7"}
{"timestamp": "2025-12-29T13:30:49.598253+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 36}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "29011ec4-9d78-406f-b6c0-bd146725dae7"}
{"timestamp": "2025-12-29T13:30:49.599562+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "29011ec4-9d78-406f-b6c0-bd146725dae7"}
{"timestamp": "2025-12-29T13:30:49.599819+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "29011ec4-9d78-406f-b6c0-bd146725dae7"}
{"timestamp": "2025-12-29T13:30:49.601059+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "29011ec4-9d78-406f-b6c0-bd146725dae7"}
{"timestamp": "2025-12-29T13:30:49.601965+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "29011ec4-9d78-406f-b6c0-bd146725dae7"}
{"timestamp": "2025-12-29T13:30:51.639122+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:51.641543+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:51.642225+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:51.642733+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.64s ago] {'pk_1': 37}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:51.645077+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:51.645491+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.64s ago] {'pk_1': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:51.647549+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:51.648019+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.64s ago] {'screen_id_1': 36, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:51.649971+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:51.650413+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.64s ago] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 37, 'screen_id': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:51.652417+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:51.657840+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:51.658447+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:51.658767+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.63s ago] {'pk_1': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:51.661267+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:51.661593+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.63s ago] {'pk_1': 37}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:51.663404+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:51.663732+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.63s ago] {'pk_1': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:51.665314+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 28}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:51.666225+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:51.666366+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:51.667382+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.028s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:51.668260+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:53.713257+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.715957+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.716574+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.716907+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 97.52s ago] {'email_1': 'test_concurrent1_1767015051.668121@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.924576+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.925081+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 97.5s ago] {'email': 'test_concurrent1_1767015051.668121@example.com', 'hashed_password': '$2b$12$OFMBEF5lVGIPU7qcpD5kMO2bPNDNqrjl55G5wpXVCQNS7e3C9SOIm', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.926779+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.932086+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.932880+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.933298+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 97.5s ago] {'pk_1': 55}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.935338+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 55, 'email': 'test_concurrent1_1767015051.668121@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.936340+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.938291+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.938914+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.939193+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 97.46s ago] {'user_id_1': 55, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.941503+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.941936+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 97.46s ago] {'user_id': 55, 'name': None, 'email': 'test_concurrent1_1767015051.668121@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.943611+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.947399+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.947996+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.948329+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 97.46s ago] {'pk_1': 55}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.950778+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 55, 'user_id': 55, 'email': 'test_concurrent1_1767015051.668121@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.950945+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.951070+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.951295+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.952355+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.953559+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.953829+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 97.75s ago] {'email_1': 'test_concurrent1_1767015051.668121@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:54.156756+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 55, 'email': 'test_concurrent1_1767015051.668121@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:54.158112+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:54.158309+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:54.159433+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.446s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:54.160313+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:56.309531+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.312403+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.313010+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.313307+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 100.1s ago] {'email_1': 'test_concurrent2_1767015054.2601655@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.518930+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.519313+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 100.1s ago] {'email': 'test_concurrent2_1767015054.2601655@example.com', 'hashed_password': '$2b$12$4eNUoUEL/QTt2jvYaVLyU.hkxwREaWk5zssDJxe3qvlVgNjZ1ZBHa', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.521051+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.526594+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.527328+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.527625+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 100.1s ago] {'pk_1': 56}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.529701+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 56, 'email': 'test_concurrent2_1767015054.2601655@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.530702+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.532893+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.533382+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.533592+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 100.1s ago] {'user_id_1': 56, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.535889+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.536295+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 100.1s ago] {'user_id': 56, 'name': None, 'email': 'test_concurrent2_1767015054.2601655@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.538719+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.542635+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.543387+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.543786+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 100.1s ago] {'pk_1': 56}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.545751+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 56, 'user_id': 56, 'email': 'test_concurrent2_1767015054.2601655@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.545909+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.546028+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.546247+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.547271+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.548263+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.548687+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 100.3s ago] {'email_1': 'test_concurrent2_1767015054.2601655@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.751499+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 56, 'email': 'test_concurrent2_1767015054.2601655@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.752514+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.752690+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.754130+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.445s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.755038+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:58.791771+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.794629+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.795550+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.795990+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.2s ago] {'pk_1': 55}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.799050+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.799658+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.2s ago] {'user_id': 55, 'showtime_id': 28, 'seat_code': 'R9-9', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 13, 30, 58, 798610, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 40, 58, 798339, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.801746+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.806639+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.807355+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.807757+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.2s ago] {'pk_1': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.810183+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 27, 'user_id': 55, 'showtime_id': 28, 'seat_code': 'R9-9'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.811188+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.813256+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.813812+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.814044+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.2s ago] {'showtime_id_1': 28, 'seat_code_1': 'R9-9', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.816832+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.817315+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.2s ago] {'seat_code': 'R9-9', 'showtime_id': 28, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.819433+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.819726+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.19s ago] {'status': 'LOCKED', 'locked_by_user_id': 55, 'lock_expires_at': datetime.datetime(2025, 12, 29, 13, 40, 58, 818875, tzinfo=datetime.timezone.utc), 'seat_locks_id': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.821569+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.825681+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.826235+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.826496+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.19s ago] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.828318+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 28, 'seat_code': 'R9-9', 'user_id': 55, 'expires_at': '2025-12-29T13:40:58.818875+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.828477+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.828649+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.829045+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.830442+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.831051+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 27, 'user_id': 55, 'showtime_id': 28, 'seat_code': 'R9-9'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.831294+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 27", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.833114+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.833770+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.834176+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.19s ago] {'user_id': 55, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.837027+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.842288+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.843335+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.844016+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.2s ago] {'pk_1': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.846447+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 27, 'reservation_id': 27, 'user_id': 55, 'showtime_id': 28, 'seat_code': 'R9-9'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.846672+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.847238+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 27", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.848690+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.849417+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.849839+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.17s ago] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.852112+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 27, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.852348+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.852736+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 27, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.854275+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.854946+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.855307+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.14s ago] {'pk_1': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.858044+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.858573+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.14s ago] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.860390+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.864640+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.865450+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.865921+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.22s ago] {'pk_1': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.868347+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 27 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.868711+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.869946+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.870164+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 27: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.870517+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.872098+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.872398+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 27", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.872908+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.874043+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.875711+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.876188+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.876496+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.14s ago] {'actor_id': 55, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 27, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 27, \"user_id\": 55, \"showtime_id\": 28, \"seat_code\": \"R9-9\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 30, 58, 875873, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.878973+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.883098+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.883653+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.884127+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.14s ago] {'pk_1': 33}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.886882+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.887879+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.888927+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.097s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.889890+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:31:00.936353+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.938943+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.939542+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.939861+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 91.34s ago] {'pk_1': 56}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.942926+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.943540+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 91.34s ago] {'user_id': 56, 'showtime_id': 28, 'seat_code': 'R9-9', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 13, 31, 0, 942437, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 41, 0, 942147, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.945508+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.949879+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.950580+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.951168+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 91.34s ago] {'pk_1': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.953228+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 28, 'user_id': 56, 'showtime_id': 28, 'seat_code': 'R9-9'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.954207+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.955971+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.956644+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.957103+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 91.34s ago] {'showtime_id_1': 28, 'seat_code_1': 'R9-9', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.959070+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.962856+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.event_bus", "message": "\u274c Event handler failed: reservation.created -> on_reservation_created: ('Seat locked by another user', {'locked_by': 55, 'attempt_user': 56})", "module": "event_bus", "function": "_safe_invoke", "line": 45, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\event_bus.py\", line 42, in _safe_invoke\n    await handler(payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\seat_availability\\handlers.py\", line 23, in on_reservation_created\n    await seat_service.lock_seat(  # Added await!\n    ...<4 lines>...\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\seat_availability\\service.py\", line 49, in lock_seat\n    raise ValidationError(\n    ...<2 lines>...\n    )\napp.core.errors.ValidationError: ('Seat locked by another user', {'locked_by': 55, 'attempt_user': 56})"}
{"timestamp": "2025-12-29T13:31:00.964466+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 28, 'user_id': 56, 'showtime_id': 28, 'seat_code': 'R9-9'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.964613+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 28", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.966248+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.966774+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.966987+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 91.33s ago] {'user_id': 56, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.969208+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.973331+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.973785+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.974113+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 91.33s ago] {'pk_1': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.976206+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 28, 'reservation_id': 28, 'user_id': 56, 'showtime_id': 28, 'seat_code': 'R9-9'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.976514+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.977271+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 28", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.978869+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.979662+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.980026+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 91.3s ago] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.981930+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 28, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.982122+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.982457+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 28, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.983985+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.984636+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.984965+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 91.27s ago] {'pk_1': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.987282+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.987530+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 91.27s ago] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.988965+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.992933+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.993445+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.993649+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 91.35s ago] {'pk_1': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.995501+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 28 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.995951+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.997367+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.997565+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 28: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.997969+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.999153+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.999380+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 28", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.999629+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:01.000819+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:01.002442+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:01.002836+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:01.003313+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 91.27s ago] {'actor_id': 56, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 28, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 28, \"user_id\": 56, \"showtime_id\": 28, \"seat_code\": \"R9-9\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 31, 1, 2610, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:01.005731+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:01.009321+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:01.009948+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:01.010314+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 91.27s ago] {'pk_1': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:01.012451+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:01.013605+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:01.014814+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.079s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:01.015794+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:36:30.755661+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-29T13:36:32.885376+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-29T13:36:32.885622+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-29T13:36:32.885790+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.885934+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.886076+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.886244+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.886402+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.886544+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.886690+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.886898+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.887058+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.887209+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.887351+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.887492+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.887633+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.887776+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.887913+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.888028+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.888141+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.888320+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.888561+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.888719+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.888865+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.889016+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.889207+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.889412+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.889575+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.889742+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.889932+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.890132+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.890375+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.890600+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.890749+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.890863+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.890984+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.891164+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.891333+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.891507+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.891740+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.892022+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.892202+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.892328+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.892437+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.892545+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.892654+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.892761+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.892867+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.893066+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.893262+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.893406+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.893517+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.893626+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.893747+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.893875+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.894001+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.894113+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.894242+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.894378+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.894494+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.894601+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.894712+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/showtimes/{showtime_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.894821+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.895035+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.895333+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-29T13:36:32.895511+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-29T13:36:46.434367+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.503100+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.503520+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.506459+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.506723+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.508889+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.509400+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.511706+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.514422+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.514965+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'email_1': 'test_admin_1767015404.3625028@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.742743+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.743135+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00069s] {'email': 'test_admin_1767015404.3625028@example.com', 'hashed_password': '$2b$12$z1cKUXzOckitzVbqBlZ/2.hDtjOVC9B.6KAHQbQVTXtUUynffs06e', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.746130+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.752885+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.754350+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.754791+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00065s] {'pk_1': 57}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.757160+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 57, 'email': 'test_admin_1767015404.3625028@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.758426+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.775282+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.776879+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.777311+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'user_id_1': 57, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.781594+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.782193+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'user_id': 57, 'name': None, 'email': 'test_admin_1767015404.3625028@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.785827+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.790254+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.791323+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.791647+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'pk_1': 57}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.793697+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 57, 'user_id': 57, 'email': 'test_admin_1767015404.3625028@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.793849+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.793973+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.794304+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.795668+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.797037+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.797371+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2831s ago] {'email_1': 'test_admin_1767015404.3625028@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:47.011621+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 57, 'email': 'test_admin_1767015404.3625028@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:47.012670+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:47.012926+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:47.014160+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.580s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:47.015370+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:49.064922+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b8a1a569-3651-4044-a430-05063bf15f2c"}
{"timestamp": "2025-12-29T13:36:49.067926+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b8a1a569-3651-4044-a430-05063bf15f2c"}
{"timestamp": "2025-12-29T13:36:49.069493+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8a1a569-3651-4044-a430-05063bf15f2c"}
{"timestamp": "2025-12-29T13:36:49.069909+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'title_1': 'Test Movie 1767015404.3625028'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8a1a569-3651-4044-a430-05063bf15f2c"}
{"timestamp": "2025-12-29T13:36:49.074190+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8a1a569-3651-4044-a430-05063bf15f2c"}
{"timestamp": "2025-12-29T13:36:49.074597+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'title': 'Test Movie 1767015404.3625028', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8a1a569-3651-4044-a430-05063bf15f2c"}
{"timestamp": "2025-12-29T13:36:49.076736+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b8a1a569-3651-4044-a430-05063bf15f2c"}
{"timestamp": "2025-12-29T13:36:49.081347+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b8a1a569-3651-4044-a430-05063bf15f2c"}
{"timestamp": "2025-12-29T13:36:49.082479+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8a1a569-3651-4044-a430-05063bf15f2c"}
{"timestamp": "2025-12-29T13:36:49.082935+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'pk_1': 38}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8a1a569-3651-4044-a430-05063bf15f2c"}
{"timestamp": "2025-12-29T13:36:49.085383+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 38}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "b8a1a569-3651-4044-a430-05063bf15f2c"}
{"timestamp": "2025-12-29T13:36:49.086536+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b8a1a569-3651-4044-a430-05063bf15f2c"}
{"timestamp": "2025-12-29T13:36:49.086897+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "b8a1a569-3651-4044-a430-05063bf15f2c"}
{"timestamp": "2025-12-29T13:36:49.088298+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.023s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b8a1a569-3651-4044-a430-05063bf15f2c"}
{"timestamp": "2025-12-29T13:36:49.089671+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b8a1a569-3651-4044-a430-05063bf15f2c"}
{"timestamp": "2025-12-29T13:36:51.116205+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "32a61326-bd84-494c-b243-f305b259da09"}
{"timestamp": "2025-12-29T13:36:51.119075+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "32a61326-bd84-494c-b243-f305b259da09"}
{"timestamp": "2025-12-29T13:36:51.120308+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32a61326-bd84-494c-b243-f305b259da09"}
{"timestamp": "2025-12-29T13:36:51.120663+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'name_1': 'Test Layout 1767015404.3625028'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32a61326-bd84-494c-b243-f305b259da09"}
{"timestamp": "2025-12-29T13:36:51.124437+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32a61326-bd84-494c-b243-f305b259da09"}
{"timestamp": "2025-12-29T13:36:51.124829+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'name': 'Test Layout 1767015404.3625028', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32a61326-bd84-494c-b243-f305b259da09"}
{"timestamp": "2025-12-29T13:36:51.127023+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "32a61326-bd84-494c-b243-f305b259da09"}
{"timestamp": "2025-12-29T13:36:51.132705+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "32a61326-bd84-494c-b243-f305b259da09"}
{"timestamp": "2025-12-29T13:36:51.134002+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32a61326-bd84-494c-b243-f305b259da09"}
{"timestamp": "2025-12-29T13:36:51.134435+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00064s] {'pk_1': 37}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32a61326-bd84-494c-b243-f305b259da09"}
{"timestamp": "2025-12-29T13:36:51.137064+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 37}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "32a61326-bd84-494c-b243-f305b259da09"}
{"timestamp": "2025-12-29T13:36:51.138205+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "32a61326-bd84-494c-b243-f305b259da09"}
{"timestamp": "2025-12-29T13:36:51.138414+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "32a61326-bd84-494c-b243-f305b259da09"}
{"timestamp": "2025-12-29T13:36:51.139660+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.024s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "32a61326-bd84-494c-b243-f305b259da09"}
{"timestamp": "2025-12-29T13:36:51.140789+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "32a61326-bd84-494c-b243-f305b259da09"}
{"timestamp": "2025-12-29T13:36:53.195455+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "9df1f4de-b429-47b3-9fe5-56b78b3344ca"}
{"timestamp": "2025-12-29T13:36:53.198380+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9df1f4de-b429-47b3-9fe5-56b78b3344ca"}
{"timestamp": "2025-12-29T13:36:53.199799+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9df1f4de-b429-47b3-9fe5-56b78b3344ca"}
{"timestamp": "2025-12-29T13:36:53.200195+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'name_1': 'Test Screen 1767015404.3625028', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9df1f4de-b429-47b3-9fe5-56b78b3344ca"}
{"timestamp": "2025-12-29T13:36:53.203527+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9df1f4de-b429-47b3-9fe5-56b78b3344ca"}
{"timestamp": "2025-12-29T13:36:53.204019+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'id_1': 37, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9df1f4de-b429-47b3-9fe5-56b78b3344ca"}
{"timestamp": "2025-12-29T13:36:53.211239+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9df1f4de-b429-47b3-9fe5-56b78b3344ca"}
{"timestamp": "2025-12-29T13:36:53.211764+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'name': 'Test Screen 1767015404.3625028', 'capacity': 150, 'seat_layout_id': 37}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9df1f4de-b429-47b3-9fe5-56b78b3344ca"}
{"timestamp": "2025-12-29T13:36:53.214718+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "9df1f4de-b429-47b3-9fe5-56b78b3344ca"}
{"timestamp": "2025-12-29T13:36:53.219708+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9df1f4de-b429-47b3-9fe5-56b78b3344ca"}
{"timestamp": "2025-12-29T13:36:53.220902+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9df1f4de-b429-47b3-9fe5-56b78b3344ca"}
{"timestamp": "2025-12-29T13:36:53.221270+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'pk_1': 37}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9df1f4de-b429-47b3-9fe5-56b78b3344ca"}
{"timestamp": "2025-12-29T13:36:53.223701+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 37}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "9df1f4de-b429-47b3-9fe5-56b78b3344ca"}
{"timestamp": "2025-12-29T13:36:53.224729+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "9df1f4de-b429-47b3-9fe5-56b78b3344ca"}
{"timestamp": "2025-12-29T13:36:53.224889+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "9df1f4de-b429-47b3-9fe5-56b78b3344ca"}
{"timestamp": "2025-12-29T13:36:53.226227+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.031s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "9df1f4de-b429-47b3-9fe5-56b78b3344ca"}
{"timestamp": "2025-12-29T13:36:53.227439+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "9df1f4de-b429-47b3-9fe5-56b78b3344ca"}
{"timestamp": "2025-12-29T13:36:55.259273+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:55.262258+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:55.263458+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:55.263990+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'pk_1': 38}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:55.267114+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:55.267565+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'pk_1': 37}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:55.270679+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:55.271249+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'screen_id_1': 37, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:55.275047+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:55.275873+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00063s] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 38, 'screen_id': 37}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:55.278744+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:55.283038+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:55.284126+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:55.284519+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:55.287759+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:55.288050+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'pk_1': 38}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:55.290745+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:55.291116+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'pk_1': 37}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:55.292612+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 29}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:55.293617+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:55.293757+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:55.295166+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.036s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:55.296485+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:57.343996+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.346983+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.347709+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.348142+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.83s ago] {'email_1': 'test_booking_1767015415.296245@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.558198+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.558642+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.82s ago] {'email': 'test_booking_1767015415.296245@example.com', 'hashed_password': '$2b$12$u2UEDOTjERjdZSNWmIA6OehTVdev.kyuzbpthYjrrQPYMsXl1h.8a', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.560565+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.564832+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.565503+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.565835+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.81s ago] {'pk_1': 58}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.567845+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 58, 'email': 'test_booking_1767015415.296245@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.568713+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.570396+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.571058+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.571316+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.79s ago] {'user_id_1': 58, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.573816+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.574092+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.79s ago] {'user_id': 58, 'name': None, 'email': 'test_booking_1767015415.296245@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.575598+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.579632+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.580223+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.580459+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.79s ago] {'pk_1': 58}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.582852+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 58, 'user_id': 58, 'email': 'test_booking_1767015415.296245@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.583105+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.583277+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.583619+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.584944+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.586269+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.586697+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 11.07s ago] {'email_1': 'test_booking_1767015415.296245@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.791563+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 58, 'email': 'test_booking_1767015415.296245@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.792738+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.792932+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.794002+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.450s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.794855+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:59.843648+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.846516+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.847471+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.847799+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'pk_1': 58}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.851767+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.852286+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'showtime_id_1': 29, 'seat_code_1': 'R5-5', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.855575+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.855979+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'user_id': 58, 'showtime_id': 29, 'seat_code': 'R5-5', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 13, 36, 59, 855129, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 46, 59, 854284, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.858892+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.863105+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.864387+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.864886+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00068s] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.867353+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 29, 'user_id': 58, 'showtime_id': 29, 'seat_code': 'R5-5'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.868331+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.870611+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.871181+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.871444+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.01998s ago] {'showtime_id_1': 29, 'seat_code_1': 'R5-5', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.874642+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.875075+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'seat_code': 'R5-5', 'showtime_id': 29, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.878178+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.878519+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'status': 'LOCKED', 'locked_by_user_id': 58, 'lock_expires_at': datetime.datetime(2025, 12, 29, 13, 46, 59, 877020, tzinfo=datetime.timezone.utc), 'seat_locks_id': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.880569+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.884447+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.885236+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.885456+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00036s] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.887543+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 29, 'seat_code': 'R5-5', 'user_id': 58, 'expires_at': '2025-12-29T13:46:59.877020+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.887701+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.887819+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.888158+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.889330+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.889948+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 29, 'user_id': 58, 'showtime_id': 29, 'seat_code': 'R5-5'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.890222+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 29", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.891594+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.892742+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.893267+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'user_id': 58, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.895789+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.899383+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.900529+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.900751+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.902566+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 29, 'reservation_id': 29, 'user_id': 58, 'showtime_id': 29, 'seat_code': 'R5-5'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.902710+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.903161+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 29", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.918498+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.920389+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.920933+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00068s] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.923606+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 29, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.923759+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.924581+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 29, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.963335+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.964480+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.964788+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.968808+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.969422+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.971868+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.976663+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.977526+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.977908+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.07745s ago] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.980014+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 29 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.980377+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.981623+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.981848+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 29: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.982144+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.983536+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.983886+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 29", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.984424+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.985717+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.987620+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.988810+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.989323+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'actor_id': 58, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 29, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 29, \"user_id\": 58, \"showtime_id\": 29, \"seat_code\": \"R5-5\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 36, 59, 988425, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.992447+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.997089+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.998466+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.998732+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:37:00.001270+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:37:00.002554+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:37:00.004040+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.160s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:37:00.005070+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:37:02.045817+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "931b01cc-a471-47d6-b141-b0d75498dfee"}
{"timestamp": "2025-12-29T13:37:02.048444+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "931b01cc-a471-47d6-b141-b0d75498dfee"}
{"timestamp": "2025-12-29T13:37:02.049146+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "931b01cc-a471-47d6-b141-b0d75498dfee"}
{"timestamp": "2025-12-29T13:37:02.049432+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 2.202s ago] {'pk_1': 58}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "931b01cc-a471-47d6-b141-b0d75498dfee"}
{"timestamp": "2025-12-29T13:37:02.052673+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "931b01cc-a471-47d6-b141-b0d75498dfee"}
{"timestamp": "2025-12-29T13:37:02.053339+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00083s] {'user_id_1': 58}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "931b01cc-a471-47d6-b141-b0d75498dfee"}
{"timestamp": "2025-12-29T13:37:02.055543+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.010s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "931b01cc-a471-47d6-b141-b0d75498dfee"}
{"timestamp": "2025-12-29T13:37:02.056458+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "931b01cc-a471-47d6-b141-b0d75498dfee"}
{"timestamp": "2025-12-29T13:37:04.109470+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/order/29/initiate", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "bf21a846-0752-4ef2-9ace-385dbad45cfe"}
{"timestamp": "2025-12-29T13:37:04.112210+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bf21a846-0752-4ef2-9ace-385dbad45cfe"}
{"timestamp": "2025-12-29T13:37:04.112899+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf21a846-0752-4ef2-9ace-385dbad45cfe"}
{"timestamp": "2025-12-29T13:37:04.113268+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.266s ago] {'pk_1': 58}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf21a846-0752-4ef2-9ace-385dbad45cfe"}
{"timestamp": "2025-12-29T13:37:04.116897+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf21a846-0752-4ef2-9ace-385dbad45cfe"}
{"timestamp": "2025-12-29T13:37:04.117408+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.153s ago] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf21a846-0752-4ef2-9ace-385dbad45cfe"}
{"timestamp": "2025-12-29T13:37:04.120316+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO payment_attempts (order_id, amount_attempted, status, final_amount, failure_reason, provider_payment_id, created_at) VALUES (%(order_id)s, %(amount_attempted)s, %(status)s, %(final_amount)s, %(failure_reason)s, %(provider_payment_id)s, %(created_at)s) RETURNING payment_attempts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf21a846-0752-4ef2-9ace-385dbad45cfe"}
{"timestamp": "2025-12-29T13:37:04.120751+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00062s] {'order_id': 29, 'amount_attempted': 1000, 'status': 'PENDING', 'final_amount': 1000, 'failure_reason': None, 'provider_payment_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 37, 4, 119791, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf21a846-0752-4ef2-9ace-385dbad45cfe"}
{"timestamp": "2025-12-29T13:37:04.124445+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "bf21a846-0752-4ef2-9ace-385dbad45cfe"}
{"timestamp": "2025-12-29T13:37:04.129737+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bf21a846-0752-4ef2-9ace-385dbad45cfe"}
{"timestamp": "2025-12-29T13:37:04.131161+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf21a846-0752-4ef2-9ace-385dbad45cfe"}
{"timestamp": "2025-12-29T13:37:04.131501+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'pk_1': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf21a846-0752-4ef2-9ace-385dbad45cfe"}
{"timestamp": "2025-12-29T13:37:04.134654+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf21a846-0752-4ef2-9ace-385dbad45cfe"}
{"timestamp": "2025-12-29T13:37:04.134974+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf21a846-0752-4ef2-9ace-385dbad45cfe"}
{"timestamp": "2025-12-29T13:37:04.136953+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.pending with payload: {'payment_attempt_id': 19, 'order_id': 29, 'amount_attempted': 1000, 'final_amount': 1000, 'user_id': 58}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "bf21a846-0752-4ef2-9ace-385dbad45cfe"}
{"timestamp": "2025-12-29T13:37:04.138153+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.pending to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "bf21a846-0752-4ef2-9ace-385dbad45cfe"}
{"timestamp": "2025-12-29T13:37:04.138451+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: payment.pending", "module": "event_bus", "function": "publish", "line": 31, "request_id": "bf21a846-0752-4ef2-9ace-385dbad45cfe"}
{"timestamp": "2025-12-29T13:37:04.139931+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/order/29/initiate \u2192 200 (0.031s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "bf21a846-0752-4ef2-9ace-385dbad45cfe"}
{"timestamp": "2025-12-29T13:37:04.140888+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "bf21a846-0752-4ef2-9ace-385dbad45cfe"}
{"timestamp": "2025-12-29T13:37:06.189164+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/19/confirm", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.191652+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.193977+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.194402+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.347s ago] {'pk_1': 58}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.198244+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id AS payment_attempts_id, payment_attempts.order_id AS payment_attempts_order_id, payment_attempts.amount_attempted AS payment_attempts_amount_attempted, payment_attempts.status AS payment_attempts_status, payment_attempts.final_amount AS payment_attempts_final_amount, payment_attempts.failure_reason AS payment_attempts_failure_reason, payment_attempts.provider_payment_id AS payment_attempts_provider_payment_id, payment_attempts.created_at AS payment_attempts_created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.198623+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'pk_1': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.201764+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.202120+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.204767+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE payment_attempts SET status=%(status)s, provider_payment_id=%(provider_payment_id)s WHERE payment_attempts.id = %(payment_attempts_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.205168+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'status': 'SUCCEEDED', 'provider_payment_id': 'mock_payment_19', 'payment_attempts_id': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.207249+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.211888+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.212719+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.213225+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 2.082s ago] {'pk_1': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.215854+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.216140+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 2.082s ago] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.217622+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.succeeded with payload: {'payment_attempt_id': 19, 'order_id': 29, 'final_amount': 1000.0, 'user_id': 58}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.219010+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.succeeded to 4 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.219823+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.221525+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.222118+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.222458+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.258s ago] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.225416+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET is_completed=%(is_completed)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.225742+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00041s] {'is_completed': True, 'orders_id': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.227473+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.232400+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.233073+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.233538+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.333s ago] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.236172+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.completed with payload: {'order_id': 29}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.236494+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.completed to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.236694+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: order.completed", "module": "event_bus", "function": "publish", "line": 31, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.236948+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.238010+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.239992+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.240627+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.240903+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 19.46s ago] {'user_id_1': 58, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.243817+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.244949+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.246756+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.247336+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.247791+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.259s ago] {'actor_id': 58, 'actor_type': 'user', 'action': 'payment.succeeded', 'target_id': 29, 'target_type': 'order', 'payload': '{\"payment_attempt_id\": 19, \"order_id\": 29, \"final_amount\": 1000.0, \"user_id\": 58}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 37, 6, 246930, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.249792+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.254122+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.254925+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.255335+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.257s ago] {'pk_1': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.257908+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.259031+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.260309+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/19/confirm \u2192 200 (0.071s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.261610+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:08.309374+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "17b6302e-c2ea-4a3e-9c56-3cf603cc7d11"}
{"timestamp": "2025-12-29T13:37:08.311995+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "17b6302e-c2ea-4a3e-9c56-3cf603cc7d11"}
{"timestamp": "2025-12-29T13:37:08.312817+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "17b6302e-c2ea-4a3e-9c56-3cf603cc7d11"}
{"timestamp": "2025-12-29T13:37:08.313242+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 8.466s ago] {'pk_1': 58}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "17b6302e-c2ea-4a3e-9c56-3cf603cc7d11"}
{"timestamp": "2025-12-29T13:37:08.316090+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "17b6302e-c2ea-4a3e-9c56-3cf603cc7d11"}
{"timestamp": "2025-12-29T13:37:08.316448+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.264s ago] {'user_id_1': 58}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "17b6302e-c2ea-4a3e-9c56-3cf603cc7d11"}
{"timestamp": "2025-12-29T13:37:08.318782+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.009s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "17b6302e-c2ea-4a3e-9c56-3cf603cc7d11"}
{"timestamp": "2025-12-29T13:37:08.319732+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "17b6302e-c2ea-4a3e-9c56-3cf603cc7d11"}
{"timestamp": "2025-12-29T13:37:10.358731+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.361827+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.362629+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.363086+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.85s ago] {'email_1': 'test_admin_1767015428.3202643@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.569634+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.570157+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.83s ago] {'email': 'test_admin_1767015428.3202643@example.com', 'hashed_password': '$2b$12$d8eZQR.V3vPn/MoQK7XWPe4hCL5fQC0ll/9UlxZDWsZF8Je38J5Be', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.571957+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.576713+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.577890+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.578530+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.82s ago] {'pk_1': 59}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.581594+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 59, 'email': 'test_admin_1767015428.3202643@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.582918+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.585224+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.585973+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.586342+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.81s ago] {'user_id_1': 59, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.589004+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.589531+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.81s ago] {'user_id': 59, 'name': None, 'email': 'test_admin_1767015428.3202643@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.591545+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.596361+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.597125+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.597578+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.81s ago] {'pk_1': 59}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.599574+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 59, 'user_id': 59, 'email': 'test_admin_1767015428.3202643@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.599907+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.600074+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.600295+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.601373+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.602869+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.603366+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 24.09s ago] {'email_1': 'test_admin_1767015428.3202643@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.809268+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 59, 'email': 'test_admin_1767015428.3202643@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.810426+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.810628+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.811846+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.453s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.813017+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:12.855380+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "87900f42-f171-4dcd-8d0e-aba2f2edb53b"}
{"timestamp": "2025-12-29T13:37:12.858310+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "87900f42-f171-4dcd-8d0e-aba2f2edb53b"}
{"timestamp": "2025-12-29T13:37:12.858974+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "87900f42-f171-4dcd-8d0e-aba2f2edb53b"}
{"timestamp": "2025-12-29T13:37:12.859444+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'title_1': 'Test Movie 1767015428.3202643'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "87900f42-f171-4dcd-8d0e-aba2f2edb53b"}
{"timestamp": "2025-12-29T13:37:12.862197+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "87900f42-f171-4dcd-8d0e-aba2f2edb53b"}
{"timestamp": "2025-12-29T13:37:12.862787+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'title': 'Test Movie 1767015428.3202643', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "87900f42-f171-4dcd-8d0e-aba2f2edb53b"}
{"timestamp": "2025-12-29T13:37:12.864855+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "87900f42-f171-4dcd-8d0e-aba2f2edb53b"}
{"timestamp": "2025-12-29T13:37:12.869467+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "87900f42-f171-4dcd-8d0e-aba2f2edb53b"}
{"timestamp": "2025-12-29T13:37:12.870543+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "87900f42-f171-4dcd-8d0e-aba2f2edb53b"}
{"timestamp": "2025-12-29T13:37:12.871042+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'pk_1': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "87900f42-f171-4dcd-8d0e-aba2f2edb53b"}
{"timestamp": "2025-12-29T13:37:12.873349+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 39}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "87900f42-f171-4dcd-8d0e-aba2f2edb53b"}
{"timestamp": "2025-12-29T13:37:12.874425+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "87900f42-f171-4dcd-8d0e-aba2f2edb53b"}
{"timestamp": "2025-12-29T13:37:12.874606+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "87900f42-f171-4dcd-8d0e-aba2f2edb53b"}
{"timestamp": "2025-12-29T13:37:12.876049+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.021s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "87900f42-f171-4dcd-8d0e-aba2f2edb53b"}
{"timestamp": "2025-12-29T13:37:12.877076+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "87900f42-f171-4dcd-8d0e-aba2f2edb53b"}
{"timestamp": "2025-12-29T13:37:14.908550+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "d881cc24-b4b6-4b36-8936-cd75a1996f86"}
{"timestamp": "2025-12-29T13:37:14.911070+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d881cc24-b4b6-4b36-8936-cd75a1996f86"}
{"timestamp": "2025-12-29T13:37:14.911579+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d881cc24-b4b6-4b36-8936-cd75a1996f86"}
{"timestamp": "2025-12-29T13:37:14.911928+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'name_1': 'Test Layout 1767015428.3202643'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d881cc24-b4b6-4b36-8936-cd75a1996f86"}
{"timestamp": "2025-12-29T13:37:14.914417+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d881cc24-b4b6-4b36-8936-cd75a1996f86"}
{"timestamp": "2025-12-29T13:37:14.914786+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'name': 'Test Layout 1767015428.3202643', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d881cc24-b4b6-4b36-8936-cd75a1996f86"}
{"timestamp": "2025-12-29T13:37:14.916673+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "d881cc24-b4b6-4b36-8936-cd75a1996f86"}
{"timestamp": "2025-12-29T13:37:14.921336+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d881cc24-b4b6-4b36-8936-cd75a1996f86"}
{"timestamp": "2025-12-29T13:37:14.922111+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d881cc24-b4b6-4b36-8936-cd75a1996f86"}
{"timestamp": "2025-12-29T13:37:14.922681+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'pk_1': 38}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d881cc24-b4b6-4b36-8936-cd75a1996f86"}
{"timestamp": "2025-12-29T13:37:14.924986+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 38}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "d881cc24-b4b6-4b36-8936-cd75a1996f86"}
{"timestamp": "2025-12-29T13:37:14.925944+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "d881cc24-b4b6-4b36-8936-cd75a1996f86"}
{"timestamp": "2025-12-29T13:37:14.926102+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "d881cc24-b4b6-4b36-8936-cd75a1996f86"}
{"timestamp": "2025-12-29T13:37:14.927216+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.019s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "d881cc24-b4b6-4b36-8936-cd75a1996f86"}
{"timestamp": "2025-12-29T13:37:14.928171+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d881cc24-b4b6-4b36-8936-cd75a1996f86"}
{"timestamp": "2025-12-29T13:37:16.968198+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "6c6d07dd-fbbd-4e3a-a169-5b4593482c3d"}
{"timestamp": "2025-12-29T13:37:16.970859+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6c6d07dd-fbbd-4e3a-a169-5b4593482c3d"}
{"timestamp": "2025-12-29T13:37:16.971463+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c6d07dd-fbbd-4e3a-a169-5b4593482c3d"}
{"timestamp": "2025-12-29T13:37:16.971791+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.77s ago] {'name_1': 'Test Screen 1767015428.3202643', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c6d07dd-fbbd-4e3a-a169-5b4593482c3d"}
{"timestamp": "2025-12-29T13:37:16.974491+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c6d07dd-fbbd-4e3a-a169-5b4593482c3d"}
{"timestamp": "2025-12-29T13:37:16.974879+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.77s ago] {'id_1': 38, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c6d07dd-fbbd-4e3a-a169-5b4593482c3d"}
{"timestamp": "2025-12-29T13:37:16.977323+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c6d07dd-fbbd-4e3a-a169-5b4593482c3d"}
{"timestamp": "2025-12-29T13:37:16.977688+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.77s ago] {'name': 'Test Screen 1767015428.3202643', 'capacity': 150, 'seat_layout_id': 38}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c6d07dd-fbbd-4e3a-a169-5b4593482c3d"}
{"timestamp": "2025-12-29T13:37:16.979564+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6c6d07dd-fbbd-4e3a-a169-5b4593482c3d"}
{"timestamp": "2025-12-29T13:37:16.984144+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6c6d07dd-fbbd-4e3a-a169-5b4593482c3d"}
{"timestamp": "2025-12-29T13:37:16.984811+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c6d07dd-fbbd-4e3a-a169-5b4593482c3d"}
{"timestamp": "2025-12-29T13:37:16.985141+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.76s ago] {'pk_1': 38}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c6d07dd-fbbd-4e3a-a169-5b4593482c3d"}
{"timestamp": "2025-12-29T13:37:16.987085+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 38}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "6c6d07dd-fbbd-4e3a-a169-5b4593482c3d"}
{"timestamp": "2025-12-29T13:37:16.988269+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6c6d07dd-fbbd-4e3a-a169-5b4593482c3d"}
{"timestamp": "2025-12-29T13:37:16.988496+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "6c6d07dd-fbbd-4e3a-a169-5b4593482c3d"}
{"timestamp": "2025-12-29T13:37:16.989631+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.021s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "6c6d07dd-fbbd-4e3a-a169-5b4593482c3d"}
{"timestamp": "2025-12-29T13:37:16.990483+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6c6d07dd-fbbd-4e3a-a169-5b4593482c3d"}
{"timestamp": "2025-12-29T13:37:19.027760+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:19.030287+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:19.031011+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:19.031389+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.77s ago] {'pk_1': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:19.033912+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:19.034359+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.77s ago] {'pk_1': 38}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:19.036644+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:19.037045+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.77s ago] {'screen_id_1': 38, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:19.039153+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:19.039736+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.77s ago] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 39, 'screen_id': 38}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:19.042184+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:19.047157+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:19.047957+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:19.048416+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.76s ago] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:19.051171+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:19.051453+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.76s ago] {'pk_1': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:19.053896+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:19.054410+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.76s ago] {'pk_1': 38}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:19.056399+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 30}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:19.057371+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:19.057541+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:19.058851+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.031s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:19.059927+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:21.106096+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.108727+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.109421+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.109892+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.6s ago] {'email_1': 'test_cancel_1767015439.059651@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.316246+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.316635+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.57s ago] {'email': 'test_cancel_1767015439.059651@example.com', 'hashed_password': '$2b$12$JcixA8YCyiX7Lb12uxTUJeSbZC6/M6yaPdiS6f3Na9dlX3TIXdkGO', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.318440+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.323306+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.324015+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.324600+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.57s ago] {'pk_1': 60}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.326958+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 60, 'email': 'test_cancel_1767015439.059651@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.328085+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.330339+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.331106+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.331408+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.56s ago] {'user_id_1': 60, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.334046+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.334664+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.55s ago] {'user_id': 60, 'name': None, 'email': 'test_cancel_1767015439.059651@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.336663+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.341145+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.341669+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.341896+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.55s ago] {'pk_1': 60}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.344125+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 60, 'user_id': 60, 'email': 'test_cancel_1767015439.059651@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.344298+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.344462+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.345000+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.346255+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.347407+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.347856+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.83s ago] {'email_1': 'test_cancel_1767015439.059651@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.551575+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 60, 'email': 'test_cancel_1767015439.059651@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.552598+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.552773+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.554046+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.448s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.554982+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:23.595179+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.597863+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.598560+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.599024+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.75s ago] {'pk_1': 60}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.602028+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.602597+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.75s ago] {'showtime_id_1': 30, 'seat_code_1': 'R6-6', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.605011+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.605408+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.75s ago] {'user_id': 60, 'showtime_id': 30, 'seat_code': 'R6-6', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 13, 37, 23, 604576, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 47, 23, 604313, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.607704+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.613064+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.613672+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.614016+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.75s ago] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.616402+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 30, 'user_id': 60, 'showtime_id': 30, 'seat_code': 'R6-6'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.617868+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.620025+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.620691+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.621258+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.77s ago] {'showtime_id_1': 30, 'seat_code_1': 'R6-6', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.624244+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.624552+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.75s ago] {'seat_code': 'R6-6', 'showtime_id': 30, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.626889+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.627477+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.75s ago] {'status': 'LOCKED', 'locked_by_user_id': 60, 'lock_expires_at': datetime.datetime(2025, 12, 29, 13, 47, 23, 626356, tzinfo=datetime.timezone.utc), 'seat_locks_id': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.629531+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.633783+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.634600+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.635141+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.75s ago] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.637375+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 30, 'seat_code': 'R6-6', 'user_id': 60, 'expires_at': '2025-12-29T13:47:23.626356+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.637853+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.638042+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.638273+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.639380+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.640068+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 30, 'user_id': 60, 'showtime_id': 30, 'seat_code': 'R6-6'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.640426+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 30", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.642128+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.642689+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.642959+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.75s ago] {'user_id': 60, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.645378+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.649338+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.649842+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.650186+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.75s ago] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.652808+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 30, 'reservation_id': 30, 'user_id': 60, 'showtime_id': 30, 'seat_code': 'R6-6'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.653100+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.653565+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 30", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.655042+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.655509+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.655714+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.74s ago] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.658213+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 30, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.658513+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.659253+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 30, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.660763+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.661522+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.661936+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.7s ago] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.664184+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.664653+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.7s ago] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.666405+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.670098+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.670947+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.671372+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.77s ago] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.673779+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 30 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.674128+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.675331+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.675760+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 30: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.676337+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.677568+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.677813+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 30", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.678118+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.679437+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.681436+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.682211+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.682879+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.69s ago] {'actor_id': 60, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 30, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 30, \"user_id\": 60, \"showtime_id\": 30, \"seat_code\": \"R6-6\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 37, 23, 681651, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.685213+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.689939+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.690684+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.690974+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.69s ago] {'pk_1': 37}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.693593+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.695153+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.696345+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.101s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.697356+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:25.742965+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "20212ae3-950b-408f-9191-eb33421f5ab6"}
{"timestamp": "2025-12-29T13:37:25.745345+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "20212ae3-950b-408f-9191-eb33421f5ab6"}
{"timestamp": "2025-12-29T13:37:25.745915+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "20212ae3-950b-408f-9191-eb33421f5ab6"}
{"timestamp": "2025-12-29T13:37:25.746267+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 25.9s ago] {'pk_1': 60}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "20212ae3-950b-408f-9191-eb33421f5ab6"}
{"timestamp": "2025-12-29T13:37:25.749066+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "20212ae3-950b-408f-9191-eb33421f5ab6"}
{"timestamp": "2025-12-29T13:37:25.749549+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.7s ago] {'user_id_1': 60}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "20212ae3-950b-408f-9191-eb33421f5ab6"}
{"timestamp": "2025-12-29T13:37:25.751667+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.009s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "20212ae3-950b-408f-9191-eb33421f5ab6"}
{"timestamp": "2025-12-29T13:37:25.752551+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "20212ae3-950b-408f-9191-eb33421f5ab6"}
{"timestamp": "2025-12-29T13:37:27.804980+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/order/30/initiate", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "5afcdf2c-96e9-4001-a500-d293afedac72"}
{"timestamp": "2025-12-29T13:37:27.807697+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "5afcdf2c-96e9-4001-a500-d293afedac72"}
{"timestamp": "2025-12-29T13:37:27.808524+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5afcdf2c-96e9-4001-a500-d293afedac72"}
{"timestamp": "2025-12-29T13:37:27.809006+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 27.96s ago] {'pk_1': 60}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5afcdf2c-96e9-4001-a500-d293afedac72"}
{"timestamp": "2025-12-29T13:37:27.812769+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5afcdf2c-96e9-4001-a500-d293afedac72"}
{"timestamp": "2025-12-29T13:37:27.813280+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 27.85s ago] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5afcdf2c-96e9-4001-a500-d293afedac72"}
{"timestamp": "2025-12-29T13:37:27.815914+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO payment_attempts (order_id, amount_attempted, status, final_amount, failure_reason, provider_payment_id, created_at) VALUES (%(order_id)s, %(amount_attempted)s, %(status)s, %(final_amount)s, %(failure_reason)s, %(provider_payment_id)s, %(created_at)s) RETURNING payment_attempts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5afcdf2c-96e9-4001-a500-d293afedac72"}
{"timestamp": "2025-12-29T13:37:27.816513+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.7s ago] {'order_id': 30, 'amount_attempted': 1000, 'status': 'PENDING', 'final_amount': 1000, 'failure_reason': None, 'provider_payment_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 37, 27, 815412, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5afcdf2c-96e9-4001-a500-d293afedac72"}
{"timestamp": "2025-12-29T13:37:27.818389+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "5afcdf2c-96e9-4001-a500-d293afedac72"}
{"timestamp": "2025-12-29T13:37:27.823042+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "5afcdf2c-96e9-4001-a500-d293afedac72"}
{"timestamp": "2025-12-29T13:37:27.823591+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5afcdf2c-96e9-4001-a500-d293afedac72"}
{"timestamp": "2025-12-29T13:37:27.823886+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.69s ago] {'pk_1': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5afcdf2c-96e9-4001-a500-d293afedac72"}
{"timestamp": "2025-12-29T13:37:27.826713+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5afcdf2c-96e9-4001-a500-d293afedac72"}
{"timestamp": "2025-12-29T13:37:27.827150+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.69s ago] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5afcdf2c-96e9-4001-a500-d293afedac72"}
{"timestamp": "2025-12-29T13:37:27.828935+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.pending with payload: {'payment_attempt_id': 20, 'order_id': 30, 'amount_attempted': 1000, 'final_amount': 1000, 'user_id': 60}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "5afcdf2c-96e9-4001-a500-d293afedac72"}
{"timestamp": "2025-12-29T13:37:27.829996+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.pending to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "5afcdf2c-96e9-4001-a500-d293afedac72"}
{"timestamp": "2025-12-29T13:37:27.830237+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: payment.pending", "module": "event_bus", "function": "publish", "line": 31, "request_id": "5afcdf2c-96e9-4001-a500-d293afedac72"}
{"timestamp": "2025-12-29T13:37:27.831400+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/order/30/initiate \u2192 200 (0.027s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "5afcdf2c-96e9-4001-a500-d293afedac72"}
{"timestamp": "2025-12-29T13:37:27.832277+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "5afcdf2c-96e9-4001-a500-d293afedac72"}
{"timestamp": "2025-12-29T13:37:29.879923+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/20/confirm", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.882493+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.883131+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.883517+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 30.04s ago] {'pk_1': 60}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.886443+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id AS payment_attempts_id, payment_attempts.order_id AS payment_attempts_order_id, payment_attempts.amount_attempted AS payment_attempts_amount_attempted, payment_attempts.status AS payment_attempts_status, payment_attempts.final_amount AS payment_attempts_final_amount, payment_attempts.failure_reason AS payment_attempts_failure_reason, payment_attempts.provider_payment_id AS payment_attempts_provider_payment_id, payment_attempts.created_at AS payment_attempts_created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.886940+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.69s ago] {'pk_1': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.889513+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.889995+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.69s ago] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.892018+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE payment_attempts SET status=%(status)s, provider_payment_id=%(provider_payment_id)s WHERE payment_attempts.id = %(payment_attempts_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.892425+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.69s ago] {'status': 'SUCCEEDED', 'provider_payment_id': 'mock_payment_20', 'payment_attempts_id': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.894957+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.899400+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.900120+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.900562+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 25.77s ago] {'pk_1': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.903385+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.903827+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 25.77s ago] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.905331+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.succeeded with payload: {'payment_attempt_id': 20, 'order_id': 30, 'final_amount': 1000.0, 'user_id': 60}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.906674+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.succeeded to 4 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.907525+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.909938+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.910869+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.911441+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 29.95s ago] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.914327+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET is_completed=%(is_completed)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.914848+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.69s ago] {'is_completed': True, 'orders_id': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.916877+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.921211+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.921908+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.922302+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 30.02s ago] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.925163+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.completed with payload: {'order_id': 30}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.925398+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.completed to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.925626+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: order.completed", "module": "event_bus", "function": "publish", "line": 31, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.926029+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.927383+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.929822+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.930521+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.930969+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 43.15s ago] {'user_id_1': 60, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.934227+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.935373+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.937474+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.937982+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.938601+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 29.95s ago] {'actor_id': 60, 'actor_type': 'user', 'action': 'payment.succeeded', 'target_id': 30, 'target_type': 'order', 'payload': '{\"payment_attempt_id\": 20, \"order_id\": 30, \"final_amount\": 1000.0, \"user_id\": 60}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 37, 29, 937667, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.941176+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.945515+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.946498+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.946858+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 29.95s ago] {'pk_1': 38}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.948847+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.949874+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.951351+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/20/confirm \u2192 200 (0.072s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.952153+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:32.002790+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/30/cancel", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.005160+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.005701+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.006071+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.16s ago] {'pk_1': 60}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.009335+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id AS reservations_id, reservations.user_id AS reservations_user_id, reservations.showtime_id AS reservations_showtime_id, reservations.seat_code AS reservations_seat_code, reservations.status AS reservations_status, reservations.created_at AS reservations_created_at, reservations.expires_at AS reservations_expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.009878+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.012186+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE reservations SET status=%(status)s, expires_at=%(expires_at)s WHERE reservations.id = %(reservations_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.012578+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'status': 'CANCELLED', 'expires_at': None, 'reservations_id': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.014249+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.019117+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.019735+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.020134+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.16s ago] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.022092+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.cancelled with payload: {'reservation_id': 30}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.023393+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.cancelled to 4 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.023897+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_cancelled completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.024215+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Order handler received reservation.cancelled: {'reservation_id': 30}", "module": "handlers", "function": "on_reservation_cancelled", "line": 50, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.025921+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.027032+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.reservation_id = %(reservation_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.027544+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'reservation_id_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.030082+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.cancelled with payload: {'order_id': 30}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.030372+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.cancelled to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.030619+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: order.cancelled", "module": "event_bus", "function": "publish", "line": 31, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.031057+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.032271+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_cancelled completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.034918+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.035525+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.reservation_id = %(reservation_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.035829+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.009074s ago] {'reservation_id_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.039248+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.order_id = %(order_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.039798+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'order_id_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.042619+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT refunds.id, refunds.reservation_id, refunds.payment_attempt_id, refunds.amount, refunds.reason, refunds.created_at, refunds.status \nFROM refunds \nWHERE refunds.reservation_id = %(reservation_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.042956+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'reservation_id_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.045563+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO refunds (reservation_id, payment_attempt_id, amount, reason, created_at, status) VALUES (%(reservation_id)s, %(payment_attempt_id)s, %(amount)s, %(reason)s, %(created_at)s, %(status)s) RETURNING refunds.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.046037+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'reservation_id': 30, 'payment_attempt_id': 20, 'amount': 1000.0, 'reason': 'reservation_cancelled', 'created_at': datetime.datetime(2025, 12, 29, 13, 37, 32, 45118, tzinfo=datetime.timezone.utc), 'status': 'ISSUED'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.048650+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.053160+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.054332+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT refunds.id, refunds.reservation_id, refunds.payment_attempt_id, refunds.amount, refunds.reason, refunds.created_at, refunds.status \nFROM refunds \nWHERE refunds.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.054739+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'pk_1': 2}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.057807+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id AS payment_attempts_id, payment_attempts.order_id AS payment_attempts_order_id, payment_attempts.amount_attempted AS payment_attempts_amount_attempted, payment_attempts.status AS payment_attempts_status, payment_attempts.final_amount AS payment_attempts_final_amount, payment_attempts.failure_reason AS payment_attempts_failure_reason, payment_attempts.provider_payment_id AS payment_attempts_provider_payment_id, payment_attempts.created_at AS payment_attempts_created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.058212+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'pk_1': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.059822+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: refund.issued with payload: {'refund_id': 2, 'reservation_id': 30, 'payment_attempt_id': 20, 'amount': 1000.0}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.060425+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.065100+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.event_bus", "message": "\u274c Event handler failed: reservation.cancelled -> on_reservation_cancelled: asyncio.run() cannot be called from a running event loop", "module": "event_bus", "function": "_safe_invoke", "line": 45, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\event_bus.py\", line 42, in _safe_invoke\n    await handler(payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\refund\\handlers.py\", line 34, in on_reservation_cancelled\n    issue_refund_from_event(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        db,\n        ^^^\n    ...<2 lines>...\n        reason=\"reservation_cancelled\"\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\refund\\service.py\", line 58, in issue_refund_from_event\n    publish_event(event[\"type\"], event[\"payload\"])\n    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\shared\\services\\event_publisher.py\", line 17, in publish_event\n    asyncio.run(event_bus.publish(event_type, payload))\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 191, in run\n    raise RuntimeError(\n        \"asyncio.run() cannot be called from a running event loop\")\nRuntimeError: asyncio.run() cannot be called from a running event loop"}
{"timestamp": "2025-12-29T13:37:32.070703+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.071150+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.071419+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.08s ago] {'actor_id': None, 'actor_type': 'user', 'action': 'reservation.cancelled', 'target_id': 30, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 30}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 37, 32, 70885, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.073650+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.090618+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.event_bus", "message": "\u274c Event handler failed: reservation.cancelled -> on_reservation_cancelled: (psycopg2.errors.NotNullViolation) null value in column \"actor_id\" of relation \"audit_logs\" violates not-null constraint\nDETAIL:  Failing row contains (39, null, user, reservation.cancelled, 30, reservation, {\"reservation_id\": 30}, null, 2025-12-29 13:37:32.070885+00).\n\n[SQL: INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id]\n[parameters: {'actor_id': None, 'actor_type': 'user', 'action': 'reservation.cancelled', 'target_id': 30, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 30}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 37, 32, 70885, tzinfo=datetime.timezone.utc)}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)", "module": "event_bus", "function": "_safe_invoke", "line": 45, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\npsycopg2.errors.NotNullViolation: null value in column \"actor_id\" of relation \"audit_logs\" violates not-null constraint\nDETAIL:  Failing row contains (39, null, user, reservation.cancelled, 30, reservation, {\"reservation_id\": 30}, null, 2025-12-29 13:37:32.070885+00).\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\event_bus.py\", line 42, in _safe_invoke\n    await handler(payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\audit\\handlers.py\", line 28, in on_reservation_cancelled\n    write_audit_log(\n    ~~~~~~~~~~~~~~~^\n        db=db,\n        ^^^^^^\n    ...<5 lines>...\n        payload=payload,\n        ^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\audit\\service.py\", line 31, in write_audit_log\n    return repo.create(db, entry)\n           ~~~~~~~~~~~^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\audit\\repository.py\", line 17, in create\n    db.commit()\n    ~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2030, in commit\n    trans.commit(_to_root=True)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^\n  File \"<string>\", line 2, in commit\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\state_changes.py\", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 1311, in commit\n    self._prepare_impl()\n    ~~~~~~~~~~~~~~~~~~^^\n  File \"<string>\", line 2, in _prepare_impl\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\state_changes.py\", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 1286, in _prepare_impl\n    self.session.flush()\n    ~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 4331, in flush\n    self._flush(objects)\n    ~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 4466, in _flush\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 4427, in _flush\n    flush_context.execute()\n    ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py\", line 466, in execute\n    rec.execute(self)\n    ~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py\", line 642, in execute\n    util.preloaded.orm_persistence.save_obj(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self.mapper,\n        ^^^^^^^^^^^^\n        uow.states_for_mapper_hierarchy(self.mapper, False, False),\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        uow,\n        ^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\persistence.py\", line 93, in save_obj\n    _emit_insert_statements(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        base_mapper,\n        ^^^^^^^^^^^^\n    ...<3 lines>...\n        insert,\n        ^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\persistence.py\", line 1233, in _emit_insert_statements\n    result = connection.execute(\n        statement,\n        params,\n        execution_options=execution_options,\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\nsqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column \"actor_id\" of relation \"audit_logs\" violates not-null constraint\nDETAIL:  Failing row contains (39, null, user, reservation.cancelled, 30, reservation, {\"reservation_id\": 30}, null, 2025-12-29 13:37:32.070885+00).\n\n[SQL: INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id]\n[parameters: {'actor_id': None, 'actor_type': 'user', 'action': 'reservation.cancelled', 'target_id': 30, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 30}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 37, 32, 70885, tzinfo=datetime.timezone.utc)}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)"}
{"timestamp": "2025-12-29T13:37:32.100750+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/30/cancel \u2192 200 (0.098s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.101798+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:34.140601+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.143472+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.144132+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.144774+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.63s ago] {'email_1': 'test_admin_1767015452.1023808@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.349512+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.349962+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.61s ago] {'email': 'test_admin_1767015452.1023808@example.com', 'hashed_password': '$2b$12$KnFNfGGSLGOFQXndCBNYQ.TyLLva4hu/TAQ99eZ4B0nSo7eyq3ImW', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.351717+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.356797+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.357519+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.357890+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.6s ago] {'pk_1': 61}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.359934+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 61, 'email': 'test_admin_1767015452.1023808@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.361093+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.363518+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.364082+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.364355+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.59s ago] {'user_id_1': 61, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.366553+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.367083+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.59s ago] {'user_id': 61, 'name': None, 'email': 'test_admin_1767015452.1023808@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.369202+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.374082+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.374718+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.375064+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.58s ago] {'pk_1': 61}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.377415+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 61, 'user_id': 61, 'email': 'test_admin_1767015452.1023808@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.377671+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.377893+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.378256+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.379435+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.380766+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.381248+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.87s ago] {'email_1': 'test_admin_1767015452.1023808@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.585565+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 61, 'email': 'test_admin_1767015452.1023808@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.586859+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.587044+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.588108+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.448s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.588978+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:36.635355+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "92d6bc8b-b48b-4674-9907-0a8a6b4d4078"}
{"timestamp": "2025-12-29T13:37:36.638246+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "92d6bc8b-b48b-4674-9907-0a8a6b4d4078"}
{"timestamp": "2025-12-29T13:37:36.638820+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "92d6bc8b-b48b-4674-9907-0a8a6b4d4078"}
{"timestamp": "2025-12-29T13:37:36.639053+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.57s ago] {'title_1': 'Test Movie 1767015452.1023808'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "92d6bc8b-b48b-4674-9907-0a8a6b4d4078"}
{"timestamp": "2025-12-29T13:37:36.641451+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "92d6bc8b-b48b-4674-9907-0a8a6b4d4078"}
{"timestamp": "2025-12-29T13:37:36.641902+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.57s ago] {'title': 'Test Movie 1767015452.1023808', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "92d6bc8b-b48b-4674-9907-0a8a6b4d4078"}
{"timestamp": "2025-12-29T13:37:36.643644+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "92d6bc8b-b48b-4674-9907-0a8a6b4d4078"}
{"timestamp": "2025-12-29T13:37:36.648474+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "92d6bc8b-b48b-4674-9907-0a8a6b4d4078"}
{"timestamp": "2025-12-29T13:37:36.649246+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "92d6bc8b-b48b-4674-9907-0a8a6b4d4078"}
{"timestamp": "2025-12-29T13:37:36.650131+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.57s ago] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "92d6bc8b-b48b-4674-9907-0a8a6b4d4078"}
{"timestamp": "2025-12-29T13:37:36.652019+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 40}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "92d6bc8b-b48b-4674-9907-0a8a6b4d4078"}
{"timestamp": "2025-12-29T13:37:36.652978+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "92d6bc8b-b48b-4674-9907-0a8a6b4d4078"}
{"timestamp": "2025-12-29T13:37:36.653113+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "92d6bc8b-b48b-4674-9907-0a8a6b4d4078"}
{"timestamp": "2025-12-29T13:37:36.654372+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.019s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "92d6bc8b-b48b-4674-9907-0a8a6b4d4078"}
{"timestamp": "2025-12-29T13:37:36.655287+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "92d6bc8b-b48b-4674-9907-0a8a6b4d4078"}
{"timestamp": "2025-12-29T13:37:38.695069+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "4a82973f-cd38-45bc-b4dd-0bd952837b37"}
{"timestamp": "2025-12-29T13:37:38.698096+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "4a82973f-cd38-45bc-b4dd-0bd952837b37"}
{"timestamp": "2025-12-29T13:37:38.698662+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4a82973f-cd38-45bc-b4dd-0bd952837b37"}
{"timestamp": "2025-12-29T13:37:38.699019+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.58s ago] {'name_1': 'Test Layout 1767015452.1023808'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4a82973f-cd38-45bc-b4dd-0bd952837b37"}
{"timestamp": "2025-12-29T13:37:38.701815+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4a82973f-cd38-45bc-b4dd-0bd952837b37"}
{"timestamp": "2025-12-29T13:37:38.702264+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.58s ago] {'name': 'Test Layout 1767015452.1023808', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4a82973f-cd38-45bc-b4dd-0bd952837b37"}
{"timestamp": "2025-12-29T13:37:38.704246+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "4a82973f-cd38-45bc-b4dd-0bd952837b37"}
{"timestamp": "2025-12-29T13:37:38.709349+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "4a82973f-cd38-45bc-b4dd-0bd952837b37"}
{"timestamp": "2025-12-29T13:37:38.710110+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4a82973f-cd38-45bc-b4dd-0bd952837b37"}
{"timestamp": "2025-12-29T13:37:38.710668+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.58s ago] {'pk_1': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4a82973f-cd38-45bc-b4dd-0bd952837b37"}
{"timestamp": "2025-12-29T13:37:38.712863+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 39}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "4a82973f-cd38-45bc-b4dd-0bd952837b37"}
{"timestamp": "2025-12-29T13:37:38.714055+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "4a82973f-cd38-45bc-b4dd-0bd952837b37"}
{"timestamp": "2025-12-29T13:37:38.714259+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "4a82973f-cd38-45bc-b4dd-0bd952837b37"}
{"timestamp": "2025-12-29T13:37:38.715436+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.021s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "4a82973f-cd38-45bc-b4dd-0bd952837b37"}
{"timestamp": "2025-12-29T13:37:38.716376+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "4a82973f-cd38-45bc-b4dd-0bd952837b37"}
{"timestamp": "2025-12-29T13:37:40.743746+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b62c2ccb-ce12-41d1-a849-7a24675dd6de"}
{"timestamp": "2025-12-29T13:37:40.746452+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b62c2ccb-ce12-41d1-a849-7a24675dd6de"}
{"timestamp": "2025-12-29T13:37:40.747020+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b62c2ccb-ce12-41d1-a849-7a24675dd6de"}
{"timestamp": "2025-12-29T13:37:40.747339+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.55s ago] {'name_1': 'Test Screen 1767015452.1023808', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b62c2ccb-ce12-41d1-a849-7a24675dd6de"}
{"timestamp": "2025-12-29T13:37:40.750141+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b62c2ccb-ce12-41d1-a849-7a24675dd6de"}
{"timestamp": "2025-12-29T13:37:40.750662+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.55s ago] {'id_1': 39, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b62c2ccb-ce12-41d1-a849-7a24675dd6de"}
{"timestamp": "2025-12-29T13:37:40.752823+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b62c2ccb-ce12-41d1-a849-7a24675dd6de"}
{"timestamp": "2025-12-29T13:37:40.753140+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.54s ago] {'name': 'Test Screen 1767015452.1023808', 'capacity': 150, 'seat_layout_id': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b62c2ccb-ce12-41d1-a849-7a24675dd6de"}
{"timestamp": "2025-12-29T13:37:40.755018+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b62c2ccb-ce12-41d1-a849-7a24675dd6de"}
{"timestamp": "2025-12-29T13:37:40.759561+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b62c2ccb-ce12-41d1-a849-7a24675dd6de"}
{"timestamp": "2025-12-29T13:37:40.760134+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b62c2ccb-ce12-41d1-a849-7a24675dd6de"}
{"timestamp": "2025-12-29T13:37:40.760483+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.54s ago] {'pk_1': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b62c2ccb-ce12-41d1-a849-7a24675dd6de"}
{"timestamp": "2025-12-29T13:37:40.762637+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 39}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "b62c2ccb-ce12-41d1-a849-7a24675dd6de"}
{"timestamp": "2025-12-29T13:37:40.763908+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b62c2ccb-ce12-41d1-a849-7a24675dd6de"}
{"timestamp": "2025-12-29T13:37:40.764198+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "b62c2ccb-ce12-41d1-a849-7a24675dd6de"}
{"timestamp": "2025-12-29T13:37:40.765324+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b62c2ccb-ce12-41d1-a849-7a24675dd6de"}
{"timestamp": "2025-12-29T13:37:40.766217+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b62c2ccb-ce12-41d1-a849-7a24675dd6de"}
{"timestamp": "2025-12-29T13:37:42.809061+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:42.811530+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:42.812113+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:42.812459+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.55s ago] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:42.815046+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:42.815429+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.55s ago] {'pk_1': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:42.817497+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:42.817881+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.55s ago] {'screen_id_1': 39, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:42.819957+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:42.820433+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.55s ago] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 40, 'screen_id': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:42.822549+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:42.827085+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:42.827918+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:42.828338+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.55s ago] {'pk_1': 31}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:42.830980+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:42.831323+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.54s ago] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:42.833134+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:42.833472+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.54s ago] {'pk_1': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:42.834986+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 31}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:42.836005+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:42.836251+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:42.837270+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.028s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:42.838170+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:44.886395+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:44.889033+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:44.889655+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:44.890137+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.38s ago] {'email_1': 'test_failpay_1767015462.8380132@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.099499+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.099985+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.36s ago] {'email': 'test_failpay_1767015462.8380132@example.com', 'hashed_password': '$2b$12$c3mK2pRKBuxqZMjeKuWwCe0RkltCYGnW2SObSnjKbjjprpGwTNVb2', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.101727+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.105890+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.106684+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.107166+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.35s ago] {'pk_1': 62}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.109109+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 62, 'email': 'test_failpay_1767015462.8380132@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.109993+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.111820+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.112406+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.112738+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.34s ago] {'user_id_1': 62, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.115051+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.115302+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.33s ago] {'user_id': 62, 'name': None, 'email': 'test_failpay_1767015462.8380132@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.116871+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.121526+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.122011+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.122213+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.33s ago] {'pk_1': 62}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.123993+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 62, 'user_id': 62, 'email': 'test_failpay_1767015462.8380132@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.124171+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.124652+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.125029+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.126199+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.127250+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.127482+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.61s ago] {'email_1': 'test_failpay_1767015462.8380132@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.333619+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 62, 'email': 'test_failpay_1767015462.8380132@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.334770+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.334983+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.336085+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.450s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.337065+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:47.371481+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.374133+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.374780+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.375225+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.53s ago] {'pk_1': 62}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.378206+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.378629+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.53s ago] {'showtime_id_1': 31, 'seat_code_1': 'R7-7', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.380701+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.381197+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.53s ago] {'user_id': 62, 'showtime_id': 31, 'seat_code': 'R7-7', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 13, 37, 47, 380250, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 47, 47, 379985, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.383417+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.387963+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.388592+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.389067+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.53s ago] {'pk_1': 31}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.391064+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 31, 'user_id': 62, 'showtime_id': 31, 'seat_code': 'R7-7'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.392171+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.394216+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.394831+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.395114+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.54s ago] {'showtime_id_1': 31, 'seat_code_1': 'R7-7', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.397679+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.398055+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.52s ago] {'seat_code': 'R7-7', 'showtime_id': 31, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.400020+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.400276+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.52s ago] {'status': 'LOCKED', 'locked_by_user_id': 62, 'lock_expires_at': datetime.datetime(2025, 12, 29, 13, 47, 47, 399551, tzinfo=datetime.timezone.utc), 'seat_locks_id': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.402175+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.406045+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.406667+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.406972+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.52s ago] {'pk_1': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.408822+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 31, 'seat_code': 'R7-7', 'user_id': 62, 'expires_at': '2025-12-29T13:47:47.399551+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.408982+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.409106+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.409454+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.410485+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.411058+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 31, 'user_id': 62, 'showtime_id': 31, 'seat_code': 'R7-7'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.411241+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 31", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.412688+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.413383+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.413671+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.52s ago] {'user_id': 62, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 31}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.415815+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.419636+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.420252+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.420538+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.52s ago] {'pk_1': 31}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.422415+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 31, 'reservation_id': 31, 'user_id': 62, 'showtime_id': 31, 'seat_code': 'R7-7'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.422571+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.423098+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 31", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.424542+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.425062+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.425607+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.51s ago] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.428872+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 31, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.429157+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.429722+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 31, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.431739+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.432463+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.432866+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.47s ago] {'pk_1': 31}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.435698+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.436084+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.47s ago] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 31}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.438047+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.442223+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.442682+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.442882+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.54s ago] {'pk_1': 31}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.445048+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 31 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.445306+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.446342+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.446499+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 31: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.446725+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.447872+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.448042+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 31", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.448252+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.449319+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.450811+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.451329+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.451617+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.46s ago] {'actor_id': 62, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 31, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 31, \"user_id\": 62, \"showtime_id\": 31, \"seat_code\": \"R7-7\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 37, 47, 451012, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.453786+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.457555+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.458089+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.458335+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.46s ago] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.460365+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.461581+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.462796+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.091s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.463695+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:49.513334+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "3c643832-5068-429a-bc35-1aec135c07bb"}
{"timestamp": "2025-12-29T13:37:49.515813+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3c643832-5068-429a-bc35-1aec135c07bb"}
{"timestamp": "2025-12-29T13:37:49.516513+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3c643832-5068-429a-bc35-1aec135c07bb"}
{"timestamp": "2025-12-29T13:37:49.516974+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 49.67s ago] {'pk_1': 62}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3c643832-5068-429a-bc35-1aec135c07bb"}
{"timestamp": "2025-12-29T13:37:49.519791+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3c643832-5068-429a-bc35-1aec135c07bb"}
{"timestamp": "2025-12-29T13:37:49.520280+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.47s ago] {'user_id_1': 62}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3c643832-5068-429a-bc35-1aec135c07bb"}
{"timestamp": "2025-12-29T13:37:49.522593+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.009s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "3c643832-5068-429a-bc35-1aec135c07bb"}
{"timestamp": "2025-12-29T13:37:49.523516+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "3c643832-5068-429a-bc35-1aec135c07bb"}
{"timestamp": "2025-12-29T13:37:51.581440+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/order/31/initiate", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "06a59b0b-e295-4577-8e95-8abcb18fe3bb"}
{"timestamp": "2025-12-29T13:37:51.584048+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "06a59b0b-e295-4577-8e95-8abcb18fe3bb"}
{"timestamp": "2025-12-29T13:37:51.584652+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "06a59b0b-e295-4577-8e95-8abcb18fe3bb"}
{"timestamp": "2025-12-29T13:37:51.584976+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 51.74s ago] {'pk_1': 62}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "06a59b0b-e295-4577-8e95-8abcb18fe3bb"}
{"timestamp": "2025-12-29T13:37:51.587857+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "06a59b0b-e295-4577-8e95-8abcb18fe3bb"}
{"timestamp": "2025-12-29T13:37:51.588276+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 51.62s ago] {'pk_1': 31}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "06a59b0b-e295-4577-8e95-8abcb18fe3bb"}
{"timestamp": "2025-12-29T13:37:51.590481+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO payment_attempts (order_id, amount_attempted, status, final_amount, failure_reason, provider_payment_id, created_at) VALUES (%(order_id)s, %(amount_attempted)s, %(status)s, %(final_amount)s, %(failure_reason)s, %(provider_payment_id)s, %(created_at)s) RETURNING payment_attempts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "06a59b0b-e295-4577-8e95-8abcb18fe3bb"}
{"timestamp": "2025-12-29T13:37:51.591070+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.47s ago] {'order_id': 31, 'amount_attempted': 1000, 'status': 'PENDING', 'final_amount': 1000, 'failure_reason': None, 'provider_payment_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 37, 51, 589904, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "06a59b0b-e295-4577-8e95-8abcb18fe3bb"}
{"timestamp": "2025-12-29T13:37:51.593037+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "06a59b0b-e295-4577-8e95-8abcb18fe3bb"}
{"timestamp": "2025-12-29T13:37:51.598425+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "06a59b0b-e295-4577-8e95-8abcb18fe3bb"}
{"timestamp": "2025-12-29T13:37:51.599133+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "06a59b0b-e295-4577-8e95-8abcb18fe3bb"}
{"timestamp": "2025-12-29T13:37:51.599463+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.47s ago] {'pk_1': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "06a59b0b-e295-4577-8e95-8abcb18fe3bb"}
{"timestamp": "2025-12-29T13:37:51.601835+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "06a59b0b-e295-4577-8e95-8abcb18fe3bb"}
{"timestamp": "2025-12-29T13:37:51.602131+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.47s ago] {'pk_1': 31}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "06a59b0b-e295-4577-8e95-8abcb18fe3bb"}
{"timestamp": "2025-12-29T13:37:51.603559+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.pending with payload: {'payment_attempt_id': 21, 'order_id': 31, 'amount_attempted': 1000, 'final_amount': 1000, 'user_id': 62}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "06a59b0b-e295-4577-8e95-8abcb18fe3bb"}
{"timestamp": "2025-12-29T13:37:51.604847+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.pending to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "06a59b0b-e295-4577-8e95-8abcb18fe3bb"}
{"timestamp": "2025-12-29T13:37:51.605078+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: payment.pending", "module": "event_bus", "function": "publish", "line": 31, "request_id": "06a59b0b-e295-4577-8e95-8abcb18fe3bb"}
{"timestamp": "2025-12-29T13:37:51.606257+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/order/31/initiate \u2192 200 (0.025s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "06a59b0b-e295-4577-8e95-8abcb18fe3bb"}
{"timestamp": "2025-12-29T13:37:51.607113+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "06a59b0b-e295-4577-8e95-8abcb18fe3bb"}
{"timestamp": "2025-12-29T13:37:53.643334+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /admin/payments/21/fail", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "bcc6a970-0cf1-4bae-9d26-944b5e2d4d4f"}
{"timestamp": "2025-12-29T13:37:53.645659+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bcc6a970-0cf1-4bae-9d26-944b5e2d4d4f"}
{"timestamp": "2025-12-29T13:37:53.646354+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bcc6a970-0cf1-4bae-9d26-944b5e2d4d4f"}
{"timestamp": "2025-12-29T13:37:53.646710+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 53.8s ago] {'pk_1': 61}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bcc6a970-0cf1-4bae-9d26-944b5e2d4d4f"}
{"timestamp": "2025-12-29T13:37:53.649695+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "bcc6a970-0cf1-4bae-9d26-944b5e2d4d4f"}
{"timestamp": "2025-12-29T13:37:53.651261+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /admin/payments/21/fail \u2192 403 (0.008s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "bcc6a970-0cf1-4bae-9d26-944b5e2d4d4f"}
{"timestamp": "2025-12-29T13:37:55.691615+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.694433+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.695099+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.695512+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.18s ago] {'email_1': 'test_admin_1767015473.6523@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.901241+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.901706+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.16s ago] {'email': 'test_admin_1767015473.6523@example.com', 'hashed_password': '$2b$12$Ji06TPUJyr.IK6Tmx2JLZOHYZce32ppvH8fCA.Y8QO0w5kTwic4WS', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.903513+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.908043+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.908720+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.909111+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.16s ago] {'pk_1': 63}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.911284+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 63, 'email': 'test_admin_1767015473.6523@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.912252+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.914099+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.914607+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.914821+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.14s ago] {'user_id_1': 63, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.916980+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.917214+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.14s ago] {'user_id': 63, 'name': None, 'email': 'test_admin_1767015473.6523@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.918849+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.923178+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.923942+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.924497+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.13s ago] {'pk_1': 63}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.926708+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 63, 'user_id': 63, 'email': 'test_admin_1767015473.6523@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.926961+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.927097+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.927343+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.928472+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.929725+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.930205+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.42s ago] {'email_1': 'test_admin_1767015473.6523@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:56.136047+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 63, 'email': 'test_admin_1767015473.6523@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:56.137243+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:56.137476+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:56.138678+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.447s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:56.139644+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:58.184696+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "8c75d2ed-0a32-442b-9932-2bf66a00cb49"}
{"timestamp": "2025-12-29T13:37:58.187452+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8c75d2ed-0a32-442b-9932-2bf66a00cb49"}
{"timestamp": "2025-12-29T13:37:58.188116+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8c75d2ed-0a32-442b-9932-2bf66a00cb49"}
{"timestamp": "2025-12-29T13:37:58.188564+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.12s ago] {'title_1': 'Test Movie 1767015473.6523'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8c75d2ed-0a32-442b-9932-2bf66a00cb49"}
{"timestamp": "2025-12-29T13:37:58.191359+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8c75d2ed-0a32-442b-9932-2bf66a00cb49"}
{"timestamp": "2025-12-29T13:37:58.191938+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.12s ago] {'title': 'Test Movie 1767015473.6523', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8c75d2ed-0a32-442b-9932-2bf66a00cb49"}
{"timestamp": "2025-12-29T13:37:58.193942+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "8c75d2ed-0a32-442b-9932-2bf66a00cb49"}
{"timestamp": "2025-12-29T13:37:58.199452+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8c75d2ed-0a32-442b-9932-2bf66a00cb49"}
{"timestamp": "2025-12-29T13:37:58.200305+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8c75d2ed-0a32-442b-9932-2bf66a00cb49"}
{"timestamp": "2025-12-29T13:37:58.200695+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.12s ago] {'pk_1': 41}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8c75d2ed-0a32-442b-9932-2bf66a00cb49"}
{"timestamp": "2025-12-29T13:37:58.203139+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 41}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "8c75d2ed-0a32-442b-9932-2bf66a00cb49"}
{"timestamp": "2025-12-29T13:37:58.204470+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "8c75d2ed-0a32-442b-9932-2bf66a00cb49"}
{"timestamp": "2025-12-29T13:37:58.204838+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "8c75d2ed-0a32-442b-9932-2bf66a00cb49"}
{"timestamp": "2025-12-29T13:37:58.205988+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.021s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "8c75d2ed-0a32-442b-9932-2bf66a00cb49"}
{"timestamp": "2025-12-29T13:37:58.206876+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "8c75d2ed-0a32-442b-9932-2bf66a00cb49"}
{"timestamp": "2025-12-29T13:38:00.245217+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b7c0582a-6e82-4c37-a3b8-f58105a88e82"}
{"timestamp": "2025-12-29T13:38:00.248223+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b7c0582a-6e82-4c37-a3b8-f58105a88e82"}
{"timestamp": "2025-12-29T13:38:00.248893+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b7c0582a-6e82-4c37-a3b8-f58105a88e82"}
{"timestamp": "2025-12-29T13:38:00.249396+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.13s ago] {'name_1': 'Test Layout 1767015473.6523'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b7c0582a-6e82-4c37-a3b8-f58105a88e82"}
{"timestamp": "2025-12-29T13:38:00.252039+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b7c0582a-6e82-4c37-a3b8-f58105a88e82"}
{"timestamp": "2025-12-29T13:38:00.252423+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.13s ago] {'name': 'Test Layout 1767015473.6523', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b7c0582a-6e82-4c37-a3b8-f58105a88e82"}
{"timestamp": "2025-12-29T13:38:00.254188+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b7c0582a-6e82-4c37-a3b8-f58105a88e82"}
{"timestamp": "2025-12-29T13:38:00.258568+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b7c0582a-6e82-4c37-a3b8-f58105a88e82"}
{"timestamp": "2025-12-29T13:38:00.259424+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b7c0582a-6e82-4c37-a3b8-f58105a88e82"}
{"timestamp": "2025-12-29T13:38:00.259981+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.13s ago] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b7c0582a-6e82-4c37-a3b8-f58105a88e82"}
{"timestamp": "2025-12-29T13:38:00.262298+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 40}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "b7c0582a-6e82-4c37-a3b8-f58105a88e82"}
{"timestamp": "2025-12-29T13:38:00.263239+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b7c0582a-6e82-4c37-a3b8-f58105a88e82"}
{"timestamp": "2025-12-29T13:38:00.263428+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "b7c0582a-6e82-4c37-a3b8-f58105a88e82"}
{"timestamp": "2025-12-29T13:38:00.264814+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.020s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b7c0582a-6e82-4c37-a3b8-f58105a88e82"}
{"timestamp": "2025-12-29T13:38:00.265758+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b7c0582a-6e82-4c37-a3b8-f58105a88e82"}
{"timestamp": "2025-12-29T13:38:02.307290+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "ef9a3246-6208-408c-ba7a-38c8e69dfa59"}
{"timestamp": "2025-12-29T13:38:02.310274+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ef9a3246-6208-408c-ba7a-38c8e69dfa59"}
{"timestamp": "2025-12-29T13:38:02.310974+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ef9a3246-6208-408c-ba7a-38c8e69dfa59"}
{"timestamp": "2025-12-29T13:38:02.311434+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.11s ago] {'name_1': 'Test Screen 1767015473.6523', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ef9a3246-6208-408c-ba7a-38c8e69dfa59"}
{"timestamp": "2025-12-29T13:38:02.314469+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ef9a3246-6208-408c-ba7a-38c8e69dfa59"}
{"timestamp": "2025-12-29T13:38:02.314857+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.11s ago] {'id_1': 40, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ef9a3246-6208-408c-ba7a-38c8e69dfa59"}
{"timestamp": "2025-12-29T13:38:02.316810+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ef9a3246-6208-408c-ba7a-38c8e69dfa59"}
{"timestamp": "2025-12-29T13:38:02.317211+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.11s ago] {'name': 'Test Screen 1767015473.6523', 'capacity': 150, 'seat_layout_id': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ef9a3246-6208-408c-ba7a-38c8e69dfa59"}
{"timestamp": "2025-12-29T13:38:02.319210+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "ef9a3246-6208-408c-ba7a-38c8e69dfa59"}
{"timestamp": "2025-12-29T13:38:02.324544+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ef9a3246-6208-408c-ba7a-38c8e69dfa59"}
{"timestamp": "2025-12-29T13:38:02.325274+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ef9a3246-6208-408c-ba7a-38c8e69dfa59"}
{"timestamp": "2025-12-29T13:38:02.325752+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.11s ago] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ef9a3246-6208-408c-ba7a-38c8e69dfa59"}
{"timestamp": "2025-12-29T13:38:02.328114+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 40}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "ef9a3246-6208-408c-ba7a-38c8e69dfa59"}
{"timestamp": "2025-12-29T13:38:02.329358+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "ef9a3246-6208-408c-ba7a-38c8e69dfa59"}
{"timestamp": "2025-12-29T13:38:02.329515+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "ef9a3246-6208-408c-ba7a-38c8e69dfa59"}
{"timestamp": "2025-12-29T13:38:02.330741+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.024s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "ef9a3246-6208-408c-ba7a-38c8e69dfa59"}
{"timestamp": "2025-12-29T13:38:02.331717+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ef9a3246-6208-408c-ba7a-38c8e69dfa59"}
{"timestamp": "2025-12-29T13:38:04.368007+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:04.370464+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:04.371066+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:04.371383+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.11s ago] {'pk_1': 41}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:04.373767+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:04.374238+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.11s ago] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:04.376210+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:04.376768+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.11s ago] {'screen_id_1': 40, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:04.378792+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:04.379240+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.11s ago] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 41, 'screen_id': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:04.381090+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:04.385596+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:04.386221+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:04.386626+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.1s ago] {'pk_1': 32}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:04.388992+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:04.389365+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.1s ago] {'pk_1': 41}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:04.391252+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:04.391722+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.1s ago] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:04.393257+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 32}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:04.394322+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:04.394490+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:04.395512+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.028s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:04.396401+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:06.446970+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.450100+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.450785+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.451187+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 79.94s ago] {'email_1': 'test_admincancel_1767015484.396258@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.655904+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.656429+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 79.92s ago] {'email': 'test_admincancel_1767015484.396258@example.com', 'hashed_password': '$2b$12$rChcOsuspF9Z4DLjj7filepoK.KLYChT3U7YZ5MngfdLRrO.xw4Vu', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.657912+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.662280+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.663008+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.663368+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 79.91s ago] {'pk_1': 64}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.665229+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 64, 'email': 'test_admincancel_1767015484.396258@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.666207+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.668214+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.668866+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.669146+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 79.89s ago] {'user_id_1': 64, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.671315+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.671620+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 79.89s ago] {'user_id': 64, 'name': None, 'email': 'test_admincancel_1767015484.396258@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.673142+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.676909+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.677528+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.677874+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 79.89s ago] {'pk_1': 64}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.679933+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 64, 'user_id': 64, 'email': 'test_admincancel_1767015484.396258@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.680106+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.680227+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.680444+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.681576+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.682641+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.683197+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 80.17s ago] {'email_1': 'test_admincancel_1767015484.396258@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.886353+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 64, 'email': 'test_admincancel_1767015484.396258@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.887495+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.887691+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.888763+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.442s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.889870+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:08.933692+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.936720+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.937356+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.937699+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.09s ago] {'pk_1': 64}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.940848+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.941336+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.09s ago] {'showtime_id_1': 32, 'seat_code_1': 'R8-8', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.943369+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.943698+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.09s ago] {'user_id': 64, 'showtime_id': 32, 'seat_code': 'R8-8', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 13, 38, 8, 943000, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 48, 8, 942736, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.945496+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.949971+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.950506+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.950758+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.09s ago] {'pk_1': 32}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.952790+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 32, 'user_id': 64, 'showtime_id': 32, 'seat_code': 'R8-8'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.953935+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.955992+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.956510+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.956914+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.11s ago] {'showtime_id_1': 32, 'seat_code_1': 'R8-8', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.959034+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.959400+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.09s ago] {'seat_code': 'R8-8', 'showtime_id': 32, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.961504+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.961746+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.08s ago] {'status': 'LOCKED', 'locked_by_user_id': 64, 'lock_expires_at': datetime.datetime(2025, 12, 29, 13, 48, 8, 961037, tzinfo=datetime.timezone.utc), 'seat_locks_id': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.963273+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.967248+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.967890+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.968149+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.08s ago] {'pk_1': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.969949+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 32, 'seat_code': 'R8-8', 'user_id': 64, 'expires_at': '2025-12-29T13:48:08.961037+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.970102+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.970224+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.970446+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.971368+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.971740+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 32, 'user_id': 64, 'showtime_id': 32, 'seat_code': 'R8-8'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.971884+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 32", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.973257+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.973999+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.974563+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.08s ago] {'user_id': 64, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 32}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.976814+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.980781+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.981220+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.981425+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.08s ago] {'pk_1': 32}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.983324+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 32, 'reservation_id': 32, 'user_id': 64, 'showtime_id': 32, 'seat_code': 'R8-8'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.983491+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.983802+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 32", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.985043+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.985446+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.985796+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.07s ago] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.988072+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 32, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.988230+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.988582+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 32, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.989967+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.990430+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.990816+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.03s ago] {'pk_1': 32}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.993185+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.993452+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.03s ago] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 32}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.995155+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.998775+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.999357+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.999605+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.1s ago] {'pk_1': 32}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:09.001882+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 32 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:09.002183+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:09.003210+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:09.003350+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 32: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:09.003736+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:09.004849+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:09.005003+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 32", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:09.005208+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:09.006224+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:09.007917+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:09.008400+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:09.008851+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.02s ago] {'actor_id': 64, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 32, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 32, \"user_id\": 64, \"showtime_id\": 32, \"seat_code\": \"R8-8\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 38, 9, 8108, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:09.011289+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:09.015139+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:09.015855+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:09.016232+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.02s ago] {'pk_1': 41}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:09.017964+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:09.018685+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:09.019732+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.086s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:09.020594+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:11.076911+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /admin/reservations/32/cancel", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "cde95bcd-2ee5-45ea-8e45-274cb669152e"}
{"timestamp": "2025-12-29T13:38:11.079303+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cde95bcd-2ee5-45ea-8e45-274cb669152e"}
{"timestamp": "2025-12-29T13:38:11.079879+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cde95bcd-2ee5-45ea-8e45-274cb669152e"}
{"timestamp": "2025-12-29T13:38:11.080217+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.23s ago] {'pk_1': 63}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cde95bcd-2ee5-45ea-8e45-274cb669152e"}
{"timestamp": "2025-12-29T13:38:11.082810+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "cde95bcd-2ee5-45ea-8e45-274cb669152e"}
{"timestamp": "2025-12-29T13:38:11.084345+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /admin/reservations/32/cancel \u2192 403 (0.007s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "cde95bcd-2ee5-45ea-8e45-274cb669152e"}
{"timestamp": "2025-12-29T13:38:13.138097+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.141154+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.141911+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.142314+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.63s ago] {'email_1': 'test_admin_1767015491.0854542@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.346839+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.347221+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.61s ago] {'email': 'test_admin_1767015491.0854542@example.com', 'hashed_password': '$2b$12$8qUKPVoAoiQeAMA6xxwJI.8nu2hGtJHCjBQkUCyYajkWufB.3PXWK', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.349044+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.353587+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.354296+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.354809+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.6s ago] {'pk_1': 65}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.357112+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 65, 'email': 'test_admin_1767015491.0854542@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.358212+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.360306+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.360969+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.361310+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.59s ago] {'user_id_1': 65, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.363944+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.364366+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.58s ago] {'user_id': 65, 'name': None, 'email': 'test_admin_1767015491.0854542@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.366151+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.370220+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.370912+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.371575+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.58s ago] {'pk_1': 65}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.373972+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 65, 'user_id': 65, 'email': 'test_admin_1767015491.0854542@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.374212+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.374407+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.374829+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.375970+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.377661+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.378208+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.87s ago] {'email_1': 'test_admin_1767015491.0854542@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.584056+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 65, 'email': 'test_admin_1767015491.0854542@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.585278+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.585482+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.586547+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.448s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.587648+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:15.638282+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b642638d-bbb9-4daf-86f9-3d373499f676"}
{"timestamp": "2025-12-29T13:38:15.642640+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b642638d-bbb9-4daf-86f9-3d373499f676"}
{"timestamp": "2025-12-29T13:38:15.643906+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b642638d-bbb9-4daf-86f9-3d373499f676"}
{"timestamp": "2025-12-29T13:38:15.645237+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.58s ago] {'title_1': 'Test Movie 1767015491.0854542'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b642638d-bbb9-4daf-86f9-3d373499f676"}
{"timestamp": "2025-12-29T13:38:15.649672+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b642638d-bbb9-4daf-86f9-3d373499f676"}
{"timestamp": "2025-12-29T13:38:15.650985+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.58s ago] {'title': 'Test Movie 1767015491.0854542', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b642638d-bbb9-4daf-86f9-3d373499f676"}
{"timestamp": "2025-12-29T13:38:15.653533+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b642638d-bbb9-4daf-86f9-3d373499f676"}
{"timestamp": "2025-12-29T13:38:15.659261+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b642638d-bbb9-4daf-86f9-3d373499f676"}
{"timestamp": "2025-12-29T13:38:15.660583+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b642638d-bbb9-4daf-86f9-3d373499f676"}
{"timestamp": "2025-12-29T13:38:15.661411+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.58s ago] {'pk_1': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b642638d-bbb9-4daf-86f9-3d373499f676"}
{"timestamp": "2025-12-29T13:38:15.664474+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 42}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "b642638d-bbb9-4daf-86f9-3d373499f676"}
{"timestamp": "2025-12-29T13:38:15.666380+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b642638d-bbb9-4daf-86f9-3d373499f676"}
{"timestamp": "2025-12-29T13:38:15.666972+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "b642638d-bbb9-4daf-86f9-3d373499f676"}
{"timestamp": "2025-12-29T13:38:15.669290+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.031s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b642638d-bbb9-4daf-86f9-3d373499f676"}
{"timestamp": "2025-12-29T13:38:15.671406+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b642638d-bbb9-4daf-86f9-3d373499f676"}
{"timestamp": "2025-12-29T13:38:17.711703+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "5a4d87d7-f83f-4659-96d1-6c38f2a703bf"}
{"timestamp": "2025-12-29T13:38:17.714466+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "5a4d87d7-f83f-4659-96d1-6c38f2a703bf"}
{"timestamp": "2025-12-29T13:38:17.715007+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5a4d87d7-f83f-4659-96d1-6c38f2a703bf"}
{"timestamp": "2025-12-29T13:38:17.715352+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.6s ago] {'name_1': 'Test Layout 1767015491.0854542'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5a4d87d7-f83f-4659-96d1-6c38f2a703bf"}
{"timestamp": "2025-12-29T13:38:17.717865+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5a4d87d7-f83f-4659-96d1-6c38f2a703bf"}
{"timestamp": "2025-12-29T13:38:17.718325+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.6s ago] {'name': 'Test Layout 1767015491.0854542', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5a4d87d7-f83f-4659-96d1-6c38f2a703bf"}
{"timestamp": "2025-12-29T13:38:17.720281+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "5a4d87d7-f83f-4659-96d1-6c38f2a703bf"}
{"timestamp": "2025-12-29T13:38:17.725111+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "5a4d87d7-f83f-4659-96d1-6c38f2a703bf"}
{"timestamp": "2025-12-29T13:38:17.726150+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5a4d87d7-f83f-4659-96d1-6c38f2a703bf"}
{"timestamp": "2025-12-29T13:38:17.726743+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.59s ago] {'pk_1': 41}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5a4d87d7-f83f-4659-96d1-6c38f2a703bf"}
{"timestamp": "2025-12-29T13:38:17.728987+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 41}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "5a4d87d7-f83f-4659-96d1-6c38f2a703bf"}
{"timestamp": "2025-12-29T13:38:17.730012+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "5a4d87d7-f83f-4659-96d1-6c38f2a703bf"}
{"timestamp": "2025-12-29T13:38:17.730225+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "5a4d87d7-f83f-4659-96d1-6c38f2a703bf"}
{"timestamp": "2025-12-29T13:38:17.731588+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.020s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "5a4d87d7-f83f-4659-96d1-6c38f2a703bf"}
{"timestamp": "2025-12-29T13:38:17.732564+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "5a4d87d7-f83f-4659-96d1-6c38f2a703bf"}
{"timestamp": "2025-12-29T13:38:19.768931+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "ef22fa46-4b0b-4df7-8e5f-2540da2fbd07"}
{"timestamp": "2025-12-29T13:38:19.771698+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ef22fa46-4b0b-4df7-8e5f-2540da2fbd07"}
{"timestamp": "2025-12-29T13:38:19.772368+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ef22fa46-4b0b-4df7-8e5f-2540da2fbd07"}
{"timestamp": "2025-12-29T13:38:19.772776+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.57s ago] {'name_1': 'Test Screen 1767015491.0854542', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ef22fa46-4b0b-4df7-8e5f-2540da2fbd07"}
{"timestamp": "2025-12-29T13:38:19.775424+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ef22fa46-4b0b-4df7-8e5f-2540da2fbd07"}
{"timestamp": "2025-12-29T13:38:19.776034+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.57s ago] {'id_1': 41, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ef22fa46-4b0b-4df7-8e5f-2540da2fbd07"}
{"timestamp": "2025-12-29T13:38:19.778231+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ef22fa46-4b0b-4df7-8e5f-2540da2fbd07"}
{"timestamp": "2025-12-29T13:38:19.778690+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.57s ago] {'name': 'Test Screen 1767015491.0854542', 'capacity': 150, 'seat_layout_id': 41}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ef22fa46-4b0b-4df7-8e5f-2540da2fbd07"}
{"timestamp": "2025-12-29T13:38:19.780751+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "ef22fa46-4b0b-4df7-8e5f-2540da2fbd07"}
{"timestamp": "2025-12-29T13:38:19.785362+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ef22fa46-4b0b-4df7-8e5f-2540da2fbd07"}
{"timestamp": "2025-12-29T13:38:19.785914+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ef22fa46-4b0b-4df7-8e5f-2540da2fbd07"}
{"timestamp": "2025-12-29T13:38:19.786235+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.57s ago] {'pk_1': 41}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ef22fa46-4b0b-4df7-8e5f-2540da2fbd07"}
{"timestamp": "2025-12-29T13:38:19.788296+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 41}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "ef22fa46-4b0b-4df7-8e5f-2540da2fbd07"}
{"timestamp": "2025-12-29T13:38:19.789475+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "ef22fa46-4b0b-4df7-8e5f-2540da2fbd07"}
{"timestamp": "2025-12-29T13:38:19.789666+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "ef22fa46-4b0b-4df7-8e5f-2540da2fbd07"}
{"timestamp": "2025-12-29T13:38:19.790813+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "ef22fa46-4b0b-4df7-8e5f-2540da2fbd07"}
{"timestamp": "2025-12-29T13:38:19.791705+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ef22fa46-4b0b-4df7-8e5f-2540da2fbd07"}
{"timestamp": "2025-12-29T13:38:21.828266+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:21.830833+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:21.831539+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:21.831870+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.57s ago] {'pk_1': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:21.834482+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:21.834931+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.57s ago] {'pk_1': 41}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:21.837311+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:21.837680+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.57s ago] {'screen_id_1': 41, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:21.839749+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:21.840255+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.57s ago] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 42, 'screen_id': 41}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:21.842686+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:21.848029+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:21.848832+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:21.849410+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.57s ago] {'pk_1': 33}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:21.852210+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:21.852606+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.57s ago] {'pk_1': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:21.854939+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:21.855728+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.57s ago] {'pk_1': 41}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:21.857703+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 33}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:21.859277+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:21.859607+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:21.861210+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.033s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:21.862736+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:23.905338+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:23.908288+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:23.909053+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:23.909474+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 97.4s ago] {'email_1': 'test_concurrent1_1767015501.8625734@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.117193+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.117752+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 97.38s ago] {'email': 'test_concurrent1_1767015501.8625734@example.com', 'hashed_password': '$2b$12$Qb6eINd5pBzts.Wtl9dgIe3S7Cl.09tLIk/.j504n87wO5f/t1fDG', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.119681+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.124412+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.125259+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.125963+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 97.37s ago] {'pk_1': 66}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.128349+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 66, 'email': 'test_concurrent1_1767015501.8625734@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.129560+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.131530+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.132339+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.132917+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 97.36s ago] {'user_id_1': 66, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.135759+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.136206+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 97.36s ago] {'user_id': 66, 'name': None, 'email': 'test_concurrent1_1767015501.8625734@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.138241+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.142515+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.143053+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.143580+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 97.35s ago] {'pk_1': 66}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.145682+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 66, 'user_id': 66, 'email': 'test_concurrent1_1767015501.8625734@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.145896+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.146043+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.146336+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.147445+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.148607+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.148999+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 97.64s ago] {'email_1': 'test_concurrent1_1767015501.8625734@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.352815+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 66, 'email': 'test_concurrent1_1767015501.8625734@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.354067+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.354358+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.355401+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.450s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.356262+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:26.494654+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.497210+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.497760+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.498136+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 99.99s ago] {'email_1': 'test_concurrent2_1767015504.4561174@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.704388+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.704766+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 99.96s ago] {'email': 'test_concurrent2_1767015504.4561174@example.com', 'hashed_password': '$2b$12$JVoeH6xG5NBBv8.LPpyOIO76gGAtlixxiKH8HfH3RWuMgDFpe2r1m', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.706476+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.711976+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.712752+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.713255+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 99.96s ago] {'pk_1': 67}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.715334+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 67, 'email': 'test_concurrent2_1767015504.4561174@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.716246+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.718741+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.719412+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.719954+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 99.94s ago] {'user_id_1': 67, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.722155+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.722679+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 99.94s ago] {'user_id': 67, 'name': None, 'email': 'test_concurrent2_1767015504.4561174@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.724622+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.728578+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.729024+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.729318+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 99.94s ago] {'pk_1': 67}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.731390+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 67, 'user_id': 67, 'email': 'test_concurrent2_1767015504.4561174@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.731695+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.731863+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.732088+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.733118+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.734122+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.734631+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 100.2s ago] {'email_1': 'test_concurrent2_1767015504.4561174@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.940327+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 67, 'email': 'test_concurrent2_1767015504.4561174@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.941328+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.941561+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.942666+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.448s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.943762+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:28.990609+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:28.993425+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:28.994069+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:28.994423+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.15s ago] {'pk_1': 66}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:28.997561+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:28.998063+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.15s ago] {'showtime_id_1': 33, 'seat_code_1': 'R9-9', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.000141+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.000532+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.15s ago] {'user_id': 66, 'showtime_id': 33, 'seat_code': 'R9-9', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 13, 38, 28, 999720, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 48, 28, 999454, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.002334+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.007607+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.008317+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.008729+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.15s ago] {'pk_1': 33}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.010813+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 33, 'user_id': 66, 'showtime_id': 33, 'seat_code': 'R9-9'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.011845+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.013749+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.014439+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.014814+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.16s ago] {'showtime_id_1': 33, 'seat_code_1': 'R9-9', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.017220+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.017451+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.14s ago] {'seat_code': 'R9-9', 'showtime_id': 33, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.019275+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.019743+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.14s ago] {'status': 'LOCKED', 'locked_by_user_id': 66, 'lock_expires_at': datetime.datetime(2025, 12, 29, 13, 48, 29, 18806, tzinfo=datetime.timezone.utc), 'seat_locks_id': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.021523+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.025518+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.026273+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.026718+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.14s ago] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.028759+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 33, 'seat_code': 'R9-9', 'user_id': 66, 'expires_at': '2025-12-29T13:48:29.018806+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.028906+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.029022+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.029235+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.030482+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.031038+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 33, 'user_id': 66, 'showtime_id': 33, 'seat_code': 'R9-9'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.031282+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 33", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.032866+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.033397+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.033623+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.14s ago] {'user_id': 66, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 33}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.035709+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.040050+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.040681+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.041033+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.14s ago] {'pk_1': 33}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.042958+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 33, 'reservation_id': 33, 'user_id': 66, 'showtime_id': 33, 'seat_code': 'R9-9'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.043105+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.043416+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 33", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.044872+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.045366+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.045814+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.13s ago] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.047994+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 33, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.048138+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.048468+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 33, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.049765+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.050208+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.050510+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.09s ago] {'pk_1': 33}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.053166+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.053558+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.09s ago] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 33}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.054972+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.058903+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.059412+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.059667+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.16s ago] {'pk_1': 33}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.061551+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 33 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.061788+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.062745+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.062925+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 33: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.063146+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.064295+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.064561+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 33", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.064982+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.066163+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.068295+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.068858+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.069185+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.08s ago] {'actor_id': 66, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 33, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 33, \"user_id\": 66, \"showtime_id\": 33, \"seat_code\": \"R9-9\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 38, 29, 68475, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.071101+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.074807+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.075421+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.075765+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.08s ago] {'pk_1': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.077661+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.078751+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.079787+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.089s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.080608+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:31.134232+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "40ee2511-eb19-41d9-b41b-48979f3dcbdf"}
{"timestamp": "2025-12-29T13:38:31.137072+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "40ee2511-eb19-41d9-b41b-48979f3dcbdf"}
{"timestamp": "2025-12-29T13:38:31.137716+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40ee2511-eb19-41d9-b41b-48979f3dcbdf"}
{"timestamp": "2025-12-29T13:38:31.138157+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 91.29s ago] {'pk_1': 67}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40ee2511-eb19-41d9-b41b-48979f3dcbdf"}
{"timestamp": "2025-12-29T13:38:31.141282+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40ee2511-eb19-41d9-b41b-48979f3dcbdf"}
{"timestamp": "2025-12-29T13:38:31.141949+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 91.29s ago] {'showtime_id_1': 33, 'seat_code_1': 'R9-9', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40ee2511-eb19-41d9-b41b-48979f3dcbdf"}
{"timestamp": "2025-12-29T13:38:31.144243+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "40ee2511-eb19-41d9-b41b-48979f3dcbdf"}
{"timestamp": "2025-12-29T13:38:31.162085+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.middleware", "message": "\u2717 POST /reservations/ \u2192 FAILED (0.012s)", "module": "middleware", "function": "dispatch", "line": 83, "request_id": "40ee2511-eb19-41d9-b41b-48979f3dcbdf", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 151, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\streams\\memory.py\", line 126, in receive\n    raise EndOfStream from None\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\middleware.py\", line 57, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    raise app_exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 390, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 291, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\concurrency.py\", line 38, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\to_thread.py\", line 56, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 2485, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 976, in run\n    result = context.run(func, *args)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\reservation\\router.py\", line 31, in create_reservation_route\n    return create_reservation(db=db, user_id=current_user.id, data=payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\reservation\\service.py\", line 53, in create_reservation\n    raise ValidationError(\n    ...<2 lines>...\n    )\napp.core.errors.ValidationError: ('Seat is locked by another user', {'seat_code': 'R9-9'})"}
{"timestamp": "2025-12-29T13:42:12.956128+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-29T13:42:14.740213+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-29T13:42:14.740604+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-29T13:42:14.740883+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.741087+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.741308+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.741552+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.741733+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.741946+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.742245+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.742520+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.742732+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.742907+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.743054+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.743320+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.743565+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.743736+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.743860+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.744035+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.744439+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.744706+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.745027+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.745383+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.745760+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.746058+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.746256+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.746456+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.746700+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.746969+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.747252+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.747466+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.747595+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.747782+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.748076+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.748288+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.748504+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.748735+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.748965+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.749241+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.749529+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.749778+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.750055+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.750383+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.750700+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.750937+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.751089+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.751264+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.751435+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.751651+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.751867+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.752088+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.752269+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.752497+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.752689+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.752907+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.753119+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.753343+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.753682+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.753928+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.754095+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.754350+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.754781+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/showtimes/{showtime_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.755107+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.755291+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.755439+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-29T13:42:14.755644+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-29T13:42:23.940886+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:23.984449+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:23.984861+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:23.987458+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:23.987926+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:23.990350+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:23.990754+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:23.992871+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:23.995940+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:23.996570+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00070s] {'email_1': 'test_admin_1767015741.8872051@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.224770+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.225249+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00063s] {'email': 'test_admin_1767015741.8872051@example.com', 'hashed_password': '$2b$12$gXNu6kprf9AMf05ZLGtn5.R8W9K3AfiyytZQbiBhCmiKRPzQ80phW', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.227643+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.233080+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.234253+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.234473+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00043s] {'pk_1': 68}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.236581+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 68, 'email': 'test_admin_1767015741.8872051@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.237588+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.272536+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.274110+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.274393+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'user_id_1': 68, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.278064+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.278635+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'user_id': 68, 'name': None, 'email': 'test_admin_1767015741.8872051@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.281684+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.286649+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.288026+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.288393+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00063s] {'pk_1': 68}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.290580+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 68, 'user_id': 68, 'email': 'test_admin_1767015741.8872051@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.290775+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.290956+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.291240+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.292285+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.293435+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.294104+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2982s ago] {'email_1': 'test_admin_1767015741.8872051@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.504205+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 68, 'email': 'test_admin_1767015741.8872051@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.505442+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.505739+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.507197+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.566s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.508349+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:26.558203+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "8776f458-cab8-44e2-b990-e97ecc5b20ac"}
{"timestamp": "2025-12-29T13:42:26.561312+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8776f458-cab8-44e2-b990-e97ecc5b20ac"}
{"timestamp": "2025-12-29T13:42:26.562799+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8776f458-cab8-44e2-b990-e97ecc5b20ac"}
{"timestamp": "2025-12-29T13:42:26.563265+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'title_1': 'Test Movie 1767015741.8872051'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8776f458-cab8-44e2-b990-e97ecc5b20ac"}
{"timestamp": "2025-12-29T13:42:26.567500+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8776f458-cab8-44e2-b990-e97ecc5b20ac"}
{"timestamp": "2025-12-29T13:42:26.567910+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'title': 'Test Movie 1767015741.8872051', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8776f458-cab8-44e2-b990-e97ecc5b20ac"}
{"timestamp": "2025-12-29T13:42:26.569996+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "8776f458-cab8-44e2-b990-e97ecc5b20ac"}
{"timestamp": "2025-12-29T13:42:26.575639+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8776f458-cab8-44e2-b990-e97ecc5b20ac"}
{"timestamp": "2025-12-29T13:42:26.576835+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8776f458-cab8-44e2-b990-e97ecc5b20ac"}
{"timestamp": "2025-12-29T13:42:26.577202+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'pk_1': 43}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8776f458-cab8-44e2-b990-e97ecc5b20ac"}
{"timestamp": "2025-12-29T13:42:26.579799+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 43}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "8776f458-cab8-44e2-b990-e97ecc5b20ac"}
{"timestamp": "2025-12-29T13:42:26.580872+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "8776f458-cab8-44e2-b990-e97ecc5b20ac"}
{"timestamp": "2025-12-29T13:42:26.581152+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "8776f458-cab8-44e2-b990-e97ecc5b20ac"}
{"timestamp": "2025-12-29T13:42:26.582590+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.024s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "8776f458-cab8-44e2-b990-e97ecc5b20ac"}
{"timestamp": "2025-12-29T13:42:26.583658+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "8776f458-cab8-44e2-b990-e97ecc5b20ac"}
{"timestamp": "2025-12-29T13:42:28.636247+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "153f337c-920c-4cf9-989d-227eadf1f745"}
{"timestamp": "2025-12-29T13:42:28.639004+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "153f337c-920c-4cf9-989d-227eadf1f745"}
{"timestamp": "2025-12-29T13:42:28.640169+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "153f337c-920c-4cf9-989d-227eadf1f745"}
{"timestamp": "2025-12-29T13:42:28.640544+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'name_1': 'Test Layout 1767015741.8872051'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "153f337c-920c-4cf9-989d-227eadf1f745"}
{"timestamp": "2025-12-29T13:42:28.643694+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "153f337c-920c-4cf9-989d-227eadf1f745"}
{"timestamp": "2025-12-29T13:42:28.644092+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'name': 'Test Layout 1767015741.8872051', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "153f337c-920c-4cf9-989d-227eadf1f745"}
{"timestamp": "2025-12-29T13:42:28.646320+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "153f337c-920c-4cf9-989d-227eadf1f745"}
{"timestamp": "2025-12-29T13:42:28.652050+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "153f337c-920c-4cf9-989d-227eadf1f745"}
{"timestamp": "2025-12-29T13:42:28.653018+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "153f337c-920c-4cf9-989d-227eadf1f745"}
{"timestamp": "2025-12-29T13:42:28.653411+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'pk_1': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "153f337c-920c-4cf9-989d-227eadf1f745"}
{"timestamp": "2025-12-29T13:42:28.655837+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 42}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "153f337c-920c-4cf9-989d-227eadf1f745"}
{"timestamp": "2025-12-29T13:42:28.657174+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "153f337c-920c-4cf9-989d-227eadf1f745"}
{"timestamp": "2025-12-29T13:42:28.657387+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "153f337c-920c-4cf9-989d-227eadf1f745"}
{"timestamp": "2025-12-29T13:42:28.658532+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "153f337c-920c-4cf9-989d-227eadf1f745"}
{"timestamp": "2025-12-29T13:42:28.659457+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "153f337c-920c-4cf9-989d-227eadf1f745"}
{"timestamp": "2025-12-29T13:42:30.695433+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "1a397b78-c5f2-4bd4-ad07-a2707ba57790"}
{"timestamp": "2025-12-29T13:42:30.698087+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1a397b78-c5f2-4bd4-ad07-a2707ba57790"}
{"timestamp": "2025-12-29T13:42:30.699321+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1a397b78-c5f2-4bd4-ad07-a2707ba57790"}
{"timestamp": "2025-12-29T13:42:30.699757+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'name_1': 'Test Screen 1767015741.8872051', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1a397b78-c5f2-4bd4-ad07-a2707ba57790"}
{"timestamp": "2025-12-29T13:42:30.703132+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1a397b78-c5f2-4bd4-ad07-a2707ba57790"}
{"timestamp": "2025-12-29T13:42:30.703454+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'id_1': 42, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1a397b78-c5f2-4bd4-ad07-a2707ba57790"}
{"timestamp": "2025-12-29T13:42:30.709934+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1a397b78-c5f2-4bd4-ad07-a2707ba57790"}
{"timestamp": "2025-12-29T13:42:30.710334+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00064s] {'name': 'Test Screen 1767015741.8872051', 'capacity': 150, 'seat_layout_id': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1a397b78-c5f2-4bd4-ad07-a2707ba57790"}
{"timestamp": "2025-12-29T13:42:30.712588+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "1a397b78-c5f2-4bd4-ad07-a2707ba57790"}
{"timestamp": "2025-12-29T13:42:30.718177+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1a397b78-c5f2-4bd4-ad07-a2707ba57790"}
{"timestamp": "2025-12-29T13:42:30.719234+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1a397b78-c5f2-4bd4-ad07-a2707ba57790"}
{"timestamp": "2025-12-29T13:42:30.719555+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'pk_1': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1a397b78-c5f2-4bd4-ad07-a2707ba57790"}
{"timestamp": "2025-12-29T13:42:30.722005+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 42}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "1a397b78-c5f2-4bd4-ad07-a2707ba57790"}
{"timestamp": "2025-12-29T13:42:30.723094+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "1a397b78-c5f2-4bd4-ad07-a2707ba57790"}
{"timestamp": "2025-12-29T13:42:30.723267+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "1a397b78-c5f2-4bd4-ad07-a2707ba57790"}
{"timestamp": "2025-12-29T13:42:30.724487+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.029s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "1a397b78-c5f2-4bd4-ad07-a2707ba57790"}
{"timestamp": "2025-12-29T13:42:30.726083+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "1a397b78-c5f2-4bd4-ad07-a2707ba57790"}
{"timestamp": "2025-12-29T13:42:32.768853+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:32.771554+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:32.772802+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:32.773373+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'pk_1': 43}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:32.776368+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:32.776769+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'pk_1': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:32.779811+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:32.780416+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'screen_id_1': 42, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:32.783698+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:32.784198+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00066s] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 43, 'screen_id': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:32.786550+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:32.791869+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:32.792973+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:32.793311+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'pk_1': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:32.796835+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:32.797190+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'pk_1': 43}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:32.799773+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:32.800115+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'pk_1': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:32.801861+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 34}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:32.802895+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:32.803101+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:32.804256+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.036s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:32.805376+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:34.849525+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:34.852331+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:34.853020+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:34.853438+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.86s ago] {'email_1': 'test_booking_1767015752.8051336@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.058543+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.059074+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.83s ago] {'email': 'test_booking_1767015752.8051336@example.com', 'hashed_password': '$2b$12$I.bffXcvubpFPcOEOTX5SuoDu0N29dWlqEnz3K6d9OwcL3Oj7DIVO', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.060838+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.065799+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.066584+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.067005+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.83s ago] {'pk_1': 69}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.069114+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 69, 'email': 'test_booking_1767015752.8051336@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.070097+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.071922+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.072857+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.073310+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.8s ago] {'user_id_1': 69, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.075739+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.076113+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.8s ago] {'user_id': 69, 'name': None, 'email': 'test_booking_1767015752.8051336@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.077831+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.082067+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.082626+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.082861+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.8s ago] {'pk_1': 69}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.085006+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 69, 'user_id': 69, 'email': 'test_booking_1767015752.8051336@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.085294+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.085516+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.085792+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.087152+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.088884+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.089362+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 11.09s ago] {'email_1': 'test_booking_1767015752.8051336@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.293066+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 69, 'email': 'test_booking_1767015752.8051336@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.294123+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.294399+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.295593+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.446s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.296554+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:37.335638+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.338477+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.339678+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.340060+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00068s] {'pk_1': 69}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.344345+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.344737+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'showtime_id_1': 34, 'seat_code_1': 'R5-5', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.347669+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.348104+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'user_id': 69, 'showtime_id': 34, 'seat_code': 'R5-5', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 13, 42, 37, 347235, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 52, 37, 346382, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.350550+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.355843+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.356971+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.357391+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'pk_1': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.359865+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 34, 'user_id': 69, 'showtime_id': 34, 'seat_code': 'R5-5'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.360971+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.363665+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.364603+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.365503+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.02086s ago] {'showtime_id_1': 34, 'seat_code_1': 'R5-5', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.369817+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.371402+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00085s] {'seat_code': 'R5-5', 'showtime_id': 34, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.375212+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.375848+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'status': 'LOCKED', 'locked_by_user_id': 69, 'lock_expires_at': datetime.datetime(2025, 12, 29, 13, 52, 37, 373879, tzinfo=datetime.timezone.utc), 'seat_locks_id': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.378400+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.382630+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.383657+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.384017+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.386490+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 34, 'seat_code': 'R5-5', 'user_id': 69, 'expires_at': '2025-12-29T13:52:37.373879+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.386836+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.387119+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.387600+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.388933+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.389706+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 34, 'user_id': 69, 'showtime_id': 34, 'seat_code': 'R5-5'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.389876+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 34", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.391471+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.393078+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.393414+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00075s] {'user_id': 69, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.396281+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.400847+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.402529+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.403186+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00093s] {'pk_1': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.405695+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 34, 'reservation_id': 34, 'user_id': 69, 'showtime_id': 34, 'seat_code': 'R5-5'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.406132+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.406976+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 34", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.424067+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.425585+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.425830+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.428761+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 34, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.428978+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.429795+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 34, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.452645+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.454457+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.454972+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00106s] {'pk_1': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.458750+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.459313+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00076s] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.461560+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.466007+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.466907+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.467499+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.06527s ago] {'pk_1': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.470350+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 34 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.470779+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.472232+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.472571+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 34: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.473024+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.474427+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.474746+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 34", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.475219+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.476563+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.478827+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.480068+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.480421+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'actor_id': 69, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 34, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 34, \"user_id\": 69, \"showtime_id\": 34, \"seat_code\": \"R5-5\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 42, 37, 479647, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.483327+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.488108+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.489536+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.489856+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00071s] {'pk_1': 43}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.492318+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.493465+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.494864+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.159s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.495836+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:39.540492+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "94696e25-0b48-4bbf-a388-86805aa4e90b"}
{"timestamp": "2025-12-29T13:42:39.543167+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "94696e25-0b48-4bbf-a388-86805aa4e90b"}
{"timestamp": "2025-12-29T13:42:39.543812+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "94696e25-0b48-4bbf-a388-86805aa4e90b"}
{"timestamp": "2025-12-29T13:42:39.544284+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 2.205s ago] {'pk_1': 69}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "94696e25-0b48-4bbf-a388-86805aa4e90b"}
{"timestamp": "2025-12-29T13:42:39.547737+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "94696e25-0b48-4bbf-a388-86805aa4e90b"}
{"timestamp": "2025-12-29T13:42:39.548253+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'user_id_1': 69}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "94696e25-0b48-4bbf-a388-86805aa4e90b"}
{"timestamp": "2025-12-29T13:42:39.550641+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.010s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "94696e25-0b48-4bbf-a388-86805aa4e90b"}
{"timestamp": "2025-12-29T13:42:39.551650+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "94696e25-0b48-4bbf-a388-86805aa4e90b"}
{"timestamp": "2025-12-29T13:42:41.607039+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/order/34/initiate", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "bda3078b-e07c-451f-8e1f-c90f149e420b"}
{"timestamp": "2025-12-29T13:42:41.610715+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bda3078b-e07c-451f-8e1f-c90f149e420b"}
{"timestamp": "2025-12-29T13:42:41.611437+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bda3078b-e07c-451f-8e1f-c90f149e420b"}
{"timestamp": "2025-12-29T13:42:41.611962+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.273s ago] {'pk_1': 69}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bda3078b-e07c-451f-8e1f-c90f149e420b"}
{"timestamp": "2025-12-29T13:42:41.616669+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bda3078b-e07c-451f-8e1f-c90f149e420b"}
{"timestamp": "2025-12-29T13:42:41.617370+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.163s ago] {'pk_1': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bda3078b-e07c-451f-8e1f-c90f149e420b"}
{"timestamp": "2025-12-29T13:42:41.621364+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO payment_attempts (order_id, amount_attempted, status, final_amount, failure_reason, provider_payment_id, created_at) VALUES (%(order_id)s, %(amount_attempted)s, %(status)s, %(final_amount)s, %(failure_reason)s, %(provider_payment_id)s, %(created_at)s) RETURNING payment_attempts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bda3078b-e07c-451f-8e1f-c90f149e420b"}
{"timestamp": "2025-12-29T13:42:41.621955+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00119s] {'order_id': 34, 'amount_attempted': 1000, 'status': 'PENDING', 'final_amount': 1000, 'failure_reason': None, 'provider_payment_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 42, 41, 620303, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bda3078b-e07c-451f-8e1f-c90f149e420b"}
{"timestamp": "2025-12-29T13:42:41.624780+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "bda3078b-e07c-451f-8e1f-c90f149e420b"}
{"timestamp": "2025-12-29T13:42:41.629807+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bda3078b-e07c-451f-8e1f-c90f149e420b"}
{"timestamp": "2025-12-29T13:42:41.631310+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bda3078b-e07c-451f-8e1f-c90f149e420b"}
{"timestamp": "2025-12-29T13:42:41.631588+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bda3078b-e07c-451f-8e1f-c90f149e420b"}
{"timestamp": "2025-12-29T13:42:41.634566+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bda3078b-e07c-451f-8e1f-c90f149e420b"}
{"timestamp": "2025-12-29T13:42:41.634956+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'pk_1': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bda3078b-e07c-451f-8e1f-c90f149e420b"}
{"timestamp": "2025-12-29T13:42:41.636908+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.pending with payload: {'payment_attempt_id': 22, 'order_id': 34, 'amount_attempted': 1000, 'final_amount': 1000, 'user_id': 69}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "bda3078b-e07c-451f-8e1f-c90f149e420b"}
{"timestamp": "2025-12-29T13:42:41.637826+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.pending to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "bda3078b-e07c-451f-8e1f-c90f149e420b"}
{"timestamp": "2025-12-29T13:42:41.637962+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: payment.pending", "module": "event_bus", "function": "publish", "line": 31, "request_id": "bda3078b-e07c-451f-8e1f-c90f149e420b"}
{"timestamp": "2025-12-29T13:42:41.639043+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/order/34/initiate \u2192 200 (0.032s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "bda3078b-e07c-451f-8e1f-c90f149e420b"}
{"timestamp": "2025-12-29T13:42:41.639874+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "bda3078b-e07c-451f-8e1f-c90f149e420b"}
{"timestamp": "2025-12-29T13:42:43.683702+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/22/confirm", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.686227+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.687215+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.687616+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.348s ago] {'pk_1': 69}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.691005+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id AS payment_attempts_id, payment_attempts.order_id AS payment_attempts_order_id, payment_attempts.amount_attempted AS payment_attempts_amount_attempted, payment_attempts.status AS payment_attempts_status, payment_attempts.final_amount AS payment_attempts_final_amount, payment_attempts.failure_reason AS payment_attempts_failure_reason, payment_attempts.provider_payment_id AS payment_attempts_provider_payment_id, payment_attempts.created_at AS payment_attempts_created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.691471+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.694354+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.694750+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'pk_1': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.697187+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE payment_attempts SET status=%(status)s, provider_payment_id=%(provider_payment_id)s WHERE payment_attempts.id = %(payment_attempts_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.697642+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'status': 'SUCCEEDED', 'provider_payment_id': 'mock_payment_22', 'payment_attempts_id': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.699768+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.705784+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.706813+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.707326+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 2.076s ago] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.710388+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.710810+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 2.076s ago] {'pk_1': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.712505+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.succeeded with payload: {'payment_attempt_id': 22, 'order_id': 34, 'final_amount': 1000.0, 'user_id': 69}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.713620+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.succeeded to 4 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.714364+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.716073+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.716732+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.717150+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.263s ago] {'pk_1': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.719804+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET is_completed=%(is_completed)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.720112+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'is_completed': True, 'orders_id': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.721894+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.726146+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.726715+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.727144+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.325s ago] {'pk_1': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.729181+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.completed with payload: {'order_id': 34}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.729357+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.completed to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.729479+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: order.completed", "module": "event_bus", "function": "publish", "line": 31, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.729699+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.730757+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.732546+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.733320+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.733609+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 19.46s ago] {'user_id_1': 69, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.736602+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.737677+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.739743+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.740181+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.740546+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.261s ago] {'actor_id': 69, 'actor_type': 'user', 'action': 'payment.succeeded', 'target_id': 34, 'target_type': 'order', 'payload': '{\"payment_attempt_id\": 22, \"order_id\": 34, \"final_amount\": 1000.0, \"user_id\": 69}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 42, 43, 739930, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.742563+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.746786+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.747377+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.747622+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.259s ago] {'pk_1': 44}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.749554+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.750694+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.751846+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/22/confirm \u2192 200 (0.068s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.752729+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:45.797669+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b86cb581-b811-47d8-8cac-d62b4e196fbe"}
{"timestamp": "2025-12-29T13:42:45.800426+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b86cb581-b811-47d8-8cac-d62b4e196fbe"}
{"timestamp": "2025-12-29T13:42:45.801221+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b86cb581-b811-47d8-8cac-d62b4e196fbe"}
{"timestamp": "2025-12-29T13:42:45.801624+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 8.462s ago] {'pk_1': 69}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b86cb581-b811-47d8-8cac-d62b4e196fbe"}
{"timestamp": "2025-12-29T13:42:45.805202+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b86cb581-b811-47d8-8cac-d62b4e196fbe"}
{"timestamp": "2025-12-29T13:42:45.805800+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.258s ago] {'user_id_1': 69}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b86cb581-b811-47d8-8cac-d62b4e196fbe"}
{"timestamp": "2025-12-29T13:42:45.808871+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.011s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b86cb581-b811-47d8-8cac-d62b4e196fbe"}
{"timestamp": "2025-12-29T13:42:45.810125+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b86cb581-b811-47d8-8cac-d62b4e196fbe"}
{"timestamp": "2025-12-29T13:42:47.864149+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:47.866809+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:47.867417+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:47.867742+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.87s ago] {'email_1': 'test_admin_1767015765.8110971@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.073035+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.073432+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.85s ago] {'email': 'test_admin_1767015765.8110971@example.com', 'hashed_password': '$2b$12$9xKT2dBANmmnVFctGmHOr.7qRZWtCYZQdx4cdjbh3VGXs9IQUECCa', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.075260+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.081122+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.082178+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.082821+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.85s ago] {'pk_1': 70}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.085432+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 70, 'email': 'test_admin_1767015765.8110971@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.086638+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.089599+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.090372+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.090662+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.82s ago] {'user_id_1': 70, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.093239+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.093856+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.82s ago] {'user_id': 70, 'name': None, 'email': 'test_admin_1767015765.8110971@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.096523+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.101266+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.101994+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.102314+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.81s ago] {'pk_1': 70}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.104215+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 70, 'user_id': 70, 'email': 'test_admin_1767015765.8110971@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.104371+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.104502+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.104728+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.105737+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.106799+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.107275+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 24.11s ago] {'email_1': 'test_admin_1767015765.8110971@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.312304+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 70, 'email': 'test_admin_1767015765.8110971@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.313443+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.313666+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.314712+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.451s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.315572+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:50.369113+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "f7a5eae7-ba0f-4c4a-987e-fad840e713e0"}
{"timestamp": "2025-12-29T13:42:50.372021+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f7a5eae7-ba0f-4c4a-987e-fad840e713e0"}
{"timestamp": "2025-12-29T13:42:50.372724+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f7a5eae7-ba0f-4c4a-987e-fad840e713e0"}
{"timestamp": "2025-12-29T13:42:50.373108+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.81s ago] {'title_1': 'Test Movie 1767015765.8110971'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f7a5eae7-ba0f-4c4a-987e-fad840e713e0"}
{"timestamp": "2025-12-29T13:42:50.375908+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f7a5eae7-ba0f-4c4a-987e-fad840e713e0"}
{"timestamp": "2025-12-29T13:42:50.376536+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.81s ago] {'title': 'Test Movie 1767015765.8110971', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f7a5eae7-ba0f-4c4a-987e-fad840e713e0"}
{"timestamp": "2025-12-29T13:42:50.378436+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "f7a5eae7-ba0f-4c4a-987e-fad840e713e0"}
{"timestamp": "2025-12-29T13:42:50.383705+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f7a5eae7-ba0f-4c4a-987e-fad840e713e0"}
{"timestamp": "2025-12-29T13:42:50.384394+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f7a5eae7-ba0f-4c4a-987e-fad840e713e0"}
{"timestamp": "2025-12-29T13:42:50.384815+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.81s ago] {'pk_1': 44}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f7a5eae7-ba0f-4c4a-987e-fad840e713e0"}
{"timestamp": "2025-12-29T13:42:50.387121+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 44}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "f7a5eae7-ba0f-4c4a-987e-fad840e713e0"}
{"timestamp": "2025-12-29T13:42:50.388291+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "f7a5eae7-ba0f-4c4a-987e-fad840e713e0"}
{"timestamp": "2025-12-29T13:42:50.388469+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "f7a5eae7-ba0f-4c4a-987e-fad840e713e0"}
{"timestamp": "2025-12-29T13:42:50.389841+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.021s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "f7a5eae7-ba0f-4c4a-987e-fad840e713e0"}
{"timestamp": "2025-12-29T13:42:50.390726+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f7a5eae7-ba0f-4c4a-987e-fad840e713e0"}
{"timestamp": "2025-12-29T13:42:52.427889+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b93de4fc-b379-49bc-be08-53cec2fdd9a6"}
{"timestamp": "2025-12-29T13:42:52.430811+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b93de4fc-b379-49bc-be08-53cec2fdd9a6"}
{"timestamp": "2025-12-29T13:42:52.431373+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b93de4fc-b379-49bc-be08-53cec2fdd9a6"}
{"timestamp": "2025-12-29T13:42:52.431723+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'name_1': 'Test Layout 1767015765.8110971'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b93de4fc-b379-49bc-be08-53cec2fdd9a6"}
{"timestamp": "2025-12-29T13:42:52.434607+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b93de4fc-b379-49bc-be08-53cec2fdd9a6"}
{"timestamp": "2025-12-29T13:42:52.435105+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'name': 'Test Layout 1767015765.8110971', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b93de4fc-b379-49bc-be08-53cec2fdd9a6"}
{"timestamp": "2025-12-29T13:42:52.437048+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b93de4fc-b379-49bc-be08-53cec2fdd9a6"}
{"timestamp": "2025-12-29T13:42:52.442549+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b93de4fc-b379-49bc-be08-53cec2fdd9a6"}
{"timestamp": "2025-12-29T13:42:52.443289+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b93de4fc-b379-49bc-be08-53cec2fdd9a6"}
{"timestamp": "2025-12-29T13:42:52.443685+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'pk_1': 43}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b93de4fc-b379-49bc-be08-53cec2fdd9a6"}
{"timestamp": "2025-12-29T13:42:52.445952+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 43}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "b93de4fc-b379-49bc-be08-53cec2fdd9a6"}
{"timestamp": "2025-12-29T13:42:52.447176+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b93de4fc-b379-49bc-be08-53cec2fdd9a6"}
{"timestamp": "2025-12-29T13:42:52.447420+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "b93de4fc-b379-49bc-be08-53cec2fdd9a6"}
{"timestamp": "2025-12-29T13:42:52.448885+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.021s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b93de4fc-b379-49bc-be08-53cec2fdd9a6"}
{"timestamp": "2025-12-29T13:42:52.449908+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b93de4fc-b379-49bc-be08-53cec2fdd9a6"}
{"timestamp": "2025-12-29T13:42:54.493463+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b0489dad-92d0-4144-aeec-969494534265"}
{"timestamp": "2025-12-29T13:42:54.495964+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b0489dad-92d0-4144-aeec-969494534265"}
{"timestamp": "2025-12-29T13:42:54.496658+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b0489dad-92d0-4144-aeec-969494534265"}
{"timestamp": "2025-12-29T13:42:54.497150+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.8s ago] {'name_1': 'Test Screen 1767015765.8110971', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b0489dad-92d0-4144-aeec-969494534265"}
{"timestamp": "2025-12-29T13:42:54.500174+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b0489dad-92d0-4144-aeec-969494534265"}
{"timestamp": "2025-12-29T13:42:54.500650+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.8s ago] {'id_1': 43, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b0489dad-92d0-4144-aeec-969494534265"}
{"timestamp": "2025-12-29T13:42:54.503069+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b0489dad-92d0-4144-aeec-969494534265"}
{"timestamp": "2025-12-29T13:42:54.503492+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'name': 'Test Screen 1767015765.8110971', 'capacity': 150, 'seat_layout_id': 43}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b0489dad-92d0-4144-aeec-969494534265"}
{"timestamp": "2025-12-29T13:42:54.505865+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b0489dad-92d0-4144-aeec-969494534265"}
{"timestamp": "2025-12-29T13:42:54.510520+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b0489dad-92d0-4144-aeec-969494534265"}
{"timestamp": "2025-12-29T13:42:54.511249+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b0489dad-92d0-4144-aeec-969494534265"}
{"timestamp": "2025-12-29T13:42:54.511677+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'pk_1': 43}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b0489dad-92d0-4144-aeec-969494534265"}
{"timestamp": "2025-12-29T13:42:54.513554+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 43}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "b0489dad-92d0-4144-aeec-969494534265"}
{"timestamp": "2025-12-29T13:42:54.514521+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b0489dad-92d0-4144-aeec-969494534265"}
{"timestamp": "2025-12-29T13:42:54.514696+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "b0489dad-92d0-4144-aeec-969494534265"}
{"timestamp": "2025-12-29T13:42:54.515691+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b0489dad-92d0-4144-aeec-969494534265"}
{"timestamp": "2025-12-29T13:42:54.516681+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b0489dad-92d0-4144-aeec-969494534265"}
{"timestamp": "2025-12-29T13:42:56.555007+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:56.557558+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:56.558152+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:56.558433+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'pk_1': 44}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:56.560891+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:56.561361+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'pk_1': 43}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:56.563474+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:56.563854+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.78s ago] {'screen_id_1': 43, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:56.565862+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:56.566319+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.78s ago] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 44, 'screen_id': 43}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:56.568663+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:56.573891+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:56.574636+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:56.575010+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.78s ago] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:56.577884+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:56.578196+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.78s ago] {'pk_1': 44}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:56.580343+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:56.580884+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.78s ago] {'pk_1': 43}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:56.582951+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 35}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:56.584073+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:56.584251+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:56.585583+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.031s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:56.586858+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:58.634467+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.637240+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.637783+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.638063+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.64s ago] {'email_1': 'test_cancel_1767015776.586503@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.843013+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.843636+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.62s ago] {'email': 'test_cancel_1767015776.586503@example.com', 'hashed_password': '$2b$12$aEssW5j25gzpTldbhgPCbOO5oU1StCuTDvP4zFw/b.VmXv3i2Oo.O', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.845316+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.849996+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.850597+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.850951+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.62s ago] {'pk_1': 71}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.853146+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 71, 'email': 'test_cancel_1767015776.586503@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.854398+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.856309+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.856952+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.857392+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.58s ago] {'user_id_1': 71, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.860038+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.860379+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.58s ago] {'user_id': 71, 'name': None, 'email': 'test_cancel_1767015776.586503@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.862229+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.866314+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.866817+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.867082+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.58s ago] {'pk_1': 71}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.869231+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 71, 'user_id': 71, 'email': 'test_cancel_1767015776.586503@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.869585+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.869948+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.870288+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.871430+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.872510+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.872756+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.88s ago] {'email_1': 'test_cancel_1767015776.586503@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:59.076372+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 71, 'email': 'test_cancel_1767015776.586503@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:59.077590+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:59.077784+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:59.078907+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.444s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:59.079835+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:43:01.122857+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.125539+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.126131+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.126512+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'pk_1': 71}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.129446+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.129985+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'showtime_id_1': 35, 'seat_code_1': 'R6-6', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.132447+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.132852+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'user_id': 71, 'showtime_id': 35, 'seat_code': 'R6-6', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 13, 43, 1, 132047, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 53, 1, 131772, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.134927+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.139355+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.139871+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.140244+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.78s ago] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.142147+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 35, 'user_id': 71, 'showtime_id': 35, 'seat_code': 'R6-6'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.143283+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.145261+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.145838+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.146334+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.8s ago] {'showtime_id_1': 35, 'seat_code_1': 'R6-6', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.148925+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.149384+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.78s ago] {'seat_code': 'R6-6', 'showtime_id': 35, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.151730+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.151992+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.78s ago] {'status': 'LOCKED', 'locked_by_user_id': 71, 'lock_expires_at': datetime.datetime(2025, 12, 29, 13, 53, 1, 151203, tzinfo=datetime.timezone.utc), 'seat_locks_id': 31}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.153646+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.158205+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.158658+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.158857+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.78s ago] {'pk_1': 31}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.160730+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 35, 'seat_code': 'R6-6', 'user_id': 71, 'expires_at': '2025-12-29T13:53:01.151203+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.160883+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.161009+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.161228+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.162118+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.162462+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 35, 'user_id': 71, 'showtime_id': 35, 'seat_code': 'R6-6'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.162605+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 35", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.164065+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.164749+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.165141+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.77s ago] {'user_id': 71, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.167639+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.171559+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.172220+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.172648+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.77s ago] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.174658+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 35, 'reservation_id': 35, 'user_id': 71, 'showtime_id': 35, 'seat_code': 'R6-6'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.174808+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.175144+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 35", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.176607+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.177301+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.177906+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.75s ago] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.180211+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 35, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.180424+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.180816+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 35, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.182225+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.182943+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.183456+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.73s ago] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.186299+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.186766+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.73s ago] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.188324+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.192185+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.192752+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.192997+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.194907+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 35 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.195303+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.196408+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.196656+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 35: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.197123+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.198301+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.198741+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 35", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.199309+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.200546+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.202486+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.203123+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.203721+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.72s ago] {'actor_id': 71, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 35, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 35, \"user_id\": 71, \"showtime_id\": 35, \"seat_code\": \"R6-6\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 43, 1, 202676, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.206187+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.210254+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.210958+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.211380+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.72s ago] {'pk_1': 45}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.213906+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.214991+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.216147+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.093s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.217179+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:03.250395+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "0e7728ba-a440-40e9-97e2-016e15fa6af3"}
{"timestamp": "2025-12-29T13:43:03.253014+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0e7728ba-a440-40e9-97e2-016e15fa6af3"}
{"timestamp": "2025-12-29T13:43:03.253738+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0e7728ba-a440-40e9-97e2-016e15fa6af3"}
{"timestamp": "2025-12-29T13:43:03.254123+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 25.92s ago] {'pk_1': 71}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0e7728ba-a440-40e9-97e2-016e15fa6af3"}
{"timestamp": "2025-12-29T13:43:03.257368+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0e7728ba-a440-40e9-97e2-016e15fa6af3"}
{"timestamp": "2025-12-29T13:43:03.257771+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.71s ago] {'user_id_1': 71}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0e7728ba-a440-40e9-97e2-016e15fa6af3"}
{"timestamp": "2025-12-29T13:43:03.260008+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.010s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "0e7728ba-a440-40e9-97e2-016e15fa6af3"}
{"timestamp": "2025-12-29T13:43:03.260862+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0e7728ba-a440-40e9-97e2-016e15fa6af3"}
{"timestamp": "2025-12-29T13:43:05.301466+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/order/35/initiate", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "f5dc2f29-2b7a-4fcd-bb07-1ffe9b1163d8"}
{"timestamp": "2025-12-29T13:43:05.304097+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f5dc2f29-2b7a-4fcd-bb07-1ffe9b1163d8"}
{"timestamp": "2025-12-29T13:43:05.304766+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f5dc2f29-2b7a-4fcd-bb07-1ffe9b1163d8"}
{"timestamp": "2025-12-29T13:43:05.305196+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 27.97s ago] {'pk_1': 71}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f5dc2f29-2b7a-4fcd-bb07-1ffe9b1163d8"}
{"timestamp": "2025-12-29T13:43:05.308314+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f5dc2f29-2b7a-4fcd-bb07-1ffe9b1163d8"}
{"timestamp": "2025-12-29T13:43:05.308845+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 27.86s ago] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f5dc2f29-2b7a-4fcd-bb07-1ffe9b1163d8"}
{"timestamp": "2025-12-29T13:43:05.311313+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO payment_attempts (order_id, amount_attempted, status, final_amount, failure_reason, provider_payment_id, created_at) VALUES (%(order_id)s, %(amount_attempted)s, %(status)s, %(final_amount)s, %(failure_reason)s, %(provider_payment_id)s, %(created_at)s) RETURNING payment_attempts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f5dc2f29-2b7a-4fcd-bb07-1ffe9b1163d8"}
{"timestamp": "2025-12-29T13:43:05.311858+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.69s ago] {'order_id': 35, 'amount_attempted': 1000, 'status': 'PENDING', 'final_amount': 1000, 'failure_reason': None, 'provider_payment_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 43, 5, 310729, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f5dc2f29-2b7a-4fcd-bb07-1ffe9b1163d8"}
{"timestamp": "2025-12-29T13:43:05.313983+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "f5dc2f29-2b7a-4fcd-bb07-1ffe9b1163d8"}
{"timestamp": "2025-12-29T13:43:05.319539+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f5dc2f29-2b7a-4fcd-bb07-1ffe9b1163d8"}
{"timestamp": "2025-12-29T13:43:05.320152+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f5dc2f29-2b7a-4fcd-bb07-1ffe9b1163d8"}
{"timestamp": "2025-12-29T13:43:05.320435+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.69s ago] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f5dc2f29-2b7a-4fcd-bb07-1ffe9b1163d8"}
{"timestamp": "2025-12-29T13:43:05.322742+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f5dc2f29-2b7a-4fcd-bb07-1ffe9b1163d8"}
{"timestamp": "2025-12-29T13:43:05.322964+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.69s ago] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f5dc2f29-2b7a-4fcd-bb07-1ffe9b1163d8"}
{"timestamp": "2025-12-29T13:43:05.324412+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.pending with payload: {'payment_attempt_id': 23, 'order_id': 35, 'amount_attempted': 1000, 'final_amount': 1000, 'user_id': 71}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "f5dc2f29-2b7a-4fcd-bb07-1ffe9b1163d8"}
{"timestamp": "2025-12-29T13:43:05.325289+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.pending to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "f5dc2f29-2b7a-4fcd-bb07-1ffe9b1163d8"}
{"timestamp": "2025-12-29T13:43:05.325422+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: payment.pending", "module": "event_bus", "function": "publish", "line": 31, "request_id": "f5dc2f29-2b7a-4fcd-bb07-1ffe9b1163d8"}
{"timestamp": "2025-12-29T13:43:05.326572+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/order/35/initiate \u2192 200 (0.025s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "f5dc2f29-2b7a-4fcd-bb07-1ffe9b1163d8"}
{"timestamp": "2025-12-29T13:43:05.327454+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f5dc2f29-2b7a-4fcd-bb07-1ffe9b1163d8"}
{"timestamp": "2025-12-29T13:43:07.366035+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/23/confirm", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.368726+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.369332+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.369617+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 30.03s ago] {'pk_1': 71}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.372915+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id AS payment_attempts_id, payment_attempts.order_id AS payment_attempts_order_id, payment_attempts.amount_attempted AS payment_attempts_amount_attempted, payment_attempts.status AS payment_attempts_status, payment_attempts.final_amount AS payment_attempts_final_amount, payment_attempts.failure_reason AS payment_attempts_failure_reason, payment_attempts.provider_payment_id AS payment_attempts_provider_payment_id, payment_attempts.created_at AS payment_attempts_created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.373510+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.68s ago] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.375499+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.375765+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.68s ago] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.377601+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE payment_attempts SET status=%(status)s, provider_payment_id=%(provider_payment_id)s WHERE payment_attempts.id = %(payment_attempts_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.378052+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.68s ago] {'status': 'SUCCEEDED', 'provider_payment_id': 'mock_payment_23', 'payment_attempts_id': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.379740+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.384656+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.385101+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.385385+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 25.75s ago] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.388451+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.389076+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 25.75s ago] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.390631+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.succeeded with payload: {'payment_attempt_id': 23, 'order_id': 35, 'final_amount': 1000.0, 'user_id': 71}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.391655+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.succeeded to 4 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.392093+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.394031+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.394644+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.395025+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 29.94s ago] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.397674+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET is_completed=%(is_completed)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.397923+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.68s ago] {'is_completed': True, 'orders_id': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.399290+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.402925+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.403530+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.403797+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 30s ago] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.405559+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.completed with payload: {'order_id': 35}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.405710+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.completed to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.405832+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: order.completed", "module": "event_bus", "function": "publish", "line": 31, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.406051+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.406982+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.409125+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.409804+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.410212+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 43.14s ago] {'user_id_1': 71, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.413297+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.414510+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.416748+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.417354+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.417739+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 29.94s ago] {'actor_id': 71, 'actor_type': 'user', 'action': 'payment.succeeded', 'target_id': 35, 'target_type': 'order', 'payload': '{\"payment_attempt_id\": 23, \"order_id\": 35, \"final_amount\": 1000.0, \"user_id\": 71}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 43, 7, 416963, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.420661+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.424852+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.425421+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.425954+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 29.94s ago] {'pk_1': 46}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.428388+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.429786+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.431204+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/23/confirm \u2192 200 (0.065s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.432117+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:09.473114+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/35/cancel", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.475540+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.476132+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.476476+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.14s ago] {'pk_1': 71}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.479808+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id AS reservations_id, reservations.user_id AS reservations_user_id, reservations.showtime_id AS reservations_showtime_id, reservations.seat_code AS reservations_seat_code, reservations.status AS reservations_status, reservations.created_at AS reservations_created_at, reservations.expires_at AS reservations_expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.480266+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.482480+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE reservations SET status=%(status)s, expires_at=%(expires_at)s WHERE reservations.id = %(reservations_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.482848+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'status': 'CANCELLED', 'expires_at': None, 'reservations_id': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.484526+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.489691+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.490356+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.490710+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.13s ago] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.493162+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.cancelled with payload: {'reservation_id': 35}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.494347+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.cancelled to 4 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.495097+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_cancelled completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.495554+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Order handler received reservation.cancelled: {'reservation_id': 35}", "module": "handlers", "function": "on_reservation_cancelled", "line": 50, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.497071+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.498000+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.reservation_id = %(reservation_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.498237+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'reservation_id_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.500584+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.cancelled with payload: {'order_id': 35}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.500751+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.cancelled to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.500874+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: order.cancelled", "module": "event_bus", "function": "publish", "line": 31, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.501306+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.502320+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_cancelled completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.504140+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.504773+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.reservation_id = %(reservation_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.505358+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.007261s ago] {'reservation_id_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.509061+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.order_id = %(order_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.509298+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'order_id_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.511912+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT refunds.id, refunds.reservation_id, refunds.payment_attempt_id, refunds.amount, refunds.reason, refunds.created_at, refunds.status \nFROM refunds \nWHERE refunds.reservation_id = %(reservation_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.512243+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'reservation_id_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.514534+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO refunds (reservation_id, payment_attempt_id, amount, reason, created_at, status) VALUES (%(reservation_id)s, %(payment_attempt_id)s, %(amount)s, %(reason)s, %(created_at)s, %(status)s) RETURNING refunds.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.514875+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'reservation_id': 35, 'payment_attempt_id': 23, 'amount': 1000.0, 'reason': 'reservation_cancelled', 'created_at': datetime.datetime(2025, 12, 29, 13, 43, 9, 514159, tzinfo=datetime.timezone.utc), 'status': 'ISSUED'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.517073+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.521459+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.522507+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT refunds.id, refunds.reservation_id, refunds.payment_attempt_id, refunds.amount, refunds.reason, refunds.created_at, refunds.status \nFROM refunds \nWHERE refunds.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.522778+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'pk_1': 3}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.525513+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id AS payment_attempts_id, payment_attempts.order_id AS payment_attempts_order_id, payment_attempts.amount_attempted AS payment_attempts_amount_attempted, payment_attempts.status AS payment_attempts_status, payment_attempts.final_amount AS payment_attempts_final_amount, payment_attempts.failure_reason AS payment_attempts_failure_reason, payment_attempts.provider_payment_id AS payment_attempts_provider_payment_id, payment_attempts.created_at AS payment_attempts_created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.525835+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.527512+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: refund.issued with payload: {'refund_id': 3, 'reservation_id': 35, 'payment_attempt_id': 23, 'amount': 1000.0}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.528076+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.532436+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.event_bus", "message": "\u274c Event handler failed: reservation.cancelled -> on_reservation_cancelled: asyncio.run() cannot be called from a running event loop", "module": "event_bus", "function": "_safe_invoke", "line": 45, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\event_bus.py\", line 42, in _safe_invoke\n    await handler(payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\refund\\handlers.py\", line 34, in on_reservation_cancelled\n    issue_refund_from_event(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        db,\n        ^^^\n    ...<2 lines>...\n        reason=\"reservation_cancelled\"\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\refund\\service.py\", line 58, in issue_refund_from_event\n    publish_event(event[\"type\"], event[\"payload\"])\n    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\shared\\services\\event_publisher.py\", line 17, in publish_event\n    asyncio.run(event_bus.publish(event_type, payload))\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 191, in run\n    raise RuntimeError(\n        \"asyncio.run() cannot be called from a running event loop\")\nRuntimeError: asyncio.run() cannot be called from a running event loop"}
{"timestamp": "2025-12-29T13:43:09.537962+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.538385+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.538685+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.06s ago] {'actor_id': None, 'actor_type': 'user', 'action': 'reservation.cancelled', 'target_id': 35, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 35}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 43, 9, 538142, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.541248+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.556592+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.event_bus", "message": "\u274c Event handler failed: reservation.cancelled -> on_reservation_cancelled: (psycopg2.errors.NotNullViolation) null value in column \"actor_id\" of relation \"audit_logs\" violates not-null constraint\nDETAIL:  Failing row contains (47, null, user, reservation.cancelled, 35, reservation, {\"reservation_id\": 35}, null, 2025-12-29 13:43:09.538142+00).\n\n[SQL: INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id]\n[parameters: {'actor_id': None, 'actor_type': 'user', 'action': 'reservation.cancelled', 'target_id': 35, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 35}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 43, 9, 538142, tzinfo=datetime.timezone.utc)}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)", "module": "event_bus", "function": "_safe_invoke", "line": 45, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\npsycopg2.errors.NotNullViolation: null value in column \"actor_id\" of relation \"audit_logs\" violates not-null constraint\nDETAIL:  Failing row contains (47, null, user, reservation.cancelled, 35, reservation, {\"reservation_id\": 35}, null, 2025-12-29 13:43:09.538142+00).\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\event_bus.py\", line 42, in _safe_invoke\n    await handler(payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\audit\\handlers.py\", line 28, in on_reservation_cancelled\n    write_audit_log(\n    ~~~~~~~~~~~~~~~^\n        db=db,\n        ^^^^^^\n    ...<5 lines>...\n        payload=payload,\n        ^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\audit\\service.py\", line 31, in write_audit_log\n    return repo.create(db, entry)\n           ~~~~~~~~~~~^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\audit\\repository.py\", line 17, in create\n    db.commit()\n    ~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2030, in commit\n    trans.commit(_to_root=True)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^\n  File \"<string>\", line 2, in commit\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\state_changes.py\", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 1311, in commit\n    self._prepare_impl()\n    ~~~~~~~~~~~~~~~~~~^^\n  File \"<string>\", line 2, in _prepare_impl\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\state_changes.py\", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 1286, in _prepare_impl\n    self.session.flush()\n    ~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 4331, in flush\n    self._flush(objects)\n    ~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 4466, in _flush\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 4427, in _flush\n    flush_context.execute()\n    ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py\", line 466, in execute\n    rec.execute(self)\n    ~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py\", line 642, in execute\n    util.preloaded.orm_persistence.save_obj(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self.mapper,\n        ^^^^^^^^^^^^\n        uow.states_for_mapper_hierarchy(self.mapper, False, False),\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        uow,\n        ^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\persistence.py\", line 93, in save_obj\n    _emit_insert_statements(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        base_mapper,\n        ^^^^^^^^^^^^\n    ...<3 lines>...\n        insert,\n        ^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\persistence.py\", line 1233, in _emit_insert_statements\n    result = connection.execute(\n        statement,\n        params,\n        execution_options=execution_options,\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\nsqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column \"actor_id\" of relation \"audit_logs\" violates not-null constraint\nDETAIL:  Failing row contains (47, null, user, reservation.cancelled, 35, reservation, {\"reservation_id\": 35}, null, 2025-12-29 13:43:09.538142+00).\n\n[SQL: INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id]\n[parameters: {'actor_id': None, 'actor_type': 'user', 'action': 'reservation.cancelled', 'target_id': 35, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 35}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 43, 9, 538142, tzinfo=datetime.timezone.utc)}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)"}
{"timestamp": "2025-12-29T13:43:09.565535+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/35/cancel \u2192 200 (0.092s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.567166+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:11.614161+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.616931+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.617724+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.618216+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.62s ago] {'email_1': 'test_admin_1767015789.567222@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.823713+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.824414+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.6s ago] {'email': 'test_admin_1767015789.567222@example.com', 'hashed_password': '$2b$12$.wr/z9ICxZsUC8K3blqkLuT/ddDmWVpxkTJnYe5wDnT5273kXzfIe', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.826245+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.831811+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.832755+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.833280+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.6s ago] {'pk_1': 72}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.835382+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 72, 'email': 'test_admin_1767015789.567222@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.836569+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.838764+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.839476+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.839889+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.57s ago] {'user_id_1': 72, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.842187+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.842548+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.57s ago] {'user_id': 72, 'name': None, 'email': 'test_admin_1767015789.567222@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.844327+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.848881+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.849415+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.849904+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.56s ago] {'pk_1': 72}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.852389+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 72, 'user_id': 72, 'email': 'test_admin_1767015789.567222@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.852758+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.853109+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.853502+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.854670+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.855887+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.856218+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.86s ago] {'email_1': 'test_admin_1767015789.567222@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:12.061476+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 72, 'email': 'test_admin_1767015789.567222@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:12.062562+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:12.062744+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:12.063786+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.450s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:12.064803+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:14.119046+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "7f08f703-2f1d-432f-9fef-675a9770cbb6"}
{"timestamp": "2025-12-29T13:43:14.121782+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7f08f703-2f1d-432f-9fef-675a9770cbb6"}
{"timestamp": "2025-12-29T13:43:14.122334+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f08f703-2f1d-432f-9fef-675a9770cbb6"}
{"timestamp": "2025-12-29T13:43:14.122695+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.56s ago] {'title_1': 'Test Movie 1767015789.567222'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f08f703-2f1d-432f-9fef-675a9770cbb6"}
{"timestamp": "2025-12-29T13:43:14.126059+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f08f703-2f1d-432f-9fef-675a9770cbb6"}
{"timestamp": "2025-12-29T13:43:14.126794+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.56s ago] {'title': 'Test Movie 1767015789.567222', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f08f703-2f1d-432f-9fef-675a9770cbb6"}
{"timestamp": "2025-12-29T13:43:14.129288+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "7f08f703-2f1d-432f-9fef-675a9770cbb6"}
{"timestamp": "2025-12-29T13:43:14.135662+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7f08f703-2f1d-432f-9fef-675a9770cbb6"}
{"timestamp": "2025-12-29T13:43:14.136232+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f08f703-2f1d-432f-9fef-675a9770cbb6"}
{"timestamp": "2025-12-29T13:43:14.136589+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.56s ago] {'pk_1': 45}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f08f703-2f1d-432f-9fef-675a9770cbb6"}
{"timestamp": "2025-12-29T13:43:14.138963+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 45}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "7f08f703-2f1d-432f-9fef-675a9770cbb6"}
{"timestamp": "2025-12-29T13:43:14.140088+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "7f08f703-2f1d-432f-9fef-675a9770cbb6"}
{"timestamp": "2025-12-29T13:43:14.140276+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "7f08f703-2f1d-432f-9fef-675a9770cbb6"}
{"timestamp": "2025-12-29T13:43:14.141368+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "7f08f703-2f1d-432f-9fef-675a9770cbb6"}
{"timestamp": "2025-12-29T13:43:14.142189+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "7f08f703-2f1d-432f-9fef-675a9770cbb6"}
{"timestamp": "2025-12-29T13:43:16.181733+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "6d057e52-4777-49e8-bfff-70ed3d22f27f"}
{"timestamp": "2025-12-29T13:43:16.184426+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6d057e52-4777-49e8-bfff-70ed3d22f27f"}
{"timestamp": "2025-12-29T13:43:16.184982+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6d057e52-4777-49e8-bfff-70ed3d22f27f"}
{"timestamp": "2025-12-29T13:43:16.185381+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.55s ago] {'name_1': 'Test Layout 1767015789.567222'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6d057e52-4777-49e8-bfff-70ed3d22f27f"}
{"timestamp": "2025-12-29T13:43:16.188030+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6d057e52-4777-49e8-bfff-70ed3d22f27f"}
{"timestamp": "2025-12-29T13:43:16.188507+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.55s ago] {'name': 'Test Layout 1767015789.567222', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6d057e52-4777-49e8-bfff-70ed3d22f27f"}
{"timestamp": "2025-12-29T13:43:16.190307+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6d057e52-4777-49e8-bfff-70ed3d22f27f"}
{"timestamp": "2025-12-29T13:43:16.194808+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6d057e52-4777-49e8-bfff-70ed3d22f27f"}
{"timestamp": "2025-12-29T13:43:16.195482+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6d057e52-4777-49e8-bfff-70ed3d22f27f"}
{"timestamp": "2025-12-29T13:43:16.196031+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.54s ago] {'pk_1': 44}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6d057e52-4777-49e8-bfff-70ed3d22f27f"}
{"timestamp": "2025-12-29T13:43:16.198129+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 44}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "6d057e52-4777-49e8-bfff-70ed3d22f27f"}
{"timestamp": "2025-12-29T13:43:16.199196+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6d057e52-4777-49e8-bfff-70ed3d22f27f"}
{"timestamp": "2025-12-29T13:43:16.199493+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "6d057e52-4777-49e8-bfff-70ed3d22f27f"}
{"timestamp": "2025-12-29T13:43:16.200869+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.019s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "6d057e52-4777-49e8-bfff-70ed3d22f27f"}
{"timestamp": "2025-12-29T13:43:16.201956+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6d057e52-4777-49e8-bfff-70ed3d22f27f"}
{"timestamp": "2025-12-29T13:43:18.241758+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "adc7f9c3-29d3-4157-8ab1-2d900aadd82f"}
{"timestamp": "2025-12-29T13:43:18.244262+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "adc7f9c3-29d3-4157-8ab1-2d900aadd82f"}
{"timestamp": "2025-12-29T13:43:18.244825+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adc7f9c3-29d3-4157-8ab1-2d900aadd82f"}
{"timestamp": "2025-12-29T13:43:18.245175+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.55s ago] {'name_1': 'Test Screen 1767015789.567222', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adc7f9c3-29d3-4157-8ab1-2d900aadd82f"}
{"timestamp": "2025-12-29T13:43:18.247768+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adc7f9c3-29d3-4157-8ab1-2d900aadd82f"}
{"timestamp": "2025-12-29T13:43:18.248147+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.55s ago] {'id_1': 44, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adc7f9c3-29d3-4157-8ab1-2d900aadd82f"}
{"timestamp": "2025-12-29T13:43:18.250134+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adc7f9c3-29d3-4157-8ab1-2d900aadd82f"}
{"timestamp": "2025-12-29T13:43:18.250492+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.54s ago] {'name': 'Test Screen 1767015789.567222', 'capacity': 150, 'seat_layout_id': 44}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adc7f9c3-29d3-4157-8ab1-2d900aadd82f"}
{"timestamp": "2025-12-29T13:43:18.252409+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "adc7f9c3-29d3-4157-8ab1-2d900aadd82f"}
{"timestamp": "2025-12-29T13:43:18.257507+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "adc7f9c3-29d3-4157-8ab1-2d900aadd82f"}
{"timestamp": "2025-12-29T13:43:18.258130+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adc7f9c3-29d3-4157-8ab1-2d900aadd82f"}
{"timestamp": "2025-12-29T13:43:18.258621+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.54s ago] {'pk_1': 44}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adc7f9c3-29d3-4157-8ab1-2d900aadd82f"}
{"timestamp": "2025-12-29T13:43:18.260483+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 44}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "adc7f9c3-29d3-4157-8ab1-2d900aadd82f"}
{"timestamp": "2025-12-29T13:43:18.261500+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "adc7f9c3-29d3-4157-8ab1-2d900aadd82f"}
{"timestamp": "2025-12-29T13:43:18.261674+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "adc7f9c3-29d3-4157-8ab1-2d900aadd82f"}
{"timestamp": "2025-12-29T13:43:18.262895+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.021s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "adc7f9c3-29d3-4157-8ab1-2d900aadd82f"}
{"timestamp": "2025-12-29T13:43:18.263820+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "adc7f9c3-29d3-4157-8ab1-2d900aadd82f"}
{"timestamp": "2025-12-29T13:43:20.298531+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:20.301283+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:20.301953+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:20.302323+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.53s ago] {'pk_1': 45}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:20.305140+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:20.305680+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.53s ago] {'pk_1': 44}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:20.307949+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:20.308445+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.53s ago] {'screen_id_1': 44, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:20.310676+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:20.311254+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.53s ago] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 45, 'screen_id': 44}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:20.313872+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:20.318605+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:20.319307+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:20.319764+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.53s ago] {'pk_1': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:20.322298+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:20.322696+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.53s ago] {'pk_1': 45}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:20.324598+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:20.325214+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.53s ago] {'pk_1': 44}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:20.326820+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 36}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:20.328014+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:20.328348+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:20.329861+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.031s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:20.331146+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:22.377607+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.380210+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.380832+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.381252+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.39s ago] {'email_1': 'test_failpay_1767015800.330936@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.585316+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.585781+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.36s ago] {'email': 'test_failpay_1767015800.330936@example.com', 'hashed_password': '$2b$12$1YPswckaskWd9RVhWLnCbuDgs6W.CPMx3Fnl84OMq6XL8b4IOrZ2a', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.587597+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.592018+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.592762+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.593281+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.36s ago] {'pk_1': 73}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.595381+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 73, 'email': 'test_failpay_1767015800.330936@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.596978+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.599576+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.600161+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.600463+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.33s ago] {'user_id_1': 73, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.603043+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.603738+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.33s ago] {'user_id': 73, 'name': None, 'email': 'test_failpay_1767015800.330936@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.605849+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.609876+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.610782+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.611135+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.32s ago] {'pk_1': 73}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.613588+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 73, 'user_id': 73, 'email': 'test_failpay_1767015800.330936@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.613980+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.614152+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.614535+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.615823+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.617388+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.617946+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.62s ago] {'email_1': 'test_failpay_1767015800.330936@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.821529+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 73, 'email': 'test_failpay_1767015800.330936@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.822743+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.822952+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.824051+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.446s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.824865+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:24.867040+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.869910+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.870581+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.870997+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.53s ago] {'pk_1': 73}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.874130+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.874695+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.53s ago] {'showtime_id_1': 36, 'seat_code_1': 'R7-7', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.876932+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.877366+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.53s ago] {'user_id': 73, 'showtime_id': 36, 'seat_code': 'R7-7', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 13, 43, 24, 876444, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 53, 24, 876176, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.879275+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.883562+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.884206+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.884636+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.53s ago] {'pk_1': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.886712+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 36, 'user_id': 73, 'showtime_id': 36, 'seat_code': 'R7-7'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.888203+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.890323+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.890975+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.891276+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.55s ago] {'showtime_id_1': 36, 'seat_code_1': 'R7-7', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.893817+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.894400+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.53s ago] {'seat_code': 'R7-7', 'showtime_id': 36, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.896501+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.897112+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.52s ago] {'status': 'LOCKED', 'locked_by_user_id': 73, 'lock_expires_at': datetime.datetime(2025, 12, 29, 13, 53, 24, 895975, tzinfo=datetime.timezone.utc), 'seat_locks_id': 32}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.898858+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.903259+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.903836+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.904179+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.52s ago] {'pk_1': 32}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.906112+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 36, 'seat_code': 'R7-7', 'user_id': 73, 'expires_at': '2025-12-29T13:53:24.895975+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.906302+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.906432+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.906653+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.907683+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.908039+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 36, 'user_id': 73, 'showtime_id': 36, 'seat_code': 'R7-7'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.908539+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 36", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.910059+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.910559+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.910800+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.52s ago] {'user_id': 73, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.913571+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.918640+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.919446+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.920071+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.52s ago] {'pk_1': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.923148+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 36, 'reservation_id': 36, 'user_id': 73, 'showtime_id': 36, 'seat_code': 'R7-7'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.923587+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.924458+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 36", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.926546+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.927218+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.927685+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.5s ago] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.931305+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 36, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.931703+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.932627+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 36, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.934168+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.934743+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.935033+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.48s ago] {'pk_1': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.937719+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.938284+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.48s ago] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.940036+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.944137+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.944817+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.945094+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.54s ago] {'pk_1': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.947071+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 36 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.947404+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.948495+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.948723+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 36: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.949213+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.950467+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.950692+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 36", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.951087+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.952285+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.954154+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.954703+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.955298+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.48s ago] {'actor_id': 73, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 36, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 36, \"user_id\": 73, \"showtime_id\": 36, \"seat_code\": \"R7-7\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 43, 24, 954335, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.957745+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.961942+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.962435+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.962655+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.47s ago] {'pk_1': 48}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.964613+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.965659+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.966704+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.100s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.967571+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:27.007674+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "d4e192e7-05be-4c11-8925-82a51a4a4456"}
{"timestamp": "2025-12-29T13:43:27.010356+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d4e192e7-05be-4c11-8925-82a51a4a4456"}
{"timestamp": "2025-12-29T13:43:27.011033+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d4e192e7-05be-4c11-8925-82a51a4a4456"}
{"timestamp": "2025-12-29T13:43:27.011433+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 49.67s ago] {'pk_1': 73}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d4e192e7-05be-4c11-8925-82a51a4a4456"}
{"timestamp": "2025-12-29T13:43:27.014486+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d4e192e7-05be-4c11-8925-82a51a4a4456"}
{"timestamp": "2025-12-29T13:43:27.014920+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.47s ago] {'user_id_1': 73}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d4e192e7-05be-4c11-8925-82a51a4a4456"}
{"timestamp": "2025-12-29T13:43:27.017192+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.010s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "d4e192e7-05be-4c11-8925-82a51a4a4456"}
{"timestamp": "2025-12-29T13:43:27.018168+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d4e192e7-05be-4c11-8925-82a51a4a4456"}
{"timestamp": "2025-12-29T13:43:29.060580+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/order/36/initiate", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "503e0cdc-cfe5-4683-b060-fb9b387b7df0"}
{"timestamp": "2025-12-29T13:43:29.063051+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "503e0cdc-cfe5-4683-b060-fb9b387b7df0"}
{"timestamp": "2025-12-29T13:43:29.063686+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "503e0cdc-cfe5-4683-b060-fb9b387b7df0"}
{"timestamp": "2025-12-29T13:43:29.064014+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 51.73s ago] {'pk_1': 73}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "503e0cdc-cfe5-4683-b060-fb9b387b7df0"}
{"timestamp": "2025-12-29T13:43:29.066787+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "503e0cdc-cfe5-4683-b060-fb9b387b7df0"}
{"timestamp": "2025-12-29T13:43:29.067259+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 51.61s ago] {'pk_1': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "503e0cdc-cfe5-4683-b060-fb9b387b7df0"}
{"timestamp": "2025-12-29T13:43:29.069438+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO payment_attempts (order_id, amount_attempted, status, final_amount, failure_reason, provider_payment_id, created_at) VALUES (%(order_id)s, %(amount_attempted)s, %(status)s, %(final_amount)s, %(failure_reason)s, %(provider_payment_id)s, %(created_at)s) RETURNING payment_attempts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "503e0cdc-cfe5-4683-b060-fb9b387b7df0"}
{"timestamp": "2025-12-29T13:43:29.069834+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.45s ago] {'order_id': 36, 'amount_attempted': 1000, 'status': 'PENDING', 'final_amount': 1000, 'failure_reason': None, 'provider_payment_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 43, 29, 69000, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "503e0cdc-cfe5-4683-b060-fb9b387b7df0"}
{"timestamp": "2025-12-29T13:43:29.071725+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "503e0cdc-cfe5-4683-b060-fb9b387b7df0"}
{"timestamp": "2025-12-29T13:43:29.076929+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "503e0cdc-cfe5-4683-b060-fb9b387b7df0"}
{"timestamp": "2025-12-29T13:43:29.077609+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "503e0cdc-cfe5-4683-b060-fb9b387b7df0"}
{"timestamp": "2025-12-29T13:43:29.078011+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.45s ago] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "503e0cdc-cfe5-4683-b060-fb9b387b7df0"}
{"timestamp": "2025-12-29T13:43:29.080376+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "503e0cdc-cfe5-4683-b060-fb9b387b7df0"}
{"timestamp": "2025-12-29T13:43:29.080801+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.45s ago] {'pk_1': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "503e0cdc-cfe5-4683-b060-fb9b387b7df0"}
{"timestamp": "2025-12-29T13:43:29.082355+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.pending with payload: {'payment_attempt_id': 24, 'order_id': 36, 'amount_attempted': 1000, 'final_amount': 1000, 'user_id': 73}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "503e0cdc-cfe5-4683-b060-fb9b387b7df0"}
{"timestamp": "2025-12-29T13:43:29.083364+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.pending to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "503e0cdc-cfe5-4683-b060-fb9b387b7df0"}
{"timestamp": "2025-12-29T13:43:29.083619+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: payment.pending", "module": "event_bus", "function": "publish", "line": 31, "request_id": "503e0cdc-cfe5-4683-b060-fb9b387b7df0"}
{"timestamp": "2025-12-29T13:43:29.084771+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/order/36/initiate \u2192 200 (0.024s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "503e0cdc-cfe5-4683-b060-fb9b387b7df0"}
{"timestamp": "2025-12-29T13:43:29.085687+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "503e0cdc-cfe5-4683-b060-fb9b387b7df0"}
{"timestamp": "2025-12-29T13:43:31.135837+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /admin/payments/24/fail", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b74f55f5-82a8-46b1-985a-035eb9713768"}
{"timestamp": "2025-12-29T13:43:31.138525+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b74f55f5-82a8-46b1-985a-035eb9713768"}
{"timestamp": "2025-12-29T13:43:31.139134+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b74f55f5-82a8-46b1-985a-035eb9713768"}
{"timestamp": "2025-12-29T13:43:31.139464+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 53.8s ago] {'pk_1': 72}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b74f55f5-82a8-46b1-985a-035eb9713768"}
{"timestamp": "2025-12-29T13:43:31.142187+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b74f55f5-82a8-46b1-985a-035eb9713768"}
{"timestamp": "2025-12-29T13:43:31.143711+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /admin/payments/24/fail \u2192 403 (0.008s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b74f55f5-82a8-46b1-985a-035eb9713768"}
{"timestamp": "2025-12-29T13:43:33.187754+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.190753+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.191463+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.191973+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.2s ago] {'email_1': 'test_admin_1767015811.1448884@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.396484+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.396928+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.17s ago] {'email': 'test_admin_1767015811.1448884@example.com', 'hashed_password': '$2b$12$S5dbixW.Tt1hZYa8sLnSeOoKYiYsaHoBJ5LS8w6tl5Q0tg/kTLpZq', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.398718+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.403875+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.404556+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.404907+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.17s ago] {'pk_1': 74}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.406945+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 74, 'email': 'test_admin_1767015811.1448884@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.407861+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.409510+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.410046+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.410367+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.14s ago] {'user_id_1': 74, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.412876+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.413107+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.14s ago] {'user_id': 74, 'name': None, 'email': 'test_admin_1767015811.1448884@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.414622+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.418360+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.419112+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.419478+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.13s ago] {'pk_1': 74}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.421405+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 74, 'user_id': 74, 'email': 'test_admin_1767015811.1448884@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.421587+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.421737+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.422014+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.423114+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.424161+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.424693+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.43s ago] {'email_1': 'test_admin_1767015811.1448884@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.632798+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 74, 'email': 'test_admin_1767015811.1448884@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.634018+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.634272+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.635430+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.448s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.636360+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:35.677198+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "87f4a4a9-7b13-403a-b0be-78d266d90db3"}
{"timestamp": "2025-12-29T13:43:35.679883+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "87f4a4a9-7b13-403a-b0be-78d266d90db3"}
{"timestamp": "2025-12-29T13:43:35.680561+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "87f4a4a9-7b13-403a-b0be-78d266d90db3"}
{"timestamp": "2025-12-29T13:43:35.680976+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.12s ago] {'title_1': 'Test Movie 1767015811.1448884'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "87f4a4a9-7b13-403a-b0be-78d266d90db3"}
{"timestamp": "2025-12-29T13:43:35.683545+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "87f4a4a9-7b13-403a-b0be-78d266d90db3"}
{"timestamp": "2025-12-29T13:43:35.684073+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.12s ago] {'title': 'Test Movie 1767015811.1448884', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "87f4a4a9-7b13-403a-b0be-78d266d90db3"}
{"timestamp": "2025-12-29T13:43:35.686033+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "87f4a4a9-7b13-403a-b0be-78d266d90db3"}
{"timestamp": "2025-12-29T13:43:35.691586+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "87f4a4a9-7b13-403a-b0be-78d266d90db3"}
{"timestamp": "2025-12-29T13:43:35.692415+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "87f4a4a9-7b13-403a-b0be-78d266d90db3"}
{"timestamp": "2025-12-29T13:43:35.692788+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.12s ago] {'pk_1': 46}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "87f4a4a9-7b13-403a-b0be-78d266d90db3"}
{"timestamp": "2025-12-29T13:43:35.695033+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 46}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "87f4a4a9-7b13-403a-b0be-78d266d90db3"}
{"timestamp": "2025-12-29T13:43:35.695937+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "87f4a4a9-7b13-403a-b0be-78d266d90db3"}
{"timestamp": "2025-12-29T13:43:35.696071+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "87f4a4a9-7b13-403a-b0be-78d266d90db3"}
{"timestamp": "2025-12-29T13:43:35.697226+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.020s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "87f4a4a9-7b13-403a-b0be-78d266d90db3"}
{"timestamp": "2025-12-29T13:43:35.698181+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "87f4a4a9-7b13-403a-b0be-78d266d90db3"}
{"timestamp": "2025-12-29T13:43:37.740315+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "620d1b78-c73b-4c67-ba5d-496b875c6b3c"}
{"timestamp": "2025-12-29T13:43:37.743136+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "620d1b78-c73b-4c67-ba5d-496b875c6b3c"}
{"timestamp": "2025-12-29T13:43:37.743657+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "620d1b78-c73b-4c67-ba5d-496b875c6b3c"}
{"timestamp": "2025-12-29T13:43:37.743944+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.1s ago] {'name_1': 'Test Layout 1767015811.1448884'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "620d1b78-c73b-4c67-ba5d-496b875c6b3c"}
{"timestamp": "2025-12-29T13:43:37.746526+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "620d1b78-c73b-4c67-ba5d-496b875c6b3c"}
{"timestamp": "2025-12-29T13:43:37.747049+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.1s ago] {'name': 'Test Layout 1767015811.1448884', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "620d1b78-c73b-4c67-ba5d-496b875c6b3c"}
{"timestamp": "2025-12-29T13:43:37.748899+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "620d1b78-c73b-4c67-ba5d-496b875c6b3c"}
{"timestamp": "2025-12-29T13:43:37.754420+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "620d1b78-c73b-4c67-ba5d-496b875c6b3c"}
{"timestamp": "2025-12-29T13:43:37.755484+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "620d1b78-c73b-4c67-ba5d-496b875c6b3c"}
{"timestamp": "2025-12-29T13:43:37.755943+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.1s ago] {'pk_1': 45}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "620d1b78-c73b-4c67-ba5d-496b875c6b3c"}
{"timestamp": "2025-12-29T13:43:37.758548+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 45}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "620d1b78-c73b-4c67-ba5d-496b875c6b3c"}
{"timestamp": "2025-12-29T13:43:37.759791+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "620d1b78-c73b-4c67-ba5d-496b875c6b3c"}
{"timestamp": "2025-12-29T13:43:37.760006+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "620d1b78-c73b-4c67-ba5d-496b875c6b3c"}
{"timestamp": "2025-12-29T13:43:37.761040+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.021s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "620d1b78-c73b-4c67-ba5d-496b875c6b3c"}
{"timestamp": "2025-12-29T13:43:37.762003+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "620d1b78-c73b-4c67-ba5d-496b875c6b3c"}
{"timestamp": "2025-12-29T13:43:39.803800+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "a6d5d385-bac5-4377-938b-af807899085a"}
{"timestamp": "2025-12-29T13:43:39.806508+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a6d5d385-bac5-4377-938b-af807899085a"}
{"timestamp": "2025-12-29T13:43:39.807118+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a6d5d385-bac5-4377-938b-af807899085a"}
{"timestamp": "2025-12-29T13:43:39.807490+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.11s ago] {'name_1': 'Test Screen 1767015811.1448884', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a6d5d385-bac5-4377-938b-af807899085a"}
{"timestamp": "2025-12-29T13:43:39.810099+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a6d5d385-bac5-4377-938b-af807899085a"}
{"timestamp": "2025-12-29T13:43:39.810482+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.11s ago] {'id_1': 45, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a6d5d385-bac5-4377-938b-af807899085a"}
{"timestamp": "2025-12-29T13:43:39.812463+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a6d5d385-bac5-4377-938b-af807899085a"}
{"timestamp": "2025-12-29T13:43:39.812824+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.1s ago] {'name': 'Test Screen 1767015811.1448884', 'capacity': 150, 'seat_layout_id': 45}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a6d5d385-bac5-4377-938b-af807899085a"}
{"timestamp": "2025-12-29T13:43:39.814906+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "a6d5d385-bac5-4377-938b-af807899085a"}
{"timestamp": "2025-12-29T13:43:39.820181+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a6d5d385-bac5-4377-938b-af807899085a"}
{"timestamp": "2025-12-29T13:43:39.820789+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a6d5d385-bac5-4377-938b-af807899085a"}
{"timestamp": "2025-12-29T13:43:39.821210+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.1s ago] {'pk_1': 45}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a6d5d385-bac5-4377-938b-af807899085a"}
{"timestamp": "2025-12-29T13:43:39.823126+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 45}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "a6d5d385-bac5-4377-938b-af807899085a"}
{"timestamp": "2025-12-29T13:43:39.824106+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "a6d5d385-bac5-4377-938b-af807899085a"}
{"timestamp": "2025-12-29T13:43:39.824286+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "a6d5d385-bac5-4377-938b-af807899085a"}
{"timestamp": "2025-12-29T13:43:39.825326+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "a6d5d385-bac5-4377-938b-af807899085a"}
{"timestamp": "2025-12-29T13:43:39.826365+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a6d5d385-bac5-4377-938b-af807899085a"}
{"timestamp": "2025-12-29T13:43:41.868147+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:41.870670+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:41.871293+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:41.871570+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.1s ago] {'pk_1': 46}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:41.874107+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:41.874567+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.1s ago] {'pk_1': 45}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:41.876768+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:41.877168+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.1s ago] {'screen_id_1': 45, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:41.879082+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:41.879564+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.1s ago] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 46, 'screen_id': 45}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:41.881441+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:41.886121+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:41.886816+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:41.887376+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.1s ago] {'pk_1': 37}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:41.889976+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:41.890205+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.09s ago] {'pk_1': 46}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:41.892118+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:41.892377+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.09s ago] {'pk_1': 45}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:41.894011+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 37}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:41.895004+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:41.895191+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:41.896270+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.028s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:41.897267+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:43.937572+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:43.940558+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:43.941235+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:43.941594+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 79.95s ago] {'email_1': 'test_admincancel_1767015821.8970177@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.146783+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.147380+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 79.92s ago] {'email': 'test_admincancel_1767015821.8970177@example.com', 'hashed_password': '$2b$12$bPNYWjHjDGrlODaATV0FoOHaevGLL5epJ7WvM.zd7wXElwRlEePZu', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.149073+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.154754+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.155248+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.155548+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 79.92s ago] {'pk_1': 75}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.157353+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 75, 'email': 'test_admincancel_1767015821.8970177@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.158403+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.160219+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.161034+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.161443+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 79.89s ago] {'user_id_1': 75, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.163574+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.163812+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 79.89s ago] {'user_id': 75, 'name': None, 'email': 'test_admincancel_1767015821.8970177@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.165257+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.169250+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.169875+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.170358+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 79.88s ago] {'pk_1': 75}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.172254+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 75, 'user_id': 75, 'email': 'test_admincancel_1767015821.8970177@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.172407+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.172528+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.172752+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.173799+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.174832+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.175264+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 80.18s ago] {'email_1': 'test_admincancel_1767015821.8970177@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.378701+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 75, 'email': 'test_admincancel_1767015821.8970177@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.379617+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.379748+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.380742+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.443s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.381664+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:46.443007+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.446218+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.446898+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.447345+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.11s ago] {'pk_1': 75}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.450547+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.451055+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.11s ago] {'showtime_id_1': 37, 'seat_code_1': 'R8-8', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.453159+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.453488+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.11s ago] {'user_id': 75, 'showtime_id': 37, 'seat_code': 'R8-8', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 13, 43, 46, 452745, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 53, 46, 452477, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.455268+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.460353+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.460828+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.461131+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.11s ago] {'pk_1': 37}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.463010+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 37, 'user_id': 75, 'showtime_id': 37, 'seat_code': 'R8-8'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.464096+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.466013+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.466596+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.466811+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.12s ago] {'showtime_id_1': 37, 'seat_code_1': 'R8-8', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.469166+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.469440+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.1s ago] {'seat_code': 'R8-8', 'showtime_id': 37, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.471353+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.471609+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.1s ago] {'status': 'LOCKED', 'locked_by_user_id': 75, 'lock_expires_at': datetime.datetime(2025, 12, 29, 13, 53, 46, 470878, tzinfo=datetime.timezone.utc), 'seat_locks_id': 33}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.473289+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.477163+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.477793+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.478020+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.1s ago] {'pk_1': 33}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.480261+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 37, 'seat_code': 'R8-8', 'user_id': 75, 'expires_at': '2025-12-29T13:53:46.470878+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.480445+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.480573+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.480793+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.481768+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.482198+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 37, 'user_id': 75, 'showtime_id': 37, 'seat_code': 'R8-8'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.482342+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 37", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.483757+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.484394+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.484825+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.09s ago] {'user_id': 75, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 37}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.487337+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.491274+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.491866+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.492124+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.09s ago] {'pk_1': 37}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.494331+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 37, 'reservation_id': 37, 'user_id': 75, 'showtime_id': 37, 'seat_code': 'R8-8'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.494481+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.494815+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 37", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.496058+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.496456+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.496651+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.07s ago] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.498640+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 37, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.498807+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.499337+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 37, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.501187+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.501954+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.502600+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.05s ago] {'pk_1': 37}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.505705+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.506078+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.05s ago] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 37}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.508144+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.512520+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.513172+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.513566+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.11s ago] {'pk_1': 37}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.515750+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 37 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.516133+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.517221+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.517387+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 37: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.517740+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.519127+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.519416+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 37", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.519679+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.520832+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.522664+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.523274+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.523695+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.04s ago] {'actor_id': 75, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 37, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 37, \"user_id\": 75, \"showtime_id\": 37, \"seat_code\": \"R8-8\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 43, 46, 522840, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.526017+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.529691+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.530303+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.530775+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.04s ago] {'pk_1': 49}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.532653+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.533586+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.534700+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.092s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.535705+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:48.584435+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /admin/reservations/37/cancel", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "51b60c82-94ba-493c-9713-4f6b81af60cf"}
{"timestamp": "2025-12-29T13:43:48.587036+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "51b60c82-94ba-493c-9713-4f6b81af60cf"}
{"timestamp": "2025-12-29T13:43:48.587630+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51b60c82-94ba-493c-9713-4f6b81af60cf"}
{"timestamp": "2025-12-29T13:43:48.587950+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.25s ago] {'pk_1': 74}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51b60c82-94ba-493c-9713-4f6b81af60cf"}
{"timestamp": "2025-12-29T13:43:48.591018+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "51b60c82-94ba-493c-9713-4f6b81af60cf"}
{"timestamp": "2025-12-29T13:43:48.592772+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /admin/reservations/37/cancel \u2192 403 (0.008s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "51b60c82-94ba-493c-9713-4f6b81af60cf"}
{"timestamp": "2025-12-29T13:43:50.643408+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.645993+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.646618+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.646975+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.65s ago] {'email_1': 'test_admin_1767015828.59374@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.851293+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.851747+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.63s ago] {'email': 'test_admin_1767015828.59374@example.com', 'hashed_password': '$2b$12$1imI1HzvBVawWBdgsx7YCO/aGvnBM.08ywhy8/aB3/CXnAzGWXVQ.', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.853610+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.859137+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.859922+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.860532+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.63s ago] {'pk_1': 76}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.863346+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 76, 'email': 'test_admin_1767015828.59374@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.864509+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.866727+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.867304+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.867650+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.59s ago] {'user_id_1': 76, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.870233+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.870753+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.59s ago] {'user_id': 76, 'name': None, 'email': 'test_admin_1767015828.59374@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.872540+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.876876+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.877593+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.878084+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.59s ago] {'pk_1': 76}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.880090+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 76, 'user_id': 76, 'email': 'test_admin_1767015828.59374@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.880297+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.880430+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.880743+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.881870+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.883251+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.883739+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.89s ago] {'email_1': 'test_admin_1767015828.59374@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:51.092025+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 76, 'email': 'test_admin_1767015828.59374@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:51.093207+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:51.093408+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:51.094474+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.451s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:51.095373+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:53.132076+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "191e53ac-d3b7-413d-a296-ac8c18f09685"}
{"timestamp": "2025-12-29T13:43:53.134560+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "191e53ac-d3b7-413d-a296-ac8c18f09685"}
{"timestamp": "2025-12-29T13:43:53.135084+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "191e53ac-d3b7-413d-a296-ac8c18f09685"}
{"timestamp": "2025-12-29T13:43:53.135446+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.57s ago] {'title_1': 'Test Movie 1767015828.59374'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "191e53ac-d3b7-413d-a296-ac8c18f09685"}
{"timestamp": "2025-12-29T13:43:53.137989+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "191e53ac-d3b7-413d-a296-ac8c18f09685"}
{"timestamp": "2025-12-29T13:43:53.138440+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.57s ago] {'title': 'Test Movie 1767015828.59374', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "191e53ac-d3b7-413d-a296-ac8c18f09685"}
{"timestamp": "2025-12-29T13:43:53.140286+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "191e53ac-d3b7-413d-a296-ac8c18f09685"}
{"timestamp": "2025-12-29T13:43:53.145367+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "191e53ac-d3b7-413d-a296-ac8c18f09685"}
{"timestamp": "2025-12-29T13:43:53.146032+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "191e53ac-d3b7-413d-a296-ac8c18f09685"}
{"timestamp": "2025-12-29T13:43:53.146456+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.57s ago] {'pk_1': 47}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "191e53ac-d3b7-413d-a296-ac8c18f09685"}
{"timestamp": "2025-12-29T13:43:53.148569+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 47}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "191e53ac-d3b7-413d-a296-ac8c18f09685"}
{"timestamp": "2025-12-29T13:43:53.149509+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "191e53ac-d3b7-413d-a296-ac8c18f09685"}
{"timestamp": "2025-12-29T13:43:53.149691+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "191e53ac-d3b7-413d-a296-ac8c18f09685"}
{"timestamp": "2025-12-29T13:43:53.150745+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.019s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "191e53ac-d3b7-413d-a296-ac8c18f09685"}
{"timestamp": "2025-12-29T13:43:53.151611+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "191e53ac-d3b7-413d-a296-ac8c18f09685"}
{"timestamp": "2025-12-29T13:43:55.191658+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "9a13efc9-7633-4b84-bee7-a07095f9fc2f"}
{"timestamp": "2025-12-29T13:43:55.194126+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9a13efc9-7633-4b84-bee7-a07095f9fc2f"}
{"timestamp": "2025-12-29T13:43:55.194608+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9a13efc9-7633-4b84-bee7-a07095f9fc2f"}
{"timestamp": "2025-12-29T13:43:55.194975+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.56s ago] {'name_1': 'Test Layout 1767015828.59374'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9a13efc9-7633-4b84-bee7-a07095f9fc2f"}
{"timestamp": "2025-12-29T13:43:55.197769+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9a13efc9-7633-4b84-bee7-a07095f9fc2f"}
{"timestamp": "2025-12-29T13:43:55.198358+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.56s ago] {'name': 'Test Layout 1767015828.59374', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9a13efc9-7633-4b84-bee7-a07095f9fc2f"}
{"timestamp": "2025-12-29T13:43:55.200190+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "9a13efc9-7633-4b84-bee7-a07095f9fc2f"}
{"timestamp": "2025-12-29T13:43:55.204730+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9a13efc9-7633-4b84-bee7-a07095f9fc2f"}
{"timestamp": "2025-12-29T13:43:55.205365+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9a13efc9-7633-4b84-bee7-a07095f9fc2f"}
{"timestamp": "2025-12-29T13:43:55.205702+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.55s ago] {'pk_1': 46}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9a13efc9-7633-4b84-bee7-a07095f9fc2f"}
{"timestamp": "2025-12-29T13:43:55.207656+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 46}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "9a13efc9-7633-4b84-bee7-a07095f9fc2f"}
{"timestamp": "2025-12-29T13:43:55.208891+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "9a13efc9-7633-4b84-bee7-a07095f9fc2f"}
{"timestamp": "2025-12-29T13:43:55.209139+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "9a13efc9-7633-4b84-bee7-a07095f9fc2f"}
{"timestamp": "2025-12-29T13:43:55.210206+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.019s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "9a13efc9-7633-4b84-bee7-a07095f9fc2f"}
{"timestamp": "2025-12-29T13:43:55.211200+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "9a13efc9-7633-4b84-bee7-a07095f9fc2f"}
{"timestamp": "2025-12-29T13:43:57.249132+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "ac1e5504-f90e-4c35-8fce-d5bbeee0a087"}
{"timestamp": "2025-12-29T13:43:57.251704+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ac1e5504-f90e-4c35-8fce-d5bbeee0a087"}
{"timestamp": "2025-12-29T13:43:57.252321+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac1e5504-f90e-4c35-8fce-d5bbeee0a087"}
{"timestamp": "2025-12-29T13:43:57.252710+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.55s ago] {'name_1': 'Test Screen 1767015828.59374', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac1e5504-f90e-4c35-8fce-d5bbeee0a087"}
{"timestamp": "2025-12-29T13:43:57.255378+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac1e5504-f90e-4c35-8fce-d5bbeee0a087"}
{"timestamp": "2025-12-29T13:43:57.255853+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.55s ago] {'id_1': 46, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac1e5504-f90e-4c35-8fce-d5bbeee0a087"}
{"timestamp": "2025-12-29T13:43:57.257984+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac1e5504-f90e-4c35-8fce-d5bbeee0a087"}
{"timestamp": "2025-12-29T13:43:57.258396+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.55s ago] {'name': 'Test Screen 1767015828.59374', 'capacity': 150, 'seat_layout_id': 46}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac1e5504-f90e-4c35-8fce-d5bbeee0a087"}
{"timestamp": "2025-12-29T13:43:57.260110+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "ac1e5504-f90e-4c35-8fce-d5bbeee0a087"}
{"timestamp": "2025-12-29T13:43:57.265646+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ac1e5504-f90e-4c35-8fce-d5bbeee0a087"}
{"timestamp": "2025-12-29T13:43:57.266191+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac1e5504-f90e-4c35-8fce-d5bbeee0a087"}
{"timestamp": "2025-12-29T13:43:57.266543+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.55s ago] {'pk_1': 46}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac1e5504-f90e-4c35-8fce-d5bbeee0a087"}
{"timestamp": "2025-12-29T13:43:57.268665+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 46}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "ac1e5504-f90e-4c35-8fce-d5bbeee0a087"}
{"timestamp": "2025-12-29T13:43:57.269890+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "ac1e5504-f90e-4c35-8fce-d5bbeee0a087"}
{"timestamp": "2025-12-29T13:43:57.270209+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "ac1e5504-f90e-4c35-8fce-d5bbeee0a087"}
{"timestamp": "2025-12-29T13:43:57.271450+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "ac1e5504-f90e-4c35-8fce-d5bbeee0a087"}
{"timestamp": "2025-12-29T13:43:57.272549+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ac1e5504-f90e-4c35-8fce-d5bbeee0a087"}
{"timestamp": "2025-12-29T13:43:59.315008+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:43:59.318042+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:43:59.318686+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:43:59.319041+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.55s ago] {'pk_1': 47}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:43:59.321674+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:43:59.322090+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.55s ago] {'pk_1': 46}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:43:59.324083+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:43:59.324442+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.55s ago] {'screen_id_1': 46, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:43:59.326420+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:43:59.326737+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.54s ago] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 47, 'screen_id': 46}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:43:59.328945+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:43:59.334251+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:43:59.334946+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:43:59.335343+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.54s ago] {'pk_1': 38}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:43:59.337806+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:43:59.338138+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.54s ago] {'pk_1': 47}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:43:59.339920+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:43:59.340433+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.54s ago] {'pk_1': 46}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:43:59.342087+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 38}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:43:59.343172+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:43:59.343349+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:43:59.344383+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.030s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:43:59.345658+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:44:01.393296+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.396211+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.396852+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.397248+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 97.4s ago] {'email_1': 'test_concurrent1_1767015839.3454082@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.600778+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.601035+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 97.38s ago] {'email': 'test_concurrent1_1767015839.3454082@example.com', 'hashed_password': '$2b$12$gJa/BSIRKHFr6D9yYfMYgeRcoAnLkQNKPabO1xD9IwS3k9S7oGY9u', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.602583+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.607640+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.608571+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.609169+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 97.38s ago] {'pk_1': 77}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.611398+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 77, 'email': 'test_concurrent1_1767015839.3454082@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.612631+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.615057+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.615683+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.615904+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 97.34s ago] {'user_id_1': 77, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.618173+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.618727+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 97.34s ago] {'user_id': 77, 'name': None, 'email': 'test_concurrent1_1767015839.3454082@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.620740+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.624481+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.625072+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.625418+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 97.34s ago] {'pk_1': 77}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.628212+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 77, 'user_id': 77, 'email': 'test_concurrent1_1767015839.3454082@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.628388+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.628517+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.628747+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.629730+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.630858+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.631255+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 97.64s ago] {'email_1': 'test_concurrent1_1767015839.3454082@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.835858+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 77, 'email': 'test_concurrent1_1767015839.3454082@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.837051+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.837233+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.838307+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.445s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.839204+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:03.980880+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:03.983829+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:03.984616+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:03.985174+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 99.99s ago] {'email_1': 'test_concurrent2_1767015841.9391289@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.190256+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.190687+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 99.97s ago] {'email': 'test_concurrent2_1767015841.9391289@example.com', 'hashed_password': '$2b$12$CTw/Oj8YvxUy.qgJAZMqN.OSMB8u4ZIW9jgG.MtYhdWuwBCKP9J2a', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.192470+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.197178+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.198012+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.198493+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 99.97s ago] {'pk_1': 78}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.200671+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 78, 'email': 'test_concurrent2_1767015841.9391289@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.201713+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.203596+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.204265+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.204542+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 99.93s ago] {'user_id_1': 78, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.206743+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.206985+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 99.93s ago] {'user_id': 78, 'name': None, 'email': 'test_concurrent2_1767015841.9391289@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.208434+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.212605+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.213066+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.213400+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 99.93s ago] {'pk_1': 78}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.215394+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 78, 'user_id': 78, 'email': 'test_concurrent2_1767015841.9391289@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.215620+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.215833+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.216155+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.217309+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.218374+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.218611+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 100.2s ago] {'email_1': 'test_concurrent2_1767015841.9391289@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.422891+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 78, 'email': 'test_concurrent2_1767015841.9391289@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.424100+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.424330+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.425732+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.445s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.426671+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:06.468008+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.470831+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.471421+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.471722+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.13s ago] {'pk_1': 77}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.475044+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.475520+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.13s ago] {'showtime_id_1': 38, 'seat_code_1': 'R9-9', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.477319+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.477603+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.13s ago] {'user_id': 77, 'showtime_id': 38, 'seat_code': 'R9-9', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 13, 44, 6, 476976, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 54, 6, 476702, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.479286+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.483683+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.484264+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.484537+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.13s ago] {'pk_1': 38}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.486569+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 38, 'user_id': 77, 'showtime_id': 38, 'seat_code': 'R9-9'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.487690+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.489714+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.490191+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.490402+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.15s ago] {'showtime_id_1': 38, 'seat_code_1': 'R9-9', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.492578+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.492917+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.12s ago] {'seat_code': 'R9-9', 'showtime_id': 38, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.494982+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.495243+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.12s ago] {'status': 'LOCKED', 'locked_by_user_id': 77, 'lock_expires_at': datetime.datetime(2025, 12, 29, 13, 54, 6, 494490, tzinfo=datetime.timezone.utc), 'seat_locks_id': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.496878+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.501807+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.502882+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.503517+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.12s ago] {'pk_1': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.505703+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 38, 'seat_code': 'R9-9', 'user_id': 77, 'expires_at': '2025-12-29T13:54:06.494490+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.505907+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.506058+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.506412+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.507472+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.508569+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 38, 'user_id': 77, 'showtime_id': 38, 'seat_code': 'R9-9'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.508865+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 38", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.510289+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.510756+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.510966+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.12s ago] {'user_id': 77, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 38}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.512925+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.516931+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.517422+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.517859+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.12s ago] {'pk_1': 38}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.520174+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 38, 'reservation_id': 38, 'user_id': 77, 'showtime_id': 38, 'seat_code': 'R9-9'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.520348+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.520678+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 38", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.522384+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.523028+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.523405+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.1s ago] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.525223+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 38, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.525375+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.525712+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 38, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.527102+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.527624+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.527974+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.08s ago] {'pk_1': 38}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.530510+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.530753+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.07s ago] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 38}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.532158+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.535756+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.536399+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.536796+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.14s ago] {'pk_1': 38}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.538772+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 38 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.539196+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.540269+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.540422+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 38: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.540729+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.541804+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.541962+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 38", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.542166+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.543356+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.545112+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.545523+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.546004+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.07s ago] {'actor_id': 77, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 38, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 38, \"user_id\": 77, \"showtime_id\": 38, \"seat_code\": \"R9-9\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 44, 6, 545292, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.547927+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.551668+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.552366+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.552751+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.06s ago] {'pk_1': 50}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.554658+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.555720+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.556803+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.089s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.558028+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:08.608472+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "d599c239-cb07-4465-b7c4-0051c08e658e"}
{"timestamp": "2025-12-29T13:44:08.612634+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d599c239-cb07-4465-b7c4-0051c08e658e"}
{"timestamp": "2025-12-29T13:44:08.613869+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d599c239-cb07-4465-b7c4-0051c08e658e"}
{"timestamp": "2025-12-29T13:44:08.614513+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 91.28s ago] {'pk_1': 78}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d599c239-cb07-4465-b7c4-0051c08e658e"}
{"timestamp": "2025-12-29T13:44:08.619175+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d599c239-cb07-4465-b7c4-0051c08e658e"}
{"timestamp": "2025-12-29T13:44:08.619824+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 91.28s ago] {'showtime_id_1': 38, 'seat_code_1': 'R9-9', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d599c239-cb07-4465-b7c4-0051c08e658e"}
{"timestamp": "2025-12-29T13:44:08.623009+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d599c239-cb07-4465-b7c4-0051c08e658e"}
{"timestamp": "2025-12-29T13:44:08.645389+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.middleware", "message": "\u2717 POST /reservations/ \u2192 FAILED (0.017s)", "module": "middleware", "function": "dispatch", "line": 83, "request_id": "d599c239-cb07-4465-b7c4-0051c08e658e", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 151, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\streams\\memory.py\", line 126, in receive\n    raise EndOfStream from None\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\middleware.py\", line 57, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    raise app_exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 390, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 291, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\concurrency.py\", line 38, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\to_thread.py\", line 56, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 2485, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 976, in run\n    result = context.run(func, *args)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\reservation\\router.py\", line 31, in create_reservation_route\n    return create_reservation(db=db, user_id=current_user.id, data=payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\reservation\\service.py\", line 53, in create_reservation\n    raise ValidationError(\n    ...<2 lines>...\n    )\napp.core.errors.ValidationError: ('Seat is locked by another user', {'seat_code': 'R9-9'})"}
{"timestamp": "2025-12-29T13:47:25.323178+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-29T13:47:27.278425+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-29T13:47:27.278779+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-29T13:47:27.279001+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.279181+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.279352+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.279504+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.279733+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.280053+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.280427+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.280807+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.281073+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.281292+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.281516+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.281766+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.281974+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.282174+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.282390+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.282809+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.283093+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.283448+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.283734+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.283944+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.284242+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.284503+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.284781+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.285075+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.285396+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.285773+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.286105+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.286396+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.286672+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.286940+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.287168+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.287420+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.287777+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.288117+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.288628+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.288903+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.289101+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.289264+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.289427+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.289568+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.289738+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.289907+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.290101+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.290261+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.290439+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.290634+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.290800+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.291025+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.291264+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.291460+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.291697+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.291884+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.292067+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.292349+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.292512+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.292651+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.292850+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.293158+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.293450+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/showtimes/{showtime_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.293738+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.293965+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.294235+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-29T13:47:27.294532+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-29T13:47:42.316499+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.374332+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.374627+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.377176+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.377446+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.379603+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.379974+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.382489+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.385237+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.385613+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'email_1': 'test_admin_1767016060.2661738@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.610864+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.611295+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00079s] {'email': 'test_admin_1767016060.2661738@example.com', 'hashed_password': '$2b$12$TVHBgld34jBGZDJAfb.mV.jvFmIHWk8W5MHAdkTCJhJxRyXzQMlAq', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.613503+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.619160+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.620604+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.620965+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00063s] {'pk_1': 79}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.623225+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 79, 'email': 'test_admin_1767016060.2661738@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.624402+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.647479+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.649270+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.649550+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'user_id_1': 79, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.653491+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.653989+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'user_id': 79, 'name': None, 'email': 'test_admin_1767016060.2661738@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.656871+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.661472+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.662652+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.663029+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'pk_1': 79}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.665105+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 79, 'user_id': 79, 'email': 'test_admin_1767016060.2661738@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.665385+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.665572+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.665856+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.667273+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.668849+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.669249+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2842s ago] {'email_1': 'test_admin_1767016060.2661738@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.879958+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 79, 'email': 'test_admin_1767016060.2661738@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.881035+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.881230+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.882693+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.566s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.883750+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:44.969549+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "4afbe663-59d9-4569-8e16-543f107a5bd8"}
{"timestamp": "2025-12-29T13:47:44.972711+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "4afbe663-59d9-4569-8e16-543f107a5bd8"}
{"timestamp": "2025-12-29T13:47:44.974229+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4afbe663-59d9-4569-8e16-543f107a5bd8"}
{"timestamp": "2025-12-29T13:47:44.974582+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'title_1': 'Test Movie 1767016060.2661738'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4afbe663-59d9-4569-8e16-543f107a5bd8"}
{"timestamp": "2025-12-29T13:47:44.978470+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4afbe663-59d9-4569-8e16-543f107a5bd8"}
{"timestamp": "2025-12-29T13:47:44.978917+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'title': 'Test Movie 1767016060.2661738', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4afbe663-59d9-4569-8e16-543f107a5bd8"}
{"timestamp": "2025-12-29T13:47:44.981239+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "4afbe663-59d9-4569-8e16-543f107a5bd8"}
{"timestamp": "2025-12-29T13:47:44.987074+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "4afbe663-59d9-4569-8e16-543f107a5bd8"}
{"timestamp": "2025-12-29T13:47:44.988405+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4afbe663-59d9-4569-8e16-543f107a5bd8"}
{"timestamp": "2025-12-29T13:47:44.988734+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00066s] {'pk_1': 48}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4afbe663-59d9-4569-8e16-543f107a5bd8"}
{"timestamp": "2025-12-29T13:47:44.991170+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 48}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "4afbe663-59d9-4569-8e16-543f107a5bd8"}
{"timestamp": "2025-12-29T13:47:44.992359+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "4afbe663-59d9-4569-8e16-543f107a5bd8"}
{"timestamp": "2025-12-29T13:47:44.992514+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "4afbe663-59d9-4569-8e16-543f107a5bd8"}
{"timestamp": "2025-12-29T13:47:44.994066+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.025s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "4afbe663-59d9-4569-8e16-543f107a5bd8"}
{"timestamp": "2025-12-29T13:47:44.994933+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "4afbe663-59d9-4569-8e16-543f107a5bd8"}
{"timestamp": "2025-12-29T13:47:47.044492+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "af65c9cf-9e87-4e11-8289-14e1b794a3a7"}
{"timestamp": "2025-12-29T13:47:47.047303+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "af65c9cf-9e87-4e11-8289-14e1b794a3a7"}
{"timestamp": "2025-12-29T13:47:47.048468+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "af65c9cf-9e87-4e11-8289-14e1b794a3a7"}
{"timestamp": "2025-12-29T13:47:47.048808+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'name_1': 'Test Layout 1767016060.2661738'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "af65c9cf-9e87-4e11-8289-14e1b794a3a7"}
{"timestamp": "2025-12-29T13:47:47.052104+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "af65c9cf-9e87-4e11-8289-14e1b794a3a7"}
{"timestamp": "2025-12-29T13:47:47.052554+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'name': 'Test Layout 1767016060.2661738', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "af65c9cf-9e87-4e11-8289-14e1b794a3a7"}
{"timestamp": "2025-12-29T13:47:47.054705+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "af65c9cf-9e87-4e11-8289-14e1b794a3a7"}
{"timestamp": "2025-12-29T13:47:47.059569+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "af65c9cf-9e87-4e11-8289-14e1b794a3a7"}
{"timestamp": "2025-12-29T13:47:47.060694+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "af65c9cf-9e87-4e11-8289-14e1b794a3a7"}
{"timestamp": "2025-12-29T13:47:47.061211+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'pk_1': 47}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "af65c9cf-9e87-4e11-8289-14e1b794a3a7"}
{"timestamp": "2025-12-29T13:47:47.063500+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 47}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "af65c9cf-9e87-4e11-8289-14e1b794a3a7"}
{"timestamp": "2025-12-29T13:47:47.064583+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "af65c9cf-9e87-4e11-8289-14e1b794a3a7"}
{"timestamp": "2025-12-29T13:47:47.064776+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "af65c9cf-9e87-4e11-8289-14e1b794a3a7"}
{"timestamp": "2025-12-29T13:47:47.065928+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "af65c9cf-9e87-4e11-8289-14e1b794a3a7"}
{"timestamp": "2025-12-29T13:47:47.066656+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "af65c9cf-9e87-4e11-8289-14e1b794a3a7"}
{"timestamp": "2025-12-29T13:47:49.103479+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "f72ae6dd-2bdf-48fc-9b97-8d04fe5cc9fc"}
{"timestamp": "2025-12-29T13:47:49.106195+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f72ae6dd-2bdf-48fc-9b97-8d04fe5cc9fc"}
{"timestamp": "2025-12-29T13:47:49.107379+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f72ae6dd-2bdf-48fc-9b97-8d04fe5cc9fc"}
{"timestamp": "2025-12-29T13:47:49.107746+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'name_1': 'Test Screen 1767016060.2661738', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f72ae6dd-2bdf-48fc-9b97-8d04fe5cc9fc"}
{"timestamp": "2025-12-29T13:47:49.110808+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f72ae6dd-2bdf-48fc-9b97-8d04fe5cc9fc"}
{"timestamp": "2025-12-29T13:47:49.111156+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'id_1': 47, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f72ae6dd-2bdf-48fc-9b97-8d04fe5cc9fc"}
{"timestamp": "2025-12-29T13:47:49.117750+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f72ae6dd-2bdf-48fc-9b97-8d04fe5cc9fc"}
{"timestamp": "2025-12-29T13:47:49.118359+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00077s] {'name': 'Test Screen 1767016060.2661738', 'capacity': 150, 'seat_layout_id': 47}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f72ae6dd-2bdf-48fc-9b97-8d04fe5cc9fc"}
{"timestamp": "2025-12-29T13:47:49.121019+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "f72ae6dd-2bdf-48fc-9b97-8d04fe5cc9fc"}
{"timestamp": "2025-12-29T13:47:49.126242+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f72ae6dd-2bdf-48fc-9b97-8d04fe5cc9fc"}
{"timestamp": "2025-12-29T13:47:49.127202+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f72ae6dd-2bdf-48fc-9b97-8d04fe5cc9fc"}
{"timestamp": "2025-12-29T13:47:49.127607+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'pk_1': 47}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f72ae6dd-2bdf-48fc-9b97-8d04fe5cc9fc"}
{"timestamp": "2025-12-29T13:47:49.129790+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 47}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "f72ae6dd-2bdf-48fc-9b97-8d04fe5cc9fc"}
{"timestamp": "2025-12-29T13:47:49.130746+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "f72ae6dd-2bdf-48fc-9b97-8d04fe5cc9fc"}
{"timestamp": "2025-12-29T13:47:49.130926+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "f72ae6dd-2bdf-48fc-9b97-8d04fe5cc9fc"}
{"timestamp": "2025-12-29T13:47:49.132076+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.029s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "f72ae6dd-2bdf-48fc-9b97-8d04fe5cc9fc"}
{"timestamp": "2025-12-29T13:47:49.133206+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f72ae6dd-2bdf-48fc-9b97-8d04fe5cc9fc"}
{"timestamp": "2025-12-29T13:47:51.183572+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:51.186333+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:51.187450+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:51.187859+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'pk_1': 48}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:51.190887+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:51.191270+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'pk_1': 47}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:51.194467+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:51.194906+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'screen_id_1': 47, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:51.198068+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:51.198610+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00071s] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 48, 'screen_id': 47}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:51.200872+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:51.206411+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:51.207475+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:51.207842+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'pk_1': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:51.211246+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:51.211602+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'pk_1': 48}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:51.214138+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:51.214545+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00067s] {'pk_1': 47}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:51.216197+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 39}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:51.217256+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:51.217432+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:51.218772+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.035s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:51.219777+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:53.268366+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.271064+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.271644+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.272045+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.89s ago] {'email_1': 'test_booking_1767016071.219718@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.477793+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.478259+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.87s ago] {'email': 'test_booking_1767016071.219718@example.com', 'hashed_password': '$2b$12$ZalVO2pa00sftpbmfKVcbuqiEBdv1VMBnjuqnO.K9yTrtYaOMS.iy', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.480158+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.485203+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.485839+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.486195+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.87s ago] {'pk_1': 80}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.488343+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 80, 'email': 'test_booking_1767016071.219718@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.489416+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.491273+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.491937+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.492333+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.84s ago] {'user_id_1': 80, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.494728+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.494997+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.84s ago] {'user_id': 80, 'name': None, 'email': 'test_booking_1767016071.219718@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.496498+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.500354+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.500905+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.501299+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.84s ago] {'pk_1': 80}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.503553+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 80, 'user_id': 80, 'email': 'test_booking_1767016071.219718@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.503951+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.504116+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.504382+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.505394+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.506552+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.506883+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 11.12s ago] {'email_1': 'test_booking_1767016071.219718@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.711953+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 80, 'email': 'test_booking_1767016071.219718@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.713078+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.713296+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.714376+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.446s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.715651+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:55.755552+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.758590+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.759631+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.760012+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'pk_1': 80}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.764339+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.764793+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'showtime_id_1': 39, 'seat_code_1': 'R5-5', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.767911+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.768281+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'user_id': 80, 'showtime_id': 39, 'seat_code': 'R5-5', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 13, 47, 55, 767540, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 57, 55, 766689, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.770725+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.776919+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.778308+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.778665+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'pk_1': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.781578+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 39, 'user_id': 80, 'showtime_id': 39, 'seat_code': 'R5-5'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.782927+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.785864+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.786665+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.786999+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.02284s ago] {'showtime_id_1': 39, 'seat_code_1': 'R5-5', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.789759+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.790306+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'seat_code': 'R5-5', 'showtime_id': 39, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.793849+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.794209+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'status': 'LOCKED', 'locked_by_user_id': 80, 'lock_expires_at': datetime.datetime(2025, 12, 29, 13, 57, 55, 792444, tzinfo=datetime.timezone.utc), 'seat_locks_id': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.795938+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.800860+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.801833+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.802290+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.804828+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 39, 'seat_code': 'R5-5', 'user_id': 80, 'expires_at': '2025-12-29T13:57:55.792444+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.805072+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.805253+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.805686+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.806954+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.807602+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 39, 'user_id': 80, 'showtime_id': 39, 'seat_code': 'R5-5'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.807890+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 39", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.809480+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.810563+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.810958+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00038s] {'user_id': 80, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.814426+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.818914+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.820030+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.820488+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'pk_1': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.822855+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 39, 'reservation_id': 39, 'user_id': 80, 'showtime_id': 39, 'seat_code': 'R5-5'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.823026+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.823745+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 39", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.857605+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.859357+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.859802+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.863524+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 39, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.863905+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.864728+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 39, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.888498+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.889571+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.889977+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'pk_1': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.893664+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.894081+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.896086+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.900529+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.901061+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.901352+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.08147s ago] {'pk_1': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.903660+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 39 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.904067+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.905207+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.905383+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 39: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.905687+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.906767+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.906939+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 39", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.907276+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.908417+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.910222+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.911397+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.911726+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00043s] {'actor_id': 80, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 39, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 39, \"user_id\": 80, \"showtime_id\": 39, \"seat_code\": \"R5-5\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 47, 55, 911047, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.914354+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.918548+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.919952+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.920300+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'pk_1': 51}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.922564+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.923687+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.925265+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.170s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.926231+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:57.964192+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b79836e2-1113-4a03-909c-8615b096a7c6"}
{"timestamp": "2025-12-29T13:47:57.966924+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b79836e2-1113-4a03-909c-8615b096a7c6"}
{"timestamp": "2025-12-29T13:47:57.967575+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b79836e2-1113-4a03-909c-8615b096a7c6"}
{"timestamp": "2025-12-29T13:47:57.967916+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 2.208s ago] {'pk_1': 80}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b79836e2-1113-4a03-909c-8615b096a7c6"}
{"timestamp": "2025-12-29T13:47:57.971219+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b79836e2-1113-4a03-909c-8615b096a7c6"}
{"timestamp": "2025-12-29T13:47:57.971645+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00066s] {'user_id_1': 80}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b79836e2-1113-4a03-909c-8615b096a7c6"}
{"timestamp": "2025-12-29T13:47:57.974044+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.010s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b79836e2-1113-4a03-909c-8615b096a7c6"}
{"timestamp": "2025-12-29T13:47:57.974901+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b79836e2-1113-4a03-909c-8615b096a7c6"}
{"timestamp": "2025-12-29T13:48:00.024931+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/order/39/initiate", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "51f8ba9a-7687-40e6-94b3-18639be5fc21"}
{"timestamp": "2025-12-29T13:48:00.027521+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "51f8ba9a-7687-40e6-94b3-18639be5fc21"}
{"timestamp": "2025-12-29T13:48:00.028093+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f8ba9a-7687-40e6-94b3-18639be5fc21"}
{"timestamp": "2025-12-29T13:48:00.028405+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.269s ago] {'pk_1': 80}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f8ba9a-7687-40e6-94b3-18639be5fc21"}
{"timestamp": "2025-12-29T13:48:00.031847+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f8ba9a-7687-40e6-94b3-18639be5fc21"}
{"timestamp": "2025-12-29T13:48:00.032238+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.143s ago] {'pk_1': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f8ba9a-7687-40e6-94b3-18639be5fc21"}
{"timestamp": "2025-12-29T13:48:00.035101+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO payment_attempts (order_id, amount_attempted, status, final_amount, failure_reason, provider_payment_id, created_at) VALUES (%(order_id)s, %(amount_attempted)s, %(status)s, %(final_amount)s, %(failure_reason)s, %(provider_payment_id)s, %(created_at)s) RETURNING payment_attempts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f8ba9a-7687-40e6-94b3-18639be5fc21"}
{"timestamp": "2025-12-29T13:48:00.035528+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'order_id': 39, 'amount_attempted': 1000, 'status': 'PENDING', 'final_amount': 1000, 'failure_reason': None, 'provider_payment_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 48, 0, 34599, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f8ba9a-7687-40e6-94b3-18639be5fc21"}
{"timestamp": "2025-12-29T13:48:00.037885+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "51f8ba9a-7687-40e6-94b3-18639be5fc21"}
{"timestamp": "2025-12-29T13:48:00.043503+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "51f8ba9a-7687-40e6-94b3-18639be5fc21"}
{"timestamp": "2025-12-29T13:48:00.044800+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f8ba9a-7687-40e6-94b3-18639be5fc21"}
{"timestamp": "2025-12-29T13:48:00.045418+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00062s] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f8ba9a-7687-40e6-94b3-18639be5fc21"}
{"timestamp": "2025-12-29T13:48:00.048989+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f8ba9a-7687-40e6-94b3-18639be5fc21"}
{"timestamp": "2025-12-29T13:48:00.049276+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'pk_1': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f8ba9a-7687-40e6-94b3-18639be5fc21"}
{"timestamp": "2025-12-29T13:48:00.051422+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.pending with payload: {'payment_attempt_id': 25, 'order_id': 39, 'amount_attempted': 1000, 'final_amount': 1000, 'user_id': 80}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "51f8ba9a-7687-40e6-94b3-18639be5fc21"}
{"timestamp": "2025-12-29T13:48:00.052391+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.pending to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "51f8ba9a-7687-40e6-94b3-18639be5fc21"}
{"timestamp": "2025-12-29T13:48:00.052584+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: payment.pending", "module": "event_bus", "function": "publish", "line": 31, "request_id": "51f8ba9a-7687-40e6-94b3-18639be5fc21"}
{"timestamp": "2025-12-29T13:48:00.053718+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/order/39/initiate \u2192 200 (0.029s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "51f8ba9a-7687-40e6-94b3-18639be5fc21"}
{"timestamp": "2025-12-29T13:48:00.054570+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "51f8ba9a-7687-40e6-94b3-18639be5fc21"}
{"timestamp": "2025-12-29T13:48:02.099869+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/25/confirm", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.102384+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.102978+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.103742+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.344s ago] {'pk_1': 80}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.107211+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id AS payment_attempts_id, payment_attempts.order_id AS payment_attempts_order_id, payment_attempts.amount_attempted AS payment_attempts_amount_attempted, payment_attempts.status AS payment_attempts_status, payment_attempts.final_amount AS payment_attempts_final_amount, payment_attempts.failure_reason AS payment_attempts_failure_reason, payment_attempts.provider_payment_id AS payment_attempts_provider_payment_id, payment_attempts.created_at AS payment_attempts_created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.107607+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.110499+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.110837+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'pk_1': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.113324+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE payment_attempts SET status=%(status)s, provider_payment_id=%(provider_payment_id)s WHERE payment_attempts.id = %(payment_attempts_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.113766+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'status': 'SUCCEEDED', 'provider_payment_id': 'mock_payment_25', 'payment_attempts_id': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.115756+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.119985+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.120831+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.121315+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 2.077s ago] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.124139+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.124465+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 2.076s ago] {'pk_1': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.125998+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.succeeded with payload: {'payment_attempt_id': 25, 'order_id': 39, 'final_amount': 1000.0, 'user_id': 80}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.127386+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.succeeded to 4 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.128196+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.129909+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.130366+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.130612+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.241s ago] {'pk_1': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.133344+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET is_completed=%(is_completed)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.134022+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'is_completed': True, 'orders_id': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.135835+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.140176+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.141117+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.141585+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.322s ago] {'pk_1': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.143795+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.completed with payload: {'order_id': 39}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.144089+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.completed to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.144268+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: order.completed", "module": "event_bus", "function": "publish", "line": 31, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.144548+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.145884+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.147945+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.148427+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.148685+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 19.5s ago] {'user_id_1': 80, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.151467+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.152840+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.154517+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.155007+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.155377+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.244s ago] {'actor_id': 80, 'actor_type': 'user', 'action': 'payment.succeeded', 'target_id': 39, 'target_type': 'order', 'payload': '{\"payment_attempt_id\": 25, \"order_id\": 39, \"final_amount\": 1000.0, \"user_id\": 80}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 48, 2, 154698, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.157812+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.162000+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.162505+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.162747+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.243s ago] {'pk_1': 52}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.164568+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.165694+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.166788+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/25/confirm \u2192 200 (0.067s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.167610+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:04.206163+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "5d9fd51e-ce78-42d5-bb83-f9ffc6a96106"}
{"timestamp": "2025-12-29T13:48:04.208611+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "5d9fd51e-ce78-42d5-bb83-f9ffc6a96106"}
{"timestamp": "2025-12-29T13:48:04.209203+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5d9fd51e-ce78-42d5-bb83-f9ffc6a96106"}
{"timestamp": "2025-12-29T13:48:04.209558+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 8.45s ago] {'pk_1': 80}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5d9fd51e-ce78-42d5-bb83-f9ffc6a96106"}
{"timestamp": "2025-12-29T13:48:04.212488+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5d9fd51e-ce78-42d5-bb83-f9ffc6a96106"}
{"timestamp": "2025-12-29T13:48:04.212892+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.242s ago] {'user_id_1': 80}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5d9fd51e-ce78-42d5-bb83-f9ffc6a96106"}
{"timestamp": "2025-12-29T13:48:04.215342+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.009s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "5d9fd51e-ce78-42d5-bb83-f9ffc6a96106"}
{"timestamp": "2025-12-29T13:48:04.216218+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "5d9fd51e-ce78-42d5-bb83-f9ffc6a96106"}
{"timestamp": "2025-12-29T13:48:06.261423+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.264018+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.264559+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.264854+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.88s ago] {'email_1': 'test_admin_1767016084.2167208@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.470113+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.470574+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.86s ago] {'email': 'test_admin_1767016084.2167208@example.com', 'hashed_password': '$2b$12$W7vfZaAROgZbTVeDlgybz.gAMQNsQBcZ1YGlov9H2dvkF.nr/6RGq', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.472266+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.476190+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.476783+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.477195+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.86s ago] {'pk_1': 81}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.480110+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 81, 'email': 'test_admin_1767016084.2167208@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.481747+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.483957+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.484514+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.484817+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.84s ago] {'user_id_1': 81, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.487177+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.487582+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.83s ago] {'user_id': 81, 'name': None, 'email': 'test_admin_1767016084.2167208@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.489387+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.493343+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.494395+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.495009+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.83s ago] {'pk_1': 81}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.497713+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 81, 'user_id': 81, 'email': 'test_admin_1767016084.2167208@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.497887+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.498075+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.498347+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.499869+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.501377+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.501906+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 24.12s ago] {'email_1': 'test_admin_1767016084.2167208@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.705903+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 81, 'email': 'test_admin_1767016084.2167208@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.707032+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.707211+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.708326+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.447s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.709127+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:08.792765+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "c1b8b4bf-cc69-496e-a5e1-7a19f9195c8a"}
{"timestamp": "2025-12-29T13:48:08.795371+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c1b8b4bf-cc69-496e-a5e1-7a19f9195c8a"}
{"timestamp": "2025-12-29T13:48:08.795933+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1b8b4bf-cc69-496e-a5e1-7a19f9195c8a"}
{"timestamp": "2025-12-29T13:48:08.796307+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.82s ago] {'title_1': 'Test Movie 1767016084.2167208'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1b8b4bf-cc69-496e-a5e1-7a19f9195c8a"}
{"timestamp": "2025-12-29T13:48:08.799119+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1b8b4bf-cc69-496e-a5e1-7a19f9195c8a"}
{"timestamp": "2025-12-29T13:48:08.799542+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.82s ago] {'title': 'Test Movie 1767016084.2167208', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1b8b4bf-cc69-496e-a5e1-7a19f9195c8a"}
{"timestamp": "2025-12-29T13:48:08.801454+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "c1b8b4bf-cc69-496e-a5e1-7a19f9195c8a"}
{"timestamp": "2025-12-29T13:48:08.807130+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c1b8b4bf-cc69-496e-a5e1-7a19f9195c8a"}
{"timestamp": "2025-12-29T13:48:08.808204+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1b8b4bf-cc69-496e-a5e1-7a19f9195c8a"}
{"timestamp": "2025-12-29T13:48:08.808797+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.82s ago] {'pk_1': 49}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1b8b4bf-cc69-496e-a5e1-7a19f9195c8a"}
{"timestamp": "2025-12-29T13:48:08.811201+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 49}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "c1b8b4bf-cc69-496e-a5e1-7a19f9195c8a"}
{"timestamp": "2025-12-29T13:48:08.812299+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "c1b8b4bf-cc69-496e-a5e1-7a19f9195c8a"}
{"timestamp": "2025-12-29T13:48:08.812560+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "c1b8b4bf-cc69-496e-a5e1-7a19f9195c8a"}
{"timestamp": "2025-12-29T13:48:08.813868+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.021s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "c1b8b4bf-cc69-496e-a5e1-7a19f9195c8a"}
{"timestamp": "2025-12-29T13:48:08.814911+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c1b8b4bf-cc69-496e-a5e1-7a19f9195c8a"}
{"timestamp": "2025-12-29T13:48:10.855518+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "1f367c61-37e1-4627-92f0-140b2e8781f1"}
{"timestamp": "2025-12-29T13:48:10.858193+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1f367c61-37e1-4627-92f0-140b2e8781f1"}
{"timestamp": "2025-12-29T13:48:10.858763+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1f367c61-37e1-4627-92f0-140b2e8781f1"}
{"timestamp": "2025-12-29T13:48:10.859122+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.81s ago] {'name_1': 'Test Layout 1767016084.2167208'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1f367c61-37e1-4627-92f0-140b2e8781f1"}
{"timestamp": "2025-12-29T13:48:10.861834+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1f367c61-37e1-4627-92f0-140b2e8781f1"}
{"timestamp": "2025-12-29T13:48:10.862117+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.81s ago] {'name': 'Test Layout 1767016084.2167208', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1f367c61-37e1-4627-92f0-140b2e8781f1"}
{"timestamp": "2025-12-29T13:48:10.864121+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "1f367c61-37e1-4627-92f0-140b2e8781f1"}
{"timestamp": "2025-12-29T13:48:10.869308+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1f367c61-37e1-4627-92f0-140b2e8781f1"}
{"timestamp": "2025-12-29T13:48:10.870078+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1f367c61-37e1-4627-92f0-140b2e8781f1"}
{"timestamp": "2025-12-29T13:48:10.870524+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.81s ago] {'pk_1': 48}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1f367c61-37e1-4627-92f0-140b2e8781f1"}
{"timestamp": "2025-12-29T13:48:10.872868+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 48}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "1f367c61-37e1-4627-92f0-140b2e8781f1"}
{"timestamp": "2025-12-29T13:48:10.873817+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "1f367c61-37e1-4627-92f0-140b2e8781f1"}
{"timestamp": "2025-12-29T13:48:10.874023+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "1f367c61-37e1-4627-92f0-140b2e8781f1"}
{"timestamp": "2025-12-29T13:48:10.875226+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.020s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "1f367c61-37e1-4627-92f0-140b2e8781f1"}
{"timestamp": "2025-12-29T13:48:10.876143+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "1f367c61-37e1-4627-92f0-140b2e8781f1"}
{"timestamp": "2025-12-29T13:48:12.921126+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "02ede9a8-6c9d-4e04-8455-575651915747"}
{"timestamp": "2025-12-29T13:48:12.923775+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "02ede9a8-6c9d-4e04-8455-575651915747"}
{"timestamp": "2025-12-29T13:48:12.924352+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "02ede9a8-6c9d-4e04-8455-575651915747"}
{"timestamp": "2025-12-29T13:48:12.924688+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.82s ago] {'name_1': 'Test Screen 1767016084.2167208', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "02ede9a8-6c9d-4e04-8455-575651915747"}
{"timestamp": "2025-12-29T13:48:12.927654+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "02ede9a8-6c9d-4e04-8455-575651915747"}
{"timestamp": "2025-12-29T13:48:12.928091+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.82s ago] {'id_1': 48, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "02ede9a8-6c9d-4e04-8455-575651915747"}
{"timestamp": "2025-12-29T13:48:12.930318+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "02ede9a8-6c9d-4e04-8455-575651915747"}
{"timestamp": "2025-12-29T13:48:12.930659+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.81s ago] {'name': 'Test Screen 1767016084.2167208', 'capacity': 150, 'seat_layout_id': 48}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "02ede9a8-6c9d-4e04-8455-575651915747"}
{"timestamp": "2025-12-29T13:48:12.932520+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "02ede9a8-6c9d-4e04-8455-575651915747"}
{"timestamp": "2025-12-29T13:48:12.937666+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "02ede9a8-6c9d-4e04-8455-575651915747"}
{"timestamp": "2025-12-29T13:48:12.938199+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "02ede9a8-6c9d-4e04-8455-575651915747"}
{"timestamp": "2025-12-29T13:48:12.938520+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.81s ago] {'pk_1': 48}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "02ede9a8-6c9d-4e04-8455-575651915747"}
{"timestamp": "2025-12-29T13:48:12.940765+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 48}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "02ede9a8-6c9d-4e04-8455-575651915747"}
{"timestamp": "2025-12-29T13:48:12.942003+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "02ede9a8-6c9d-4e04-8455-575651915747"}
{"timestamp": "2025-12-29T13:48:12.942228+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "02ede9a8-6c9d-4e04-8455-575651915747"}
{"timestamp": "2025-12-29T13:48:12.943241+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "02ede9a8-6c9d-4e04-8455-575651915747"}
{"timestamp": "2025-12-29T13:48:12.944085+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "02ede9a8-6c9d-4e04-8455-575651915747"}
{"timestamp": "2025-12-29T13:48:14.979617+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:14.982597+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:14.983209+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:14.983552+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.8s ago] {'pk_1': 49}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:14.986231+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:14.986564+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.8s ago] {'pk_1': 48}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:14.988734+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:14.989183+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.8s ago] {'screen_id_1': 48, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:14.991237+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:14.991720+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 49, 'screen_id': 48}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:14.994022+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:14.999030+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:14.999623+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:14.999887+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:15.002634+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:15.002991+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'pk_1': 49}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:15.005369+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:15.005825+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'pk_1': 48}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:15.007520+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 40}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:15.008452+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:15.008619+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:15.009891+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.030s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:15.011147+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:17.060133+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.062876+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.063500+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.063867+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.68s ago] {'email_1': 'test_cancel_1767016095.010865@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.268370+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.268845+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.66s ago] {'email': 'test_cancel_1767016095.010865@example.com', 'hashed_password': '$2b$12$DdG9pulcHD9KoDR8Tlbh0OoEm1ZKhT9q7Zim.Fam2W2m2tYaIGz/C', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.270531+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.275678+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.276449+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.276871+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.66s ago] {'pk_1': 82}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.278960+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 82, 'email': 'test_cancel_1767016095.010865@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.280003+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.282443+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.283045+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.283336+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.63s ago] {'user_id_1': 82, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.285569+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.285901+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.63s ago] {'user_id': 82, 'name': None, 'email': 'test_cancel_1767016095.010865@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.287881+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.291828+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.292418+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.292703+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.63s ago] {'pk_1': 82}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.295108+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 82, 'user_id': 82, 'email': 'test_cancel_1767016095.010865@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.295248+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.295374+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.295623+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.296552+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.297714+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.298011+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.91s ago] {'email_1': 'test_cancel_1767016095.010865@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.502761+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 82, 'email': 'test_cancel_1767016095.010865@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.503776+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.503931+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.504907+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.445s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.505838+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:19.556625+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.559390+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.560004+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.560354+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.8s ago] {'pk_1': 82}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.563237+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.563672+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.8s ago] {'showtime_id_1': 40, 'seat_code_1': 'R6-6', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.566058+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.566416+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.8s ago] {'user_id': 82, 'showtime_id': 40, 'seat_code': 'R6-6', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 13, 48, 19, 565634, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 58, 19, 565369, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.568556+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.574253+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.574774+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.575067+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.8s ago] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.577134+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 40, 'user_id': 82, 'showtime_id': 40, 'seat_code': 'R6-6'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.578031+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.580090+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.580754+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.581035+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.82s ago] {'showtime_id_1': 40, 'seat_code_1': 'R6-6', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.583504+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.583788+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'seat_code': 'R6-6', 'showtime_id': 40, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.585763+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.586341+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'status': 'LOCKED', 'locked_by_user_id': 82, 'lock_expires_at': datetime.datetime(2025, 12, 29, 13, 58, 19, 585269, tzinfo=datetime.timezone.utc), 'seat_locks_id': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.587966+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.591454+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.592021+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.592413+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'pk_1': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.594537+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 40, 'seat_code': 'R6-6', 'user_id': 82, 'expires_at': '2025-12-29T13:58:19.585269+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.594705+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.594893+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.595240+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.596217+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.596690+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 40, 'user_id': 82, 'showtime_id': 40, 'seat_code': 'R6-6'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.596841+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 40", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.598170+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.598769+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.599152+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'user_id': 82, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.601685+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.605444+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.606145+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.606467+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.608691+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 40, 'reservation_id': 40, 'user_id': 82, 'showtime_id': 40, 'seat_code': 'R6-6'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.608849+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.609230+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 40", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.610532+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.611056+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.611394+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.75s ago] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.613546+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 40, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.613815+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.614247+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 40, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.615570+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.616029+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.616406+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.73s ago] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.618879+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.619147+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.73s ago] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.620622+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.624324+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.625036+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.625504+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.81s ago] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.627208+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 40 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.627562+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.628661+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.628807+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 40: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.629034+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.630212+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.630391+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 40", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.630699+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.631747+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.633331+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.633886+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.634594+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.72s ago] {'actor_id': 82, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 40, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 40, \"user_id\": 82, \"showtime_id\": 40, \"seat_code\": \"R6-6\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 48, 19, 633520, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.636640+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.640266+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.640941+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.641542+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.72s ago] {'pk_1': 53}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.643700+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.644694+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.645888+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.089s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.646838+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:21.699589+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "e8a1a2cb-71c9-45c1-aacd-7d24a4f8354d"}
{"timestamp": "2025-12-29T13:48:21.701990+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e8a1a2cb-71c9-45c1-aacd-7d24a4f8354d"}
{"timestamp": "2025-12-29T13:48:21.702573+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e8a1a2cb-71c9-45c1-aacd-7d24a4f8354d"}
{"timestamp": "2025-12-29T13:48:21.702931+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 25.94s ago] {'pk_1': 82}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e8a1a2cb-71c9-45c1-aacd-7d24a4f8354d"}
{"timestamp": "2025-12-29T13:48:21.705873+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e8a1a2cb-71c9-45c1-aacd-7d24a4f8354d"}
{"timestamp": "2025-12-29T13:48:21.706302+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.74s ago] {'user_id_1': 82}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e8a1a2cb-71c9-45c1-aacd-7d24a4f8354d"}
{"timestamp": "2025-12-29T13:48:21.708485+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.009s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "e8a1a2cb-71c9-45c1-aacd-7d24a4f8354d"}
{"timestamp": "2025-12-29T13:48:21.709354+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "e8a1a2cb-71c9-45c1-aacd-7d24a4f8354d"}
{"timestamp": "2025-12-29T13:48:23.762925+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/order/40/initiate", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "6c842275-4ba2-4453-80ac-ec134728641d"}
{"timestamp": "2025-12-29T13:48:23.765369+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6c842275-4ba2-4453-80ac-ec134728641d"}
{"timestamp": "2025-12-29T13:48:23.765959+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c842275-4ba2-4453-80ac-ec134728641d"}
{"timestamp": "2025-12-29T13:48:23.766303+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 28.01s ago] {'pk_1': 82}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c842275-4ba2-4453-80ac-ec134728641d"}
{"timestamp": "2025-12-29T13:48:23.769378+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c842275-4ba2-4453-80ac-ec134728641d"}
{"timestamp": "2025-12-29T13:48:23.769727+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 27.88s ago] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c842275-4ba2-4453-80ac-ec134728641d"}
{"timestamp": "2025-12-29T13:48:23.771664+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO payment_attempts (order_id, amount_attempted, status, final_amount, failure_reason, provider_payment_id, created_at) VALUES (%(order_id)s, %(amount_attempted)s, %(status)s, %(final_amount)s, %(failure_reason)s, %(provider_payment_id)s, %(created_at)s) RETURNING payment_attempts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c842275-4ba2-4453-80ac-ec134728641d"}
{"timestamp": "2025-12-29T13:48:23.772052+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.74s ago] {'order_id': 40, 'amount_attempted': 1000, 'status': 'PENDING', 'final_amount': 1000, 'failure_reason': None, 'provider_payment_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 48, 23, 771234, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c842275-4ba2-4453-80ac-ec134728641d"}
{"timestamp": "2025-12-29T13:48:23.773911+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6c842275-4ba2-4453-80ac-ec134728641d"}
{"timestamp": "2025-12-29T13:48:23.778312+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6c842275-4ba2-4453-80ac-ec134728641d"}
{"timestamp": "2025-12-29T13:48:23.778894+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c842275-4ba2-4453-80ac-ec134728641d"}
{"timestamp": "2025-12-29T13:48:23.779340+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.74s ago] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c842275-4ba2-4453-80ac-ec134728641d"}
{"timestamp": "2025-12-29T13:48:23.781956+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c842275-4ba2-4453-80ac-ec134728641d"}
{"timestamp": "2025-12-29T13:48:23.782289+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.73s ago] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c842275-4ba2-4453-80ac-ec134728641d"}
{"timestamp": "2025-12-29T13:48:23.783817+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.pending with payload: {'payment_attempt_id': 26, 'order_id': 40, 'amount_attempted': 1000, 'final_amount': 1000, 'user_id': 82}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "6c842275-4ba2-4453-80ac-ec134728641d"}
{"timestamp": "2025-12-29T13:48:23.785074+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.pending to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6c842275-4ba2-4453-80ac-ec134728641d"}
{"timestamp": "2025-12-29T13:48:23.785292+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: payment.pending", "module": "event_bus", "function": "publish", "line": 31, "request_id": "6c842275-4ba2-4453-80ac-ec134728641d"}
{"timestamp": "2025-12-29T13:48:23.786366+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/order/40/initiate \u2192 200 (0.024s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "6c842275-4ba2-4453-80ac-ec134728641d"}
{"timestamp": "2025-12-29T13:48:23.787137+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6c842275-4ba2-4453-80ac-ec134728641d"}
{"timestamp": "2025-12-29T13:48:25.824561+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/26/confirm", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.827260+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.827896+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.828243+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 30.07s ago] {'pk_1': 82}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.831336+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id AS payment_attempts_id, payment_attempts.order_id AS payment_attempts_order_id, payment_attempts.amount_attempted AS payment_attempts_amount_attempted, payment_attempts.status AS payment_attempts_status, payment_attempts.final_amount AS payment_attempts_final_amount, payment_attempts.failure_reason AS payment_attempts_failure_reason, payment_attempts.provider_payment_id AS payment_attempts_provider_payment_id, payment_attempts.created_at AS payment_attempts_created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.831688+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.73s ago] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.833668+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.833970+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.72s ago] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.836066+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE payment_attempts SET status=%(status)s, provider_payment_id=%(provider_payment_id)s WHERE payment_attempts.id = %(payment_attempts_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.836536+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.72s ago] {'status': 'SUCCEEDED', 'provider_payment_id': 'mock_payment_26', 'payment_attempts_id': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.838313+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.843888+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.844754+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.845216+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 25.8s ago] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.847810+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.848049+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 25.8s ago] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.849483+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.succeeded with payload: {'payment_attempt_id': 26, 'order_id': 40, 'final_amount': 1000.0, 'user_id': 82}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.850739+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.succeeded to 4 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.851393+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.853023+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.853498+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.853748+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 29.96s ago] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.855979+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET is_completed=%(is_completed)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.856221+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.72s ago] {'is_completed': True, 'orders_id': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.857970+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.861561+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.862114+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.862460+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 30.04s ago] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.864781+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.completed with payload: {'order_id': 40}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.864938+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.completed to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.865061+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: order.completed", "module": "event_bus", "function": "publish", "line": 31, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.865303+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.866418+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.868038+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.868662+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.868988+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 43.22s ago] {'user_id_1': 82, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.871979+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.873039+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.874803+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.875293+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.875601+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 29.96s ago] {'actor_id': 82, 'actor_type': 'user', 'action': 'payment.succeeded', 'target_id': 40, 'target_type': 'order', 'payload': '{\"payment_attempt_id\": 26, \"order_id\": 40, \"final_amount\": 1000.0, \"user_id\": 82}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 48, 25, 874984, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.877747+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.881879+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.882445+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.882736+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 29.96s ago] {'pk_1': 54}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.884996+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.886178+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.887210+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/26/confirm \u2192 200 (0.063s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.888139+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:27.936170+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/40/cancel", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.938780+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.939372+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.939746+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.18s ago] {'pk_1': 82}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.943285+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id AS reservations_id, reservations.user_id AS reservations_user_id, reservations.showtime_id AS reservations_showtime_id, reservations.seat_code AS reservations_seat_code, reservations.status AS reservations_status, reservations.created_at AS reservations_created_at, reservations.expires_at AS reservations_expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.943795+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00064s] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.946233+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE reservations SET status=%(status)s, expires_at=%(expires_at)s WHERE reservations.id = %(reservations_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.946520+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'status': 'CANCELLED', 'expires_at': None, 'reservations_id': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.948332+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.953585+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.954191+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.954609+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.18s ago] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.956615+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.cancelled with payload: {'reservation_id': 40}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.957655+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.cancelled to 4 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.958154+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_cancelled completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.958611+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Order handler received reservation.cancelled: {'reservation_id': 40}", "module": "handlers", "function": "on_reservation_cancelled", "line": 50, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.960065+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.960894+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.reservation_id = %(reservation_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.961323+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'reservation_id_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.963686+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.cancelled with payload: {'order_id': 40}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.963866+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.cancelled to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.963993+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: order.cancelled", "module": "event_bus", "function": "publish", "line": 31, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.964393+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.965549+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_cancelled completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.967190+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.967616+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.reservation_id = %(reservation_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.967855+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.0071s ago] {'reservation_id_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.970984+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.order_id = %(order_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.971267+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'order_id_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.973899+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT refunds.id, refunds.reservation_id, refunds.payment_attempt_id, refunds.amount, refunds.reason, refunds.created_at, refunds.status \nFROM refunds \nWHERE refunds.reservation_id = %(reservation_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.974150+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'reservation_id_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.976353+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO refunds (reservation_id, payment_attempt_id, amount, reason, created_at, status) VALUES (%(reservation_id)s, %(payment_attempt_id)s, %(amount)s, %(reason)s, %(created_at)s, %(status)s) RETURNING refunds.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.976641+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00043s] {'reservation_id': 40, 'payment_attempt_id': 26, 'amount': 1000.0, 'reason': 'reservation_cancelled', 'created_at': datetime.datetime(2025, 12, 29, 13, 48, 27, 975988, tzinfo=datetime.timezone.utc), 'status': 'ISSUED'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.978821+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.983134+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.984038+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT refunds.id, refunds.reservation_id, refunds.payment_attempt_id, refunds.amount, refunds.reason, refunds.created_at, refunds.status \nFROM refunds \nWHERE refunds.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.984372+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00042s] {'pk_1': 4}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.987207+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id AS payment_attempts_id, payment_attempts.order_id AS payment_attempts_order_id, payment_attempts.amount_attempted AS payment_attempts_amount_attempted, payment_attempts.status AS payment_attempts_status, payment_attempts.final_amount AS payment_attempts_final_amount, payment_attempts.failure_reason AS payment_attempts_failure_reason, payment_attempts.provider_payment_id AS payment_attempts_provider_payment_id, payment_attempts.created_at AS payment_attempts_created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.987440+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.989096+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: refund.issued with payload: {'refund_id': 4, 'reservation_id': 40, 'payment_attempt_id': 26, 'amount': 1000.0}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.989510+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.993520+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.event_bus", "message": "\u274c Event handler failed: reservation.cancelled -> on_reservation_cancelled: asyncio.run() cannot be called from a running event loop", "module": "event_bus", "function": "_safe_invoke", "line": 45, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\event_bus.py\", line 42, in _safe_invoke\n    await handler(payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\refund\\handlers.py\", line 34, in on_reservation_cancelled\n    issue_refund_from_event(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        db,\n        ^^^\n    ...<2 lines>...\n        reason=\"reservation_cancelled\"\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\refund\\service.py\", line 58, in issue_refund_from_event\n    publish_event(event[\"type\"], event[\"payload\"])\n    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\shared\\services\\event_publisher.py\", line 17, in publish_event\n    asyncio.run(event_bus.publish(event_type, payload))\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 191, in run\n    raise RuntimeError(\n        \"asyncio.run() cannot be called from a running event loop\")\nRuntimeError: asyncio.run() cannot be called from a running event loop"}
{"timestamp": "2025-12-29T13:48:27.999275+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.999808+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:28.000206+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.09s ago] {'actor_id': None, 'actor_type': 'user', 'action': 'reservation.cancelled', 'target_id': 40, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 40}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 48, 27, 999453, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:28.002442+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:28.019742+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.event_bus", "message": "\u274c Event handler failed: reservation.cancelled -> on_reservation_cancelled: (psycopg2.errors.NotNullViolation) null value in column \"actor_id\" of relation \"audit_logs\" violates not-null constraint\nDETAIL:  Failing row contains (55, null, user, reservation.cancelled, 40, reservation, {\"reservation_id\": 40}, null, 2025-12-29 13:48:27.999453+00).\n\n[SQL: INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id]\n[parameters: {'actor_id': None, 'actor_type': 'user', 'action': 'reservation.cancelled', 'target_id': 40, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 40}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 48, 27, 999453, tzinfo=datetime.timezone.utc)}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)", "module": "event_bus", "function": "_safe_invoke", "line": 45, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\npsycopg2.errors.NotNullViolation: null value in column \"actor_id\" of relation \"audit_logs\" violates not-null constraint\nDETAIL:  Failing row contains (55, null, user, reservation.cancelled, 40, reservation, {\"reservation_id\": 40}, null, 2025-12-29 13:48:27.999453+00).\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\event_bus.py\", line 42, in _safe_invoke\n    await handler(payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\audit\\handlers.py\", line 28, in on_reservation_cancelled\n    write_audit_log(\n    ~~~~~~~~~~~~~~~^\n        db=db,\n        ^^^^^^\n    ...<5 lines>...\n        payload=payload,\n        ^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\audit\\service.py\", line 31, in write_audit_log\n    return repo.create(db, entry)\n           ~~~~~~~~~~~^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\audit\\repository.py\", line 17, in create\n    db.commit()\n    ~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2030, in commit\n    trans.commit(_to_root=True)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^\n  File \"<string>\", line 2, in commit\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\state_changes.py\", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 1311, in commit\n    self._prepare_impl()\n    ~~~~~~~~~~~~~~~~~~^^\n  File \"<string>\", line 2, in _prepare_impl\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\state_changes.py\", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 1286, in _prepare_impl\n    self.session.flush()\n    ~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 4331, in flush\n    self._flush(objects)\n    ~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 4466, in _flush\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 4427, in _flush\n    flush_context.execute()\n    ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py\", line 466, in execute\n    rec.execute(self)\n    ~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py\", line 642, in execute\n    util.preloaded.orm_persistence.save_obj(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self.mapper,\n        ^^^^^^^^^^^^\n        uow.states_for_mapper_hierarchy(self.mapper, False, False),\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        uow,\n        ^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\persistence.py\", line 93, in save_obj\n    _emit_insert_statements(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        base_mapper,\n        ^^^^^^^^^^^^\n    ...<3 lines>...\n        insert,\n        ^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\persistence.py\", line 1233, in _emit_insert_statements\n    result = connection.execute(\n        statement,\n        params,\n        execution_options=execution_options,\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\nsqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column \"actor_id\" of relation \"audit_logs\" violates not-null constraint\nDETAIL:  Failing row contains (55, null, user, reservation.cancelled, 40, reservation, {\"reservation_id\": 40}, null, 2025-12-29 13:48:27.999453+00).\n\n[SQL: INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id]\n[parameters: {'actor_id': None, 'actor_type': 'user', 'action': 'reservation.cancelled', 'target_id': 40, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 40}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 48, 27, 999453, tzinfo=datetime.timezone.utc)}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)"}
{"timestamp": "2025-12-29T13:48:28.028889+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/40/cancel \u2192 200 (0.093s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:28.029989+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:30.076531+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.079317+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.080021+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.080408+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.7s ago] {'email_1': 'test_admin_1767016108.030704@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.285064+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.285435+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.68s ago] {'email': 'test_admin_1767016108.030704@example.com', 'hashed_password': '$2b$12$YGxhJ0T7VXuuNzvBl4fVIu9yvrxfZ.6z1KYE76tXVYK2rR6Y1o05e', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.287182+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.292208+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.292853+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.293370+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.67s ago] {'pk_1': 83}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.295705+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 83, 'email': 'test_admin_1767016108.030704@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.296657+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.298640+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.299140+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.299450+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.65s ago] {'user_id_1': 83, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.301637+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.302047+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.65s ago] {'user_id': 83, 'name': None, 'email': 'test_admin_1767016108.030704@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.303934+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.307648+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.308259+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.308762+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.65s ago] {'pk_1': 83}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.310940+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 83, 'user_id': 83, 'email': 'test_admin_1767016108.030704@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.311096+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.311235+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.311457+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.312461+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.313562+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.314041+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.93s ago] {'email_1': 'test_admin_1767016108.030704@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.517793+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 83, 'email': 'test_admin_1767016108.030704@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.519073+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.519268+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.520414+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.444s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.521454+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:32.593923+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "1a135a37-32a8-4abf-87fa-4601ae647161"}
{"timestamp": "2025-12-29T13:48:32.596416+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1a135a37-32a8-4abf-87fa-4601ae647161"}
{"timestamp": "2025-12-29T13:48:32.596970+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1a135a37-32a8-4abf-87fa-4601ae647161"}
{"timestamp": "2025-12-29T13:48:32.597322+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.62s ago] {'title_1': 'Test Movie 1767016108.030704'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1a135a37-32a8-4abf-87fa-4601ae647161"}
{"timestamp": "2025-12-29T13:48:32.599779+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1a135a37-32a8-4abf-87fa-4601ae647161"}
{"timestamp": "2025-12-29T13:48:32.600195+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.62s ago] {'title': 'Test Movie 1767016108.030704', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1a135a37-32a8-4abf-87fa-4601ae647161"}
{"timestamp": "2025-12-29T13:48:32.602130+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "1a135a37-32a8-4abf-87fa-4601ae647161"}
{"timestamp": "2025-12-29T13:48:32.607180+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1a135a37-32a8-4abf-87fa-4601ae647161"}
{"timestamp": "2025-12-29T13:48:32.608068+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1a135a37-32a8-4abf-87fa-4601ae647161"}
{"timestamp": "2025-12-29T13:48:32.608720+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.62s ago] {'pk_1': 50}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1a135a37-32a8-4abf-87fa-4601ae647161"}
{"timestamp": "2025-12-29T13:48:32.610906+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 50}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "1a135a37-32a8-4abf-87fa-4601ae647161"}
{"timestamp": "2025-12-29T13:48:32.611897+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "1a135a37-32a8-4abf-87fa-4601ae647161"}
{"timestamp": "2025-12-29T13:48:32.612138+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "1a135a37-32a8-4abf-87fa-4601ae647161"}
{"timestamp": "2025-12-29T13:48:32.613414+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.020s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "1a135a37-32a8-4abf-87fa-4601ae647161"}
{"timestamp": "2025-12-29T13:48:32.614285+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "1a135a37-32a8-4abf-87fa-4601ae647161"}
{"timestamp": "2025-12-29T13:48:34.659621+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "3fae48b1-5695-421a-801c-d71dd78febb3"}
{"timestamp": "2025-12-29T13:48:34.662274+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3fae48b1-5695-421a-801c-d71dd78febb3"}
{"timestamp": "2025-12-29T13:48:34.662824+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3fae48b1-5695-421a-801c-d71dd78febb3"}
{"timestamp": "2025-12-29T13:48:34.663237+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.62s ago] {'name_1': 'Test Layout 1767016108.030704'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3fae48b1-5695-421a-801c-d71dd78febb3"}
{"timestamp": "2025-12-29T13:48:34.666067+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3fae48b1-5695-421a-801c-d71dd78febb3"}
{"timestamp": "2025-12-29T13:48:34.666564+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.62s ago] {'name': 'Test Layout 1767016108.030704', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3fae48b1-5695-421a-801c-d71dd78febb3"}
{"timestamp": "2025-12-29T13:48:34.668916+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "3fae48b1-5695-421a-801c-d71dd78febb3"}
{"timestamp": "2025-12-29T13:48:34.674559+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3fae48b1-5695-421a-801c-d71dd78febb3"}
{"timestamp": "2025-12-29T13:48:34.675190+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3fae48b1-5695-421a-801c-d71dd78febb3"}
{"timestamp": "2025-12-29T13:48:34.675553+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.62s ago] {'pk_1': 49}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3fae48b1-5695-421a-801c-d71dd78febb3"}
{"timestamp": "2025-12-29T13:48:34.678154+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 49}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "3fae48b1-5695-421a-801c-d71dd78febb3"}
{"timestamp": "2025-12-29T13:48:34.679360+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "3fae48b1-5695-421a-801c-d71dd78febb3"}
{"timestamp": "2025-12-29T13:48:34.679582+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "3fae48b1-5695-421a-801c-d71dd78febb3"}
{"timestamp": "2025-12-29T13:48:34.681346+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "3fae48b1-5695-421a-801c-d71dd78febb3"}
{"timestamp": "2025-12-29T13:48:34.682439+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "3fae48b1-5695-421a-801c-d71dd78febb3"}
{"timestamp": "2025-12-29T13:48:36.720486+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "598beae3-80a4-4747-9519-a031c543d97a"}
{"timestamp": "2025-12-29T13:48:36.723170+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "598beae3-80a4-4747-9519-a031c543d97a"}
{"timestamp": "2025-12-29T13:48:36.723751+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "598beae3-80a4-4747-9519-a031c543d97a"}
{"timestamp": "2025-12-29T13:48:36.724114+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.62s ago] {'name_1': 'Test Screen 1767016108.030704', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "598beae3-80a4-4747-9519-a031c543d97a"}
{"timestamp": "2025-12-29T13:48:36.726620+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "598beae3-80a4-4747-9519-a031c543d97a"}
{"timestamp": "2025-12-29T13:48:36.727128+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.62s ago] {'id_1': 49, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "598beae3-80a4-4747-9519-a031c543d97a"}
{"timestamp": "2025-12-29T13:48:36.729209+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "598beae3-80a4-4747-9519-a031c543d97a"}
{"timestamp": "2025-12-29T13:48:36.729540+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.61s ago] {'name': 'Test Screen 1767016108.030704', 'capacity': 150, 'seat_layout_id': 49}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "598beae3-80a4-4747-9519-a031c543d97a"}
{"timestamp": "2025-12-29T13:48:36.731360+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "598beae3-80a4-4747-9519-a031c543d97a"}
{"timestamp": "2025-12-29T13:48:36.736618+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "598beae3-80a4-4747-9519-a031c543d97a"}
{"timestamp": "2025-12-29T13:48:36.737123+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "598beae3-80a4-4747-9519-a031c543d97a"}
{"timestamp": "2025-12-29T13:48:36.737431+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.61s ago] {'pk_1': 49}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "598beae3-80a4-4747-9519-a031c543d97a"}
{"timestamp": "2025-12-29T13:48:36.739210+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 49}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "598beae3-80a4-4747-9519-a031c543d97a"}
{"timestamp": "2025-12-29T13:48:36.740271+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "598beae3-80a4-4747-9519-a031c543d97a"}
{"timestamp": "2025-12-29T13:48:36.740425+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "598beae3-80a4-4747-9519-a031c543d97a"}
{"timestamp": "2025-12-29T13:48:36.741639+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.021s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "598beae3-80a4-4747-9519-a031c543d97a"}
{"timestamp": "2025-12-29T13:48:36.742375+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "598beae3-80a4-4747-9519-a031c543d97a"}
{"timestamp": "2025-12-29T13:48:38.785351+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:38.787938+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:38.788673+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:38.789074+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.6s ago] {'pk_1': 50}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:38.791611+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:38.791945+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.6s ago] {'pk_1': 49}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:38.794097+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:38.794475+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.6s ago] {'screen_id_1': 49, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:38.796617+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:38.797061+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.6s ago] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 50, 'screen_id': 49}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:38.799567+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:38.804911+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:38.805807+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:38.806281+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.6s ago] {'pk_1': 41}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:38.809091+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:38.809549+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.6s ago] {'pk_1': 50}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:38.811763+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:38.812196+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.6s ago] {'pk_1': 49}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:38.813960+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 41}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:38.814983+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:38.815244+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:38.816643+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.031s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:38.817765+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:40.858770+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:40.861529+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:40.862173+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:40.862547+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.48s ago] {'email_1': 'test_failpay_1767016118.817553@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.066672+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.067130+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.46s ago] {'email': 'test_failpay_1767016118.817553@example.com', 'hashed_password': '$2b$12$KlJWYlAh9ubuOEyT9FBpvOZ7h1c86p52/60Deb1Y6gwc56zy0sqZy', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.068934+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.073534+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.074526+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.075079+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.46s ago] {'pk_1': 84}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.077565+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 84, 'email': 'test_failpay_1767016118.817553@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.078583+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.081011+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.081548+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.081847+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.43s ago] {'user_id_1': 84, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.083997+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.084233+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.43s ago] {'user_id': 84, 'name': None, 'email': 'test_failpay_1767016118.817553@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.085958+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.089944+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.090586+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.090894+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.43s ago] {'pk_1': 84}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.093053+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 84, 'user_id': 84, 'email': 'test_failpay_1767016118.817553@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.093256+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.093476+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.093724+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.094983+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.096162+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.096590+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.71s ago] {'email_1': 'test_failpay_1767016118.817553@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.300608+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 84, 'email': 'test_failpay_1767016118.817553@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.301646+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.301856+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.303040+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.444s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.304069+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:43.342194+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.345181+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.345842+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.346224+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.59s ago] {'pk_1': 84}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.349193+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.349642+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.59s ago] {'showtime_id_1': 41, 'seat_code_1': 'R7-7', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.351890+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.352317+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.59s ago] {'user_id': 84, 'showtime_id': 41, 'seat_code': 'R7-7', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 13, 48, 43, 351425, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 58, 43, 351132, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.354182+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.358981+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.359834+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.360321+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.58s ago] {'pk_1': 41}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.362895+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 41, 'user_id': 84, 'showtime_id': 41, 'seat_code': 'R7-7'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.364379+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.366595+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.367197+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.367456+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.6s ago] {'showtime_id_1': 41, 'seat_code_1': 'R7-7', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.370150+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.370615+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.58s ago] {'seat_code': 'R7-7', 'showtime_id': 41, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.372876+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.373237+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.58s ago] {'status': 'LOCKED', 'locked_by_user_id': 84, 'lock_expires_at': datetime.datetime(2025, 12, 29, 13, 58, 43, 372275, tzinfo=datetime.timezone.utc), 'seat_locks_id': 37}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.374923+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.378818+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.379440+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.379699+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.58s ago] {'pk_1': 37}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.381556+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 41, 'seat_code': 'R7-7', 'user_id': 84, 'expires_at': '2025-12-29T13:58:43.372275+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.381701+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.381827+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.382055+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.382984+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.383361+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 41, 'user_id': 84, 'showtime_id': 41, 'seat_code': 'R7-7'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.383514+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 41", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.385062+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.385532+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.385914+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.58s ago] {'user_id': 84, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 41}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.388177+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.391957+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.392578+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.393054+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.57s ago] {'pk_1': 41}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.394930+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 41, 'reservation_id': 41, 'user_id': 84, 'showtime_id': 41, 'seat_code': 'R7-7'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.395081+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.395439+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 41", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.396987+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.397516+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.397885+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.54s ago] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.400677+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 41, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.400822+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.401234+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 41, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.402555+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.403136+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.403466+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.51s ago] {'pk_1': 41}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.405838+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.406110+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.51s ago] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 41}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.407765+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.411523+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.412158+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.412531+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.59s ago] {'pk_1': 41}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.415051+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 41 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.415425+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.416632+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.416802+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 41: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.417061+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.418134+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.418283+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 41", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.418496+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.419551+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.421651+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.422110+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.422479+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.51s ago] {'actor_id': 84, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 41, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 41, \"user_id\": 84, \"showtime_id\": 41, \"seat_code\": \"R7-7\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 48, 43, 421819, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.424644+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.428736+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.429254+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.429506+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.51s ago] {'pk_1': 56}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.431224+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.432037+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.433097+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.091s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.433829+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:45.476359+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "c002e441-97a7-4f9f-98a1-36137ec970e8"}
{"timestamp": "2025-12-29T13:48:45.478915+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c002e441-97a7-4f9f-98a1-36137ec970e8"}
{"timestamp": "2025-12-29T13:48:45.479550+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c002e441-97a7-4f9f-98a1-36137ec970e8"}
{"timestamp": "2025-12-29T13:48:45.479971+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 49.72s ago] {'pk_1': 84}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c002e441-97a7-4f9f-98a1-36137ec970e8"}
{"timestamp": "2025-12-29T13:48:45.482875+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c002e441-97a7-4f9f-98a1-36137ec970e8"}
{"timestamp": "2025-12-29T13:48:45.483281+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.51s ago] {'user_id_1': 84}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c002e441-97a7-4f9f-98a1-36137ec970e8"}
{"timestamp": "2025-12-29T13:48:45.485641+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.009s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "c002e441-97a7-4f9f-98a1-36137ec970e8"}
{"timestamp": "2025-12-29T13:48:45.486507+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c002e441-97a7-4f9f-98a1-36137ec970e8"}
{"timestamp": "2025-12-29T13:48:47.519940+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/order/41/initiate", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "91e6caf3-1d41-4d7c-997a-2941a18cec10"}
{"timestamp": "2025-12-29T13:48:47.522498+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "91e6caf3-1d41-4d7c-997a-2941a18cec10"}
{"timestamp": "2025-12-29T13:48:47.523201+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "91e6caf3-1d41-4d7c-997a-2941a18cec10"}
{"timestamp": "2025-12-29T13:48:47.523658+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 51.76s ago] {'pk_1': 84}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "91e6caf3-1d41-4d7c-997a-2941a18cec10"}
{"timestamp": "2025-12-29T13:48:47.527307+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "91e6caf3-1d41-4d7c-997a-2941a18cec10"}
{"timestamp": "2025-12-29T13:48:47.527697+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 51.64s ago] {'pk_1': 41}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "91e6caf3-1d41-4d7c-997a-2941a18cec10"}
{"timestamp": "2025-12-29T13:48:47.529854+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO payment_attempts (order_id, amount_attempted, status, final_amount, failure_reason, provider_payment_id, created_at) VALUES (%(order_id)s, %(amount_attempted)s, %(status)s, %(final_amount)s, %(failure_reason)s, %(provider_payment_id)s, %(created_at)s) RETURNING payment_attempts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "91e6caf3-1d41-4d7c-997a-2941a18cec10"}
{"timestamp": "2025-12-29T13:48:47.530283+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.5s ago] {'order_id': 41, 'amount_attempted': 1000, 'status': 'PENDING', 'final_amount': 1000, 'failure_reason': None, 'provider_payment_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 48, 47, 529422, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "91e6caf3-1d41-4d7c-997a-2941a18cec10"}
{"timestamp": "2025-12-29T13:48:47.532178+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "91e6caf3-1d41-4d7c-997a-2941a18cec10"}
{"timestamp": "2025-12-29T13:48:47.537571+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "91e6caf3-1d41-4d7c-997a-2941a18cec10"}
{"timestamp": "2025-12-29T13:48:47.538132+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "91e6caf3-1d41-4d7c-997a-2941a18cec10"}
{"timestamp": "2025-12-29T13:48:47.538456+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.49s ago] {'pk_1': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "91e6caf3-1d41-4d7c-997a-2941a18cec10"}
{"timestamp": "2025-12-29T13:48:47.541194+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "91e6caf3-1d41-4d7c-997a-2941a18cec10"}
{"timestamp": "2025-12-29T13:48:47.541550+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.49s ago] {'pk_1': 41}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "91e6caf3-1d41-4d7c-997a-2941a18cec10"}
{"timestamp": "2025-12-29T13:48:47.543093+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.pending with payload: {'payment_attempt_id': 27, 'order_id': 41, 'amount_attempted': 1000, 'final_amount': 1000, 'user_id': 84}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "91e6caf3-1d41-4d7c-997a-2941a18cec10"}
{"timestamp": "2025-12-29T13:48:47.544110+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.pending to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "91e6caf3-1d41-4d7c-997a-2941a18cec10"}
{"timestamp": "2025-12-29T13:48:47.544276+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: payment.pending", "module": "event_bus", "function": "publish", "line": 31, "request_id": "91e6caf3-1d41-4d7c-997a-2941a18cec10"}
{"timestamp": "2025-12-29T13:48:47.545476+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/order/41/initiate \u2192 200 (0.026s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "91e6caf3-1d41-4d7c-997a-2941a18cec10"}
{"timestamp": "2025-12-29T13:48:47.546611+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "91e6caf3-1d41-4d7c-997a-2941a18cec10"}
{"timestamp": "2025-12-29T13:48:49.595977+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /admin/payments/27/fail", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "234e049d-2929-4c6f-8880-42fd3522c658"}
{"timestamp": "2025-12-29T13:48:49.598930+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "234e049d-2929-4c6f-8880-42fd3522c658"}
{"timestamp": "2025-12-29T13:48:49.599653+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "234e049d-2929-4c6f-8880-42fd3522c658"}
{"timestamp": "2025-12-29T13:48:49.600032+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 53.84s ago] {'pk_1': 83}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "234e049d-2929-4c6f-8880-42fd3522c658"}
{"timestamp": "2025-12-29T13:48:49.603516+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: admin.force_fail_payment with payload: {'payment_attempt_id': 27}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "234e049d-2929-4c6f-8880-42fd3522c658"}
{"timestamp": "2025-12-29T13:48:49.604895+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing admin.force_fail_payment to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "234e049d-2929-4c6f-8880-42fd3522c658"}
{"timestamp": "2025-12-29T13:48:49.605139+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: admin.force_fail_payment", "module": "event_bus", "function": "publish", "line": 31, "request_id": "234e049d-2929-4c6f-8880-42fd3522c658"}
{"timestamp": "2025-12-29T13:48:49.606086+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /admin/payments/27/fail \u2192 200 (0.010s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "234e049d-2929-4c6f-8880-42fd3522c658"}
{"timestamp": "2025-12-29T13:48:49.606954+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "234e049d-2929-4c6f-8880-42fd3522c658"}
{"timestamp": "2025-12-29T13:48:51.631059+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "35944943-d5d5-4a3d-aa41-9d4a0e73229a"}
{"timestamp": "2025-12-29T13:48:51.633559+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "35944943-d5d5-4a3d-aa41-9d4a0e73229a"}
{"timestamp": "2025-12-29T13:48:51.634157+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "35944943-d5d5-4a3d-aa41-9d4a0e73229a"}
{"timestamp": "2025-12-29T13:48:51.634527+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 55.88s ago] {'pk_1': 84}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "35944943-d5d5-4a3d-aa41-9d4a0e73229a"}
{"timestamp": "2025-12-29T13:48:51.637395+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "35944943-d5d5-4a3d-aa41-9d4a0e73229a"}
{"timestamp": "2025-12-29T13:48:51.637762+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 53.67s ago] {'user_id_1': 84}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "35944943-d5d5-4a3d-aa41-9d4a0e73229a"}
{"timestamp": "2025-12-29T13:48:51.639966+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.009s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "35944943-d5d5-4a3d-aa41-9d4a0e73229a"}
{"timestamp": "2025-12-29T13:48:51.640828+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "35944943-d5d5-4a3d-aa41-9d4a0e73229a"}
{"timestamp": "2025-12-29T13:48:53.681816+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.684513+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.685224+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.685598+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.3s ago] {'email_1': 'test_admin_1767016131.6413574@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.890484+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.890892+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.28s ago] {'email': 'test_admin_1767016131.6413574@example.com', 'hashed_password': '$2b$12$zdOdmwk1dOqnCeg9vRsc8O5yUS/0Cq1Urxodu9ts7/YshH0DQClk.', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.892535+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.896552+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.897182+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.897570+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.28s ago] {'pk_1': 85}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.899782+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 85, 'email': 'test_admin_1767016131.6413574@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.900786+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.902511+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.903083+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.903624+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.26s ago] {'user_id_1': 85, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.905826+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.906060+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.25s ago] {'user_id': 85, 'name': None, 'email': 'test_admin_1767016131.6413574@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.907498+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.911514+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.912010+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.912261+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.25s ago] {'pk_1': 85}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.914286+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 85, 'user_id': 85, 'email': 'test_admin_1767016131.6413574@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.914651+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.914911+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.915244+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.916405+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.917589+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.917924+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.53s ago] {'email_1': 'test_admin_1767016131.6413574@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:54.123697+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 85, 'email': 'test_admin_1767016131.6413574@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:54.125156+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:54.125504+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:54.126853+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.445s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:54.128137+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:56.200847+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "208f2849-64d5-45be-aa7f-225fd3115a59"}
{"timestamp": "2025-12-29T13:48:56.203523+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "208f2849-64d5-45be-aa7f-225fd3115a59"}
{"timestamp": "2025-12-29T13:48:56.204246+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "208f2849-64d5-45be-aa7f-225fd3115a59"}
{"timestamp": "2025-12-29T13:48:56.204587+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.23s ago] {'title_1': 'Test Movie 1767016131.6413574'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "208f2849-64d5-45be-aa7f-225fd3115a59"}
{"timestamp": "2025-12-29T13:48:56.207540+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "208f2849-64d5-45be-aa7f-225fd3115a59"}
{"timestamp": "2025-12-29T13:48:56.208015+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.23s ago] {'title': 'Test Movie 1767016131.6413574', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "208f2849-64d5-45be-aa7f-225fd3115a59"}
{"timestamp": "2025-12-29T13:48:56.209953+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "208f2849-64d5-45be-aa7f-225fd3115a59"}
{"timestamp": "2025-12-29T13:48:56.214952+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "208f2849-64d5-45be-aa7f-225fd3115a59"}
{"timestamp": "2025-12-29T13:48:56.215615+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "208f2849-64d5-45be-aa7f-225fd3115a59"}
{"timestamp": "2025-12-29T13:48:56.216012+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.23s ago] {'pk_1': 51}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "208f2849-64d5-45be-aa7f-225fd3115a59"}
{"timestamp": "2025-12-29T13:48:56.217817+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 51}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "208f2849-64d5-45be-aa7f-225fd3115a59"}
{"timestamp": "2025-12-29T13:48:56.218680+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "208f2849-64d5-45be-aa7f-225fd3115a59"}
{"timestamp": "2025-12-29T13:48:56.218812+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "208f2849-64d5-45be-aa7f-225fd3115a59"}
{"timestamp": "2025-12-29T13:48:56.219779+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.019s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "208f2849-64d5-45be-aa7f-225fd3115a59"}
{"timestamp": "2025-12-29T13:48:56.220829+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "208f2849-64d5-45be-aa7f-225fd3115a59"}
{"timestamp": "2025-12-29T13:48:58.262567+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "dd5300df-e308-4ece-812f-5d15736d5519"}
{"timestamp": "2025-12-29T13:48:58.265101+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "dd5300df-e308-4ece-812f-5d15736d5519"}
{"timestamp": "2025-12-29T13:48:58.265648+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dd5300df-e308-4ece-812f-5d15736d5519"}
{"timestamp": "2025-12-29T13:48:58.266006+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.22s ago] {'name_1': 'Test Layout 1767016131.6413574'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dd5300df-e308-4ece-812f-5d15736d5519"}
{"timestamp": "2025-12-29T13:48:58.268385+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dd5300df-e308-4ece-812f-5d15736d5519"}
{"timestamp": "2025-12-29T13:48:58.268770+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.22s ago] {'name': 'Test Layout 1767016131.6413574', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dd5300df-e308-4ece-812f-5d15736d5519"}
{"timestamp": "2025-12-29T13:48:58.270733+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "dd5300df-e308-4ece-812f-5d15736d5519"}
{"timestamp": "2025-12-29T13:48:58.275311+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "dd5300df-e308-4ece-812f-5d15736d5519"}
{"timestamp": "2025-12-29T13:48:58.276223+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dd5300df-e308-4ece-812f-5d15736d5519"}
{"timestamp": "2025-12-29T13:48:58.276721+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.22s ago] {'pk_1': 50}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dd5300df-e308-4ece-812f-5d15736d5519"}
{"timestamp": "2025-12-29T13:48:58.279031+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 50}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "dd5300df-e308-4ece-812f-5d15736d5519"}
{"timestamp": "2025-12-29T13:48:58.280072+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "dd5300df-e308-4ece-812f-5d15736d5519"}
{"timestamp": "2025-12-29T13:48:58.280222+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "dd5300df-e308-4ece-812f-5d15736d5519"}
{"timestamp": "2025-12-29T13:48:58.281184+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.019s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "dd5300df-e308-4ece-812f-5d15736d5519"}
{"timestamp": "2025-12-29T13:48:58.282357+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "dd5300df-e308-4ece-812f-5d15736d5519"}
{"timestamp": "2025-12-29T13:49:00.325781+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "a1aafa9a-29c2-49db-9e9a-26d180431d14"}
{"timestamp": "2025-12-29T13:49:00.328362+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a1aafa9a-29c2-49db-9e9a-26d180431d14"}
{"timestamp": "2025-12-29T13:49:00.328943+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a1aafa9a-29c2-49db-9e9a-26d180431d14"}
{"timestamp": "2025-12-29T13:49:00.329385+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.22s ago] {'name_1': 'Test Screen 1767016131.6413574', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a1aafa9a-29c2-49db-9e9a-26d180431d14"}
{"timestamp": "2025-12-29T13:49:00.332140+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a1aafa9a-29c2-49db-9e9a-26d180431d14"}
{"timestamp": "2025-12-29T13:49:00.332784+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.22s ago] {'id_1': 50, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a1aafa9a-29c2-49db-9e9a-26d180431d14"}
{"timestamp": "2025-12-29T13:49:00.335077+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a1aafa9a-29c2-49db-9e9a-26d180431d14"}
{"timestamp": "2025-12-29T13:49:00.335528+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.22s ago] {'name': 'Test Screen 1767016131.6413574', 'capacity': 150, 'seat_layout_id': 50}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a1aafa9a-29c2-49db-9e9a-26d180431d14"}
{"timestamp": "2025-12-29T13:49:00.337321+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "a1aafa9a-29c2-49db-9e9a-26d180431d14"}
{"timestamp": "2025-12-29T13:49:00.342410+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a1aafa9a-29c2-49db-9e9a-26d180431d14"}
{"timestamp": "2025-12-29T13:49:00.342881+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a1aafa9a-29c2-49db-9e9a-26d180431d14"}
{"timestamp": "2025-12-29T13:49:00.343137+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.22s ago] {'pk_1': 50}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a1aafa9a-29c2-49db-9e9a-26d180431d14"}
{"timestamp": "2025-12-29T13:49:00.345203+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 50}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "a1aafa9a-29c2-49db-9e9a-26d180431d14"}
{"timestamp": "2025-12-29T13:49:00.346386+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "a1aafa9a-29c2-49db-9e9a-26d180431d14"}
{"timestamp": "2025-12-29T13:49:00.346643+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "a1aafa9a-29c2-49db-9e9a-26d180431d14"}
{"timestamp": "2025-12-29T13:49:00.347613+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "a1aafa9a-29c2-49db-9e9a-26d180431d14"}
{"timestamp": "2025-12-29T13:49:00.348323+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a1aafa9a-29c2-49db-9e9a-26d180431d14"}
{"timestamp": "2025-12-29T13:49:02.388674+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:02.392548+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:02.393488+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:02.394127+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.21s ago] {'pk_1': 51}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:02.397665+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:02.398077+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.21s ago] {'pk_1': 50}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:02.400493+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:02.401301+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.21s ago] {'screen_id_1': 50, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:02.403844+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:02.404195+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.21s ago] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 51, 'screen_id': 50}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:02.406084+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:02.410923+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:02.411422+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:02.411820+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.21s ago] {'pk_1': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:02.414394+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:02.414724+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.2s ago] {'pk_1': 51}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:02.416556+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:02.416805+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.2s ago] {'pk_1': 50}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:02.418284+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 42}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:02.419312+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:02.419446+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:02.420440+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.032s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:02.421336+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:04.471906+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.474827+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.475421+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.475735+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 82.09s ago] {'email_1': 'test_admincancel_1767016142.4211683@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.683146+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.683567+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 82.07s ago] {'email': 'test_admincancel_1767016142.4211683@example.com', 'hashed_password': '$2b$12$VtESz38muMCB7DMKm/ETo.WpfP6C.84y0gVcAOzsc4jKPH6TcXF1a', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.685175+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.690706+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.691246+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.691517+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 82.07s ago] {'pk_1': 86}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.693715+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 86, 'email': 'test_admincancel_1767016142.4211683@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.694636+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.696553+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.697180+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.697575+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 82.05s ago] {'user_id_1': 86, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.699990+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.700377+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 82.05s ago] {'user_id': 86, 'name': None, 'email': 'test_admincancel_1767016142.4211683@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.702154+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.706578+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.707116+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.707354+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 82.05s ago] {'pk_1': 86}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.709256+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 86, 'user_id': 86, 'email': 'test_admincancel_1767016142.4211683@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.709412+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.709544+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.710075+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.711305+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.712365+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.712670+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 82.33s ago] {'email_1': 'test_admincancel_1767016142.4211683@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.916452+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 86, 'email': 'test_admincancel_1767016142.4211683@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.917696+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.917922+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.919213+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.447s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.920230+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:06.973181+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:06.975891+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:06.976482+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:06.976875+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.22s ago] {'pk_1': 86}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:06.980203+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:06.980591+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.22s ago] {'showtime_id_1': 42, 'seat_code_1': 'R8-8', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:06.982678+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:06.983084+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.22s ago] {'user_id': 86, 'showtime_id': 42, 'seat_code': 'R8-8', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 13, 49, 6, 982238, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 59, 6, 981979, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:06.984985+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:06.990230+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:06.990721+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:06.990974+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.21s ago] {'pk_1': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:06.993257+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 42, 'user_id': 86, 'showtime_id': 42, 'seat_code': 'R8-8'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:06.994603+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:06.996483+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:06.996996+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:06.997230+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.23s ago] {'showtime_id_1': 42, 'seat_code_1': 'R8-8', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:06.999733+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:06.999967+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.21s ago] {'seat_code': 'R8-8', 'showtime_id': 42, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.001819+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.002099+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.21s ago] {'status': 'LOCKED', 'locked_by_user_id': 86, 'lock_expires_at': datetime.datetime(2025, 12, 29, 13, 59, 7, 1318, tzinfo=datetime.timezone.utc), 'seat_locks_id': 38}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.003759+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.007515+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.008117+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.008378+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.21s ago] {'pk_1': 38}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.010315+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 42, 'seat_code': 'R8-8', 'user_id': 86, 'expires_at': '2025-12-29T13:59:07.001318+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.010517+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.010664+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.010898+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.011993+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.012445+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 42, 'user_id': 86, 'showtime_id': 42, 'seat_code': 'R8-8'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.012686+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 42", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.014280+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.014808+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.015065+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.21s ago] {'user_id': 86, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.016998+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.020919+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.021386+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.021626+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.2s ago] {'pk_1': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.023369+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 42, 'reservation_id': 42, 'user_id': 86, 'showtime_id': 42, 'seat_code': 'R8-8'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.023516+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.024176+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 42", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.025598+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.026093+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.026490+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.17s ago] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.028574+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 42, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.028730+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.029295+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 42, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.030882+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.031330+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.031553+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.14s ago] {'pk_1': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.033834+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.034082+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.14s ago] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.035703+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.039339+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.039974+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.040336+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.22s ago] {'pk_1': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.042121+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 42 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.042373+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.043374+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.043535+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 42: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.043867+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.044967+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.045259+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 42", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.045696+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.046893+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.048606+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.049079+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.049475+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.14s ago] {'actor_id': 86, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 42, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 42, \"user_id\": 86, \"showtime_id\": 42, \"seat_code\": \"R8-8\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 49, 7, 48774, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.051688+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.055592+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.056175+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.056438+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.14s ago] {'pk_1': 57}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.058239+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.059208+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.060230+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.087s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.061174+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:09.106806+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /admin/reservations/42/cancel", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "a74c06ed-d7f4-4ff4-9be6-654e82563d23"}
{"timestamp": "2025-12-29T13:49:09.109681+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a74c06ed-d7f4-4ff4-9be6-654e82563d23"}
{"timestamp": "2025-12-29T13:49:09.110400+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a74c06ed-d7f4-4ff4-9be6-654e82563d23"}
{"timestamp": "2025-12-29T13:49:09.110719+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 73.35s ago] {'pk_1': 85}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a74c06ed-d7f4-4ff4-9be6-654e82563d23"}
{"timestamp": "2025-12-29T13:49:09.113872+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: admin.force_cancel_reservation with payload: {'reservation_id': 42}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "a74c06ed-d7f4-4ff4-9be6-654e82563d23"}
{"timestamp": "2025-12-29T13:49:09.115066+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing admin.force_cancel_reservation to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "a74c06ed-d7f4-4ff4-9be6-654e82563d23"}
{"timestamp": "2025-12-29T13:49:09.117296+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a74c06ed-d7f4-4ff4-9be6-654e82563d23"}
{"timestamp": "2025-12-29T13:49:09.117833+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id AS reservations_id, reservations.user_id AS reservations_user_id, reservations.showtime_id AS reservations_showtime_id, reservations.seat_code AS reservations_seat_code, reservations.status AS reservations_status, reservations.created_at AS reservations_created_at, reservations.expires_at AS reservations_expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a74c06ed-d7f4-4ff4-9be6-654e82563d23"}
{"timestamp": "2025-12-29T13:49:09.118105+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 41.18s ago] {'pk_1': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a74c06ed-d7f4-4ff4-9be6-654e82563d23"}
{"timestamp": "2025-12-29T13:49:09.120345+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE reservations SET status=%(status)s, expires_at=%(expires_at)s WHERE reservations.id = %(reservations_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a74c06ed-d7f4-4ff4-9be6-654e82563d23"}
{"timestamp": "2025-12-29T13:49:09.120636+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 41.18s ago] {'status': 'CANCELLED', 'expires_at': None, 'reservations_id': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a74c06ed-d7f4-4ff4-9be6-654e82563d23"}
{"timestamp": "2025-12-29T13:49:09.122642+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "a74c06ed-d7f4-4ff4-9be6-654e82563d23"}
{"timestamp": "2025-12-29T13:49:09.126866+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a74c06ed-d7f4-4ff4-9be6-654e82563d23"}
{"timestamp": "2025-12-29T13:49:09.127590+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a74c06ed-d7f4-4ff4-9be6-654e82563d23"}
{"timestamp": "2025-12-29T13:49:09.128022+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 73.35s ago] {'pk_1': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a74c06ed-d7f4-4ff4-9be6-654e82563d23"}
{"timestamp": "2025-12-29T13:49:09.129814+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.cancelled with payload: {'reservation_id': 42}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "a74c06ed-d7f4-4ff4-9be6-654e82563d23"}
{"timestamp": "2025-12-29T13:49:09.130132+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a74c06ed-d7f4-4ff4-9be6-654e82563d23"}
{"timestamp": "2025-12-29T13:49:09.134014+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.event_bus", "message": "\u274c Event handler failed: admin.force_cancel_reservation -> on_admin_force_cancel_reservation: asyncio.run() cannot be called from a running event loop", "module": "event_bus", "function": "_safe_invoke", "line": 45, "request_id": "a74c06ed-d7f4-4ff4-9be6-654e82563d23", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\event_bus.py\", line 42, in _safe_invoke\n    await handler(payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\reservation\\handlers.py\", line 59, in on_admin_force_cancel_reservation\n    cancel_reservation(\n    ~~~~~~~~~~~~~~~~~~^\n        db,\n        ^^^\n        reservation_id=reservation_id,\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        allow_admin_override=True,\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\reservation\\service.py\", line 110, in cancel_reservation\n    publish_event(event[\"type\"], event[\"payload\"])\n    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\shared\\services\\event_publisher.py\", line 17, in publish_event\n    asyncio.run(event_bus.publish(event_type, payload))\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 191, in run\n    raise RuntimeError(\n        \"asyncio.run() cannot be called from a running event loop\")\nRuntimeError: asyncio.run() cannot be called from a running event loop"}
{"timestamp": "2025-12-29T13:49:09.136592+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /admin/reservations/42/cancel \u2192 200 (0.030s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "a74c06ed-d7f4-4ff4-9be6-654e82563d23"}
{"timestamp": "2025-12-29T13:49:09.137684+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a74c06ed-d7f4-4ff4-9be6-654e82563d23"}
{"timestamp": "2025-12-29T13:49:11.174157+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /reservations/42", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "bf957903-f2eb-4ed1-92a1-3acede800c3c"}
{"timestamp": "2025-12-29T13:49:11.176536+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bf957903-f2eb-4ed1-92a1-3acede800c3c"}
{"timestamp": "2025-12-29T13:49:11.177097+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf957903-f2eb-4ed1-92a1-3acede800c3c"}
{"timestamp": "2025-12-29T13:49:11.177452+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 75.42s ago] {'pk_1': 86}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf957903-f2eb-4ed1-92a1-3acede800c3c"}
{"timestamp": "2025-12-29T13:49:11.180887+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id AS reservations_id, reservations.user_id AS reservations_user_id, reservations.showtime_id AS reservations_showtime_id, reservations.seat_code AS reservations_seat_code, reservations.status AS reservations_status, reservations.created_at AS reservations_created_at, reservations.expires_at AS reservations_expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf957903-f2eb-4ed1-92a1-3acede800c3c"}
{"timestamp": "2025-12-29T13:49:11.181313+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 43.24s ago] {'pk_1': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf957903-f2eb-4ed1-92a1-3acede800c3c"}
{"timestamp": "2025-12-29T13:49:11.183448+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /reservations/42 \u2192 200 (0.009s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "bf957903-f2eb-4ed1-92a1-3acede800c3c"}
{"timestamp": "2025-12-29T13:49:11.184333+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "bf957903-f2eb-4ed1-92a1-3acede800c3c"}
{"timestamp": "2025-12-29T13:49:13.222531+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.226322+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.227001+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.227402+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.84s ago] {'email_1': 'test_admin_1767016151.1846836@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.431939+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.432303+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.82s ago] {'email': 'test_admin_1767016151.1846836@example.com', 'hashed_password': '$2b$12$G13Z/q2aa6QYB3UHoEIC2.bVsHuJIB93ipcjkb/egqltPbcK/ljhu', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.433936+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.439133+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.439756+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.440086+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.82s ago] {'pk_1': 87}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.441983+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 87, 'email': 'test_admin_1767016151.1846836@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.442926+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.445107+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.445663+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.445916+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.8s ago] {'user_id_1': 87, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.448047+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.448329+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.8s ago] {'user_id': 87, 'name': None, 'email': 'test_admin_1767016151.1846836@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.450027+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.454312+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.454960+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.455261+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.79s ago] {'pk_1': 87}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.457621+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 87, 'user_id': 87, 'email': 'test_admin_1767016151.1846836@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.457842+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.457978+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.458205+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.459330+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.460509+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.460841+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 91.08s ago] {'email_1': 'test_admin_1767016151.1846836@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.664283+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 87, 'email': 'test_admin_1767016151.1846836@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.665347+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.665525+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.666674+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.444s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.667508+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:15.744126+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "1a9f5661-e1cc-4a51-909d-f04ad669b028"}
{"timestamp": "2025-12-29T13:49:15.747236+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1a9f5661-e1cc-4a51-909d-f04ad669b028"}
{"timestamp": "2025-12-29T13:49:15.747788+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1a9f5661-e1cc-4a51-909d-f04ad669b028"}
{"timestamp": "2025-12-29T13:49:15.748173+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.78s ago] {'title_1': 'Test Movie 1767016151.1846836'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1a9f5661-e1cc-4a51-909d-f04ad669b028"}
{"timestamp": "2025-12-29T13:49:15.751041+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1a9f5661-e1cc-4a51-909d-f04ad669b028"}
{"timestamp": "2025-12-29T13:49:15.751473+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.77s ago] {'title': 'Test Movie 1767016151.1846836', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1a9f5661-e1cc-4a51-909d-f04ad669b028"}
{"timestamp": "2025-12-29T13:49:15.753276+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "1a9f5661-e1cc-4a51-909d-f04ad669b028"}
{"timestamp": "2025-12-29T13:49:15.757588+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1a9f5661-e1cc-4a51-909d-f04ad669b028"}
{"timestamp": "2025-12-29T13:49:15.758394+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1a9f5661-e1cc-4a51-909d-f04ad669b028"}
{"timestamp": "2025-12-29T13:49:15.758860+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.77s ago] {'pk_1': 52}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1a9f5661-e1cc-4a51-909d-f04ad669b028"}
{"timestamp": "2025-12-29T13:49:15.760731+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 52}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "1a9f5661-e1cc-4a51-909d-f04ad669b028"}
{"timestamp": "2025-12-29T13:49:15.761639+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "1a9f5661-e1cc-4a51-909d-f04ad669b028"}
{"timestamp": "2025-12-29T13:49:15.761773+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "1a9f5661-e1cc-4a51-909d-f04ad669b028"}
{"timestamp": "2025-12-29T13:49:15.762783+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.019s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "1a9f5661-e1cc-4a51-909d-f04ad669b028"}
{"timestamp": "2025-12-29T13:49:15.763912+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "1a9f5661-e1cc-4a51-909d-f04ad669b028"}
{"timestamp": "2025-12-29T13:49:17.804044+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "2eb32b8c-2bbc-4b31-b066-3db03996d20d"}
{"timestamp": "2025-12-29T13:49:17.806772+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2eb32b8c-2bbc-4b31-b066-3db03996d20d"}
{"timestamp": "2025-12-29T13:49:17.807297+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2eb32b8c-2bbc-4b31-b066-3db03996d20d"}
{"timestamp": "2025-12-29T13:49:17.807645+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.76s ago] {'name_1': 'Test Layout 1767016151.1846836'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2eb32b8c-2bbc-4b31-b066-3db03996d20d"}
{"timestamp": "2025-12-29T13:49:17.810103+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2eb32b8c-2bbc-4b31-b066-3db03996d20d"}
{"timestamp": "2025-12-29T13:49:17.810485+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.76s ago] {'name': 'Test Layout 1767016151.1846836', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2eb32b8c-2bbc-4b31-b066-3db03996d20d"}
{"timestamp": "2025-12-29T13:49:17.812374+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2eb32b8c-2bbc-4b31-b066-3db03996d20d"}
{"timestamp": "2025-12-29T13:49:17.817135+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2eb32b8c-2bbc-4b31-b066-3db03996d20d"}
{"timestamp": "2025-12-29T13:49:17.817791+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2eb32b8c-2bbc-4b31-b066-3db03996d20d"}
{"timestamp": "2025-12-29T13:49:17.818314+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.76s ago] {'pk_1': 51}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2eb32b8c-2bbc-4b31-b066-3db03996d20d"}
{"timestamp": "2025-12-29T13:49:17.820425+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 51}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "2eb32b8c-2bbc-4b31-b066-3db03996d20d"}
{"timestamp": "2025-12-29T13:49:17.821294+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2eb32b8c-2bbc-4b31-b066-3db03996d20d"}
{"timestamp": "2025-12-29T13:49:17.821450+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "2eb32b8c-2bbc-4b31-b066-3db03996d20d"}
{"timestamp": "2025-12-29T13:49:17.822443+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.019s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "2eb32b8c-2bbc-4b31-b066-3db03996d20d"}
{"timestamp": "2025-12-29T13:49:17.823280+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2eb32b8c-2bbc-4b31-b066-3db03996d20d"}
{"timestamp": "2025-12-29T13:49:19.869640+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b93abc30-0c83-49ce-a25d-8b6dd936e0a5"}
{"timestamp": "2025-12-29T13:49:19.872358+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b93abc30-0c83-49ce-a25d-8b6dd936e0a5"}
{"timestamp": "2025-12-29T13:49:19.872967+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b93abc30-0c83-49ce-a25d-8b6dd936e0a5"}
{"timestamp": "2025-12-29T13:49:19.873348+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.77s ago] {'name_1': 'Test Screen 1767016151.1846836', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b93abc30-0c83-49ce-a25d-8b6dd936e0a5"}
{"timestamp": "2025-12-29T13:49:19.876374+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b93abc30-0c83-49ce-a25d-8b6dd936e0a5"}
{"timestamp": "2025-12-29T13:49:19.876769+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.77s ago] {'id_1': 51, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b93abc30-0c83-49ce-a25d-8b6dd936e0a5"}
{"timestamp": "2025-12-29T13:49:19.878954+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b93abc30-0c83-49ce-a25d-8b6dd936e0a5"}
{"timestamp": "2025-12-29T13:49:19.879331+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.76s ago] {'name': 'Test Screen 1767016151.1846836', 'capacity': 150, 'seat_layout_id': 51}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b93abc30-0c83-49ce-a25d-8b6dd936e0a5"}
{"timestamp": "2025-12-29T13:49:19.881042+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b93abc30-0c83-49ce-a25d-8b6dd936e0a5"}
{"timestamp": "2025-12-29T13:49:19.886673+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b93abc30-0c83-49ce-a25d-8b6dd936e0a5"}
{"timestamp": "2025-12-29T13:49:19.887277+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b93abc30-0c83-49ce-a25d-8b6dd936e0a5"}
{"timestamp": "2025-12-29T13:49:19.887870+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.76s ago] {'pk_1': 51}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b93abc30-0c83-49ce-a25d-8b6dd936e0a5"}
{"timestamp": "2025-12-29T13:49:19.890271+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 51}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "b93abc30-0c83-49ce-a25d-8b6dd936e0a5"}
{"timestamp": "2025-12-29T13:49:19.891371+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b93abc30-0c83-49ce-a25d-8b6dd936e0a5"}
{"timestamp": "2025-12-29T13:49:19.891528+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "b93abc30-0c83-49ce-a25d-8b6dd936e0a5"}
{"timestamp": "2025-12-29T13:49:19.892496+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.023s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b93abc30-0c83-49ce-a25d-8b6dd936e0a5"}
{"timestamp": "2025-12-29T13:49:19.893860+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b93abc30-0c83-49ce-a25d-8b6dd936e0a5"}
{"timestamp": "2025-12-29T13:49:21.944763+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:21.947412+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:21.948073+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:21.948416+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.76s ago] {'pk_1': 52}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:21.951147+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:21.951644+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.76s ago] {'pk_1': 51}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:21.953725+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:21.954137+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.76s ago] {'screen_id_1': 51, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:21.955977+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:21.956342+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.76s ago] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 52, 'screen_id': 51}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:21.958146+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:21.963574+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:21.964370+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:21.964901+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.76s ago] {'pk_1': 43}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:21.967379+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:21.967721+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.76s ago] {'pk_1': 52}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:21.969592+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:21.970042+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.76s ago] {'pk_1': 51}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:21.971894+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 43}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:21.972999+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:21.973143+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:21.974413+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.030s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:21.975840+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:24.028670+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.031266+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.031858+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.032216+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 101.6s ago] {'email_1': 'test_concurrent1_1767016161.9758787@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.237020+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.237382+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 101.6s ago] {'email': 'test_concurrent1_1767016161.9758787@example.com', 'hashed_password': '$2b$12$JH.0gpKLWA5er8ZEYMBkheaBgkdVesRx96GQlVVEK1LmZrY87k9T6', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.238980+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.243656+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.244539+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.245021+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 101.6s ago] {'pk_1': 88}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.246986+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 88, 'email': 'test_concurrent1_1767016161.9758787@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.248426+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.250924+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.251547+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.251828+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 101.6s ago] {'user_id_1': 88, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.254240+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.254677+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 101.6s ago] {'user_id': 88, 'name': None, 'email': 'test_concurrent1_1767016161.9758787@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.256429+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.260751+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.261275+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.261650+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 101.6s ago] {'pk_1': 88}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.263872+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 88, 'user_id': 88, 'email': 'test_concurrent1_1767016161.9758787@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.264241+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.264497+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.264867+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.266092+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.267411+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.267809+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 101.9s ago] {'email_1': 'test_concurrent1_1767016161.9758787@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.472939+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 88, 'email': 'test_concurrent1_1767016161.9758787@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.474080+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.474290+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.475441+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.447s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.476388+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:26.619478+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.622549+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.623134+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.623485+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 104.2s ago] {'email_1': 'test_concurrent2_1767016164.576332@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.828764+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.829138+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 104.2s ago] {'email': 'test_concurrent2_1767016164.576332@example.com', 'hashed_password': '$2b$12$jcy28kB0cM.q9RDrAiUZKeuBiUKLj2VkbXTl2zDWXR3gvLb3rY.1q', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.830772+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.835893+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.836570+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.837057+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 104.2s ago] {'pk_1': 89}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.839546+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 89, 'email': 'test_concurrent2_1767016164.576332@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.840676+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.842794+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.843389+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.843640+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 104.2s ago] {'user_id_1': 89, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.846160+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.846425+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 104.2s ago] {'user_id': 89, 'name': None, 'email': 'test_concurrent2_1767016164.576332@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.848223+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.852266+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.852730+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.852970+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 104.2s ago] {'pk_1': 89}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.855142+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 89, 'user_id': 89, 'email': 'test_concurrent2_1767016164.576332@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.855331+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.855469+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.855703+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.856657+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.857699+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.858089+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 104.5s ago] {'email_1': 'test_concurrent2_1767016164.576332@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:27.062028+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 89, 'email': 'test_concurrent2_1767016164.576332@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:27.088872+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:27.089183+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:27.090551+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.471s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:27.091438+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:29.139900+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.142522+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.143113+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.143505+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 93.39s ago] {'pk_1': 88}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.146921+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.147384+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 93.38s ago] {'showtime_id_1': 43, 'seat_code_1': 'R9-9', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.149555+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.149955+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 93.38s ago] {'user_id': 88, 'showtime_id': 43, 'seat_code': 'R9-9', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 13, 49, 29, 149128, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 59, 29, 148873, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.151669+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.156118+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.156638+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.156928+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 93.38s ago] {'pk_1': 43}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.158810+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 43, 'user_id': 88, 'showtime_id': 43, 'seat_code': 'R9-9'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.160107+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.162129+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.162639+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.162911+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 93.4s ago] {'showtime_id_1': 43, 'seat_code_1': 'R9-9', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.165531+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.165816+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 93.38s ago] {'seat_code': 'R9-9', 'showtime_id': 43, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.167795+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.168094+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 93.38s ago] {'status': 'LOCKED', 'locked_by_user_id': 88, 'lock_expires_at': datetime.datetime(2025, 12, 29, 13, 59, 29, 167278, tzinfo=datetime.timezone.utc), 'seat_locks_id': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.169691+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.173627+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.174396+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.174795+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 93.37s ago] {'pk_1': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.176861+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 43, 'seat_code': 'R9-9', 'user_id': 88, 'expires_at': '2025-12-29T13:59:29.167278+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.177046+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.177217+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.177473+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.178520+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.178946+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 43, 'user_id': 88, 'showtime_id': 43, 'seat_code': 'R9-9'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.179244+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 43", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.181147+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.181634+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.181859+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 93.37s ago] {'user_id': 88, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 43}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.183801+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.187795+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.188231+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.188454+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 93.37s ago] {'pk_1': 43}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.190197+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 43, 'reservation_id': 43, 'user_id': 88, 'showtime_id': 43, 'seat_code': 'R9-9'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.190368+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.190812+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 43", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.192275+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.192675+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.192892+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 93.34s ago] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.195003+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 43, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.195149+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.195647+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 43, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.197234+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.197795+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.198070+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 93.31s ago] {'pk_1': 43}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.200150+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.200536+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 93.31s ago] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 43}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.202418+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.206130+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.206820+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.207230+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 93.39s ago] {'pk_1': 43}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.209285+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 43 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.209593+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.210652+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.210825+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 43: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.211163+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.212332+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.212498+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 43", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.212725+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.213762+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.215747+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.216291+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.216820+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 93.31s ago] {'actor_id': 88, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 43, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 43, \"user_id\": 88, \"showtime_id\": 43, \"seat_code\": \"R9-9\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 49, 29, 215929, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.219000+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.222674+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.223295+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.223640+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 93.31s ago] {'pk_1': 58}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.225699+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.226583+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.227592+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.088s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.228284+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:31.279838+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "ddab7466-060b-4d47-9edc-c51c917dec55"}
{"timestamp": "2025-12-29T13:49:31.282560+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ddab7466-060b-4d47-9edc-c51c917dec55"}
{"timestamp": "2025-12-29T13:49:31.283209+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ddab7466-060b-4d47-9edc-c51c917dec55"}
{"timestamp": "2025-12-29T13:49:31.283565+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 95.53s ago] {'pk_1': 89}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ddab7466-060b-4d47-9edc-c51c917dec55"}
{"timestamp": "2025-12-29T13:49:31.286785+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ddab7466-060b-4d47-9edc-c51c917dec55"}
{"timestamp": "2025-12-29T13:49:31.287157+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 95.52s ago] {'showtime_id_1': 43, 'seat_code_1': 'R9-9', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ddab7466-060b-4d47-9edc-c51c917dec55"}
{"timestamp": "2025-12-29T13:49:31.289359+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ddab7466-060b-4d47-9edc-c51c917dec55"}
{"timestamp": "2025-12-29T13:49:31.300307+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.middleware", "message": "\u2717 POST /reservations/ \u2192 FAILED (0.011s)", "module": "middleware", "function": "dispatch", "line": 83, "request_id": "ddab7466-060b-4d47-9edc-c51c917dec55", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 151, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\streams\\memory.py\", line 126, in receive\n    raise EndOfStream from None\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\middleware.py\", line 57, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    raise app_exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 390, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 291, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\concurrency.py\", line 38, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\to_thread.py\", line 56, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 2485, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 976, in run\n    result = context.run(func, *args)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\reservation\\router.py\", line 31, in create_reservation_route\n    return create_reservation(db=db, user_id=current_user.id, data=payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\reservation\\service.py\", line 53, in create_reservation\n    raise ValidationError(\n    ...<2 lines>...\n    )\napp.core.errors.ValidationError: ('Seat is locked by another user', {'seat_code': 'R9-9'})"}
{"timestamp": "2025-12-29T13:52:17.211667+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
