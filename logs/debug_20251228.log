{"timestamp": "2025-12-28T14:54:22.214216+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-28T14:54:22.214771+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-28T14:54:22.215076+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.215764+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.215970+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.216242+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.216486+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.216664+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.216810+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.216993+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.217194+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.217446+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.217663+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.217845+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.218044+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.218336+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.218588+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.218802+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.219158+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.219530+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.219997+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.220222+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.220483+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.220656+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.220826+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.221067+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.221232+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.221448+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.221628+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.221840+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.222040+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.222270+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.222539+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.222766+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.223044+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.223292+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.223486+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.223740+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.223980+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.224308+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.224505+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.224742+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.224879+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.225042+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.225248+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.225519+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.225757+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.225974+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.226230+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.226441+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.226638+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.226860+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.227072+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.227235+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.227386+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.227653+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.227943+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.233086+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.233602+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.234361+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:54:22.234759+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-28T14:54:22.235066+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-28T14:54:37.039215+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "4631520f-ed90-42bf-b413-c829ec6a298f"}
{"timestamp": "2025-12-28T14:54:37.156980+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4631520f-ed90-42bf-b413-c829ec6a298f"}
{"timestamp": "2025-12-28T14:54:37.157656+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4631520f-ed90-42bf-b413-c829ec6a298f"}
{"timestamp": "2025-12-28T14:54:37.160930+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4631520f-ed90-42bf-b413-c829ec6a298f"}
{"timestamp": "2025-12-28T14:54:37.161285+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4631520f-ed90-42bf-b413-c829ec6a298f"}
{"timestamp": "2025-12-28T14:54:37.163945+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4631520f-ed90-42bf-b413-c829ec6a298f"}
{"timestamp": "2025-12-28T14:54:37.164253+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4631520f-ed90-42bf-b413-c829ec6a298f"}
{"timestamp": "2025-12-28T14:54:37.166629+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "4631520f-ed90-42bf-b413-c829ec6a298f"}
{"timestamp": "2025-12-28T14:54:37.169812+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4631520f-ed90-42bf-b413-c829ec6a298f"}
{"timestamp": "2025-12-28T14:54:37.170222+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00063s] {'email_1': 'test_1766933674.971298@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4631520f-ed90-42bf-b413-c829ec6a298f"}
{"timestamp": "2025-12-28T14:54:37.176875+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "detected 'bcrypt' backend, version '4.0.1'", "module": "bcrypt", "function": "_load_backend_mixin", "line": 625, "request_id": "4631520f-ed90-42bf-b413-c829ec6a298f"}
{"timestamp": "2025-12-28T14:54:37.178140+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "'bcrypt' backend lacks $2$ support, enabling workaround", "module": "bcrypt", "function": "_finalize_backend_mixin", "line": 406, "request_id": "4631520f-ed90-42bf-b413-c829ec6a298f"}
{"timestamp": "2025-12-28T14:54:37.407058+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4631520f-ed90-42bf-b413-c829ec6a298f"}
{"timestamp": "2025-12-28T14:54:37.407520+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'email': 'test_1766933674.971298@example.com', 'hashed_password': '$2b$12$NjI1f4p9ntkHKYl3/j2ZZuHtammV4S./OBNcuSb/U7FlTXVWsI0vC', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4631520f-ed90-42bf-b413-c829ec6a298f"}
{"timestamp": "2025-12-28T14:54:37.412596+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "4631520f-ed90-42bf-b413-c829ec6a298f"}
{"timestamp": "2025-12-28T14:54:37.419540+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "4631520f-ed90-42bf-b413-c829ec6a298f"}
{"timestamp": "2025-12-28T14:54:37.420880+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4631520f-ed90-42bf-b413-c829ec6a298f"}
{"timestamp": "2025-12-28T14:54:37.421217+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'pk_1': 6}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4631520f-ed90-42bf-b413-c829ec6a298f"}
{"timestamp": "2025-12-28T14:54:37.423911+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "4631520f-ed90-42bf-b413-c829ec6a298f"}
{"timestamp": "2025-12-28T14:54:37.449842+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "4631520f-ed90-42bf-b413-c829ec6a298f"}
{"timestamp": "2025-12-28T14:54:37.451523+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4631520f-ed90-42bf-b413-c829ec6a298f"}
{"timestamp": "2025-12-28T14:54:37.451951+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00064s] {'user_id_1': 6, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4631520f-ed90-42bf-b413-c829ec6a298f"}
{"timestamp": "2025-12-28T14:54:37.457049+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4631520f-ed90-42bf-b413-c829ec6a298f"}
{"timestamp": "2025-12-28T14:54:37.457585+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'user_id': 6, 'name': None, 'email': 'test_1766933674.971298@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4631520f-ed90-42bf-b413-c829ec6a298f"}
{"timestamp": "2025-12-28T14:54:37.461596+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "4631520f-ed90-42bf-b413-c829ec6a298f"}
{"timestamp": "2025-12-28T14:54:37.465835+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "4631520f-ed90-42bf-b413-c829ec6a298f"}
{"timestamp": "2025-12-28T14:54:37.466899+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4631520f-ed90-42bf-b413-c829ec6a298f"}
{"timestamp": "2025-12-28T14:54:37.467341+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'pk_1': 6}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4631520f-ed90-42bf-b413-c829ec6a298f"}
{"timestamp": "2025-12-28T14:54:37.469693+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "4631520f-ed90-42bf-b413-c829ec6a298f"}
{"timestamp": "2025-12-28T14:54:37.472050+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4631520f-ed90-42bf-b413-c829ec6a298f"}
{"timestamp": "2025-12-28T14:54:37.472549+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.3029s ago] {'email_1': 'test_1766933674.971298@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4631520f-ed90-42bf-b413-c829ec6a298f"}
{"timestamp": "2025-12-28T14:54:37.711282+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "4631520f-ed90-42bf-b413-c829ec6a298f"}
{"timestamp": "2025-12-28T14:54:37.714841+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.676s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "4631520f-ed90-42bf-b413-c829ec6a298f"}
{"timestamp": "2025-12-28T14:54:37.715824+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "4631520f-ed90-42bf-b413-c829ec6a298f"}
{"timestamp": "2025-12-28T14:54:37.718131+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/login", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "00d7dffc-5dde-4bfe-b59b-779d19902fa0"}
{"timestamp": "2025-12-28T14:54:37.718927+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "00d7dffc-5dde-4bfe-b59b-779d19902fa0"}
{"timestamp": "2025-12-28T14:54:37.719169+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[0:8]", "module": "multipart", "function": "callback", "line": 625, "request_id": "00d7dffc-5dde-4bfe-b59b-779d19902fa0"}
{"timestamp": "2025-12-28T14:54:37.719339+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[9:45]", "module": "multipart", "function": "callback", "line": 625, "request_id": "00d7dffc-5dde-4bfe-b59b-779d19902fa0"}
{"timestamp": "2025-12-28T14:54:37.719502+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "00d7dffc-5dde-4bfe-b59b-779d19902fa0"}
{"timestamp": "2025-12-28T14:54:37.719681+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "00d7dffc-5dde-4bfe-b59b-779d19902fa0"}
{"timestamp": "2025-12-28T14:54:37.719858+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[46:54]", "module": "multipart", "function": "callback", "line": 625, "request_id": "00d7dffc-5dde-4bfe-b59b-779d19902fa0"}
{"timestamp": "2025-12-28T14:54:37.720003+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[55:73]", "module": "multipart", "function": "callback", "line": 625, "request_id": "00d7dffc-5dde-4bfe-b59b-779d19902fa0"}
{"timestamp": "2025-12-28T14:54:37.720451+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "00d7dffc-5dde-4bfe-b59b-779d19902fa0"}
{"timestamp": "2025-12-28T14:54:37.720795+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "00d7dffc-5dde-4bfe-b59b-779d19902fa0"}
{"timestamp": "2025-12-28T14:54:37.724145+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "00d7dffc-5dde-4bfe-b59b-779d19902fa0"}
{"timestamp": "2025-12-28T14:54:37.724909+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "00d7dffc-5dde-4bfe-b59b-779d19902fa0"}
{"timestamp": "2025-12-28T14:54:37.725402+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.5558s ago] {'email_1': 'test_1766933674.971298@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "00d7dffc-5dde-4bfe-b59b-779d19902fa0"}
{"timestamp": "2025-12-28T14:54:37.933059+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "00d7dffc-5dde-4bfe-b59b-779d19902fa0"}
{"timestamp": "2025-12-28T14:54:37.934706+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/login \u2192 200 (0.217s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "00d7dffc-5dde-4bfe-b59b-779d19902fa0"}
{"timestamp": "2025-12-28T14:54:37.935563+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "00d7dffc-5dde-4bfe-b59b-779d19902fa0"}
{"timestamp": "2025-12-28T14:54:37.936962+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /profiles/me", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "10879b8f-0e94-4a13-9fc0-baf18afa43b4"}
{"timestamp": "2025-12-28T14:54:37.939907+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "10879b8f-0e94-4a13-9fc0-baf18afa43b4"}
{"timestamp": "2025-12-28T14:54:37.941210+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "10879b8f-0e94-4a13-9fc0-baf18afa43b4"}
{"timestamp": "2025-12-28T14:54:37.941730+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00073s] {'pk_1': 6}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "10879b8f-0e94-4a13-9fc0-baf18afa43b4"}
{"timestamp": "2025-12-28T14:54:37.945312+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "10879b8f-0e94-4a13-9fc0-baf18afa43b4"}
{"timestamp": "2025-12-28T14:54:37.945684+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.4944s ago] {'user_id_1': 6, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "10879b8f-0e94-4a13-9fc0-baf18afa43b4"}
{"timestamp": "2025-12-28T14:54:37.951638+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /profiles/me \u2192 200 (0.015s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "10879b8f-0e94-4a13-9fc0-baf18afa43b4"}
{"timestamp": "2025-12-28T14:54:37.952671+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "10879b8f-0e94-4a13-9fc0-baf18afa43b4"}
{"timestamp": "2025-12-28T14:54:37.954981+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b63f95fb-a23e-44c2-88f6-c32a6f10593f"}
{"timestamp": "2025-12-28T14:54:37.957928+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b63f95fb-a23e-44c2-88f6-c32a6f10593f"}
{"timestamp": "2025-12-28T14:54:37.959337+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b63f95fb-a23e-44c2-88f6-c32a6f10593f"}
{"timestamp": "2025-12-28T14:54:37.959671+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'title_1': 'The Matrix Reloaded 1766933677.953164'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b63f95fb-a23e-44c2-88f6-c32a6f10593f"}
{"timestamp": "2025-12-28T14:54:37.963788+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b63f95fb-a23e-44c2-88f6-c32a6f10593f"}
{"timestamp": "2025-12-28T14:54:37.964409+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'title': 'The Matrix Reloaded 1766933677.953164', 'description': 'Test movie: The Matrix Reloaded 1766933677.953164', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b63f95fb-a23e-44c2-88f6-c32a6f10593f"}
{"timestamp": "2025-12-28T14:54:37.966987+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b63f95fb-a23e-44c2-88f6-c32a6f10593f"}
{"timestamp": "2025-12-28T14:54:37.970960+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b63f95fb-a23e-44c2-88f6-c32a6f10593f"}
{"timestamp": "2025-12-28T14:54:37.971984+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b63f95fb-a23e-44c2-88f6-c32a6f10593f"}
{"timestamp": "2025-12-28T14:54:37.972435+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'pk_1': 3}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b63f95fb-a23e-44c2-88f6-c32a6f10593f"}
{"timestamp": "2025-12-28T14:54:37.975042+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "b63f95fb-a23e-44c2-88f6-c32a6f10593f"}
{"timestamp": "2025-12-28T14:54:37.976666+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b63f95fb-a23e-44c2-88f6-c32a6f10593f"}
{"timestamp": "2025-12-28T14:54:37.977598+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b63f95fb-a23e-44c2-88f6-c32a6f10593f"}
{"timestamp": "2025-12-28T14:54:37.979251+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "355eda34-17cf-4e49-b012-9fb76b4b1c3e"}
{"timestamp": "2025-12-28T14:54:37.981948+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "355eda34-17cf-4e49-b012-9fb76b4b1c3e"}
{"timestamp": "2025-12-28T14:54:37.983183+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "355eda34-17cf-4e49-b012-9fb76b4b1c3e"}
{"timestamp": "2025-12-28T14:54:37.983461+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'name_1': 'Standard Layout 1766933677.977726'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "355eda34-17cf-4e49-b012-9fb76b4b1c3e"}
{"timestamp": "2025-12-28T14:54:37.991259+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "355eda34-17cf-4e49-b012-9fb76b4b1c3e"}
{"timestamp": "2025-12-28T14:54:37.991602+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'name': 'Standard Layout 1766933677.977726', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "355eda34-17cf-4e49-b012-9fb76b4b1c3e"}
{"timestamp": "2025-12-28T14:54:37.996664+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "355eda34-17cf-4e49-b012-9fb76b4b1c3e"}
{"timestamp": "2025-12-28T14:54:38.000825+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "355eda34-17cf-4e49-b012-9fb76b4b1c3e"}
{"timestamp": "2025-12-28T14:54:38.001637+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "355eda34-17cf-4e49-b012-9fb76b4b1c3e"}
{"timestamp": "2025-12-28T14:54:38.001900+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00036s] {'pk_1': 2}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "355eda34-17cf-4e49-b012-9fb76b4b1c3e"}
{"timestamp": "2025-12-28T14:54:38.004929+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "355eda34-17cf-4e49-b012-9fb76b4b1c3e"}
{"timestamp": "2025-12-28T14:54:38.006459+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.027s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "355eda34-17cf-4e49-b012-9fb76b4b1c3e"}
{"timestamp": "2025-12-28T14:54:38.007236+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "355eda34-17cf-4e49-b012-9fb76b4b1c3e"}
{"timestamp": "2025-12-28T14:54:38.012068+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b2370c86-404e-4f6e-938c-cfbe5130e1ef"}
{"timestamp": "2025-12-28T14:54:38.014933+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b2370c86-404e-4f6e-938c-cfbe5130e1ef"}
{"timestamp": "2025-12-28T14:54:38.016096+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b2370c86-404e-4f6e-938c-cfbe5130e1ef"}
{"timestamp": "2025-12-28T14:54:38.016424+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'name_1': 'Screen 1 1766933678.007107', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b2370c86-404e-4f6e-938c-cfbe5130e1ef"}
{"timestamp": "2025-12-28T14:54:38.025059+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b2370c86-404e-4f6e-938c-cfbe5130e1ef"}
{"timestamp": "2025-12-28T14:54:38.025620+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00062s] {'id_1': 2, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b2370c86-404e-4f6e-938c-cfbe5130e1ef"}
{"timestamp": "2025-12-28T14:54:38.028088+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b2370c86-404e-4f6e-938c-cfbe5130e1ef"}
{"timestamp": "2025-12-28T14:54:38.028427+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'name': 'Screen 1 1766933678.007107', 'capacity': 150, 'seat_layout_id': 2}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b2370c86-404e-4f6e-938c-cfbe5130e1ef"}
{"timestamp": "2025-12-28T14:54:38.032817+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b2370c86-404e-4f6e-938c-cfbe5130e1ef"}
{"timestamp": "2025-12-28T14:54:38.037102+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b2370c86-404e-4f6e-938c-cfbe5130e1ef"}
{"timestamp": "2025-12-28T14:54:38.038035+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b2370c86-404e-4f6e-938c-cfbe5130e1ef"}
{"timestamp": "2025-12-28T14:54:38.038433+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'pk_1': 2}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b2370c86-404e-4f6e-938c-cfbe5130e1ef"}
{"timestamp": "2025-12-28T14:54:38.041049+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "b2370c86-404e-4f6e-938c-cfbe5130e1ef"}
{"timestamp": "2025-12-28T14:54:38.042592+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.031s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b2370c86-404e-4f6e-938c-cfbe5130e1ef"}
{"timestamp": "2025-12-28T14:54:38.043473+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b2370c86-404e-4f6e-938c-cfbe5130e1ef"}
{"timestamp": "2025-12-28T14:58:39.522885+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-28T14:58:41.938514+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-28T14:58:41.939402+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-28T14:58:41.939905+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.940299+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.940727+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.941111+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.941475+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.941831+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.942333+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.942680+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.943073+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.943615+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.944096+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.944491+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.944809+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.945171+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.945523+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.945846+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.946185+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.946503+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.946940+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.947294+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.947585+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.947906+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.948199+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.948558+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.949162+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.949644+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.950281+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.950740+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.951104+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.951551+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.951912+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.952284+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.952671+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.953084+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.953468+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.953907+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.954569+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.955022+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.955358+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.955642+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.956058+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.956446+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.956788+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.957124+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.957469+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.957771+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.958084+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.958392+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.958833+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.959163+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.959417+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.959692+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.959926+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.960254+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.960590+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.960906+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.961224+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.961431+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T14:58:41.961638+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-28T14:58:41.961842+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-28T14:58:48.464044+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "8ee94fbb-0a74-402b-81e1-3737ee055aec"}
{"timestamp": "2025-12-28T14:58:48.522827+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8ee94fbb-0a74-402b-81e1-3737ee055aec"}
{"timestamp": "2025-12-28T14:58:48.523222+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8ee94fbb-0a74-402b-81e1-3737ee055aec"}
{"timestamp": "2025-12-28T14:58:48.525644+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8ee94fbb-0a74-402b-81e1-3737ee055aec"}
{"timestamp": "2025-12-28T14:58:48.526013+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8ee94fbb-0a74-402b-81e1-3737ee055aec"}
{"timestamp": "2025-12-28T14:58:48.527916+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8ee94fbb-0a74-402b-81e1-3737ee055aec"}
{"timestamp": "2025-12-28T14:58:48.528402+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8ee94fbb-0a74-402b-81e1-3737ee055aec"}
{"timestamp": "2025-12-28T14:58:48.530543+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8ee94fbb-0a74-402b-81e1-3737ee055aec"}
{"timestamp": "2025-12-28T14:58:48.533197+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8ee94fbb-0a74-402b-81e1-3737ee055aec"}
{"timestamp": "2025-12-28T14:58:48.533591+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'email_1': 'test_1766933926.39662@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8ee94fbb-0a74-402b-81e1-3737ee055aec"}
{"timestamp": "2025-12-28T14:58:48.537574+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "detected 'bcrypt' backend, version '4.0.1'", "module": "bcrypt", "function": "_load_backend_mixin", "line": 625, "request_id": "8ee94fbb-0a74-402b-81e1-3737ee055aec"}
{"timestamp": "2025-12-28T14:58:48.537969+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "'bcrypt' backend lacks $2$ support, enabling workaround", "module": "bcrypt", "function": "_finalize_backend_mixin", "line": 406, "request_id": "8ee94fbb-0a74-402b-81e1-3737ee055aec"}
{"timestamp": "2025-12-28T14:58:48.759861+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8ee94fbb-0a74-402b-81e1-3737ee055aec"}
{"timestamp": "2025-12-28T14:58:48.760256+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'email': 'test_1766933926.39662@example.com', 'hashed_password': '$2b$12$7BU1G.Yyh4Aw3HJA6PmBEOTRRda0G9oHCn6lIOIg/qfFvqAgAct.m', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8ee94fbb-0a74-402b-81e1-3737ee055aec"}
{"timestamp": "2025-12-28T14:58:48.763550+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "8ee94fbb-0a74-402b-81e1-3737ee055aec"}
{"timestamp": "2025-12-28T14:58:48.768720+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8ee94fbb-0a74-402b-81e1-3737ee055aec"}
{"timestamp": "2025-12-28T14:58:48.770018+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8ee94fbb-0a74-402b-81e1-3737ee055aec"}
{"timestamp": "2025-12-28T14:58:48.770529+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'pk_1': 7}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8ee94fbb-0a74-402b-81e1-3737ee055aec"}
{"timestamp": "2025-12-28T14:58:48.773658+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "8ee94fbb-0a74-402b-81e1-3737ee055aec"}
{"timestamp": "2025-12-28T14:58:48.797049+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8ee94fbb-0a74-402b-81e1-3737ee055aec"}
{"timestamp": "2025-12-28T14:58:48.798655+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8ee94fbb-0a74-402b-81e1-3737ee055aec"}
{"timestamp": "2025-12-28T14:58:48.799088+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'user_id_1': 7, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8ee94fbb-0a74-402b-81e1-3737ee055aec"}
{"timestamp": "2025-12-28T14:58:48.803297+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8ee94fbb-0a74-402b-81e1-3737ee055aec"}
{"timestamp": "2025-12-28T14:58:48.803874+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00067s] {'user_id': 7, 'name': None, 'email': 'test_1766933926.39662@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8ee94fbb-0a74-402b-81e1-3737ee055aec"}
{"timestamp": "2025-12-28T14:58:48.806547+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "8ee94fbb-0a74-402b-81e1-3737ee055aec"}
{"timestamp": "2025-12-28T14:58:48.811309+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8ee94fbb-0a74-402b-81e1-3737ee055aec"}
{"timestamp": "2025-12-28T14:58:48.812421+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8ee94fbb-0a74-402b-81e1-3737ee055aec"}
{"timestamp": "2025-12-28T14:58:48.812781+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'pk_1': 7}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8ee94fbb-0a74-402b-81e1-3737ee055aec"}
{"timestamp": "2025-12-28T14:58:48.814932+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "8ee94fbb-0a74-402b-81e1-3737ee055aec"}
{"timestamp": "2025-12-28T14:58:48.816881+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8ee94fbb-0a74-402b-81e1-3737ee055aec"}
{"timestamp": "2025-12-28T14:58:48.817646+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2845s ago] {'email_1': 'test_1766933926.39662@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8ee94fbb-0a74-402b-81e1-3737ee055aec"}
{"timestamp": "2025-12-28T14:58:49.030583+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "8ee94fbb-0a74-402b-81e1-3737ee055aec"}
{"timestamp": "2025-12-28T14:58:49.032359+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.568s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "8ee94fbb-0a74-402b-81e1-3737ee055aec"}
{"timestamp": "2025-12-28T14:58:49.033341+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "8ee94fbb-0a74-402b-81e1-3737ee055aec"}
{"timestamp": "2025-12-28T14:58:49.035289+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/login", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "18260b27-143a-4cb5-8f92-1e05635e48c7"}
{"timestamp": "2025-12-28T14:58:49.036657+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "18260b27-143a-4cb5-8f92-1e05635e48c7"}
{"timestamp": "2025-12-28T14:58:49.036906+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[0:8]", "module": "multipart", "function": "callback", "line": 625, "request_id": "18260b27-143a-4cb5-8f92-1e05635e48c7"}
{"timestamp": "2025-12-28T14:58:49.037128+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[9:44]", "module": "multipart", "function": "callback", "line": 625, "request_id": "18260b27-143a-4cb5-8f92-1e05635e48c7"}
{"timestamp": "2025-12-28T14:58:49.037338+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "18260b27-143a-4cb5-8f92-1e05635e48c7"}
{"timestamp": "2025-12-28T14:58:49.037569+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "18260b27-143a-4cb5-8f92-1e05635e48c7"}
{"timestamp": "2025-12-28T14:58:49.037801+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[45:53]", "module": "multipart", "function": "callback", "line": 625, "request_id": "18260b27-143a-4cb5-8f92-1e05635e48c7"}
{"timestamp": "2025-12-28T14:58:49.037978+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[54:72]", "module": "multipart", "function": "callback", "line": 625, "request_id": "18260b27-143a-4cb5-8f92-1e05635e48c7"}
{"timestamp": "2025-12-28T14:58:49.038420+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "18260b27-143a-4cb5-8f92-1e05635e48c7"}
{"timestamp": "2025-12-28T14:58:49.038629+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "18260b27-143a-4cb5-8f92-1e05635e48c7"}
{"timestamp": "2025-12-28T14:58:49.041608+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "18260b27-143a-4cb5-8f92-1e05635e48c7"}
{"timestamp": "2025-12-28T14:58:49.042358+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18260b27-143a-4cb5-8f92-1e05635e48c7"}
{"timestamp": "2025-12-28T14:58:49.042709+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.5098s ago] {'email_1': 'test_1766933926.39662@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18260b27-143a-4cb5-8f92-1e05635e48c7"}
{"timestamp": "2025-12-28T14:58:49.248454+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "18260b27-143a-4cb5-8f92-1e05635e48c7"}
{"timestamp": "2025-12-28T14:58:49.250180+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/login \u2192 200 (0.215s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "18260b27-143a-4cb5-8f92-1e05635e48c7"}
{"timestamp": "2025-12-28T14:58:49.251046+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "18260b27-143a-4cb5-8f92-1e05635e48c7"}
{"timestamp": "2025-12-28T14:58:49.252298+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /profiles/me", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "8bbdc839-f3a1-4474-a376-dabd6947643d"}
{"timestamp": "2025-12-28T14:58:49.255184+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8bbdc839-f3a1-4474-a376-dabd6947643d"}
{"timestamp": "2025-12-28T14:58:49.256737+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bbdc839-f3a1-4474-a376-dabd6947643d"}
{"timestamp": "2025-12-28T14:58:49.257374+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00087s] {'pk_1': 7}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bbdc839-f3a1-4474-a376-dabd6947643d"}
{"timestamp": "2025-12-28T14:58:49.260509+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bbdc839-f3a1-4474-a376-dabd6947643d"}
{"timestamp": "2025-12-28T14:58:49.260887+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.4624s ago] {'user_id_1': 7, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bbdc839-f3a1-4474-a376-dabd6947643d"}
{"timestamp": "2025-12-28T14:58:49.264157+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /profiles/me \u2192 200 (0.012s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "8bbdc839-f3a1-4474-a376-dabd6947643d"}
{"timestamp": "2025-12-28T14:58:49.265546+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "8bbdc839-f3a1-4474-a376-dabd6947643d"}
{"timestamp": "2025-12-28T14:58:49.267667+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "1539a32e-28c8-4471-bd14-b8805cde16a2"}
{"timestamp": "2025-12-28T14:58:49.271563+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1539a32e-28c8-4471-bd14-b8805cde16a2"}
{"timestamp": "2025-12-28T14:58:49.273286+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1539a32e-28c8-4471-bd14-b8805cde16a2"}
{"timestamp": "2025-12-28T14:58:49.273738+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'title_1': 'The Matrix Reloaded 1766933929.265989'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1539a32e-28c8-4471-bd14-b8805cde16a2"}
{"timestamp": "2025-12-28T14:58:49.277216+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1539a32e-28c8-4471-bd14-b8805cde16a2"}
{"timestamp": "2025-12-28T14:58:49.277830+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'title': 'The Matrix Reloaded 1766933929.265989', 'description': 'Test movie: The Matrix Reloaded 1766933929.265989', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1539a32e-28c8-4471-bd14-b8805cde16a2"}
{"timestamp": "2025-12-28T14:58:49.280112+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "1539a32e-28c8-4471-bd14-b8805cde16a2"}
{"timestamp": "2025-12-28T14:58:49.285368+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1539a32e-28c8-4471-bd14-b8805cde16a2"}
{"timestamp": "2025-12-28T14:58:49.286514+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1539a32e-28c8-4471-bd14-b8805cde16a2"}
{"timestamp": "2025-12-28T14:58:49.286859+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'pk_1': 4}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1539a32e-28c8-4471-bd14-b8805cde16a2"}
{"timestamp": "2025-12-28T14:58:49.289089+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "1539a32e-28c8-4471-bd14-b8805cde16a2"}
{"timestamp": "2025-12-28T14:58:49.290784+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.023s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "1539a32e-28c8-4471-bd14-b8805cde16a2"}
{"timestamp": "2025-12-28T14:58:49.291665+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "1539a32e-28c8-4471-bd14-b8805cde16a2"}
{"timestamp": "2025-12-28T14:58:49.293456+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b5e4a310-2147-4cc5-8f21-c5e9eae0ea86"}
{"timestamp": "2025-12-28T14:58:49.295879+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b5e4a310-2147-4cc5-8f21-c5e9eae0ea86"}
{"timestamp": "2025-12-28T14:58:49.297011+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b5e4a310-2147-4cc5-8f21-c5e9eae0ea86"}
{"timestamp": "2025-12-28T14:58:49.297421+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00041s] {'name_1': 'Standard Layout 1766933929.291877'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b5e4a310-2147-4cc5-8f21-c5e9eae0ea86"}
{"timestamp": "2025-12-28T14:58:49.301165+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b5e4a310-2147-4cc5-8f21-c5e9eae0ea86"}
{"timestamp": "2025-12-28T14:58:49.301855+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00093s] {'name': 'Standard Layout 1766933929.291877', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b5e4a310-2147-4cc5-8f21-c5e9eae0ea86"}
{"timestamp": "2025-12-28T14:58:49.305008+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b5e4a310-2147-4cc5-8f21-c5e9eae0ea86"}
{"timestamp": "2025-12-28T14:58:49.309026+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b5e4a310-2147-4cc5-8f21-c5e9eae0ea86"}
{"timestamp": "2025-12-28T14:58:49.310126+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b5e4a310-2147-4cc5-8f21-c5e9eae0ea86"}
{"timestamp": "2025-12-28T14:58:49.310538+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'pk_1': 3}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b5e4a310-2147-4cc5-8f21-c5e9eae0ea86"}
{"timestamp": "2025-12-28T14:58:49.312626+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "b5e4a310-2147-4cc5-8f21-c5e9eae0ea86"}
{"timestamp": "2025-12-28T14:58:49.314252+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.021s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b5e4a310-2147-4cc5-8f21-c5e9eae0ea86"}
{"timestamp": "2025-12-28T14:58:49.315028+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b5e4a310-2147-4cc5-8f21-c5e9eae0ea86"}
{"timestamp": "2025-12-28T14:58:49.320431+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "4ac634f8-1f6f-4d3c-8afb-9103d069cda9"}
{"timestamp": "2025-12-28T14:58:49.323250+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "4ac634f8-1f6f-4d3c-8afb-9103d069cda9"}
{"timestamp": "2025-12-28T14:58:49.324478+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4ac634f8-1f6f-4d3c-8afb-9103d069cda9"}
{"timestamp": "2025-12-28T14:58:49.324864+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'name_1': 'Screen 1 1766933929.314971', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4ac634f8-1f6f-4d3c-8afb-9103d069cda9"}
{"timestamp": "2025-12-28T14:58:49.327889+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4ac634f8-1f6f-4d3c-8afb-9103d069cda9"}
{"timestamp": "2025-12-28T14:58:49.328402+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00064s] {'id_1': 3, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4ac634f8-1f6f-4d3c-8afb-9103d069cda9"}
{"timestamp": "2025-12-28T14:58:49.330591+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4ac634f8-1f6f-4d3c-8afb-9103d069cda9"}
{"timestamp": "2025-12-28T14:58:49.330974+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00042s] {'name': 'Screen 1 1766933929.314971', 'capacity': 150, 'seat_layout_id': 3}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4ac634f8-1f6f-4d3c-8afb-9103d069cda9"}
{"timestamp": "2025-12-28T14:58:49.334129+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "4ac634f8-1f6f-4d3c-8afb-9103d069cda9"}
{"timestamp": "2025-12-28T14:58:49.338912+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "4ac634f8-1f6f-4d3c-8afb-9103d069cda9"}
{"timestamp": "2025-12-28T14:58:49.339728+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4ac634f8-1f6f-4d3c-8afb-9103d069cda9"}
{"timestamp": "2025-12-28T14:58:49.340106+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00037s] {'pk_1': 3}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4ac634f8-1f6f-4d3c-8afb-9103d069cda9"}
{"timestamp": "2025-12-28T14:58:49.342251+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "4ac634f8-1f6f-4d3c-8afb-9103d069cda9"}
{"timestamp": "2025-12-28T14:58:49.343832+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.027s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "4ac634f8-1f6f-4d3c-8afb-9103d069cda9"}
{"timestamp": "2025-12-28T14:58:49.344656+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "4ac634f8-1f6f-4d3c-8afb-9103d069cda9"}
{"timestamp": "2025-12-28T14:58:49.346808+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "50ae9ee6-7190-430e-8469-919d5cd6a045"}
{"timestamp": "2025-12-28T14:58:49.349543+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 422 (0.003s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "50ae9ee6-7190-430e-8469-919d5cd6a045"}
{"timestamp": "2025-12-28T15:03:17.013654+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-28T15:03:19.241982+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-28T15:03:19.242486+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-28T15:03:19.242705+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.242902+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.243215+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.243540+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.244077+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.244512+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.244871+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.245276+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.246221+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.246632+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.247043+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.247391+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.247731+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.247971+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.248168+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.248395+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.248754+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.249063+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.249387+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.249796+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.250218+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.250648+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.251076+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.251349+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.251647+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.252199+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.253212+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.254064+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.254663+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.255169+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.255743+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.256934+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.257373+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.258041+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.258805+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.259395+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.259861+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.260222+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.260574+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.260984+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.261496+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.261773+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.262074+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.262535+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.263002+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.263433+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.264013+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.264714+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.265172+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.265680+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.266178+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.266763+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.267205+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.267876+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.268672+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.269048+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.269597+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.270058+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:03:19.270485+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-28T15:03:19.270943+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-28T15:03:27.302883+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b59e3990-c8ad-46ae-b3b3-6c59200029bb"}
{"timestamp": "2025-12-28T15:03:27.362870+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b59e3990-c8ad-46ae-b3b3-6c59200029bb"}
{"timestamp": "2025-12-28T15:03:27.363301+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b59e3990-c8ad-46ae-b3b3-6c59200029bb"}
{"timestamp": "2025-12-28T15:03:27.366003+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b59e3990-c8ad-46ae-b3b3-6c59200029bb"}
{"timestamp": "2025-12-28T15:03:27.366462+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b59e3990-c8ad-46ae-b3b3-6c59200029bb"}
{"timestamp": "2025-12-28T15:03:27.368803+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b59e3990-c8ad-46ae-b3b3-6c59200029bb"}
{"timestamp": "2025-12-28T15:03:27.369130+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b59e3990-c8ad-46ae-b3b3-6c59200029bb"}
{"timestamp": "2025-12-28T15:03:27.371419+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b59e3990-c8ad-46ae-b3b3-6c59200029bb"}
{"timestamp": "2025-12-28T15:03:27.374085+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b59e3990-c8ad-46ae-b3b3-6c59200029bb"}
{"timestamp": "2025-12-28T15:03:27.374705+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00062s] {'email_1': 'test_1766934205.245645@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b59e3990-c8ad-46ae-b3b3-6c59200029bb"}
{"timestamp": "2025-12-28T15:03:27.379867+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "detected 'bcrypt' backend, version '4.0.1'", "module": "bcrypt", "function": "_load_backend_mixin", "line": 625, "request_id": "b59e3990-c8ad-46ae-b3b3-6c59200029bb"}
{"timestamp": "2025-12-28T15:03:27.380260+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "'bcrypt' backend lacks $2$ support, enabling workaround", "module": "bcrypt", "function": "_finalize_backend_mixin", "line": 406, "request_id": "b59e3990-c8ad-46ae-b3b3-6c59200029bb"}
{"timestamp": "2025-12-28T15:03:27.603810+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b59e3990-c8ad-46ae-b3b3-6c59200029bb"}
{"timestamp": "2025-12-28T15:03:27.604370+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00078s] {'email': 'test_1766934205.245645@example.com', 'hashed_password': '$2b$12$EsEHGFPir6SlwPBM9mXyROjs9dTf21U7gTSn3QmqQx2DKtRksTaZq', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b59e3990-c8ad-46ae-b3b3-6c59200029bb"}
{"timestamp": "2025-12-28T15:03:27.607571+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b59e3990-c8ad-46ae-b3b3-6c59200029bb"}
{"timestamp": "2025-12-28T15:03:27.614529+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b59e3990-c8ad-46ae-b3b3-6c59200029bb"}
{"timestamp": "2025-12-28T15:03:27.615785+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b59e3990-c8ad-46ae-b3b3-6c59200029bb"}
{"timestamp": "2025-12-28T15:03:27.616192+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'pk_1': 8}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b59e3990-c8ad-46ae-b3b3-6c59200029bb"}
{"timestamp": "2025-12-28T15:03:27.618643+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "b59e3990-c8ad-46ae-b3b3-6c59200029bb"}
{"timestamp": "2025-12-28T15:03:27.654184+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b59e3990-c8ad-46ae-b3b3-6c59200029bb"}
{"timestamp": "2025-12-28T15:03:27.655645+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b59e3990-c8ad-46ae-b3b3-6c59200029bb"}
{"timestamp": "2025-12-28T15:03:27.656038+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'user_id_1': 8, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b59e3990-c8ad-46ae-b3b3-6c59200029bb"}
{"timestamp": "2025-12-28T15:03:27.661487+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b59e3990-c8ad-46ae-b3b3-6c59200029bb"}
{"timestamp": "2025-12-28T15:03:27.661996+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'user_id': 8, 'name': None, 'email': 'test_1766934205.245645@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b59e3990-c8ad-46ae-b3b3-6c59200029bb"}
{"timestamp": "2025-12-28T15:03:27.665750+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b59e3990-c8ad-46ae-b3b3-6c59200029bb"}
{"timestamp": "2025-12-28T15:03:27.670133+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b59e3990-c8ad-46ae-b3b3-6c59200029bb"}
{"timestamp": "2025-12-28T15:03:27.671246+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b59e3990-c8ad-46ae-b3b3-6c59200029bb"}
{"timestamp": "2025-12-28T15:03:27.671665+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'pk_1': 8}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b59e3990-c8ad-46ae-b3b3-6c59200029bb"}
{"timestamp": "2025-12-28T15:03:27.674193+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b59e3990-c8ad-46ae-b3b3-6c59200029bb"}
{"timestamp": "2025-12-28T15:03:27.676324+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b59e3990-c8ad-46ae-b3b3-6c59200029bb"}
{"timestamp": "2025-12-28T15:03:27.676873+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.3029s ago] {'email_1': 'test_1766934205.245645@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b59e3990-c8ad-46ae-b3b3-6c59200029bb"}
{"timestamp": "2025-12-28T15:03:27.889231+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "b59e3990-c8ad-46ae-b3b3-6c59200029bb"}
{"timestamp": "2025-12-28T15:03:27.890865+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.588s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b59e3990-c8ad-46ae-b3b3-6c59200029bb"}
{"timestamp": "2025-12-28T15:03:27.891846+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b59e3990-c8ad-46ae-b3b3-6c59200029bb"}
{"timestamp": "2025-12-28T15:03:27.894423+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/login", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "c814d7ba-ca33-4ecf-b870-f76d17cb0bb8"}
{"timestamp": "2025-12-28T15:03:27.895375+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "c814d7ba-ca33-4ecf-b870-f76d17cb0bb8"}
{"timestamp": "2025-12-28T15:03:27.895664+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[0:8]", "module": "multipart", "function": "callback", "line": 625, "request_id": "c814d7ba-ca33-4ecf-b870-f76d17cb0bb8"}
{"timestamp": "2025-12-28T15:03:27.895887+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[9:45]", "module": "multipart", "function": "callback", "line": 625, "request_id": "c814d7ba-ca33-4ecf-b870-f76d17cb0bb8"}
{"timestamp": "2025-12-28T15:03:27.896160+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "c814d7ba-ca33-4ecf-b870-f76d17cb0bb8"}
{"timestamp": "2025-12-28T15:03:27.896441+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "c814d7ba-ca33-4ecf-b870-f76d17cb0bb8"}
{"timestamp": "2025-12-28T15:03:27.896750+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[46:54]", "module": "multipart", "function": "callback", "line": 625, "request_id": "c814d7ba-ca33-4ecf-b870-f76d17cb0bb8"}
{"timestamp": "2025-12-28T15:03:27.896985+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[55:73]", "module": "multipart", "function": "callback", "line": 625, "request_id": "c814d7ba-ca33-4ecf-b870-f76d17cb0bb8"}
{"timestamp": "2025-12-28T15:03:27.897398+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "c814d7ba-ca33-4ecf-b870-f76d17cb0bb8"}
{"timestamp": "2025-12-28T15:03:27.897579+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "c814d7ba-ca33-4ecf-b870-f76d17cb0bb8"}
{"timestamp": "2025-12-28T15:03:27.900031+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c814d7ba-ca33-4ecf-b870-f76d17cb0bb8"}
{"timestamp": "2025-12-28T15:03:27.900723+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c814d7ba-ca33-4ecf-b870-f76d17cb0bb8"}
{"timestamp": "2025-12-28T15:03:27.901108+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.5273s ago] {'email_1': 'test_1766934205.245645@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c814d7ba-ca33-4ecf-b870-f76d17cb0bb8"}
{"timestamp": "2025-12-28T15:03:28.107615+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "c814d7ba-ca33-4ecf-b870-f76d17cb0bb8"}
{"timestamp": "2025-12-28T15:03:28.109605+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/login \u2192 200 (0.215s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "c814d7ba-ca33-4ecf-b870-f76d17cb0bb8"}
{"timestamp": "2025-12-28T15:03:28.110841+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c814d7ba-ca33-4ecf-b870-f76d17cb0bb8"}
{"timestamp": "2025-12-28T15:03:28.112536+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /profiles/me", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "bd391354-f765-48f9-8241-0b4556c261f5"}
{"timestamp": "2025-12-28T15:03:28.115638+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bd391354-f765-48f9-8241-0b4556c261f5"}
{"timestamp": "2025-12-28T15:03:28.116763+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bd391354-f765-48f9-8241-0b4556c261f5"}
{"timestamp": "2025-12-28T15:03:28.117107+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'pk_1': 8}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bd391354-f765-48f9-8241-0b4556c261f5"}
{"timestamp": "2025-12-28T15:03:28.120205+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bd391354-f765-48f9-8241-0b4556c261f5"}
{"timestamp": "2025-12-28T15:03:28.120806+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.4652s ago] {'user_id_1': 8, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bd391354-f765-48f9-8241-0b4556c261f5"}
{"timestamp": "2025-12-28T15:03:28.124356+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /profiles/me \u2192 200 (0.012s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "bd391354-f765-48f9-8241-0b4556c261f5"}
{"timestamp": "2025-12-28T15:03:28.125227+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "bd391354-f765-48f9-8241-0b4556c261f5"}
{"timestamp": "2025-12-28T15:03:28.128023+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "50695f03-1e0f-4dd3-b5be-efaef42c47b9"}
{"timestamp": "2025-12-28T15:03:28.132013+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "50695f03-1e0f-4dd3-b5be-efaef42c47b9"}
{"timestamp": "2025-12-28T15:03:28.133689+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50695f03-1e0f-4dd3-b5be-efaef42c47b9"}
{"timestamp": "2025-12-28T15:03:28.134089+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'title_1': 'The Matrix Reloaded 1766934208.125989'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50695f03-1e0f-4dd3-b5be-efaef42c47b9"}
{"timestamp": "2025-12-28T15:03:28.137625+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50695f03-1e0f-4dd3-b5be-efaef42c47b9"}
{"timestamp": "2025-12-28T15:03:28.138174+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'title': 'The Matrix Reloaded 1766934208.125989', 'description': 'Test movie: The Matrix Reloaded 1766934208.125989', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50695f03-1e0f-4dd3-b5be-efaef42c47b9"}
{"timestamp": "2025-12-28T15:03:28.140381+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "50695f03-1e0f-4dd3-b5be-efaef42c47b9"}
{"timestamp": "2025-12-28T15:03:28.145008+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "50695f03-1e0f-4dd3-b5be-efaef42c47b9"}
{"timestamp": "2025-12-28T15:03:28.146036+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50695f03-1e0f-4dd3-b5be-efaef42c47b9"}
{"timestamp": "2025-12-28T15:03:28.146375+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'pk_1': 5}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50695f03-1e0f-4dd3-b5be-efaef42c47b9"}
{"timestamp": "2025-12-28T15:03:28.148775+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "50695f03-1e0f-4dd3-b5be-efaef42c47b9"}
{"timestamp": "2025-12-28T15:03:28.150383+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.023s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "50695f03-1e0f-4dd3-b5be-efaef42c47b9"}
{"timestamp": "2025-12-28T15:03:28.151270+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "50695f03-1e0f-4dd3-b5be-efaef42c47b9"}
{"timestamp": "2025-12-28T15:03:28.153176+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "6c27390a-0387-4437-b6ce-fddccdabc8be"}
{"timestamp": "2025-12-28T15:03:28.155420+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6c27390a-0387-4437-b6ce-fddccdabc8be"}
{"timestamp": "2025-12-28T15:03:28.156655+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c27390a-0387-4437-b6ce-fddccdabc8be"}
{"timestamp": "2025-12-28T15:03:28.157207+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'name_1': 'Standard Layout 1766934208.151539'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c27390a-0387-4437-b6ce-fddccdabc8be"}
{"timestamp": "2025-12-28T15:03:28.161281+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c27390a-0387-4437-b6ce-fddccdabc8be"}
{"timestamp": "2025-12-28T15:03:28.161598+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'name': 'Standard Layout 1766934208.151539', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c27390a-0387-4437-b6ce-fddccdabc8be"}
{"timestamp": "2025-12-28T15:03:28.163947+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6c27390a-0387-4437-b6ce-fddccdabc8be"}
{"timestamp": "2025-12-28T15:03:28.168275+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6c27390a-0387-4437-b6ce-fddccdabc8be"}
{"timestamp": "2025-12-28T15:03:28.169080+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c27390a-0387-4437-b6ce-fddccdabc8be"}
{"timestamp": "2025-12-28T15:03:28.169463+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00035s] {'pk_1': 4}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c27390a-0387-4437-b6ce-fddccdabc8be"}
{"timestamp": "2025-12-28T15:03:28.171799+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "6c27390a-0387-4437-b6ce-fddccdabc8be"}
{"timestamp": "2025-12-28T15:03:28.173248+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.020s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "6c27390a-0387-4437-b6ce-fddccdabc8be"}
{"timestamp": "2025-12-28T15:03:28.174204+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6c27390a-0387-4437-b6ce-fddccdabc8be"}
{"timestamp": "2025-12-28T15:03:28.179160+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "5709dc8e-9188-42a9-a4b6-6ded16def65b"}
{"timestamp": "2025-12-28T15:03:28.182103+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "5709dc8e-9188-42a9-a4b6-6ded16def65b"}
{"timestamp": "2025-12-28T15:03:28.183357+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5709dc8e-9188-42a9-a4b6-6ded16def65b"}
{"timestamp": "2025-12-28T15:03:28.183806+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'name_1': 'Screen 1 1766934208.173995', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5709dc8e-9188-42a9-a4b6-6ded16def65b"}
{"timestamp": "2025-12-28T15:03:28.187031+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5709dc8e-9188-42a9-a4b6-6ded16def65b"}
{"timestamp": "2025-12-28T15:03:28.187529+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'id_1': 4, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5709dc8e-9188-42a9-a4b6-6ded16def65b"}
{"timestamp": "2025-12-28T15:03:28.189807+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5709dc8e-9188-42a9-a4b6-6ded16def65b"}
{"timestamp": "2025-12-28T15:03:28.190186+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'name': 'Screen 1 1766934208.173995', 'capacity': 150, 'seat_layout_id': 4}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5709dc8e-9188-42a9-a4b6-6ded16def65b"}
{"timestamp": "2025-12-28T15:03:28.192915+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "5709dc8e-9188-42a9-a4b6-6ded16def65b"}
{"timestamp": "2025-12-28T15:03:28.197614+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "5709dc8e-9188-42a9-a4b6-6ded16def65b"}
{"timestamp": "2025-12-28T15:03:28.198428+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5709dc8e-9188-42a9-a4b6-6ded16def65b"}
{"timestamp": "2025-12-28T15:03:28.198760+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00035s] {'pk_1': 4}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5709dc8e-9188-42a9-a4b6-6ded16def65b"}
{"timestamp": "2025-12-28T15:03:28.201022+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "5709dc8e-9188-42a9-a4b6-6ded16def65b"}
{"timestamp": "2025-12-28T15:03:28.202672+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.024s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "5709dc8e-9188-42a9-a4b6-6ded16def65b"}
{"timestamp": "2025-12-28T15:03:28.203387+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "5709dc8e-9188-42a9-a4b6-6ded16def65b"}
{"timestamp": "2025-12-28T15:03:28.205325+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "aa9ede5c-b721-4998-a7a8-ceed3eefc17f"}
{"timestamp": "2025-12-28T15:03:28.207884+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "aa9ede5c-b721-4998-a7a8-ceed3eefc17f"}
{"timestamp": "2025-12-28T15:03:28.209197+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aa9ede5c-b721-4998-a7a8-ceed3eefc17f"}
{"timestamp": "2025-12-28T15:03:28.209583+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'pk_1': 5}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aa9ede5c-b721-4998-a7a8-ceed3eefc17f"}
{"timestamp": "2025-12-28T15:03:28.212722+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aa9ede5c-b721-4998-a7a8-ceed3eefc17f"}
{"timestamp": "2025-12-28T15:03:28.213048+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'pk_1': 4}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aa9ede5c-b721-4998-a7a8-ceed3eefc17f"}
{"timestamp": "2025-12-28T15:03:28.216317+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aa9ede5c-b721-4998-a7a8-ceed3eefc17f"}
{"timestamp": "2025-12-28T15:03:28.216687+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'screen_id_1': 4, 'start_time_1': datetime.datetime(2025, 12, 29, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 29, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aa9ede5c-b721-4998-a7a8-ceed3eefc17f"}
{"timestamp": "2025-12-28T15:03:28.230292+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aa9ede5c-b721-4998-a7a8-ceed3eefc17f"}
{"timestamp": "2025-12-28T15:03:28.230693+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'start_time': datetime.datetime(2025, 12, 29, 19, 0), 'end_time': datetime.datetime(2025, 12, 29, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 5, 'screen_id': 4}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aa9ede5c-b721-4998-a7a8-ceed3eefc17f"}
{"timestamp": "2025-12-28T15:03:28.236835+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "aa9ede5c-b721-4998-a7a8-ceed3eefc17f"}
{"timestamp": "2025-12-28T15:03:28.241139+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "aa9ede5c-b721-4998-a7a8-ceed3eefc17f"}
{"timestamp": "2025-12-28T15:03:28.242086+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aa9ede5c-b721-4998-a7a8-ceed3eefc17f"}
{"timestamp": "2025-12-28T15:03:28.242540+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'pk_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aa9ede5c-b721-4998-a7a8-ceed3eefc17f"}
{"timestamp": "2025-12-28T15:03:28.246395+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aa9ede5c-b721-4998-a7a8-ceed3eefc17f"}
{"timestamp": "2025-12-28T15:03:28.246745+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'pk_1': 5}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aa9ede5c-b721-4998-a7a8-ceed3eefc17f"}
{"timestamp": "2025-12-28T15:03:28.248779+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aa9ede5c-b721-4998-a7a8-ceed3eefc17f"}
{"timestamp": "2025-12-28T15:03:28.249115+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'pk_1': 4}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aa9ede5c-b721-4998-a7a8-ceed3eefc17f"}
{"timestamp": "2025-12-28T15:03:28.250779+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "aa9ede5c-b721-4998-a7a8-ceed3eefc17f"}
{"timestamp": "2025-12-28T15:03:28.252276+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.047s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "aa9ede5c-b721-4998-a7a8-ceed3eefc17f"}
{"timestamp": "2025-12-28T15:03:28.253317+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "aa9ede5c-b721-4998-a7a8-ceed3eefc17f"}
{"timestamp": "2025-12-28T15:06:35.915868+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-28T15:06:37.864036+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-28T15:06:37.864520+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-28T15:06:37.864915+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.865191+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.865508+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.865731+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.865894+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.866087+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.866261+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.866408+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.866588+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.866828+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.867013+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.867190+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.867399+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.867694+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.867901+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.868096+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.868248+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.868466+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.868664+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.868871+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.869136+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.869284+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.869463+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.869654+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.869826+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.870111+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.870455+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.870788+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.871094+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.871443+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.871806+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.872111+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.872362+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.872499+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.872615+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.872730+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.872855+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.872970+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.873121+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.873437+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.873674+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.873864+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.874128+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.874462+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.874734+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.875048+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.875412+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.875753+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.875931+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.876084+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.876326+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.876600+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.876889+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.877244+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.877470+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.877697+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.877981+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.878216+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:06:37.878617+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-28T15:06:37.878824+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-28T15:06:51.202836+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "d7e5196c-ce05-41c6-8e70-7f0d386f0778"}
{"timestamp": "2025-12-28T15:06:51.262075+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d7e5196c-ce05-41c6-8e70-7f0d386f0778"}
{"timestamp": "2025-12-28T15:06:51.262534+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d7e5196c-ce05-41c6-8e70-7f0d386f0778"}
{"timestamp": "2025-12-28T15:06:51.265397+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d7e5196c-ce05-41c6-8e70-7f0d386f0778"}
{"timestamp": "2025-12-28T15:06:51.265778+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d7e5196c-ce05-41c6-8e70-7f0d386f0778"}
{"timestamp": "2025-12-28T15:06:51.268313+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d7e5196c-ce05-41c6-8e70-7f0d386f0778"}
{"timestamp": "2025-12-28T15:06:51.268642+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d7e5196c-ce05-41c6-8e70-7f0d386f0778"}
{"timestamp": "2025-12-28T15:06:51.270919+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d7e5196c-ce05-41c6-8e70-7f0d386f0778"}
{"timestamp": "2025-12-28T15:06:51.273516+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d7e5196c-ce05-41c6-8e70-7f0d386f0778"}
{"timestamp": "2025-12-28T15:06:51.273993+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'email_1': 'test_1766934409.145017@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d7e5196c-ce05-41c6-8e70-7f0d386f0778"}
{"timestamp": "2025-12-28T15:06:51.277855+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "detected 'bcrypt' backend, version '4.0.1'", "module": "bcrypt", "function": "_load_backend_mixin", "line": 625, "request_id": "d7e5196c-ce05-41c6-8e70-7f0d386f0778"}
{"timestamp": "2025-12-28T15:06:51.278274+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "'bcrypt' backend lacks $2$ support, enabling workaround", "module": "bcrypt", "function": "_finalize_backend_mixin", "line": 406, "request_id": "d7e5196c-ce05-41c6-8e70-7f0d386f0778"}
{"timestamp": "2025-12-28T15:06:51.500099+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d7e5196c-ce05-41c6-8e70-7f0d386f0778"}
{"timestamp": "2025-12-28T15:06:51.500646+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00070s] {'email': 'test_1766934409.145017@example.com', 'hashed_password': '$2b$12$rnT0MW84Gh.beEd5IN09Ze.7BoYuT0fOb/UBtVCuLbBitMxloKjmi', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d7e5196c-ce05-41c6-8e70-7f0d386f0778"}
{"timestamp": "2025-12-28T15:06:51.502814+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "d7e5196c-ce05-41c6-8e70-7f0d386f0778"}
{"timestamp": "2025-12-28T15:06:51.507849+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d7e5196c-ce05-41c6-8e70-7f0d386f0778"}
{"timestamp": "2025-12-28T15:06:51.509027+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d7e5196c-ce05-41c6-8e70-7f0d386f0778"}
{"timestamp": "2025-12-28T15:06:51.509410+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'pk_1': 9}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d7e5196c-ce05-41c6-8e70-7f0d386f0778"}
{"timestamp": "2025-12-28T15:06:51.512241+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "d7e5196c-ce05-41c6-8e70-7f0d386f0778"}
{"timestamp": "2025-12-28T15:06:51.535812+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d7e5196c-ce05-41c6-8e70-7f0d386f0778"}
{"timestamp": "2025-12-28T15:06:51.537429+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d7e5196c-ce05-41c6-8e70-7f0d386f0778"}
{"timestamp": "2025-12-28T15:06:51.537882+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00066s] {'user_id_1': 9, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d7e5196c-ce05-41c6-8e70-7f0d386f0778"}
{"timestamp": "2025-12-28T15:06:51.541880+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d7e5196c-ce05-41c6-8e70-7f0d386f0778"}
{"timestamp": "2025-12-28T15:06:51.542427+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00068s] {'user_id': 9, 'name': None, 'email': 'test_1766934409.145017@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d7e5196c-ce05-41c6-8e70-7f0d386f0778"}
{"timestamp": "2025-12-28T15:06:51.545134+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "d7e5196c-ce05-41c6-8e70-7f0d386f0778"}
{"timestamp": "2025-12-28T15:06:51.549780+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d7e5196c-ce05-41c6-8e70-7f0d386f0778"}
{"timestamp": "2025-12-28T15:06:51.550796+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d7e5196c-ce05-41c6-8e70-7f0d386f0778"}
{"timestamp": "2025-12-28T15:06:51.551128+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'pk_1': 9}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d7e5196c-ce05-41c6-8e70-7f0d386f0778"}
{"timestamp": "2025-12-28T15:06:51.553335+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d7e5196c-ce05-41c6-8e70-7f0d386f0778"}
{"timestamp": "2025-12-28T15:06:51.555338+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d7e5196c-ce05-41c6-8e70-7f0d386f0778"}
{"timestamp": "2025-12-28T15:06:51.555809+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2824s ago] {'email_1': 'test_1766934409.145017@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d7e5196c-ce05-41c6-8e70-7f0d386f0778"}
{"timestamp": "2025-12-28T15:06:51.767595+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "d7e5196c-ce05-41c6-8e70-7f0d386f0778"}
{"timestamp": "2025-12-28T15:06:51.769231+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.566s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "d7e5196c-ce05-41c6-8e70-7f0d386f0778"}
{"timestamp": "2025-12-28T15:06:51.770293+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d7e5196c-ce05-41c6-8e70-7f0d386f0778"}
{"timestamp": "2025-12-28T15:06:51.772180+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/login", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "f5f335f0-c3c1-4afd-b81a-368c279c7f22"}
{"timestamp": "2025-12-28T15:06:51.773001+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "f5f335f0-c3c1-4afd-b81a-368c279c7f22"}
{"timestamp": "2025-12-28T15:06:51.773264+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[0:8]", "module": "multipart", "function": "callback", "line": 625, "request_id": "f5f335f0-c3c1-4afd-b81a-368c279c7f22"}
{"timestamp": "2025-12-28T15:06:51.773486+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[9:45]", "module": "multipart", "function": "callback", "line": 625, "request_id": "f5f335f0-c3c1-4afd-b81a-368c279c7f22"}
{"timestamp": "2025-12-28T15:06:51.773623+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "f5f335f0-c3c1-4afd-b81a-368c279c7f22"}
{"timestamp": "2025-12-28T15:06:51.773742+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "f5f335f0-c3c1-4afd-b81a-368c279c7f22"}
{"timestamp": "2025-12-28T15:06:51.773844+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[46:54]", "module": "multipart", "function": "callback", "line": 625, "request_id": "f5f335f0-c3c1-4afd-b81a-368c279c7f22"}
{"timestamp": "2025-12-28T15:06:51.773946+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[55:73]", "module": "multipart", "function": "callback", "line": 625, "request_id": "f5f335f0-c3c1-4afd-b81a-368c279c7f22"}
{"timestamp": "2025-12-28T15:06:51.774242+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "f5f335f0-c3c1-4afd-b81a-368c279c7f22"}
{"timestamp": "2025-12-28T15:06:51.774345+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "f5f335f0-c3c1-4afd-b81a-368c279c7f22"}
{"timestamp": "2025-12-28T15:06:51.776996+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f5f335f0-c3c1-4afd-b81a-368c279c7f22"}
{"timestamp": "2025-12-28T15:06:51.777745+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f5f335f0-c3c1-4afd-b81a-368c279c7f22"}
{"timestamp": "2025-12-28T15:06:51.778302+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.5049s ago] {'email_1': 'test_1766934409.145017@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f5f335f0-c3c1-4afd-b81a-368c279c7f22"}
{"timestamp": "2025-12-28T15:06:51.982971+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "f5f335f0-c3c1-4afd-b81a-368c279c7f22"}
{"timestamp": "2025-12-28T15:06:51.984425+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/login \u2192 200 (0.212s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "f5f335f0-c3c1-4afd-b81a-368c279c7f22"}
{"timestamp": "2025-12-28T15:06:51.985243+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f5f335f0-c3c1-4afd-b81a-368c279c7f22"}
{"timestamp": "2025-12-28T15:06:51.986574+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /profiles/me", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "534d5c08-bcf9-4f81-8833-70d250f84237"}
{"timestamp": "2025-12-28T15:06:51.989199+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "534d5c08-bcf9-4f81-8833-70d250f84237"}
{"timestamp": "2025-12-28T15:06:51.990224+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "534d5c08-bcf9-4f81-8833-70d250f84237"}
{"timestamp": "2025-12-28T15:06:51.990646+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'pk_1': 9}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "534d5c08-bcf9-4f81-8833-70d250f84237"}
{"timestamp": "2025-12-28T15:06:51.993803+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "534d5c08-bcf9-4f81-8833-70d250f84237"}
{"timestamp": "2025-12-28T15:06:51.994251+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.457s ago] {'user_id_1': 9, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "534d5c08-bcf9-4f81-8833-70d250f84237"}
{"timestamp": "2025-12-28T15:06:51.997535+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /profiles/me \u2192 200 (0.011s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "534d5c08-bcf9-4f81-8833-70d250f84237"}
{"timestamp": "2025-12-28T15:06:51.998619+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "534d5c08-bcf9-4f81-8833-70d250f84237"}
{"timestamp": "2025-12-28T15:06:52.000749+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "35231dde-39c9-413c-9e4b-81fcde913ef7"}
{"timestamp": "2025-12-28T15:06:52.003304+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "35231dde-39c9-413c-9e4b-81fcde913ef7"}
{"timestamp": "2025-12-28T15:06:52.005052+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "35231dde-39c9-413c-9e4b-81fcde913ef7"}
{"timestamp": "2025-12-28T15:06:52.005366+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'title_1': 'The Matrix Reloaded 1766934411.999067'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "35231dde-39c9-413c-9e4b-81fcde913ef7"}
{"timestamp": "2025-12-28T15:06:52.008508+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "35231dde-39c9-413c-9e4b-81fcde913ef7"}
{"timestamp": "2025-12-28T15:06:52.008999+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'title': 'The Matrix Reloaded 1766934411.999067', 'description': 'Test movie: The Matrix Reloaded 1766934411.999067', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "35231dde-39c9-413c-9e4b-81fcde913ef7"}
{"timestamp": "2025-12-28T15:06:52.011310+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "35231dde-39c9-413c-9e4b-81fcde913ef7"}
{"timestamp": "2025-12-28T15:06:52.016069+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "35231dde-39c9-413c-9e4b-81fcde913ef7"}
{"timestamp": "2025-12-28T15:06:52.017035+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "35231dde-39c9-413c-9e4b-81fcde913ef7"}
{"timestamp": "2025-12-28T15:06:52.017385+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'pk_1': 6}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "35231dde-39c9-413c-9e4b-81fcde913ef7"}
{"timestamp": "2025-12-28T15:06:52.019651+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "35231dde-39c9-413c-9e4b-81fcde913ef7"}
{"timestamp": "2025-12-28T15:06:52.021283+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.021s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "35231dde-39c9-413c-9e4b-81fcde913ef7"}
{"timestamp": "2025-12-28T15:06:52.022034+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "35231dde-39c9-413c-9e4b-81fcde913ef7"}
{"timestamp": "2025-12-28T15:06:52.023808+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "e682ba6f-8065-4884-b85a-9f5d68ca87a8"}
{"timestamp": "2025-12-28T15:06:52.026277+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e682ba6f-8065-4884-b85a-9f5d68ca87a8"}
{"timestamp": "2025-12-28T15:06:52.027400+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e682ba6f-8065-4884-b85a-9f5d68ca87a8"}
{"timestamp": "2025-12-28T15:06:52.027726+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00040s] {'name_1': 'Standard Layout 1766934412.022286'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e682ba6f-8065-4884-b85a-9f5d68ca87a8"}
{"timestamp": "2025-12-28T15:06:52.030448+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e682ba6f-8065-4884-b85a-9f5d68ca87a8"}
{"timestamp": "2025-12-28T15:06:52.030716+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00043s] {'name': 'Standard Layout 1766934412.022286', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e682ba6f-8065-4884-b85a-9f5d68ca87a8"}
{"timestamp": "2025-12-28T15:06:52.032885+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "e682ba6f-8065-4884-b85a-9f5d68ca87a8"}
{"timestamp": "2025-12-28T15:06:52.037129+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e682ba6f-8065-4884-b85a-9f5d68ca87a8"}
{"timestamp": "2025-12-28T15:06:52.037889+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e682ba6f-8065-4884-b85a-9f5d68ca87a8"}
{"timestamp": "2025-12-28T15:06:52.038135+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00031s] {'pk_1': 5}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e682ba6f-8065-4884-b85a-9f5d68ca87a8"}
{"timestamp": "2025-12-28T15:06:52.040310+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "e682ba6f-8065-4884-b85a-9f5d68ca87a8"}
{"timestamp": "2025-12-28T15:06:52.042321+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.019s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "e682ba6f-8065-4884-b85a-9f5d68ca87a8"}
{"timestamp": "2025-12-28T15:06:52.043350+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "e682ba6f-8065-4884-b85a-9f5d68ca87a8"}
{"timestamp": "2025-12-28T15:06:52.048507+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b94f8620-cf63-4420-95bd-a90b02e01a83"}
{"timestamp": "2025-12-28T15:06:52.051190+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b94f8620-cf63-4420-95bd-a90b02e01a83"}
{"timestamp": "2025-12-28T15:06:52.052359+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b94f8620-cf63-4420-95bd-a90b02e01a83"}
{"timestamp": "2025-12-28T15:06:52.052703+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'name_1': 'Screen 1 1766934412.043094', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b94f8620-cf63-4420-95bd-a90b02e01a83"}
{"timestamp": "2025-12-28T15:06:52.055724+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b94f8620-cf63-4420-95bd-a90b02e01a83"}
{"timestamp": "2025-12-28T15:06:52.056137+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00064s] {'id_1': 5, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b94f8620-cf63-4420-95bd-a90b02e01a83"}
{"timestamp": "2025-12-28T15:06:52.058272+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b94f8620-cf63-4420-95bd-a90b02e01a83"}
{"timestamp": "2025-12-28T15:06:52.058596+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'name': 'Screen 1 1766934412.043094', 'capacity': 150, 'seat_layout_id': 5}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b94f8620-cf63-4420-95bd-a90b02e01a83"}
{"timestamp": "2025-12-28T15:06:52.060457+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b94f8620-cf63-4420-95bd-a90b02e01a83"}
{"timestamp": "2025-12-28T15:06:52.064692+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b94f8620-cf63-4420-95bd-a90b02e01a83"}
{"timestamp": "2025-12-28T15:06:52.065925+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b94f8620-cf63-4420-95bd-a90b02e01a83"}
{"timestamp": "2025-12-28T15:06:52.066399+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'pk_1': 5}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b94f8620-cf63-4420-95bd-a90b02e01a83"}
{"timestamp": "2025-12-28T15:06:52.069167+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "b94f8620-cf63-4420-95bd-a90b02e01a83"}
{"timestamp": "2025-12-28T15:06:52.070901+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.026s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b94f8620-cf63-4420-95bd-a90b02e01a83"}
{"timestamp": "2025-12-28T15:06:52.072007+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b94f8620-cf63-4420-95bd-a90b02e01a83"}
{"timestamp": "2025-12-28T15:06:52.073482+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "36529061-52a8-4ec4-acfa-8c22bee1692f"}
{"timestamp": "2025-12-28T15:06:52.075755+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "36529061-52a8-4ec4-acfa-8c22bee1692f"}
{"timestamp": "2025-12-28T15:06:52.076853+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "36529061-52a8-4ec4-acfa-8c22bee1692f"}
{"timestamp": "2025-12-28T15:06:52.077194+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'pk_1': 6}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "36529061-52a8-4ec4-acfa-8c22bee1692f"}
{"timestamp": "2025-12-28T15:06:52.080010+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "36529061-52a8-4ec4-acfa-8c22bee1692f"}
{"timestamp": "2025-12-28T15:06:52.080271+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00043s] {'pk_1': 5}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "36529061-52a8-4ec4-acfa-8c22bee1692f"}
{"timestamp": "2025-12-28T15:06:52.082873+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "36529061-52a8-4ec4-acfa-8c22bee1692f"}
{"timestamp": "2025-12-28T15:06:52.083439+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'screen_id_1': 5, 'start_time_1': datetime.datetime(2025, 12, 29, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 29, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "36529061-52a8-4ec4-acfa-8c22bee1692f"}
{"timestamp": "2025-12-28T15:06:52.086067+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "36529061-52a8-4ec4-acfa-8c22bee1692f"}
{"timestamp": "2025-12-28T15:06:52.086376+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00043s] {'start_time': datetime.datetime(2025, 12, 29, 19, 0), 'end_time': datetime.datetime(2025, 12, 29, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 6, 'screen_id': 5}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "36529061-52a8-4ec4-acfa-8c22bee1692f"}
{"timestamp": "2025-12-28T15:06:52.088423+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "36529061-52a8-4ec4-acfa-8c22bee1692f"}
{"timestamp": "2025-12-28T15:06:52.092605+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "36529061-52a8-4ec4-acfa-8c22bee1692f"}
{"timestamp": "2025-12-28T15:06:52.093535+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "36529061-52a8-4ec4-acfa-8c22bee1692f"}
{"timestamp": "2025-12-28T15:06:52.093930+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'pk_1': 2}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "36529061-52a8-4ec4-acfa-8c22bee1692f"}
{"timestamp": "2025-12-28T15:06:52.097224+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "36529061-52a8-4ec4-acfa-8c22bee1692f"}
{"timestamp": "2025-12-28T15:06:52.097586+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'pk_1': 6}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "36529061-52a8-4ec4-acfa-8c22bee1692f"}
{"timestamp": "2025-12-28T15:06:52.100066+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "36529061-52a8-4ec4-acfa-8c22bee1692f"}
{"timestamp": "2025-12-28T15:06:52.100417+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'pk_1': 5}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "36529061-52a8-4ec4-acfa-8c22bee1692f"}
{"timestamp": "2025-12-28T15:06:52.102202+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "36529061-52a8-4ec4-acfa-8c22bee1692f"}
{"timestamp": "2025-12-28T15:06:52.103830+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.030s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "36529061-52a8-4ec4-acfa-8c22bee1692f"}
{"timestamp": "2025-12-28T15:06:52.104681+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "36529061-52a8-4ec4-acfa-8c22bee1692f"}
{"timestamp": "2025-12-28T15:06:52.106187+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /seatavailability/grid/2", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "c2db15bf-2c0e-4ad6-b1fe-41283b5d0f09"}
{"timestamp": "2025-12-28T15:06:52.108431+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c2db15bf-2c0e-4ad6-b1fe-41283b5d0f09"}
{"timestamp": "2025-12-28T15:06:52.109607+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c2db15bf-2c0e-4ad6-b1fe-41283b5d0f09"}
{"timestamp": "2025-12-28T15:06:52.109904+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00035s] {'showtime_id_1': 2}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c2db15bf-2c0e-4ad6-b1fe-41283b5d0f09"}
{"timestamp": "2025-12-28T15:06:52.117264+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /seatavailability/grid/2 \u2192 200 (0.011s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "c2db15bf-2c0e-4ad6-b1fe-41283b5d0f09"}
{"timestamp": "2025-12-28T15:06:52.118408+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c2db15bf-2c0e-4ad6-b1fe-41283b5d0f09"}
{"timestamp": "2025-12-28T15:06:52.120987+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "9cce2596-40f4-4310-80f2-ac849a25d1f3"}
{"timestamp": "2025-12-28T15:06:52.123887+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9cce2596-40f4-4310-80f2-ac849a25d1f3"}
{"timestamp": "2025-12-28T15:06:52.125416+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9cce2596-40f4-4310-80f2-ac849a25d1f3"}
{"timestamp": "2025-12-28T15:06:52.125814+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'user_id': 1, 'showtime_id': 2, 'seat_code': 'R5-8', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 28, 15, 6, 52, 125052, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 28, 15, 16, 52, 122285, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9cce2596-40f4-4310-80f2-ac849a25d1f3"}
{"timestamp": "2025-12-28T15:06:52.132824+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "9cce2596-40f4-4310-80f2-ac849a25d1f3"}
{"timestamp": "2025-12-28T15:06:52.137200+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9cce2596-40f4-4310-80f2-ac849a25d1f3"}
{"timestamp": "2025-12-28T15:06:52.138191+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9cce2596-40f4-4310-80f2-ac849a25d1f3"}
{"timestamp": "2025-12-28T15:06:52.138514+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00035s] {'pk_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9cce2596-40f4-4310-80f2-ac849a25d1f3"}
{"timestamp": "2025-12-28T15:06:52.140886+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "9cce2596-40f4-4310-80f2-ac849a25d1f3"}
{"timestamp": "2025-12-28T15:06:52.142924+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9cce2596-40f4-4310-80f2-ac849a25d1f3"}
{"timestamp": "2025-12-28T15:06:52.143849+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9cce2596-40f4-4310-80f2-ac849a25d1f3"}
{"timestamp": "2025-12-28T15:06:52.144144+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00037s] {'showtime_id_1': 2, 'seat_code_1': 'R5-8', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9cce2596-40f4-4310-80f2-ac849a25d1f3"}
{"timestamp": "2025-12-28T15:06:52.146456+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "9cce2596-40f4-4310-80f2-ac849a25d1f3"}
{"timestamp": "2025-12-28T15:06:52.192453+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.event_bus", "message": "Event handler failed: reservation.created -> on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 33, "request_id": "9cce2596-40f4-4310-80f2-ac849a25d1f3", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\shared\\services\\event_publisher.py\", line 18, in publish_event\n    loop = asyncio.get_running_loop()\nRuntimeError: no running event loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\event_bus.py\", line 31, in _safe_invoke\n    await handler(payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\seat_availability\\handlers.py\", line 24, in on_reservation_created\n    seat_service.lock_seat(\n    ~~~~~~~~~~~~~~~~~~~~~~^\n        db,\n        ^^^\n    ...<2 lines>...\n        user_id=user_id,\n        ^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\seat_availability\\service.py\", line 27, in lock_seat\n    raise NotFoundError(\"Seat does not exist\", {\"seat_code\": seat_code})\napp.core.errors.NotFoundError: ('Seat does not exist', {'seat_code': 'R5-8'})"}
{"timestamp": "2025-12-28T15:06:52.196323+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9cce2596-40f4-4310-80f2-ac849a25d1f3"}
{"timestamp": "2025-12-28T15:06:52.197643+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9cce2596-40f4-4310-80f2-ac849a25d1f3"}
{"timestamp": "2025-12-28T15:06:52.198224+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'user_id': 1, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9cce2596-40f4-4310-80f2-ac849a25d1f3"}
{"timestamp": "2025-12-28T15:06:52.204507+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "9cce2596-40f4-4310-80f2-ac849a25d1f3"}
{"timestamp": "2025-12-28T15:06:52.208814+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9cce2596-40f4-4310-80f2-ac849a25d1f3"}
{"timestamp": "2025-12-28T15:06:52.210220+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9cce2596-40f4-4310-80f2-ac849a25d1f3"}
{"timestamp": "2025-12-28T15:06:52.210841+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'pk_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9cce2596-40f4-4310-80f2-ac849a25d1f3"}
{"timestamp": "2025-12-28T15:06:52.213915+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "9cce2596-40f4-4310-80f2-ac849a25d1f3"}
{"timestamp": "2025-12-28T15:06:52.216235+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9cce2596-40f4-4310-80f2-ac849a25d1f3"}
{"timestamp": "2025-12-28T15:06:52.217633+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9cce2596-40f4-4310-80f2-ac849a25d1f3"}
{"timestamp": "2025-12-28T15:06:52.218077+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'actor_id': 1, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 1, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 1, \"user_id\": 1, \"showtime_id\": 2, \"seat_code\": \"R5-8\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 28, 15, 6, 52, 217292, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9cce2596-40f4-4310-80f2-ac849a25d1f3"}
{"timestamp": "2025-12-28T15:06:52.222745+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "9cce2596-40f4-4310-80f2-ac849a25d1f3"}
{"timestamp": "2025-12-28T15:06:52.226896+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9cce2596-40f4-4310-80f2-ac849a25d1f3"}
{"timestamp": "2025-12-28T15:06:52.227949+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9cce2596-40f4-4310-80f2-ac849a25d1f3"}
{"timestamp": "2025-12-28T15:06:52.228216+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00038s] {'pk_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9cce2596-40f4-4310-80f2-ac849a25d1f3"}
{"timestamp": "2025-12-28T15:06:52.230921+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "9cce2596-40f4-4310-80f2-ac849a25d1f3"}
{"timestamp": "2025-12-28T15:06:52.233402+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.112s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "9cce2596-40f4-4310-80f2-ac849a25d1f3"}
{"timestamp": "2025-12-28T15:06:52.234210+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "9cce2596-40f4-4310-80f2-ac849a25d1f3"}
{"timestamp": "2025-12-28T15:09:59.206135+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-28T15:10:01.119890+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-28T15:10:01.120425+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-28T15:10:01.120778+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.121027+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.121259+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.121496+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.121771+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.122015+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.122289+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.122501+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.122682+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.122972+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.123207+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.123472+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.123731+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.124097+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.124478+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.124885+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.125334+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.125718+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.126033+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.126365+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.126695+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.127053+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.127326+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.127602+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.127770+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.127959+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.128106+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.128254+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.128385+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.128570+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.128858+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.129093+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.129396+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.129637+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.129884+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.130290+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.130650+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.130865+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.131071+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.131422+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.131743+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.132129+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.132480+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.132834+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.133108+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.133452+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.133888+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.134464+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.135048+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.135439+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.135766+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.136032+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.136214+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.136364+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.136522+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.136691+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.136839+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.136971+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:10:01.137140+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-28T15:10:01.137405+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-28T15:10:08.116204+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "c56d0b1a-af06-4964-9822-1d9d1b551720"}
{"timestamp": "2025-12-28T15:10:08.174111+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c56d0b1a-af06-4964-9822-1d9d1b551720"}
{"timestamp": "2025-12-28T15:10:08.174675+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c56d0b1a-af06-4964-9822-1d9d1b551720"}
{"timestamp": "2025-12-28T15:10:08.177253+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c56d0b1a-af06-4964-9822-1d9d1b551720"}
{"timestamp": "2025-12-28T15:10:08.177748+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c56d0b1a-af06-4964-9822-1d9d1b551720"}
{"timestamp": "2025-12-28T15:10:08.179728+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c56d0b1a-af06-4964-9822-1d9d1b551720"}
{"timestamp": "2025-12-28T15:10:08.180278+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c56d0b1a-af06-4964-9822-1d9d1b551720"}
{"timestamp": "2025-12-28T15:10:08.182620+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c56d0b1a-af06-4964-9822-1d9d1b551720"}
{"timestamp": "2025-12-28T15:10:08.185298+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c56d0b1a-af06-4964-9822-1d9d1b551720"}
{"timestamp": "2025-12-28T15:10:08.185920+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00062s] {'email_1': 'test_1766934606.052506@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c56d0b1a-af06-4964-9822-1d9d1b551720"}
{"timestamp": "2025-12-28T15:10:08.189716+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "detected 'bcrypt' backend, version '4.0.1'", "module": "bcrypt", "function": "_load_backend_mixin", "line": 625, "request_id": "c56d0b1a-af06-4964-9822-1d9d1b551720"}
{"timestamp": "2025-12-28T15:10:08.190087+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "'bcrypt' backend lacks $2$ support, enabling workaround", "module": "bcrypt", "function": "_finalize_backend_mixin", "line": 406, "request_id": "c56d0b1a-af06-4964-9822-1d9d1b551720"}
{"timestamp": "2025-12-28T15:10:08.419179+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c56d0b1a-af06-4964-9822-1d9d1b551720"}
{"timestamp": "2025-12-28T15:10:08.419663+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'email': 'test_1766934606.052506@example.com', 'hashed_password': '$2b$12$t357WaF9IuDMKmCw0x2S.eo7omLpu4EGGQHXZLPKCTwOQqokPUz9q', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c56d0b1a-af06-4964-9822-1d9d1b551720"}
{"timestamp": "2025-12-28T15:10:08.421743+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "c56d0b1a-af06-4964-9822-1d9d1b551720"}
{"timestamp": "2025-12-28T15:10:08.427305+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c56d0b1a-af06-4964-9822-1d9d1b551720"}
{"timestamp": "2025-12-28T15:10:08.428731+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c56d0b1a-af06-4964-9822-1d9d1b551720"}
{"timestamp": "2025-12-28T15:10:08.429166+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00067s] {'pk_1': 10}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c56d0b1a-af06-4964-9822-1d9d1b551720"}
{"timestamp": "2025-12-28T15:10:08.431591+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "c56d0b1a-af06-4964-9822-1d9d1b551720"}
{"timestamp": "2025-12-28T15:10:08.463320+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c56d0b1a-af06-4964-9822-1d9d1b551720"}
{"timestamp": "2025-12-28T15:10:08.464708+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c56d0b1a-af06-4964-9822-1d9d1b551720"}
{"timestamp": "2025-12-28T15:10:08.465074+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'user_id_1': 10, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c56d0b1a-af06-4964-9822-1d9d1b551720"}
{"timestamp": "2025-12-28T15:10:08.468792+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c56d0b1a-af06-4964-9822-1d9d1b551720"}
{"timestamp": "2025-12-28T15:10:08.469183+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'user_id': 10, 'name': None, 'email': 'test_1766934606.052506@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c56d0b1a-af06-4964-9822-1d9d1b551720"}
{"timestamp": "2025-12-28T15:10:08.472475+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "c56d0b1a-af06-4964-9822-1d9d1b551720"}
{"timestamp": "2025-12-28T15:10:08.477356+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c56d0b1a-af06-4964-9822-1d9d1b551720"}
{"timestamp": "2025-12-28T15:10:08.478445+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c56d0b1a-af06-4964-9822-1d9d1b551720"}
{"timestamp": "2025-12-28T15:10:08.478880+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'pk_1': 10}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c56d0b1a-af06-4964-9822-1d9d1b551720"}
{"timestamp": "2025-12-28T15:10:08.481152+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c56d0b1a-af06-4964-9822-1d9d1b551720"}
{"timestamp": "2025-12-28T15:10:08.483248+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c56d0b1a-af06-4964-9822-1d9d1b551720"}
{"timestamp": "2025-12-28T15:10:08.483624+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2985s ago] {'email_1': 'test_1766934606.052506@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c56d0b1a-af06-4964-9822-1d9d1b551720"}
{"timestamp": "2025-12-28T15:10:08.697417+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "c56d0b1a-af06-4964-9822-1d9d1b551720"}
{"timestamp": "2025-12-28T15:10:08.699249+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.583s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "c56d0b1a-af06-4964-9822-1d9d1b551720"}
{"timestamp": "2025-12-28T15:10:08.700188+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c56d0b1a-af06-4964-9822-1d9d1b551720"}
{"timestamp": "2025-12-28T15:10:08.702123+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/login", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "da392074-b2ed-4e7d-bf78-41aaa29895f4"}
{"timestamp": "2025-12-28T15:10:08.703060+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "da392074-b2ed-4e7d-bf78-41aaa29895f4"}
{"timestamp": "2025-12-28T15:10:08.703394+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[0:8]", "module": "multipart", "function": "callback", "line": 625, "request_id": "da392074-b2ed-4e7d-bf78-41aaa29895f4"}
{"timestamp": "2025-12-28T15:10:08.703642+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[9:45]", "module": "multipart", "function": "callback", "line": 625, "request_id": "da392074-b2ed-4e7d-bf78-41aaa29895f4"}
{"timestamp": "2025-12-28T15:10:08.703844+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "da392074-b2ed-4e7d-bf78-41aaa29895f4"}
{"timestamp": "2025-12-28T15:10:08.704018+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "da392074-b2ed-4e7d-bf78-41aaa29895f4"}
{"timestamp": "2025-12-28T15:10:08.704212+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[46:54]", "module": "multipart", "function": "callback", "line": 625, "request_id": "da392074-b2ed-4e7d-bf78-41aaa29895f4"}
{"timestamp": "2025-12-28T15:10:08.704443+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[55:73]", "module": "multipart", "function": "callback", "line": 625, "request_id": "da392074-b2ed-4e7d-bf78-41aaa29895f4"}
{"timestamp": "2025-12-28T15:10:08.705064+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "da392074-b2ed-4e7d-bf78-41aaa29895f4"}
{"timestamp": "2025-12-28T15:10:08.705377+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "da392074-b2ed-4e7d-bf78-41aaa29895f4"}
{"timestamp": "2025-12-28T15:10:08.708416+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "da392074-b2ed-4e7d-bf78-41aaa29895f4"}
{"timestamp": "2025-12-28T15:10:08.709288+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da392074-b2ed-4e7d-bf78-41aaa29895f4"}
{"timestamp": "2025-12-28T15:10:08.709840+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.5246s ago] {'email_1': 'test_1766934606.052506@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da392074-b2ed-4e7d-bf78-41aaa29895f4"}
{"timestamp": "2025-12-28T15:10:08.915902+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "da392074-b2ed-4e7d-bf78-41aaa29895f4"}
{"timestamp": "2025-12-28T15:10:08.917537+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/login \u2192 200 (0.215s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "da392074-b2ed-4e7d-bf78-41aaa29895f4"}
{"timestamp": "2025-12-28T15:10:08.918379+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "da392074-b2ed-4e7d-bf78-41aaa29895f4"}
{"timestamp": "2025-12-28T15:10:08.919857+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /profiles/me", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "cce11e78-4b07-4ff2-ab63-79524d5843f8"}
{"timestamp": "2025-12-28T15:10:08.922330+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cce11e78-4b07-4ff2-ab63-79524d5843f8"}
{"timestamp": "2025-12-28T15:10:08.923522+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cce11e78-4b07-4ff2-ab63-79524d5843f8"}
{"timestamp": "2025-12-28T15:10:08.924004+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'pk_1': 10}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cce11e78-4b07-4ff2-ab63-79524d5843f8"}
{"timestamp": "2025-12-28T15:10:08.927083+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cce11e78-4b07-4ff2-ab63-79524d5843f8"}
{"timestamp": "2025-12-28T15:10:08.927435+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.4629s ago] {'user_id_1': 10, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cce11e78-4b07-4ff2-ab63-79524d5843f8"}
{"timestamp": "2025-12-28T15:10:08.930370+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /profiles/me \u2192 200 (0.011s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "cce11e78-4b07-4ff2-ab63-79524d5843f8"}
{"timestamp": "2025-12-28T15:10:08.931223+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "cce11e78-4b07-4ff2-ab63-79524d5843f8"}
{"timestamp": "2025-12-28T15:10:08.933177+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "0141a9f9-ec58-476f-a651-47eb1bc5659d"}
{"timestamp": "2025-12-28T15:10:08.936038+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0141a9f9-ec58-476f-a651-47eb1bc5659d"}
{"timestamp": "2025-12-28T15:10:08.937615+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0141a9f9-ec58-476f-a651-47eb1bc5659d"}
{"timestamp": "2025-12-28T15:10:08.938031+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'title_1': 'The Matrix Reloaded 1766934608.931615'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0141a9f9-ec58-476f-a651-47eb1bc5659d"}
{"timestamp": "2025-12-28T15:10:08.941685+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0141a9f9-ec58-476f-a651-47eb1bc5659d"}
{"timestamp": "2025-12-28T15:10:08.942307+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00066s] {'title': 'The Matrix Reloaded 1766934608.931615', 'description': 'Test movie: The Matrix Reloaded 1766934608.931615', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0141a9f9-ec58-476f-a651-47eb1bc5659d"}
{"timestamp": "2025-12-28T15:10:08.944558+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "0141a9f9-ec58-476f-a651-47eb1bc5659d"}
{"timestamp": "2025-12-28T15:10:08.949201+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0141a9f9-ec58-476f-a651-47eb1bc5659d"}
{"timestamp": "2025-12-28T15:10:08.950224+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0141a9f9-ec58-476f-a651-47eb1bc5659d"}
{"timestamp": "2025-12-28T15:10:08.950637+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'pk_1': 7}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0141a9f9-ec58-476f-a651-47eb1bc5659d"}
{"timestamp": "2025-12-28T15:10:08.952896+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "0141a9f9-ec58-476f-a651-47eb1bc5659d"}
{"timestamp": "2025-12-28T15:10:08.954478+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.021s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "0141a9f9-ec58-476f-a651-47eb1bc5659d"}
{"timestamp": "2025-12-28T15:10:08.955506+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0141a9f9-ec58-476f-a651-47eb1bc5659d"}
{"timestamp": "2025-12-28T15:10:08.957261+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "d21a4418-3ee3-4459-bcdc-d1526472de64"}
{"timestamp": "2025-12-28T15:10:08.960182+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d21a4418-3ee3-4459-bcdc-d1526472de64"}
{"timestamp": "2025-12-28T15:10:08.961476+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d21a4418-3ee3-4459-bcdc-d1526472de64"}
{"timestamp": "2025-12-28T15:10:08.961915+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'name_1': 'Standard Layout 1766934608.955713'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d21a4418-3ee3-4459-bcdc-d1526472de64"}
{"timestamp": "2025-12-28T15:10:08.965339+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d21a4418-3ee3-4459-bcdc-d1526472de64"}
{"timestamp": "2025-12-28T15:10:08.965784+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00088s] {'name': 'Standard Layout 1766934608.955713', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d21a4418-3ee3-4459-bcdc-d1526472de64"}
{"timestamp": "2025-12-28T15:10:08.967557+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "d21a4418-3ee3-4459-bcdc-d1526472de64"}
{"timestamp": "2025-12-28T15:10:08.972583+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d21a4418-3ee3-4459-bcdc-d1526472de64"}
{"timestamp": "2025-12-28T15:10:08.973925+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d21a4418-3ee3-4459-bcdc-d1526472de64"}
{"timestamp": "2025-12-28T15:10:08.974289+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'pk_1': 6}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d21a4418-3ee3-4459-bcdc-d1526472de64"}
{"timestamp": "2025-12-28T15:10:08.976814+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "d21a4418-3ee3-4459-bcdc-d1526472de64"}
{"timestamp": "2025-12-28T15:10:08.978594+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.021s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "d21a4418-3ee3-4459-bcdc-d1526472de64"}
{"timestamp": "2025-12-28T15:10:08.979678+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d21a4418-3ee3-4459-bcdc-d1526472de64"}
{"timestamp": "2025-12-28T15:10:08.985384+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "99711b3d-b22a-4fae-b4b6-39455e96850b"}
{"timestamp": "2025-12-28T15:10:08.988955+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "99711b3d-b22a-4fae-b4b6-39455e96850b"}
{"timestamp": "2025-12-28T15:10:08.990201+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "99711b3d-b22a-4fae-b4b6-39455e96850b"}
{"timestamp": "2025-12-28T15:10:08.990548+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'name_1': 'Screen 1 1766934608.979565', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "99711b3d-b22a-4fae-b4b6-39455e96850b"}
{"timestamp": "2025-12-28T15:10:08.993680+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "99711b3d-b22a-4fae-b4b6-39455e96850b"}
{"timestamp": "2025-12-28T15:10:08.994174+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'id_1': 6, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "99711b3d-b22a-4fae-b4b6-39455e96850b"}
{"timestamp": "2025-12-28T15:10:08.996605+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "99711b3d-b22a-4fae-b4b6-39455e96850b"}
{"timestamp": "2025-12-28T15:10:08.996964+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'name': 'Screen 1 1766934608.979565', 'capacity': 150, 'seat_layout_id': 6}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "99711b3d-b22a-4fae-b4b6-39455e96850b"}
{"timestamp": "2025-12-28T15:10:08.998822+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "99711b3d-b22a-4fae-b4b6-39455e96850b"}
{"timestamp": "2025-12-28T15:10:09.004016+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "99711b3d-b22a-4fae-b4b6-39455e96850b"}
{"timestamp": "2025-12-28T15:10:09.005374+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "99711b3d-b22a-4fae-b4b6-39455e96850b"}
{"timestamp": "2025-12-28T15:10:09.005903+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00064s] {'pk_1': 6}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "99711b3d-b22a-4fae-b4b6-39455e96850b"}
{"timestamp": "2025-12-28T15:10:09.008715+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "99711b3d-b22a-4fae-b4b6-39455e96850b"}
{"timestamp": "2025-12-28T15:10:09.010390+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.025s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "99711b3d-b22a-4fae-b4b6-39455e96850b"}
{"timestamp": "2025-12-28T15:10:09.011200+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "99711b3d-b22a-4fae-b4b6-39455e96850b"}
{"timestamp": "2025-12-28T15:10:09.012940+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "269f504c-3a91-4d27-852c-bc8ef202dd21"}
{"timestamp": "2025-12-28T15:10:09.015309+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "269f504c-3a91-4d27-852c-bc8ef202dd21"}
{"timestamp": "2025-12-28T15:10:09.016392+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "269f504c-3a91-4d27-852c-bc8ef202dd21"}
{"timestamp": "2025-12-28T15:10:09.016750+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'pk_1': 7}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "269f504c-3a91-4d27-852c-bc8ef202dd21"}
{"timestamp": "2025-12-28T15:10:09.019751+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "269f504c-3a91-4d27-852c-bc8ef202dd21"}
{"timestamp": "2025-12-28T15:10:09.020047+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'pk_1': 6}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "269f504c-3a91-4d27-852c-bc8ef202dd21"}
{"timestamp": "2025-12-28T15:10:09.023124+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "269f504c-3a91-4d27-852c-bc8ef202dd21"}
{"timestamp": "2025-12-28T15:10:09.023598+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'screen_id_1': 6, 'start_time_1': datetime.datetime(2025, 12, 29, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 29, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "269f504c-3a91-4d27-852c-bc8ef202dd21"}
{"timestamp": "2025-12-28T15:10:09.026228+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "269f504c-3a91-4d27-852c-bc8ef202dd21"}
{"timestamp": "2025-12-28T15:10:09.026638+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'start_time': datetime.datetime(2025, 12, 29, 19, 0), 'end_time': datetime.datetime(2025, 12, 29, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 7, 'screen_id': 6}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "269f504c-3a91-4d27-852c-bc8ef202dd21"}
{"timestamp": "2025-12-28T15:10:09.028775+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "269f504c-3a91-4d27-852c-bc8ef202dd21"}
{"timestamp": "2025-12-28T15:10:09.032768+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "269f504c-3a91-4d27-852c-bc8ef202dd21"}
{"timestamp": "2025-12-28T15:10:09.033812+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "269f504c-3a91-4d27-852c-bc8ef202dd21"}
{"timestamp": "2025-12-28T15:10:09.034198+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'pk_1': 3}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "269f504c-3a91-4d27-852c-bc8ef202dd21"}
{"timestamp": "2025-12-28T15:10:09.039156+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "269f504c-3a91-4d27-852c-bc8ef202dd21"}
{"timestamp": "2025-12-28T15:10:09.039626+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'pk_1': 7}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "269f504c-3a91-4d27-852c-bc8ef202dd21"}
{"timestamp": "2025-12-28T15:10:09.041961+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "269f504c-3a91-4d27-852c-bc8ef202dd21"}
{"timestamp": "2025-12-28T15:10:09.042458+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'pk_1': 6}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "269f504c-3a91-4d27-852c-bc8ef202dd21"}
{"timestamp": "2025-12-28T15:10:09.043971+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "269f504c-3a91-4d27-852c-bc8ef202dd21"}
{"timestamp": "2025-12-28T15:10:09.045867+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.033s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "269f504c-3a91-4d27-852c-bc8ef202dd21"}
{"timestamp": "2025-12-28T15:10:09.046607+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "269f504c-3a91-4d27-852c-bc8ef202dd21"}
{"timestamp": "2025-12-28T15:10:09.048148+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /seatavailability/grid/3", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "324ceb0e-3161-40e3-a3c3-5534920783e0"}
{"timestamp": "2025-12-28T15:10:09.050671+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "324ceb0e-3161-40e3-a3c3-5534920783e0"}
{"timestamp": "2025-12-28T15:10:09.052496+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "324ceb0e-3161-40e3-a3c3-5534920783e0"}
{"timestamp": "2025-12-28T15:10:09.052868+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'showtime_id_1': 3}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "324ceb0e-3161-40e3-a3c3-5534920783e0"}
{"timestamp": "2025-12-28T15:10:09.056265+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /seatavailability/grid/3 \u2192 200 (0.008s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "324ceb0e-3161-40e3-a3c3-5534920783e0"}
{"timestamp": "2025-12-28T15:10:09.057151+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "324ceb0e-3161-40e3-a3c3-5534920783e0"}
{"timestamp": "2025-12-28T15:10:09.058970+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "32e87030-7f20-4f2d-929e-ad125b1125b9"}
{"timestamp": "2025-12-28T15:10:09.061283+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "32e87030-7f20-4f2d-929e-ad125b1125b9"}
{"timestamp": "2025-12-28T15:10:09.062453+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32e87030-7f20-4f2d-929e-ad125b1125b9"}
{"timestamp": "2025-12-28T15:10:09.062900+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'user_id': 1, 'showtime_id': 3, 'seat_code': 'R5-8', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 28, 15, 10, 9, 62175, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 28, 15, 20, 9, 60010, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32e87030-7f20-4f2d-929e-ad125b1125b9"}
{"timestamp": "2025-12-28T15:10:09.065683+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "32e87030-7f20-4f2d-929e-ad125b1125b9"}
{"timestamp": "2025-12-28T15:10:09.070714+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "32e87030-7f20-4f2d-929e-ad125b1125b9"}
{"timestamp": "2025-12-28T15:10:09.071906+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32e87030-7f20-4f2d-929e-ad125b1125b9"}
{"timestamp": "2025-12-28T15:10:09.072295+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'pk_1': 2}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32e87030-7f20-4f2d-929e-ad125b1125b9"}
{"timestamp": "2025-12-28T15:10:09.074389+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "32e87030-7f20-4f2d-929e-ad125b1125b9"}
{"timestamp": "2025-12-28T15:10:09.076493+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "32e87030-7f20-4f2d-929e-ad125b1125b9"}
{"timestamp": "2025-12-28T15:10:09.077648+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32e87030-7f20-4f2d-929e-ad125b1125b9"}
{"timestamp": "2025-12-28T15:10:09.078064+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'showtime_id_1': 3, 'seat_code_1': 'R5-8', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32e87030-7f20-4f2d-929e-ad125b1125b9"}
{"timestamp": "2025-12-28T15:10:09.080624+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "32e87030-7f20-4f2d-929e-ad125b1125b9"}
{"timestamp": "2025-12-28T15:10:09.083639+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.event_bus", "message": "Event handler failed: reservation.created -> on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 33, "request_id": "32e87030-7f20-4f2d-929e-ad125b1125b9", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\shared\\services\\event_publisher.py\", line 18, in publish_event\n    loop = asyncio.get_running_loop()\nRuntimeError: no running event loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\event_bus.py\", line 31, in _safe_invoke\n    await handler(payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\seat_availability\\handlers.py\", line 24, in on_reservation_created\n    seat_service.lock_seat(\n    ~~~~~~~~~~~~~~~~~~~~~~^\n        db,\n        ^^^\n    ...<2 lines>...\n        user_id=user_id,\n        ^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\seat_availability\\service.py\", line 27, in lock_seat\n    raise NotFoundError(\"Seat does not exist\", {\"seat_code\": seat_code})\napp.core.errors.NotFoundError: ('Seat does not exist', {'seat_code': 'R5-8'})"}
{"timestamp": "2025-12-28T15:10:09.087025+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "32e87030-7f20-4f2d-929e-ad125b1125b9"}
{"timestamp": "2025-12-28T15:10:09.088247+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32e87030-7f20-4f2d-929e-ad125b1125b9"}
{"timestamp": "2025-12-28T15:10:09.088577+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'user_id': 1, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 2}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32e87030-7f20-4f2d-929e-ad125b1125b9"}
{"timestamp": "2025-12-28T15:10:09.091118+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "32e87030-7f20-4f2d-929e-ad125b1125b9"}
{"timestamp": "2025-12-28T15:10:09.095124+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "32e87030-7f20-4f2d-929e-ad125b1125b9"}
{"timestamp": "2025-12-28T15:10:09.096630+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32e87030-7f20-4f2d-929e-ad125b1125b9"}
{"timestamp": "2025-12-28T15:10:09.097077+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'pk_1': 2}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32e87030-7f20-4f2d-929e-ad125b1125b9"}
{"timestamp": "2025-12-28T15:10:09.100211+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "32e87030-7f20-4f2d-929e-ad125b1125b9"}
{"timestamp": "2025-12-28T15:10:09.102930+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "32e87030-7f20-4f2d-929e-ad125b1125b9"}
{"timestamp": "2025-12-28T15:10:09.104263+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32e87030-7f20-4f2d-929e-ad125b1125b9"}
{"timestamp": "2025-12-28T15:10:09.104665+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'actor_id': 1, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 2, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 2, \"user_id\": 1, \"showtime_id\": 3, \"seat_code\": \"R5-8\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 28, 15, 10, 9, 103924, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32e87030-7f20-4f2d-929e-ad125b1125b9"}
{"timestamp": "2025-12-28T15:10:09.107227+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "32e87030-7f20-4f2d-929e-ad125b1125b9"}
{"timestamp": "2025-12-28T15:10:09.111129+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "32e87030-7f20-4f2d-929e-ad125b1125b9"}
{"timestamp": "2025-12-28T15:10:09.112292+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32e87030-7f20-4f2d-929e-ad125b1125b9"}
{"timestamp": "2025-12-28T15:10:09.112600+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'pk_1': 2}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32e87030-7f20-4f2d-929e-ad125b1125b9"}
{"timestamp": "2025-12-28T15:10:09.114795+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "32e87030-7f20-4f2d-929e-ad125b1125b9"}
{"timestamp": "2025-12-28T15:10:09.116653+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.058s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "32e87030-7f20-4f2d-929e-ad125b1125b9"}
{"timestamp": "2025-12-28T15:10:09.117464+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "32e87030-7f20-4f2d-929e-ad125b1125b9"}
{"timestamp": "2025-12-28T15:10:09.119371+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "c858f963-080b-4e8b-88a4-bf58c05d4f65"}
{"timestamp": "2025-12-28T15:10:09.121612+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c858f963-080b-4e8b-88a4-bf58c05d4f65"}
{"timestamp": "2025-12-28T15:10:09.122159+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c858f963-080b-4e8b-88a4-bf58c05d4f65"}
{"timestamp": "2025-12-28T15:10:09.122530+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.1992s ago] {'pk_1': 10}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c858f963-080b-4e8b-88a4-bf58c05d4f65"}
{"timestamp": "2025-12-28T15:10:09.125743+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s AND orders.is_completed = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c858f963-080b-4e8b-88a4-bf58c05d4f65"}
{"timestamp": "2025-12-28T15:10:09.126174+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'user_id_1': 10}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c858f963-080b-4e8b-88a4-bf58c05d4f65"}
{"timestamp": "2025-12-28T15:10:09.128129+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.009s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "c858f963-080b-4e8b-88a4-bf58c05d4f65"}
{"timestamp": "2025-12-28T15:10:09.129166+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c858f963-080b-4e8b-88a4-bf58c05d4f65"}
{"timestamp": "2025-12-28T15:16:58.358462+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-28T15:17:00.683053+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-28T15:17:00.683429+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-28T15:17:00.683578+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.683740+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.684099+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.684286+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.684419+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.684674+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.684867+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.685030+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.685204+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.685382+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.685510+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.685632+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.685767+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.685884+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.686032+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.686170+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.686293+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.686406+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.686522+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.686703+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.686818+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.686935+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.687047+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.687173+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.687313+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.687643+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.687862+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.688118+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.688365+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.688626+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.688872+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.689057+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.689210+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.689391+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.689634+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.689861+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.690030+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.690234+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.690423+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.690593+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.690762+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.691046+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.691350+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.691518+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.691721+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.691893+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.692046+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.692184+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.692326+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.692466+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.692607+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.692747+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.692917+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.693103+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.693396+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.693580+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.693748+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.693993+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:00.694233+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-28T15:17:00.694559+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-28T15:17:18.787675+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-28T15:17:20.679124+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-28T15:17:20.679884+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-28T15:17:20.680410+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.680683+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.680896+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.681141+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.681517+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.681808+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.682114+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.682501+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.682802+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.683093+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.683343+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.683752+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.684114+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.684370+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.684783+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.685095+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.685353+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.685591+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.685806+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.686083+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.686275+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.686452+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.686629+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.686807+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.687007+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.687213+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.687527+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.687994+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.688919+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.689383+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.689754+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.690079+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.690368+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.696733+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.697884+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.701227+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.703231+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.704113+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.705066+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.705682+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.706260+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.706682+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.707196+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.707708+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.708078+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.708627+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.710800+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.713317+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.714252+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.715659+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.716415+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.717061+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.717563+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.717961+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.718419+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.718896+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.719533+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.720018+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:20.720378+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-28T15:17:20.720806+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-28T15:17:50.880456+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-28T15:17:52.803360+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-28T15:17:52.803711+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-28T15:17:52.803890+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.804106+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.804306+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.804505+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.804701+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.804870+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.805075+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.805259+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.805497+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.805640+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.805817+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.806037+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.806273+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.806434+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.806728+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.806976+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.807135+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.807336+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.807511+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.807768+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.807955+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.808189+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.808486+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.808824+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.809008+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.809135+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.809293+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.809526+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.809767+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.809908+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.810080+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.810232+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.810373+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.810562+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.810689+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.810867+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.811008+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.811159+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.811286+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.811400+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.811512+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.811624+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.811737+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.811849+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.811961+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.812073+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.812251+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.812525+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.812659+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.812784+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.812919+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.813084+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.813393+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.813613+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.813801+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.814047+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.814413+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.814785+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:17:52.815054+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-28T15:17:52.815240+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-28T15:18:06.289064+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.375758+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.376396+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.379439+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.379898+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.382002+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.382433+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.384797+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.388294+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.388850+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00067s] {'email_1': 'test_1766935084.226488@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.392753+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "detected 'bcrypt' backend, version '4.0.1'", "module": "bcrypt", "function": "_load_backend_mixin", "line": 625, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.393745+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "'bcrypt' backend lacks $2$ support, enabling workaround", "module": "bcrypt", "function": "_finalize_backend_mixin", "line": 406, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.618686+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.619205+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00065s] {'email': 'test_1766935084.226488@example.com', 'hashed_password': '$2b$12$UaFKD8EzI./tA8ip6wikHuIg6O7qPsuCDsoUx0.sIppPgt5XHLfAq', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.621848+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.626940+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.628195+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.628574+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'pk_1': 11}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.630885+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 11, 'email': 'test_1766935084.226488@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.631188+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for auth.user_registered", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.632058+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.632987+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.633289+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 34, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.633894+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.651299+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.653092+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.653565+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00065s] {'user_id_1': 11, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.657958+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.658506+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00067s] {'user_id': 11, 'name': None, 'email': 'test_1766935084.226488@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.661541+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.665662+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.666890+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.667293+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'pk_1': 11}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.669389+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 11, 'user_id': 11, 'email': 'test_1766935084.226488@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.669575+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Using existing event loop for user.profile_created", "module": "event_publisher", "function": "publish_event", "line": 24, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.669823+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.671039+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.672258+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.672672+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2846s ago] {'email_1': 'test_1766935084.226488@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.906834+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 11, 'email': 'test_1766935084.226488@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.907190+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for auth.user_logged_in", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.907503+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.908583+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.908900+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 30, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.912146+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.623s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.913365+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "63322866-7cfb-4d57-873d-1406bfe38247"}
{"timestamp": "2025-12-28T15:18:06.915948+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/login", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "83b63fcd-2143-4086-bb6c-c21d2ba938ee"}
{"timestamp": "2025-12-28T15:18:06.916784+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "83b63fcd-2143-4086-bb6c-c21d2ba938ee"}
{"timestamp": "2025-12-28T15:18:06.916998+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[0:8]", "module": "multipart", "function": "callback", "line": 625, "request_id": "83b63fcd-2143-4086-bb6c-c21d2ba938ee"}
{"timestamp": "2025-12-28T15:18:06.917148+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[9:45]", "module": "multipart", "function": "callback", "line": 625, "request_id": "83b63fcd-2143-4086-bb6c-c21d2ba938ee"}
{"timestamp": "2025-12-28T15:18:06.917311+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "83b63fcd-2143-4086-bb6c-c21d2ba938ee"}
{"timestamp": "2025-12-28T15:18:06.917469+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "83b63fcd-2143-4086-bb6c-c21d2ba938ee"}
{"timestamp": "2025-12-28T15:18:06.917620+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[46:54]", "module": "multipart", "function": "callback", "line": 625, "request_id": "83b63fcd-2143-4086-bb6c-c21d2ba938ee"}
{"timestamp": "2025-12-28T15:18:06.917782+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[55:73]", "module": "multipart", "function": "callback", "line": 625, "request_id": "83b63fcd-2143-4086-bb6c-c21d2ba938ee"}
{"timestamp": "2025-12-28T15:18:06.918233+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "83b63fcd-2143-4086-bb6c-c21d2ba938ee"}
{"timestamp": "2025-12-28T15:18:06.918416+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "83b63fcd-2143-4086-bb6c-c21d2ba938ee"}
{"timestamp": "2025-12-28T15:18:06.921425+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "83b63fcd-2143-4086-bb6c-c21d2ba938ee"}
{"timestamp": "2025-12-28T15:18:06.922300+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "83b63fcd-2143-4086-bb6c-c21d2ba938ee"}
{"timestamp": "2025-12-28T15:18:06.922884+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.5346s ago] {'email_1': 'test_1766935084.226488@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "83b63fcd-2143-4086-bb6c-c21d2ba938ee"}
{"timestamp": "2025-12-28T15:18:07.131450+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 11, 'email': 'test_1766935084.226488@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "83b63fcd-2143-4086-bb6c-c21d2ba938ee"}
{"timestamp": "2025-12-28T15:18:07.131754+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for auth.user_logged_in", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "83b63fcd-2143-4086-bb6c-c21d2ba938ee"}
{"timestamp": "2025-12-28T15:18:07.132038+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "83b63fcd-2143-4086-bb6c-c21d2ba938ee"}
{"timestamp": "2025-12-28T15:18:07.132840+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "83b63fcd-2143-4086-bb6c-c21d2ba938ee"}
{"timestamp": "2025-12-28T15:18:07.133088+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 30, "request_id": "83b63fcd-2143-4086-bb6c-c21d2ba938ee"}
{"timestamp": "2025-12-28T15:18:07.134167+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/login \u2192 200 (0.218s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "83b63fcd-2143-4086-bb6c-c21d2ba938ee"}
{"timestamp": "2025-12-28T15:18:07.135080+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "83b63fcd-2143-4086-bb6c-c21d2ba938ee"}
{"timestamp": "2025-12-28T15:18:07.136512+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /profiles/me", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "9e90bd7b-bde9-40a3-a90f-aa7fd54591f5"}
{"timestamp": "2025-12-28T15:18:07.140044+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9e90bd7b-bde9-40a3-a90f-aa7fd54591f5"}
{"timestamp": "2025-12-28T15:18:07.141213+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9e90bd7b-bde9-40a3-a90f-aa7fd54591f5"}
{"timestamp": "2025-12-28T15:18:07.141701+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00065s] {'pk_1': 11}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9e90bd7b-bde9-40a3-a90f-aa7fd54591f5"}
{"timestamp": "2025-12-28T15:18:07.144672+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9e90bd7b-bde9-40a3-a90f-aa7fd54591f5"}
{"timestamp": "2025-12-28T15:18:07.145136+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.4922s ago] {'user_id_1': 11, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9e90bd7b-bde9-40a3-a90f-aa7fd54591f5"}
{"timestamp": "2025-12-28T15:18:07.151220+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /profiles/me \u2192 200 (0.015s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "9e90bd7b-bde9-40a3-a90f-aa7fd54591f5"}
{"timestamp": "2025-12-28T15:18:07.152372+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "9e90bd7b-bde9-40a3-a90f-aa7fd54591f5"}
{"timestamp": "2025-12-28T15:18:07.154725+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "68fc7528-5f56-45ec-a5fd-3d4661e96680"}
{"timestamp": "2025-12-28T15:18:07.158286+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "68fc7528-5f56-45ec-a5fd-3d4661e96680"}
{"timestamp": "2025-12-28T15:18:07.160027+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68fc7528-5f56-45ec-a5fd-3d4661e96680"}
{"timestamp": "2025-12-28T15:18:07.160460+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'title_1': 'The Matrix Reloaded 1766935087.152807'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68fc7528-5f56-45ec-a5fd-3d4661e96680"}
{"timestamp": "2025-12-28T15:18:07.164191+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68fc7528-5f56-45ec-a5fd-3d4661e96680"}
{"timestamp": "2025-12-28T15:18:07.164534+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'title': 'The Matrix Reloaded 1766935087.152807', 'description': 'Test movie: The Matrix Reloaded 1766935087.152807', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68fc7528-5f56-45ec-a5fd-3d4661e96680"}
{"timestamp": "2025-12-28T15:18:07.166368+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "68fc7528-5f56-45ec-a5fd-3d4661e96680"}
{"timestamp": "2025-12-28T15:18:07.171700+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "68fc7528-5f56-45ec-a5fd-3d4661e96680"}
{"timestamp": "2025-12-28T15:18:07.172764+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68fc7528-5f56-45ec-a5fd-3d4661e96680"}
{"timestamp": "2025-12-28T15:18:07.173119+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'pk_1': 8}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68fc7528-5f56-45ec-a5fd-3d4661e96680"}
{"timestamp": "2025-12-28T15:18:07.175627+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 8}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "68fc7528-5f56-45ec-a5fd-3d4661e96680"}
{"timestamp": "2025-12-28T15:18:07.175951+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for movie.created", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "68fc7528-5f56-45ec-a5fd-3d4661e96680"}
{"timestamp": "2025-12-28T15:18:07.176276+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "68fc7528-5f56-45ec-a5fd-3d4661e96680"}
{"timestamp": "2025-12-28T15:18:07.177061+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "68fc7528-5f56-45ec-a5fd-3d4661e96680"}
{"timestamp": "2025-12-28T15:18:07.177300+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "68fc7528-5f56-45ec-a5fd-3d4661e96680"}
{"timestamp": "2025-12-28T15:18:07.178420+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.024s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "68fc7528-5f56-45ec-a5fd-3d4661e96680"}
{"timestamp": "2025-12-28T15:18:07.179303+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "68fc7528-5f56-45ec-a5fd-3d4661e96680"}
{"timestamp": "2025-12-28T15:18:07.181022+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "4e57e319-ea3c-4780-8a39-0bc0fe36548a"}
{"timestamp": "2025-12-28T15:18:07.184246+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "4e57e319-ea3c-4780-8a39-0bc0fe36548a"}
{"timestamp": "2025-12-28T15:18:07.185722+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4e57e319-ea3c-4780-8a39-0bc0fe36548a"}
{"timestamp": "2025-12-28T15:18:07.186238+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00075s] {'name_1': 'Standard Layout 1766935087.179572'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4e57e319-ea3c-4780-8a39-0bc0fe36548a"}
{"timestamp": "2025-12-28T15:18:07.189838+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4e57e319-ea3c-4780-8a39-0bc0fe36548a"}
{"timestamp": "2025-12-28T15:18:07.190452+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00065s] {'name': 'Standard Layout 1766935087.179572', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4e57e319-ea3c-4780-8a39-0bc0fe36548a"}
{"timestamp": "2025-12-28T15:18:07.192313+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "4e57e319-ea3c-4780-8a39-0bc0fe36548a"}
{"timestamp": "2025-12-28T15:18:07.196328+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "4e57e319-ea3c-4780-8a39-0bc0fe36548a"}
{"timestamp": "2025-12-28T15:18:07.197352+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4e57e319-ea3c-4780-8a39-0bc0fe36548a"}
{"timestamp": "2025-12-28T15:18:07.197751+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'pk_1': 7}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4e57e319-ea3c-4780-8a39-0bc0fe36548a"}
{"timestamp": "2025-12-28T15:18:07.200331+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 7}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "4e57e319-ea3c-4780-8a39-0bc0fe36548a"}
{"timestamp": "2025-12-28T15:18:07.200631+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for screen.layout_created", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "4e57e319-ea3c-4780-8a39-0bc0fe36548a"}
{"timestamp": "2025-12-28T15:18:07.201091+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "4e57e319-ea3c-4780-8a39-0bc0fe36548a"}
{"timestamp": "2025-12-28T15:18:07.202130+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "4e57e319-ea3c-4780-8a39-0bc0fe36548a"}
{"timestamp": "2025-12-28T15:18:07.202464+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "4e57e319-ea3c-4780-8a39-0bc0fe36548a"}
{"timestamp": "2025-12-28T15:18:07.204032+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.023s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "4e57e319-ea3c-4780-8a39-0bc0fe36548a"}
{"timestamp": "2025-12-28T15:18:07.204989+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "4e57e319-ea3c-4780-8a39-0bc0fe36548a"}
{"timestamp": "2025-12-28T15:18:07.210881+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "bbeae07e-42ab-4b40-bec3-4c2d6b8e3347"}
{"timestamp": "2025-12-28T15:18:07.214658+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bbeae07e-42ab-4b40-bec3-4c2d6b8e3347"}
{"timestamp": "2025-12-28T15:18:07.215939+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bbeae07e-42ab-4b40-bec3-4c2d6b8e3347"}
{"timestamp": "2025-12-28T15:18:07.216371+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'name_1': 'Screen 1 1766935087.204776', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bbeae07e-42ab-4b40-bec3-4c2d6b8e3347"}
{"timestamp": "2025-12-28T15:18:07.220747+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bbeae07e-42ab-4b40-bec3-4c2d6b8e3347"}
{"timestamp": "2025-12-28T15:18:07.221201+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'id_1': 7, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bbeae07e-42ab-4b40-bec3-4c2d6b8e3347"}
{"timestamp": "2025-12-28T15:18:07.223844+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bbeae07e-42ab-4b40-bec3-4c2d6b8e3347"}
{"timestamp": "2025-12-28T15:18:07.224273+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'name': 'Screen 1 1766935087.204776', 'capacity': 150, 'seat_layout_id': 7}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bbeae07e-42ab-4b40-bec3-4c2d6b8e3347"}
{"timestamp": "2025-12-28T15:18:07.226430+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "bbeae07e-42ab-4b40-bec3-4c2d6b8e3347"}
{"timestamp": "2025-12-28T15:18:07.230636+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bbeae07e-42ab-4b40-bec3-4c2d6b8e3347"}
{"timestamp": "2025-12-28T15:18:07.231582+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bbeae07e-42ab-4b40-bec3-4c2d6b8e3347"}
{"timestamp": "2025-12-28T15:18:07.231991+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'pk_1': 7}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bbeae07e-42ab-4b40-bec3-4c2d6b8e3347"}
{"timestamp": "2025-12-28T15:18:07.235138+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 7}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "bbeae07e-42ab-4b40-bec3-4c2d6b8e3347"}
{"timestamp": "2025-12-28T15:18:07.235395+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for screen.created", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "bbeae07e-42ab-4b40-bec3-4c2d6b8e3347"}
{"timestamp": "2025-12-28T15:18:07.235658+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "bbeae07e-42ab-4b40-bec3-4c2d6b8e3347"}
{"timestamp": "2025-12-28T15:18:07.236444+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "bbeae07e-42ab-4b40-bec3-4c2d6b8e3347"}
{"timestamp": "2025-12-28T15:18:07.236638+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "bbeae07e-42ab-4b40-bec3-4c2d6b8e3347"}
{"timestamp": "2025-12-28T15:18:07.237684+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.027s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "bbeae07e-42ab-4b40-bec3-4c2d6b8e3347"}
{"timestamp": "2025-12-28T15:18:07.238788+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "bbeae07e-42ab-4b40-bec3-4c2d6b8e3347"}
{"timestamp": "2025-12-28T15:18:07.240378+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "7639f640-6bae-458b-861f-1bdaadaafcd6"}
{"timestamp": "2025-12-28T15:18:07.242910+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7639f640-6bae-458b-861f-1bdaadaafcd6"}
{"timestamp": "2025-12-28T15:18:07.243971+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7639f640-6bae-458b-861f-1bdaadaafcd6"}
{"timestamp": "2025-12-28T15:18:07.244391+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'pk_1': 8}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7639f640-6bae-458b-861f-1bdaadaafcd6"}
{"timestamp": "2025-12-28T15:18:07.247243+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7639f640-6bae-458b-861f-1bdaadaafcd6"}
{"timestamp": "2025-12-28T15:18:07.247814+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'pk_1': 7}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7639f640-6bae-458b-861f-1bdaadaafcd6"}
{"timestamp": "2025-12-28T15:18:07.251730+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7639f640-6bae-458b-861f-1bdaadaafcd6"}
{"timestamp": "2025-12-28T15:18:07.252476+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00066s] {'screen_id_1': 7, 'start_time_1': datetime.datetime(2025, 12, 29, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 29, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7639f640-6bae-458b-861f-1bdaadaafcd6"}
{"timestamp": "2025-12-28T15:18:07.255779+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7639f640-6bae-458b-861f-1bdaadaafcd6"}
{"timestamp": "2025-12-28T15:18:07.256161+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'start_time': datetime.datetime(2025, 12, 29, 19, 0), 'end_time': datetime.datetime(2025, 12, 29, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 8, 'screen_id': 7}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7639f640-6bae-458b-861f-1bdaadaafcd6"}
{"timestamp": "2025-12-28T15:18:07.258189+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "7639f640-6bae-458b-861f-1bdaadaafcd6"}
{"timestamp": "2025-12-28T15:18:07.262353+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7639f640-6bae-458b-861f-1bdaadaafcd6"}
{"timestamp": "2025-12-28T15:18:07.263428+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7639f640-6bae-458b-861f-1bdaadaafcd6"}
{"timestamp": "2025-12-28T15:18:07.263824+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'pk_1': 4}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7639f640-6bae-458b-861f-1bdaadaafcd6"}
{"timestamp": "2025-12-28T15:18:07.268225+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7639f640-6bae-458b-861f-1bdaadaafcd6"}
{"timestamp": "2025-12-28T15:18:07.268732+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'pk_1': 8}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7639f640-6bae-458b-861f-1bdaadaafcd6"}
{"timestamp": "2025-12-28T15:18:07.271112+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7639f640-6bae-458b-861f-1bdaadaafcd6"}
{"timestamp": "2025-12-28T15:18:07.271525+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'pk_1': 7}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7639f640-6bae-458b-861f-1bdaadaafcd6"}
{"timestamp": "2025-12-28T15:18:07.273109+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 4}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "7639f640-6bae-458b-861f-1bdaadaafcd6"}
{"timestamp": "2025-12-28T15:18:07.273418+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for showtime.created", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "7639f640-6bae-458b-861f-1bdaadaafcd6"}
{"timestamp": "2025-12-28T15:18:07.273761+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "7639f640-6bae-458b-861f-1bdaadaafcd6"}
{"timestamp": "2025-12-28T15:18:07.274570+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "7639f640-6bae-458b-861f-1bdaadaafcd6"}
{"timestamp": "2025-12-28T15:18:07.274797+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "7639f640-6bae-458b-861f-1bdaadaafcd6"}
{"timestamp": "2025-12-28T15:18:07.275902+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.036s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "7639f640-6bae-458b-861f-1bdaadaafcd6"}
{"timestamp": "2025-12-28T15:18:07.276735+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "7639f640-6bae-458b-861f-1bdaadaafcd6"}
{"timestamp": "2025-12-28T15:18:07.278604+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /seatavailability/grid/4", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "f86d13b1-064f-4280-b830-650d7544d5da"}
{"timestamp": "2025-12-28T15:18:07.281893+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f86d13b1-064f-4280-b830-650d7544d5da"}
{"timestamp": "2025-12-28T15:18:07.283693+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f86d13b1-064f-4280-b830-650d7544d5da"}
{"timestamp": "2025-12-28T15:18:07.284231+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00075s] {'showtime_id_1': 4}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f86d13b1-064f-4280-b830-650d7544d5da"}
{"timestamp": "2025-12-28T15:18:07.288351+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /seatavailability/grid/4 \u2192 200 (0.010s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "f86d13b1-064f-4280-b830-650d7544d5da"}
{"timestamp": "2025-12-28T15:18:07.289598+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f86d13b1-064f-4280-b830-650d7544d5da"}
{"timestamp": "2025-12-28T15:18:07.291808+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.294827+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.296310+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.296801+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'user_id': 1, 'showtime_id': 4, 'seat_code': 'R5-8', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 28, 15, 18, 7, 295975, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 28, 15, 28, 7, 293056, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.300425+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.305404+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.306540+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.306949+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'pk_1': 3}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.309807+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 3, 'user_id': 1, 'showtime_id': 4, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.310411+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for reservation.created", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.311029+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.312624+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.313041+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.313414+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.313772+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.314203+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.316738+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.318234+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.318788+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00083s] {'showtime_id_1': 4, 'seat_code_1': 'R5-8', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.321738+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.326853+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.event_bus", "message": "\u274c Event handler failed: reservation.created -> on_reservation_created: ('Seat does not exist', {'seat_code': 'R5-8'})", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\shared\\services\\event_publisher.py\", line 23, in publish_event\n    loop = asyncio.get_running_loop()\nRuntimeError: no running event loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\event_bus.py\", line 40, in _safe_invoke\n    await handler(payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\seat_availability\\handlers.py\", line 24, in on_reservation_created\n    seat_service.lock_seat(\n    ~~~~~~~~~~~~~~~~~~~~~~^\n        db,\n        ^^^\n    ...<2 lines>...\n        user_id=user_id,\n        ^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\seat_availability\\service.py\", line 27, in lock_seat\n    raise NotFoundError(\"Seat does not exist\", {\"seat_code\": seat_code})\napp.core.errors.NotFoundError: ('Seat does not exist', {'seat_code': 'R5-8'})"}
{"timestamp": "2025-12-28T15:18:07.329579+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.329790+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 3, 'user_id': 1, 'showtime_id': 4, 'seat_code': 'R5-8'}", "module": "handlers", "function": "on_reservation_created", "line": 21, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.330159+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 3", "module": "handlers", "function": "on_reservation_created", "line": 33, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.332003+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.333272+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.333743+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'user_id': 1, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 3}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.337152+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.341802+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.343155+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.344016+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'pk_1': 3}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.346468+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 3, 'reservation_id': 3, 'user_id': 1, 'showtime_id': 4, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.346707+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Using existing event loop for order.created", "module": "event_publisher", "function": "publish_event", "line": 24, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.347008+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 3", "module": "handlers", "function": "on_reservation_created", "line": 41, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.347529+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.348867+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.349300+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.351131+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.352524+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.352915+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'actor_id': 1, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 3, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 3, \"user_id\": 1, \"showtime_id\": 4, \"seat_code\": \"R5-8\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 28, 15, 18, 7, 352161, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.355345+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.360240+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.361669+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.362155+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'pk_1': 3}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.364697+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.366061+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.367428+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.076s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.368636+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "87c5d3b4-14df-41b5-a568-c46003975705"}
{"timestamp": "2025-12-28T15:18:07.370459+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "e009ff23-938b-4e67-b66b-43449fe230e2"}
{"timestamp": "2025-12-28T15:18:07.372857+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e009ff23-938b-4e67-b66b-43449fe230e2"}
{"timestamp": "2025-12-28T15:18:07.373385+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e009ff23-938b-4e67-b66b-43449fe230e2"}
{"timestamp": "2025-12-28T15:18:07.373743+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2328s ago] {'pk_1': 11}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e009ff23-938b-4e67-b66b-43449fe230e2"}
{"timestamp": "2025-12-28T15:18:07.377127+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s AND orders.is_completed = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e009ff23-938b-4e67-b66b-43449fe230e2"}
{"timestamp": "2025-12-28T15:18:07.377542+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'user_id_1': 11}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e009ff23-938b-4e67-b66b-43449fe230e2"}
{"timestamp": "2025-12-28T15:18:07.379545+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.009s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "e009ff23-938b-4e67-b66b-43449fe230e2"}
{"timestamp": "2025-12-28T15:18:07.380615+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "e009ff23-938b-4e67-b66b-43449fe230e2"}
{"timestamp": "2025-12-28T15:25:30.095420+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-28T15:25:32.162519+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-28T15:25:32.162947+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-28T15:25:32.163186+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.163384+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.163567+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.163757+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.163943+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.164078+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.164223+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.164408+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.164582+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.164848+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.165134+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.165355+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.165646+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.166103+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.166369+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.166531+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.166708+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.166902+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.167161+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.167395+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.167553+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.167787+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.168001+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.168268+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.168467+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.168834+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.169220+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.169554+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.169757+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.169990+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.170175+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.170321+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.170632+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.170982+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.171180+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.171441+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.171660+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.171839+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.172062+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.172525+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.173008+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.173509+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.173840+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.174120+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.174510+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.174700+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.174874+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.175078+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.175311+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.175445+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.175568+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.175701+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.175829+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.175951+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.176071+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.176202+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.176322+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.176475+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:25:32.176695+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-28T15:25:32.177036+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-28T15:27:47.509120+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-28T15:27:49.345170+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-28T15:27:49.345513+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-28T15:27:49.345720+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.345887+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.346058+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.346240+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.346459+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.346725+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.346957+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.347269+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.347531+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.347654+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.347766+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.347877+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.347987+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.348097+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.348208+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.348319+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.348428+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.348537+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.348648+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.348763+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.348874+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.348986+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.349094+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.349215+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.349359+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.349629+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.349874+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.350174+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.350340+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.350534+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.350768+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.351072+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.351451+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.351807+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.352131+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.352429+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.352721+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.352971+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.353223+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.353430+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.353620+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.353760+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.353892+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.354053+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.354190+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.354405+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.354768+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.355079+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.355378+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.355724+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.356026+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.356485+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.356793+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.357004+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.357189+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.357376+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.357676+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.357907+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:27:49.358131+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-28T15:27:49.358377+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-28T15:28:09.030107+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.078026+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.078305+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.080453+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.080765+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.082391+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.082699+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.084954+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.087734+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.088108+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'email_1': 'test_1766935686.971712@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.091053+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "detected 'bcrypt' backend, version '4.0.1'", "module": "bcrypt", "function": "_load_backend_mixin", "line": 625, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.091314+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "'bcrypt' backend lacks $2$ support, enabling workaround", "module": "bcrypt", "function": "_finalize_backend_mixin", "line": 406, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.314528+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.314868+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00077s] {'email': 'test_1766935686.971712@example.com', 'hashed_password': '$2b$12$wMfgULNWFOGMr6ra4wtxT.7Bhty7jE2h1Y4RxiyZPyv4RhC./lS.m', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.316771+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.323826+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.325022+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.325400+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'pk_1': 12}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.327476+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 12, 'email': 'test_1766935686.971712@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.327653+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for auth.user_registered", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.327848+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.328550+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.328706+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 34, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.328906+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.361032+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.362606+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.362963+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'user_id_1': 12, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.366931+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.367389+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00066s] {'user_id': 12, 'name': None, 'email': 'test_1766935686.971712@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.369770+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.373990+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.375254+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.375770+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00073s] {'pk_1': 12}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.377730+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 12, 'user_id': 12, 'email': 'test_1766935686.971712@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.377998+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Using existing event loop for user.profile_created", "module": "event_publisher", "function": "publish_event", "line": 24, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.378338+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.379274+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.380480+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.381106+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2934s ago] {'email_1': 'test_1766935686.971712@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.593898+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 12, 'email': 'test_1766935686.971712@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.594123+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for auth.user_logged_in", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.594349+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.595087+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.595308+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 30, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.596419+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.566s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.597339+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b8c3830f-e8f3-4fed-96ba-7b9c21078539"}
{"timestamp": "2025-12-28T15:28:09.599250+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/login", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "ee02e722-d401-4e0f-848e-02373595f0c2"}
{"timestamp": "2025-12-28T15:28:09.600067+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "ee02e722-d401-4e0f-848e-02373595f0c2"}
{"timestamp": "2025-12-28T15:28:09.600340+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[0:8]", "module": "multipart", "function": "callback", "line": 625, "request_id": "ee02e722-d401-4e0f-848e-02373595f0c2"}
{"timestamp": "2025-12-28T15:28:09.600551+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[9:45]", "module": "multipart", "function": "callback", "line": 625, "request_id": "ee02e722-d401-4e0f-848e-02373595f0c2"}
{"timestamp": "2025-12-28T15:28:09.600737+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "ee02e722-d401-4e0f-848e-02373595f0c2"}
{"timestamp": "2025-12-28T15:28:09.600982+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "ee02e722-d401-4e0f-848e-02373595f0c2"}
{"timestamp": "2025-12-28T15:28:09.601209+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[46:54]", "module": "multipart", "function": "callback", "line": 625, "request_id": "ee02e722-d401-4e0f-848e-02373595f0c2"}
{"timestamp": "2025-12-28T15:28:09.601400+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[55:73]", "module": "multipart", "function": "callback", "line": 625, "request_id": "ee02e722-d401-4e0f-848e-02373595f0c2"}
{"timestamp": "2025-12-28T15:28:09.601989+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "ee02e722-d401-4e0f-848e-02373595f0c2"}
{"timestamp": "2025-12-28T15:28:09.602298+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "ee02e722-d401-4e0f-848e-02373595f0c2"}
{"timestamp": "2025-12-28T15:28:09.604787+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ee02e722-d401-4e0f-848e-02373595f0c2"}
{"timestamp": "2025-12-28T15:28:09.605400+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ee02e722-d401-4e0f-848e-02373595f0c2"}
{"timestamp": "2025-12-28T15:28:09.605733+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.5182s ago] {'email_1': 'test_1766935686.971712@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ee02e722-d401-4e0f-848e-02373595f0c2"}
{"timestamp": "2025-12-28T15:28:09.811965+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 12, 'email': 'test_1766935686.971712@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "ee02e722-d401-4e0f-848e-02373595f0c2"}
{"timestamp": "2025-12-28T15:28:09.812205+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for auth.user_logged_in", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "ee02e722-d401-4e0f-848e-02373595f0c2"}
{"timestamp": "2025-12-28T15:28:09.812406+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "ee02e722-d401-4e0f-848e-02373595f0c2"}
{"timestamp": "2025-12-28T15:28:09.813171+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "ee02e722-d401-4e0f-848e-02373595f0c2"}
{"timestamp": "2025-12-28T15:28:09.813381+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 30, "request_id": "ee02e722-d401-4e0f-848e-02373595f0c2"}
{"timestamp": "2025-12-28T15:28:09.814421+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/login \u2192 200 (0.215s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "ee02e722-d401-4e0f-848e-02373595f0c2"}
{"timestamp": "2025-12-28T15:28:09.815294+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ee02e722-d401-4e0f-848e-02373595f0c2"}
{"timestamp": "2025-12-28T15:28:09.816749+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /profiles/me", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "2667db17-173e-4276-9696-77c785678350"}
{"timestamp": "2025-12-28T15:28:09.819603+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2667db17-173e-4276-9696-77c785678350"}
{"timestamp": "2025-12-28T15:28:09.820707+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2667db17-173e-4276-9696-77c785678350"}
{"timestamp": "2025-12-28T15:28:09.821065+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'pk_1': 12}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2667db17-173e-4276-9696-77c785678350"}
{"timestamp": "2025-12-28T15:28:09.824320+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2667db17-173e-4276-9696-77c785678350"}
{"timestamp": "2025-12-28T15:28:09.824588+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.4623s ago] {'user_id_1': 12, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2667db17-173e-4276-9696-77c785678350"}
{"timestamp": "2025-12-28T15:28:09.827218+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /profiles/me \u2192 200 (0.011s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "2667db17-173e-4276-9696-77c785678350"}
{"timestamp": "2025-12-28T15:28:09.828123+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2667db17-173e-4276-9696-77c785678350"}
{"timestamp": "2025-12-28T15:28:09.830513+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "f14b8b48-1568-4821-a4ea-32105c4a26dd"}
{"timestamp": "2025-12-28T15:28:09.833480+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f14b8b48-1568-4821-a4ea-32105c4a26dd"}
{"timestamp": "2025-12-28T15:28:09.835107+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f14b8b48-1568-4821-a4ea-32105c4a26dd"}
{"timestamp": "2025-12-28T15:28:09.835490+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'title_1': 'The Matrix Reloaded 1766935689.828806'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f14b8b48-1568-4821-a4ea-32105c4a26dd"}
{"timestamp": "2025-12-28T15:28:09.839068+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f14b8b48-1568-4821-a4ea-32105c4a26dd"}
{"timestamp": "2025-12-28T15:28:09.839428+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'title': 'The Matrix Reloaded 1766935689.828806', 'description': 'Test movie: The Matrix Reloaded 1766935689.828806', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f14b8b48-1568-4821-a4ea-32105c4a26dd"}
{"timestamp": "2025-12-28T15:28:09.841307+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "f14b8b48-1568-4821-a4ea-32105c4a26dd"}
{"timestamp": "2025-12-28T15:28:09.846199+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f14b8b48-1568-4821-a4ea-32105c4a26dd"}
{"timestamp": "2025-12-28T15:28:09.847154+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f14b8b48-1568-4821-a4ea-32105c4a26dd"}
{"timestamp": "2025-12-28T15:28:09.847422+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00043s] {'pk_1': 9}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f14b8b48-1568-4821-a4ea-32105c4a26dd"}
{"timestamp": "2025-12-28T15:28:09.849773+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 9}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "f14b8b48-1568-4821-a4ea-32105c4a26dd"}
{"timestamp": "2025-12-28T15:28:09.850192+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for movie.created", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "f14b8b48-1568-4821-a4ea-32105c4a26dd"}
{"timestamp": "2025-12-28T15:28:09.850530+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "f14b8b48-1568-4821-a4ea-32105c4a26dd"}
{"timestamp": "2025-12-28T15:28:09.851570+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "f14b8b48-1568-4821-a4ea-32105c4a26dd"}
{"timestamp": "2025-12-28T15:28:09.851855+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "f14b8b48-1568-4821-a4ea-32105c4a26dd"}
{"timestamp": "2025-12-28T15:28:09.853333+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.023s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "f14b8b48-1568-4821-a4ea-32105c4a26dd"}
{"timestamp": "2025-12-28T15:28:09.854272+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f14b8b48-1568-4821-a4ea-32105c4a26dd"}
{"timestamp": "2025-12-28T15:28:09.855999+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "fd407196-5de4-44e8-9024-2ca470f45c4e"}
{"timestamp": "2025-12-28T15:28:09.858524+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "fd407196-5de4-44e8-9024-2ca470f45c4e"}
{"timestamp": "2025-12-28T15:28:09.859800+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "fd407196-5de4-44e8-9024-2ca470f45c4e"}
{"timestamp": "2025-12-28T15:28:09.860148+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'name_1': 'Standard Layout 1766935689.854461'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "fd407196-5de4-44e8-9024-2ca470f45c4e"}
{"timestamp": "2025-12-28T15:28:09.863129+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "fd407196-5de4-44e8-9024-2ca470f45c4e"}
{"timestamp": "2025-12-28T15:28:09.863442+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'name': 'Standard Layout 1766935689.854461', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "fd407196-5de4-44e8-9024-2ca470f45c4e"}
{"timestamp": "2025-12-28T15:28:09.865559+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "fd407196-5de4-44e8-9024-2ca470f45c4e"}
{"timestamp": "2025-12-28T15:28:09.870225+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "fd407196-5de4-44e8-9024-2ca470f45c4e"}
{"timestamp": "2025-12-28T15:28:09.871411+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "fd407196-5de4-44e8-9024-2ca470f45c4e"}
{"timestamp": "2025-12-28T15:28:09.871801+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'pk_1': 8}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "fd407196-5de4-44e8-9024-2ca470f45c4e"}
{"timestamp": "2025-12-28T15:28:09.874269+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 8}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "fd407196-5de4-44e8-9024-2ca470f45c4e"}
{"timestamp": "2025-12-28T15:28:09.874480+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for screen.layout_created", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "fd407196-5de4-44e8-9024-2ca470f45c4e"}
{"timestamp": "2025-12-28T15:28:09.874663+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "fd407196-5de4-44e8-9024-2ca470f45c4e"}
{"timestamp": "2025-12-28T15:28:09.875444+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "fd407196-5de4-44e8-9024-2ca470f45c4e"}
{"timestamp": "2025-12-28T15:28:09.875716+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "fd407196-5de4-44e8-9024-2ca470f45c4e"}
{"timestamp": "2025-12-28T15:28:09.877100+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.021s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "fd407196-5de4-44e8-9024-2ca470f45c4e"}
{"timestamp": "2025-12-28T15:28:09.878313+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "fd407196-5de4-44e8-9024-2ca470f45c4e"}
{"timestamp": "2025-12-28T15:28:09.886579+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "1c6e16b0-0059-4d46-b627-1375db4e7eb7"}
{"timestamp": "2025-12-28T15:28:09.889470+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1c6e16b0-0059-4d46-b627-1375db4e7eb7"}
{"timestamp": "2025-12-28T15:28:09.890812+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1c6e16b0-0059-4d46-b627-1375db4e7eb7"}
{"timestamp": "2025-12-28T15:28:09.891283+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00062s] {'name_1': 'Screen 1 1766935689.878068', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1c6e16b0-0059-4d46-b627-1375db4e7eb7"}
{"timestamp": "2025-12-28T15:28:09.895082+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1c6e16b0-0059-4d46-b627-1375db4e7eb7"}
{"timestamp": "2025-12-28T15:28:09.895715+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00080s] {'id_1': 8, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1c6e16b0-0059-4d46-b627-1375db4e7eb7"}
{"timestamp": "2025-12-28T15:28:09.898409+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1c6e16b0-0059-4d46-b627-1375db4e7eb7"}
{"timestamp": "2025-12-28T15:28:09.898840+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'name': 'Screen 1 1766935689.878068', 'capacity': 150, 'seat_layout_id': 8}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1c6e16b0-0059-4d46-b627-1375db4e7eb7"}
{"timestamp": "2025-12-28T15:28:09.901066+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "1c6e16b0-0059-4d46-b627-1375db4e7eb7"}
{"timestamp": "2025-12-28T15:28:09.905423+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1c6e16b0-0059-4d46-b627-1375db4e7eb7"}
{"timestamp": "2025-12-28T15:28:09.906383+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1c6e16b0-0059-4d46-b627-1375db4e7eb7"}
{"timestamp": "2025-12-28T15:28:09.906691+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'pk_1': 8}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1c6e16b0-0059-4d46-b627-1375db4e7eb7"}
{"timestamp": "2025-12-28T15:28:09.909074+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 8}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "1c6e16b0-0059-4d46-b627-1375db4e7eb7"}
{"timestamp": "2025-12-28T15:28:09.909272+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for screen.created", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "1c6e16b0-0059-4d46-b627-1375db4e7eb7"}
{"timestamp": "2025-12-28T15:28:09.909441+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "1c6e16b0-0059-4d46-b627-1375db4e7eb7"}
{"timestamp": "2025-12-28T15:28:09.910159+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "1c6e16b0-0059-4d46-b627-1375db4e7eb7"}
{"timestamp": "2025-12-28T15:28:09.910371+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "1c6e16b0-0059-4d46-b627-1375db4e7eb7"}
{"timestamp": "2025-12-28T15:28:09.911562+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.025s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "1c6e16b0-0059-4d46-b627-1375db4e7eb7"}
{"timestamp": "2025-12-28T15:28:09.912539+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "1c6e16b0-0059-4d46-b627-1375db4e7eb7"}
{"timestamp": "2025-12-28T15:28:09.914335+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "d91a94c2-b69c-40f0-8fca-be4693ea88fa"}
{"timestamp": "2025-12-28T15:28:09.916763+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d91a94c2-b69c-40f0-8fca-be4693ea88fa"}
{"timestamp": "2025-12-28T15:28:09.917905+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d91a94c2-b69c-40f0-8fca-be4693ea88fa"}
{"timestamp": "2025-12-28T15:28:09.918241+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'pk_1': 9}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d91a94c2-b69c-40f0-8fca-be4693ea88fa"}
{"timestamp": "2025-12-28T15:28:09.921738+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d91a94c2-b69c-40f0-8fca-be4693ea88fa"}
{"timestamp": "2025-12-28T15:28:09.922045+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'pk_1': 8}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d91a94c2-b69c-40f0-8fca-be4693ea88fa"}
{"timestamp": "2025-12-28T15:28:09.924746+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d91a94c2-b69c-40f0-8fca-be4693ea88fa"}
{"timestamp": "2025-12-28T15:28:09.925176+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'screen_id_1': 8, 'start_time_1': datetime.datetime(2025, 12, 29, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 29, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d91a94c2-b69c-40f0-8fca-be4693ea88fa"}
{"timestamp": "2025-12-28T15:28:09.928726+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d91a94c2-b69c-40f0-8fca-be4693ea88fa"}
{"timestamp": "2025-12-28T15:28:09.929271+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00071s] {'start_time': datetime.datetime(2025, 12, 29, 19, 0), 'end_time': datetime.datetime(2025, 12, 29, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 9, 'screen_id': 8}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d91a94c2-b69c-40f0-8fca-be4693ea88fa"}
{"timestamp": "2025-12-28T15:28:09.931490+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "d91a94c2-b69c-40f0-8fca-be4693ea88fa"}
{"timestamp": "2025-12-28T15:28:09.935696+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d91a94c2-b69c-40f0-8fca-be4693ea88fa"}
{"timestamp": "2025-12-28T15:28:09.936724+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d91a94c2-b69c-40f0-8fca-be4693ea88fa"}
{"timestamp": "2025-12-28T15:28:09.937008+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'pk_1': 5}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d91a94c2-b69c-40f0-8fca-be4693ea88fa"}
{"timestamp": "2025-12-28T15:28:09.940692+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d91a94c2-b69c-40f0-8fca-be4693ea88fa"}
{"timestamp": "2025-12-28T15:28:09.941254+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'pk_1': 9}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d91a94c2-b69c-40f0-8fca-be4693ea88fa"}
{"timestamp": "2025-12-28T15:28:09.943860+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d91a94c2-b69c-40f0-8fca-be4693ea88fa"}
{"timestamp": "2025-12-28T15:28:09.944311+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00065s] {'pk_1': 8}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d91a94c2-b69c-40f0-8fca-be4693ea88fa"}
{"timestamp": "2025-12-28T15:28:09.946008+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 5}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "d91a94c2-b69c-40f0-8fca-be4693ea88fa"}
{"timestamp": "2025-12-28T15:28:09.946324+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for showtime.created", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "d91a94c2-b69c-40f0-8fca-be4693ea88fa"}
{"timestamp": "2025-12-28T15:28:09.946580+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "d91a94c2-b69c-40f0-8fca-be4693ea88fa"}
{"timestamp": "2025-12-28T15:28:09.947593+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "d91a94c2-b69c-40f0-8fca-be4693ea88fa"}
{"timestamp": "2025-12-28T15:28:09.947833+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "d91a94c2-b69c-40f0-8fca-be4693ea88fa"}
{"timestamp": "2025-12-28T15:28:09.949005+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.035s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "d91a94c2-b69c-40f0-8fca-be4693ea88fa"}
{"timestamp": "2025-12-28T15:28:09.949846+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d91a94c2-b69c-40f0-8fca-be4693ea88fa"}
{"timestamp": "2025-12-28T15:28:09.951479+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /seatavailability/grid/5", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "68911b0b-176b-4fb6-8800-c2fbae522ac7"}
{"timestamp": "2025-12-28T15:28:09.953640+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "68911b0b-176b-4fb6-8800-c2fbae522ac7"}
{"timestamp": "2025-12-28T15:28:09.954889+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68911b0b-176b-4fb6-8800-c2fbae522ac7"}
{"timestamp": "2025-12-28T15:28:09.955258+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00043s] {'showtime_id_1': 5}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68911b0b-176b-4fb6-8800-c2fbae522ac7"}
{"timestamp": "2025-12-28T15:28:09.958194+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /seatavailability/grid/5 \u2192 200 (0.007s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "68911b0b-176b-4fb6-8800-c2fbae522ac7"}
{"timestamp": "2025-12-28T15:28:09.959390+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "68911b0b-176b-4fb6-8800-c2fbae522ac7"}
{"timestamp": "2025-12-28T15:28:09.961657+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:09.964676+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:09.966206+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:09.966557+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'user_id': 1, 'showtime_id': 5, 'seat_code': 'R5-8', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 28, 15, 28, 9, 965838, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 28, 15, 38, 9, 962700, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:09.969670+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:09.973768+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:09.974974+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:09.975386+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'pk_1': 4}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:09.977770+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 4, 'user_id': 1, 'showtime_id': 5, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:09.977956+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for reservation.created", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:09.978126+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:09.978854+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:09.979033+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:09.979204+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:09.979387+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:09.979619+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:09.981149+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:09.982171+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:09.982450+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'showtime_id_1': 5, 'seat_code_1': 'R5-8', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:09.985352+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:09.985838+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'seat_code': 'R5-8', 'showtime_id': 5, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:09.991776+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:09.992165+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'status': 'LOCKED', 'locked_by_user_id': 1, 'lock_expires_at': datetime.datetime(2025, 12, 28, 15, 38, 9, 990231, tzinfo=datetime.timezone.utc), 'seat_locks_id': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:09.997506+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:10.001859+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:10.002699+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:10.003129+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'pk_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:10.005367+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 5, 'seat_code': 'R5-8', 'user_id': 1, 'expires_at': '2025-12-28T15:38:09.990231+00:00'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:10.005553+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Using existing event loop for seat.locked", "module": "event_publisher", "function": "publish_event", "line": 24, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:10.005788+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:10.007274+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:10.007494+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:10.007663+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 4, 'user_id': 1, 'showtime_id': 5, 'seat_code': 'R5-8'}", "module": "handlers", "function": "on_reservation_created", "line": 21, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:10.007947+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 4", "module": "handlers", "function": "on_reservation_created", "line": 33, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:10.009489+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:10.011140+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:10.011517+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'user_id': 1, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 4}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:10.014212+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:10.018161+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:10.019177+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:10.019445+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00040s] {'pk_1': 4}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:10.021385+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 4, 'reservation_id': 4, 'user_id': 1, 'showtime_id': 5, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:10.021561+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Using existing event loop for order.created", "module": "event_publisher", "function": "publish_event", "line": 24, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:10.021697+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 4", "module": "handlers", "function": "on_reservation_created", "line": 41, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:10.021937+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:10.023543+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:10.023986+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:10.025738+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:10.027037+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:10.027416+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'actor_id': 1, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 4, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 4, \"user_id\": 1, \"showtime_id\": 5, \"seat_code\": \"R5-8\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 28, 15, 28, 10, 26709, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:10.029981+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:10.034515+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:10.035868+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:10.036317+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00069s] {'pk_1': 4}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:10.039713+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:10.041261+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:10.042522+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.081s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:10.043411+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "494e1a9a-b81c-40ea-9ab4-63608a7affc2"}
{"timestamp": "2025-12-28T15:28:10.045575+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "70caacbf-2f00-459e-b708-45e8a92693df"}
{"timestamp": "2025-12-28T15:28:10.048581+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "70caacbf-2f00-459e-b708-45e8a92693df"}
{"timestamp": "2025-12-28T15:28:10.049355+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "70caacbf-2f00-459e-b708-45e8a92693df"}
{"timestamp": "2025-12-28T15:28:10.049769+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2292s ago] {'pk_1': 12}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "70caacbf-2f00-459e-b708-45e8a92693df"}
{"timestamp": "2025-12-28T15:28:10.052851+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "70caacbf-2f00-459e-b708-45e8a92693df"}
{"timestamp": "2025-12-28T15:28:10.053117+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'user_id_1': 12}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "70caacbf-2f00-459e-b708-45e8a92693df"}
{"timestamp": "2025-12-28T15:28:10.055434+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.010s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "70caacbf-2f00-459e-b708-45e8a92693df"}
{"timestamp": "2025-12-28T15:28:10.056314+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "70caacbf-2f00-459e-b708-45e8a92693df"}
{"timestamp": "2025-12-28T15:35:18.292432+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-28T15:35:20.318138+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-28T15:35:20.318460+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-28T15:35:20.318639+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.318855+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.319021+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.319184+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.319361+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.319507+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.319662+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.319808+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.319948+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.320088+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.320247+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.320391+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.320665+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.320862+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.321028+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.321191+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.321408+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.321553+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.321710+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.321886+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.322090+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.322270+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.322507+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.322696+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.322834+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.322980+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.323099+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.323245+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.323456+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.323735+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.323984+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.324178+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.324339+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.324460+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.324574+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.324772+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.324899+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.325011+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.325122+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.325417+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.325880+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.326270+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.326631+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.326886+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.327136+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.327351+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.327493+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.327611+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.327725+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.327838+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.327952+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.328064+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.328177+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.328289+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.328407+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.328521+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.328632+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.328741+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:20.328873+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-28T15:35:20.329035+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-28T15:35:54.744503+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-28T15:35:56.877981+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-28T15:35:56.878306+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-28T15:35:56.878511+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.878754+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.878934+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.879101+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.879394+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.879621+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.879822+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.879993+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.880156+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.880377+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.880559+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.880790+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.880942+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.881082+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.881224+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.881416+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.881558+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.881715+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.881938+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.882182+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.882429+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.882610+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.882788+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.883053+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.883245+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.883428+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.883669+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.883950+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.884108+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.884242+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.884441+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.884573+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.884695+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.884816+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.884989+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.885110+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.885232+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.885354+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.885477+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.885601+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.885726+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.885886+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.886176+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.886400+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.886603+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.886970+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.887356+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.887680+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.887963+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.888266+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.888549+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.888766+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.888907+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.889086+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.889359+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.889613+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.889846+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.890025+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:35:56.890229+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-28T15:35:56.890403+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-28T15:36:13.468204+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:13.526722+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:13.527177+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:13.530000+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:13.530345+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:13.532542+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:13.532892+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:13.535301+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:13.537812+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:13.538297+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'email_1': 'test_1766936171.418956@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:13.543455+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "detected 'bcrypt' backend, version '4.0.1'", "module": "bcrypt", "function": "_load_backend_mixin", "line": 625, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:13.543920+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "'bcrypt' backend lacks $2$ support, enabling workaround", "module": "bcrypt", "function": "_finalize_backend_mixin", "line": 406, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:13.766834+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:13.767316+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00068s] {'email': 'test_1766936171.418956@example.com', 'hashed_password': '$2b$12$1uwIxGvgKpGbhRcfkt0YQ.EEvOl2deyFoBoVB4glAyxCI3hj3a0Hu', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:13.770009+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:13.777546+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:13.778831+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:13.779230+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'pk_1': 13}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:13.781589+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 13, 'email': 'test_1766936171.418956@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:13.781950+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for auth.user_registered", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:13.782272+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:13.783278+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:13.783628+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 34, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:13.784009+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:13.801847+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:13.803405+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:13.803894+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'user_id_1': 13, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:13.808949+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:13.809310+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'user_id': 13, 'name': None, 'email': 'test_1766936171.418956@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:13.812829+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:13.817171+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:13.818121+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:13.818530+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'pk_1': 13}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:13.821216+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 13, 'user_id': 13, 'email': 'test_1766936171.418956@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:13.821535+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Using existing event loop for user.profile_created", "module": "event_publisher", "function": "publish_event", "line": 24, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:13.821923+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:13.823030+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:13.824447+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:13.824846+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2872s ago] {'email_1': 'test_1766936171.418956@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:14.038547+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 13, 'email': 'test_1766936171.418956@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:14.038777+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for auth.user_logged_in", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:14.039071+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:14.039857+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:14.040207+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 30, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:14.041541+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.573s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:14.042865+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "80d6aa2e-3b41-41f3-ae09-76ff5aaf9a05"}
{"timestamp": "2025-12-28T15:36:14.045529+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/login", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "d9ac3f0f-3150-4045-8ec8-d0f122f5a119"}
{"timestamp": "2025-12-28T15:36:14.046284+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "d9ac3f0f-3150-4045-8ec8-d0f122f5a119"}
{"timestamp": "2025-12-28T15:36:14.046497+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[0:8]", "module": "multipart", "function": "callback", "line": 625, "request_id": "d9ac3f0f-3150-4045-8ec8-d0f122f5a119"}
{"timestamp": "2025-12-28T15:36:14.046729+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[9:45]", "module": "multipart", "function": "callback", "line": 625, "request_id": "d9ac3f0f-3150-4045-8ec8-d0f122f5a119"}
{"timestamp": "2025-12-28T15:36:14.046881+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "d9ac3f0f-3150-4045-8ec8-d0f122f5a119"}
{"timestamp": "2025-12-28T15:36:14.047048+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "d9ac3f0f-3150-4045-8ec8-d0f122f5a119"}
{"timestamp": "2025-12-28T15:36:14.047225+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[46:54]", "module": "multipart", "function": "callback", "line": 625, "request_id": "d9ac3f0f-3150-4045-8ec8-d0f122f5a119"}
{"timestamp": "2025-12-28T15:36:14.047391+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[55:73]", "module": "multipart", "function": "callback", "line": 625, "request_id": "d9ac3f0f-3150-4045-8ec8-d0f122f5a119"}
{"timestamp": "2025-12-28T15:36:14.047856+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "d9ac3f0f-3150-4045-8ec8-d0f122f5a119"}
{"timestamp": "2025-12-28T15:36:14.048118+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "d9ac3f0f-3150-4045-8ec8-d0f122f5a119"}
{"timestamp": "2025-12-28T15:36:14.050848+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d9ac3f0f-3150-4045-8ec8-d0f122f5a119"}
{"timestamp": "2025-12-28T15:36:14.051476+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d9ac3f0f-3150-4045-8ec8-d0f122f5a119"}
{"timestamp": "2025-12-28T15:36:14.051959+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.5142s ago] {'email_1': 'test_1766936171.418956@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d9ac3f0f-3150-4045-8ec8-d0f122f5a119"}
{"timestamp": "2025-12-28T15:36:14.258570+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 13, 'email': 'test_1766936171.418956@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "d9ac3f0f-3150-4045-8ec8-d0f122f5a119"}
{"timestamp": "2025-12-28T15:36:14.258870+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for auth.user_logged_in", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "d9ac3f0f-3150-4045-8ec8-d0f122f5a119"}
{"timestamp": "2025-12-28T15:36:14.259156+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "d9ac3f0f-3150-4045-8ec8-d0f122f5a119"}
{"timestamp": "2025-12-28T15:36:14.260021+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "d9ac3f0f-3150-4045-8ec8-d0f122f5a119"}
{"timestamp": "2025-12-28T15:36:14.260372+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 30, "request_id": "d9ac3f0f-3150-4045-8ec8-d0f122f5a119"}
{"timestamp": "2025-12-28T15:36:14.261993+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/login \u2192 200 (0.216s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "d9ac3f0f-3150-4045-8ec8-d0f122f5a119"}
{"timestamp": "2025-12-28T15:36:14.263035+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d9ac3f0f-3150-4045-8ec8-d0f122f5a119"}
{"timestamp": "2025-12-28T15:36:14.264888+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /profiles/me", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "400d7522-396d-42a8-bb3d-70b8bcb59082"}
{"timestamp": "2025-12-28T15:36:14.267583+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "400d7522-396d-42a8-bb3d-70b8bcb59082"}
{"timestamp": "2025-12-28T15:36:14.268640+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "400d7522-396d-42a8-bb3d-70b8bcb59082"}
{"timestamp": "2025-12-28T15:36:14.269194+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'pk_1': 13}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "400d7522-396d-42a8-bb3d-70b8bcb59082"}
{"timestamp": "2025-12-28T15:36:14.272300+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "400d7522-396d-42a8-bb3d-70b8bcb59082"}
{"timestamp": "2025-12-28T15:36:14.272772+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.4695s ago] {'user_id_1': 13, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "400d7522-396d-42a8-bb3d-70b8bcb59082"}
{"timestamp": "2025-12-28T15:36:14.276194+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /profiles/me \u2192 200 (0.011s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "400d7522-396d-42a8-bb3d-70b8bcb59082"}
{"timestamp": "2025-12-28T15:36:14.277362+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "400d7522-396d-42a8-bb3d-70b8bcb59082"}
{"timestamp": "2025-12-28T15:36:14.280234+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "328f78f0-cf77-45f2-a57c-59b9497083d3"}
{"timestamp": "2025-12-28T15:36:14.284275+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "328f78f0-cf77-45f2-a57c-59b9497083d3"}
{"timestamp": "2025-12-28T15:36:14.286566+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "328f78f0-cf77-45f2-a57c-59b9497083d3"}
{"timestamp": "2025-12-28T15:36:14.287140+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00077s] {'title_1': 'The Matrix Reloaded 1766936174.278152'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "328f78f0-cf77-45f2-a57c-59b9497083d3"}
{"timestamp": "2025-12-28T15:36:14.292040+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "328f78f0-cf77-45f2-a57c-59b9497083d3"}
{"timestamp": "2025-12-28T15:36:14.292846+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00087s] {'title': 'The Matrix Reloaded 1766936174.278152', 'description': 'Test movie: The Matrix Reloaded 1766936174.278152', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "328f78f0-cf77-45f2-a57c-59b9497083d3"}
{"timestamp": "2025-12-28T15:36:14.295489+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "328f78f0-cf77-45f2-a57c-59b9497083d3"}
{"timestamp": "2025-12-28T15:36:14.300552+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "328f78f0-cf77-45f2-a57c-59b9497083d3"}
{"timestamp": "2025-12-28T15:36:14.302036+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "328f78f0-cf77-45f2-a57c-59b9497083d3"}
{"timestamp": "2025-12-28T15:36:14.302481+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00067s] {'pk_1': 10}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "328f78f0-cf77-45f2-a57c-59b9497083d3"}
{"timestamp": "2025-12-28T15:36:14.305900+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 10}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "328f78f0-cf77-45f2-a57c-59b9497083d3"}
{"timestamp": "2025-12-28T15:36:14.306202+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for movie.created", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "328f78f0-cf77-45f2-a57c-59b9497083d3"}
{"timestamp": "2025-12-28T15:36:14.306703+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "328f78f0-cf77-45f2-a57c-59b9497083d3"}
{"timestamp": "2025-12-28T15:36:14.307938+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "328f78f0-cf77-45f2-a57c-59b9497083d3"}
{"timestamp": "2025-12-28T15:36:14.308391+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "328f78f0-cf77-45f2-a57c-59b9497083d3"}
{"timestamp": "2025-12-28T15:36:14.310032+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.030s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "328f78f0-cf77-45f2-a57c-59b9497083d3"}
{"timestamp": "2025-12-28T15:36:14.311628+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "328f78f0-cf77-45f2-a57c-59b9497083d3"}
{"timestamp": "2025-12-28T15:36:14.313743+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "a0bd48f1-7cc6-4e18-bb4f-72e60e019025"}
{"timestamp": "2025-12-28T15:36:14.316867+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a0bd48f1-7cc6-4e18-bb4f-72e60e019025"}
{"timestamp": "2025-12-28T15:36:14.318404+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a0bd48f1-7cc6-4e18-bb4f-72e60e019025"}
{"timestamp": "2025-12-28T15:36:14.318891+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00072s] {'name_1': 'Standard Layout 1766936174.311706'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a0bd48f1-7cc6-4e18-bb4f-72e60e019025"}
{"timestamp": "2025-12-28T15:36:14.322922+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a0bd48f1-7cc6-4e18-bb4f-72e60e019025"}
{"timestamp": "2025-12-28T15:36:14.323578+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00077s] {'name': 'Standard Layout 1766936174.311706', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a0bd48f1-7cc6-4e18-bb4f-72e60e019025"}
{"timestamp": "2025-12-28T15:36:14.325973+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "a0bd48f1-7cc6-4e18-bb4f-72e60e019025"}
{"timestamp": "2025-12-28T15:36:14.330563+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a0bd48f1-7cc6-4e18-bb4f-72e60e019025"}
{"timestamp": "2025-12-28T15:36:14.331659+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a0bd48f1-7cc6-4e18-bb4f-72e60e019025"}
{"timestamp": "2025-12-28T15:36:14.332017+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'pk_1': 9}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a0bd48f1-7cc6-4e18-bb4f-72e60e019025"}
{"timestamp": "2025-12-28T15:36:14.334931+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 9}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "a0bd48f1-7cc6-4e18-bb4f-72e60e019025"}
{"timestamp": "2025-12-28T15:36:14.335376+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for screen.layout_created", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "a0bd48f1-7cc6-4e18-bb4f-72e60e019025"}
{"timestamp": "2025-12-28T15:36:14.335771+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "a0bd48f1-7cc6-4e18-bb4f-72e60e019025"}
{"timestamp": "2025-12-28T15:36:14.336940+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "a0bd48f1-7cc6-4e18-bb4f-72e60e019025"}
{"timestamp": "2025-12-28T15:36:14.337355+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "a0bd48f1-7cc6-4e18-bb4f-72e60e019025"}
{"timestamp": "2025-12-28T15:36:14.339777+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.026s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "a0bd48f1-7cc6-4e18-bb4f-72e60e019025"}
{"timestamp": "2025-12-28T15:36:14.341209+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a0bd48f1-7cc6-4e18-bb4f-72e60e019025"}
{"timestamp": "2025-12-28T15:36:14.347958+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b7938323-b6c7-427e-b301-9fa825322de2"}
{"timestamp": "2025-12-28T15:36:14.351075+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b7938323-b6c7-427e-b301-9fa825322de2"}
{"timestamp": "2025-12-28T15:36:14.352525+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b7938323-b6c7-427e-b301-9fa825322de2"}
{"timestamp": "2025-12-28T15:36:14.353360+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'name_1': 'Screen 1 1766936174.340727', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b7938323-b6c7-427e-b301-9fa825322de2"}
{"timestamp": "2025-12-28T15:36:14.358105+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b7938323-b6c7-427e-b301-9fa825322de2"}
{"timestamp": "2025-12-28T15:36:14.358555+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'id_1': 9, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b7938323-b6c7-427e-b301-9fa825322de2"}
{"timestamp": "2025-12-28T15:36:14.361456+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b7938323-b6c7-427e-b301-9fa825322de2"}
{"timestamp": "2025-12-28T15:36:14.362046+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00083s] {'name': 'Screen 1 1766936174.340727', 'capacity': 150, 'seat_layout_id': 9}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b7938323-b6c7-427e-b301-9fa825322de2"}
{"timestamp": "2025-12-28T15:36:14.364263+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b7938323-b6c7-427e-b301-9fa825322de2"}
{"timestamp": "2025-12-28T15:36:14.368597+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b7938323-b6c7-427e-b301-9fa825322de2"}
{"timestamp": "2025-12-28T15:36:14.369829+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b7938323-b6c7-427e-b301-9fa825322de2"}
{"timestamp": "2025-12-28T15:36:14.370296+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00072s] {'pk_1': 9}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b7938323-b6c7-427e-b301-9fa825322de2"}
{"timestamp": "2025-12-28T15:36:14.372726+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 9}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "b7938323-b6c7-427e-b301-9fa825322de2"}
{"timestamp": "2025-12-28T15:36:14.373006+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for screen.created", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "b7938323-b6c7-427e-b301-9fa825322de2"}
{"timestamp": "2025-12-28T15:36:14.373241+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "b7938323-b6c7-427e-b301-9fa825322de2"}
{"timestamp": "2025-12-28T15:36:14.374232+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "b7938323-b6c7-427e-b301-9fa825322de2"}
{"timestamp": "2025-12-28T15:36:14.374456+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "b7938323-b6c7-427e-b301-9fa825322de2"}
{"timestamp": "2025-12-28T15:36:14.375535+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.028s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b7938323-b6c7-427e-b301-9fa825322de2"}
{"timestamp": "2025-12-28T15:36:14.376539+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b7938323-b6c7-427e-b301-9fa825322de2"}
{"timestamp": "2025-12-28T15:36:14.378254+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "f9ad90a9-bdba-4796-87a2-ede8bd05e9f2"}
{"timestamp": "2025-12-28T15:36:14.380708+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f9ad90a9-bdba-4796-87a2-ede8bd05e9f2"}
{"timestamp": "2025-12-28T15:36:14.381894+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f9ad90a9-bdba-4796-87a2-ede8bd05e9f2"}
{"timestamp": "2025-12-28T15:36:14.382205+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'pk_1': 10}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f9ad90a9-bdba-4796-87a2-ede8bd05e9f2"}
{"timestamp": "2025-12-28T15:36:14.385278+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f9ad90a9-bdba-4796-87a2-ede8bd05e9f2"}
{"timestamp": "2025-12-28T15:36:14.385825+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00085s] {'pk_1': 9}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f9ad90a9-bdba-4796-87a2-ede8bd05e9f2"}
{"timestamp": "2025-12-28T15:36:14.389597+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f9ad90a9-bdba-4796-87a2-ede8bd05e9f2"}
{"timestamp": "2025-12-28T15:36:14.390090+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00067s] {'screen_id_1': 9, 'start_time_1': datetime.datetime(2025, 12, 29, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 29, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f9ad90a9-bdba-4796-87a2-ede8bd05e9f2"}
{"timestamp": "2025-12-28T15:36:14.393855+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f9ad90a9-bdba-4796-87a2-ede8bd05e9f2"}
{"timestamp": "2025-12-28T15:36:14.394327+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'start_time': datetime.datetime(2025, 12, 29, 19, 0), 'end_time': datetime.datetime(2025, 12, 29, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 10, 'screen_id': 9}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f9ad90a9-bdba-4796-87a2-ede8bd05e9f2"}
{"timestamp": "2025-12-28T15:36:14.397246+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "f9ad90a9-bdba-4796-87a2-ede8bd05e9f2"}
{"timestamp": "2025-12-28T15:36:14.401535+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f9ad90a9-bdba-4796-87a2-ede8bd05e9f2"}
{"timestamp": "2025-12-28T15:36:14.402771+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f9ad90a9-bdba-4796-87a2-ede8bd05e9f2"}
{"timestamp": "2025-12-28T15:36:14.403202+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00067s] {'pk_1': 6}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f9ad90a9-bdba-4796-87a2-ede8bd05e9f2"}
{"timestamp": "2025-12-28T15:36:14.406874+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f9ad90a9-bdba-4796-87a2-ede8bd05e9f2"}
{"timestamp": "2025-12-28T15:36:14.407259+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'pk_1': 10}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f9ad90a9-bdba-4796-87a2-ede8bd05e9f2"}
{"timestamp": "2025-12-28T15:36:14.409588+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f9ad90a9-bdba-4796-87a2-ede8bd05e9f2"}
{"timestamp": "2025-12-28T15:36:14.410001+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'pk_1': 9}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f9ad90a9-bdba-4796-87a2-ede8bd05e9f2"}
{"timestamp": "2025-12-28T15:36:14.411346+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 6}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "f9ad90a9-bdba-4796-87a2-ede8bd05e9f2"}
{"timestamp": "2025-12-28T15:36:14.411571+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for showtime.created", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "f9ad90a9-bdba-4796-87a2-ede8bd05e9f2"}
{"timestamp": "2025-12-28T15:36:14.411765+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "f9ad90a9-bdba-4796-87a2-ede8bd05e9f2"}
{"timestamp": "2025-12-28T15:36:14.412576+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "f9ad90a9-bdba-4796-87a2-ede8bd05e9f2"}
{"timestamp": "2025-12-28T15:36:14.412797+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "f9ad90a9-bdba-4796-87a2-ede8bd05e9f2"}
{"timestamp": "2025-12-28T15:36:14.414053+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.036s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "f9ad90a9-bdba-4796-87a2-ede8bd05e9f2"}
{"timestamp": "2025-12-28T15:36:14.414996+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f9ad90a9-bdba-4796-87a2-ede8bd05e9f2"}
{"timestamp": "2025-12-28T15:36:14.416763+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /seatavailability/grid/6", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "8596a310-74da-4829-8d97-715812807b89"}
{"timestamp": "2025-12-28T15:36:14.419319+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8596a310-74da-4829-8d97-715812807b89"}
{"timestamp": "2025-12-28T15:36:14.420611+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8596a310-74da-4829-8d97-715812807b89"}
{"timestamp": "2025-12-28T15:36:14.421050+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'showtime_id_1': 6}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8596a310-74da-4829-8d97-715812807b89"}
{"timestamp": "2025-12-28T15:36:14.424592+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /seatavailability/grid/6 \u2192 200 (0.008s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "8596a310-74da-4829-8d97-715812807b89"}
{"timestamp": "2025-12-28T15:36:14.425882+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "8596a310-74da-4829-8d97-715812807b89"}
{"timestamp": "2025-12-28T15:36:14.427980+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.431186+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.431851+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.432189+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.1638s ago] {'pk_1': 13}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.436036+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.436435+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'user_id': 13, 'showtime_id': 6, 'seat_code': 'R5-8', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 28, 15, 36, 14, 435675, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 28, 15, 46, 14, 434784, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.439326+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.443493+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.444576+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.444935+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'pk_1': 5}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.447385+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 5, 'user_id': 13, 'showtime_id': 6, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.447611+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for reservation.created", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.447791+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.448934+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.449296+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.449625+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.449913+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.450163+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.453359+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.456719+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.457891+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00251s] {'showtime_id_1': 6, 'seat_code_1': 'R5-8', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.463343+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.465994+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00083s] {'seat_code': 'R5-8', 'showtime_id': 6, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.470460+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.471503+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00075s] {'status': 'LOCKED', 'locked_by_user_id': 13, 'lock_expires_at': datetime.datetime(2025, 12, 28, 15, 46, 14, 468904, tzinfo=datetime.timezone.utc), 'seat_locks_id': 2}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.475379+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.489785+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.491854+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.493044+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00131s] {'pk_1': 2}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.497466+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 6, 'seat_code': 'R5-8', 'user_id': 13, 'expires_at': '2025-12-28T15:46:14.468904+00:00'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.497889+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Using existing event loop for seat.locked", "module": "event_publisher", "function": "publish_event", "line": 24, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.498862+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.500636+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.501034+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.501413+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 5, 'user_id': 13, 'showtime_id': 6, 'seat_code': 'R5-8'}", "module": "handlers", "function": "on_reservation_created", "line": 21, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.501878+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 5", "module": "handlers", "function": "on_reservation_created", "line": 33, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.504602+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.506934+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.507616+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00076s] {'user_id': 13, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 5}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.512125+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.517039+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.518462+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.518771+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'pk_1': 5}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.521137+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 5, 'reservation_id': 5, 'user_id': 13, 'showtime_id': 6, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.521428+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Using existing event loop for order.created", "module": "event_publisher", "function": "publish_event", "line": 24, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.521646+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 5", "module": "handlers", "function": "on_reservation_created", "line": 41, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.521967+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.523280+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.523565+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.525416+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.527217+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.527810+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00068s] {'actor_id': 13, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 5, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 5, \"user_id\": 13, \"showtime_id\": 6, \"seat_code\": \"R5-8\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 28, 15, 36, 14, 526807, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.530929+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.535167+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.536270+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.536748+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'pk_1': 5}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.539167+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.540273+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.542209+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.114s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.543440+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "66435348-4fa2-4690-ada9-9c2249d50f6e"}
{"timestamp": "2025-12-28T15:36:14.545397+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "ba4408c0-780d-4fe1-8129-7b1b7e036b3e"}
{"timestamp": "2025-12-28T15:36:14.548430+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ba4408c0-780d-4fe1-8129-7b1b7e036b3e"}
{"timestamp": "2025-12-28T15:36:14.549169+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ba4408c0-780d-4fe1-8129-7b1b7e036b3e"}
{"timestamp": "2025-12-28T15:36:14.549577+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2811s ago] {'pk_1': 13}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ba4408c0-780d-4fe1-8129-7b1b7e036b3e"}
{"timestamp": "2025-12-28T15:36:14.552842+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ba4408c0-780d-4fe1-8129-7b1b7e036b3e"}
{"timestamp": "2025-12-28T15:36:14.553210+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'user_id_1': 13}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ba4408c0-780d-4fe1-8129-7b1b7e036b3e"}
{"timestamp": "2025-12-28T15:36:14.557233+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.012s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "ba4408c0-780d-4fe1-8129-7b1b7e036b3e"}
{"timestamp": "2025-12-28T15:36:14.558985+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ba4408c0-780d-4fe1-8129-7b1b7e036b3e"}
{"timestamp": "2025-12-28T15:36:14.561933+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /payments/order/5", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "0c98a9eb-8366-4303-bb51-29b0c3a659ac"}
{"timestamp": "2025-12-28T15:36:14.565769+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0c98a9eb-8366-4303-bb51-29b0c3a659ac"}
{"timestamp": "2025-12-28T15:36:14.567476+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.order_id = %(order_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c98a9eb-8366-4303-bb51-29b0c3a659ac"}
{"timestamp": "2025-12-28T15:36:14.568051+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00071s] {'order_id_1': 5}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c98a9eb-8366-4303-bb51-29b0c3a659ac"}
{"timestamp": "2025-12-28T15:36:14.576011+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /payments/order/5 \u2192 200 (0.014s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "0c98a9eb-8366-4303-bb51-29b0c3a659ac"}
{"timestamp": "2025-12-28T15:36:14.576886+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0c98a9eb-8366-4303-bb51-29b0c3a659ac"}
{"timestamp": "2025-12-28T15:41:13.832175+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-28T15:41:15.885766+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-28T15:41:15.886059+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-28T15:41:15.886189+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.886311+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.886458+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.886607+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.886785+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.886904+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.887016+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.887127+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.887236+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.887356+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.887468+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.887624+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.887820+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.887978+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.888175+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.888312+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.888436+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.888562+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.888684+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.888805+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.888948+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.889119+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.889261+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.889435+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.889639+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.889783+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.889912+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.890026+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.890136+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.890354+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.890639+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.890810+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.890943+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.891143+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.891300+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.891749+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.892156+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.892531+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.892870+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.893132+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.893345+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.893507+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.893658+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.893844+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.894051+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.894242+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.894431+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.894563+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.894686+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.894804+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.894917+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.895039+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.895199+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.895415+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.895618+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.895785+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.895951+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.896117+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:41:15.896261+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-28T15:41:15.896376+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-28T15:41:26.834336+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:26.891304+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:26.891705+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:26.894319+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:26.894591+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:26.896606+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:26.896879+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:26.898931+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:26.901661+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:26.902194+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'email_1': 'test_1766936484.776976@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:26.905552+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "detected 'bcrypt' backend, version '4.0.1'", "module": "bcrypt", "function": "_load_backend_mixin", "line": 625, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:26.906134+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "'bcrypt' backend lacks $2$ support, enabling workaround", "module": "bcrypt", "function": "_finalize_backend_mixin", "line": 406, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:27.129817+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:27.130278+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'email': 'test_1766936484.776976@example.com', 'hashed_password': '$2b$12$84NEDOe9AcTYI9SIm/3NaObMZx3BldaAHmQ3seYSiJg0YRp3gf.Re', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:27.132449+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:27.138456+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:27.139923+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:27.140400+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'pk_1': 14}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:27.142962+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 14, 'email': 'test_1766936484.776976@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:27.143169+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for auth.user_registered", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:27.143416+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:27.144246+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:27.144454+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 34, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:27.144670+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:27.179422+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:27.180955+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:27.181240+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'user_id_1': 14, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:27.185171+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:27.185622+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'user_id': 14, 'name': None, 'email': 'test_1766936484.776976@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:27.188249+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:27.193453+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:27.194448+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:27.194753+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'pk_1': 14}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:27.196831+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 14, 'user_id': 14, 'email': 'test_1766936484.776976@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:27.197048+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Using existing event loop for user.profile_created", "module": "event_publisher", "function": "publish_event", "line": 24, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:27.197405+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:27.198589+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:27.199938+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:27.200429+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2989s ago] {'email_1': 'test_1766936484.776976@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:27.413081+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 14, 'email': 'test_1766936484.776976@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:27.413314+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for auth.user_logged_in", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:27.413556+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:27.414344+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:27.414588+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 30, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:27.415762+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.582s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:27.416847+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "e6e8cf34-2c07-48fc-87b9-26be9f18e18c"}
{"timestamp": "2025-12-28T15:41:27.419127+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/login", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "100f81d0-6fc4-47d0-b315-9a61e3d9b239"}
{"timestamp": "2025-12-28T15:41:27.420195+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "100f81d0-6fc4-47d0-b315-9a61e3d9b239"}
{"timestamp": "2025-12-28T15:41:27.420435+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[0:8]", "module": "multipart", "function": "callback", "line": 625, "request_id": "100f81d0-6fc4-47d0-b315-9a61e3d9b239"}
{"timestamp": "2025-12-28T15:41:27.420663+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[9:45]", "module": "multipart", "function": "callback", "line": 625, "request_id": "100f81d0-6fc4-47d0-b315-9a61e3d9b239"}
{"timestamp": "2025-12-28T15:41:27.420858+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "100f81d0-6fc4-47d0-b315-9a61e3d9b239"}
{"timestamp": "2025-12-28T15:41:27.421014+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "100f81d0-6fc4-47d0-b315-9a61e3d9b239"}
{"timestamp": "2025-12-28T15:41:27.421163+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[46:54]", "module": "multipart", "function": "callback", "line": 625, "request_id": "100f81d0-6fc4-47d0-b315-9a61e3d9b239"}
{"timestamp": "2025-12-28T15:41:27.421349+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[55:73]", "module": "multipart", "function": "callback", "line": 625, "request_id": "100f81d0-6fc4-47d0-b315-9a61e3d9b239"}
{"timestamp": "2025-12-28T15:41:27.421839+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "100f81d0-6fc4-47d0-b315-9a61e3d9b239"}
{"timestamp": "2025-12-28T15:41:27.422184+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "100f81d0-6fc4-47d0-b315-9a61e3d9b239"}
{"timestamp": "2025-12-28T15:41:27.424925+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "100f81d0-6fc4-47d0-b315-9a61e3d9b239"}
{"timestamp": "2025-12-28T15:41:27.425685+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "100f81d0-6fc4-47d0-b315-9a61e3d9b239"}
{"timestamp": "2025-12-28T15:41:27.426055+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.5247s ago] {'email_1': 'test_1766936484.776976@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "100f81d0-6fc4-47d0-b315-9a61e3d9b239"}
{"timestamp": "2025-12-28T15:41:27.634038+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 14, 'email': 'test_1766936484.776976@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "100f81d0-6fc4-47d0-b315-9a61e3d9b239"}
{"timestamp": "2025-12-28T15:41:27.634339+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for auth.user_logged_in", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "100f81d0-6fc4-47d0-b315-9a61e3d9b239"}
{"timestamp": "2025-12-28T15:41:27.634590+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "100f81d0-6fc4-47d0-b315-9a61e3d9b239"}
{"timestamp": "2025-12-28T15:41:27.635413+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "100f81d0-6fc4-47d0-b315-9a61e3d9b239"}
{"timestamp": "2025-12-28T15:41:27.635629+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 30, "request_id": "100f81d0-6fc4-47d0-b315-9a61e3d9b239"}
{"timestamp": "2025-12-28T15:41:27.636687+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/login \u2192 200 (0.218s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "100f81d0-6fc4-47d0-b315-9a61e3d9b239"}
{"timestamp": "2025-12-28T15:41:27.637599+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "100f81d0-6fc4-47d0-b315-9a61e3d9b239"}
{"timestamp": "2025-12-28T15:41:27.639659+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /profiles/me", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "f41224dc-171b-4c61-9543-ce2c427cd5d6"}
{"timestamp": "2025-12-28T15:41:27.642753+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f41224dc-171b-4c61-9543-ce2c427cd5d6"}
{"timestamp": "2025-12-28T15:41:27.643796+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f41224dc-171b-4c61-9543-ce2c427cd5d6"}
{"timestamp": "2025-12-28T15:41:27.644125+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'pk_1': 14}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f41224dc-171b-4c61-9543-ce2c427cd5d6"}
{"timestamp": "2025-12-28T15:41:27.646789+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f41224dc-171b-4c61-9543-ce2c427cd5d6"}
{"timestamp": "2025-12-28T15:41:27.647116+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.4664s ago] {'user_id_1': 14, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f41224dc-171b-4c61-9543-ce2c427cd5d6"}
{"timestamp": "2025-12-28T15:41:27.649710+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /profiles/me \u2192 200 (0.010s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "f41224dc-171b-4c61-9543-ce2c427cd5d6"}
{"timestamp": "2025-12-28T15:41:27.650610+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f41224dc-171b-4c61-9543-ce2c427cd5d6"}
{"timestamp": "2025-12-28T15:41:27.652869+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "03e699ce-760a-437e-9c66-08b23d2e92ba"}
{"timestamp": "2025-12-28T15:41:27.655894+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "03e699ce-760a-437e-9c66-08b23d2e92ba"}
{"timestamp": "2025-12-28T15:41:27.657759+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "03e699ce-760a-437e-9c66-08b23d2e92ba"}
{"timestamp": "2025-12-28T15:41:27.658183+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'title_1': 'The Matrix Reloaded 1766936487.651229'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "03e699ce-760a-437e-9c66-08b23d2e92ba"}
{"timestamp": "2025-12-28T15:41:27.661529+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "03e699ce-760a-437e-9c66-08b23d2e92ba"}
{"timestamp": "2025-12-28T15:41:27.661964+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'title': 'The Matrix Reloaded 1766936487.651229', 'description': 'Test movie: The Matrix Reloaded 1766936487.651229', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "03e699ce-760a-437e-9c66-08b23d2e92ba"}
{"timestamp": "2025-12-28T15:41:27.664178+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "03e699ce-760a-437e-9c66-08b23d2e92ba"}
{"timestamp": "2025-12-28T15:41:27.669015+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "03e699ce-760a-437e-9c66-08b23d2e92ba"}
{"timestamp": "2025-12-28T15:41:27.670068+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "03e699ce-760a-437e-9c66-08b23d2e92ba"}
{"timestamp": "2025-12-28T15:41:27.670453+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'pk_1': 11}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "03e699ce-760a-437e-9c66-08b23d2e92ba"}
{"timestamp": "2025-12-28T15:41:27.672763+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 11}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "03e699ce-760a-437e-9c66-08b23d2e92ba"}
{"timestamp": "2025-12-28T15:41:27.672983+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for movie.created", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "03e699ce-760a-437e-9c66-08b23d2e92ba"}
{"timestamp": "2025-12-28T15:41:27.673214+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "03e699ce-760a-437e-9c66-08b23d2e92ba"}
{"timestamp": "2025-12-28T15:41:27.674050+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "03e699ce-760a-437e-9c66-08b23d2e92ba"}
{"timestamp": "2025-12-28T15:41:27.674265+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "03e699ce-760a-437e-9c66-08b23d2e92ba"}
{"timestamp": "2025-12-28T15:41:27.675349+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.023s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "03e699ce-760a-437e-9c66-08b23d2e92ba"}
{"timestamp": "2025-12-28T15:41:27.676205+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "03e699ce-760a-437e-9c66-08b23d2e92ba"}
{"timestamp": "2025-12-28T15:41:27.678212+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "8017e736-60c1-4955-8835-cd3860bb4199"}
{"timestamp": "2025-12-28T15:41:27.680832+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8017e736-60c1-4955-8835-cd3860bb4199"}
{"timestamp": "2025-12-28T15:41:27.681979+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8017e736-60c1-4955-8835-cd3860bb4199"}
{"timestamp": "2025-12-28T15:41:27.682242+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00042s] {'name_1': 'Standard Layout 1766936487.676699'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8017e736-60c1-4955-8835-cd3860bb4199"}
{"timestamp": "2025-12-28T15:41:27.685684+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8017e736-60c1-4955-8835-cd3860bb4199"}
{"timestamp": "2025-12-28T15:41:27.686077+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'name': 'Standard Layout 1766936487.676699', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8017e736-60c1-4955-8835-cd3860bb4199"}
{"timestamp": "2025-12-28T15:41:27.688043+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "8017e736-60c1-4955-8835-cd3860bb4199"}
{"timestamp": "2025-12-28T15:41:27.692410+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8017e736-60c1-4955-8835-cd3860bb4199"}
{"timestamp": "2025-12-28T15:41:27.693245+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8017e736-60c1-4955-8835-cd3860bb4199"}
{"timestamp": "2025-12-28T15:41:27.693500+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00038s] {'pk_1': 10}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8017e736-60c1-4955-8835-cd3860bb4199"}
{"timestamp": "2025-12-28T15:41:27.695498+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 10}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "8017e736-60c1-4955-8835-cd3860bb4199"}
{"timestamp": "2025-12-28T15:41:27.695751+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for screen.layout_created", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "8017e736-60c1-4955-8835-cd3860bb4199"}
{"timestamp": "2025-12-28T15:41:27.696013+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "8017e736-60c1-4955-8835-cd3860bb4199"}
{"timestamp": "2025-12-28T15:41:27.696790+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "8017e736-60c1-4955-8835-cd3860bb4199"}
{"timestamp": "2025-12-28T15:41:27.697057+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "8017e736-60c1-4955-8835-cd3860bb4199"}
{"timestamp": "2025-12-28T15:41:27.698290+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.020s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "8017e736-60c1-4955-8835-cd3860bb4199"}
{"timestamp": "2025-12-28T15:41:27.699632+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "8017e736-60c1-4955-8835-cd3860bb4199"}
{"timestamp": "2025-12-28T15:41:27.705314+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "c1ba2bb4-de46-48d9-af8a-18891d5e07e3"}
{"timestamp": "2025-12-28T15:41:27.708150+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c1ba2bb4-de46-48d9-af8a-18891d5e07e3"}
{"timestamp": "2025-12-28T15:41:27.709385+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1ba2bb4-de46-48d9-af8a-18891d5e07e3"}
{"timestamp": "2025-12-28T15:41:27.709722+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'name_1': 'Screen 1 1766936487.699208', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1ba2bb4-de46-48d9-af8a-18891d5e07e3"}
{"timestamp": "2025-12-28T15:41:27.712746+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1ba2bb4-de46-48d9-af8a-18891d5e07e3"}
{"timestamp": "2025-12-28T15:41:27.713088+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'id_1': 10, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1ba2bb4-de46-48d9-af8a-18891d5e07e3"}
{"timestamp": "2025-12-28T15:41:27.715906+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1ba2bb4-de46-48d9-af8a-18891d5e07e3"}
{"timestamp": "2025-12-28T15:41:27.716433+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00069s] {'name': 'Screen 1 1766936487.699208', 'capacity': 150, 'seat_layout_id': 10}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1ba2bb4-de46-48d9-af8a-18891d5e07e3"}
{"timestamp": "2025-12-28T15:41:27.718572+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "c1ba2bb4-de46-48d9-af8a-18891d5e07e3"}
{"timestamp": "2025-12-28T15:41:27.723088+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c1ba2bb4-de46-48d9-af8a-18891d5e07e3"}
{"timestamp": "2025-12-28T15:41:27.724038+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1ba2bb4-de46-48d9-af8a-18891d5e07e3"}
{"timestamp": "2025-12-28T15:41:27.724299+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'pk_1': 10}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1ba2bb4-de46-48d9-af8a-18891d5e07e3"}
{"timestamp": "2025-12-28T15:41:27.727015+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 10}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "c1ba2bb4-de46-48d9-af8a-18891d5e07e3"}
{"timestamp": "2025-12-28T15:41:27.727261+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for screen.created", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "c1ba2bb4-de46-48d9-af8a-18891d5e07e3"}
{"timestamp": "2025-12-28T15:41:27.727522+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "c1ba2bb4-de46-48d9-af8a-18891d5e07e3"}
{"timestamp": "2025-12-28T15:41:27.728322+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "c1ba2bb4-de46-48d9-af8a-18891d5e07e3"}
{"timestamp": "2025-12-28T15:41:27.728497+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "c1ba2bb4-de46-48d9-af8a-18891d5e07e3"}
{"timestamp": "2025-12-28T15:41:27.729590+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.024s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "c1ba2bb4-de46-48d9-af8a-18891d5e07e3"}
{"timestamp": "2025-12-28T15:41:27.730593+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c1ba2bb4-de46-48d9-af8a-18891d5e07e3"}
{"timestamp": "2025-12-28T15:41:27.733016+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "7b43b839-fe91-453b-bc83-63769f877ab1"}
{"timestamp": "2025-12-28T15:41:27.735615+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7b43b839-fe91-453b-bc83-63769f877ab1"}
{"timestamp": "2025-12-28T15:41:27.736780+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7b43b839-fe91-453b-bc83-63769f877ab1"}
{"timestamp": "2025-12-28T15:41:27.737229+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'pk_1': 11}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7b43b839-fe91-453b-bc83-63769f877ab1"}
{"timestamp": "2025-12-28T15:41:27.740651+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7b43b839-fe91-453b-bc83-63769f877ab1"}
{"timestamp": "2025-12-28T15:41:27.741005+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'pk_1': 10}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7b43b839-fe91-453b-bc83-63769f877ab1"}
{"timestamp": "2025-12-28T15:41:27.743846+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7b43b839-fe91-453b-bc83-63769f877ab1"}
{"timestamp": "2025-12-28T15:41:27.744326+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'screen_id_1': 10, 'start_time_1': datetime.datetime(2025, 12, 29, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 29, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7b43b839-fe91-453b-bc83-63769f877ab1"}
{"timestamp": "2025-12-28T15:41:27.748420+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7b43b839-fe91-453b-bc83-63769f877ab1"}
{"timestamp": "2025-12-28T15:41:27.749049+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00071s] {'start_time': datetime.datetime(2025, 12, 29, 19, 0), 'end_time': datetime.datetime(2025, 12, 29, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 11, 'screen_id': 10}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7b43b839-fe91-453b-bc83-63769f877ab1"}
{"timestamp": "2025-12-28T15:41:27.751249+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "7b43b839-fe91-453b-bc83-63769f877ab1"}
{"timestamp": "2025-12-28T15:41:27.756383+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7b43b839-fe91-453b-bc83-63769f877ab1"}
{"timestamp": "2025-12-28T15:41:27.757597+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7b43b839-fe91-453b-bc83-63769f877ab1"}
{"timestamp": "2025-12-28T15:41:27.757951+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'pk_1': 7}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7b43b839-fe91-453b-bc83-63769f877ab1"}
{"timestamp": "2025-12-28T15:41:27.761766+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7b43b839-fe91-453b-bc83-63769f877ab1"}
{"timestamp": "2025-12-28T15:41:27.762342+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00071s] {'pk_1': 11}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7b43b839-fe91-453b-bc83-63769f877ab1"}
{"timestamp": "2025-12-28T15:41:27.764528+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7b43b839-fe91-453b-bc83-63769f877ab1"}
{"timestamp": "2025-12-28T15:41:27.764958+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'pk_1': 10}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7b43b839-fe91-453b-bc83-63769f877ab1"}
{"timestamp": "2025-12-28T15:41:27.766410+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 7}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "7b43b839-fe91-453b-bc83-63769f877ab1"}
{"timestamp": "2025-12-28T15:41:27.766625+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for showtime.created", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "7b43b839-fe91-453b-bc83-63769f877ab1"}
{"timestamp": "2025-12-28T15:41:27.766816+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "7b43b839-fe91-453b-bc83-63769f877ab1"}
{"timestamp": "2025-12-28T15:41:27.767683+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "7b43b839-fe91-453b-bc83-63769f877ab1"}
{"timestamp": "2025-12-28T15:41:27.767947+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "7b43b839-fe91-453b-bc83-63769f877ab1"}
{"timestamp": "2025-12-28T15:41:27.769259+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.036s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "7b43b839-fe91-453b-bc83-63769f877ab1"}
{"timestamp": "2025-12-28T15:41:27.770202+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "7b43b839-fe91-453b-bc83-63769f877ab1"}
{"timestamp": "2025-12-28T15:41:27.772034+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /seatavailability/grid/7", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "dd373d8e-f72c-4169-95ab-bc2832273f8a"}
{"timestamp": "2025-12-28T15:41:27.774444+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "dd373d8e-f72c-4169-95ab-bc2832273f8a"}
{"timestamp": "2025-12-28T15:41:27.775846+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dd373d8e-f72c-4169-95ab-bc2832273f8a"}
{"timestamp": "2025-12-28T15:41:27.776399+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'showtime_id_1': 7}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dd373d8e-f72c-4169-95ab-bc2832273f8a"}
{"timestamp": "2025-12-28T15:41:27.779663+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /seatavailability/grid/7 \u2192 200 (0.008s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "dd373d8e-f72c-4169-95ab-bc2832273f8a"}
{"timestamp": "2025-12-28T15:41:27.780613+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "dd373d8e-f72c-4169-95ab-bc2832273f8a"}
{"timestamp": "2025-12-28T15:41:27.782575+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.785017+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.785754+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.786316+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.1425s ago] {'pk_1': 14}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.791254+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.792028+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00075s] {'user_id': 14, 'showtime_id': 7, 'seat_code': 'R5-8', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 28, 15, 41, 27, 790744, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 28, 15, 51, 27, 789257, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.794802+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.799004+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.800195+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.800525+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'pk_1': 6}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.803294+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 6, 'user_id': 14, 'showtime_id': 7, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.803472+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for reservation.created", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.803628+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.804366+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.804550+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.804696+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.804976+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.805239+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.806598+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.807744+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.808156+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00062s] {'showtime_id_1': 7, 'seat_code_1': 'R5-8', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.811154+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.811463+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00042s] {'seat_code': 'R5-8', 'showtime_id': 7, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.814252+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.814566+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00043s] {'status': 'LOCKED', 'locked_by_user_id': 14, 'lock_expires_at': datetime.datetime(2025, 12, 28, 15, 51, 27, 813214, tzinfo=datetime.timezone.utc), 'seat_locks_id': 3}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.816427+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.820491+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.821475+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.821954+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'pk_1': 3}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.825202+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 7, 'seat_code': 'R5-8', 'user_id': 14, 'expires_at': '2025-12-28T15:51:27.813214+00:00'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.825492+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Using existing event loop for seat.locked", "module": "event_publisher", "function": "publish_event", "line": 24, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.825958+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.827168+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.827379+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.827546+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 6, 'user_id': 14, 'showtime_id': 7, 'seat_code': 'R5-8'}", "module": "handlers", "function": "on_reservation_created", "line": 21, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.827884+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 6", "module": "handlers", "function": "on_reservation_created", "line": 33, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.829450+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.830739+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.831040+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'user_id': 14, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 6}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.833595+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.838237+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.839758+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.840204+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'pk_1': 6}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.842425+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 6, 'reservation_id': 6, 'user_id': 14, 'showtime_id': 7, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.842652+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Using existing event loop for order.created", "module": "event_publisher", "function": "publish_event", "line": 24, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.842922+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 6", "module": "handlers", "function": "on_reservation_created", "line": 41, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.843285+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.844483+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.844725+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.846242+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.847471+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.847948+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'actor_id': 14, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 6, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 6, \"user_id\": 14, \"showtime_id\": 7, \"seat_code\": \"R5-8\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 28, 15, 41, 27, 847143, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.850278+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.854985+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.856404+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.857097+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'pk_1': 6}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.859782+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.860855+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.862140+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.080s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.863019+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "63e71f6b-bfe3-495c-ac04-dce03b864011"}
{"timestamp": "2025-12-28T15:41:27.864693+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "74b5538c-ce8c-4ba4-84a0-283d16ee9963"}
{"timestamp": "2025-12-28T15:41:27.867197+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "74b5538c-ce8c-4ba4-84a0-283d16ee9963"}
{"timestamp": "2025-12-28T15:41:27.867859+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "74b5538c-ce8c-4ba4-84a0-283d16ee9963"}
{"timestamp": "2025-12-28T15:41:27.868308+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2246s ago] {'pk_1': 14}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "74b5538c-ce8c-4ba4-84a0-283d16ee9963"}
{"timestamp": "2025-12-28T15:41:27.871557+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "74b5538c-ce8c-4ba4-84a0-283d16ee9963"}
{"timestamp": "2025-12-28T15:41:27.872041+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'user_id_1': 14}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "74b5538c-ce8c-4ba4-84a0-283d16ee9963"}
{"timestamp": "2025-12-28T15:41:27.874112+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.009s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "74b5538c-ce8c-4ba4-84a0-283d16ee9963"}
{"timestamp": "2025-12-28T15:41:27.875278+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "74b5538c-ce8c-4ba4-84a0-283d16ee9963"}
{"timestamp": "2025-12-28T15:41:27.876844+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /payments/order/6", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "957c9438-ef08-412d-b427-3c5d0ad18b0f"}
{"timestamp": "2025-12-28T15:41:27.879114+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "957c9438-ef08-412d-b427-3c5d0ad18b0f"}
{"timestamp": "2025-12-28T15:41:27.880415+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.order_id = %(order_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "957c9438-ef08-412d-b427-3c5d0ad18b0f"}
{"timestamp": "2025-12-28T15:41:27.880836+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'order_id_1': 6}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "957c9438-ef08-412d-b427-3c5d0ad18b0f"}
{"timestamp": "2025-12-28T15:41:27.883532+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /payments/order/6 \u2192 200 (0.007s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "957c9438-ef08-412d-b427-3c5d0ad18b0f"}
{"timestamp": "2025-12-28T15:41:27.884386+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "957c9438-ef08-412d-b427-3c5d0ad18b0f"}
{"timestamp": "2025-12-28T15:44:12.727661+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-28T15:44:14.614285+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-28T15:44:14.614830+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-28T15:44:14.615099+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.615414+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.615764+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.616127+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.616439+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.616671+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.616876+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.617184+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.617533+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.617810+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.617986+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.618109+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.618297+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.618418+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.618531+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.618707+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.618972+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.619191+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.619422+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.619579+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.619963+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.620318+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.620603+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.620813+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.621153+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.621427+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.621667+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.621860+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.622147+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.622361+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.622499+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.622687+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.622809+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.622925+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.623042+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.623158+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.623274+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.623443+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.623571+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.623740+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.624008+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.624228+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.624388+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.624534+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.624702+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.624998+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.625226+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.625422+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.625546+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.625662+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.625787+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.625950+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.626141+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.626274+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.626413+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.626563+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.626780+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.626956+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.627185+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.627375+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:44:14.627511+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-28T15:44:14.627626+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-28T15:44:36.241188+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.287881+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.288203+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.290690+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.291072+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.293317+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.293663+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.295860+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.298830+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.299335+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'email_1': 'test_1766936674.197126@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.302415+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "detected 'bcrypt' backend, version '4.0.1'", "module": "bcrypt", "function": "_load_backend_mixin", "line": 625, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.302693+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "'bcrypt' backend lacks $2$ support, enabling workaround", "module": "bcrypt", "function": "_finalize_backend_mixin", "line": 406, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.524499+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.524919+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'email': 'test_1766936674.197126@example.com', 'hashed_password': '$2b$12$xj7y9C8TMK1QU78uJ3Tygu6YSFYVRNlp1K92mOM6lm048ExaiELFq', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.527083+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.533462+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.534706+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.535019+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'pk_1': 15}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.537033+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 15, 'email': 'test_1766936674.197126@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.537242+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for auth.user_registered", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.537498+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.538401+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.538606+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 34, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.538841+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.572004+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.573530+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.573872+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'user_id_1': 15, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.577750+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.578281+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00065s] {'user_id': 15, 'name': None, 'email': 'test_1766936674.197126@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.581157+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.585477+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.586543+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.586899+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'pk_1': 15}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.588957+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 15, 'user_id': 15, 'email': 'test_1766936674.197126@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.589188+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Using existing event loop for user.profile_created", "module": "event_publisher", "function": "publish_event", "line": 24, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.589506+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.590508+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.591808+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.592342+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2936s ago] {'email_1': 'test_1766936674.197126@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.807807+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 15, 'email': 'test_1766936674.197126@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.808019+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for auth.user_logged_in", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.808287+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.809137+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.809370+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 30, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.811197+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.570s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.812252+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "39172c7e-f205-48f5-838b-8e717ba8b56f"}
{"timestamp": "2025-12-28T15:44:36.814599+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/login", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "da2c29fe-fd01-4ac5-ba39-54bc1307128c"}
{"timestamp": "2025-12-28T15:44:36.815426+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "da2c29fe-fd01-4ac5-ba39-54bc1307128c"}
{"timestamp": "2025-12-28T15:44:36.815626+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[0:8]", "module": "multipart", "function": "callback", "line": 625, "request_id": "da2c29fe-fd01-4ac5-ba39-54bc1307128c"}
{"timestamp": "2025-12-28T15:44:36.815768+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[9:45]", "module": "multipart", "function": "callback", "line": 625, "request_id": "da2c29fe-fd01-4ac5-ba39-54bc1307128c"}
{"timestamp": "2025-12-28T15:44:36.815903+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "da2c29fe-fd01-4ac5-ba39-54bc1307128c"}
{"timestamp": "2025-12-28T15:44:36.816038+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "da2c29fe-fd01-4ac5-ba39-54bc1307128c"}
{"timestamp": "2025-12-28T15:44:36.816189+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[46:54]", "module": "multipart", "function": "callback", "line": 625, "request_id": "da2c29fe-fd01-4ac5-ba39-54bc1307128c"}
{"timestamp": "2025-12-28T15:44:36.816337+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[55:73]", "module": "multipart", "function": "callback", "line": 625, "request_id": "da2c29fe-fd01-4ac5-ba39-54bc1307128c"}
{"timestamp": "2025-12-28T15:44:36.816682+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "da2c29fe-fd01-4ac5-ba39-54bc1307128c"}
{"timestamp": "2025-12-28T15:44:36.816796+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "da2c29fe-fd01-4ac5-ba39-54bc1307128c"}
{"timestamp": "2025-12-28T15:44:36.819231+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "da2c29fe-fd01-4ac5-ba39-54bc1307128c"}
{"timestamp": "2025-12-28T15:44:36.819849+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da2c29fe-fd01-4ac5-ba39-54bc1307128c"}
{"timestamp": "2025-12-28T15:44:36.820383+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.5216s ago] {'email_1': 'test_1766936674.197126@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da2c29fe-fd01-4ac5-ba39-54bc1307128c"}
{"timestamp": "2025-12-28T15:44:37.026403+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 15, 'email': 'test_1766936674.197126@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "da2c29fe-fd01-4ac5-ba39-54bc1307128c"}
{"timestamp": "2025-12-28T15:44:37.026700+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for auth.user_logged_in", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "da2c29fe-fd01-4ac5-ba39-54bc1307128c"}
{"timestamp": "2025-12-28T15:44:37.026933+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "da2c29fe-fd01-4ac5-ba39-54bc1307128c"}
{"timestamp": "2025-12-28T15:44:37.027683+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "da2c29fe-fd01-4ac5-ba39-54bc1307128c"}
{"timestamp": "2025-12-28T15:44:37.027909+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 30, "request_id": "da2c29fe-fd01-4ac5-ba39-54bc1307128c"}
{"timestamp": "2025-12-28T15:44:37.029095+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/login \u2192 200 (0.215s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "da2c29fe-fd01-4ac5-ba39-54bc1307128c"}
{"timestamp": "2025-12-28T15:44:37.030242+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "da2c29fe-fd01-4ac5-ba39-54bc1307128c"}
{"timestamp": "2025-12-28T15:44:37.031690+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /profiles/me", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "e5ae878c-fbf0-4475-a242-1f1e1337003e"}
{"timestamp": "2025-12-28T15:44:37.034540+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e5ae878c-fbf0-4475-a242-1f1e1337003e"}
{"timestamp": "2025-12-28T15:44:37.035688+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e5ae878c-fbf0-4475-a242-1f1e1337003e"}
{"timestamp": "2025-12-28T15:44:37.036184+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00062s] {'pk_1': 15}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e5ae878c-fbf0-4475-a242-1f1e1337003e"}
{"timestamp": "2025-12-28T15:44:37.039570+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e5ae878c-fbf0-4475-a242-1f1e1337003e"}
{"timestamp": "2025-12-28T15:44:37.039981+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.4666s ago] {'user_id_1': 15, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e5ae878c-fbf0-4475-a242-1f1e1337003e"}
{"timestamp": "2025-12-28T15:44:37.042669+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /profiles/me \u2192 200 (0.011s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "e5ae878c-fbf0-4475-a242-1f1e1337003e"}
{"timestamp": "2025-12-28T15:44:37.043605+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "e5ae878c-fbf0-4475-a242-1f1e1337003e"}
{"timestamp": "2025-12-28T15:44:37.046771+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "a79f8b71-aa42-4390-8741-556e51d14647"}
{"timestamp": "2025-12-28T15:44:37.049743+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a79f8b71-aa42-4390-8741-556e51d14647"}
{"timestamp": "2025-12-28T15:44:37.051415+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a79f8b71-aa42-4390-8741-556e51d14647"}
{"timestamp": "2025-12-28T15:44:37.052042+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00064s] {'title_1': 'The Matrix Reloaded 1766936677.044419'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a79f8b71-aa42-4390-8741-556e51d14647"}
{"timestamp": "2025-12-28T15:44:37.055563+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a79f8b71-aa42-4390-8741-556e51d14647"}
{"timestamp": "2025-12-28T15:44:37.055859+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'title': 'The Matrix Reloaded 1766936677.044419', 'description': 'Test movie: The Matrix Reloaded 1766936677.044419', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a79f8b71-aa42-4390-8741-556e51d14647"}
{"timestamp": "2025-12-28T15:44:37.057639+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "a79f8b71-aa42-4390-8741-556e51d14647"}
{"timestamp": "2025-12-28T15:44:37.062399+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a79f8b71-aa42-4390-8741-556e51d14647"}
{"timestamp": "2025-12-28T15:44:37.063345+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a79f8b71-aa42-4390-8741-556e51d14647"}
{"timestamp": "2025-12-28T15:44:37.063600+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00041s] {'pk_1': 12}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a79f8b71-aa42-4390-8741-556e51d14647"}
{"timestamp": "2025-12-28T15:44:37.065869+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 12}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "a79f8b71-aa42-4390-8741-556e51d14647"}
{"timestamp": "2025-12-28T15:44:37.066368+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for movie.created", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "a79f8b71-aa42-4390-8741-556e51d14647"}
{"timestamp": "2025-12-28T15:44:37.066707+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "a79f8b71-aa42-4390-8741-556e51d14647"}
{"timestamp": "2025-12-28T15:44:37.067543+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "a79f8b71-aa42-4390-8741-556e51d14647"}
{"timestamp": "2025-12-28T15:44:37.067773+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "a79f8b71-aa42-4390-8741-556e51d14647"}
{"timestamp": "2025-12-28T15:44:37.068904+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "a79f8b71-aa42-4390-8741-556e51d14647"}
{"timestamp": "2025-12-28T15:44:37.069664+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a79f8b71-aa42-4390-8741-556e51d14647"}
{"timestamp": "2025-12-28T15:44:37.071369+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "a1381164-d906-47b2-af22-81efd785e7ea"}
{"timestamp": "2025-12-28T15:44:37.073603+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a1381164-d906-47b2-af22-81efd785e7ea"}
{"timestamp": "2025-12-28T15:44:37.074743+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a1381164-d906-47b2-af22-81efd785e7ea"}
{"timestamp": "2025-12-28T15:44:37.075057+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00041s] {'name_1': 'Standard Layout 1766936677.069991'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a1381164-d906-47b2-af22-81efd785e7ea"}
{"timestamp": "2025-12-28T15:44:37.078327+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a1381164-d906-47b2-af22-81efd785e7ea"}
{"timestamp": "2025-12-28T15:44:37.078642+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'name': 'Standard Layout 1766936677.069991', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a1381164-d906-47b2-af22-81efd785e7ea"}
{"timestamp": "2025-12-28T15:44:37.080866+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "a1381164-d906-47b2-af22-81efd785e7ea"}
{"timestamp": "2025-12-28T15:44:37.085065+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a1381164-d906-47b2-af22-81efd785e7ea"}
{"timestamp": "2025-12-28T15:44:37.085911+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a1381164-d906-47b2-af22-81efd785e7ea"}
{"timestamp": "2025-12-28T15:44:37.086238+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00038s] {'pk_1': 11}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a1381164-d906-47b2-af22-81efd785e7ea"}
{"timestamp": "2025-12-28T15:44:37.088245+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 11}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "a1381164-d906-47b2-af22-81efd785e7ea"}
{"timestamp": "2025-12-28T15:44:37.088420+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for screen.layout_created", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "a1381164-d906-47b2-af22-81efd785e7ea"}
{"timestamp": "2025-12-28T15:44:37.088586+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "a1381164-d906-47b2-af22-81efd785e7ea"}
{"timestamp": "2025-12-28T15:44:37.089281+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "a1381164-d906-47b2-af22-81efd785e7ea"}
{"timestamp": "2025-12-28T15:44:37.089444+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "a1381164-d906-47b2-af22-81efd785e7ea"}
{"timestamp": "2025-12-28T15:44:37.090466+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.019s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "a1381164-d906-47b2-af22-81efd785e7ea"}
{"timestamp": "2025-12-28T15:44:37.091274+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a1381164-d906-47b2-af22-81efd785e7ea"}
{"timestamp": "2025-12-28T15:44:37.097646+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "77e60613-6649-4353-b59a-8f954e05fad6"}
{"timestamp": "2025-12-28T15:44:37.100385+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "77e60613-6649-4353-b59a-8f954e05fad6"}
{"timestamp": "2025-12-28T15:44:37.101704+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "77e60613-6649-4353-b59a-8f954e05fad6"}
{"timestamp": "2025-12-28T15:44:37.102181+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'name_1': 'Screen 1 1766936677.091215', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "77e60613-6649-4353-b59a-8f954e05fad6"}
{"timestamp": "2025-12-28T15:44:37.105131+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "77e60613-6649-4353-b59a-8f954e05fad6"}
{"timestamp": "2025-12-28T15:44:37.105478+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'id_1': 11, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "77e60613-6649-4353-b59a-8f954e05fad6"}
{"timestamp": "2025-12-28T15:44:37.107926+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "77e60613-6649-4353-b59a-8f954e05fad6"}
{"timestamp": "2025-12-28T15:44:37.108294+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'name': 'Screen 1 1766936677.091215', 'capacity': 150, 'seat_layout_id': 11}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "77e60613-6649-4353-b59a-8f954e05fad6"}
{"timestamp": "2025-12-28T15:44:37.110401+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "77e60613-6649-4353-b59a-8f954e05fad6"}
{"timestamp": "2025-12-28T15:44:37.114863+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "77e60613-6649-4353-b59a-8f954e05fad6"}
{"timestamp": "2025-12-28T15:44:37.115798+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "77e60613-6649-4353-b59a-8f954e05fad6"}
{"timestamp": "2025-12-28T15:44:37.116061+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00041s] {'pk_1': 11}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "77e60613-6649-4353-b59a-8f954e05fad6"}
{"timestamp": "2025-12-28T15:44:37.118158+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 11}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "77e60613-6649-4353-b59a-8f954e05fad6"}
{"timestamp": "2025-12-28T15:44:37.118341+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for screen.created", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "77e60613-6649-4353-b59a-8f954e05fad6"}
{"timestamp": "2025-12-28T15:44:37.118493+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "77e60613-6649-4353-b59a-8f954e05fad6"}
{"timestamp": "2025-12-28T15:44:37.119199+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "77e60613-6649-4353-b59a-8f954e05fad6"}
{"timestamp": "2025-12-28T15:44:37.119384+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "77e60613-6649-4353-b59a-8f954e05fad6"}
{"timestamp": "2025-12-28T15:44:37.120537+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.023s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "77e60613-6649-4353-b59a-8f954e05fad6"}
{"timestamp": "2025-12-28T15:44:37.121549+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "77e60613-6649-4353-b59a-8f954e05fad6"}
{"timestamp": "2025-12-28T15:44:37.123307+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "14df6f5d-b9f4-4eef-b6db-92eddd9985cc"}
{"timestamp": "2025-12-28T15:44:37.126227+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "14df6f5d-b9f4-4eef-b6db-92eddd9985cc"}
{"timestamp": "2025-12-28T15:44:37.127261+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "14df6f5d-b9f4-4eef-b6db-92eddd9985cc"}
{"timestamp": "2025-12-28T15:44:37.127626+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00043s] {'pk_1': 12}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "14df6f5d-b9f4-4eef-b6db-92eddd9985cc"}
{"timestamp": "2025-12-28T15:44:37.130723+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "14df6f5d-b9f4-4eef-b6db-92eddd9985cc"}
{"timestamp": "2025-12-28T15:44:37.131055+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'pk_1': 11}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "14df6f5d-b9f4-4eef-b6db-92eddd9985cc"}
{"timestamp": "2025-12-28T15:44:37.133892+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "14df6f5d-b9f4-4eef-b6db-92eddd9985cc"}
{"timestamp": "2025-12-28T15:44:37.134487+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'screen_id_1': 11, 'start_time_1': datetime.datetime(2025, 12, 29, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 29, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "14df6f5d-b9f4-4eef-b6db-92eddd9985cc"}
{"timestamp": "2025-12-28T15:44:37.137561+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "14df6f5d-b9f4-4eef-b6db-92eddd9985cc"}
{"timestamp": "2025-12-28T15:44:37.137922+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'start_time': datetime.datetime(2025, 12, 29, 19, 0), 'end_time': datetime.datetime(2025, 12, 29, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 12, 'screen_id': 11}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "14df6f5d-b9f4-4eef-b6db-92eddd9985cc"}
{"timestamp": "2025-12-28T15:44:37.141281+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "14df6f5d-b9f4-4eef-b6db-92eddd9985cc"}
{"timestamp": "2025-12-28T15:44:37.146383+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "14df6f5d-b9f4-4eef-b6db-92eddd9985cc"}
{"timestamp": "2025-12-28T15:44:37.147546+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "14df6f5d-b9f4-4eef-b6db-92eddd9985cc"}
{"timestamp": "2025-12-28T15:44:37.147959+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'pk_1': 8}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "14df6f5d-b9f4-4eef-b6db-92eddd9985cc"}
{"timestamp": "2025-12-28T15:44:37.153277+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "14df6f5d-b9f4-4eef-b6db-92eddd9985cc"}
{"timestamp": "2025-12-28T15:44:37.153820+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00083s] {'pk_1': 12}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "14df6f5d-b9f4-4eef-b6db-92eddd9985cc"}
{"timestamp": "2025-12-28T15:44:37.157435+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "14df6f5d-b9f4-4eef-b6db-92eddd9985cc"}
{"timestamp": "2025-12-28T15:44:37.157987+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00078s] {'pk_1': 11}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "14df6f5d-b9f4-4eef-b6db-92eddd9985cc"}
{"timestamp": "2025-12-28T15:44:37.159629+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 8}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "14df6f5d-b9f4-4eef-b6db-92eddd9985cc"}
{"timestamp": "2025-12-28T15:44:37.159865+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for showtime.created", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "14df6f5d-b9f4-4eef-b6db-92eddd9985cc"}
{"timestamp": "2025-12-28T15:44:37.160102+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "14df6f5d-b9f4-4eef-b6db-92eddd9985cc"}
{"timestamp": "2025-12-28T15:44:37.161025+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "14df6f5d-b9f4-4eef-b6db-92eddd9985cc"}
{"timestamp": "2025-12-28T15:44:37.161252+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "14df6f5d-b9f4-4eef-b6db-92eddd9985cc"}
{"timestamp": "2025-12-28T15:44:37.163085+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.040s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "14df6f5d-b9f4-4eef-b6db-92eddd9985cc"}
{"timestamp": "2025-12-28T15:44:37.164125+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "14df6f5d-b9f4-4eef-b6db-92eddd9985cc"}
{"timestamp": "2025-12-28T15:44:37.165989+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /seatavailability/grid/8", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "4febebde-0792-4b53-9151-072e62ae6eed"}
{"timestamp": "2025-12-28T15:44:37.168208+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "4febebde-0792-4b53-9151-072e62ae6eed"}
{"timestamp": "2025-12-28T15:44:37.169637+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4febebde-0792-4b53-9151-072e62ae6eed"}
{"timestamp": "2025-12-28T15:44:37.170037+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'showtime_id_1': 8}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4febebde-0792-4b53-9151-072e62ae6eed"}
{"timestamp": "2025-12-28T15:44:37.173490+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /seatavailability/grid/8 \u2192 200 (0.007s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "4febebde-0792-4b53-9151-072e62ae6eed"}
{"timestamp": "2025-12-28T15:44:37.174731+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "4febebde-0792-4b53-9151-072e62ae6eed"}
{"timestamp": "2025-12-28T15:44:37.176404+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.179257+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.180076+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.180588+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.1451s ago] {'pk_1': 15}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.184273+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.184865+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'user_id': 15, 'showtime_id': 8, 'seat_code': 'R5-8', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 28, 15, 44, 37, 183888, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 28, 15, 54, 37, 182891, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.187600+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.192336+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.193553+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.193884+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'pk_1': 7}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.196192+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 7, 'user_id': 15, 'showtime_id': 8, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.196401+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for reservation.created", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.196602+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.197381+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.197629+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.197833+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.198127+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.198415+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.200049+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.201221+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.201514+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'showtime_id_1': 8, 'seat_code_1': 'R5-8', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.205338+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.205714+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00043s] {'seat_code': 'R5-8', 'showtime_id': 8, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.208647+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.208971+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00043s] {'status': 'LOCKED', 'locked_by_user_id': 15, 'lock_expires_at': datetime.datetime(2025, 12, 28, 15, 54, 37, 207599, tzinfo=datetime.timezone.utc), 'seat_locks_id': 4}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.210540+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.214824+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.215833+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.216197+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'pk_1': 4}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.218970+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 8, 'seat_code': 'R5-8', 'user_id': 15, 'expires_at': '2025-12-28T15:54:37.207599+00:00'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.219191+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Using existing event loop for seat.locked", "module": "event_publisher", "function": "publish_event", "line": 24, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.219469+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.220528+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.220766+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.220943+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 7, 'user_id': 15, 'showtime_id': 8, 'seat_code': 'R5-8'}", "module": "handlers", "function": "on_reservation_created", "line": 21, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.221214+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 7", "module": "handlers", "function": "on_reservation_created", "line": 33, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.222604+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.223676+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.223963+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00038s] {'user_id': 15, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 7}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.226499+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.230390+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.231384+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.231639+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00038s] {'pk_1': 7}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.234056+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 7, 'reservation_id': 7, 'user_id': 15, 'showtime_id': 8, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.234370+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Using existing event loop for order.created", "module": "event_publisher", "function": "publish_event", "line": 24, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.234523+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 7", "module": "handlers", "function": "on_reservation_created", "line": 41, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.234754+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.235734+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.235919+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.237200+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.238379+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.238808+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'actor_id': 15, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 7, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 7, \"user_id\": 15, \"showtime_id\": 8, \"seat_code\": \"R5-8\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 28, 15, 44, 37, 238087, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.241065+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.244965+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.246154+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.246567+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'pk_1': 7}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.249736+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.251043+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.252617+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.076s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.253805+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a5d86613-ca9e-4015-b6ac-48bd036b6ac7"}
{"timestamp": "2025-12-28T15:44:37.255342+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "6bc155eb-7042-44a6-aa2f-720d4ae61044"}
{"timestamp": "2025-12-28T15:44:37.257655+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6bc155eb-7042-44a6-aa2f-720d4ae61044"}
{"timestamp": "2025-12-28T15:44:37.258271+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6bc155eb-7042-44a6-aa2f-720d4ae61044"}
{"timestamp": "2025-12-28T15:44:37.258590+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2232s ago] {'pk_1': 15}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6bc155eb-7042-44a6-aa2f-720d4ae61044"}
{"timestamp": "2025-12-28T15:44:37.262229+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6bc155eb-7042-44a6-aa2f-720d4ae61044"}
{"timestamp": "2025-12-28T15:44:37.262652+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'user_id_1': 15}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6bc155eb-7042-44a6-aa2f-720d4ae61044"}
{"timestamp": "2025-12-28T15:44:37.264974+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.010s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "6bc155eb-7042-44a6-aa2f-720d4ae61044"}
{"timestamp": "2025-12-28T15:44:37.265739+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6bc155eb-7042-44a6-aa2f-720d4ae61044"}
{"timestamp": "2025-12-28T15:44:37.267482+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /payments/order/7", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "7629173c-6128-4499-bd82-9febbf89b0c2"}
{"timestamp": "2025-12-28T15:44:37.269763+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7629173c-6128-4499-bd82-9febbf89b0c2"}
{"timestamp": "2025-12-28T15:44:37.271135+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.order_id = %(order_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7629173c-6128-4499-bd82-9febbf89b0c2"}
{"timestamp": "2025-12-28T15:44:37.271407+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'order_id_1': 7}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7629173c-6128-4499-bd82-9febbf89b0c2"}
{"timestamp": "2025-12-28T15:44:37.273907+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /payments/order/7 \u2192 200 (0.006s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "7629173c-6128-4499-bd82-9febbf89b0c2"}
{"timestamp": "2025-12-28T15:44:37.274663+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "7629173c-6128-4499-bd82-9febbf89b0c2"}
{"timestamp": "2025-12-28T15:47:59.322895+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-28T15:48:01.653606+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-28T15:48:01.654443+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-28T15:48:01.654807+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.655184+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.655500+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.655788+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.656181+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.656676+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.657075+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.657461+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.657998+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.658406+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.658920+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.659343+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.659787+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.660117+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.660379+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.660804+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.661166+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.661464+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.661810+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.662176+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.662545+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.662892+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.664293+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.665050+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.665495+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.665874+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.666279+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.666840+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.667243+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.667800+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.668699+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.669236+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.669701+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.670082+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.670468+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.670762+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.671091+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.671403+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.671758+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.672154+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.672522+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.672842+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.673177+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.673515+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.673869+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.674266+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.674675+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.675111+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.675453+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.676210+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.676621+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.677050+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.677472+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.677804+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.678191+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.678532+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.679944+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.680497+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.680971+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.681373+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:48:01.681854+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-28T15:48:01.682331+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-28T15:48:10.038700+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.096614+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.097097+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.099622+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.100251+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.102505+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.102846+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.105026+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.107789+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.108222+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00063s] {'email_1': 'test_1766936887.98042@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.111721+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "detected 'bcrypt' backend, version '4.0.1'", "module": "bcrypt", "function": "_load_backend_mixin", "line": 625, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.112058+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "'bcrypt' backend lacks $2$ support, enabling workaround", "module": "bcrypt", "function": "_finalize_backend_mixin", "line": 406, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.335374+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.335837+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00064s] {'email': 'test_1766936887.98042@example.com', 'hashed_password': '$2b$12$biuZlNxX4gxFSQfRDGZPlu6QNRZigAMZNUlgtWd.aKq4lgl5E3eLK', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.337889+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.342626+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.344073+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.344520+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'pk_1': 16}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.346681+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 16, 'email': 'test_1766936887.98042@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.346906+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for auth.user_registered", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.347197+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.347994+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.348240+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 34, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.348530+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.384363+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.385951+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.386363+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'user_id_1': 16, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.390058+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.390468+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'user_id': 16, 'name': None, 'email': 'test_1766936887.98042@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.394009+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.398913+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.400030+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.400415+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'pk_1': 16}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.402603+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 16, 'user_id': 16, 'email': 'test_1766936887.98042@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.402905+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Using existing event loop for user.profile_created", "module": "event_publisher", "function": "publish_event", "line": 24, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.403305+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.404395+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.405816+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.406337+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2987s ago] {'email_1': 'test_1766936887.98042@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.617325+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 16, 'email': 'test_1766936887.98042@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.617553+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for auth.user_logged_in", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.617791+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.618603+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.618867+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 30, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.620198+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.582s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.621154+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c6d7c7e3-3a35-462a-8bcf-93355d924e5b"}
{"timestamp": "2025-12-28T15:48:10.623031+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/login", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "32ad1bb5-0280-415e-bb4d-d5bfdac2bfcb"}
{"timestamp": "2025-12-28T15:48:10.623961+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "32ad1bb5-0280-415e-bb4d-d5bfdac2bfcb"}
{"timestamp": "2025-12-28T15:48:10.624236+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[0:8]", "module": "multipart", "function": "callback", "line": 625, "request_id": "32ad1bb5-0280-415e-bb4d-d5bfdac2bfcb"}
{"timestamp": "2025-12-28T15:48:10.624505+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[9:44]", "module": "multipart", "function": "callback", "line": 625, "request_id": "32ad1bb5-0280-415e-bb4d-d5bfdac2bfcb"}
{"timestamp": "2025-12-28T15:48:10.624718+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "32ad1bb5-0280-415e-bb4d-d5bfdac2bfcb"}
{"timestamp": "2025-12-28T15:48:10.624865+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "32ad1bb5-0280-415e-bb4d-d5bfdac2bfcb"}
{"timestamp": "2025-12-28T15:48:10.624992+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[45:53]", "module": "multipart", "function": "callback", "line": 625, "request_id": "32ad1bb5-0280-415e-bb4d-d5bfdac2bfcb"}
{"timestamp": "2025-12-28T15:48:10.625121+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[54:72]", "module": "multipart", "function": "callback", "line": 625, "request_id": "32ad1bb5-0280-415e-bb4d-d5bfdac2bfcb"}
{"timestamp": "2025-12-28T15:48:10.625462+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "32ad1bb5-0280-415e-bb4d-d5bfdac2bfcb"}
{"timestamp": "2025-12-28T15:48:10.625594+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "32ad1bb5-0280-415e-bb4d-d5bfdac2bfcb"}
{"timestamp": "2025-12-28T15:48:10.629092+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "32ad1bb5-0280-415e-bb4d-d5bfdac2bfcb"}
{"timestamp": "2025-12-28T15:48:10.629836+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32ad1bb5-0280-415e-bb4d-d5bfdac2bfcb"}
{"timestamp": "2025-12-28T15:48:10.630179+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.5227s ago] {'email_1': 'test_1766936887.98042@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32ad1bb5-0280-415e-bb4d-d5bfdac2bfcb"}
{"timestamp": "2025-12-28T15:48:10.835586+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 16, 'email': 'test_1766936887.98042@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "32ad1bb5-0280-415e-bb4d-d5bfdac2bfcb"}
{"timestamp": "2025-12-28T15:48:10.835835+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for auth.user_logged_in", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "32ad1bb5-0280-415e-bb4d-d5bfdac2bfcb"}
{"timestamp": "2025-12-28T15:48:10.836140+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "32ad1bb5-0280-415e-bb4d-d5bfdac2bfcb"}
{"timestamp": "2025-12-28T15:48:10.836956+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "32ad1bb5-0280-415e-bb4d-d5bfdac2bfcb"}
{"timestamp": "2025-12-28T15:48:10.837144+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 30, "request_id": "32ad1bb5-0280-415e-bb4d-d5bfdac2bfcb"}
{"timestamp": "2025-12-28T15:48:10.838107+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/login \u2192 200 (0.215s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "32ad1bb5-0280-415e-bb4d-d5bfdac2bfcb"}
{"timestamp": "2025-12-28T15:48:10.838988+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "32ad1bb5-0280-415e-bb4d-d5bfdac2bfcb"}
{"timestamp": "2025-12-28T15:48:10.840371+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /profiles/me", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "f82a2599-58bf-444e-8c1e-a99b2b374269"}
{"timestamp": "2025-12-28T15:48:10.843165+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f82a2599-58bf-444e-8c1e-a99b2b374269"}
{"timestamp": "2025-12-28T15:48:10.844101+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f82a2599-58bf-444e-8c1e-a99b2b374269"}
{"timestamp": "2025-12-28T15:48:10.844493+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00042s] {'pk_1': 16}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f82a2599-58bf-444e-8c1e-a99b2b374269"}
{"timestamp": "2025-12-28T15:48:10.847717+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f82a2599-58bf-444e-8c1e-a99b2b374269"}
{"timestamp": "2025-12-28T15:48:10.848126+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.4623s ago] {'user_id_1': 16, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f82a2599-58bf-444e-8c1e-a99b2b374269"}
{"timestamp": "2025-12-28T15:48:10.850964+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /profiles/me \u2192 200 (0.011s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "f82a2599-58bf-444e-8c1e-a99b2b374269"}
{"timestamp": "2025-12-28T15:48:10.851934+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f82a2599-58bf-444e-8c1e-a99b2b374269"}
{"timestamp": "2025-12-28T15:48:10.854076+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "6fb7ed80-a1ab-4c81-8be6-56c447446f47"}
{"timestamp": "2025-12-28T15:48:10.857042+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6fb7ed80-a1ab-4c81-8be6-56c447446f47"}
{"timestamp": "2025-12-28T15:48:10.858902+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6fb7ed80-a1ab-4c81-8be6-56c447446f47"}
{"timestamp": "2025-12-28T15:48:10.859510+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00067s] {'title_1': 'The Matrix Reloaded 1766936890.852429'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6fb7ed80-a1ab-4c81-8be6-56c447446f47"}
{"timestamp": "2025-12-28T15:48:10.863335+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6fb7ed80-a1ab-4c81-8be6-56c447446f47"}
{"timestamp": "2025-12-28T15:48:10.863822+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'title': 'The Matrix Reloaded 1766936890.852429', 'description': 'Test movie: The Matrix Reloaded 1766936890.852429', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6fb7ed80-a1ab-4c81-8be6-56c447446f47"}
{"timestamp": "2025-12-28T15:48:10.865630+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6fb7ed80-a1ab-4c81-8be6-56c447446f47"}
{"timestamp": "2025-12-28T15:48:10.869642+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6fb7ed80-a1ab-4c81-8be6-56c447446f47"}
{"timestamp": "2025-12-28T15:48:10.870700+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6fb7ed80-a1ab-4c81-8be6-56c447446f47"}
{"timestamp": "2025-12-28T15:48:10.871069+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'pk_1': 13}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6fb7ed80-a1ab-4c81-8be6-56c447446f47"}
{"timestamp": "2025-12-28T15:48:10.873241+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 13}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "6fb7ed80-a1ab-4c81-8be6-56c447446f47"}
{"timestamp": "2025-12-28T15:48:10.873430+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for movie.created", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "6fb7ed80-a1ab-4c81-8be6-56c447446f47"}
{"timestamp": "2025-12-28T15:48:10.873614+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "6fb7ed80-a1ab-4c81-8be6-56c447446f47"}
{"timestamp": "2025-12-28T15:48:10.874400+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "6fb7ed80-a1ab-4c81-8be6-56c447446f47"}
{"timestamp": "2025-12-28T15:48:10.874573+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "6fb7ed80-a1ab-4c81-8be6-56c447446f47"}
{"timestamp": "2025-12-28T15:48:10.875920+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "6fb7ed80-a1ab-4c81-8be6-56c447446f47"}
{"timestamp": "2025-12-28T15:48:10.876980+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6fb7ed80-a1ab-4c81-8be6-56c447446f47"}
{"timestamp": "2025-12-28T15:48:10.878474+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "294035f3-8f76-4751-8fed-25cea7e988d9"}
{"timestamp": "2025-12-28T15:48:10.880893+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "294035f3-8f76-4751-8fed-25cea7e988d9"}
{"timestamp": "2025-12-28T15:48:10.882139+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "294035f3-8f76-4751-8fed-25cea7e988d9"}
{"timestamp": "2025-12-28T15:48:10.882551+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'name_1': 'Standard Layout 1766936890.877057'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "294035f3-8f76-4751-8fed-25cea7e988d9"}
{"timestamp": "2025-12-28T15:48:10.885374+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "294035f3-8f76-4751-8fed-25cea7e988d9"}
{"timestamp": "2025-12-28T15:48:10.885690+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'name': 'Standard Layout 1766936890.877057', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "294035f3-8f76-4751-8fed-25cea7e988d9"}
{"timestamp": "2025-12-28T15:48:10.887352+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "294035f3-8f76-4751-8fed-25cea7e988d9"}
{"timestamp": "2025-12-28T15:48:10.891816+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "294035f3-8f76-4751-8fed-25cea7e988d9"}
{"timestamp": "2025-12-28T15:48:10.893602+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "294035f3-8f76-4751-8fed-25cea7e988d9"}
{"timestamp": "2025-12-28T15:48:10.894019+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'pk_1': 12}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "294035f3-8f76-4751-8fed-25cea7e988d9"}
{"timestamp": "2025-12-28T15:48:10.896409+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 12}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "294035f3-8f76-4751-8fed-25cea7e988d9"}
{"timestamp": "2025-12-28T15:48:10.896667+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for screen.layout_created", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "294035f3-8f76-4751-8fed-25cea7e988d9"}
{"timestamp": "2025-12-28T15:48:10.896951+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "294035f3-8f76-4751-8fed-25cea7e988d9"}
{"timestamp": "2025-12-28T15:48:10.897748+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "294035f3-8f76-4751-8fed-25cea7e988d9"}
{"timestamp": "2025-12-28T15:48:10.897992+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "294035f3-8f76-4751-8fed-25cea7e988d9"}
{"timestamp": "2025-12-28T15:48:10.899350+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.021s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "294035f3-8f76-4751-8fed-25cea7e988d9"}
{"timestamp": "2025-12-28T15:48:10.900266+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "294035f3-8f76-4751-8fed-25cea7e988d9"}
{"timestamp": "2025-12-28T15:48:10.905059+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "39500c27-37bb-4d5f-8098-e5579d2dd0c0"}
{"timestamp": "2025-12-28T15:48:10.908100+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "39500c27-37bb-4d5f-8098-e5579d2dd0c0"}
{"timestamp": "2025-12-28T15:48:10.909376+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "39500c27-37bb-4d5f-8098-e5579d2dd0c0"}
{"timestamp": "2025-12-28T15:48:10.909703+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'name_1': 'Screen 1 1766936890.900056', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "39500c27-37bb-4d5f-8098-e5579d2dd0c0"}
{"timestamp": "2025-12-28T15:48:10.912674+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "39500c27-37bb-4d5f-8098-e5579d2dd0c0"}
{"timestamp": "2025-12-28T15:48:10.912976+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'id_1': 12, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "39500c27-37bb-4d5f-8098-e5579d2dd0c0"}
{"timestamp": "2025-12-28T15:48:10.915176+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "39500c27-37bb-4d5f-8098-e5579d2dd0c0"}
{"timestamp": "2025-12-28T15:48:10.915461+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00041s] {'name': 'Screen 1 1766936890.900056', 'capacity': 150, 'seat_layout_id': 12}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "39500c27-37bb-4d5f-8098-e5579d2dd0c0"}
{"timestamp": "2025-12-28T15:48:10.917224+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "39500c27-37bb-4d5f-8098-e5579d2dd0c0"}
{"timestamp": "2025-12-28T15:48:10.921648+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "39500c27-37bb-4d5f-8098-e5579d2dd0c0"}
{"timestamp": "2025-12-28T15:48:10.923018+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "39500c27-37bb-4d5f-8098-e5579d2dd0c0"}
{"timestamp": "2025-12-28T15:48:10.923417+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'pk_1': 12}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "39500c27-37bb-4d5f-8098-e5579d2dd0c0"}
{"timestamp": "2025-12-28T15:48:10.925736+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 12}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "39500c27-37bb-4d5f-8098-e5579d2dd0c0"}
{"timestamp": "2025-12-28T15:48:10.925970+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for screen.created", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "39500c27-37bb-4d5f-8098-e5579d2dd0c0"}
{"timestamp": "2025-12-28T15:48:10.926230+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "39500c27-37bb-4d5f-8098-e5579d2dd0c0"}
{"timestamp": "2025-12-28T15:48:10.927250+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "39500c27-37bb-4d5f-8098-e5579d2dd0c0"}
{"timestamp": "2025-12-28T15:48:10.927584+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "39500c27-37bb-4d5f-8098-e5579d2dd0c0"}
{"timestamp": "2025-12-28T15:48:10.928908+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.024s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "39500c27-37bb-4d5f-8098-e5579d2dd0c0"}
{"timestamp": "2025-12-28T15:48:10.929900+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "39500c27-37bb-4d5f-8098-e5579d2dd0c0"}
{"timestamp": "2025-12-28T15:48:10.931845+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "13d8ad7b-2647-4241-88ea-bba836c3c184"}
{"timestamp": "2025-12-28T15:48:10.934658+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "13d8ad7b-2647-4241-88ea-bba836c3c184"}
{"timestamp": "2025-12-28T15:48:10.935944+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "13d8ad7b-2647-4241-88ea-bba836c3c184"}
{"timestamp": "2025-12-28T15:48:10.936238+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'pk_1': 13}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "13d8ad7b-2647-4241-88ea-bba836c3c184"}
{"timestamp": "2025-12-28T15:48:10.939225+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "13d8ad7b-2647-4241-88ea-bba836c3c184"}
{"timestamp": "2025-12-28T15:48:10.939668+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'pk_1': 12}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "13d8ad7b-2647-4241-88ea-bba836c3c184"}
{"timestamp": "2025-12-28T15:48:10.942798+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "13d8ad7b-2647-4241-88ea-bba836c3c184"}
{"timestamp": "2025-12-28T15:48:10.943170+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'screen_id_1': 12, 'start_time_1': datetime.datetime(2025, 12, 29, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 29, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "13d8ad7b-2647-4241-88ea-bba836c3c184"}
{"timestamp": "2025-12-28T15:48:10.945898+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "13d8ad7b-2647-4241-88ea-bba836c3c184"}
{"timestamp": "2025-12-28T15:48:10.946235+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'start_time': datetime.datetime(2025, 12, 29, 19, 0), 'end_time': datetime.datetime(2025, 12, 29, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 13, 'screen_id': 12}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "13d8ad7b-2647-4241-88ea-bba836c3c184"}
{"timestamp": "2025-12-28T15:48:10.948354+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "13d8ad7b-2647-4241-88ea-bba836c3c184"}
{"timestamp": "2025-12-28T15:48:10.952501+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "13d8ad7b-2647-4241-88ea-bba836c3c184"}
{"timestamp": "2025-12-28T15:48:10.953539+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "13d8ad7b-2647-4241-88ea-bba836c3c184"}
{"timestamp": "2025-12-28T15:48:10.953928+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'pk_1': 9}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "13d8ad7b-2647-4241-88ea-bba836c3c184"}
{"timestamp": "2025-12-28T15:48:10.957808+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "13d8ad7b-2647-4241-88ea-bba836c3c184"}
{"timestamp": "2025-12-28T15:48:10.958128+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'pk_1': 13}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "13d8ad7b-2647-4241-88ea-bba836c3c184"}
{"timestamp": "2025-12-28T15:48:10.960320+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "13d8ad7b-2647-4241-88ea-bba836c3c184"}
{"timestamp": "2025-12-28T15:48:10.960653+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'pk_1': 12}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "13d8ad7b-2647-4241-88ea-bba836c3c184"}
{"timestamp": "2025-12-28T15:48:10.962442+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 9}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "13d8ad7b-2647-4241-88ea-bba836c3c184"}
{"timestamp": "2025-12-28T15:48:10.962702+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for showtime.created", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "13d8ad7b-2647-4241-88ea-bba836c3c184"}
{"timestamp": "2025-12-28T15:48:10.963003+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "13d8ad7b-2647-4241-88ea-bba836c3c184"}
{"timestamp": "2025-12-28T15:48:10.963933+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "13d8ad7b-2647-4241-88ea-bba836c3c184"}
{"timestamp": "2025-12-28T15:48:10.964130+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "13d8ad7b-2647-4241-88ea-bba836c3c184"}
{"timestamp": "2025-12-28T15:48:10.965196+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.033s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "13d8ad7b-2647-4241-88ea-bba836c3c184"}
{"timestamp": "2025-12-28T15:48:10.966045+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "13d8ad7b-2647-4241-88ea-bba836c3c184"}
{"timestamp": "2025-12-28T15:48:10.967814+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /seatavailability/grid/9", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "a11fbada-36ae-4a9c-9d48-c2266da7f5da"}
{"timestamp": "2025-12-28T15:48:10.970609+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a11fbada-36ae-4a9c-9d48-c2266da7f5da"}
{"timestamp": "2025-12-28T15:48:10.971989+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a11fbada-36ae-4a9c-9d48-c2266da7f5da"}
{"timestamp": "2025-12-28T15:48:10.972428+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'showtime_id_1': 9}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a11fbada-36ae-4a9c-9d48-c2266da7f5da"}
{"timestamp": "2025-12-28T15:48:10.975391+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /seatavailability/grid/9 \u2192 200 (0.008s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "a11fbada-36ae-4a9c-9d48-c2266da7f5da"}
{"timestamp": "2025-12-28T15:48:10.976305+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a11fbada-36ae-4a9c-9d48-c2266da7f5da"}
{"timestamp": "2025-12-28T15:48:10.978088+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:10.980488+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:10.981028+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:10.981532+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.1374s ago] {'pk_1': 16}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:10.985072+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:10.985531+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00077s] {'user_id': 16, 'showtime_id': 9, 'seat_code': 'R5-8', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 28, 15, 48, 10, 984528, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 28, 15, 58, 10, 983599, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:10.987808+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:10.992209+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:10.993390+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:10.993807+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'pk_1': 8}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:10.996434+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 8, 'user_id': 16, 'showtime_id': 9, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:10.996669+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for reservation.created", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:10.996897+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:10.997653+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:10.997843+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:10.997980+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:10.998109+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:10.998328+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:10.999995+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:11.001245+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:11.001702+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00063s] {'showtime_id_1': 9, 'seat_code_1': 'R5-8', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:11.005104+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:11.005453+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'seat_code': 'R5-8', 'showtime_id': 9, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:11.008106+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:11.008414+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00042s] {'status': 'LOCKED', 'locked_by_user_id': 16, 'lock_expires_at': datetime.datetime(2025, 12, 28, 15, 58, 11, 7086, tzinfo=datetime.timezone.utc), 'seat_locks_id': 5}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:11.010123+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:11.013912+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:11.014744+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:11.015068+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00039s] {'pk_1': 5}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:11.017852+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 9, 'seat_code': 'R5-8', 'user_id': 16, 'expires_at': '2025-12-28T15:58:11.007086+00:00'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:11.018087+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Using existing event loop for seat.locked", "module": "event_publisher", "function": "publish_event", "line": 24, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:11.018378+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:11.019520+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:11.019768+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:11.019939+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 8, 'user_id': 16, 'showtime_id': 9, 'seat_code': 'R5-8'}", "module": "handlers", "function": "on_reservation_created", "line": 21, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:11.020103+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 8", "module": "handlers", "function": "on_reservation_created", "line": 33, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:11.021529+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:11.022790+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:11.023114+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'user_id': 16, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 8}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:11.026156+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:11.030051+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:11.031154+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:11.031807+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00066s] {'pk_1': 8}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:11.034082+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 8, 'reservation_id': 8, 'user_id': 16, 'showtime_id': 9, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:11.034329+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Using existing event loop for order.created", "module": "event_publisher", "function": "publish_event", "line": 24, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:11.034532+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 8", "module": "handlers", "function": "on_reservation_created", "line": 41, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:11.034860+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:11.035918+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:11.036134+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:11.037680+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:11.039022+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:11.039537+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'actor_id': 16, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 8, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 8, \"user_id\": 16, \"showtime_id\": 9, \"seat_code\": \"R5-8\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 28, 15, 48, 11, 38607, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:11.041980+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:11.046129+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:11.047417+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:11.048017+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00067s] {'pk_1': 8}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:11.050547+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:11.051872+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:11.053321+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.075s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:11.054354+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "86058f75-2b4d-4471-b7a2-db9a9634aba5"}
{"timestamp": "2025-12-28T15:48:11.056291+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "9086299d-b3f3-42ef-8021-b741f7de5600"}
{"timestamp": "2025-12-28T15:48:11.059578+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9086299d-b3f3-42ef-8021-b741f7de5600"}
{"timestamp": "2025-12-28T15:48:11.060559+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9086299d-b3f3-42ef-8021-b741f7de5600"}
{"timestamp": "2025-12-28T15:48:11.060952+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2169s ago] {'pk_1': 16}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9086299d-b3f3-42ef-8021-b741f7de5600"}
{"timestamp": "2025-12-28T15:48:11.064665+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9086299d-b3f3-42ef-8021-b741f7de5600"}
{"timestamp": "2025-12-28T15:48:11.065184+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'user_id_1': 16}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9086299d-b3f3-42ef-8021-b741f7de5600"}
{"timestamp": "2025-12-28T15:48:11.067705+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.012s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "9086299d-b3f3-42ef-8021-b741f7de5600"}
{"timestamp": "2025-12-28T15:48:11.068657+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "9086299d-b3f3-42ef-8021-b741f7de5600"}
{"timestamp": "2025-12-28T15:48:11.070264+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/order/8/initiate", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "8592f135-584e-4cf5-9657-308f52b3cf3c"}
{"timestamp": "2025-12-28T15:48:11.073019+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8592f135-584e-4cf5-9657-308f52b3cf3c"}
{"timestamp": "2025-12-28T15:48:11.073676+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8592f135-584e-4cf5-9657-308f52b3cf3c"}
{"timestamp": "2025-12-28T15:48:11.074012+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.23s ago] {'pk_1': 16}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8592f135-584e-4cf5-9657-308f52b3cf3c"}
{"timestamp": "2025-12-28T15:48:11.077518+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO payment_attempts (order_id, amount_attempted, status, final_amount, failure_reason, provider_payment_id, created_at) VALUES (%(order_id)s, %(amount_attempted)s, %(status)s, %(final_amount)s, %(failure_reason)s, %(provider_payment_id)s, %(created_at)s) RETURNING payment_attempts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8592f135-584e-4cf5-9657-308f52b3cf3c"}
{"timestamp": "2025-12-28T15:48:11.078093+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'order_id': 8, 'amount_attempted': 10.0, 'status': 'PENDING', 'final_amount': 10.0, 'failure_reason': None, 'provider_payment_id': None, 'created_at': datetime.datetime(2025, 12, 28, 15, 48, 11, 77201, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8592f135-584e-4cf5-9657-308f52b3cf3c"}
{"timestamp": "2025-12-28T15:48:11.087247+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "8592f135-584e-4cf5-9657-308f52b3cf3c"}
{"timestamp": "2025-12-28T15:48:11.091820+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8592f135-584e-4cf5-9657-308f52b3cf3c"}
{"timestamp": "2025-12-28T15:48:11.093019+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8592f135-584e-4cf5-9657-308f52b3cf3c"}
{"timestamp": "2025-12-28T15:48:11.093518+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'pk_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8592f135-584e-4cf5-9657-308f52b3cf3c"}
{"timestamp": "2025-12-28T15:48:11.097017+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.pending with payload: {'payment_attempt_id': 1, 'order_id': 8, 'amount_attempted': 10.0, 'final_amount': 10.0}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "8592f135-584e-4cf5-9657-308f52b3cf3c"}
{"timestamp": "2025-12-28T15:48:11.097200+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for payment.pending", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "8592f135-584e-4cf5-9657-308f52b3cf3c"}
{"timestamp": "2025-12-28T15:48:11.097367+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "8592f135-584e-4cf5-9657-308f52b3cf3c"}
{"timestamp": "2025-12-28T15:48:11.098207+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.pending to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "8592f135-584e-4cf5-9657-308f52b3cf3c"}
{"timestamp": "2025-12-28T15:48:11.098477+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: payment.pending", "module": "event_bus", "function": "publish", "line": 30, "request_id": "8592f135-584e-4cf5-9657-308f52b3cf3c"}
{"timestamp": "2025-12-28T15:48:11.100531+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/order/8/initiate \u2192 200 (0.030s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "8592f135-584e-4cf5-9657-308f52b3cf3c"}
{"timestamp": "2025-12-28T15:48:11.101427+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "8592f135-584e-4cf5-9657-308f52b3cf3c"}
{"timestamp": "2025-12-28T15:48:11.103206+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/1/confirm", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "0f472a9c-6f88-4fff-a3a3-968d1d12783a"}
{"timestamp": "2025-12-28T15:48:11.105749+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0f472a9c-6f88-4fff-a3a3-968d1d12783a"}
{"timestamp": "2025-12-28T15:48:11.106497+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f472a9c-6f88-4fff-a3a3-968d1d12783a"}
{"timestamp": "2025-12-28T15:48:11.107161+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2631s ago] {'pk_1': 16}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f472a9c-6f88-4fff-a3a3-968d1d12783a"}
{"timestamp": "2025-12-28T15:48:11.111351+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id AS payment_attempts_id, payment_attempts.order_id AS payment_attempts_order_id, payment_attempts.amount_attempted AS payment_attempts_amount_attempted, payment_attempts.status AS payment_attempts_status, payment_attempts.final_amount AS payment_attempts_final_amount, payment_attempts.failure_reason AS payment_attempts_failure_reason, payment_attempts.provider_payment_id AS payment_attempts_provider_payment_id, payment_attempts.created_at AS payment_attempts_created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f472a9c-6f88-4fff-a3a3-968d1d12783a"}
{"timestamp": "2025-12-28T15:48:11.111864+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00062s] {'pk_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f472a9c-6f88-4fff-a3a3-968d1d12783a"}
{"timestamp": "2025-12-28T15:48:11.114762+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f472a9c-6f88-4fff-a3a3-968d1d12783a"}
{"timestamp": "2025-12-28T15:48:11.115154+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'pk_1': 8}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f472a9c-6f88-4fff-a3a3-968d1d12783a"}
{"timestamp": "2025-12-28T15:48:11.117450+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0f472a9c-6f88-4fff-a3a3-968d1d12783a"}
{"timestamp": "2025-12-28T15:48:11.220550+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.middleware", "message": "\u2717 POST /payments/1/confirm \u2192 FAILED (0.016s)", "module": "middleware", "function": "dispatch", "line": 83, "request_id": "0f472a9c-6f88-4fff-a3a3-968d1d12783a", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 151, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\streams\\memory.py\", line 126, in receive\n    raise EndOfStream from None\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\middleware.py\", line 57, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    raise app_exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 390, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 291, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\concurrency.py\", line 38, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\to_thread.py\", line 56, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 2485, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 976, in run\n    result = context.run(func, *args)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\payment\\router.py\", line 50, in confirm_payment_route\n    return mark_payment_succeeded(\n        db=db,\n        payment_attempt_id=payment_attempt_id,\n        provider_payment_id=provider_payment_id\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\payment\\service.py\", line 66, in mark_payment_succeeded\n    raise ValidationError(\"Final amount not equal to order amount\")\napp.core.errors.ValidationError: Final amount not equal to order amount"}
{"timestamp": "2025-12-28T15:56:42.091380+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-28T15:56:44.286145+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-28T15:56:44.286737+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-28T15:56:44.287130+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.287544+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.287997+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.288409+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.288864+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.289405+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.289914+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.290410+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.292851+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.293688+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.294537+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.296658+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.297300+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.298144+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.299945+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.301541+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.302548+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.303269+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.303885+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.304433+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.304977+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.305401+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.306014+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.308065+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.308877+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.309388+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.309855+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.310341+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.310755+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.311446+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.311933+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.312287+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.312741+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.313265+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.313827+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.314548+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.315098+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.315510+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.315980+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.316586+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.316947+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.317300+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.317674+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.318056+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.318487+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.318946+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.319658+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.320470+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.321236+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.322204+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.322852+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.323471+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.323879+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.324300+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.324698+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.325172+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.325651+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.326188+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.326747+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.327350+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T15:56:44.327809+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-28T15:56:44.328151+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-28T15:56:53.857511+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:53.916562+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:53.917166+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:53.919722+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:53.920096+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:53.922302+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:53.922674+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:53.925415+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:53.928261+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:53.928893+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00074s] {'email_1': 'test_1766937411.796633@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:53.933449+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "detected 'bcrypt' backend, version '4.0.1'", "module": "bcrypt", "function": "_load_backend_mixin", "line": 625, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:53.934033+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "'bcrypt' backend lacks $2$ support, enabling workaround", "module": "bcrypt", "function": "_finalize_backend_mixin", "line": 406, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:54.171420+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:54.172142+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00110s] {'email': 'test_1766937411.796633@example.com', 'hashed_password': '$2b$12$N6YULCCn29VLjzHL9636jui7BMr65uCXVPhQWOk8RCSqwC9YLEKu.', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:54.175713+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:54.182405+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:54.183547+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:54.183843+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00041s] {'pk_1': 17}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:54.186063+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 17, 'email': 'test_1766937411.796633@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:54.186374+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for auth.user_registered", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:54.186702+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:54.187534+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:54.187744+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 34, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:54.188006+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:54.220583+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:54.221970+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:54.222288+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'user_id_1': 17, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:54.225945+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:54.226506+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'user_id': 17, 'name': None, 'email': 'test_1766937411.796633@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:54.229435+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:54.233820+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:54.234803+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:54.235327+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'pk_1': 17}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:54.237604+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 17, 'user_id': 17, 'email': 'test_1766937411.796633@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:54.237799+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Using existing event loop for user.profile_created", "module": "event_publisher", "function": "publish_event", "line": 24, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:54.238101+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:54.239276+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:54.240755+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:54.241591+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.3134s ago] {'email_1': 'test_1766937411.796633@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:54.540846+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 17, 'email': 'test_1766937411.796633@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:54.541296+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for auth.user_logged_in", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:54.541762+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:54.543119+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:54.543621+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 30, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:54.545659+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.688s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:54.550447+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "88241bdb-aa6d-46f3-baad-bdb012f06a62"}
{"timestamp": "2025-12-28T15:56:54.550763+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/login", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "36c800aa-cd4f-4b71-90c4-59178b447ac8"}
{"timestamp": "2025-12-28T15:56:54.552152+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "36c800aa-cd4f-4b71-90c4-59178b447ac8"}
{"timestamp": "2025-12-28T15:56:54.553231+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[0:8]", "module": "multipart", "function": "callback", "line": 625, "request_id": "36c800aa-cd4f-4b71-90c4-59178b447ac8"}
{"timestamp": "2025-12-28T15:56:54.555333+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[9:45]", "module": "multipart", "function": "callback", "line": 625, "request_id": "36c800aa-cd4f-4b71-90c4-59178b447ac8"}
{"timestamp": "2025-12-28T15:56:54.556197+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "36c800aa-cd4f-4b71-90c4-59178b447ac8"}
{"timestamp": "2025-12-28T15:56:54.556653+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "36c800aa-cd4f-4b71-90c4-59178b447ac8"}
{"timestamp": "2025-12-28T15:56:54.557122+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[46:54]", "module": "multipart", "function": "callback", "line": 625, "request_id": "36c800aa-cd4f-4b71-90c4-59178b447ac8"}
{"timestamp": "2025-12-28T15:56:54.557521+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[55:73]", "module": "multipart", "function": "callback", "line": 625, "request_id": "36c800aa-cd4f-4b71-90c4-59178b447ac8"}
{"timestamp": "2025-12-28T15:56:54.558785+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "36c800aa-cd4f-4b71-90c4-59178b447ac8"}
{"timestamp": "2025-12-28T15:56:54.559703+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "36c800aa-cd4f-4b71-90c4-59178b447ac8"}
{"timestamp": "2025-12-28T15:56:54.563668+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "36c800aa-cd4f-4b71-90c4-59178b447ac8"}
{"timestamp": "2025-12-28T15:56:54.564856+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "36c800aa-cd4f-4b71-90c4-59178b447ac8"}
{"timestamp": "2025-12-28T15:56:54.565479+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.6374s ago] {'email_1': 'test_1766937411.796633@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "36c800aa-cd4f-4b71-90c4-59178b447ac8"}
{"timestamp": "2025-12-28T15:56:54.793633+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 17, 'email': 'test_1766937411.796633@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "36c800aa-cd4f-4b71-90c4-59178b447ac8"}
{"timestamp": "2025-12-28T15:56:54.793877+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for auth.user_logged_in", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "36c800aa-cd4f-4b71-90c4-59178b447ac8"}
{"timestamp": "2025-12-28T15:56:54.794133+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "36c800aa-cd4f-4b71-90c4-59178b447ac8"}
{"timestamp": "2025-12-28T15:56:54.794957+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "36c800aa-cd4f-4b71-90c4-59178b447ac8"}
{"timestamp": "2025-12-28T15:56:54.795230+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 30, "request_id": "36c800aa-cd4f-4b71-90c4-59178b447ac8"}
{"timestamp": "2025-12-28T15:56:54.796364+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/login \u2192 200 (0.246s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "36c800aa-cd4f-4b71-90c4-59178b447ac8"}
{"timestamp": "2025-12-28T15:56:54.797212+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "36c800aa-cd4f-4b71-90c4-59178b447ac8"}
{"timestamp": "2025-12-28T15:56:54.798812+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /profiles/me", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "3062a727-eb2f-49c2-b76f-c08bd02b0694"}
{"timestamp": "2025-12-28T15:56:54.802147+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3062a727-eb2f-49c2-b76f-c08bd02b0694"}
{"timestamp": "2025-12-28T15:56:54.803366+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3062a727-eb2f-49c2-b76f-c08bd02b0694"}
{"timestamp": "2025-12-28T15:56:54.803841+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00064s] {'pk_1': 17}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3062a727-eb2f-49c2-b76f-c08bd02b0694"}
{"timestamp": "2025-12-28T15:56:54.807336+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3062a727-eb2f-49c2-b76f-c08bd02b0694"}
{"timestamp": "2025-12-28T15:56:54.807794+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.5859s ago] {'user_id_1': 17, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3062a727-eb2f-49c2-b76f-c08bd02b0694"}
{"timestamp": "2025-12-28T15:56:54.810796+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /profiles/me \u2192 200 (0.012s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "3062a727-eb2f-49c2-b76f-c08bd02b0694"}
{"timestamp": "2025-12-28T15:56:54.812071+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "3062a727-eb2f-49c2-b76f-c08bd02b0694"}
{"timestamp": "2025-12-28T15:56:54.814797+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "a35dbaf9-4836-4cb8-ba04-8f9d75779ae7"}
{"timestamp": "2025-12-28T15:56:54.818668+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a35dbaf9-4836-4cb8-ba04-8f9d75779ae7"}
{"timestamp": "2025-12-28T15:56:54.820311+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a35dbaf9-4836-4cb8-ba04-8f9d75779ae7"}
{"timestamp": "2025-12-28T15:56:54.820785+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'title_1': 'The Matrix Reloaded 1766937414.812491'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a35dbaf9-4836-4cb8-ba04-8f9d75779ae7"}
{"timestamp": "2025-12-28T15:56:54.824231+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a35dbaf9-4836-4cb8-ba04-8f9d75779ae7"}
{"timestamp": "2025-12-28T15:56:54.824643+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'title': 'The Matrix Reloaded 1766937414.812491', 'description': 'Test movie: The Matrix Reloaded 1766937414.812491', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a35dbaf9-4836-4cb8-ba04-8f9d75779ae7"}
{"timestamp": "2025-12-28T15:56:54.826904+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "a35dbaf9-4836-4cb8-ba04-8f9d75779ae7"}
{"timestamp": "2025-12-28T15:56:54.833218+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a35dbaf9-4836-4cb8-ba04-8f9d75779ae7"}
{"timestamp": "2025-12-28T15:56:54.834597+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a35dbaf9-4836-4cb8-ba04-8f9d75779ae7"}
{"timestamp": "2025-12-28T15:56:54.835133+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00069s] {'pk_1': 14}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a35dbaf9-4836-4cb8-ba04-8f9d75779ae7"}
{"timestamp": "2025-12-28T15:56:54.838094+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 14}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "a35dbaf9-4836-4cb8-ba04-8f9d75779ae7"}
{"timestamp": "2025-12-28T15:56:54.838332+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for movie.created", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "a35dbaf9-4836-4cb8-ba04-8f9d75779ae7"}
{"timestamp": "2025-12-28T15:56:54.838584+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "a35dbaf9-4836-4cb8-ba04-8f9d75779ae7"}
{"timestamp": "2025-12-28T15:56:54.839593+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "a35dbaf9-4836-4cb8-ba04-8f9d75779ae7"}
{"timestamp": "2025-12-28T15:56:54.839817+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "a35dbaf9-4836-4cb8-ba04-8f9d75779ae7"}
{"timestamp": "2025-12-28T15:56:54.841241+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.027s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "a35dbaf9-4836-4cb8-ba04-8f9d75779ae7"}
{"timestamp": "2025-12-28T15:56:54.842065+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a35dbaf9-4836-4cb8-ba04-8f9d75779ae7"}
{"timestamp": "2025-12-28T15:56:54.843846+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "74aedf8a-b196-431a-abca-dd7c63bf7323"}
{"timestamp": "2025-12-28T15:56:54.846420+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "74aedf8a-b196-431a-abca-dd7c63bf7323"}
{"timestamp": "2025-12-28T15:56:54.847589+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "74aedf8a-b196-431a-abca-dd7c63bf7323"}
{"timestamp": "2025-12-28T15:56:54.847981+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'name_1': 'Standard Layout 1766937414.842254'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "74aedf8a-b196-431a-abca-dd7c63bf7323"}
{"timestamp": "2025-12-28T15:56:54.851613+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "74aedf8a-b196-431a-abca-dd7c63bf7323"}
{"timestamp": "2025-12-28T15:56:54.852245+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'name': 'Standard Layout 1766937414.842254', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "74aedf8a-b196-431a-abca-dd7c63bf7323"}
{"timestamp": "2025-12-28T15:56:54.853979+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "74aedf8a-b196-431a-abca-dd7c63bf7323"}
{"timestamp": "2025-12-28T15:56:54.857850+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "74aedf8a-b196-431a-abca-dd7c63bf7323"}
{"timestamp": "2025-12-28T15:56:54.858890+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "74aedf8a-b196-431a-abca-dd7c63bf7323"}
{"timestamp": "2025-12-28T15:56:54.859292+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'pk_1': 13}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "74aedf8a-b196-431a-abca-dd7c63bf7323"}
{"timestamp": "2025-12-28T15:56:54.861914+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 13}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "74aedf8a-b196-431a-abca-dd7c63bf7323"}
{"timestamp": "2025-12-28T15:56:54.862244+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for screen.layout_created", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "74aedf8a-b196-431a-abca-dd7c63bf7323"}
{"timestamp": "2025-12-28T15:56:54.862501+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "74aedf8a-b196-431a-abca-dd7c63bf7323"}
{"timestamp": "2025-12-28T15:56:54.863234+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "74aedf8a-b196-431a-abca-dd7c63bf7323"}
{"timestamp": "2025-12-28T15:56:54.863445+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "74aedf8a-b196-431a-abca-dd7c63bf7323"}
{"timestamp": "2025-12-28T15:56:54.865627+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "74aedf8a-b196-431a-abca-dd7c63bf7323"}
{"timestamp": "2025-12-28T15:56:54.866760+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "74aedf8a-b196-431a-abca-dd7c63bf7323"}
{"timestamp": "2025-12-28T15:56:54.873027+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "755a296e-bc47-4fb4-ab7e-880c4d19cecf"}
{"timestamp": "2025-12-28T15:56:54.875896+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "755a296e-bc47-4fb4-ab7e-880c4d19cecf"}
{"timestamp": "2025-12-28T15:56:54.877251+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "755a296e-bc47-4fb4-ab7e-880c4d19cecf"}
{"timestamp": "2025-12-28T15:56:54.877702+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'name_1': 'Screen 1 1766937414.866538', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "755a296e-bc47-4fb4-ab7e-880c4d19cecf"}
{"timestamp": "2025-12-28T15:56:54.881596+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "755a296e-bc47-4fb4-ab7e-880c4d19cecf"}
{"timestamp": "2025-12-28T15:56:54.881975+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'id_1': 13, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "755a296e-bc47-4fb4-ab7e-880c4d19cecf"}
{"timestamp": "2025-12-28T15:56:54.885051+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "755a296e-bc47-4fb4-ab7e-880c4d19cecf"}
{"timestamp": "2025-12-28T15:56:54.885603+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00065s] {'name': 'Screen 1 1766937414.866538', 'capacity': 150, 'seat_layout_id': 13}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "755a296e-bc47-4fb4-ab7e-880c4d19cecf"}
{"timestamp": "2025-12-28T15:56:54.887645+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "755a296e-bc47-4fb4-ab7e-880c4d19cecf"}
{"timestamp": "2025-12-28T15:56:54.892246+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "755a296e-bc47-4fb4-ab7e-880c4d19cecf"}
{"timestamp": "2025-12-28T15:56:54.893151+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "755a296e-bc47-4fb4-ab7e-880c4d19cecf"}
{"timestamp": "2025-12-28T15:56:54.893461+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00042s] {'pk_1': 13}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "755a296e-bc47-4fb4-ab7e-880c4d19cecf"}
{"timestamp": "2025-12-28T15:56:54.896195+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 13}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "755a296e-bc47-4fb4-ab7e-880c4d19cecf"}
{"timestamp": "2025-12-28T15:56:54.896596+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for screen.created", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "755a296e-bc47-4fb4-ab7e-880c4d19cecf"}
{"timestamp": "2025-12-28T15:56:54.896979+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "755a296e-bc47-4fb4-ab7e-880c4d19cecf"}
{"timestamp": "2025-12-28T15:56:54.897991+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "755a296e-bc47-4fb4-ab7e-880c4d19cecf"}
{"timestamp": "2025-12-28T15:56:54.898260+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "755a296e-bc47-4fb4-ab7e-880c4d19cecf"}
{"timestamp": "2025-12-28T15:56:54.899781+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.027s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "755a296e-bc47-4fb4-ab7e-880c4d19cecf"}
{"timestamp": "2025-12-28T15:56:54.900658+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "755a296e-bc47-4fb4-ab7e-880c4d19cecf"}
{"timestamp": "2025-12-28T15:56:54.902351+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "0373f21c-ee29-4e26-9d86-967d5fd234e2"}
{"timestamp": "2025-12-28T15:56:54.904761+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0373f21c-ee29-4e26-9d86-967d5fd234e2"}
{"timestamp": "2025-12-28T15:56:54.905888+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0373f21c-ee29-4e26-9d86-967d5fd234e2"}
{"timestamp": "2025-12-28T15:56:54.906194+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'pk_1': 14}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0373f21c-ee29-4e26-9d86-967d5fd234e2"}
{"timestamp": "2025-12-28T15:56:54.908837+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0373f21c-ee29-4e26-9d86-967d5fd234e2"}
{"timestamp": "2025-12-28T15:56:54.909175+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'pk_1': 13}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0373f21c-ee29-4e26-9d86-967d5fd234e2"}
{"timestamp": "2025-12-28T15:56:54.912469+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0373f21c-ee29-4e26-9d86-967d5fd234e2"}
{"timestamp": "2025-12-28T15:56:54.912883+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'screen_id_1': 13, 'start_time_1': datetime.datetime(2025, 12, 29, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 29, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0373f21c-ee29-4e26-9d86-967d5fd234e2"}
{"timestamp": "2025-12-28T15:56:54.916147+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0373f21c-ee29-4e26-9d86-967d5fd234e2"}
{"timestamp": "2025-12-28T15:56:54.916743+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00090s] {'start_time': datetime.datetime(2025, 12, 29, 19, 0), 'end_time': datetime.datetime(2025, 12, 29, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 14, 'screen_id': 13}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0373f21c-ee29-4e26-9d86-967d5fd234e2"}
{"timestamp": "2025-12-28T15:56:54.919143+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "0373f21c-ee29-4e26-9d86-967d5fd234e2"}
{"timestamp": "2025-12-28T15:56:54.923512+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0373f21c-ee29-4e26-9d86-967d5fd234e2"}
{"timestamp": "2025-12-28T15:56:54.924568+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0373f21c-ee29-4e26-9d86-967d5fd234e2"}
{"timestamp": "2025-12-28T15:56:54.924963+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'pk_1': 10}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0373f21c-ee29-4e26-9d86-967d5fd234e2"}
{"timestamp": "2025-12-28T15:56:54.929793+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0373f21c-ee29-4e26-9d86-967d5fd234e2"}
{"timestamp": "2025-12-28T15:56:54.930511+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00063s] {'pk_1': 14}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0373f21c-ee29-4e26-9d86-967d5fd234e2"}
{"timestamp": "2025-12-28T15:56:54.932916+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0373f21c-ee29-4e26-9d86-967d5fd234e2"}
{"timestamp": "2025-12-28T15:56:54.933268+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'pk_1': 13}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0373f21c-ee29-4e26-9d86-967d5fd234e2"}
{"timestamp": "2025-12-28T15:56:54.934771+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 10}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "0373f21c-ee29-4e26-9d86-967d5fd234e2"}
{"timestamp": "2025-12-28T15:56:54.934988+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for showtime.created", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "0373f21c-ee29-4e26-9d86-967d5fd234e2"}
{"timestamp": "2025-12-28T15:56:54.935164+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "0373f21c-ee29-4e26-9d86-967d5fd234e2"}
{"timestamp": "2025-12-28T15:56:54.936028+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "0373f21c-ee29-4e26-9d86-967d5fd234e2"}
{"timestamp": "2025-12-28T15:56:54.936245+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "0373f21c-ee29-4e26-9d86-967d5fd234e2"}
{"timestamp": "2025-12-28T15:56:54.937357+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.035s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "0373f21c-ee29-4e26-9d86-967d5fd234e2"}
{"timestamp": "2025-12-28T15:56:54.938309+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0373f21c-ee29-4e26-9d86-967d5fd234e2"}
{"timestamp": "2025-12-28T15:56:54.940157+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /seatavailability/grid/10", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "f1d6b82e-f6cd-4d04-86c7-45080875c9ac"}
{"timestamp": "2025-12-28T15:56:54.942754+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f1d6b82e-f6cd-4d04-86c7-45080875c9ac"}
{"timestamp": "2025-12-28T15:56:54.944034+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f1d6b82e-f6cd-4d04-86c7-45080875c9ac"}
{"timestamp": "2025-12-28T15:56:54.944435+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'showtime_id_1': 10}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f1d6b82e-f6cd-4d04-86c7-45080875c9ac"}
{"timestamp": "2025-12-28T15:56:54.947322+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /seatavailability/grid/10 \u2192 200 (0.007s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "f1d6b82e-f6cd-4d04-86c7-45080875c9ac"}
{"timestamp": "2025-12-28T15:56:54.948430+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f1d6b82e-f6cd-4d04-86c7-45080875c9ac"}
{"timestamp": "2025-12-28T15:56:54.950864+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:54.953861+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:54.954638+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:54.955044+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.1519s ago] {'pk_1': 17}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:54.958445+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:54.958880+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'user_id': 17, 'showtime_id': 10, 'seat_code': 'R5-8', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 28, 15, 56, 54, 958062, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 28, 16, 6, 54, 957069, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:54.961168+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:54.965092+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:54.966317+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:54.966860+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'pk_1': 9}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:54.969307+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 9, 'user_id': 17, 'showtime_id': 10, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:54.969506+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for reservation.created", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:54.969682+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:54.970418+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:54.970602+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:54.970725+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:54.970859+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:54.971045+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:54.973123+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:54.974326+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:54.974695+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'showtime_id_1': 10, 'seat_code_1': 'R5-8', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:54.978063+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:54.978428+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'seat_code': 'R5-8', 'showtime_id': 10, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:54.981648+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:54.982083+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'status': 'LOCKED', 'locked_by_user_id': 17, 'lock_expires_at': datetime.datetime(2025, 12, 28, 16, 6, 54, 980473, tzinfo=datetime.timezone.utc), 'seat_locks_id': 6}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:54.984181+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:54.988329+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:54.989303+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:54.989708+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'pk_1': 6}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:54.992049+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 10, 'seat_code': 'R5-8', 'user_id': 17, 'expires_at': '2025-12-28T16:06:54.980473+00:00'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:54.992316+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Using existing event loop for seat.locked", "module": "event_publisher", "function": "publish_event", "line": 24, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:54.992709+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:54.993841+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:54.994054+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:54.994197+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 9, 'user_id': 17, 'showtime_id': 10, 'seat_code': 'R5-8'}", "module": "handlers", "function": "on_reservation_created", "line": 21, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:54.994388+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 9", "module": "handlers", "function": "on_reservation_created", "line": 33, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:54.995850+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:54.997017+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:54.997291+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00041s] {'user_id': 17, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 9}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:54.999824+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:55.004604+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:55.005962+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:55.006581+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'pk_1': 9}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:55.009373+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 9, 'reservation_id': 9, 'user_id': 17, 'showtime_id': 10, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:55.009643+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Using existing event loop for order.created", "module": "event_publisher", "function": "publish_event", "line": 24, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:55.009869+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 9", "module": "handlers", "function": "on_reservation_created", "line": 41, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:55.010144+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:55.011143+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:55.011342+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:55.012743+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:55.013952+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:55.014458+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'actor_id': 17, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 9, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 9, \"user_id\": 17, \"showtime_id\": 10, \"seat_code\": \"R5-8\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 28, 15, 56, 55, 13615, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:55.017277+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:55.021606+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:55.022706+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:55.023032+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'pk_1': 9}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:55.025432+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:55.026541+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:55.027758+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.077s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:55.028691+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f410fdd2-f57e-43a8-96c1-923d63c82f4e"}
{"timestamp": "2025-12-28T15:56:55.030327+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "66e44a40-5a36-44ad-b056-6bda2fcbed39"}
{"timestamp": "2025-12-28T15:56:55.032925+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "66e44a40-5a36-44ad-b056-6bda2fcbed39"}
{"timestamp": "2025-12-28T15:56:55.033538+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "66e44a40-5a36-44ad-b056-6bda2fcbed39"}
{"timestamp": "2025-12-28T15:56:55.033965+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2308s ago] {'pk_1': 17}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "66e44a40-5a36-44ad-b056-6bda2fcbed39"}
{"timestamp": "2025-12-28T15:56:55.037634+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "66e44a40-5a36-44ad-b056-6bda2fcbed39"}
{"timestamp": "2025-12-28T15:56:55.038004+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'user_id_1': 17}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "66e44a40-5a36-44ad-b056-6bda2fcbed39"}
{"timestamp": "2025-12-28T15:56:55.040168+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.010s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "66e44a40-5a36-44ad-b056-6bda2fcbed39"}
{"timestamp": "2025-12-28T15:56:55.041076+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "66e44a40-5a36-44ad-b056-6bda2fcbed39"}
{"timestamp": "2025-12-28T15:56:55.042758+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/order/9/initiate", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "f970308b-9ce5-4a57-aa90-33ce470df12e"}
{"timestamp": "2025-12-28T15:56:55.045235+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f970308b-9ce5-4a57-aa90-33ce470df12e"}
{"timestamp": "2025-12-28T15:56:55.045821+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f970308b-9ce5-4a57-aa90-33ce470df12e"}
{"timestamp": "2025-12-28T15:56:55.046272+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2432s ago] {'pk_1': 17}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f970308b-9ce5-4a57-aa90-33ce470df12e"}
{"timestamp": "2025-12-28T15:56:55.049950+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO payment_attempts (order_id, amount_attempted, status, final_amount, failure_reason, provider_payment_id, created_at) VALUES (%(order_id)s, %(amount_attempted)s, %(status)s, %(final_amount)s, %(failure_reason)s, %(provider_payment_id)s, %(created_at)s) RETURNING payment_attempts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f970308b-9ce5-4a57-aa90-33ce470df12e"}
{"timestamp": "2025-12-28T15:56:55.050611+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'order_id': 9, 'amount_attempted': 10.0, 'status': 'PENDING', 'final_amount': 10.0, 'failure_reason': None, 'provider_payment_id': None, 'created_at': datetime.datetime(2025, 12, 28, 15, 56, 55, 49630, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f970308b-9ce5-4a57-aa90-33ce470df12e"}
{"timestamp": "2025-12-28T15:56:55.053275+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "f970308b-9ce5-4a57-aa90-33ce470df12e"}
{"timestamp": "2025-12-28T15:56:55.057559+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f970308b-9ce5-4a57-aa90-33ce470df12e"}
{"timestamp": "2025-12-28T15:56:55.058784+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f970308b-9ce5-4a57-aa90-33ce470df12e"}
{"timestamp": "2025-12-28T15:56:55.059132+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'pk_1': 2}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f970308b-9ce5-4a57-aa90-33ce470df12e"}
{"timestamp": "2025-12-28T15:56:55.061376+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.pending with payload: {'payment_attempt_id': 2, 'order_id': 9, 'amount_attempted': 10.0, 'final_amount': 10.0}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "f970308b-9ce5-4a57-aa90-33ce470df12e"}
{"timestamp": "2025-12-28T15:56:55.061594+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for payment.pending", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "f970308b-9ce5-4a57-aa90-33ce470df12e"}
{"timestamp": "2025-12-28T15:56:55.061771+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "f970308b-9ce5-4a57-aa90-33ce470df12e"}
{"timestamp": "2025-12-28T15:56:55.062460+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.pending to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "f970308b-9ce5-4a57-aa90-33ce470df12e"}
{"timestamp": "2025-12-28T15:56:55.062660+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: payment.pending", "module": "event_bus", "function": "publish", "line": 30, "request_id": "f970308b-9ce5-4a57-aa90-33ce470df12e"}
{"timestamp": "2025-12-28T15:56:55.063851+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/order/9/initiate \u2192 200 (0.021s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "f970308b-9ce5-4a57-aa90-33ce470df12e"}
{"timestamp": "2025-12-28T15:56:55.064654+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f970308b-9ce5-4a57-aa90-33ce470df12e"}
{"timestamp": "2025-12-28T15:56:55.066696+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/2/confirm", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "7e755f5c-2c90-48e2-b0a0-175c623e77f8"}
{"timestamp": "2025-12-28T15:56:55.069318+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7e755f5c-2c90-48e2-b0a0-175c623e77f8"}
{"timestamp": "2025-12-28T15:56:55.070167+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7e755f5c-2c90-48e2-b0a0-175c623e77f8"}
{"timestamp": "2025-12-28T15:56:55.070685+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2675s ago] {'pk_1': 17}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7e755f5c-2c90-48e2-b0a0-175c623e77f8"}
{"timestamp": "2025-12-28T15:56:55.074011+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id AS payment_attempts_id, payment_attempts.order_id AS payment_attempts_order_id, payment_attempts.amount_attempted AS payment_attempts_amount_attempted, payment_attempts.status AS payment_attempts_status, payment_attempts.final_amount AS payment_attempts_final_amount, payment_attempts.failure_reason AS payment_attempts_failure_reason, payment_attempts.provider_payment_id AS payment_attempts_provider_payment_id, payment_attempts.created_at AS payment_attempts_created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7e755f5c-2c90-48e2-b0a0-175c623e77f8"}
{"timestamp": "2025-12-28T15:56:55.074480+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'pk_1': 2}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7e755f5c-2c90-48e2-b0a0-175c623e77f8"}
{"timestamp": "2025-12-28T15:56:55.077038+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7e755f5c-2c90-48e2-b0a0-175c623e77f8"}
{"timestamp": "2025-12-28T15:56:55.077361+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'pk_1': 9}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7e755f5c-2c90-48e2-b0a0-175c623e77f8"}
{"timestamp": "2025-12-28T15:56:55.079176+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "7e755f5c-2c90-48e2-b0a0-175c623e77f8"}
{"timestamp": "2025-12-28T15:56:55.088225+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.middleware", "message": "\u2717 POST /payments/2/confirm \u2192 FAILED (0.014s)", "module": "middleware", "function": "dispatch", "line": 83, "request_id": "7e755f5c-2c90-48e2-b0a0-175c623e77f8", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 151, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\streams\\memory.py\", line 126, in receive\n    raise EndOfStream from None\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\middleware.py\", line 57, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    raise app_exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 390, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 291, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\concurrency.py\", line 38, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\to_thread.py\", line 56, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 2485, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 976, in run\n    result = context.run(func, *args)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\payment\\router.py\", line 50, in confirm_payment_route\n    return mark_payment_succeeded(\n        db=db,\n        payment_attempt_id=payment_attempt_id,\n        provider_payment_id=provider_payment_id\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\payment\\service.py\", line 66, in mark_payment_succeeded\n    raise ValidationError(\"Final amount not equal to order amount\")\napp.core.errors.ValidationError: Final amount not equal to order amount"}
{"timestamp": "2025-12-28T16:01:03.376868+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-28T16:01:05.228584+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-28T16:01:05.229021+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-28T16:01:05.229364+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.229694+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.229861+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.230092+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.230228+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.230379+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.230557+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.230724+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.230885+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.231047+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.231207+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.231367+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.231527+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.231687+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.231846+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.232034+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.232223+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.232423+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.232569+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.232714+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.232854+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.233073+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.233330+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.233491+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.233640+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.233783+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.233933+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.234058+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.234179+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.234365+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.234505+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.234682+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.234938+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.235186+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.235400+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.235622+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.235855+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.236056+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.236219+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.236460+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.236855+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.237176+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.237522+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.237881+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.238150+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.238391+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.238608+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.238742+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.238875+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.239024+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.239166+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.239308+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.239477+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.239685+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.239896+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.240071+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.240225+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.240446+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.240598+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.240730+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:01:05.240856+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-28T16:01:05.241220+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-28T16:02:03.071409+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-28T16:02:04.916907+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-28T16:02:04.917394+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-28T16:02:04.917681+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.917903+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.918067+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.918210+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.918387+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.918545+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.918688+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.918860+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.919023+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.919166+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.919336+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.919510+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.919665+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.919815+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.920078+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.920375+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.920556+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.920771+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.920955+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.921124+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.921468+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.921744+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.921972+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.922207+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.922408+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.922567+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.922816+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.923013+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.923141+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.923259+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.923384+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.923536+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.923793+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.924218+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.924622+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.924966+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.925359+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.925735+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.926047+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.926537+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.926933+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.927220+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.927505+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.927776+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.928085+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.928324+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.928535+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.928767+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.928962+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.929134+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.929352+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.929566+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.929755+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.930002+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.930288+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.930510+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.930658+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.930897+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.931204+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.931499+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:02:04.931752+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-28T16:02:04.931929+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-28T16:03:04.404921+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-28T16:03:06.341458+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-28T16:03:06.341933+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-28T16:03:06.342279+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.342524+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.342691+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.342855+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.343035+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.343312+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.343663+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.343958+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.344160+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.344335+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.344508+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.344645+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.344807+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.344950+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.345122+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.345319+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.345493+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.345636+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.345792+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.345919+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.346078+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.346236+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.346537+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.346738+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.346885+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.347090+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.347264+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.347491+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.347668+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.347841+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.347977+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.348281+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.348629+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.349015+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.349342+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.349567+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.349764+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.350007+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.350228+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.350399+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.350641+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.350792+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.350942+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.351100+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.351234+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.351365+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.351491+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.351677+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.351955+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.352272+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.352581+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.352869+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.353109+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.353333+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.353577+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.353787+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.353972+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.354185+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.354365+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.354490+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:03:06.354611+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-28T16:03:06.354732+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-28T16:03:29.281769+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.354343+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.354766+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.357376+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.357662+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.359573+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.359872+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.362479+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.365389+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.365916+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00067s] {'email_1': 'test_1766937807.220274@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.369370+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "detected 'bcrypt' backend, version '4.0.1'", "module": "bcrypt", "function": "_load_backend_mixin", "line": 625, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.370110+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "'bcrypt' backend lacks $2$ support, enabling workaround", "module": "bcrypt", "function": "_finalize_backend_mixin", "line": 406, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.596782+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.597275+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00067s] {'email': 'test_1766937807.220274@example.com', 'hashed_password': '$2b$12$Mj1uKwdpozPb8luVcZhUuepliJ4RxqA5bkSUhn19PFc7VXMvvbKne', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.600439+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.605683+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.607044+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.607471+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'pk_1': 18}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.609603+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 18, 'email': 'test_1766937807.220274@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.609839+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for auth.user_registered", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.610477+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.611296+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.611555+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 34, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.612346+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.642090+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.643841+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.644331+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00067s] {'user_id_1': 18, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.648501+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.648918+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'user_id': 18, 'name': None, 'email': 'test_1766937807.220274@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.651805+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.656853+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.657971+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.658373+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'pk_1': 18}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.660439+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 18, 'user_id': 18, 'email': 'test_1766937807.220274@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.660668+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Using existing event loop for user.profile_created", "module": "event_publisher", "function": "publish_event", "line": 24, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.660975+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.662065+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.663646+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.664077+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2989s ago] {'email_1': 'test_1766937807.220274@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.891439+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 18, 'email': 'test_1766937807.220274@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.891736+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for auth.user_logged_in", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.892042+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.892846+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.893054+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 30, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.895142+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.614s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.896058+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "bda11e9f-68ef-4e71-aef5-545efdfbf564"}
{"timestamp": "2025-12-28T16:03:29.899446+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/login", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "556dad6c-08bf-4f44-b8c1-32e3cc249b81"}
{"timestamp": "2025-12-28T16:03:29.900197+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "556dad6c-08bf-4f44-b8c1-32e3cc249b81"}
{"timestamp": "2025-12-28T16:03:29.900392+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[0:8]", "module": "multipart", "function": "callback", "line": 625, "request_id": "556dad6c-08bf-4f44-b8c1-32e3cc249b81"}
{"timestamp": "2025-12-28T16:03:29.900629+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[9:45]", "module": "multipart", "function": "callback", "line": 625, "request_id": "556dad6c-08bf-4f44-b8c1-32e3cc249b81"}
{"timestamp": "2025-12-28T16:03:29.900795+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "556dad6c-08bf-4f44-b8c1-32e3cc249b81"}
{"timestamp": "2025-12-28T16:03:29.900933+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "556dad6c-08bf-4f44-b8c1-32e3cc249b81"}
{"timestamp": "2025-12-28T16:03:29.901173+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[46:54]", "module": "multipart", "function": "callback", "line": 625, "request_id": "556dad6c-08bf-4f44-b8c1-32e3cc249b81"}
{"timestamp": "2025-12-28T16:03:29.901415+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[55:73]", "module": "multipart", "function": "callback", "line": 625, "request_id": "556dad6c-08bf-4f44-b8c1-32e3cc249b81"}
{"timestamp": "2025-12-28T16:03:29.901901+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "556dad6c-08bf-4f44-b8c1-32e3cc249b81"}
{"timestamp": "2025-12-28T16:03:29.902089+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "556dad6c-08bf-4f44-b8c1-32e3cc249b81"}
{"timestamp": "2025-12-28T16:03:29.904966+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "556dad6c-08bf-4f44-b8c1-32e3cc249b81"}
{"timestamp": "2025-12-28T16:03:29.906005+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "556dad6c-08bf-4f44-b8c1-32e3cc249b81"}
{"timestamp": "2025-12-28T16:03:29.906531+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.5413s ago] {'email_1': 'test_1766937807.220274@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "556dad6c-08bf-4f44-b8c1-32e3cc249b81"}
{"timestamp": "2025-12-28T16:03:30.112499+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 18, 'email': 'test_1766937807.220274@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "556dad6c-08bf-4f44-b8c1-32e3cc249b81"}
{"timestamp": "2025-12-28T16:03:30.112735+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for auth.user_logged_in", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "556dad6c-08bf-4f44-b8c1-32e3cc249b81"}
{"timestamp": "2025-12-28T16:03:30.112958+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "556dad6c-08bf-4f44-b8c1-32e3cc249b81"}
{"timestamp": "2025-12-28T16:03:30.113737+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "556dad6c-08bf-4f44-b8c1-32e3cc249b81"}
{"timestamp": "2025-12-28T16:03:30.113944+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 30, "request_id": "556dad6c-08bf-4f44-b8c1-32e3cc249b81"}
{"timestamp": "2025-12-28T16:03:30.115172+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/login \u2192 200 (0.216s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "556dad6c-08bf-4f44-b8c1-32e3cc249b81"}
{"timestamp": "2025-12-28T16:03:30.116438+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "556dad6c-08bf-4f44-b8c1-32e3cc249b81"}
{"timestamp": "2025-12-28T16:03:30.117689+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /profiles/me", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "3b6392f9-85fa-46b2-aba2-ef4fb21c9885"}
{"timestamp": "2025-12-28T16:03:30.122121+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3b6392f9-85fa-46b2-aba2-ef4fb21c9885"}
{"timestamp": "2025-12-28T16:03:30.123287+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3b6392f9-85fa-46b2-aba2-ef4fb21c9885"}
{"timestamp": "2025-12-28T16:03:30.123741+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'pk_1': 18}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3b6392f9-85fa-46b2-aba2-ef4fb21c9885"}
{"timestamp": "2025-12-28T16:03:30.126582+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3b6392f9-85fa-46b2-aba2-ef4fb21c9885"}
{"timestamp": "2025-12-28T16:03:30.127241+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.4834s ago] {'user_id_1': 18, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3b6392f9-85fa-46b2-aba2-ef4fb21c9885"}
{"timestamp": "2025-12-28T16:03:30.132431+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /profiles/me \u2192 200 (0.015s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "3b6392f9-85fa-46b2-aba2-ef4fb21c9885"}
{"timestamp": "2025-12-28T16:03:30.133590+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "3b6392f9-85fa-46b2-aba2-ef4fb21c9885"}
{"timestamp": "2025-12-28T16:03:30.136424+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "dee090b6-a17f-42fd-bfd5-8476e0d88a80"}
{"timestamp": "2025-12-28T16:03:30.138995+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "dee090b6-a17f-42fd-bfd5-8476e0d88a80"}
{"timestamp": "2025-12-28T16:03:30.140533+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dee090b6-a17f-42fd-bfd5-8476e0d88a80"}
{"timestamp": "2025-12-28T16:03:30.140962+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'title_1': 'The Matrix Reloaded 1766937810.134559'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dee090b6-a17f-42fd-bfd5-8476e0d88a80"}
{"timestamp": "2025-12-28T16:03:30.144626+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dee090b6-a17f-42fd-bfd5-8476e0d88a80"}
{"timestamp": "2025-12-28T16:03:30.145042+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'title': 'The Matrix Reloaded 1766937810.134559', 'description': 'Test movie: The Matrix Reloaded 1766937810.134559', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dee090b6-a17f-42fd-bfd5-8476e0d88a80"}
{"timestamp": "2025-12-28T16:03:30.147840+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "dee090b6-a17f-42fd-bfd5-8476e0d88a80"}
{"timestamp": "2025-12-28T16:03:30.152324+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "dee090b6-a17f-42fd-bfd5-8476e0d88a80"}
{"timestamp": "2025-12-28T16:03:30.153458+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dee090b6-a17f-42fd-bfd5-8476e0d88a80"}
{"timestamp": "2025-12-28T16:03:30.153909+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'pk_1': 15}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dee090b6-a17f-42fd-bfd5-8476e0d88a80"}
{"timestamp": "2025-12-28T16:03:30.156367+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 15}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "dee090b6-a17f-42fd-bfd5-8476e0d88a80"}
{"timestamp": "2025-12-28T16:03:30.156622+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for movie.created", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "dee090b6-a17f-42fd-bfd5-8476e0d88a80"}
{"timestamp": "2025-12-28T16:03:30.156885+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "dee090b6-a17f-42fd-bfd5-8476e0d88a80"}
{"timestamp": "2025-12-28T16:03:30.157604+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "dee090b6-a17f-42fd-bfd5-8476e0d88a80"}
{"timestamp": "2025-12-28T16:03:30.157836+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "dee090b6-a17f-42fd-bfd5-8476e0d88a80"}
{"timestamp": "2025-12-28T16:03:30.159050+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.023s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "dee090b6-a17f-42fd-bfd5-8476e0d88a80"}
{"timestamp": "2025-12-28T16:03:30.159969+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "dee090b6-a17f-42fd-bfd5-8476e0d88a80"}
{"timestamp": "2025-12-28T16:03:30.162088+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b03af643-b224-4886-a2ee-1fb5aa901c68"}
{"timestamp": "2025-12-28T16:03:30.165650+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b03af643-b224-4886-a2ee-1fb5aa901c68"}
{"timestamp": "2025-12-28T16:03:30.167016+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b03af643-b224-4886-a2ee-1fb5aa901c68"}
{"timestamp": "2025-12-28T16:03:30.167501+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'name_1': 'Standard Layout 1766937810.160126'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b03af643-b224-4886-a2ee-1fb5aa901c68"}
{"timestamp": "2025-12-28T16:03:30.170648+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b03af643-b224-4886-a2ee-1fb5aa901c68"}
{"timestamp": "2025-12-28T16:03:30.170995+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'name': 'Standard Layout 1766937810.160126', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b03af643-b224-4886-a2ee-1fb5aa901c68"}
{"timestamp": "2025-12-28T16:03:30.173088+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b03af643-b224-4886-a2ee-1fb5aa901c68"}
{"timestamp": "2025-12-28T16:03:30.177942+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b03af643-b224-4886-a2ee-1fb5aa901c68"}
{"timestamp": "2025-12-28T16:03:30.178935+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b03af643-b224-4886-a2ee-1fb5aa901c68"}
{"timestamp": "2025-12-28T16:03:30.179261+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'pk_1': 14}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b03af643-b224-4886-a2ee-1fb5aa901c68"}
{"timestamp": "2025-12-28T16:03:30.181565+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 14}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "b03af643-b224-4886-a2ee-1fb5aa901c68"}
{"timestamp": "2025-12-28T16:03:30.181831+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for screen.layout_created", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "b03af643-b224-4886-a2ee-1fb5aa901c68"}
{"timestamp": "2025-12-28T16:03:30.182078+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "b03af643-b224-4886-a2ee-1fb5aa901c68"}
{"timestamp": "2025-12-28T16:03:30.183199+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "b03af643-b224-4886-a2ee-1fb5aa901c68"}
{"timestamp": "2025-12-28T16:03:30.183479+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "b03af643-b224-4886-a2ee-1fb5aa901c68"}
{"timestamp": "2025-12-28T16:03:30.184682+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.023s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b03af643-b224-4886-a2ee-1fb5aa901c68"}
{"timestamp": "2025-12-28T16:03:30.185479+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b03af643-b224-4886-a2ee-1fb5aa901c68"}
{"timestamp": "2025-12-28T16:03:30.191132+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "6f441c9d-97ba-4a7f-a628-e60da5554cdc"}
{"timestamp": "2025-12-28T16:03:30.194267+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6f441c9d-97ba-4a7f-a628-e60da5554cdc"}
{"timestamp": "2025-12-28T16:03:30.195602+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f441c9d-97ba-4a7f-a628-e60da5554cdc"}
{"timestamp": "2025-12-28T16:03:30.196112+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00065s] {'name_1': 'Screen 1 1766937810.18536', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f441c9d-97ba-4a7f-a628-e60da5554cdc"}
{"timestamp": "2025-12-28T16:03:30.200482+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f441c9d-97ba-4a7f-a628-e60da5554cdc"}
{"timestamp": "2025-12-28T16:03:30.201088+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00066s] {'id_1': 14, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f441c9d-97ba-4a7f-a628-e60da5554cdc"}
{"timestamp": "2025-12-28T16:03:30.203616+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f441c9d-97ba-4a7f-a628-e60da5554cdc"}
{"timestamp": "2025-12-28T16:03:30.204072+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'name': 'Screen 1 1766937810.18536', 'capacity': 150, 'seat_layout_id': 14}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f441c9d-97ba-4a7f-a628-e60da5554cdc"}
{"timestamp": "2025-12-28T16:03:30.206161+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6f441c9d-97ba-4a7f-a628-e60da5554cdc"}
{"timestamp": "2025-12-28T16:03:30.210994+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6f441c9d-97ba-4a7f-a628-e60da5554cdc"}
{"timestamp": "2025-12-28T16:03:30.212294+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f441c9d-97ba-4a7f-a628-e60da5554cdc"}
{"timestamp": "2025-12-28T16:03:30.212680+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'pk_1': 14}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f441c9d-97ba-4a7f-a628-e60da5554cdc"}
{"timestamp": "2025-12-28T16:03:30.215489+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 14}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "6f441c9d-97ba-4a7f-a628-e60da5554cdc"}
{"timestamp": "2025-12-28T16:03:30.215825+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for screen.created", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "6f441c9d-97ba-4a7f-a628-e60da5554cdc"}
{"timestamp": "2025-12-28T16:03:30.216123+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "6f441c9d-97ba-4a7f-a628-e60da5554cdc"}
{"timestamp": "2025-12-28T16:03:30.216948+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "6f441c9d-97ba-4a7f-a628-e60da5554cdc"}
{"timestamp": "2025-12-28T16:03:30.217162+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "6f441c9d-97ba-4a7f-a628-e60da5554cdc"}
{"timestamp": "2025-12-28T16:03:30.218801+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.032s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "6f441c9d-97ba-4a7f-a628-e60da5554cdc"}
{"timestamp": "2025-12-28T16:03:30.220022+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6f441c9d-97ba-4a7f-a628-e60da5554cdc"}
{"timestamp": "2025-12-28T16:03:30.221797+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "08dd8c43-d4a0-4796-baab-5fe310f7d2e1"}
{"timestamp": "2025-12-28T16:03:30.225076+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "08dd8c43-d4a0-4796-baab-5fe310f7d2e1"}
{"timestamp": "2025-12-28T16:03:30.226245+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "08dd8c43-d4a0-4796-baab-5fe310f7d2e1"}
{"timestamp": "2025-12-28T16:03:30.226581+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'pk_1': 15}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "08dd8c43-d4a0-4796-baab-5fe310f7d2e1"}
{"timestamp": "2025-12-28T16:03:30.229477+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "08dd8c43-d4a0-4796-baab-5fe310f7d2e1"}
{"timestamp": "2025-12-28T16:03:30.230016+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'pk_1': 14}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "08dd8c43-d4a0-4796-baab-5fe310f7d2e1"}
{"timestamp": "2025-12-28T16:03:30.233215+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "08dd8c43-d4a0-4796-baab-5fe310f7d2e1"}
{"timestamp": "2025-12-28T16:03:30.233601+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'screen_id_1': 14, 'start_time_1': datetime.datetime(2025, 12, 29, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 29, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "08dd8c43-d4a0-4796-baab-5fe310f7d2e1"}
{"timestamp": "2025-12-28T16:03:30.236488+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "08dd8c43-d4a0-4796-baab-5fe310f7d2e1"}
{"timestamp": "2025-12-28T16:03:30.236898+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'start_time': datetime.datetime(2025, 12, 29, 19, 0), 'end_time': datetime.datetime(2025, 12, 29, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 15, 'screen_id': 14}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "08dd8c43-d4a0-4796-baab-5fe310f7d2e1"}
{"timestamp": "2025-12-28T16:03:30.240034+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "08dd8c43-d4a0-4796-baab-5fe310f7d2e1"}
{"timestamp": "2025-12-28T16:03:30.245318+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "08dd8c43-d4a0-4796-baab-5fe310f7d2e1"}
{"timestamp": "2025-12-28T16:03:30.246386+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "08dd8c43-d4a0-4796-baab-5fe310f7d2e1"}
{"timestamp": "2025-12-28T16:03:30.246757+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'pk_1': 11}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "08dd8c43-d4a0-4796-baab-5fe310f7d2e1"}
{"timestamp": "2025-12-28T16:03:30.251036+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "08dd8c43-d4a0-4796-baab-5fe310f7d2e1"}
{"timestamp": "2025-12-28T16:03:30.251643+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00067s] {'pk_1': 15}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "08dd8c43-d4a0-4796-baab-5fe310f7d2e1"}
{"timestamp": "2025-12-28T16:03:30.254581+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "08dd8c43-d4a0-4796-baab-5fe310f7d2e1"}
{"timestamp": "2025-12-28T16:03:30.254928+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'pk_1': 14}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "08dd8c43-d4a0-4796-baab-5fe310f7d2e1"}
{"timestamp": "2025-12-28T16:03:30.256503+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 11}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "08dd8c43-d4a0-4796-baab-5fe310f7d2e1"}
{"timestamp": "2025-12-28T16:03:30.256811+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for showtime.created", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "08dd8c43-d4a0-4796-baab-5fe310f7d2e1"}
{"timestamp": "2025-12-28T16:03:30.257182+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "08dd8c43-d4a0-4796-baab-5fe310f7d2e1"}
{"timestamp": "2025-12-28T16:03:30.258117+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "08dd8c43-d4a0-4796-baab-5fe310f7d2e1"}
{"timestamp": "2025-12-28T16:03:30.258385+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "08dd8c43-d4a0-4796-baab-5fe310f7d2e1"}
{"timestamp": "2025-12-28T16:03:30.259748+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.038s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "08dd8c43-d4a0-4796-baab-5fe310f7d2e1"}
{"timestamp": "2025-12-28T16:03:30.260911+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "08dd8c43-d4a0-4796-baab-5fe310f7d2e1"}
{"timestamp": "2025-12-28T16:03:30.262558+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /seatavailability/grid/11", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "80c25a9e-d5d1-43ea-a980-fc977da5dea1"}
{"timestamp": "2025-12-28T16:03:30.265375+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "80c25a9e-d5d1-43ea-a980-fc977da5dea1"}
{"timestamp": "2025-12-28T16:03:30.267393+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "80c25a9e-d5d1-43ea-a980-fc977da5dea1"}
{"timestamp": "2025-12-28T16:03:30.267925+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00067s] {'showtime_id_1': 11}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "80c25a9e-d5d1-43ea-a980-fc977da5dea1"}
{"timestamp": "2025-12-28T16:03:30.272263+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /seatavailability/grid/11 \u2192 200 (0.010s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "80c25a9e-d5d1-43ea-a980-fc977da5dea1"}
{"timestamp": "2025-12-28T16:03:30.273432+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "80c25a9e-d5d1-43ea-a980-fc977da5dea1"}
{"timestamp": "2025-12-28T16:03:30.275354+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.277998+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.278625+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.279012+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.1559s ago] {'pk_1': 18}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.282423+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.282785+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'user_id': 18, 'showtime_id': 11, 'seat_code': 'R5-8', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 28, 16, 3, 30, 282099, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 28, 16, 13, 30, 281184, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.285262+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.290105+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.291470+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.291792+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'pk_1': 10}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.293912+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 10, 'user_id': 18, 'showtime_id': 11, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.294235+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for reservation.created", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.294490+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.295285+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.295505+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.295706+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.295929+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.296264+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.297892+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.298987+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.299486+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'showtime_id_1': 11, 'seat_code_1': 'R5-8', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.304290+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.304610+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'seat_code': 'R5-8', 'showtime_id': 11, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.307289+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.307709+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'status': 'LOCKED', 'locked_by_user_id': 18, 'lock_expires_at': datetime.datetime(2025, 12, 28, 16, 13, 30, 306213, tzinfo=datetime.timezone.utc), 'seat_locks_id': 7}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.309572+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.313476+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.314435+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.314825+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'pk_1': 7}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.317469+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 11, 'seat_code': 'R5-8', 'user_id': 18, 'expires_at': '2025-12-28T16:13:30.306213+00:00'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.317808+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Using existing event loop for seat.locked", "module": "event_publisher", "function": "publish_event", "line": 24, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.318238+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.319413+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.319679+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.319886+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 10, 'user_id': 18, 'showtime_id': 11, 'seat_code': 'R5-8'}", "module": "handlers", "function": "on_reservation_created", "line": 21, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.320248+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 10", "module": "handlers", "function": "on_reservation_created", "line": 33, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.321838+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.323152+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.323541+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'user_id': 18, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 10}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.326328+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.330470+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.331529+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.331963+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'pk_1': 10}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.334965+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 10, 'reservation_id': 10, 'user_id': 18, 'showtime_id': 11, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.335233+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Using existing event loop for order.created", "module": "event_publisher", "function": "publish_event", "line": 24, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.335531+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 10", "module": "handlers", "function": "on_reservation_created", "line": 41, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.335960+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.337149+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.337371+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.338895+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.340079+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.340417+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'actor_id': 18, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 10, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 10, \"user_id\": 18, \"showtime_id\": 11, \"seat_code\": \"R5-8\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 28, 16, 3, 30, 339788, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.342787+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.346597+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.347840+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.348583+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'pk_1': 10}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.351399+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.352590+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.353959+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.079s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.354811+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "22fc72aa-65a0-4e5a-8203-4885157b5a3e"}
{"timestamp": "2025-12-28T16:03:30.356449+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "1902cb87-ad94-44cd-abd2-f0728d31c895"}
{"timestamp": "2025-12-28T16:03:30.358646+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1902cb87-ad94-44cd-abd2-f0728d31c895"}
{"timestamp": "2025-12-28T16:03:30.359369+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1902cb87-ad94-44cd-abd2-f0728d31c895"}
{"timestamp": "2025-12-28T16:03:30.359744+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2367s ago] {'pk_1': 18}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1902cb87-ad94-44cd-abd2-f0728d31c895"}
{"timestamp": "2025-12-28T16:03:30.363044+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1902cb87-ad94-44cd-abd2-f0728d31c895"}
{"timestamp": "2025-12-28T16:03:30.363573+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'user_id_1': 18}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1902cb87-ad94-44cd-abd2-f0728d31c895"}
{"timestamp": "2025-12-28T16:03:30.367041+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.011s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "1902cb87-ad94-44cd-abd2-f0728d31c895"}
{"timestamp": "2025-12-28T16:03:30.368020+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "1902cb87-ad94-44cd-abd2-f0728d31c895"}
{"timestamp": "2025-12-28T16:03:30.369738+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/order/10/initiate", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "cbe4b2b8-65ff-4c4e-904f-929b0cfa023c"}
{"timestamp": "2025-12-28T16:03:30.372426+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cbe4b2b8-65ff-4c4e-904f-929b0cfa023c"}
{"timestamp": "2025-12-28T16:03:30.373035+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cbe4b2b8-65ff-4c4e-904f-929b0cfa023c"}
{"timestamp": "2025-12-28T16:03:30.373534+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2504s ago] {'pk_1': 18}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cbe4b2b8-65ff-4c4e-904f-929b0cfa023c"}
{"timestamp": "2025-12-28T16:03:30.376873+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO payment_attempts (order_id, amount_attempted, status, final_amount, failure_reason, provider_payment_id, created_at) VALUES (%(order_id)s, %(amount_attempted)s, %(status)s, %(final_amount)s, %(failure_reason)s, %(provider_payment_id)s, %(created_at)s) RETURNING payment_attempts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cbe4b2b8-65ff-4c4e-904f-929b0cfa023c"}
{"timestamp": "2025-12-28T16:03:30.377316+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'order_id': 10, 'amount_attempted': 10.0, 'status': 'PENDING', 'final_amount': 10.0, 'failure_reason': None, 'provider_payment_id': None, 'created_at': datetime.datetime(2025, 12, 28, 16, 3, 30, 376559, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cbe4b2b8-65ff-4c4e-904f-929b0cfa023c"}
{"timestamp": "2025-12-28T16:03:30.379780+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "cbe4b2b8-65ff-4c4e-904f-929b0cfa023c"}
{"timestamp": "2025-12-28T16:03:30.384437+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cbe4b2b8-65ff-4c4e-904f-929b0cfa023c"}
{"timestamp": "2025-12-28T16:03:30.385786+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cbe4b2b8-65ff-4c4e-904f-929b0cfa023c"}
{"timestamp": "2025-12-28T16:03:30.386120+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'pk_1': 3}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cbe4b2b8-65ff-4c4e-904f-929b0cfa023c"}
{"timestamp": "2025-12-28T16:03:30.388546+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.pending with payload: {'payment_attempt_id': 3, 'order_id': 10, 'amount_attempted': 10.0, 'final_amount': 10.0}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "cbe4b2b8-65ff-4c4e-904f-929b0cfa023c"}
{"timestamp": "2025-12-28T16:03:30.388774+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for payment.pending", "module": "event_publisher", "function": "publish_event", "line": 27, "request_id": "cbe4b2b8-65ff-4c4e-904f-929b0cfa023c"}
{"timestamp": "2025-12-28T16:03:30.388957+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "cbe4b2b8-65ff-4c4e-904f-929b0cfa023c"}
{"timestamp": "2025-12-28T16:03:30.389683+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.pending to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "cbe4b2b8-65ff-4c4e-904f-929b0cfa023c"}
{"timestamp": "2025-12-28T16:03:30.389906+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: payment.pending", "module": "event_bus", "function": "publish", "line": 30, "request_id": "cbe4b2b8-65ff-4c4e-904f-929b0cfa023c"}
{"timestamp": "2025-12-28T16:03:30.391231+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/order/10/initiate \u2192 200 (0.021s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "cbe4b2b8-65ff-4c4e-904f-929b0cfa023c"}
{"timestamp": "2025-12-28T16:03:30.392145+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "cbe4b2b8-65ff-4c4e-904f-929b0cfa023c"}
{"timestamp": "2025-12-28T16:03:30.393836+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/3/confirm", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "9e16c3ae-9fda-4269-ae08-1604b6bae2b8"}
{"timestamp": "2025-12-28T16:03:30.396417+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9e16c3ae-9fda-4269-ae08-1604b6bae2b8"}
{"timestamp": "2025-12-28T16:03:30.397183+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9e16c3ae-9fda-4269-ae08-1604b6bae2b8"}
{"timestamp": "2025-12-28T16:03:30.397590+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2745s ago] {'pk_1': 18}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9e16c3ae-9fda-4269-ae08-1604b6bae2b8"}
{"timestamp": "2025-12-28T16:03:30.401879+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id AS payment_attempts_id, payment_attempts.order_id AS payment_attempts_order_id, payment_attempts.amount_attempted AS payment_attempts_amount_attempted, payment_attempts.status AS payment_attempts_status, payment_attempts.final_amount AS payment_attempts_final_amount, payment_attempts.failure_reason AS payment_attempts_failure_reason, payment_attempts.provider_payment_id AS payment_attempts_provider_payment_id, payment_attempts.created_at AS payment_attempts_created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9e16c3ae-9fda-4269-ae08-1604b6bae2b8"}
{"timestamp": "2025-12-28T16:03:30.402497+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00064s] {'pk_1': 3}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9e16c3ae-9fda-4269-ae08-1604b6bae2b8"}
{"timestamp": "2025-12-28T16:03:30.405149+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9e16c3ae-9fda-4269-ae08-1604b6bae2b8"}
{"timestamp": "2025-12-28T16:03:30.405614+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'pk_1': 10}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9e16c3ae-9fda-4269-ae08-1604b6bae2b8"}
{"timestamp": "2025-12-28T16:03:30.407904+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "9e16c3ae-9fda-4269-ae08-1604b6bae2b8"}
{"timestamp": "2025-12-28T16:03:30.422175+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.middleware", "message": "\u2717 POST /payments/3/confirm \u2192 FAILED (0.016s)", "module": "middleware", "function": "dispatch", "line": 83, "request_id": "9e16c3ae-9fda-4269-ae08-1604b6bae2b8", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 151, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\streams\\memory.py\", line 126, in receive\n    raise EndOfStream from None\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\middleware.py\", line 57, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    raise app_exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 390, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 291, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\concurrency.py\", line 38, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\to_thread.py\", line 56, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 2485, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 976, in run\n    result = context.run(func, *args)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\payment\\router.py\", line 50, in confirm_payment_route\n    return mark_payment_succeeded(\n        db=db,\n        payment_attempt_id=payment_attempt_id,\n        provider_payment_id=provider_payment_id\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\payment\\service.py\", line 66, in mark_payment_succeeded\n    raise ValidationError(\"Final amount not equal to order amount\")\napp.core.errors.ValidationError: Final amount not equal to order amount"}
{"timestamp": "2025-12-28T16:06:04.607675+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-28T16:06:06.461801+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-28T16:06:06.462126+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-28T16:06:06.462309+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.462491+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.462655+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.462947+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.463220+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.463472+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.463687+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.464138+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.464530+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.464992+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.465357+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.465809+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.466178+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.466594+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.467102+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.467488+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.467851+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.468135+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.468496+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.468905+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.469442+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.469904+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.470213+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.470504+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.470893+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.471355+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.471766+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.472059+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.472390+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.472727+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.472960+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.473322+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.473719+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.474102+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.474791+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.475204+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.475585+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.475890+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.476138+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.476461+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.476697+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.476951+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.477216+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.477417+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.477587+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.477880+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.478124+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.478311+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.478600+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.478930+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.479237+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.479565+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.480060+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.480360+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.480662+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.481015+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.481540+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.481918+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.482280+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.482721+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:06:06.482992+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-28T16:06:06.483133+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-28T16:06:25.848393+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "c00d27f8-b1a9-45a4-b450-5a31e4b60e6b"}
{"timestamp": "2025-12-28T16:06:25.906215+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c00d27f8-b1a9-45a4-b450-5a31e4b60e6b"}
{"timestamp": "2025-12-28T16:06:25.906624+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c00d27f8-b1a9-45a4-b450-5a31e4b60e6b"}
{"timestamp": "2025-12-28T16:06:25.909249+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c00d27f8-b1a9-45a4-b450-5a31e4b60e6b"}
{"timestamp": "2025-12-28T16:06:25.909621+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c00d27f8-b1a9-45a4-b450-5a31e4b60e6b"}
{"timestamp": "2025-12-28T16:06:25.911677+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c00d27f8-b1a9-45a4-b450-5a31e4b60e6b"}
{"timestamp": "2025-12-28T16:06:25.912093+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c00d27f8-b1a9-45a4-b450-5a31e4b60e6b"}
{"timestamp": "2025-12-28T16:06:25.914213+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c00d27f8-b1a9-45a4-b450-5a31e4b60e6b"}
{"timestamp": "2025-12-28T16:06:25.916926+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c00d27f8-b1a9-45a4-b450-5a31e4b60e6b"}
{"timestamp": "2025-12-28T16:06:25.917305+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'email_1': 'test_1766937983.795562@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c00d27f8-b1a9-45a4-b450-5a31e4b60e6b"}
{"timestamp": "2025-12-28T16:06:25.920332+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "detected 'bcrypt' backend, version '4.0.1'", "module": "bcrypt", "function": "_load_backend_mixin", "line": 625, "request_id": "c00d27f8-b1a9-45a4-b450-5a31e4b60e6b"}
{"timestamp": "2025-12-28T16:06:25.920757+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "'bcrypt' backend lacks $2$ support, enabling workaround", "module": "bcrypt", "function": "_finalize_backend_mixin", "line": 406, "request_id": "c00d27f8-b1a9-45a4-b450-5a31e4b60e6b"}
{"timestamp": "2025-12-28T16:06:26.145145+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c00d27f8-b1a9-45a4-b450-5a31e4b60e6b"}
{"timestamp": "2025-12-28T16:06:26.145616+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00090s] {'email': 'test_1766937983.795562@example.com', 'hashed_password': '$2b$12$80tp6cI797Q7En0LPe9RTukxYH68s0/MkBPfCaHzKlGVKTNCFZy4O', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c00d27f8-b1a9-45a4-b450-5a31e4b60e6b"}
{"timestamp": "2025-12-28T16:06:26.147698+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "c00d27f8-b1a9-45a4-b450-5a31e4b60e6b"}
{"timestamp": "2025-12-28T16:06:26.153369+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c00d27f8-b1a9-45a4-b450-5a31e4b60e6b"}
{"timestamp": "2025-12-28T16:06:26.154675+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c00d27f8-b1a9-45a4-b450-5a31e4b60e6b"}
{"timestamp": "2025-12-28T16:06:26.155096+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'pk_1': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c00d27f8-b1a9-45a4-b450-5a31e4b60e6b"}
{"timestamp": "2025-12-28T16:06:26.157768+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 19, 'email': 'test_1766937983.795562@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "c00d27f8-b1a9-45a4-b450-5a31e4b60e6b"}
{"timestamp": "2025-12-28T16:06:26.158217+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "c00d27f8-b1a9-45a4-b450-5a31e4b60e6b"}
{"timestamp": "2025-12-28T16:06:26.159226+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "c00d27f8-b1a9-45a4-b450-5a31e4b60e6b"}
{"timestamp": "2025-12-28T16:06:26.159515+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 34, "request_id": "c00d27f8-b1a9-45a4-b450-5a31e4b60e6b"}
{"timestamp": "2025-12-28T16:06:26.159843+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "c00d27f8-b1a9-45a4-b450-5a31e4b60e6b"}
{"timestamp": "2025-12-28T16:06:26.183863+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c00d27f8-b1a9-45a4-b450-5a31e4b60e6b"}
{"timestamp": "2025-12-28T16:06:26.185369+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c00d27f8-b1a9-45a4-b450-5a31e4b60e6b"}
{"timestamp": "2025-12-28T16:06:26.185710+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'user_id_1': 19, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c00d27f8-b1a9-45a4-b450-5a31e4b60e6b"}
{"timestamp": "2025-12-28T16:06:26.189651+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c00d27f8-b1a9-45a4-b450-5a31e4b60e6b"}
{"timestamp": "2025-12-28T16:06:26.190073+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00062s] {'user_id': 19, 'name': None, 'email': 'test_1766937983.795562@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c00d27f8-b1a9-45a4-b450-5a31e4b60e6b"}
{"timestamp": "2025-12-28T16:06:26.192761+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "c00d27f8-b1a9-45a4-b450-5a31e4b60e6b"}
{"timestamp": "2025-12-28T16:06:26.198117+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c00d27f8-b1a9-45a4-b450-5a31e4b60e6b"}
{"timestamp": "2025-12-28T16:06:26.199100+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c00d27f8-b1a9-45a4-b450-5a31e4b60e6b"}
{"timestamp": "2025-12-28T16:06:26.199493+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'pk_1': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c00d27f8-b1a9-45a4-b450-5a31e4b60e6b"}
{"timestamp": "2025-12-28T16:06:26.201818+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 19, 'user_id': 19, 'email': 'test_1766937983.795562@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "c00d27f8-b1a9-45a4-b450-5a31e4b60e6b"}
{"timestamp": "2025-12-28T16:06:26.202203+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c00d27f8-b1a9-45a4-b450-5a31e4b60e6b"}
{"timestamp": "2025-12-28T16:06:26.241948+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.event_bus", "message": "\u274c Event handler failed: auth.user_registered -> on_user_registered: asyncio.run() cannot be called from a running event loop", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "c00d27f8-b1a9-45a4-b450-5a31e4b60e6b", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\event_bus.py\", line 40, in _safe_invoke\n    await handler(payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\user\\handlers.py\", line 19, in on_user_registered\n    profile_service.create_profile(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        db,\n        ^^^\n        user_id=user_id,\n        ^^^^^^^^^^^^^^^^\n        email=email,\n        ^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\user\\service.py\", line 41, in create_profile\n    publish_event(event[\"type\"], event[\"payload\"])\n    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\shared\\services\\event_publisher.py\", line 20, in publish_event\n    asyncio.run(event_bus.publish(event_type, payload))\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 191, in run\n    raise RuntimeError(\n        \"asyncio.run() cannot be called from a running event loop\")\nRuntimeError: asyncio.run() cannot be called from a running event loop"}
{"timestamp": "2025-12-28T16:06:26.248619+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c00d27f8-b1a9-45a4-b450-5a31e4b60e6b"}
{"timestamp": "2025-12-28T16:06:26.249153+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.3324s ago] {'email_1': 'test_1766937983.795562@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c00d27f8-b1a9-45a4-b450-5a31e4b60e6b"}
{"timestamp": "2025-12-28T16:06:26.461828+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 19, 'email': 'test_1766937983.795562@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "c00d27f8-b1a9-45a4-b450-5a31e4b60e6b"}
{"timestamp": "2025-12-28T16:06:26.462169+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "c00d27f8-b1a9-45a4-b450-5a31e4b60e6b"}
{"timestamp": "2025-12-28T16:06:26.463004+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "c00d27f8-b1a9-45a4-b450-5a31e4b60e6b"}
{"timestamp": "2025-12-28T16:06:26.463219+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 30, "request_id": "c00d27f8-b1a9-45a4-b450-5a31e4b60e6b"}
{"timestamp": "2025-12-28T16:06:26.464580+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.616s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "c00d27f8-b1a9-45a4-b450-5a31e4b60e6b"}
{"timestamp": "2025-12-28T16:06:26.465619+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c00d27f8-b1a9-45a4-b450-5a31e4b60e6b"}
{"timestamp": "2025-12-28T16:06:26.467567+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/login", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b79c3929-c9ac-4f00-a1b5-59a66a7499d1"}
{"timestamp": "2025-12-28T16:06:26.468459+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "b79c3929-c9ac-4f00-a1b5-59a66a7499d1"}
{"timestamp": "2025-12-28T16:06:26.468776+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[0:8]", "module": "multipart", "function": "callback", "line": 625, "request_id": "b79c3929-c9ac-4f00-a1b5-59a66a7499d1"}
{"timestamp": "2025-12-28T16:06:26.469035+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[9:45]", "module": "multipart", "function": "callback", "line": 625, "request_id": "b79c3929-c9ac-4f00-a1b5-59a66a7499d1"}
{"timestamp": "2025-12-28T16:06:26.469297+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "b79c3929-c9ac-4f00-a1b5-59a66a7499d1"}
{"timestamp": "2025-12-28T16:06:26.469486+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "b79c3929-c9ac-4f00-a1b5-59a66a7499d1"}
{"timestamp": "2025-12-28T16:06:26.469700+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[46:54]", "module": "multipart", "function": "callback", "line": 625, "request_id": "b79c3929-c9ac-4f00-a1b5-59a66a7499d1"}
{"timestamp": "2025-12-28T16:06:26.469855+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[55:73]", "module": "multipart", "function": "callback", "line": 625, "request_id": "b79c3929-c9ac-4f00-a1b5-59a66a7499d1"}
{"timestamp": "2025-12-28T16:06:26.470229+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "b79c3929-c9ac-4f00-a1b5-59a66a7499d1"}
{"timestamp": "2025-12-28T16:06:26.470493+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "b79c3929-c9ac-4f00-a1b5-59a66a7499d1"}
{"timestamp": "2025-12-28T16:06:26.473652+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b79c3929-c9ac-4f00-a1b5-59a66a7499d1"}
{"timestamp": "2025-12-28T16:06:26.474556+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b79c3929-c9ac-4f00-a1b5-59a66a7499d1"}
{"timestamp": "2025-12-28T16:06:26.475008+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.5583s ago] {'email_1': 'test_1766937983.795562@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b79c3929-c9ac-4f00-a1b5-59a66a7499d1"}
{"timestamp": "2025-12-28T16:06:26.682172+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 19, 'email': 'test_1766937983.795562@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "b79c3929-c9ac-4f00-a1b5-59a66a7499d1"}
{"timestamp": "2025-12-28T16:06:26.682423+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "b79c3929-c9ac-4f00-a1b5-59a66a7499d1"}
{"timestamp": "2025-12-28T16:06:26.683166+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "b79c3929-c9ac-4f00-a1b5-59a66a7499d1"}
{"timestamp": "2025-12-28T16:06:26.683368+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 30, "request_id": "b79c3929-c9ac-4f00-a1b5-59a66a7499d1"}
{"timestamp": "2025-12-28T16:06:26.684359+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/login \u2192 200 (0.217s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b79c3929-c9ac-4f00-a1b5-59a66a7499d1"}
{"timestamp": "2025-12-28T16:06:26.685330+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b79c3929-c9ac-4f00-a1b5-59a66a7499d1"}
{"timestamp": "2025-12-28T16:06:26.686827+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /profiles/me", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "5494145e-8e36-4ad1-83ab-2892aba29b3f"}
{"timestamp": "2025-12-28T16:06:26.689528+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "5494145e-8e36-4ad1-83ab-2892aba29b3f"}
{"timestamp": "2025-12-28T16:06:26.691731+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5494145e-8e36-4ad1-83ab-2892aba29b3f"}
{"timestamp": "2025-12-28T16:06:26.693013+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00160s] {'pk_1': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5494145e-8e36-4ad1-83ab-2892aba29b3f"}
{"timestamp": "2025-12-28T16:06:26.696003+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5494145e-8e36-4ad1-83ab-2892aba29b3f"}
{"timestamp": "2025-12-28T16:06:26.696264+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.5112s ago] {'user_id_1': 19, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5494145e-8e36-4ad1-83ab-2892aba29b3f"}
{"timestamp": "2025-12-28T16:06:26.698892+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /profiles/me \u2192 200 (0.012s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "5494145e-8e36-4ad1-83ab-2892aba29b3f"}
{"timestamp": "2025-12-28T16:06:26.699795+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "5494145e-8e36-4ad1-83ab-2892aba29b3f"}
{"timestamp": "2025-12-28T16:06:26.702274+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "d631e9d2-7b2f-4680-8b21-2d6f190818f0"}
{"timestamp": "2025-12-28T16:06:26.705097+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d631e9d2-7b2f-4680-8b21-2d6f190818f0"}
{"timestamp": "2025-12-28T16:06:26.706720+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d631e9d2-7b2f-4680-8b21-2d6f190818f0"}
{"timestamp": "2025-12-28T16:06:26.707165+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'title_1': 'The Matrix Reloaded 1766937986.700579'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d631e9d2-7b2f-4680-8b21-2d6f190818f0"}
{"timestamp": "2025-12-28T16:06:26.711228+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d631e9d2-7b2f-4680-8b21-2d6f190818f0"}
{"timestamp": "2025-12-28T16:06:26.711728+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00063s] {'title': 'The Matrix Reloaded 1766937986.700579', 'description': 'Test movie: The Matrix Reloaded 1766937986.700579', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d631e9d2-7b2f-4680-8b21-2d6f190818f0"}
{"timestamp": "2025-12-28T16:06:26.713544+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "d631e9d2-7b2f-4680-8b21-2d6f190818f0"}
{"timestamp": "2025-12-28T16:06:26.717837+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d631e9d2-7b2f-4680-8b21-2d6f190818f0"}
{"timestamp": "2025-12-28T16:06:26.718932+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d631e9d2-7b2f-4680-8b21-2d6f190818f0"}
{"timestamp": "2025-12-28T16:06:26.719250+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'pk_1': 16}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d631e9d2-7b2f-4680-8b21-2d6f190818f0"}
{"timestamp": "2025-12-28T16:06:26.721435+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 16}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "d631e9d2-7b2f-4680-8b21-2d6f190818f0"}
{"timestamp": "2025-12-28T16:06:26.721712+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "d631e9d2-7b2f-4680-8b21-2d6f190818f0"}
{"timestamp": "2025-12-28T16:06:26.722977+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "d631e9d2-7b2f-4680-8b21-2d6f190818f0"}
{"timestamp": "2025-12-28T16:06:26.723184+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "d631e9d2-7b2f-4680-8b21-2d6f190818f0"}
{"timestamp": "2025-12-28T16:06:26.724535+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "d631e9d2-7b2f-4680-8b21-2d6f190818f0"}
{"timestamp": "2025-12-28T16:06:26.725346+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d631e9d2-7b2f-4680-8b21-2d6f190818f0"}
{"timestamp": "2025-12-28T16:06:26.726938+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "7be7c581-4fff-482e-9868-0256c408e6e4"}
{"timestamp": "2025-12-28T16:06:26.729224+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7be7c581-4fff-482e-9868-0256c408e6e4"}
{"timestamp": "2025-12-28T16:06:26.730321+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7be7c581-4fff-482e-9868-0256c408e6e4"}
{"timestamp": "2025-12-28T16:06:26.730801+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00042s] {'name_1': 'Standard Layout 1766937986.72546'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7be7c581-4fff-482e-9868-0256c408e6e4"}
{"timestamp": "2025-12-28T16:06:26.734068+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7be7c581-4fff-482e-9868-0256c408e6e4"}
{"timestamp": "2025-12-28T16:06:26.734368+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00043s] {'name': 'Standard Layout 1766937986.72546', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7be7c581-4fff-482e-9868-0256c408e6e4"}
{"timestamp": "2025-12-28T16:06:26.736135+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "7be7c581-4fff-482e-9868-0256c408e6e4"}
{"timestamp": "2025-12-28T16:06:26.740543+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7be7c581-4fff-482e-9868-0256c408e6e4"}
{"timestamp": "2025-12-28T16:06:26.741743+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7be7c581-4fff-482e-9868-0256c408e6e4"}
{"timestamp": "2025-12-28T16:06:26.742321+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00072s] {'pk_1': 15}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7be7c581-4fff-482e-9868-0256c408e6e4"}
{"timestamp": "2025-12-28T16:06:26.744597+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 15}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "7be7c581-4fff-482e-9868-0256c408e6e4"}
{"timestamp": "2025-12-28T16:06:26.744856+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "7be7c581-4fff-482e-9868-0256c408e6e4"}
{"timestamp": "2025-12-28T16:06:26.745703+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "7be7c581-4fff-482e-9868-0256c408e6e4"}
{"timestamp": "2025-12-28T16:06:26.745881+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "7be7c581-4fff-482e-9868-0256c408e6e4"}
{"timestamp": "2025-12-28T16:06:26.746991+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.020s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "7be7c581-4fff-482e-9868-0256c408e6e4"}
{"timestamp": "2025-12-28T16:06:26.747855+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "7be7c581-4fff-482e-9868-0256c408e6e4"}
{"timestamp": "2025-12-28T16:06:26.749505+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "2bfdd7ce-f3d2-4d21-b266-518d07cc0a0c"}
{"timestamp": "2025-12-28T16:06:26.751982+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2bfdd7ce-f3d2-4d21-b266-518d07cc0a0c"}
{"timestamp": "2025-12-28T16:06:26.753113+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2bfdd7ce-f3d2-4d21-b266-518d07cc0a0c"}
{"timestamp": "2025-12-28T16:06:26.753660+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'name_1': 'Screen 1 1766937986.747717', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2bfdd7ce-f3d2-4d21-b266-518d07cc0a0c"}
{"timestamp": "2025-12-28T16:06:26.761506+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2bfdd7ce-f3d2-4d21-b266-518d07cc0a0c"}
{"timestamp": "2025-12-28T16:06:26.761811+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'id_1': 15, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2bfdd7ce-f3d2-4d21-b266-518d07cc0a0c"}
{"timestamp": "2025-12-28T16:06:26.764217+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2bfdd7ce-f3d2-4d21-b266-518d07cc0a0c"}
{"timestamp": "2025-12-28T16:06:26.764591+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'name': 'Screen 1 1766937986.747717', 'capacity': 150, 'seat_layout_id': 15}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2bfdd7ce-f3d2-4d21-b266-518d07cc0a0c"}
{"timestamp": "2025-12-28T16:06:26.766825+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2bfdd7ce-f3d2-4d21-b266-518d07cc0a0c"}
{"timestamp": "2025-12-28T16:06:26.772897+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2bfdd7ce-f3d2-4d21-b266-518d07cc0a0c"}
{"timestamp": "2025-12-28T16:06:26.774285+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2bfdd7ce-f3d2-4d21-b266-518d07cc0a0c"}
{"timestamp": "2025-12-28T16:06:26.774758+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'pk_1': 15}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2bfdd7ce-f3d2-4d21-b266-518d07cc0a0c"}
{"timestamp": "2025-12-28T16:06:26.777026+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 15}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "2bfdd7ce-f3d2-4d21-b266-518d07cc0a0c"}
{"timestamp": "2025-12-28T16:06:26.777317+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "2bfdd7ce-f3d2-4d21-b266-518d07cc0a0c"}
{"timestamp": "2025-12-28T16:06:26.778209+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "2bfdd7ce-f3d2-4d21-b266-518d07cc0a0c"}
{"timestamp": "2025-12-28T16:06:26.778423+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "2bfdd7ce-f3d2-4d21-b266-518d07cc0a0c"}
{"timestamp": "2025-12-28T16:06:26.779724+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.030s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "2bfdd7ce-f3d2-4d21-b266-518d07cc0a0c"}
{"timestamp": "2025-12-28T16:06:26.780608+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2bfdd7ce-f3d2-4d21-b266-518d07cc0a0c"}
{"timestamp": "2025-12-28T16:06:26.782304+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "5028a9d8-ae29-47cd-8640-374350ad8c33"}
{"timestamp": "2025-12-28T16:06:26.784837+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "5028a9d8-ae29-47cd-8640-374350ad8c33"}
{"timestamp": "2025-12-28T16:06:26.786285+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5028a9d8-ae29-47cd-8640-374350ad8c33"}
{"timestamp": "2025-12-28T16:06:26.786742+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'pk_1': 16}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5028a9d8-ae29-47cd-8640-374350ad8c33"}
{"timestamp": "2025-12-28T16:06:26.789519+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5028a9d8-ae29-47cd-8640-374350ad8c33"}
{"timestamp": "2025-12-28T16:06:26.789833+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'pk_1': 15}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5028a9d8-ae29-47cd-8640-374350ad8c33"}
{"timestamp": "2025-12-28T16:06:26.792837+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5028a9d8-ae29-47cd-8640-374350ad8c33"}
{"timestamp": "2025-12-28T16:06:26.793266+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'screen_id_1': 15, 'start_time_1': datetime.datetime(2025, 12, 29, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 29, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5028a9d8-ae29-47cd-8640-374350ad8c33"}
{"timestamp": "2025-12-28T16:06:26.796081+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5028a9d8-ae29-47cd-8640-374350ad8c33"}
{"timestamp": "2025-12-28T16:06:26.796674+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'start_time': datetime.datetime(2025, 12, 29, 19, 0), 'end_time': datetime.datetime(2025, 12, 29, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 16, 'screen_id': 15}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5028a9d8-ae29-47cd-8640-374350ad8c33"}
{"timestamp": "2025-12-28T16:06:26.798840+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "5028a9d8-ae29-47cd-8640-374350ad8c33"}
{"timestamp": "2025-12-28T16:06:26.803726+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "5028a9d8-ae29-47cd-8640-374350ad8c33"}
{"timestamp": "2025-12-28T16:06:26.804875+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5028a9d8-ae29-47cd-8640-374350ad8c33"}
{"timestamp": "2025-12-28T16:06:26.805414+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'pk_1': 12}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5028a9d8-ae29-47cd-8640-374350ad8c33"}
{"timestamp": "2025-12-28T16:06:26.809296+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5028a9d8-ae29-47cd-8640-374350ad8c33"}
{"timestamp": "2025-12-28T16:06:26.809960+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00069s] {'pk_1': 16}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5028a9d8-ae29-47cd-8640-374350ad8c33"}
{"timestamp": "2025-12-28T16:06:26.812947+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5028a9d8-ae29-47cd-8640-374350ad8c33"}
{"timestamp": "2025-12-28T16:06:26.813358+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'pk_1': 15}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5028a9d8-ae29-47cd-8640-374350ad8c33"}
{"timestamp": "2025-12-28T16:06:26.815005+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 12}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "5028a9d8-ae29-47cd-8640-374350ad8c33"}
{"timestamp": "2025-12-28T16:06:26.815346+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "5028a9d8-ae29-47cd-8640-374350ad8c33"}
{"timestamp": "2025-12-28T16:06:26.816422+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "5028a9d8-ae29-47cd-8640-374350ad8c33"}
{"timestamp": "2025-12-28T16:06:26.816760+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "5028a9d8-ae29-47cd-8640-374350ad8c33"}
{"timestamp": "2025-12-28T16:06:26.817955+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.036s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "5028a9d8-ae29-47cd-8640-374350ad8c33"}
{"timestamp": "2025-12-28T16:06:26.818995+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "5028a9d8-ae29-47cd-8640-374350ad8c33"}
{"timestamp": "2025-12-28T16:06:26.820611+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /seatavailability/grid/12", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "38df0760-face-4ea0-92c6-6df57ef6eea2"}
{"timestamp": "2025-12-28T16:06:26.823065+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "38df0760-face-4ea0-92c6-6df57ef6eea2"}
{"timestamp": "2025-12-28T16:06:26.824395+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "38df0760-face-4ea0-92c6-6df57ef6eea2"}
{"timestamp": "2025-12-28T16:06:26.824850+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'showtime_id_1': 12}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "38df0760-face-4ea0-92c6-6df57ef6eea2"}
{"timestamp": "2025-12-28T16:06:26.827933+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /seatavailability/grid/12 \u2192 200 (0.007s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "38df0760-face-4ea0-92c6-6df57ef6eea2"}
{"timestamp": "2025-12-28T16:06:26.828961+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "38df0760-face-4ea0-92c6-6df57ef6eea2"}
{"timestamp": "2025-12-28T16:06:26.830724+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.834033+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.834870+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.835338+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.1439s ago] {'pk_1': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.839498+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.839988+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'user_id': 19, 'showtime_id': 12, 'seat_code': 'R5-8', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 28, 16, 6, 26, 839131, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 28, 16, 16, 26, 838140, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.842226+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.846138+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.847254+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.847557+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'pk_1': 11}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.850451+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 11, 'user_id': 19, 'showtime_id': 12, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.850717+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.851647+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.851875+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.852085+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.852278+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.852491+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.854153+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.855269+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.855710+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'showtime_id_1': 12, 'seat_code_1': 'R5-8', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.858932+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.859281+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'seat_code': 'R5-8', 'showtime_id': 12, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.862304+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.862718+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'status': 'LOCKED', 'locked_by_user_id': 19, 'lock_expires_at': datetime.datetime(2025, 12, 28, 16, 16, 26, 861221, tzinfo=datetime.timezone.utc), 'seat_locks_id': 8}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.864914+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.869708+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.870870+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.871156+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'pk_1': 8}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.873418+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 12, 'seat_code': 'R5-8', 'user_id': 19, 'expires_at': '2025-12-28T16:16:26.861221+00:00'}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.873701+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.876545+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.event_bus", "message": "\u274c Event handler failed: reservation.created -> on_reservation_created: asyncio.run() cannot be called from a running event loop", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\event_bus.py\", line 40, in _safe_invoke\n    await handler(payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\seat_availability\\handlers.py\", line 24, in on_reservation_created\n    seat_service.lock_seat(\n    ~~~~~~~~~~~~~~~~~~~~~~^\n        db,\n        ^^^\n    ...<2 lines>...\n        user_id=user_id,\n        ^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\seat_availability\\service.py\", line 62, in lock_seat\n    publish_event(\n    ~~~~~~~~~~~~~^\n        \"seat.locked\",\n        ^^^^^^^^^^^^^^\n    ...<5 lines>...\n        },\n        ^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\shared\\services\\event_publisher.py\", line 20, in publish_event\n    asyncio.run(event_bus.publish(event_type, payload))\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 191, in run\n    raise RuntimeError(\n        \"asyncio.run() cannot be called from a running event loop\")\nRuntimeError: asyncio.run() cannot be called from a running event loop"}
{"timestamp": "2025-12-28T16:06:26.879548+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.879762+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 11, 'user_id': 19, 'showtime_id': 12, 'seat_code': 'R5-8'}", "module": "handlers", "function": "on_reservation_created", "line": 21, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.880035+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 11", "module": "handlers", "function": "on_reservation_created", "line": 33, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.882013+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.883179+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.883430+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00042s] {'user_id': 19, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 11}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.885757+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.889953+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.891430+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.891819+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'pk_1': 11}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.893793+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 11, 'reservation_id': 11, 'user_id': 19, 'showtime_id': 12, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.895675+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Failed to create order from reservation: asyncio.run() cannot be called from a running event loop", "module": "handlers", "function": "on_reservation_created", "line": 43, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\order\\handlers.py\", line 34, in on_reservation_created\n    create_order_from_event(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        db,\n        ^^^\n    ...<3 lines>...\n        seat_code=seat_code,\n        ^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\order\\service.py\", line 41, in create_order_from_event\n    publish_event(event[\"type\"], event[\"payload\"])\n    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\shared\\services\\event_publisher.py\", line 20, in publish_event\n    asyncio.run(event_bus.publish(event_type, payload))\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 191, in run\n    raise RuntimeError(\n        \"asyncio.run() cannot be called from a running event loop\")\nRuntimeError: asyncio.run() cannot be called from a running event loop"}
{"timestamp": "2025-12-28T16:06:26.898985+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.900229+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.900438+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.901797+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.903178+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.903771+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'actor_id': 19, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 11, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 11, \"user_id\": 19, \"showtime_id\": 12, \"seat_code\": \"R5-8\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 28, 16, 6, 26, 902775, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.906233+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.910257+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.911541+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.911934+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'pk_1': 11}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.913993+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.915018+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.916479+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.086s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.917323+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "1e652a68-c7c0-4243-b58b-1f4c1728efe9"}
{"timestamp": "2025-12-28T16:06:26.919143+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "7a495309-8897-4921-875a-3b2508d2a4c6"}
{"timestamp": "2025-12-28T16:06:26.921521+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7a495309-8897-4921-875a-3b2508d2a4c6"}
{"timestamp": "2025-12-28T16:06:26.922169+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7a495309-8897-4921-875a-3b2508d2a4c6"}
{"timestamp": "2025-12-28T16:06:26.922689+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2312s ago] {'pk_1': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7a495309-8897-4921-875a-3b2508d2a4c6"}
{"timestamp": "2025-12-28T16:06:26.925872+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7a495309-8897-4921-875a-3b2508d2a4c6"}
{"timestamp": "2025-12-28T16:06:26.926467+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'user_id_1': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7a495309-8897-4921-875a-3b2508d2a4c6"}
{"timestamp": "2025-12-28T16:06:26.929391+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.010s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "7a495309-8897-4921-875a-3b2508d2a4c6"}
{"timestamp": "2025-12-28T16:06:26.930493+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "7a495309-8897-4921-875a-3b2508d2a4c6"}
{"timestamp": "2025-12-28T16:06:26.932150+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/order/11/initiate", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "446b5176-9819-41d6-bc1c-0dab7b8744d8"}
{"timestamp": "2025-12-28T16:06:26.934460+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "446b5176-9819-41d6-bc1c-0dab7b8744d8"}
{"timestamp": "2025-12-28T16:06:26.935059+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "446b5176-9819-41d6-bc1c-0dab7b8744d8"}
{"timestamp": "2025-12-28T16:06:26.935575+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.244s ago] {'pk_1': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "446b5176-9819-41d6-bc1c-0dab7b8744d8"}
{"timestamp": "2025-12-28T16:06:26.939439+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO payment_attempts (order_id, amount_attempted, status, final_amount, failure_reason, provider_payment_id, created_at) VALUES (%(order_id)s, %(amount_attempted)s, %(status)s, %(final_amount)s, %(failure_reason)s, %(provider_payment_id)s, %(created_at)s) RETURNING payment_attempts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "446b5176-9819-41d6-bc1c-0dab7b8744d8"}
{"timestamp": "2025-12-28T16:06:26.939763+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'order_id': 11, 'amount_attempted': 10.0, 'status': 'PENDING', 'final_amount': 10.0, 'failure_reason': None, 'provider_payment_id': None, 'created_at': datetime.datetime(2025, 12, 28, 16, 6, 26, 939133, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "446b5176-9819-41d6-bc1c-0dab7b8744d8"}
{"timestamp": "2025-12-28T16:06:26.941856+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "446b5176-9819-41d6-bc1c-0dab7b8744d8"}
{"timestamp": "2025-12-28T16:06:26.946572+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "446b5176-9819-41d6-bc1c-0dab7b8744d8"}
{"timestamp": "2025-12-28T16:06:26.948251+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "446b5176-9819-41d6-bc1c-0dab7b8744d8"}
{"timestamp": "2025-12-28T16:06:26.948680+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00068s] {'pk_1': 4}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "446b5176-9819-41d6-bc1c-0dab7b8744d8"}
{"timestamp": "2025-12-28T16:06:26.952027+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.pending with payload: {'payment_attempt_id': 4, 'order_id': 11, 'amount_attempted': 10.0, 'final_amount': 10.0}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "446b5176-9819-41d6-bc1c-0dab7b8744d8"}
{"timestamp": "2025-12-28T16:06:26.952579+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "446b5176-9819-41d6-bc1c-0dab7b8744d8"}
{"timestamp": "2025-12-28T16:06:26.953882+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.pending to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "446b5176-9819-41d6-bc1c-0dab7b8744d8"}
{"timestamp": "2025-12-28T16:06:26.954140+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: payment.pending", "module": "event_bus", "function": "publish", "line": 30, "request_id": "446b5176-9819-41d6-bc1c-0dab7b8744d8"}
{"timestamp": "2025-12-28T16:06:26.955699+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/order/11/initiate \u2192 200 (0.024s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "446b5176-9819-41d6-bc1c-0dab7b8744d8"}
{"timestamp": "2025-12-28T16:06:26.956870+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "446b5176-9819-41d6-bc1c-0dab7b8744d8"}
{"timestamp": "2025-12-28T16:06:26.959427+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/4/confirm", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "e76fa6eb-a6de-4e80-a8c8-baa5dd1668bb"}
{"timestamp": "2025-12-28T16:06:26.962789+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e76fa6eb-a6de-4e80-a8c8-baa5dd1668bb"}
{"timestamp": "2025-12-28T16:06:26.963606+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e76fa6eb-a6de-4e80-a8c8-baa5dd1668bb"}
{"timestamp": "2025-12-28T16:06:26.964120+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2726s ago] {'pk_1': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e76fa6eb-a6de-4e80-a8c8-baa5dd1668bb"}
{"timestamp": "2025-12-28T16:06:26.968289+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id AS payment_attempts_id, payment_attempts.order_id AS payment_attempts_order_id, payment_attempts.amount_attempted AS payment_attempts_amount_attempted, payment_attempts.status AS payment_attempts_status, payment_attempts.final_amount AS payment_attempts_final_amount, payment_attempts.failure_reason AS payment_attempts_failure_reason, payment_attempts.provider_payment_id AS payment_attempts_provider_payment_id, payment_attempts.created_at AS payment_attempts_created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e76fa6eb-a6de-4e80-a8c8-baa5dd1668bb"}
{"timestamp": "2025-12-28T16:06:26.968967+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00062s] {'pk_1': 4}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e76fa6eb-a6de-4e80-a8c8-baa5dd1668bb"}
{"timestamp": "2025-12-28T16:06:26.972291+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e76fa6eb-a6de-4e80-a8c8-baa5dd1668bb"}
{"timestamp": "2025-12-28T16:06:26.972922+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00063s] {'pk_1': 11}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e76fa6eb-a6de-4e80-a8c8-baa5dd1668bb"}
{"timestamp": "2025-12-28T16:06:26.976075+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "e76fa6eb-a6de-4e80-a8c8-baa5dd1668bb"}
{"timestamp": "2025-12-28T16:06:26.986036+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.middleware", "message": "\u2717 POST /payments/4/confirm \u2192 FAILED (0.018s)", "module": "middleware", "function": "dispatch", "line": 83, "request_id": "e76fa6eb-a6de-4e80-a8c8-baa5dd1668bb", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 151, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\streams\\memory.py\", line 126, in receive\n    raise EndOfStream from None\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\middleware.py\", line 57, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    raise app_exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 390, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 291, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\concurrency.py\", line 38, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\to_thread.py\", line 56, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 2485, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 976, in run\n    result = context.run(func, *args)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\payment\\router.py\", line 50, in confirm_payment_route\n    return mark_payment_succeeded(\n        db=db,\n        payment_attempt_id=payment_attempt_id,\n        provider_payment_id=provider_payment_id\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\payment\\service.py\", line 66, in mark_payment_succeeded\n    raise ValidationError(\"Final amount not equal to order amount\")\napp.core.errors.ValidationError: Final amount not equal to order amount"}
{"timestamp": "2025-12-28T16:08:18.680231+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-28T16:08:20.682793+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-28T16:08:20.683297+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-28T16:08:20.683586+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.683807+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.683976+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.684185+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.684380+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.684588+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.684745+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.684892+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.685050+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.685239+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.685397+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.685556+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.685750+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.685909+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.686097+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.686275+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.686548+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.686724+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.686896+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.687209+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.687384+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.687554+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.687822+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.688066+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.688308+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.688550+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.688801+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.689099+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.689375+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.689577+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.689721+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.689871+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.690116+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.690336+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.690499+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.690725+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.690876+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.691004+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.691178+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.691331+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.691450+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.691564+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.691694+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.691806+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.691929+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.692082+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.692312+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.692797+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.693227+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.693473+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.693621+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.693801+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.694122+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.694413+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.694640+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.694861+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.695043+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.695200+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.695348+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.695505+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:08:20.695653+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-28T16:08:20.695837+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-28T16:08:38.455411+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:38.520291+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:38.520674+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:38.523104+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:38.523440+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:38.525564+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:38.525940+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:38.528542+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:38.531442+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:38.532091+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00077s] {'email_1': 'test_1766938116.39545@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:38.535662+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "detected 'bcrypt' backend, version '4.0.1'", "module": "bcrypt", "function": "_load_backend_mixin", "line": 625, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:38.535984+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "'bcrypt' backend lacks $2$ support, enabling workaround", "module": "bcrypt", "function": "_finalize_backend_mixin", "line": 406, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:38.760142+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:38.760564+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'email': 'test_1766938116.39545@example.com', 'hashed_password': '$2b$12$6tj9wcwZQZyPc4Kx/UyezuxKTUUhN2DHoHx1oy3neLDzgr9W6ilje', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:38.763538+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:38.768751+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:38.770048+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:38.770496+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'pk_1': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:38.772841+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 20, 'email': 'test_1766938116.39545@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:38.773100+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for auth.user_registered", "module": "event_publisher", "function": "publish_event", "line": 28, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:38.773400+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:38.774350+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:38.774640+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 34, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:38.774980+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:38.804772+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:38.806257+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:38.806736+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'user_id_1': 20, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:38.811469+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:38.812051+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'user_id': 20, 'name': None, 'email': 'test_1766938116.39545@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:38.815410+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:38.820639+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:38.821694+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:38.822216+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'pk_1': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:38.825172+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 20, 'user_id': 20, 'email': 'test_1766938116.39545@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:38.825473+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Using existing event loop for user.profile_created", "module": "event_publisher", "function": "publish_event", "line": 23, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:38.825952+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:38.827179+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:38.828642+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:38.829117+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2979s ago] {'email_1': 'test_1766938116.39545@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:39.042706+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 20, 'email': 'test_1766938116.39545@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:39.042960+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for auth.user_logged_in", "module": "event_publisher", "function": "publish_event", "line": 28, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:39.043263+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:39.044086+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:39.044338+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 30, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:39.045725+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.590s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:39.046709+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "be5262b4-1c6f-4575-b82f-2ba0810b5b90"}
{"timestamp": "2025-12-28T16:08:39.048946+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/login", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "c1f3184f-d7c9-4d62-aaa4-45f93a48d47b"}
{"timestamp": "2025-12-28T16:08:39.049728+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "c1f3184f-d7c9-4d62-aaa4-45f93a48d47b"}
{"timestamp": "2025-12-28T16:08:39.049936+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[0:8]", "module": "multipart", "function": "callback", "line": 625, "request_id": "c1f3184f-d7c9-4d62-aaa4-45f93a48d47b"}
{"timestamp": "2025-12-28T16:08:39.050131+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[9:44]", "module": "multipart", "function": "callback", "line": 625, "request_id": "c1f3184f-d7c9-4d62-aaa4-45f93a48d47b"}
{"timestamp": "2025-12-28T16:08:39.050381+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "c1f3184f-d7c9-4d62-aaa4-45f93a48d47b"}
{"timestamp": "2025-12-28T16:08:39.050616+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "c1f3184f-d7c9-4d62-aaa4-45f93a48d47b"}
{"timestamp": "2025-12-28T16:08:39.050828+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[45:53]", "module": "multipart", "function": "callback", "line": 625, "request_id": "c1f3184f-d7c9-4d62-aaa4-45f93a48d47b"}
{"timestamp": "2025-12-28T16:08:39.051001+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[54:72]", "module": "multipart", "function": "callback", "line": 625, "request_id": "c1f3184f-d7c9-4d62-aaa4-45f93a48d47b"}
{"timestamp": "2025-12-28T16:08:39.051381+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "c1f3184f-d7c9-4d62-aaa4-45f93a48d47b"}
{"timestamp": "2025-12-28T16:08:39.051544+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "c1f3184f-d7c9-4d62-aaa4-45f93a48d47b"}
{"timestamp": "2025-12-28T16:08:39.054074+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c1f3184f-d7c9-4d62-aaa4-45f93a48d47b"}
{"timestamp": "2025-12-28T16:08:39.054917+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1f3184f-d7c9-4d62-aaa4-45f93a48d47b"}
{"timestamp": "2025-12-28T16:08:39.055498+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.5242s ago] {'email_1': 'test_1766938116.39545@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1f3184f-d7c9-4d62-aaa4-45f93a48d47b"}
{"timestamp": "2025-12-28T16:08:39.262195+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 20, 'email': 'test_1766938116.39545@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "c1f3184f-d7c9-4d62-aaa4-45f93a48d47b"}
{"timestamp": "2025-12-28T16:08:39.262428+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for auth.user_logged_in", "module": "event_publisher", "function": "publish_event", "line": 28, "request_id": "c1f3184f-d7c9-4d62-aaa4-45f93a48d47b"}
{"timestamp": "2025-12-28T16:08:39.262758+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "c1f3184f-d7c9-4d62-aaa4-45f93a48d47b"}
{"timestamp": "2025-12-28T16:08:39.263594+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "c1f3184f-d7c9-4d62-aaa4-45f93a48d47b"}
{"timestamp": "2025-12-28T16:08:39.263820+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 30, "request_id": "c1f3184f-d7c9-4d62-aaa4-45f93a48d47b"}
{"timestamp": "2025-12-28T16:08:39.264998+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/login \u2192 200 (0.216s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "c1f3184f-d7c9-4d62-aaa4-45f93a48d47b"}
{"timestamp": "2025-12-28T16:08:39.265918+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c1f3184f-d7c9-4d62-aaa4-45f93a48d47b"}
{"timestamp": "2025-12-28T16:08:39.267462+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /profiles/me", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "9c42ad53-d26f-4f42-9516-aa24706637a7"}
{"timestamp": "2025-12-28T16:08:39.270252+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9c42ad53-d26f-4f42-9516-aa24706637a7"}
{"timestamp": "2025-12-28T16:08:39.271383+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9c42ad53-d26f-4f42-9516-aa24706637a7"}
{"timestamp": "2025-12-28T16:08:39.271882+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00062s] {'pk_1': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9c42ad53-d26f-4f42-9516-aa24706637a7"}
{"timestamp": "2025-12-28T16:08:39.274955+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9c42ad53-d26f-4f42-9516-aa24706637a7"}
{"timestamp": "2025-12-28T16:08:39.275337+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.4693s ago] {'user_id_1': 20, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9c42ad53-d26f-4f42-9516-aa24706637a7"}
{"timestamp": "2025-12-28T16:08:39.278113+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /profiles/me \u2192 200 (0.011s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "9c42ad53-d26f-4f42-9516-aa24706637a7"}
{"timestamp": "2025-12-28T16:08:39.278940+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "9c42ad53-d26f-4f42-9516-aa24706637a7"}
{"timestamp": "2025-12-28T16:08:39.281650+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "2c099304-e361-4365-b4e1-e0de56ade1ca"}
{"timestamp": "2025-12-28T16:08:39.285436+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2c099304-e361-4365-b4e1-e0de56ade1ca"}
{"timestamp": "2025-12-28T16:08:39.287255+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2c099304-e361-4365-b4e1-e0de56ade1ca"}
{"timestamp": "2025-12-28T16:08:39.287721+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'title_1': 'The Matrix Reloaded 1766938119.27991'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2c099304-e361-4365-b4e1-e0de56ade1ca"}
{"timestamp": "2025-12-28T16:08:39.293169+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2c099304-e361-4365-b4e1-e0de56ade1ca"}
{"timestamp": "2025-12-28T16:08:39.294100+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00091s] {'title': 'The Matrix Reloaded 1766938119.27991', 'description': 'Test movie: The Matrix Reloaded 1766938119.27991', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2c099304-e361-4365-b4e1-e0de56ade1ca"}
{"timestamp": "2025-12-28T16:08:39.296407+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2c099304-e361-4365-b4e1-e0de56ade1ca"}
{"timestamp": "2025-12-28T16:08:39.301914+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2c099304-e361-4365-b4e1-e0de56ade1ca"}
{"timestamp": "2025-12-28T16:08:39.303403+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2c099304-e361-4365-b4e1-e0de56ade1ca"}
{"timestamp": "2025-12-28T16:08:39.303844+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'pk_1': 17}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2c099304-e361-4365-b4e1-e0de56ade1ca"}
{"timestamp": "2025-12-28T16:08:39.306802+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 17}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "2c099304-e361-4365-b4e1-e0de56ade1ca"}
{"timestamp": "2025-12-28T16:08:39.307026+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for movie.created", "module": "event_publisher", "function": "publish_event", "line": 28, "request_id": "2c099304-e361-4365-b4e1-e0de56ade1ca"}
{"timestamp": "2025-12-28T16:08:39.307486+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "2c099304-e361-4365-b4e1-e0de56ade1ca"}
{"timestamp": "2025-12-28T16:08:39.308742+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "2c099304-e361-4365-b4e1-e0de56ade1ca"}
{"timestamp": "2025-12-28T16:08:39.308972+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "2c099304-e361-4365-b4e1-e0de56ade1ca"}
{"timestamp": "2025-12-28T16:08:39.310180+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.029s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "2c099304-e361-4365-b4e1-e0de56ade1ca"}
{"timestamp": "2025-12-28T16:08:39.311069+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2c099304-e361-4365-b4e1-e0de56ade1ca"}
{"timestamp": "2025-12-28T16:08:39.313061+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "bf3f1559-c67c-424e-a6fc-9254df43baf6"}
{"timestamp": "2025-12-28T16:08:39.315825+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bf3f1559-c67c-424e-a6fc-9254df43baf6"}
{"timestamp": "2025-12-28T16:08:39.317139+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf3f1559-c67c-424e-a6fc-9254df43baf6"}
{"timestamp": "2025-12-28T16:08:39.317475+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'name_1': 'Standard Layout 1766938119.311268'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf3f1559-c67c-424e-a6fc-9254df43baf6"}
{"timestamp": "2025-12-28T16:08:39.320752+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf3f1559-c67c-424e-a6fc-9254df43baf6"}
{"timestamp": "2025-12-28T16:08:39.321443+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00065s] {'name': 'Standard Layout 1766938119.311268', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf3f1559-c67c-424e-a6fc-9254df43baf6"}
{"timestamp": "2025-12-28T16:08:39.323605+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "bf3f1559-c67c-424e-a6fc-9254df43baf6"}
{"timestamp": "2025-12-28T16:08:39.329182+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bf3f1559-c67c-424e-a6fc-9254df43baf6"}
{"timestamp": "2025-12-28T16:08:39.330296+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf3f1559-c67c-424e-a6fc-9254df43baf6"}
{"timestamp": "2025-12-28T16:08:39.330655+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'pk_1': 16}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf3f1559-c67c-424e-a6fc-9254df43baf6"}
{"timestamp": "2025-12-28T16:08:39.333055+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 16}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "bf3f1559-c67c-424e-a6fc-9254df43baf6"}
{"timestamp": "2025-12-28T16:08:39.333291+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for screen.layout_created", "module": "event_publisher", "function": "publish_event", "line": 28, "request_id": "bf3f1559-c67c-424e-a6fc-9254df43baf6"}
{"timestamp": "2025-12-28T16:08:39.333502+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "bf3f1559-c67c-424e-a6fc-9254df43baf6"}
{"timestamp": "2025-12-28T16:08:39.334244+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "bf3f1559-c67c-424e-a6fc-9254df43baf6"}
{"timestamp": "2025-12-28T16:08:39.334450+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "bf3f1559-c67c-424e-a6fc-9254df43baf6"}
{"timestamp": "2025-12-28T16:08:39.336004+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.023s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "bf3f1559-c67c-424e-a6fc-9254df43baf6"}
{"timestamp": "2025-12-28T16:08:39.337260+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "bf3f1559-c67c-424e-a6fc-9254df43baf6"}
{"timestamp": "2025-12-28T16:08:39.343632+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "04eca1a0-6f53-4377-836a-47f640c348ff"}
{"timestamp": "2025-12-28T16:08:39.346572+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "04eca1a0-6f53-4377-836a-47f640c348ff"}
{"timestamp": "2025-12-28T16:08:39.347910+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "04eca1a0-6f53-4377-836a-47f640c348ff"}
{"timestamp": "2025-12-28T16:08:39.348489+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00064s] {'name_1': 'Screen 1 1766938119.337034', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "04eca1a0-6f53-4377-836a-47f640c348ff"}
{"timestamp": "2025-12-28T16:08:39.352823+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "04eca1a0-6f53-4377-836a-47f640c348ff"}
{"timestamp": "2025-12-28T16:08:39.353491+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00099s] {'id_1': 16, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "04eca1a0-6f53-4377-836a-47f640c348ff"}
{"timestamp": "2025-12-28T16:08:39.356398+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "04eca1a0-6f53-4377-836a-47f640c348ff"}
{"timestamp": "2025-12-28T16:08:39.356859+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'name': 'Screen 1 1766938119.337034', 'capacity': 150, 'seat_layout_id': 16}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "04eca1a0-6f53-4377-836a-47f640c348ff"}
{"timestamp": "2025-12-28T16:08:39.358992+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "04eca1a0-6f53-4377-836a-47f640c348ff"}
{"timestamp": "2025-12-28T16:08:39.363593+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "04eca1a0-6f53-4377-836a-47f640c348ff"}
{"timestamp": "2025-12-28T16:08:39.364554+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "04eca1a0-6f53-4377-836a-47f640c348ff"}
{"timestamp": "2025-12-28T16:08:39.365085+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'pk_1': 16}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "04eca1a0-6f53-4377-836a-47f640c348ff"}
{"timestamp": "2025-12-28T16:08:39.367642+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 16}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "04eca1a0-6f53-4377-836a-47f640c348ff"}
{"timestamp": "2025-12-28T16:08:39.367976+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for screen.created", "module": "event_publisher", "function": "publish_event", "line": 28, "request_id": "04eca1a0-6f53-4377-836a-47f640c348ff"}
{"timestamp": "2025-12-28T16:08:39.368378+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "04eca1a0-6f53-4377-836a-47f640c348ff"}
{"timestamp": "2025-12-28T16:08:39.369239+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "04eca1a0-6f53-4377-836a-47f640c348ff"}
{"timestamp": "2025-12-28T16:08:39.369462+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "04eca1a0-6f53-4377-836a-47f640c348ff"}
{"timestamp": "2025-12-28T16:08:39.370769+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.027s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "04eca1a0-6f53-4377-836a-47f640c348ff"}
{"timestamp": "2025-12-28T16:08:39.371713+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "04eca1a0-6f53-4377-836a-47f640c348ff"}
{"timestamp": "2025-12-28T16:08:39.373663+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "6c7ffcc5-01ca-4bc7-a662-7532a324f06d"}
{"timestamp": "2025-12-28T16:08:39.376000+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6c7ffcc5-01ca-4bc7-a662-7532a324f06d"}
{"timestamp": "2025-12-28T16:08:39.377319+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c7ffcc5-01ca-4bc7-a662-7532a324f06d"}
{"timestamp": "2025-12-28T16:08:39.377688+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'pk_1': 17}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c7ffcc5-01ca-4bc7-a662-7532a324f06d"}
{"timestamp": "2025-12-28T16:08:39.380353+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c7ffcc5-01ca-4bc7-a662-7532a324f06d"}
{"timestamp": "2025-12-28T16:08:39.380728+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'pk_1': 16}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c7ffcc5-01ca-4bc7-a662-7532a324f06d"}
{"timestamp": "2025-12-28T16:08:39.384670+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c7ffcc5-01ca-4bc7-a662-7532a324f06d"}
{"timestamp": "2025-12-28T16:08:39.385263+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00107s] {'screen_id_1': 16, 'start_time_1': datetime.datetime(2025, 12, 29, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 29, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c7ffcc5-01ca-4bc7-a662-7532a324f06d"}
{"timestamp": "2025-12-28T16:08:39.389053+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c7ffcc5-01ca-4bc7-a662-7532a324f06d"}
{"timestamp": "2025-12-28T16:08:39.389647+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00076s] {'start_time': datetime.datetime(2025, 12, 29, 19, 0), 'end_time': datetime.datetime(2025, 12, 29, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 17, 'screen_id': 16}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c7ffcc5-01ca-4bc7-a662-7532a324f06d"}
{"timestamp": "2025-12-28T16:08:39.392012+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6c7ffcc5-01ca-4bc7-a662-7532a324f06d"}
{"timestamp": "2025-12-28T16:08:39.396169+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6c7ffcc5-01ca-4bc7-a662-7532a324f06d"}
{"timestamp": "2025-12-28T16:08:39.397229+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c7ffcc5-01ca-4bc7-a662-7532a324f06d"}
{"timestamp": "2025-12-28T16:08:39.397546+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'pk_1': 13}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c7ffcc5-01ca-4bc7-a662-7532a324f06d"}
{"timestamp": "2025-12-28T16:08:39.402553+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c7ffcc5-01ca-4bc7-a662-7532a324f06d"}
{"timestamp": "2025-12-28T16:08:39.403233+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00077s] {'pk_1': 17}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c7ffcc5-01ca-4bc7-a662-7532a324f06d"}
{"timestamp": "2025-12-28T16:08:39.406381+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c7ffcc5-01ca-4bc7-a662-7532a324f06d"}
{"timestamp": "2025-12-28T16:08:39.406868+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'pk_1': 16}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c7ffcc5-01ca-4bc7-a662-7532a324f06d"}
{"timestamp": "2025-12-28T16:08:39.408577+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 13}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "6c7ffcc5-01ca-4bc7-a662-7532a324f06d"}
{"timestamp": "2025-12-28T16:08:39.408847+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for showtime.created", "module": "event_publisher", "function": "publish_event", "line": 28, "request_id": "6c7ffcc5-01ca-4bc7-a662-7532a324f06d"}
{"timestamp": "2025-12-28T16:08:39.409077+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "6c7ffcc5-01ca-4bc7-a662-7532a324f06d"}
{"timestamp": "2025-12-28T16:08:39.410089+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "6c7ffcc5-01ca-4bc7-a662-7532a324f06d"}
{"timestamp": "2025-12-28T16:08:39.410323+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "6c7ffcc5-01ca-4bc7-a662-7532a324f06d"}
{"timestamp": "2025-12-28T16:08:39.411875+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.038s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "6c7ffcc5-01ca-4bc7-a662-7532a324f06d"}
{"timestamp": "2025-12-28T16:08:39.412797+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6c7ffcc5-01ca-4bc7-a662-7532a324f06d"}
{"timestamp": "2025-12-28T16:08:39.414497+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /seatavailability/grid/13", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "6d9b1c06-55a1-4152-8501-4369f3be5094"}
{"timestamp": "2025-12-28T16:08:39.418805+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6d9b1c06-55a1-4152-8501-4369f3be5094"}
{"timestamp": "2025-12-28T16:08:39.420775+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6d9b1c06-55a1-4152-8501-4369f3be5094"}
{"timestamp": "2025-12-28T16:08:39.421497+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00071s] {'showtime_id_1': 13}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6d9b1c06-55a1-4152-8501-4369f3be5094"}
{"timestamp": "2025-12-28T16:08:39.426390+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /seatavailability/grid/13 \u2192 200 (0.012s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "6d9b1c06-55a1-4152-8501-4369f3be5094"}
{"timestamp": "2025-12-28T16:08:39.427640+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6d9b1c06-55a1-4152-8501-4369f3be5094"}
{"timestamp": "2025-12-28T16:08:39.429531+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.432725+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.433721+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.434135+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.163s ago] {'pk_1': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.437647+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.438012+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'user_id': 20, 'showtime_id': 13, 'seat_code': 'R5-8', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 28, 16, 8, 39, 437327, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 28, 16, 18, 39, 436459, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.440931+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.445617+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.446783+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.447312+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'pk_1': 12}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.450134+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 12, 'user_id': 20, 'showtime_id': 13, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.450327+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for reservation.created", "module": "event_publisher", "function": "publish_event", "line": 28, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.450488+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.451191+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.451362+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.451532+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.451759+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.452036+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.453732+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.455038+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.455409+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'showtime_id_1': 13, 'seat_code_1': 'R5-8', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.458830+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.459199+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'seat_code': 'R5-8', 'showtime_id': 13, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.462294+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.463055+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'status': 'LOCKED', 'locked_by_user_id': 20, 'lock_expires_at': datetime.datetime(2025, 12, 28, 16, 18, 39, 461199, tzinfo=datetime.timezone.utc), 'seat_locks_id': 9}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.465750+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.470701+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.471771+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.472293+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'pk_1': 9}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.475074+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 13, 'seat_code': 'R5-8', 'user_id': 20, 'expires_at': '2025-12-28T16:18:39.461199+00:00'}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.475364+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Using existing event loop for seat.locked", "module": "event_publisher", "function": "publish_event", "line": 23, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.475748+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.476928+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.477173+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.477368+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 12, 'user_id': 20, 'showtime_id': 13, 'seat_code': 'R5-8'}", "module": "handlers", "function": "on_reservation_created", "line": 21, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.477726+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 12", "module": "handlers", "function": "on_reservation_created", "line": 33, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.479552+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.480862+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.481406+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'user_id': 20, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 12}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.484572+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.488704+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.489872+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.490275+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'pk_1': 12}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.492469+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 12, 'reservation_id': 12, 'user_id': 20, 'showtime_id': 13, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.492659+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Using existing event loop for order.created", "module": "event_publisher", "function": "publish_event", "line": 23, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.492800+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 12", "module": "handlers", "function": "on_reservation_created", "line": 41, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.493072+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.494185+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.494553+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.496493+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.497934+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.498320+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00062s] {'actor_id': 20, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 12, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 12, \"user_id\": 20, \"showtime_id\": 13, \"seat_code\": \"R5-8\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 28, 16, 8, 39, 497473, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.500775+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.504723+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.505942+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.506275+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'pk_1': 12}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.508380+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.509495+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.511160+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.082s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.512262+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a0c5d5f0-0f87-4c7f-b24a-3669ba4ff1fd"}
{"timestamp": "2025-12-28T16:08:39.513806+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "f2da50c0-aeb9-47db-af36-32a9e9a62706"}
{"timestamp": "2025-12-28T16:08:39.516722+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f2da50c0-aeb9-47db-af36-32a9e9a62706"}
{"timestamp": "2025-12-28T16:08:39.517573+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f2da50c0-aeb9-47db-af36-32a9e9a62706"}
{"timestamp": "2025-12-28T16:08:39.517910+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2467s ago] {'pk_1': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f2da50c0-aeb9-47db-af36-32a9e9a62706"}
{"timestamp": "2025-12-28T16:08:39.520887+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f2da50c0-aeb9-47db-af36-32a9e9a62706"}
{"timestamp": "2025-12-28T16:08:39.521200+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'user_id_1': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f2da50c0-aeb9-47db-af36-32a9e9a62706"}
{"timestamp": "2025-12-28T16:08:39.523370+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.010s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "f2da50c0-aeb9-47db-af36-32a9e9a62706"}
{"timestamp": "2025-12-28T16:08:39.524342+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f2da50c0-aeb9-47db-af36-32a9e9a62706"}
{"timestamp": "2025-12-28T16:08:39.526372+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/order/12/initiate", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "bbd1fdd1-aec7-42c6-8ab9-642b74c765ec"}
{"timestamp": "2025-12-28T16:08:39.528889+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bbd1fdd1-aec7-42c6-8ab9-642b74c765ec"}
{"timestamp": "2025-12-28T16:08:39.529549+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bbd1fdd1-aec7-42c6-8ab9-642b74c765ec"}
{"timestamp": "2025-12-28T16:08:39.530009+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2587s ago] {'pk_1': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bbd1fdd1-aec7-42c6-8ab9-642b74c765ec"}
{"timestamp": "2025-12-28T16:08:39.533331+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO payment_attempts (order_id, amount_attempted, status, final_amount, failure_reason, provider_payment_id, created_at) VALUES (%(order_id)s, %(amount_attempted)s, %(status)s, %(final_amount)s, %(failure_reason)s, %(provider_payment_id)s, %(created_at)s) RETURNING payment_attempts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bbd1fdd1-aec7-42c6-8ab9-642b74c765ec"}
{"timestamp": "2025-12-28T16:08:39.533683+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'order_id': 12, 'amount_attempted': 10.0, 'status': 'PENDING', 'final_amount': 10.0, 'failure_reason': None, 'provider_payment_id': None, 'created_at': datetime.datetime(2025, 12, 28, 16, 8, 39, 533030, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bbd1fdd1-aec7-42c6-8ab9-642b74c765ec"}
{"timestamp": "2025-12-28T16:08:39.536149+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "bbd1fdd1-aec7-42c6-8ab9-642b74c765ec"}
{"timestamp": "2025-12-28T16:08:39.540433+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bbd1fdd1-aec7-42c6-8ab9-642b74c765ec"}
{"timestamp": "2025-12-28T16:08:39.541938+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bbd1fdd1-aec7-42c6-8ab9-642b74c765ec"}
{"timestamp": "2025-12-28T16:08:39.542393+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'pk_1': 5}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bbd1fdd1-aec7-42c6-8ab9-642b74c765ec"}
{"timestamp": "2025-12-28T16:08:39.544856+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.pending with payload: {'payment_attempt_id': 5, 'order_id': 12, 'amount_attempted': 10.0, 'final_amount': 10.0}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "bbd1fdd1-aec7-42c6-8ab9-642b74c765ec"}
{"timestamp": "2025-12-28T16:08:39.545071+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for payment.pending", "module": "event_publisher", "function": "publish_event", "line": 28, "request_id": "bbd1fdd1-aec7-42c6-8ab9-642b74c765ec"}
{"timestamp": "2025-12-28T16:08:39.545253+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "bbd1fdd1-aec7-42c6-8ab9-642b74c765ec"}
{"timestamp": "2025-12-28T16:08:39.546064+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.pending to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "bbd1fdd1-aec7-42c6-8ab9-642b74c765ec"}
{"timestamp": "2025-12-28T16:08:39.546282+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: payment.pending", "module": "event_bus", "function": "publish", "line": 30, "request_id": "bbd1fdd1-aec7-42c6-8ab9-642b74c765ec"}
{"timestamp": "2025-12-28T16:08:39.547523+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/order/12/initiate \u2192 200 (0.021s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "bbd1fdd1-aec7-42c6-8ab9-642b74c765ec"}
{"timestamp": "2025-12-28T16:08:39.548373+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "bbd1fdd1-aec7-42c6-8ab9-642b74c765ec"}
{"timestamp": "2025-12-28T16:08:39.550202+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/5/confirm", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "f6a8eacb-f289-41cf-8393-a9c91099e819"}
{"timestamp": "2025-12-28T16:08:39.553028+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f6a8eacb-f289-41cf-8393-a9c91099e819"}
{"timestamp": "2025-12-28T16:08:39.553769+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f6a8eacb-f289-41cf-8393-a9c91099e819"}
{"timestamp": "2025-12-28T16:08:39.554206+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.283s ago] {'pk_1': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f6a8eacb-f289-41cf-8393-a9c91099e819"}
{"timestamp": "2025-12-28T16:08:39.558192+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id AS payment_attempts_id, payment_attempts.order_id AS payment_attempts_order_id, payment_attempts.amount_attempted AS payment_attempts_amount_attempted, payment_attempts.status AS payment_attempts_status, payment_attempts.final_amount AS payment_attempts_final_amount, payment_attempts.failure_reason AS payment_attempts_failure_reason, payment_attempts.provider_payment_id AS payment_attempts_provider_payment_id, payment_attempts.created_at AS payment_attempts_created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f6a8eacb-f289-41cf-8393-a9c91099e819"}
{"timestamp": "2025-12-28T16:08:39.558737+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'pk_1': 5}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f6a8eacb-f289-41cf-8393-a9c91099e819"}
{"timestamp": "2025-12-28T16:08:39.561786+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f6a8eacb-f289-41cf-8393-a9c91099e819"}
{"timestamp": "2025-12-28T16:08:39.562107+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'pk_1': 12}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f6a8eacb-f289-41cf-8393-a9c91099e819"}
{"timestamp": "2025-12-28T16:08:39.564001+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f6a8eacb-f289-41cf-8393-a9c91099e819"}
{"timestamp": "2025-12-28T16:08:39.572600+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.middleware", "message": "\u2717 POST /payments/5/confirm \u2192 FAILED (0.016s)", "module": "middleware", "function": "dispatch", "line": 83, "request_id": "f6a8eacb-f289-41cf-8393-a9c91099e819", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 151, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\streams\\memory.py\", line 126, in receive\n    raise EndOfStream from None\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\middleware.py\", line 57, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    raise app_exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 390, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 291, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\concurrency.py\", line 38, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\to_thread.py\", line 56, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 2485, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 976, in run\n    result = context.run(func, *args)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\payment\\router.py\", line 50, in confirm_payment_route\n    return mark_payment_succeeded(\n        db=db,\n        payment_attempt_id=payment_attempt_id,\n        provider_payment_id=provider_payment_id\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\payment\\service.py\", line 66, in mark_payment_succeeded\n    raise ValidationError(\"Final amount not equal to order amount\")\napp.core.errors.ValidationError: Final amount not equal to order amount"}
{"timestamp": "2025-12-28T16:11:37.968739+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-28T16:11:40.362962+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-28T16:11:40.363366+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-28T16:11:40.363552+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.363831+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.364074+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.364360+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.364584+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.364814+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.365035+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.365259+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.365395+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.365542+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.365747+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.365913+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.366039+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.366205+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.366351+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.366472+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.366618+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.366802+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.367146+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.367417+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.367621+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.368039+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.368373+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.368639+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.368925+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.369138+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.369419+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.369579+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.369733+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.369904+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.370132+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.370289+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.370459+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.370622+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.370780+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.370913+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.371079+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.371258+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.371518+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.371884+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.372180+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.372540+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.372946+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.373375+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.373722+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.374164+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.374552+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.374923+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.375143+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.375451+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.375790+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.376180+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.376524+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.376901+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.377298+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.377629+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.378024+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.378381+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.378760+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.379169+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:11:40.379416+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-28T16:11:40.379591+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-28T16:11:53.365309+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.424210+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.424677+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.426813+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.427163+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.429056+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.429387+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.431961+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.434795+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.435311+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00062s] {'email_1': 'test_1766938311.339521@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.439044+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "detected 'bcrypt' backend, version '4.0.1'", "module": "bcrypt", "function": "_load_backend_mixin", "line": 625, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.439367+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "'bcrypt' backend lacks $2$ support, enabling workaround", "module": "bcrypt", "function": "_finalize_backend_mixin", "line": 406, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.663485+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.664326+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00100s] {'email': 'test_1766938311.339521@example.com', 'hashed_password': '$2b$12$m5Rjfaea2WDDCPkFU7fl3O3oQliQWn1/5HfqJks3N1AWqZXOQNBue', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.667125+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.673790+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.675107+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.675527+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'pk_1': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.677739+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 21, 'email': 'test_1766938311.339521@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.678115+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for auth.user_registered", "module": "event_publisher", "function": "publish_event", "line": 29, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.678491+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.679447+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.679779+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 34, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.680379+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.716050+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.717992+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.718542+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00089s] {'user_id_1': 21, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.723200+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.723665+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'user_id': 21, 'name': None, 'email': 'test_1766938311.339521@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.726387+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.730779+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.732144+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.732670+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00064s] {'pk_1': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.735115+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 21, 'user_id': 21, 'email': 'test_1766938311.339521@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.735355+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Using existing event loop for user.profile_created", "module": "event_publisher", "function": "publish_event", "line": 24, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.735751+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.737174+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.738670+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.739031+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.3045s ago] {'email_1': 'test_1766938311.339521@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.950056+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 21, 'email': 'test_1766938311.339521@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.950394+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for auth.user_logged_in", "module": "event_publisher", "function": "publish_event", "line": 29, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.950753+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.951598+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.951951+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 30, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.953513+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.588s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.954633+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "7f71ec8f-1bf0-4a7c-9c2f-d34f485277a5"}
{"timestamp": "2025-12-28T16:11:53.956956+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/login", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "88a49a4a-2312-4173-8a10-e492bac54af3"}
{"timestamp": "2025-12-28T16:11:53.957902+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "88a49a4a-2312-4173-8a10-e492bac54af3"}
{"timestamp": "2025-12-28T16:11:53.958164+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[0:8]", "module": "multipart", "function": "callback", "line": 625, "request_id": "88a49a4a-2312-4173-8a10-e492bac54af3"}
{"timestamp": "2025-12-28T16:11:53.958386+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[9:45]", "module": "multipart", "function": "callback", "line": 625, "request_id": "88a49a4a-2312-4173-8a10-e492bac54af3"}
{"timestamp": "2025-12-28T16:11:53.958619+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "88a49a4a-2312-4173-8a10-e492bac54af3"}
{"timestamp": "2025-12-28T16:11:53.958822+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "88a49a4a-2312-4173-8a10-e492bac54af3"}
{"timestamp": "2025-12-28T16:11:53.958984+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[46:54]", "module": "multipart", "function": "callback", "line": 625, "request_id": "88a49a4a-2312-4173-8a10-e492bac54af3"}
{"timestamp": "2025-12-28T16:11:53.959145+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[55:73]", "module": "multipart", "function": "callback", "line": 625, "request_id": "88a49a4a-2312-4173-8a10-e492bac54af3"}
{"timestamp": "2025-12-28T16:11:53.959531+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "88a49a4a-2312-4173-8a10-e492bac54af3"}
{"timestamp": "2025-12-28T16:11:53.959759+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "88a49a4a-2312-4173-8a10-e492bac54af3"}
{"timestamp": "2025-12-28T16:11:53.962337+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "88a49a4a-2312-4173-8a10-e492bac54af3"}
{"timestamp": "2025-12-28T16:11:53.963053+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "88a49a4a-2312-4173-8a10-e492bac54af3"}
{"timestamp": "2025-12-28T16:11:53.963451+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.5289s ago] {'email_1': 'test_1766938311.339521@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "88a49a4a-2312-4173-8a10-e492bac54af3"}
{"timestamp": "2025-12-28T16:11:54.174744+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 21, 'email': 'test_1766938311.339521@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "88a49a4a-2312-4173-8a10-e492bac54af3"}
{"timestamp": "2025-12-28T16:11:54.175044+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for auth.user_logged_in", "module": "event_publisher", "function": "publish_event", "line": 29, "request_id": "88a49a4a-2312-4173-8a10-e492bac54af3"}
{"timestamp": "2025-12-28T16:11:54.175260+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "88a49a4a-2312-4173-8a10-e492bac54af3"}
{"timestamp": "2025-12-28T16:11:54.176033+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "88a49a4a-2312-4173-8a10-e492bac54af3"}
{"timestamp": "2025-12-28T16:11:54.176250+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 30, "request_id": "88a49a4a-2312-4173-8a10-e492bac54af3"}
{"timestamp": "2025-12-28T16:11:54.177226+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/login \u2192 200 (0.220s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "88a49a4a-2312-4173-8a10-e492bac54af3"}
{"timestamp": "2025-12-28T16:11:54.178051+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "88a49a4a-2312-4173-8a10-e492bac54af3"}
{"timestamp": "2025-12-28T16:11:54.179470+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /profiles/me", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "421cffda-0c03-4aa7-8461-a4acda6efef9"}
{"timestamp": "2025-12-28T16:11:54.182619+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "421cffda-0c03-4aa7-8461-a4acda6efef9"}
{"timestamp": "2025-12-28T16:11:54.183894+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "421cffda-0c03-4aa7-8461-a4acda6efef9"}
{"timestamp": "2025-12-28T16:11:54.184240+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'pk_1': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "421cffda-0c03-4aa7-8461-a4acda6efef9"}
{"timestamp": "2025-12-28T16:11:54.187284+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "421cffda-0c03-4aa7-8461-a4acda6efef9"}
{"timestamp": "2025-12-28T16:11:54.187858+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.4702s ago] {'user_id_1': 21, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "421cffda-0c03-4aa7-8461-a4acda6efef9"}
{"timestamp": "2025-12-28T16:11:54.190950+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /profiles/me \u2192 200 (0.012s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "421cffda-0c03-4aa7-8461-a4acda6efef9"}
{"timestamp": "2025-12-28T16:11:54.191863+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "421cffda-0c03-4aa7-8461-a4acda6efef9"}
{"timestamp": "2025-12-28T16:11:54.194761+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "84001aa6-0918-427d-a03a-fce0a3534173"}
{"timestamp": "2025-12-28T16:11:54.197774+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "84001aa6-0918-427d-a03a-fce0a3534173"}
{"timestamp": "2025-12-28T16:11:54.199321+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "84001aa6-0918-427d-a03a-fce0a3534173"}
{"timestamp": "2025-12-28T16:11:54.199791+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'title_1': 'The Matrix Reloaded 1766938314.19246'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "84001aa6-0918-427d-a03a-fce0a3534173"}
{"timestamp": "2025-12-28T16:11:54.203770+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "84001aa6-0918-427d-a03a-fce0a3534173"}
{"timestamp": "2025-12-28T16:11:54.204238+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'title': 'The Matrix Reloaded 1766938314.19246', 'description': 'Test movie: The Matrix Reloaded 1766938314.19246', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "84001aa6-0918-427d-a03a-fce0a3534173"}
{"timestamp": "2025-12-28T16:11:54.206171+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "84001aa6-0918-427d-a03a-fce0a3534173"}
{"timestamp": "2025-12-28T16:11:54.210571+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "84001aa6-0918-427d-a03a-fce0a3534173"}
{"timestamp": "2025-12-28T16:11:54.211674+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "84001aa6-0918-427d-a03a-fce0a3534173"}
{"timestamp": "2025-12-28T16:11:54.211997+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'pk_1': 18}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "84001aa6-0918-427d-a03a-fce0a3534173"}
{"timestamp": "2025-12-28T16:11:54.214380+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 18}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "84001aa6-0918-427d-a03a-fce0a3534173"}
{"timestamp": "2025-12-28T16:11:54.214629+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for movie.created", "module": "event_publisher", "function": "publish_event", "line": 29, "request_id": "84001aa6-0918-427d-a03a-fce0a3534173"}
{"timestamp": "2025-12-28T16:11:54.214805+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "84001aa6-0918-427d-a03a-fce0a3534173"}
{"timestamp": "2025-12-28T16:11:54.215581+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "84001aa6-0918-427d-a03a-fce0a3534173"}
{"timestamp": "2025-12-28T16:11:54.215785+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "84001aa6-0918-427d-a03a-fce0a3534173"}
{"timestamp": "2025-12-28T16:11:54.216942+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "84001aa6-0918-427d-a03a-fce0a3534173"}
{"timestamp": "2025-12-28T16:11:54.217880+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "84001aa6-0918-427d-a03a-fce0a3534173"}
{"timestamp": "2025-12-28T16:11:54.220331+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "3eac326d-1dab-4379-adef-faf17ca8b4d7"}
{"timestamp": "2025-12-28T16:11:54.223429+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3eac326d-1dab-4379-adef-faf17ca8b4d7"}
{"timestamp": "2025-12-28T16:11:54.224699+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eac326d-1dab-4379-adef-faf17ca8b4d7"}
{"timestamp": "2025-12-28T16:11:54.225083+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'name_1': 'Standard Layout 1766938314.218238'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eac326d-1dab-4379-adef-faf17ca8b4d7"}
{"timestamp": "2025-12-28T16:11:54.227974+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eac326d-1dab-4379-adef-faf17ca8b4d7"}
{"timestamp": "2025-12-28T16:11:54.228293+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'name': 'Standard Layout 1766938314.218238', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eac326d-1dab-4379-adef-faf17ca8b4d7"}
{"timestamp": "2025-12-28T16:11:54.230035+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "3eac326d-1dab-4379-adef-faf17ca8b4d7"}
{"timestamp": "2025-12-28T16:11:54.234451+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3eac326d-1dab-4379-adef-faf17ca8b4d7"}
{"timestamp": "2025-12-28T16:11:54.235542+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eac326d-1dab-4379-adef-faf17ca8b4d7"}
{"timestamp": "2025-12-28T16:11:54.236001+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'pk_1': 17}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eac326d-1dab-4379-adef-faf17ca8b4d7"}
{"timestamp": "2025-12-28T16:11:54.238184+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 17}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "3eac326d-1dab-4379-adef-faf17ca8b4d7"}
{"timestamp": "2025-12-28T16:11:54.238373+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for screen.layout_created", "module": "event_publisher", "function": "publish_event", "line": 29, "request_id": "3eac326d-1dab-4379-adef-faf17ca8b4d7"}
{"timestamp": "2025-12-28T16:11:54.238584+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "3eac326d-1dab-4379-adef-faf17ca8b4d7"}
{"timestamp": "2025-12-28T16:11:54.239441+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "3eac326d-1dab-4379-adef-faf17ca8b4d7"}
{"timestamp": "2025-12-28T16:11:54.239676+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "3eac326d-1dab-4379-adef-faf17ca8b4d7"}
{"timestamp": "2025-12-28T16:11:54.240892+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.021s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "3eac326d-1dab-4379-adef-faf17ca8b4d7"}
{"timestamp": "2025-12-28T16:11:54.242845+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "3eac326d-1dab-4379-adef-faf17ca8b4d7"}
{"timestamp": "2025-12-28T16:11:54.253173+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "f25a51ec-413c-4405-a942-606361964893"}
{"timestamp": "2025-12-28T16:11:54.256393+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f25a51ec-413c-4405-a942-606361964893"}
{"timestamp": "2025-12-28T16:11:54.257785+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f25a51ec-413c-4405-a942-606361964893"}
{"timestamp": "2025-12-28T16:11:54.258200+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'name_1': 'Screen 1 1766938314.242138', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f25a51ec-413c-4405-a942-606361964893"}
{"timestamp": "2025-12-28T16:11:54.262051+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f25a51ec-413c-4405-a942-606361964893"}
{"timestamp": "2025-12-28T16:11:54.262484+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00067s] {'id_1': 17, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f25a51ec-413c-4405-a942-606361964893"}
{"timestamp": "2025-12-28T16:11:54.265622+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f25a51ec-413c-4405-a942-606361964893"}
{"timestamp": "2025-12-28T16:11:54.266141+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00064s] {'name': 'Screen 1 1766938314.242138', 'capacity': 150, 'seat_layout_id': 17}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f25a51ec-413c-4405-a942-606361964893"}
{"timestamp": "2025-12-28T16:11:54.268110+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "f25a51ec-413c-4405-a942-606361964893"}
{"timestamp": "2025-12-28T16:11:54.272244+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f25a51ec-413c-4405-a942-606361964893"}
{"timestamp": "2025-12-28T16:11:54.273216+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f25a51ec-413c-4405-a942-606361964893"}
{"timestamp": "2025-12-28T16:11:54.273573+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'pk_1': 17}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f25a51ec-413c-4405-a942-606361964893"}
{"timestamp": "2025-12-28T16:11:54.275805+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 17}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "f25a51ec-413c-4405-a942-606361964893"}
{"timestamp": "2025-12-28T16:11:54.276057+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for screen.created", "module": "event_publisher", "function": "publish_event", "line": 29, "request_id": "f25a51ec-413c-4405-a942-606361964893"}
{"timestamp": "2025-12-28T16:11:54.276324+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "f25a51ec-413c-4405-a942-606361964893"}
{"timestamp": "2025-12-28T16:11:54.295839+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "f25a51ec-413c-4405-a942-606361964893"}
{"timestamp": "2025-12-28T16:11:54.296245+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "f25a51ec-413c-4405-a942-606361964893"}
{"timestamp": "2025-12-28T16:11:54.298169+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.053s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "f25a51ec-413c-4405-a942-606361964893"}
{"timestamp": "2025-12-28T16:11:54.299467+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f25a51ec-413c-4405-a942-606361964893"}
{"timestamp": "2025-12-28T16:11:54.301675+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "c8256b56-1f54-4de6-bb84-dc2a442e54d0"}
{"timestamp": "2025-12-28T16:11:54.305717+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c8256b56-1f54-4de6-bb84-dc2a442e54d0"}
{"timestamp": "2025-12-28T16:11:54.307088+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8256b56-1f54-4de6-bb84-dc2a442e54d0"}
{"timestamp": "2025-12-28T16:11:54.307551+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'pk_1': 18}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8256b56-1f54-4de6-bb84-dc2a442e54d0"}
{"timestamp": "2025-12-28T16:11:54.310285+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8256b56-1f54-4de6-bb84-dc2a442e54d0"}
{"timestamp": "2025-12-28T16:11:54.310629+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'pk_1': 17}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8256b56-1f54-4de6-bb84-dc2a442e54d0"}
{"timestamp": "2025-12-28T16:11:54.314447+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8256b56-1f54-4de6-bb84-dc2a442e54d0"}
{"timestamp": "2025-12-28T16:11:54.314964+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00062s] {'screen_id_1': 17, 'start_time_1': datetime.datetime(2025, 12, 29, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 29, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8256b56-1f54-4de6-bb84-dc2a442e54d0"}
{"timestamp": "2025-12-28T16:11:54.317906+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8256b56-1f54-4de6-bb84-dc2a442e54d0"}
{"timestamp": "2025-12-28T16:11:54.318313+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'start_time': datetime.datetime(2025, 12, 29, 19, 0), 'end_time': datetime.datetime(2025, 12, 29, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 18, 'screen_id': 17}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8256b56-1f54-4de6-bb84-dc2a442e54d0"}
{"timestamp": "2025-12-28T16:11:54.320517+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "c8256b56-1f54-4de6-bb84-dc2a442e54d0"}
{"timestamp": "2025-12-28T16:11:54.324834+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c8256b56-1f54-4de6-bb84-dc2a442e54d0"}
{"timestamp": "2025-12-28T16:11:54.326054+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8256b56-1f54-4de6-bb84-dc2a442e54d0"}
{"timestamp": "2025-12-28T16:11:54.326456+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'pk_1': 14}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8256b56-1f54-4de6-bb84-dc2a442e54d0"}
{"timestamp": "2025-12-28T16:11:54.330385+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8256b56-1f54-4de6-bb84-dc2a442e54d0"}
{"timestamp": "2025-12-28T16:11:54.330854+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'pk_1': 18}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8256b56-1f54-4de6-bb84-dc2a442e54d0"}
{"timestamp": "2025-12-28T16:11:54.333406+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8256b56-1f54-4de6-bb84-dc2a442e54d0"}
{"timestamp": "2025-12-28T16:11:54.333861+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'pk_1': 17}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8256b56-1f54-4de6-bb84-dc2a442e54d0"}
{"timestamp": "2025-12-28T16:11:54.335413+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 14}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "c8256b56-1f54-4de6-bb84-dc2a442e54d0"}
{"timestamp": "2025-12-28T16:11:54.335613+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for showtime.created", "module": "event_publisher", "function": "publish_event", "line": 29, "request_id": "c8256b56-1f54-4de6-bb84-dc2a442e54d0"}
{"timestamp": "2025-12-28T16:11:54.335804+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "c8256b56-1f54-4de6-bb84-dc2a442e54d0"}
{"timestamp": "2025-12-28T16:11:54.336663+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "c8256b56-1f54-4de6-bb84-dc2a442e54d0"}
{"timestamp": "2025-12-28T16:11:54.336911+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "c8256b56-1f54-4de6-bb84-dc2a442e54d0"}
{"timestamp": "2025-12-28T16:11:54.338037+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.036s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "c8256b56-1f54-4de6-bb84-dc2a442e54d0"}
{"timestamp": "2025-12-28T16:11:54.338854+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c8256b56-1f54-4de6-bb84-dc2a442e54d0"}
{"timestamp": "2025-12-28T16:11:54.340829+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /seatavailability/grid/14", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "7d12d1ab-3220-4eda-83ec-6aea282d2b00"}
{"timestamp": "2025-12-28T16:11:54.344095+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7d12d1ab-3220-4eda-83ec-6aea282d2b00"}
{"timestamp": "2025-12-28T16:11:54.345860+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7d12d1ab-3220-4eda-83ec-6aea282d2b00"}
{"timestamp": "2025-12-28T16:11:54.346453+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00071s] {'showtime_id_1': 14}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7d12d1ab-3220-4eda-83ec-6aea282d2b00"}
{"timestamp": "2025-12-28T16:11:54.350171+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /seatavailability/grid/14 \u2192 200 (0.009s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "7d12d1ab-3220-4eda-83ec-6aea282d2b00"}
{"timestamp": "2025-12-28T16:11:54.351513+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "7d12d1ab-3220-4eda-83ec-6aea282d2b00"}
{"timestamp": "2025-12-28T16:11:54.353981+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.357551+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.358524+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.358980+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.1752s ago] {'pk_1': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.364243+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.365331+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00083s] {'user_id': 21, 'showtime_id': 14, 'seat_code': 'R5-8', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 28, 16, 11, 54, 363797, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 28, 16, 21, 54, 362698, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.369103+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.375201+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.377187+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.378019+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00097s] {'pk_1': 13}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.381951+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 13, 'user_id': 21, 'showtime_id': 14, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.382255+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for reservation.created", "module": "event_publisher", "function": "publish_event", "line": 29, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.382658+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.383943+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.384264+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.384566+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.384838+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.385222+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.387579+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.389403+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.389975+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00083s] {'showtime_id_1': 14, 'seat_code_1': 'R5-8', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.394029+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.394457+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'seat_code': 'R5-8', 'showtime_id': 14, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.398260+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.398768+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00074s] {'status': 'LOCKED', 'locked_by_user_id': 21, 'lock_expires_at': datetime.datetime(2025, 12, 28, 16, 21, 54, 396731, tzinfo=datetime.timezone.utc), 'seat_locks_id': 10}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.401183+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.405920+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.407084+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.407522+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'pk_1': 10}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.410282+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 14, 'seat_code': 'R5-8', 'user_id': 21, 'expires_at': '2025-12-28T16:21:54.396731+00:00'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.410636+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Using existing event loop for seat.locked", "module": "event_publisher", "function": "publish_event", "line": 24, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.411151+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.412385+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.412855+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.413183+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 13, 'user_id': 21, 'showtime_id': 14, 'seat_code': 'R5-8'}", "module": "handlers", "function": "on_reservation_created", "line": 21, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.413466+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 13", "module": "handlers", "function": "on_reservation_created", "line": 33, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.414999+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.416292+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.416660+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'user_id': 21, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 13}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.419456+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.424743+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.426250+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.426704+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00062s] {'pk_1': 13}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.429202+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 13, 'reservation_id': 13, 'user_id': 21, 'showtime_id': 14, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.429453+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Using existing event loop for order.created", "module": "event_publisher", "function": "publish_event", "line": 24, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.429758+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 13", "module": "handlers", "function": "on_reservation_created", "line": 41, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.430248+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.431433+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.431724+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.433232+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.434619+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.435188+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'actor_id': 21, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 13, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 13, \"user_id\": 21, \"showtime_id\": 14, \"seat_code\": \"R5-8\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 28, 16, 11, 54, 434264, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.438433+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.442528+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.443997+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.444411+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'pk_1': 13}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.446455+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.447422+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.448813+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.095s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.449975+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ae5bd0da-1340-47d3-8620-ced367d5e717"}
{"timestamp": "2025-12-28T16:11:54.451692+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "e46d7104-ff0f-4b8d-807c-4e54c4093f72"}
{"timestamp": "2025-12-28T16:11:54.454387+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e46d7104-ff0f-4b8d-807c-4e54c4093f72"}
{"timestamp": "2025-12-28T16:11:54.454980+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e46d7104-ff0f-4b8d-807c-4e54c4093f72"}
{"timestamp": "2025-12-28T16:11:54.455404+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2717s ago] {'pk_1': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e46d7104-ff0f-4b8d-807c-4e54c4093f72"}
{"timestamp": "2025-12-28T16:11:54.458385+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e46d7104-ff0f-4b8d-807c-4e54c4093f72"}
{"timestamp": "2025-12-28T16:11:54.458769+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'user_id_1': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e46d7104-ff0f-4b8d-807c-4e54c4093f72"}
{"timestamp": "2025-12-28T16:11:54.460772+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.009s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "e46d7104-ff0f-4b8d-807c-4e54c4093f72"}
{"timestamp": "2025-12-28T16:11:54.461624+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "e46d7104-ff0f-4b8d-807c-4e54c4093f72"}
{"timestamp": "2025-12-28T16:11:54.463680+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/order/13/initiate", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "e9f1c143-3660-4f91-8055-e7f2855f8fe4"}
{"timestamp": "2025-12-28T16:11:54.466321+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e9f1c143-3660-4f91-8055-e7f2855f8fe4"}
{"timestamp": "2025-12-28T16:11:54.467311+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e9f1c143-3660-4f91-8055-e7f2855f8fe4"}
{"timestamp": "2025-12-28T16:11:54.467871+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2841s ago] {'pk_1': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e9f1c143-3660-4f91-8055-e7f2855f8fe4"}
{"timestamp": "2025-12-28T16:11:54.471295+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO payment_attempts (order_id, amount_attempted, status, final_amount, failure_reason, provider_payment_id, created_at) VALUES (%(order_id)s, %(amount_attempted)s, %(status)s, %(final_amount)s, %(failure_reason)s, %(provider_payment_id)s, %(created_at)s) RETURNING payment_attempts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e9f1c143-3660-4f91-8055-e7f2855f8fe4"}
{"timestamp": "2025-12-28T16:11:54.471730+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'order_id': 13, 'amount_attempted': 10.0, 'status': 'PENDING', 'final_amount': 10.0, 'failure_reason': None, 'provider_payment_id': None, 'created_at': datetime.datetime(2025, 12, 28, 16, 11, 54, 470975, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e9f1c143-3660-4f91-8055-e7f2855f8fe4"}
{"timestamp": "2025-12-28T16:11:54.474031+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "e9f1c143-3660-4f91-8055-e7f2855f8fe4"}
{"timestamp": "2025-12-28T16:11:54.478266+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e9f1c143-3660-4f91-8055-e7f2855f8fe4"}
{"timestamp": "2025-12-28T16:11:54.479573+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e9f1c143-3660-4f91-8055-e7f2855f8fe4"}
{"timestamp": "2025-12-28T16:11:54.479912+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'pk_1': 6}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e9f1c143-3660-4f91-8055-e7f2855f8fe4"}
{"timestamp": "2025-12-28T16:11:54.482115+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.pending with payload: {'payment_attempt_id': 6, 'order_id': 13, 'amount_attempted': 10.0, 'final_amount': 10.0}", "module": "event_publisher", "function": "publish_event", "line": 20, "request_id": "e9f1c143-3660-4f91-8055-e7f2855f8fe4"}
{"timestamp": "2025-12-28T16:11:54.482503+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for payment.pending", "module": "event_publisher", "function": "publish_event", "line": 29, "request_id": "e9f1c143-3660-4f91-8055-e7f2855f8fe4"}
{"timestamp": "2025-12-28T16:11:54.482929+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "e9f1c143-3660-4f91-8055-e7f2855f8fe4"}
{"timestamp": "2025-12-28T16:11:54.484015+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.pending to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "e9f1c143-3660-4f91-8055-e7f2855f8fe4"}
{"timestamp": "2025-12-28T16:11:54.484282+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: payment.pending", "module": "event_bus", "function": "publish", "line": 30, "request_id": "e9f1c143-3660-4f91-8055-e7f2855f8fe4"}
{"timestamp": "2025-12-28T16:11:54.485772+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/order/13/initiate \u2192 200 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "e9f1c143-3660-4f91-8055-e7f2855f8fe4"}
{"timestamp": "2025-12-28T16:11:54.486785+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "e9f1c143-3660-4f91-8055-e7f2855f8fe4"}
{"timestamp": "2025-12-28T16:11:54.488581+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/6/confirm", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "32f394cb-93b3-4668-ad30-45f4b6519f79"}
{"timestamp": "2025-12-28T16:11:54.491035+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "32f394cb-93b3-4668-ad30-45f4b6519f79"}
{"timestamp": "2025-12-28T16:11:54.491600+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32f394cb-93b3-4668-ad30-45f4b6519f79"}
{"timestamp": "2025-12-28T16:11:54.491913+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.3083s ago] {'pk_1': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32f394cb-93b3-4668-ad30-45f4b6519f79"}
{"timestamp": "2025-12-28T16:11:54.495767+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id AS payment_attempts_id, payment_attempts.order_id AS payment_attempts_order_id, payment_attempts.amount_attempted AS payment_attempts_amount_attempted, payment_attempts.status AS payment_attempts_status, payment_attempts.final_amount AS payment_attempts_final_amount, payment_attempts.failure_reason AS payment_attempts_failure_reason, payment_attempts.provider_payment_id AS payment_attempts_provider_payment_id, payment_attempts.created_at AS payment_attempts_created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32f394cb-93b3-4668-ad30-45f4b6519f79"}
{"timestamp": "2025-12-28T16:11:54.496259+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00065s] {'pk_1': 6}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32f394cb-93b3-4668-ad30-45f4b6519f79"}
{"timestamp": "2025-12-28T16:11:54.499166+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32f394cb-93b3-4668-ad30-45f4b6519f79"}
{"timestamp": "2025-12-28T16:11:54.499661+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'pk_1': 13}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32f394cb-93b3-4668-ad30-45f4b6519f79"}
{"timestamp": "2025-12-28T16:11:54.501556+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "32f394cb-93b3-4668-ad30-45f4b6519f79"}
{"timestamp": "2025-12-28T16:11:54.509146+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.middleware", "message": "\u2717 POST /payments/6/confirm \u2192 FAILED (0.014s)", "module": "middleware", "function": "dispatch", "line": 83, "request_id": "32f394cb-93b3-4668-ad30-45f4b6519f79", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 151, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\streams\\memory.py\", line 126, in receive\n    raise EndOfStream from None\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\middleware.py\", line 57, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    raise app_exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 390, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 291, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\concurrency.py\", line 38, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\to_thread.py\", line 56, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 2485, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 976, in run\n    result = context.run(func, *args)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\payment\\router.py\", line 50, in confirm_payment_route\n    return mark_payment_succeeded(\n        db=db,\n        payment_attempt_id=payment_attempt_id,\n        provider_payment_id=provider_payment_id\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\payment\\service.py\", line 66, in mark_payment_succeeded\n    raise ValidationError(\"Final amount not equal to order amount\")\napp.core.errors.ValidationError: Final amount not equal to order amount"}
{"timestamp": "2025-12-28T16:12:29.934541+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-28T16:12:31.656259+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-28T16:12:31.656593+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-28T16:12:31.656802+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.657034+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.657242+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.657448+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.657683+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.657881+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.658085+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.658366+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.658591+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.658780+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.658926+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.659077+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.659242+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.659478+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.659755+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.659938+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.660124+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.660351+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.660541+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.660736+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.660926+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.661132+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.661460+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.661778+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.662067+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.662375+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.662667+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.663027+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.663260+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.663481+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.663722+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.664036+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.664444+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.664820+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.665065+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.665244+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.665380+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.665514+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.665648+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.665786+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.665992+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.666268+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.666575+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.666999+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.667339+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.667680+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.667937+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.668204+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.668408+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.668558+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.668699+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.668888+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.669282+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.669494+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.669689+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.669933+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.670112+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.670268+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.670494+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.670648+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:12:31.670848+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-28T16:12:31.670979+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-28T16:12:56.112736+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:12:56.169518+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:12:56.170010+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:12:56.172351+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:12:56.172705+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:12:56.174593+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:12:56.174945+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:12:56.177326+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:12:56.179885+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:12:56.180277+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'email_1': 'test_1766938374.061777@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:12:56.183833+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "detected 'bcrypt' backend, version '4.0.1'", "module": "bcrypt", "function": "_load_backend_mixin", "line": 625, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:12:56.184319+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "'bcrypt' backend lacks $2$ support, enabling workaround", "module": "bcrypt", "function": "_finalize_backend_mixin", "line": 406, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:12:56.409350+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:12:56.409770+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'email': 'test_1766938374.061777@example.com', 'hashed_password': '$2b$12$3KZDcEG7spu60DjdNp3Q7OB0OzafJ8.A6hUcGMRVX/ZMNuv5XcHJi', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:12:56.411994+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:12:56.417688+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:12:56.419226+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:12:56.419656+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:12:56.421939+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 22, 'email': 'test_1766938374.061777@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:12:56.422147+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for auth.user_registered", "module": "event_publisher", "function": "publish_event", "line": 38, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:12:56.422399+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:12:56.423177+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:12:56.423443+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 34, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:12:56.423782+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:12:56.439839+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:12:56.441540+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:12:56.441960+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00062s] {'user_id_1': 22, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:12:56.445657+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:12:56.446039+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'user_id': 22, 'name': None, 'email': 'test_1766938374.061777@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:12:56.448610+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:12:56.453608+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:12:56.454709+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:12:56.455050+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:12:56.457004+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 22, 'user_id': 22, 'email': 'test_1766938374.061777@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:12:56.457183+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Using existing event loop for user.profile_created", "module": "event_publisher", "function": "publish_event", "line": 22, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:13:06.459820+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:13:06.482533+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.event_bus", "message": "\u274c Event handler failed: auth.user_registered -> on_user_registered: ", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\shared\\services\\event_publisher.py\", line 21, in publish_event\n    loop = asyncio.get_running_loop()\nRuntimeError: no running event loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\event_bus.py\", line 40, in _safe_invoke\n    await handler(payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\user\\handlers.py\", line 19, in on_user_registered\n    profile_service.create_profile(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        db,\n        ^^^\n        user_id=user_id,\n        ^^^^^^^^^^^^^^^^\n        email=email,\n        ^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\user\\service.py\", line 41, in create_profile\n    publish_event(event[\"type\"], event[\"payload\"])\n    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\shared\\services\\event_publisher.py\", line 34, in publish_event\n    future.result(timeout=10.0)  # 10 second timeout\n    ~~~~~~~~~~~~~^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\concurrent\\futures\\_base.py\", line 458, in result\n    raise TimeoutError()\nTimeoutError"}
{"timestamp": "2025-12-28T16:13:06.487046+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:13:06.487342+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:13:06.488814+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:13:06.489377+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.31s ago] {'email_1': 'test_1766938374.061777@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:13:06.703249+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 22, 'email': 'test_1766938374.061777@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:13:06.703540+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for auth.user_logged_in", "module": "event_publisher", "function": "publish_event", "line": 38, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:13:06.703838+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:13:06.704693+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:13:06.704951+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 30, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:13:06.706268+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (10.594s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:13:06.707280+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f9eb86a2-ba4a-471b-b65f-28dc19d104b6"}
{"timestamp": "2025-12-28T16:13:06.709625+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/login", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "ad74d2e1-fbd1-4571-8fdc-42435b9a36ad"}
{"timestamp": "2025-12-28T16:13:06.710798+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "ad74d2e1-fbd1-4571-8fdc-42435b9a36ad"}
{"timestamp": "2025-12-28T16:13:06.711272+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[0:8]", "module": "multipart", "function": "callback", "line": 625, "request_id": "ad74d2e1-fbd1-4571-8fdc-42435b9a36ad"}
{"timestamp": "2025-12-28T16:13:06.711575+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[9:45]", "module": "multipart", "function": "callback", "line": 625, "request_id": "ad74d2e1-fbd1-4571-8fdc-42435b9a36ad"}
{"timestamp": "2025-12-28T16:13:06.711795+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "ad74d2e1-fbd1-4571-8fdc-42435b9a36ad"}
{"timestamp": "2025-12-28T16:13:06.712089+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "ad74d2e1-fbd1-4571-8fdc-42435b9a36ad"}
{"timestamp": "2025-12-28T16:13:06.712395+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[46:54]", "module": "multipart", "function": "callback", "line": 625, "request_id": "ad74d2e1-fbd1-4571-8fdc-42435b9a36ad"}
{"timestamp": "2025-12-28T16:13:06.712791+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[55:73]", "module": "multipart", "function": "callback", "line": 625, "request_id": "ad74d2e1-fbd1-4571-8fdc-42435b9a36ad"}
{"timestamp": "2025-12-28T16:13:06.713427+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "ad74d2e1-fbd1-4571-8fdc-42435b9a36ad"}
{"timestamp": "2025-12-28T16:13:06.713733+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "ad74d2e1-fbd1-4571-8fdc-42435b9a36ad"}
{"timestamp": "2025-12-28T16:13:06.717433+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ad74d2e1-fbd1-4571-8fdc-42435b9a36ad"}
{"timestamp": "2025-12-28T16:13:06.718272+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ad74d2e1-fbd1-4571-8fdc-42435b9a36ad"}
{"timestamp": "2025-12-28T16:13:06.718746+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.54s ago] {'email_1': 'test_1766938374.061777@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ad74d2e1-fbd1-4571-8fdc-42435b9a36ad"}
{"timestamp": "2025-12-28T16:13:06.928727+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 22, 'email': 'test_1766938374.061777@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "ad74d2e1-fbd1-4571-8fdc-42435b9a36ad"}
{"timestamp": "2025-12-28T16:13:06.929075+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for auth.user_logged_in", "module": "event_publisher", "function": "publish_event", "line": 38, "request_id": "ad74d2e1-fbd1-4571-8fdc-42435b9a36ad"}
{"timestamp": "2025-12-28T16:13:06.929536+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "ad74d2e1-fbd1-4571-8fdc-42435b9a36ad"}
{"timestamp": "2025-12-28T16:13:06.930473+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "ad74d2e1-fbd1-4571-8fdc-42435b9a36ad"}
{"timestamp": "2025-12-28T16:13:06.930739+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 30, "request_id": "ad74d2e1-fbd1-4571-8fdc-42435b9a36ad"}
{"timestamp": "2025-12-28T16:13:06.931893+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/login \u2192 200 (0.222s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "ad74d2e1-fbd1-4571-8fdc-42435b9a36ad"}
{"timestamp": "2025-12-28T16:13:06.932809+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ad74d2e1-fbd1-4571-8fdc-42435b9a36ad"}
{"timestamp": "2025-12-28T16:13:06.934748+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /profiles/me", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "c385b4b4-b819-424d-9877-6e7b5fbb75d0"}
{"timestamp": "2025-12-28T16:13:06.937607+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c385b4b4-b819-424d-9877-6e7b5fbb75d0"}
{"timestamp": "2025-12-28T16:13:06.939037+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c385b4b4-b819-424d-9877-6e7b5fbb75d0"}
{"timestamp": "2025-12-28T16:13:06.939774+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00073s] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c385b4b4-b819-424d-9877-6e7b5fbb75d0"}
{"timestamp": "2025-12-28T16:13:06.943495+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c385b4b4-b819-424d-9877-6e7b5fbb75d0"}
{"timestamp": "2025-12-28T16:13:06.945577+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.5s ago] {'user_id_1': 22, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c385b4b4-b819-424d-9877-6e7b5fbb75d0"}
{"timestamp": "2025-12-28T16:13:06.949710+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /profiles/me \u2192 200 (0.015s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "c385b4b4-b819-424d-9877-6e7b5fbb75d0"}
{"timestamp": "2025-12-28T16:13:06.951495+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c385b4b4-b819-424d-9877-6e7b5fbb75d0"}
{"timestamp": "2025-12-28T16:13:06.954289+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "767acaa0-366c-470c-8ab6-2f96a3990fe9"}
{"timestamp": "2025-12-28T16:13:06.957473+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "767acaa0-366c-470c-8ab6-2f96a3990fe9"}
{"timestamp": "2025-12-28T16:13:06.960517+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "767acaa0-366c-470c-8ab6-2f96a3990fe9"}
{"timestamp": "2025-12-28T16:13:06.961134+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00075s] {'title_1': 'The Matrix Reloaded 1766938386.952234'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "767acaa0-366c-470c-8ab6-2f96a3990fe9"}
{"timestamp": "2025-12-28T16:13:06.965243+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "767acaa0-366c-470c-8ab6-2f96a3990fe9"}
{"timestamp": "2025-12-28T16:13:06.966115+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00078s] {'title': 'The Matrix Reloaded 1766938386.952234', 'description': 'Test movie: The Matrix Reloaded 1766938386.952234', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "767acaa0-366c-470c-8ab6-2f96a3990fe9"}
{"timestamp": "2025-12-28T16:13:06.968239+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "767acaa0-366c-470c-8ab6-2f96a3990fe9"}
{"timestamp": "2025-12-28T16:13:06.974268+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "767acaa0-366c-470c-8ab6-2f96a3990fe9"}
{"timestamp": "2025-12-28T16:13:06.976154+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "767acaa0-366c-470c-8ab6-2f96a3990fe9"}
{"timestamp": "2025-12-28T16:13:06.976870+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00086s] {'pk_1': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "767acaa0-366c-470c-8ab6-2f96a3990fe9"}
{"timestamp": "2025-12-28T16:13:06.980730+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 19}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "767acaa0-366c-470c-8ab6-2f96a3990fe9"}
{"timestamp": "2025-12-28T16:13:06.981309+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for movie.created", "module": "event_publisher", "function": "publish_event", "line": 38, "request_id": "767acaa0-366c-470c-8ab6-2f96a3990fe9"}
{"timestamp": "2025-12-28T16:13:06.981812+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "767acaa0-366c-470c-8ab6-2f96a3990fe9"}
{"timestamp": "2025-12-28T16:13:06.982925+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "767acaa0-366c-470c-8ab6-2f96a3990fe9"}
{"timestamp": "2025-12-28T16:13:06.983238+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "767acaa0-366c-470c-8ab6-2f96a3990fe9"}
{"timestamp": "2025-12-28T16:13:06.984623+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.030s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "767acaa0-366c-470c-8ab6-2f96a3990fe9"}
{"timestamp": "2025-12-28T16:13:06.985598+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "767acaa0-366c-470c-8ab6-2f96a3990fe9"}
{"timestamp": "2025-12-28T16:13:06.987877+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "98e24c3d-993d-4922-9e94-699e630bcf72"}
{"timestamp": "2025-12-28T16:13:06.991020+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "98e24c3d-993d-4922-9e94-699e630bcf72"}
{"timestamp": "2025-12-28T16:13:06.992617+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "98e24c3d-993d-4922-9e94-699e630bcf72"}
{"timestamp": "2025-12-28T16:13:06.992950+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'name_1': 'Standard Layout 1766938386.985831'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "98e24c3d-993d-4922-9e94-699e630bcf72"}
{"timestamp": "2025-12-28T16:13:06.996322+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "98e24c3d-993d-4922-9e94-699e630bcf72"}
{"timestamp": "2025-12-28T16:13:06.996897+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'name': 'Standard Layout 1766938386.985831', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "98e24c3d-993d-4922-9e94-699e630bcf72"}
{"timestamp": "2025-12-28T16:13:06.998882+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "98e24c3d-993d-4922-9e94-699e630bcf72"}
{"timestamp": "2025-12-28T16:13:07.003785+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "98e24c3d-993d-4922-9e94-699e630bcf72"}
{"timestamp": "2025-12-28T16:13:07.005048+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "98e24c3d-993d-4922-9e94-699e630bcf72"}
{"timestamp": "2025-12-28T16:13:07.005574+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'pk_1': 18}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "98e24c3d-993d-4922-9e94-699e630bcf72"}
{"timestamp": "2025-12-28T16:13:07.009006+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 18}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "98e24c3d-993d-4922-9e94-699e630bcf72"}
{"timestamp": "2025-12-28T16:13:07.009376+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for screen.layout_created", "module": "event_publisher", "function": "publish_event", "line": 38, "request_id": "98e24c3d-993d-4922-9e94-699e630bcf72"}
{"timestamp": "2025-12-28T16:13:07.009860+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "98e24c3d-993d-4922-9e94-699e630bcf72"}
{"timestamp": "2025-12-28T16:13:07.010962+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "98e24c3d-993d-4922-9e94-699e630bcf72"}
{"timestamp": "2025-12-28T16:13:07.011320+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "98e24c3d-993d-4922-9e94-699e630bcf72"}
{"timestamp": "2025-12-28T16:13:07.012930+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.025s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "98e24c3d-993d-4922-9e94-699e630bcf72"}
{"timestamp": "2025-12-28T16:13:07.014310+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "98e24c3d-993d-4922-9e94-699e630bcf72"}
{"timestamp": "2025-12-28T16:13:07.016335+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "ab35256f-bdc8-4f19-9fa3-f7165bbc7063"}
{"timestamp": "2025-12-28T16:13:07.019889+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ab35256f-bdc8-4f19-9fa3-f7165bbc7063"}
{"timestamp": "2025-12-28T16:13:07.021432+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ab35256f-bdc8-4f19-9fa3-f7165bbc7063"}
{"timestamp": "2025-12-28T16:13:07.022023+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00066s] {'name_1': 'Screen 1 1766938387.013955', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ab35256f-bdc8-4f19-9fa3-f7165bbc7063"}
{"timestamp": "2025-12-28T16:13:07.026238+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ab35256f-bdc8-4f19-9fa3-f7165bbc7063"}
{"timestamp": "2025-12-28T16:13:07.026937+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00073s] {'id_1': 18, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ab35256f-bdc8-4f19-9fa3-f7165bbc7063"}
{"timestamp": "2025-12-28T16:13:07.030034+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ab35256f-bdc8-4f19-9fa3-f7165bbc7063"}
{"timestamp": "2025-12-28T16:13:07.030657+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'name': 'Screen 1 1766938387.013955', 'capacity': 150, 'seat_layout_id': 18}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ab35256f-bdc8-4f19-9fa3-f7165bbc7063"}
{"timestamp": "2025-12-28T16:13:07.032835+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "ab35256f-bdc8-4f19-9fa3-f7165bbc7063"}
{"timestamp": "2025-12-28T16:13:07.038146+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ab35256f-bdc8-4f19-9fa3-f7165bbc7063"}
{"timestamp": "2025-12-28T16:13:07.045777+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ab35256f-bdc8-4f19-9fa3-f7165bbc7063"}
{"timestamp": "2025-12-28T16:13:07.046233+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'pk_1': 18}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ab35256f-bdc8-4f19-9fa3-f7165bbc7063"}
{"timestamp": "2025-12-28T16:13:07.049668+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 18}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "ab35256f-bdc8-4f19-9fa3-f7165bbc7063"}
{"timestamp": "2025-12-28T16:13:07.050062+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for screen.created", "module": "event_publisher", "function": "publish_event", "line": 38, "request_id": "ab35256f-bdc8-4f19-9fa3-f7165bbc7063"}
{"timestamp": "2025-12-28T16:13:07.050342+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "ab35256f-bdc8-4f19-9fa3-f7165bbc7063"}
{"timestamp": "2025-12-28T16:13:07.051365+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "ab35256f-bdc8-4f19-9fa3-f7165bbc7063"}
{"timestamp": "2025-12-28T16:13:07.051795+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "ab35256f-bdc8-4f19-9fa3-f7165bbc7063"}
{"timestamp": "2025-12-28T16:13:07.053448+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.037s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "ab35256f-bdc8-4f19-9fa3-f7165bbc7063"}
{"timestamp": "2025-12-28T16:13:07.054796+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ab35256f-bdc8-4f19-9fa3-f7165bbc7063"}
{"timestamp": "2025-12-28T16:13:07.057295+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "e7e01e8c-8661-4990-95ea-7ccf59c5b224"}
{"timestamp": "2025-12-28T16:13:07.060705+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e7e01e8c-8661-4990-95ea-7ccf59c5b224"}
{"timestamp": "2025-12-28T16:13:07.062114+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e7e01e8c-8661-4990-95ea-7ccf59c5b224"}
{"timestamp": "2025-12-28T16:13:07.062577+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00062s] {'pk_1': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e7e01e8c-8661-4990-95ea-7ccf59c5b224"}
{"timestamp": "2025-12-28T16:13:07.065497+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e7e01e8c-8661-4990-95ea-7ccf59c5b224"}
{"timestamp": "2025-12-28T16:13:07.065851+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'pk_1': 18}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e7e01e8c-8661-4990-95ea-7ccf59c5b224"}
{"timestamp": "2025-12-28T16:13:07.068993+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e7e01e8c-8661-4990-95ea-7ccf59c5b224"}
{"timestamp": "2025-12-28T16:13:07.069628+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00064s] {'screen_id_1': 18, 'start_time_1': datetime.datetime(2025, 12, 29, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 29, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e7e01e8c-8661-4990-95ea-7ccf59c5b224"}
{"timestamp": "2025-12-28T16:13:07.073020+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e7e01e8c-8661-4990-95ea-7ccf59c5b224"}
{"timestamp": "2025-12-28T16:13:07.073527+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'start_time': datetime.datetime(2025, 12, 29, 19, 0), 'end_time': datetime.datetime(2025, 12, 29, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 19, 'screen_id': 18}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e7e01e8c-8661-4990-95ea-7ccf59c5b224"}
{"timestamp": "2025-12-28T16:13:07.076491+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "e7e01e8c-8661-4990-95ea-7ccf59c5b224"}
{"timestamp": "2025-12-28T16:13:07.081158+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e7e01e8c-8661-4990-95ea-7ccf59c5b224"}
{"timestamp": "2025-12-28T16:13:07.082607+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e7e01e8c-8661-4990-95ea-7ccf59c5b224"}
{"timestamp": "2025-12-28T16:13:07.083092+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00064s] {'pk_1': 15}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e7e01e8c-8661-4990-95ea-7ccf59c5b224"}
{"timestamp": "2025-12-28T16:13:07.086999+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e7e01e8c-8661-4990-95ea-7ccf59c5b224"}
{"timestamp": "2025-12-28T16:13:07.087515+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'pk_1': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e7e01e8c-8661-4990-95ea-7ccf59c5b224"}
{"timestamp": "2025-12-28T16:13:07.089892+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e7e01e8c-8661-4990-95ea-7ccf59c5b224"}
{"timestamp": "2025-12-28T16:13:07.090235+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'pk_1': 18}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e7e01e8c-8661-4990-95ea-7ccf59c5b224"}
{"timestamp": "2025-12-28T16:13:07.091725+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 15}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "e7e01e8c-8661-4990-95ea-7ccf59c5b224"}
{"timestamp": "2025-12-28T16:13:07.091976+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for showtime.created", "module": "event_publisher", "function": "publish_event", "line": 38, "request_id": "e7e01e8c-8661-4990-95ea-7ccf59c5b224"}
{"timestamp": "2025-12-28T16:13:07.092264+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "e7e01e8c-8661-4990-95ea-7ccf59c5b224"}
{"timestamp": "2025-12-28T16:13:07.093096+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "e7e01e8c-8661-4990-95ea-7ccf59c5b224"}
{"timestamp": "2025-12-28T16:13:07.093354+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "e7e01e8c-8661-4990-95ea-7ccf59c5b224"}
{"timestamp": "2025-12-28T16:13:07.094715+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.037s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "e7e01e8c-8661-4990-95ea-7ccf59c5b224"}
{"timestamp": "2025-12-28T16:13:07.095799+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "e7e01e8c-8661-4990-95ea-7ccf59c5b224"}
{"timestamp": "2025-12-28T16:13:07.097723+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /seatavailability/grid/15", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "a1a062eb-834a-4f2c-b929-564d464f9577"}
{"timestamp": "2025-12-28T16:13:07.100183+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a1a062eb-834a-4f2c-b929-564d464f9577"}
{"timestamp": "2025-12-28T16:13:07.102104+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a1a062eb-834a-4f2c-b929-564d464f9577"}
{"timestamp": "2025-12-28T16:13:07.102528+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'showtime_id_1': 15}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a1a062eb-834a-4f2c-b929-564d464f9577"}
{"timestamp": "2025-12-28T16:13:07.105709+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /seatavailability/grid/15 \u2192 200 (0.008s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "a1a062eb-834a-4f2c-b929-564d464f9577"}
{"timestamp": "2025-12-28T16:13:07.106946+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a1a062eb-834a-4f2c-b929-564d464f9577"}
{"timestamp": "2025-12-28T16:13:07.108711+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:07.111343+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:07.112213+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:07.112773+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.174s ago] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:07.117367+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:07.118103+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00071s] {'user_id': 22, 'showtime_id': 15, 'seat_code': 'R5-8', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 28, 16, 13, 7, 116913, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 28, 16, 23, 7, 115463, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:07.121002+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:07.125280+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:07.126418+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:07.126839+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'pk_1': 14}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:07.128999+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 14, 'user_id': 22, 'showtime_id': 15, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:07.129222+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for reservation.created", "module": "event_publisher", "function": "publish_event", "line": 38, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:07.129410+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:07.130183+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:07.130396+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:07.130560+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:07.131093+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:07.131676+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:07.133624+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:07.134841+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:07.135494+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00066s] {'showtime_id_1': 15, 'seat_code_1': 'R5-8', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:07.138924+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:07.139346+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'seat_code': 'R5-8', 'showtime_id': 15, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:07.142564+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:07.142985+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'status': 'LOCKED', 'locked_by_user_id': 22, 'lock_expires_at': datetime.datetime(2025, 12, 28, 16, 23, 7, 141470, tzinfo=datetime.timezone.utc), 'seat_locks_id': 11}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:07.144912+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:07.149745+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:07.150827+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:07.151270+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00067s] {'pk_1': 11}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:07.153644+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 15, 'seat_code': 'R5-8', 'user_id': 22, 'expires_at': '2025-12-28T16:23:07.141470+00:00'}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:07.153940+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Using existing event loop for seat.locked", "module": "event_publisher", "function": "publish_event", "line": 22, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:17.160352+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:17.163783+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.event_bus", "message": "\u274c Event handler failed: reservation.created -> on_reservation_created: ", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "457739ff-de95-4512-9985-26010b443e87", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\shared\\services\\event_publisher.py\", line 21, in publish_event\n    loop = asyncio.get_running_loop()\nRuntimeError: no running event loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\event_bus.py\", line 40, in _safe_invoke\n    await handler(payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\seat_availability\\handlers.py\", line 24, in on_reservation_created\n    seat_service.lock_seat(\n    ~~~~~~~~~~~~~~~~~~~~~~^\n        db,\n        ^^^\n    ...<2 lines>...\n        user_id=user_id,\n        ^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\seat_availability\\service.py\", line 62, in lock_seat\n    publish_event(\n    ~~~~~~~~~~~~~^\n        \"seat.locked\",\n        ^^^^^^^^^^^^^^\n    ...<5 lines>...\n        },\n        ^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\shared\\services\\event_publisher.py\", line 34, in publish_event\n    future.result(timeout=10.0)  # 10 second timeout\n    ~~~~~~~~~~~~~^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\concurrent\\futures\\_base.py\", line 458, in result\n    raise TimeoutError()\nTimeoutError"}
{"timestamp": "2025-12-28T16:13:17.167072+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:17.167320+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 14, 'user_id': 22, 'showtime_id': 15, 'seat_code': 'R5-8'}", "module": "handlers", "function": "on_reservation_created", "line": 21, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:17.167533+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 14", "module": "handlers", "function": "on_reservation_created", "line": 33, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:17.169305+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:17.170692+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:17.171159+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00064s] {'user_id': 22, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 14}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:17.174234+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:17.179356+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:17.180736+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:17.181244+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'pk_1': 14}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:17.183876+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 14, 'reservation_id': 14, 'user_id': 22, 'showtime_id': 15, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:17.184062+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Using existing event loop for order.created", "module": "event_publisher", "function": "publish_event", "line": 22, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:27.188316+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Failed to create order from reservation: ", "module": "handlers", "function": "on_reservation_created", "line": 43, "request_id": "457739ff-de95-4512-9985-26010b443e87", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\shared\\services\\event_publisher.py\", line 21, in publish_event\n    loop = asyncio.get_running_loop()\nRuntimeError: no running event loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\order\\handlers.py\", line 34, in on_reservation_created\n    create_order_from_event(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        db,\n        ^^^\n    ...<3 lines>...\n        seat_code=seat_code,\n        ^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\order\\service.py\", line 41, in create_order_from_event\n    publish_event(event[\"type\"], event[\"payload\"])\n    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\shared\\services\\event_publisher.py\", line 34, in publish_event\n    future.result(timeout=10.0)  # 10 second timeout\n    ~~~~~~~~~~~~~^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\concurrent\\futures\\_base.py\", line 458, in result\n    raise TimeoutError()\nTimeoutError"}
{"timestamp": "2025-12-28T16:13:27.191494+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:27.192885+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:27.193140+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:27.194853+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:27.196607+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:27.197111+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'actor_id': 22, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 14, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 14, \"user_id\": 22, \"showtime_id\": 15, \"seat_code\": \"R5-8\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 28, 16, 13, 27, 196187, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:27.199484+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:27.205350+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:27.206716+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:27.207214+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'pk_1': 14}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:27.209547+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:27.210819+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:27.211249+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:27.211422+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 30, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:27.211596+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:27.211747+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_order_created for order.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:27.212055+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_order_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:27.213748+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:27.214910+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:27.215349+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:27.222109+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 14, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:27.222283+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Using existing event loop for pricing.snapshot_created", "module": "event_publisher", "function": "publish_event", "line": 22, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:37.229029+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:37.231988+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.event_bus", "message": "\u274c Event handler failed: order.created -> on_order_created: ", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "457739ff-de95-4512-9985-26010b443e87", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\shared\\services\\event_publisher.py\", line 21, in publish_event\n    loop = asyncio.get_running_loop()\nRuntimeError: no running event loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\event_bus.py\", line 40, in _safe_invoke\n    await handler(payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\pricing\\handlers.py\", line 23, in on_order_created\n    create_snapshot_from_event(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        db=db,\n        ^^^^^^\n        order_id=order_id,\n        ^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\pricing\\service.py\", line 53, in create_snapshot_from_event\n    publish_event(event[\"type\"], event[\"payload\"])\n    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\shared\\services\\event_publisher.py\", line 34, in publish_event\n    future.result(timeout=10.0)  # 10 second timeout\n    ~~~~~~~~~~~~~^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\concurrent\\futures\\_base.py\", line 458, in result\n    raise TimeoutError()\nTimeoutError"}
{"timestamp": "2025-12-28T16:13:37.235985+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (30.127s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:37.236949+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "457739ff-de95-4512-9985-26010b443e87"}
{"timestamp": "2025-12-28T16:13:37.238880+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "3b01c161-6ac4-4b20-ba01-d059cf0a33a8"}
{"timestamp": "2025-12-28T16:13:37.241375+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3b01c161-6ac4-4b20-ba01-d059cf0a33a8"}
{"timestamp": "2025-12-28T16:13:37.242034+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3b01c161-6ac4-4b20-ba01-d059cf0a33a8"}
{"timestamp": "2025-12-28T16:13:37.242437+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 30.31s ago] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3b01c161-6ac4-4b20-ba01-d059cf0a33a8"}
{"timestamp": "2025-12-28T16:13:37.246437+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3b01c161-6ac4-4b20-ba01-d059cf0a33a8"}
{"timestamp": "2025-12-28T16:13:37.246890+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'user_id_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3b01c161-6ac4-4b20-ba01-d059cf0a33a8"}
{"timestamp": "2025-12-28T16:13:37.249201+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.010s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "3b01c161-6ac4-4b20-ba01-d059cf0a33a8"}
{"timestamp": "2025-12-28T16:13:37.250080+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "3b01c161-6ac4-4b20-ba01-d059cf0a33a8"}
{"timestamp": "2025-12-28T16:13:37.251944+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/order/14/initiate", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "bffe6478-1970-423a-8b04-6e265071a5df"}
{"timestamp": "2025-12-28T16:13:37.254524+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bffe6478-1970-423a-8b04-6e265071a5df"}
{"timestamp": "2025-12-28T16:13:37.255281+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bffe6478-1970-423a-8b04-6e265071a5df"}
{"timestamp": "2025-12-28T16:13:37.255755+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 30.32s ago] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bffe6478-1970-423a-8b04-6e265071a5df"}
{"timestamp": "2025-12-28T16:13:37.259415+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO payment_attempts (order_id, amount_attempted, status, final_amount, failure_reason, provider_payment_id, created_at) VALUES (%(order_id)s, %(amount_attempted)s, %(status)s, %(final_amount)s, %(failure_reason)s, %(provider_payment_id)s, %(created_at)s) RETURNING payment_attempts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bffe6478-1970-423a-8b04-6e265071a5df"}
{"timestamp": "2025-12-28T16:13:37.260008+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'order_id': 14, 'amount_attempted': 10.0, 'status': 'PENDING', 'final_amount': 10.0, 'failure_reason': None, 'provider_payment_id': None, 'created_at': datetime.datetime(2025, 12, 28, 16, 13, 37, 259012, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bffe6478-1970-423a-8b04-6e265071a5df"}
{"timestamp": "2025-12-28T16:13:37.262640+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "bffe6478-1970-423a-8b04-6e265071a5df"}
{"timestamp": "2025-12-28T16:13:37.268218+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bffe6478-1970-423a-8b04-6e265071a5df"}
{"timestamp": "2025-12-28T16:13:37.269661+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bffe6478-1970-423a-8b04-6e265071a5df"}
{"timestamp": "2025-12-28T16:13:37.270084+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'pk_1': 7}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bffe6478-1970-423a-8b04-6e265071a5df"}
{"timestamp": "2025-12-28T16:13:37.272382+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.pending with payload: {'payment_attempt_id': 7, 'order_id': 14, 'amount_attempted': 10.0, 'final_amount': 10.0}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "bffe6478-1970-423a-8b04-6e265071a5df"}
{"timestamp": "2025-12-28T16:13:37.272728+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for payment.pending", "module": "event_publisher", "function": "publish_event", "line": 38, "request_id": "bffe6478-1970-423a-8b04-6e265071a5df"}
{"timestamp": "2025-12-28T16:13:37.273066+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "bffe6478-1970-423a-8b04-6e265071a5df"}
{"timestamp": "2025-12-28T16:13:37.273906+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.pending to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "bffe6478-1970-423a-8b04-6e265071a5df"}
{"timestamp": "2025-12-28T16:13:37.274096+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: payment.pending", "module": "event_bus", "function": "publish", "line": 30, "request_id": "bffe6478-1970-423a-8b04-6e265071a5df"}
{"timestamp": "2025-12-28T16:13:37.275761+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/order/14/initiate \u2192 200 (0.024s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "bffe6478-1970-423a-8b04-6e265071a5df"}
{"timestamp": "2025-12-28T16:13:37.277201+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "bffe6478-1970-423a-8b04-6e265071a5df"}
{"timestamp": "2025-12-28T16:13:37.279082+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/7/confirm", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "7bb3456f-774f-4eb4-81b7-87fed8262ad5"}
{"timestamp": "2025-12-28T16:13:37.282037+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7bb3456f-774f-4eb4-81b7-87fed8262ad5"}
{"timestamp": "2025-12-28T16:13:37.282977+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7bb3456f-774f-4eb4-81b7-87fed8262ad5"}
{"timestamp": "2025-12-28T16:13:37.283616+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 30.35s ago] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7bb3456f-774f-4eb4-81b7-87fed8262ad5"}
{"timestamp": "2025-12-28T16:13:37.288334+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id AS payment_attempts_id, payment_attempts.order_id AS payment_attempts_order_id, payment_attempts.amount_attempted AS payment_attempts_amount_attempted, payment_attempts.status AS payment_attempts_status, payment_attempts.final_amount AS payment_attempts_final_amount, payment_attempts.failure_reason AS payment_attempts_failure_reason, payment_attempts.provider_payment_id AS payment_attempts_provider_payment_id, payment_attempts.created_at AS payment_attempts_created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7bb3456f-774f-4eb4-81b7-87fed8262ad5"}
{"timestamp": "2025-12-28T16:13:37.288942+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00068s] {'pk_1': 7}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7bb3456f-774f-4eb4-81b7-87fed8262ad5"}
{"timestamp": "2025-12-28T16:13:37.292634+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7bb3456f-774f-4eb4-81b7-87fed8262ad5"}
{"timestamp": "2025-12-28T16:13:37.293162+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'pk_1': 14}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7bb3456f-774f-4eb4-81b7-87fed8262ad5"}
{"timestamp": "2025-12-28T16:13:37.295695+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "7bb3456f-774f-4eb4-81b7-87fed8262ad5"}
{"timestamp": "2025-12-28T16:13:37.325617+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "asyncio", "message": "Task was destroyed but it is pending!\ntask: <Task pending name='Task-52' coro=<EventBus.publish() running at C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\event_bus.py:24> cb=[_chain_future.<locals>._call_set_state() at C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\futures.py:391]>", "module": "base_events", "function": "default_exception_handler", "line": 1871, "request_id": "7bb3456f-774f-4eb4-81b7-87fed8262ad5"}
{"timestamp": "2025-12-28T16:13:37.327978+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.middleware", "message": "\u2717 POST /payments/7/confirm \u2192 FAILED (0.018s)", "module": "middleware", "function": "dispatch", "line": 83, "request_id": "7bb3456f-774f-4eb4-81b7-87fed8262ad5", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 151, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\streams\\memory.py\", line 126, in receive\n    raise EndOfStream from None\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\middleware.py\", line 57, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    raise app_exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 390, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 291, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\concurrency.py\", line 38, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\to_thread.py\", line 56, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 2485, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 976, in run\n    result = context.run(func, *args)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\payment\\router.py\", line 50, in confirm_payment_route\n    return mark_payment_succeeded(\n        db=db,\n        payment_attempt_id=payment_attempt_id,\n        provider_payment_id=provider_payment_id\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\payment\\service.py\", line 66, in mark_payment_succeeded\n    raise ValidationError(\"Final amount not equal to order amount\")\napp.core.errors.ValidationError: Final amount not equal to order amount"}
{"timestamp": "2025-12-28T16:20:29.589554+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-28T16:20:31.619947+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-28T16:20:31.620359+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-28T16:20:31.620653+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.620954+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.621192+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.621364+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.621600+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.621772+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.621993+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.622165+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.622280+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.622391+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.622502+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.622644+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.622894+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.623023+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.623140+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.623257+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.623376+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.623489+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.623600+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.623709+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.623894+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.624010+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.624120+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.624229+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.624404+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.624667+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.625008+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.625302+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.625489+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.625652+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.625798+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.625955+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.626131+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.626275+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.626395+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.626508+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.626618+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.626746+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.626915+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.627043+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.627160+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.627270+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.627381+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.627493+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.627604+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.627712+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.627821+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.627929+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.628038+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.628146+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.628255+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.628365+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.628473+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.628581+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.628715+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.628911+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.629074+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.629196+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.629426+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.629675+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:20:31.629888+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-28T16:20:31.630151+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-28T16:21:10.677970+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-28T16:21:12.536563+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-28T16:21:12.537497+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-28T16:21:12.537964+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.538329+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.538653+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.538970+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.539234+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.539484+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.539940+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.540635+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.541140+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.541610+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.542034+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.542399+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.542774+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.543094+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.543324+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.543556+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.543936+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.544243+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.544556+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.544881+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.545253+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.545774+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.546492+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.547405+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.547924+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.548517+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.549185+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.549837+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.550420+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.551117+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.551630+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.552282+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.552842+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.553302+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.553849+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.554493+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.554944+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.555305+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.556179+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.556885+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.557371+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.557764+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.558262+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.558692+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.559042+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.559365+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.559605+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.559882+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.560208+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.560634+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.561154+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.561533+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.561872+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.562176+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.562653+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.563068+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.563464+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.563963+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.564518+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.564947+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:21:12.565421+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-28T16:21:12.566177+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-28T16:21:30.058541+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:30.116891+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:30.117292+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:30.119990+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:30.120355+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:30.122205+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:30.122682+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:30.124874+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:30.127537+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:30.127942+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00065s] {'email_1': 'test_1766938888.001488@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:30.131288+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "detected 'bcrypt' backend, version '4.0.1'", "module": "bcrypt", "function": "_load_backend_mixin", "line": 625, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:30.131654+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "'bcrypt' backend lacks $2$ support, enabling workaround", "module": "bcrypt", "function": "_finalize_backend_mixin", "line": 406, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:30.353986+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:30.354297+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'email': 'test_1766938888.001488@example.com', 'hashed_password': '$2b$12$ZaUAYtor/NzAduT6fe7K0..vI2CZh1EhGHLWItdkJRjGAlZcB8jPe', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:30.356392+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:30.362006+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:30.363424+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:30.363737+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:30.366078+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 23, 'email': 'test_1766938888.001488@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:30.366383+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for auth.user_registered", "module": "event_publisher", "function": "publish_event", "line": 38, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:30.366696+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:30.367439+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:30.367599+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 34, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:30.367824+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:30.391555+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:30.393038+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:30.393302+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'user_id_1': 23, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:30.397487+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:30.397973+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'user_id': 23, 'name': None, 'email': 'test_1766938888.001488@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:30.400621+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:30.405061+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:30.406035+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:30.406323+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:30.408577+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 23, 'user_id': 23, 'email': 'test_1766938888.001488@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:30.408811+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Using existing event loop for user.profile_created", "module": "event_publisher", "function": "publish_event", "line": 22, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:40.417027+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:40.423592+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.event_bus", "message": "\u274c Event handler failed: auth.user_registered -> on_user_registered: ", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\shared\\services\\event_publisher.py\", line 21, in publish_event\n    loop = asyncio.get_running_loop()\nRuntimeError: no running event loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\event_bus.py\", line 40, in _safe_invoke\n    await handler(payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\user\\handlers.py\", line 19, in on_user_registered\n    profile_service.create_profile(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        db,\n        ^^^\n        user_id=user_id,\n        ^^^^^^^^^^^^^^^^\n        email=email,\n        ^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\user\\service.py\", line 41, in create_profile\n    publish_event(event[\"type\"], event[\"payload\"])\n    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\shared\\services\\event_publisher.py\", line 34, in publish_event\n    future.result(timeout=10.0)  # 10 second timeout\n    ~~~~~~~~~~~~~^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\concurrent\\futures\\_base.py\", line 458, in result\n    raise TimeoutError()\nTimeoutError"}
{"timestamp": "2025-12-28T16:21:40.426898+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:40.427134+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:40.428173+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:40.428541+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.3s ago] {'email_1': 'test_1766938888.001488@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:40.643540+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 23, 'email': 'test_1766938888.001488@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:40.643741+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for auth.user_logged_in", "module": "event_publisher", "function": "publish_event", "line": 38, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:40.643971+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:40.644833+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:40.645043+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 30, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:40.646145+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (10.588s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:40.647140+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "8f3a40df-b3ed-4cd2-a9a1-74ae6a85fb1d"}
{"timestamp": "2025-12-28T16:21:40.649368+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/login", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "fe9d8238-8eda-44d6-bc7f-ae09325138f5"}
{"timestamp": "2025-12-28T16:21:40.650382+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "fe9d8238-8eda-44d6-bc7f-ae09325138f5"}
{"timestamp": "2025-12-28T16:21:40.650640+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[0:8]", "module": "multipart", "function": "callback", "line": 625, "request_id": "fe9d8238-8eda-44d6-bc7f-ae09325138f5"}
{"timestamp": "2025-12-28T16:21:40.650776+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[9:45]", "module": "multipart", "function": "callback", "line": 625, "request_id": "fe9d8238-8eda-44d6-bc7f-ae09325138f5"}
{"timestamp": "2025-12-28T16:21:40.651248+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "fe9d8238-8eda-44d6-bc7f-ae09325138f5"}
{"timestamp": "2025-12-28T16:21:40.651453+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "fe9d8238-8eda-44d6-bc7f-ae09325138f5"}
{"timestamp": "2025-12-28T16:21:40.651594+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[46:54]", "module": "multipart", "function": "callback", "line": 625, "request_id": "fe9d8238-8eda-44d6-bc7f-ae09325138f5"}
{"timestamp": "2025-12-28T16:21:40.651759+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[55:73]", "module": "multipart", "function": "callback", "line": 625, "request_id": "fe9d8238-8eda-44d6-bc7f-ae09325138f5"}
{"timestamp": "2025-12-28T16:21:40.652220+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "fe9d8238-8eda-44d6-bc7f-ae09325138f5"}
{"timestamp": "2025-12-28T16:21:40.652589+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "fe9d8238-8eda-44d6-bc7f-ae09325138f5"}
{"timestamp": "2025-12-28T16:21:40.655543+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "fe9d8238-8eda-44d6-bc7f-ae09325138f5"}
{"timestamp": "2025-12-28T16:21:40.656294+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "fe9d8238-8eda-44d6-bc7f-ae09325138f5"}
{"timestamp": "2025-12-28T16:21:40.656643+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.53s ago] {'email_1': 'test_1766938888.001488@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "fe9d8238-8eda-44d6-bc7f-ae09325138f5"}
{"timestamp": "2025-12-28T16:21:40.863643+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 23, 'email': 'test_1766938888.001488@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "fe9d8238-8eda-44d6-bc7f-ae09325138f5"}
{"timestamp": "2025-12-28T16:21:40.863874+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for auth.user_logged_in", "module": "event_publisher", "function": "publish_event", "line": 38, "request_id": "fe9d8238-8eda-44d6-bc7f-ae09325138f5"}
{"timestamp": "2025-12-28T16:21:40.864113+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "fe9d8238-8eda-44d6-bc7f-ae09325138f5"}
{"timestamp": "2025-12-28T16:21:40.864901+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "fe9d8238-8eda-44d6-bc7f-ae09325138f5"}
{"timestamp": "2025-12-28T16:21:40.865135+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 30, "request_id": "fe9d8238-8eda-44d6-bc7f-ae09325138f5"}
{"timestamp": "2025-12-28T16:21:40.866281+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/login \u2192 200 (0.217s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "fe9d8238-8eda-44d6-bc7f-ae09325138f5"}
{"timestamp": "2025-12-28T16:21:40.867207+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "fe9d8238-8eda-44d6-bc7f-ae09325138f5"}
{"timestamp": "2025-12-28T16:21:40.868869+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /profiles/me", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "fda39e7a-7c27-4392-a28e-49e7b3439358"}
{"timestamp": "2025-12-28T16:21:40.871442+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "fda39e7a-7c27-4392-a28e-49e7b3439358"}
{"timestamp": "2025-12-28T16:21:40.872960+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "fda39e7a-7c27-4392-a28e-49e7b3439358"}
{"timestamp": "2025-12-28T16:21:40.873492+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00065s] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "fda39e7a-7c27-4392-a28e-49e7b3439358"}
{"timestamp": "2025-12-28T16:21:40.877280+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "fda39e7a-7c27-4392-a28e-49e7b3439358"}
{"timestamp": "2025-12-28T16:21:40.877831+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.49s ago] {'user_id_1': 23, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "fda39e7a-7c27-4392-a28e-49e7b3439358"}
{"timestamp": "2025-12-28T16:21:40.880812+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /profiles/me \u2192 200 (0.012s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "fda39e7a-7c27-4392-a28e-49e7b3439358"}
{"timestamp": "2025-12-28T16:21:40.881870+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "fda39e7a-7c27-4392-a28e-49e7b3439358"}
{"timestamp": "2025-12-28T16:21:40.884225+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "6724acb8-8a74-491d-85bb-8a8c6b2424c5"}
{"timestamp": "2025-12-28T16:21:40.887007+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6724acb8-8a74-491d-85bb-8a8c6b2424c5"}
{"timestamp": "2025-12-28T16:21:40.889610+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6724acb8-8a74-491d-85bb-8a8c6b2424c5"}
{"timestamp": "2025-12-28T16:21:40.890151+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00068s] {'title_1': 'The Matrix Reloaded 1766938900.882426'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6724acb8-8a74-491d-85bb-8a8c6b2424c5"}
{"timestamp": "2025-12-28T16:21:40.894066+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6724acb8-8a74-491d-85bb-8a8c6b2424c5"}
{"timestamp": "2025-12-28T16:21:40.894560+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'title': 'The Matrix Reloaded 1766938900.882426', 'description': 'Test movie: The Matrix Reloaded 1766938900.882426', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6724acb8-8a74-491d-85bb-8a8c6b2424c5"}
{"timestamp": "2025-12-28T16:21:40.896807+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6724acb8-8a74-491d-85bb-8a8c6b2424c5"}
{"timestamp": "2025-12-28T16:21:40.902149+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6724acb8-8a74-491d-85bb-8a8c6b2424c5"}
{"timestamp": "2025-12-28T16:21:40.903299+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6724acb8-8a74-491d-85bb-8a8c6b2424c5"}
{"timestamp": "2025-12-28T16:21:40.903858+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'pk_1': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6724acb8-8a74-491d-85bb-8a8c6b2424c5"}
{"timestamp": "2025-12-28T16:21:40.906934+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 20}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "6724acb8-8a74-491d-85bb-8a8c6b2424c5"}
{"timestamp": "2025-12-28T16:21:40.907358+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for movie.created", "module": "event_publisher", "function": "publish_event", "line": 38, "request_id": "6724acb8-8a74-491d-85bb-8a8c6b2424c5"}
{"timestamp": "2025-12-28T16:21:40.907636+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "6724acb8-8a74-491d-85bb-8a8c6b2424c5"}
{"timestamp": "2025-12-28T16:21:40.908579+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "6724acb8-8a74-491d-85bb-8a8c6b2424c5"}
{"timestamp": "2025-12-28T16:21:40.908847+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "6724acb8-8a74-491d-85bb-8a8c6b2424c5"}
{"timestamp": "2025-12-28T16:21:40.910216+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.026s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "6724acb8-8a74-491d-85bb-8a8c6b2424c5"}
{"timestamp": "2025-12-28T16:21:40.911017+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6724acb8-8a74-491d-85bb-8a8c6b2424c5"}
{"timestamp": "2025-12-28T16:21:40.912854+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "4da21445-e697-4f46-bee8-3f49254f029b"}
{"timestamp": "2025-12-28T16:21:40.915710+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "4da21445-e697-4f46-bee8-3f49254f029b"}
{"timestamp": "2025-12-28T16:21:40.917157+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4da21445-e697-4f46-bee8-3f49254f029b"}
{"timestamp": "2025-12-28T16:21:40.917543+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'name_1': 'Standard Layout 1766938900.911157'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4da21445-e697-4f46-bee8-3f49254f029b"}
{"timestamp": "2025-12-28T16:21:40.921483+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4da21445-e697-4f46-bee8-3f49254f029b"}
{"timestamp": "2025-12-28T16:21:40.922095+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'name': 'Standard Layout 1766938900.911157', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4da21445-e697-4f46-bee8-3f49254f029b"}
{"timestamp": "2025-12-28T16:21:40.924837+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "4da21445-e697-4f46-bee8-3f49254f029b"}
{"timestamp": "2025-12-28T16:21:40.928920+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "4da21445-e697-4f46-bee8-3f49254f029b"}
{"timestamp": "2025-12-28T16:21:40.930042+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4da21445-e697-4f46-bee8-3f49254f029b"}
{"timestamp": "2025-12-28T16:21:40.930435+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'pk_1': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4da21445-e697-4f46-bee8-3f49254f029b"}
{"timestamp": "2025-12-28T16:21:40.932562+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 19}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "4da21445-e697-4f46-bee8-3f49254f029b"}
{"timestamp": "2025-12-28T16:21:40.932758+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for screen.layout_created", "module": "event_publisher", "function": "publish_event", "line": 38, "request_id": "4da21445-e697-4f46-bee8-3f49254f029b"}
{"timestamp": "2025-12-28T16:21:40.932918+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "4da21445-e697-4f46-bee8-3f49254f029b"}
{"timestamp": "2025-12-28T16:21:40.933612+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "4da21445-e697-4f46-bee8-3f49254f029b"}
{"timestamp": "2025-12-28T16:21:40.933783+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "4da21445-e697-4f46-bee8-3f49254f029b"}
{"timestamp": "2025-12-28T16:21:40.934874+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "4da21445-e697-4f46-bee8-3f49254f029b"}
{"timestamp": "2025-12-28T16:21:40.936190+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "4da21445-e697-4f46-bee8-3f49254f029b"}
{"timestamp": "2025-12-28T16:21:40.937618+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "07fe7190-ea8f-4b27-8860-51f36d706f68"}
{"timestamp": "2025-12-28T16:21:40.940102+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "07fe7190-ea8f-4b27-8860-51f36d706f68"}
{"timestamp": "2025-12-28T16:21:40.941283+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "07fe7190-ea8f-4b27-8860-51f36d706f68"}
{"timestamp": "2025-12-28T16:21:40.941661+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'name_1': 'Screen 1 1766938900.935816', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "07fe7190-ea8f-4b27-8860-51f36d706f68"}
{"timestamp": "2025-12-28T16:21:40.944774+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "07fe7190-ea8f-4b27-8860-51f36d706f68"}
{"timestamp": "2025-12-28T16:21:40.945183+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'id_1': 19, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "07fe7190-ea8f-4b27-8860-51f36d706f68"}
{"timestamp": "2025-12-28T16:21:40.947451+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "07fe7190-ea8f-4b27-8860-51f36d706f68"}
{"timestamp": "2025-12-28T16:21:40.947786+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00042s] {'name': 'Screen 1 1766938900.935816', 'capacity': 150, 'seat_layout_id': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "07fe7190-ea8f-4b27-8860-51f36d706f68"}
{"timestamp": "2025-12-28T16:21:40.949875+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "07fe7190-ea8f-4b27-8860-51f36d706f68"}
{"timestamp": "2025-12-28T16:21:40.954589+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "07fe7190-ea8f-4b27-8860-51f36d706f68"}
{"timestamp": "2025-12-28T16:21:40.959910+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "07fe7190-ea8f-4b27-8860-51f36d706f68"}
{"timestamp": "2025-12-28T16:21:40.960350+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'pk_1': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "07fe7190-ea8f-4b27-8860-51f36d706f68"}
{"timestamp": "2025-12-28T16:21:40.962650+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 19}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "07fe7190-ea8f-4b27-8860-51f36d706f68"}
{"timestamp": "2025-12-28T16:21:40.962861+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for screen.created", "module": "event_publisher", "function": "publish_event", "line": 38, "request_id": "07fe7190-ea8f-4b27-8860-51f36d706f68"}
{"timestamp": "2025-12-28T16:21:40.963018+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "07fe7190-ea8f-4b27-8860-51f36d706f68"}
{"timestamp": "2025-12-28T16:21:40.963902+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "07fe7190-ea8f-4b27-8860-51f36d706f68"}
{"timestamp": "2025-12-28T16:21:40.964127+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "07fe7190-ea8f-4b27-8860-51f36d706f68"}
{"timestamp": "2025-12-28T16:21:40.965272+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.028s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "07fe7190-ea8f-4b27-8860-51f36d706f68"}
{"timestamp": "2025-12-28T16:21:40.966215+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "07fe7190-ea8f-4b27-8860-51f36d706f68"}
{"timestamp": "2025-12-28T16:21:40.968187+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "c178bda8-45df-4d9c-a5b2-4ee57ada653c"}
{"timestamp": "2025-12-28T16:21:40.970521+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c178bda8-45df-4d9c-a5b2-4ee57ada653c"}
{"timestamp": "2025-12-28T16:21:40.971742+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c178bda8-45df-4d9c-a5b2-4ee57ada653c"}
{"timestamp": "2025-12-28T16:21:40.972091+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'pk_1': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c178bda8-45df-4d9c-a5b2-4ee57ada653c"}
{"timestamp": "2025-12-28T16:21:40.974675+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c178bda8-45df-4d9c-a5b2-4ee57ada653c"}
{"timestamp": "2025-12-28T16:21:40.974955+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'pk_1': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c178bda8-45df-4d9c-a5b2-4ee57ada653c"}
{"timestamp": "2025-12-28T16:21:40.977656+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c178bda8-45df-4d9c-a5b2-4ee57ada653c"}
{"timestamp": "2025-12-28T16:21:40.978097+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'screen_id_1': 19, 'start_time_1': datetime.datetime(2025, 12, 29, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 29, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c178bda8-45df-4d9c-a5b2-4ee57ada653c"}
{"timestamp": "2025-12-28T16:21:40.980681+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c178bda8-45df-4d9c-a5b2-4ee57ada653c"}
{"timestamp": "2025-12-28T16:21:40.981026+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00043s] {'start_time': datetime.datetime(2025, 12, 29, 19, 0), 'end_time': datetime.datetime(2025, 12, 29, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 20, 'screen_id': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c178bda8-45df-4d9c-a5b2-4ee57ada653c"}
{"timestamp": "2025-12-28T16:21:40.983894+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "c178bda8-45df-4d9c-a5b2-4ee57ada653c"}
{"timestamp": "2025-12-28T16:21:40.988267+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c178bda8-45df-4d9c-a5b2-4ee57ada653c"}
{"timestamp": "2025-12-28T16:21:40.989153+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c178bda8-45df-4d9c-a5b2-4ee57ada653c"}
{"timestamp": "2025-12-28T16:21:40.989420+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00040s] {'pk_1': 16}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c178bda8-45df-4d9c-a5b2-4ee57ada653c"}
{"timestamp": "2025-12-28T16:21:40.992423+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c178bda8-45df-4d9c-a5b2-4ee57ada653c"}
{"timestamp": "2025-12-28T16:21:40.992707+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'pk_1': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c178bda8-45df-4d9c-a5b2-4ee57ada653c"}
{"timestamp": "2025-12-28T16:21:40.994710+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c178bda8-45df-4d9c-a5b2-4ee57ada653c"}
{"timestamp": "2025-12-28T16:21:40.994966+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00038s] {'pk_1': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c178bda8-45df-4d9c-a5b2-4ee57ada653c"}
{"timestamp": "2025-12-28T16:21:40.996432+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 16}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "c178bda8-45df-4d9c-a5b2-4ee57ada653c"}
{"timestamp": "2025-12-28T16:21:40.996610+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for showtime.created", "module": "event_publisher", "function": "publish_event", "line": 38, "request_id": "c178bda8-45df-4d9c-a5b2-4ee57ada653c"}
{"timestamp": "2025-12-28T16:21:40.996764+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "c178bda8-45df-4d9c-a5b2-4ee57ada653c"}
{"timestamp": "2025-12-28T16:21:40.997506+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "c178bda8-45df-4d9c-a5b2-4ee57ada653c"}
{"timestamp": "2025-12-28T16:21:40.997671+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "c178bda8-45df-4d9c-a5b2-4ee57ada653c"}
{"timestamp": "2025-12-28T16:21:40.999012+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.031s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "c178bda8-45df-4d9c-a5b2-4ee57ada653c"}
{"timestamp": "2025-12-28T16:21:40.999954+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c178bda8-45df-4d9c-a5b2-4ee57ada653c"}
{"timestamp": "2025-12-28T16:21:41.001651+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /seatavailability/grid/16", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "09ef6669-5a9e-4f32-bc0d-a1a976aa7af6"}
{"timestamp": "2025-12-28T16:21:41.003865+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "09ef6669-5a9e-4f32-bc0d-a1a976aa7af6"}
{"timestamp": "2025-12-28T16:21:41.005482+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "09ef6669-5a9e-4f32-bc0d-a1a976aa7af6"}
{"timestamp": "2025-12-28T16:21:41.005883+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'showtime_id_1': 16}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "09ef6669-5a9e-4f32-bc0d-a1a976aa7af6"}
{"timestamp": "2025-12-28T16:21:41.008588+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /seatavailability/grid/16 \u2192 200 (0.007s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "09ef6669-5a9e-4f32-bc0d-a1a976aa7af6"}
{"timestamp": "2025-12-28T16:21:41.009352+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "09ef6669-5a9e-4f32-bc0d-a1a976aa7af6"}
{"timestamp": "2025-12-28T16:21:41.011070+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:21:41.013633+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:21:41.014506+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:21:41.015037+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.1422s ago] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:21:41.019267+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:21:41.019892+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'user_id': 23, 'showtime_id': 16, 'seat_code': 'R5-8', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 28, 16, 21, 41, 18857, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 28, 16, 31, 41, 17882, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:21:41.022710+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:21:41.026859+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:21:41.028130+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:21:41.028492+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'pk_1': 15}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:21:41.030893+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 15, 'user_id': 23, 'showtime_id': 16, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:21:41.031149+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for reservation.created", "module": "event_publisher", "function": "publish_event", "line": 38, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:21:41.031401+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:21:41.032315+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:21:41.032558+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:21:41.032728+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:21:41.033131+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:21:41.033520+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:21:41.035243+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:21:41.036397+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:21:41.036679+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'showtime_id_1': 16, 'seat_code_1': 'R5-8', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:21:41.039802+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:21:41.040264+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'seat_code': 'R5-8', 'showtime_id': 16, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:21:41.043345+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:21:41.043654+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'status': 'LOCKED', 'locked_by_user_id': 23, 'lock_expires_at': datetime.datetime(2025, 12, 28, 16, 31, 41, 42227, tzinfo=datetime.timezone.utc), 'seat_locks_id': 12}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:21:41.045509+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:21:41.050949+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:21:41.052008+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:21:41.052329+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'pk_1': 12}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:21:41.054617+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 16, 'seat_code': 'R5-8', 'user_id': 23, 'expires_at': '2025-12-28T16:31:41.042227+00:00'}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:21:41.054916+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Using existing event loop for seat.locked", "module": "event_publisher", "function": "publish_event", "line": 22, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:21:51.059429+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:21:51.063558+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.event_bus", "message": "\u274c Event handler failed: reservation.created -> on_reservation_created: ", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\shared\\services\\event_publisher.py\", line 21, in publish_event\n    loop = asyncio.get_running_loop()\nRuntimeError: no running event loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\event_bus.py\", line 40, in _safe_invoke\n    await handler(payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\seat_availability\\handlers.py\", line 24, in on_reservation_created\n    seat_service.lock_seat(\n    ~~~~~~~~~~~~~~~~~~~~~~^\n        db,\n        ^^^\n    ...<2 lines>...\n        user_id=user_id,\n        ^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\seat_availability\\service.py\", line 62, in lock_seat\n    publish_event(\n    ~~~~~~~~~~~~~^\n        \"seat.locked\",\n        ^^^^^^^^^^^^^^\n    ...<5 lines>...\n        },\n        ^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\shared\\services\\event_publisher.py\", line 34, in publish_event\n    future.result(timeout=10.0)  # 10 second timeout\n    ~~~~~~~~~~~~~^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\concurrent\\futures\\_base.py\", line 458, in result\n    raise TimeoutError()\nTimeoutError"}
{"timestamp": "2025-12-28T16:21:51.066706+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:21:51.066937+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 15, 'user_id': 23, 'showtime_id': 16, 'seat_code': 'R5-8'}", "module": "handlers", "function": "on_reservation_created", "line": 21, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:21:51.067162+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 15", "module": "handlers", "function": "on_reservation_created", "line": 33, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:21:51.069077+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:21:51.070413+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:21:51.070799+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'user_id': 23, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 15}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:21:51.073525+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:21:51.078424+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:21:51.079591+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:21:51.079916+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'pk_1': 15}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:21:51.082227+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 15, 'reservation_id': 15, 'user_id': 23, 'showtime_id': 16, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:21:51.082426+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Using existing event loop for order.created", "module": "event_publisher", "function": "publish_event", "line": 22, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:22:01.094407+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Failed to create order from reservation: ", "module": "handlers", "function": "on_reservation_created", "line": 43, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\shared\\services\\event_publisher.py\", line 21, in publish_event\n    loop = asyncio.get_running_loop()\nRuntimeError: no running event loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\order\\handlers.py\", line 34, in on_reservation_created\n    create_order_from_event(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        db,\n        ^^^\n    ...<3 lines>...\n        seat_code=seat_code,\n        ^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\order\\service.py\", line 41, in create_order_from_event\n    publish_event(event[\"type\"], event[\"payload\"])\n    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\shared\\services\\event_publisher.py\", line 34, in publish_event\n    future.result(timeout=10.0)  # 10 second timeout\n    ~~~~~~~~~~~~~^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\concurrent\\futures\\_base.py\", line 458, in result\n    raise TimeoutError()\nTimeoutError"}
{"timestamp": "2025-12-28T16:22:01.097487+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:22:01.098654+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:22:01.098902+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:22:01.100532+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:22:01.102130+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:22:01.102563+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'actor_id': 23, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 15, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 15, \"user_id\": 23, \"showtime_id\": 16, \"seat_code\": \"R5-8\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 28, 16, 22, 1, 101809, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:22:01.105232+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:22:01.111186+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:22:01.112846+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:22:01.113271+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00063s] {'pk_1': 15}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:22:01.115476+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:22:01.116542+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:22:01.117080+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:22:01.117440+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 30, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:22:01.117712+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:22:01.117952+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_order_created for order.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:22:01.118426+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_order_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:22:01.118738+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 15", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:22:01.120229+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:22:01.121507+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:22:01.121774+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:22:01.124363+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 15, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:22:01.124716+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Using existing event loop for pricing.snapshot_created", "module": "event_publisher", "function": "publish_event", "line": 22, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:22:11.131669+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u274c Failed to create pricing snapshot for order 15: ", "module": "handlers", "function": "on_order_created", "line": 36, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:22:11.132220+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:22:11.135024+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.event_bus", "message": "\u274c Event handler failed: order.created -> on_order_created: ", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\shared\\services\\event_publisher.py\", line 21, in publish_event\n    loop = asyncio.get_running_loop()\nRuntimeError: no running event loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\event_bus.py\", line 40, in _safe_invoke\n    await handler(payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\pricing\\handlers.py\", line 30, in on_order_created\n    result = await create_snapshot_from_event(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\pricing\\service.py\", line 62, in create_snapshot_from_event\n    publish_event(event[\"type\"], event[\"payload\"])\n    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\shared\\services\\event_publisher.py\", line 34, in publish_event\n    future.result(timeout=10.0)  # 10 second timeout\n    ~~~~~~~~~~~~~^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\concurrent\\futures\\_base.py\", line 458, in result\n    raise TimeoutError()\nTimeoutError"}
{"timestamp": "2025-12-28T16:22:11.138901+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (30.128s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:22:11.140082+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "02eec0a4-fe5d-4c48-83c1-a5fdbc75b2af"}
{"timestamp": "2025-12-28T16:22:11.141989+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "5d4bf10d-31f7-4368-ad1f-4dde9e098355"}
{"timestamp": "2025-12-28T16:22:11.144313+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "5d4bf10d-31f7-4368-ad1f-4dde9e098355"}
{"timestamp": "2025-12-28T16:22:11.144923+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5d4bf10d-31f7-4368-ad1f-4dde9e098355"}
{"timestamp": "2025-12-28T16:22:11.145440+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 30.27s ago] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5d4bf10d-31f7-4368-ad1f-4dde9e098355"}
{"timestamp": "2025-12-28T16:22:11.148869+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5d4bf10d-31f7-4368-ad1f-4dde9e098355"}
{"timestamp": "2025-12-28T16:22:11.149198+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'user_id_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5d4bf10d-31f7-4368-ad1f-4dde9e098355"}
{"timestamp": "2025-12-28T16:22:11.151547+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.010s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "5d4bf10d-31f7-4368-ad1f-4dde9e098355"}
{"timestamp": "2025-12-28T16:22:11.152544+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "5d4bf10d-31f7-4368-ad1f-4dde9e098355"}
{"timestamp": "2025-12-28T16:22:11.154113+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/order/15/initiate", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "f2fe8f6f-f156-41d3-8f0b-ca146e2c55c8"}
{"timestamp": "2025-12-28T16:22:11.156328+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f2fe8f6f-f156-41d3-8f0b-ca146e2c55c8"}
{"timestamp": "2025-12-28T16:22:11.156877+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f2fe8f6f-f156-41d3-8f0b-ca146e2c55c8"}
{"timestamp": "2025-12-28T16:22:11.157321+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 30.29s ago] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f2fe8f6f-f156-41d3-8f0b-ca146e2c55c8"}
{"timestamp": "2025-12-28T16:22:11.160761+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO payment_attempts (order_id, amount_attempted, status, final_amount, failure_reason, provider_payment_id, created_at) VALUES (%(order_id)s, %(amount_attempted)s, %(status)s, %(final_amount)s, %(failure_reason)s, %(provider_payment_id)s, %(created_at)s) RETURNING payment_attempts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f2fe8f6f-f156-41d3-8f0b-ca146e2c55c8"}
{"timestamp": "2025-12-28T16:22:11.161080+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'order_id': 15, 'amount_attempted': 10.0, 'status': 'PENDING', 'final_amount': 10.0, 'failure_reason': None, 'provider_payment_id': None, 'created_at': datetime.datetime(2025, 12, 28, 16, 22, 11, 160444, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f2fe8f6f-f156-41d3-8f0b-ca146e2c55c8"}
{"timestamp": "2025-12-28T16:22:11.163474+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "f2fe8f6f-f156-41d3-8f0b-ca146e2c55c8"}
{"timestamp": "2025-12-28T16:22:11.168641+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f2fe8f6f-f156-41d3-8f0b-ca146e2c55c8"}
{"timestamp": "2025-12-28T16:22:11.169856+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f2fe8f6f-f156-41d3-8f0b-ca146e2c55c8"}
{"timestamp": "2025-12-28T16:22:11.170142+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'pk_1': 8}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f2fe8f6f-f156-41d3-8f0b-ca146e2c55c8"}
{"timestamp": "2025-12-28T16:22:11.172654+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.pending with payload: {'payment_attempt_id': 8, 'order_id': 15, 'amount_attempted': 10.0, 'final_amount': 10.0}", "module": "event_publisher", "function": "publish_event", "line": 17, "request_id": "f2fe8f6f-f156-41d3-8f0b-ca146e2c55c8"}
{"timestamp": "2025-12-28T16:22:11.172996+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "Creating new event loop for payment.pending", "module": "event_publisher", "function": "publish_event", "line": 38, "request_id": "f2fe8f6f-f156-41d3-8f0b-ca146e2c55c8"}
{"timestamp": "2025-12-28T16:22:11.173290+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "f2fe8f6f-f156-41d3-8f0b-ca146e2c55c8"}
{"timestamp": "2025-12-28T16:22:11.174638+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.pending to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "f2fe8f6f-f156-41d3-8f0b-ca146e2c55c8"}
{"timestamp": "2025-12-28T16:22:11.175048+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: payment.pending", "module": "event_bus", "function": "publish", "line": 30, "request_id": "f2fe8f6f-f156-41d3-8f0b-ca146e2c55c8"}
{"timestamp": "2025-12-28T16:22:11.176721+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/order/15/initiate \u2192 200 (0.023s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "f2fe8f6f-f156-41d3-8f0b-ca146e2c55c8"}
{"timestamp": "2025-12-28T16:22:11.177651+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f2fe8f6f-f156-41d3-8f0b-ca146e2c55c8"}
{"timestamp": "2025-12-28T16:22:11.179627+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/8/confirm", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "68e05875-1dba-4efc-a225-78340f364c7b"}
{"timestamp": "2025-12-28T16:22:11.182797+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "68e05875-1dba-4efc-a225-78340f364c7b"}
{"timestamp": "2025-12-28T16:22:11.183524+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68e05875-1dba-4efc-a225-78340f364c7b"}
{"timestamp": "2025-12-28T16:22:11.184025+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 30.31s ago] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68e05875-1dba-4efc-a225-78340f364c7b"}
{"timestamp": "2025-12-28T16:22:11.187735+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id AS payment_attempts_id, payment_attempts.order_id AS payment_attempts_order_id, payment_attempts.amount_attempted AS payment_attempts_amount_attempted, payment_attempts.status AS payment_attempts_status, payment_attempts.final_amount AS payment_attempts_final_amount, payment_attempts.failure_reason AS payment_attempts_failure_reason, payment_attempts.provider_payment_id AS payment_attempts_provider_payment_id, payment_attempts.created_at AS payment_attempts_created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68e05875-1dba-4efc-a225-78340f364c7b"}
{"timestamp": "2025-12-28T16:22:11.188186+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'pk_1': 8}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68e05875-1dba-4efc-a225-78340f364c7b"}
{"timestamp": "2025-12-28T16:22:11.190882+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68e05875-1dba-4efc-a225-78340f364c7b"}
{"timestamp": "2025-12-28T16:22:11.191291+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'pk_1': 15}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68e05875-1dba-4efc-a225-78340f364c7b"}
{"timestamp": "2025-12-28T16:22:11.193553+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "68e05875-1dba-4efc-a225-78340f364c7b"}
{"timestamp": "2025-12-28T16:22:11.218070+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "asyncio", "message": "Task was destroyed but it is pending!\ntask: <Task pending name='Task-52' coro=<EventBus.publish() running at C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\event_bus.py:24> cb=[_chain_future.<locals>._call_set_state() at C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\futures.py:391]>", "module": "base_events", "function": "default_exception_handler", "line": 1871, "request_id": "68e05875-1dba-4efc-a225-78340f364c7b"}
{"timestamp": "2025-12-28T16:22:11.231025+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.middleware", "message": "\u2717 POST /payments/8/confirm \u2192 FAILED (0.016s)", "module": "middleware", "function": "dispatch", "line": 83, "request_id": "68e05875-1dba-4efc-a225-78340f364c7b", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 151, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\streams\\memory.py\", line 126, in receive\n    raise EndOfStream from None\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\middleware.py\", line 57, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    raise app_exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 390, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 291, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\concurrency.py\", line 38, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\to_thread.py\", line 56, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 2485, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 976, in run\n    result = context.run(func, *args)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\payment\\router.py\", line 50, in confirm_payment_route\n    return mark_payment_succeeded(\n        db=db,\n        payment_attempt_id=payment_attempt_id,\n        provider_payment_id=provider_payment_id\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\payment\\service.py\", line 66, in mark_payment_succeeded\n    raise ValidationError(\"Final amount not equal to order amount\")\napp.core.errors.ValidationError: Final amount not equal to order amount"}
{"timestamp": "2025-12-28T16:24:26.507544+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-28T16:24:28.502759+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-28T16:24:28.503121+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-28T16:24:28.503291+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.503436+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.503620+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.503831+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.503993+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.504140+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.504279+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.504447+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.504606+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.504762+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.504932+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.505076+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.505254+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.505398+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.505536+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.505675+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.505789+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.505900+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.506009+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.506121+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.506232+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.506340+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.506515+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.506672+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.506844+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.507074+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.507285+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.507592+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.507831+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.507951+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.508065+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.508173+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.508283+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.508390+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.508498+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.508606+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.508748+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.508860+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.509016+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.509366+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.509699+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.510109+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.510386+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.510573+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.510849+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.511114+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.511328+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.511448+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.511557+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.511965+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.512275+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.512471+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.512798+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.512971+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.513084+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.513235+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.513348+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.513456+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.513564+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.513676+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:24:28.513790+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-28T16:24:28.513900+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-28T16:25:36.674845+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-28T16:25:38.812841+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-28T16:25:38.813203+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-28T16:25:38.813451+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.813643+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.813901+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.814110+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.814322+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.814508+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.814718+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.814912+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.815182+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.815400+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.815608+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.815798+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.815979+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.816149+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.816313+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.816558+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.816862+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.817070+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.817329+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.817686+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.818022+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.818380+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.818631+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.818822+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.819120+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.819430+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.819713+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.819954+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.820147+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.820416+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.820647+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.820866+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.821092+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.821331+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.821680+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.822070+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.822267+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.822494+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.822835+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.823144+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.823399+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.823673+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.823919+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.824221+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.824469+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.824794+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.825501+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.825945+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.826314+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.826540+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.826696+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.826845+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.827120+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.827522+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.827907+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.828169+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.828370+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.828647+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.828859+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.829084+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-28T16:25:38.829285+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-28T16:25:38.829495+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-28T16:26:05.891289+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "1f8836eb-0ce9-4d43-a6f9-a9b8ee1b7241"}
{"timestamp": "2025-12-28T16:26:05.948971+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1f8836eb-0ce9-4d43-a6f9-a9b8ee1b7241"}
{"timestamp": "2025-12-28T16:26:05.949481+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1f8836eb-0ce9-4d43-a6f9-a9b8ee1b7241"}
{"timestamp": "2025-12-28T16:26:05.952213+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1f8836eb-0ce9-4d43-a6f9-a9b8ee1b7241"}
{"timestamp": "2025-12-28T16:26:05.952525+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1f8836eb-0ce9-4d43-a6f9-a9b8ee1b7241"}
{"timestamp": "2025-12-28T16:26:05.954520+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1f8836eb-0ce9-4d43-a6f9-a9b8ee1b7241"}
{"timestamp": "2025-12-28T16:26:05.954852+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1f8836eb-0ce9-4d43-a6f9-a9b8ee1b7241"}
{"timestamp": "2025-12-28T16:26:05.957075+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1f8836eb-0ce9-4d43-a6f9-a9b8ee1b7241"}
{"timestamp": "2025-12-28T16:26:05.959792+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1f8836eb-0ce9-4d43-a6f9-a9b8ee1b7241"}
{"timestamp": "2025-12-28T16:26:05.960231+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'email_1': 'test_1766939163.841812@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1f8836eb-0ce9-4d43-a6f9-a9b8ee1b7241"}
{"timestamp": "2025-12-28T16:26:05.963958+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "detected 'bcrypt' backend, version '4.0.1'", "module": "bcrypt", "function": "_load_backend_mixin", "line": 625, "request_id": "1f8836eb-0ce9-4d43-a6f9-a9b8ee1b7241"}
{"timestamp": "2025-12-28T16:26:05.964323+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "'bcrypt' backend lacks $2$ support, enabling workaround", "module": "bcrypt", "function": "_finalize_backend_mixin", "line": 406, "request_id": "1f8836eb-0ce9-4d43-a6f9-a9b8ee1b7241"}
{"timestamp": "2025-12-28T16:26:06.186671+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1f8836eb-0ce9-4d43-a6f9-a9b8ee1b7241"}
{"timestamp": "2025-12-28T16:26:06.187051+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'email': 'test_1766939163.841812@example.com', 'hashed_password': '$2b$12$5HAPekqAi9GxSp4GzsE8GexGhd/iUMfo74HaE29XYRpjKvLWT84tC', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1f8836eb-0ce9-4d43-a6f9-a9b8ee1b7241"}
{"timestamp": "2025-12-28T16:26:06.189150+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "1f8836eb-0ce9-4d43-a6f9-a9b8ee1b7241"}
{"timestamp": "2025-12-28T16:26:06.194224+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1f8836eb-0ce9-4d43-a6f9-a9b8ee1b7241"}
{"timestamp": "2025-12-28T16:26:06.195413+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1f8836eb-0ce9-4d43-a6f9-a9b8ee1b7241"}
{"timestamp": "2025-12-28T16:26:06.195700+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1f8836eb-0ce9-4d43-a6f9-a9b8ee1b7241"}
{"timestamp": "2025-12-28T16:26:06.198527+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 24, 'email': 'test_1766939163.841812@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "1f8836eb-0ce9-4d43-a6f9-a9b8ee1b7241"}
{"timestamp": "2025-12-28T16:26:06.198992+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "1f8836eb-0ce9-4d43-a6f9-a9b8ee1b7241"}
{"timestamp": "2025-12-28T16:26:06.199830+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "1f8836eb-0ce9-4d43-a6f9-a9b8ee1b7241"}
{"timestamp": "2025-12-28T16:26:06.200046+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 34, "request_id": "1f8836eb-0ce9-4d43-a6f9-a9b8ee1b7241"}
{"timestamp": "2025-12-28T16:26:06.200356+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "1f8836eb-0ce9-4d43-a6f9-a9b8ee1b7241"}
{"timestamp": "2025-12-28T16:26:06.222103+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1f8836eb-0ce9-4d43-a6f9-a9b8ee1b7241"}
{"timestamp": "2025-12-28T16:26:06.223785+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1f8836eb-0ce9-4d43-a6f9-a9b8ee1b7241"}
{"timestamp": "2025-12-28T16:26:06.224138+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'user_id_1': 24, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1f8836eb-0ce9-4d43-a6f9-a9b8ee1b7241"}
{"timestamp": "2025-12-28T16:26:06.228026+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1f8836eb-0ce9-4d43-a6f9-a9b8ee1b7241"}
{"timestamp": "2025-12-28T16:26:06.228513+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00071s] {'user_id': 24, 'name': None, 'email': 'test_1766939163.841812@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1f8836eb-0ce9-4d43-a6f9-a9b8ee1b7241"}
{"timestamp": "2025-12-28T16:26:06.231238+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "1f8836eb-0ce9-4d43-a6f9-a9b8ee1b7241"}
{"timestamp": "2025-12-28T16:26:06.235694+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1f8836eb-0ce9-4d43-a6f9-a9b8ee1b7241"}
{"timestamp": "2025-12-28T16:26:06.236727+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1f8836eb-0ce9-4d43-a6f9-a9b8ee1b7241"}
{"timestamp": "2025-12-28T16:26:06.237116+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1f8836eb-0ce9-4d43-a6f9-a9b8ee1b7241"}
{"timestamp": "2025-12-28T16:26:06.238912+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 24, 'user_id': 24, 'email': 'test_1766939163.841812@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "1f8836eb-0ce9-4d43-a6f9-a9b8ee1b7241"}
{"timestamp": "2025-12-28T16:26:06.239269+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "1f8836eb-0ce9-4d43-a6f9-a9b8ee1b7241"}
{"timestamp": "2025-12-28T16:26:06.242760+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.event_bus", "message": "\u274c Event handler failed: auth.user_registered -> on_user_registered: asyncio.run() cannot be called from a running event loop", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "1f8836eb-0ce9-4d43-a6f9-a9b8ee1b7241", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\event_bus.py\", line 40, in _safe_invoke\n    await handler(payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\user\\handlers.py\", line 19, in on_user_registered\n    profile_service.create_profile(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        db,\n        ^^^\n        user_id=user_id,\n        ^^^^^^^^^^^^^^^^\n        email=email,\n        ^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\user\\service.py\", line 41, in create_profile\n    publish_event(event[\"type\"], event[\"payload\"])\n    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\shared\\services\\event_publisher.py\", line 17, in publish_event\n    asyncio.run(event_bus.publish(event_type, payload))\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 191, in run\n    raise RuntimeError(\n        \"asyncio.run() cannot be called from a running event loop\")\nRuntimeError: asyncio.run() cannot be called from a running event loop"}
{"timestamp": "2025-12-28T16:26:06.248308+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1f8836eb-0ce9-4d43-a6f9-a9b8ee1b7241"}
{"timestamp": "2025-12-28T16:26:06.248778+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2891s ago] {'email_1': 'test_1766939163.841812@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1f8836eb-0ce9-4d43-a6f9-a9b8ee1b7241"}
{"timestamp": "2025-12-28T16:26:06.460014+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 24, 'email': 'test_1766939163.841812@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "1f8836eb-0ce9-4d43-a6f9-a9b8ee1b7241"}
{"timestamp": "2025-12-28T16:26:06.460292+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "1f8836eb-0ce9-4d43-a6f9-a9b8ee1b7241"}
{"timestamp": "2025-12-28T16:26:06.461069+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "1f8836eb-0ce9-4d43-a6f9-a9b8ee1b7241"}
{"timestamp": "2025-12-28T16:26:06.461294+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 30, "request_id": "1f8836eb-0ce9-4d43-a6f9-a9b8ee1b7241"}
{"timestamp": "2025-12-28T16:26:06.462515+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.571s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "1f8836eb-0ce9-4d43-a6f9-a9b8ee1b7241"}
{"timestamp": "2025-12-28T16:26:06.463683+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "1f8836eb-0ce9-4d43-a6f9-a9b8ee1b7241"}
{"timestamp": "2025-12-28T16:26:06.465684+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/login", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "d15c1de4-4d4e-46ae-87fb-aa7a4ed34327"}
{"timestamp": "2025-12-28T16:26:06.466682+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "d15c1de4-4d4e-46ae-87fb-aa7a4ed34327"}
{"timestamp": "2025-12-28T16:26:06.467009+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[0:8]", "module": "multipart", "function": "callback", "line": 625, "request_id": "d15c1de4-4d4e-46ae-87fb-aa7a4ed34327"}
{"timestamp": "2025-12-28T16:26:06.467283+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[9:45]", "module": "multipart", "function": "callback", "line": 625, "request_id": "d15c1de4-4d4e-46ae-87fb-aa7a4ed34327"}
{"timestamp": "2025-12-28T16:26:06.467471+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "d15c1de4-4d4e-46ae-87fb-aa7a4ed34327"}
{"timestamp": "2025-12-28T16:26:06.467636+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "d15c1de4-4d4e-46ae-87fb-aa7a4ed34327"}
{"timestamp": "2025-12-28T16:26:06.467823+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[46:54]", "module": "multipart", "function": "callback", "line": 625, "request_id": "d15c1de4-4d4e-46ae-87fb-aa7a4ed34327"}
{"timestamp": "2025-12-28T16:26:06.468077+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[55:73]", "module": "multipart", "function": "callback", "line": 625, "request_id": "d15c1de4-4d4e-46ae-87fb-aa7a4ed34327"}
{"timestamp": "2025-12-28T16:26:06.468572+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "d15c1de4-4d4e-46ae-87fb-aa7a4ed34327"}
{"timestamp": "2025-12-28T16:26:06.468770+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "d15c1de4-4d4e-46ae-87fb-aa7a4ed34327"}
{"timestamp": "2025-12-28T16:26:06.471577+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d15c1de4-4d4e-46ae-87fb-aa7a4ed34327"}
{"timestamp": "2025-12-28T16:26:06.472314+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d15c1de4-4d4e-46ae-87fb-aa7a4ed34327"}
{"timestamp": "2025-12-28T16:26:06.472748+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.5132s ago] {'email_1': 'test_1766939163.841812@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d15c1de4-4d4e-46ae-87fb-aa7a4ed34327"}
{"timestamp": "2025-12-28T16:26:06.679283+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 24, 'email': 'test_1766939163.841812@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "d15c1de4-4d4e-46ae-87fb-aa7a4ed34327"}
{"timestamp": "2025-12-28T16:26:06.679596+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "d15c1de4-4d4e-46ae-87fb-aa7a4ed34327"}
{"timestamp": "2025-12-28T16:26:06.680381+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "d15c1de4-4d4e-46ae-87fb-aa7a4ed34327"}
{"timestamp": "2025-12-28T16:26:06.680578+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 30, "request_id": "d15c1de4-4d4e-46ae-87fb-aa7a4ed34327"}
{"timestamp": "2025-12-28T16:26:06.681573+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/login \u2192 200 (0.216s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "d15c1de4-4d4e-46ae-87fb-aa7a4ed34327"}
{"timestamp": "2025-12-28T16:26:06.682848+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d15c1de4-4d4e-46ae-87fb-aa7a4ed34327"}
{"timestamp": "2025-12-28T16:26:06.683970+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /profiles/me", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "e6a54f8a-a750-413a-80a6-e1dc28acd10e"}
{"timestamp": "2025-12-28T16:26:06.687075+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e6a54f8a-a750-413a-80a6-e1dc28acd10e"}
{"timestamp": "2025-12-28T16:26:06.688665+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e6a54f8a-a750-413a-80a6-e1dc28acd10e"}
{"timestamp": "2025-12-28T16:26:06.689132+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00067s] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e6a54f8a-a750-413a-80a6-e1dc28acd10e"}
{"timestamp": "2025-12-28T16:26:06.692147+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e6a54f8a-a750-413a-80a6-e1dc28acd10e"}
{"timestamp": "2025-12-28T16:26:06.692564+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.4689s ago] {'user_id_1': 24, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e6a54f8a-a750-413a-80a6-e1dc28acd10e"}
{"timestamp": "2025-12-28T16:26:06.695214+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /profiles/me \u2192 200 (0.011s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "e6a54f8a-a750-413a-80a6-e1dc28acd10e"}
{"timestamp": "2025-12-28T16:26:06.696020+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "e6a54f8a-a750-413a-80a6-e1dc28acd10e"}
{"timestamp": "2025-12-28T16:26:06.699038+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "3fd49e54-61f2-4e98-ae86-ec9a23cad660"}
{"timestamp": "2025-12-28T16:26:06.702211+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3fd49e54-61f2-4e98-ae86-ec9a23cad660"}
{"timestamp": "2025-12-28T16:26:06.703811+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3fd49e54-61f2-4e98-ae86-ec9a23cad660"}
{"timestamp": "2025-12-28T16:26:06.704221+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'title_1': 'The Matrix Reloaded 1766939166.696763'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3fd49e54-61f2-4e98-ae86-ec9a23cad660"}
{"timestamp": "2025-12-28T16:26:06.707642+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3fd49e54-61f2-4e98-ae86-ec9a23cad660"}
{"timestamp": "2025-12-28T16:26:06.708072+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'title': 'The Matrix Reloaded 1766939166.696763', 'description': 'Test movie: The Matrix Reloaded 1766939166.696763', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3fd49e54-61f2-4e98-ae86-ec9a23cad660"}
{"timestamp": "2025-12-28T16:26:06.710032+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "3fd49e54-61f2-4e98-ae86-ec9a23cad660"}
{"timestamp": "2025-12-28T16:26:06.716119+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3fd49e54-61f2-4e98-ae86-ec9a23cad660"}
{"timestamp": "2025-12-28T16:26:06.717033+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3fd49e54-61f2-4e98-ae86-ec9a23cad660"}
{"timestamp": "2025-12-28T16:26:06.717394+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00042s] {'pk_1': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3fd49e54-61f2-4e98-ae86-ec9a23cad660"}
{"timestamp": "2025-12-28T16:26:06.719619+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 21}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "3fd49e54-61f2-4e98-ae86-ec9a23cad660"}
{"timestamp": "2025-12-28T16:26:06.719978+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "3fd49e54-61f2-4e98-ae86-ec9a23cad660"}
{"timestamp": "2025-12-28T16:26:06.720827+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "3fd49e54-61f2-4e98-ae86-ec9a23cad660"}
{"timestamp": "2025-12-28T16:26:06.721088+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "3fd49e54-61f2-4e98-ae86-ec9a23cad660"}
{"timestamp": "2025-12-28T16:26:06.722437+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.024s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "3fd49e54-61f2-4e98-ae86-ec9a23cad660"}
{"timestamp": "2025-12-28T16:26:06.723260+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "3fd49e54-61f2-4e98-ae86-ec9a23cad660"}
{"timestamp": "2025-12-28T16:26:06.724909+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "0ee24b4a-daf6-4641-b13d-9f473a7c6f41"}
{"timestamp": "2025-12-28T16:26:06.727436+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0ee24b4a-daf6-4641-b13d-9f473a7c6f41"}
{"timestamp": "2025-12-28T16:26:06.728744+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0ee24b4a-daf6-4641-b13d-9f473a7c6f41"}
{"timestamp": "2025-12-28T16:26:06.729234+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'name_1': 'Standard Layout 1766939166.72343'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0ee24b4a-daf6-4641-b13d-9f473a7c6f41"}
{"timestamp": "2025-12-28T16:26:06.732248+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0ee24b4a-daf6-4641-b13d-9f473a7c6f41"}
{"timestamp": "2025-12-28T16:26:06.732595+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00042s] {'name': 'Standard Layout 1766939166.72343', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0ee24b4a-daf6-4641-b13d-9f473a7c6f41"}
{"timestamp": "2025-12-28T16:26:06.734498+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "0ee24b4a-daf6-4641-b13d-9f473a7c6f41"}
{"timestamp": "2025-12-28T16:26:06.738753+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0ee24b4a-daf6-4641-b13d-9f473a7c6f41"}
{"timestamp": "2025-12-28T16:26:06.739553+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0ee24b4a-daf6-4641-b13d-9f473a7c6f41"}
{"timestamp": "2025-12-28T16:26:06.739907+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00034s] {'pk_1': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0ee24b4a-daf6-4641-b13d-9f473a7c6f41"}
{"timestamp": "2025-12-28T16:26:06.742255+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 20}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "0ee24b4a-daf6-4641-b13d-9f473a7c6f41"}
{"timestamp": "2025-12-28T16:26:06.742498+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "0ee24b4a-daf6-4641-b13d-9f473a7c6f41"}
{"timestamp": "2025-12-28T16:26:06.743171+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "0ee24b4a-daf6-4641-b13d-9f473a7c6f41"}
{"timestamp": "2025-12-28T16:26:06.743333+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "0ee24b4a-daf6-4641-b13d-9f473a7c6f41"}
{"timestamp": "2025-12-28T16:26:06.744635+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.020s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "0ee24b4a-daf6-4641-b13d-9f473a7c6f41"}
{"timestamp": "2025-12-28T16:26:06.745520+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0ee24b4a-daf6-4641-b13d-9f473a7c6f41"}
{"timestamp": "2025-12-28T16:26:06.746947+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "55d79692-ddb1-4c63-8118-1c2f9cbd343c"}
{"timestamp": "2025-12-28T16:26:06.749518+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "55d79692-ddb1-4c63-8118-1c2f9cbd343c"}
{"timestamp": "2025-12-28T16:26:06.750776+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "55d79692-ddb1-4c63-8118-1c2f9cbd343c"}
{"timestamp": "2025-12-28T16:26:06.751118+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'name_1': 'Screen 1 1766939166.745392', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "55d79692-ddb1-4c63-8118-1c2f9cbd343c"}
{"timestamp": "2025-12-28T16:26:06.757909+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "55d79692-ddb1-4c63-8118-1c2f9cbd343c"}
{"timestamp": "2025-12-28T16:26:06.758216+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'id_1': 20, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "55d79692-ddb1-4c63-8118-1c2f9cbd343c"}
{"timestamp": "2025-12-28T16:26:06.760838+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "55d79692-ddb1-4c63-8118-1c2f9cbd343c"}
{"timestamp": "2025-12-28T16:26:06.761251+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'name': 'Screen 1 1766939166.745392', 'capacity': 150, 'seat_layout_id': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "55d79692-ddb1-4c63-8118-1c2f9cbd343c"}
{"timestamp": "2025-12-28T16:26:06.763410+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "55d79692-ddb1-4c63-8118-1c2f9cbd343c"}
{"timestamp": "2025-12-28T16:26:06.767506+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "55d79692-ddb1-4c63-8118-1c2f9cbd343c"}
{"timestamp": "2025-12-28T16:26:06.768481+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "55d79692-ddb1-4c63-8118-1c2f9cbd343c"}
{"timestamp": "2025-12-28T16:26:06.768785+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'pk_1': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "55d79692-ddb1-4c63-8118-1c2f9cbd343c"}
{"timestamp": "2025-12-28T16:26:06.771174+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 20}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "55d79692-ddb1-4c63-8118-1c2f9cbd343c"}
{"timestamp": "2025-12-28T16:26:06.771431+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "55d79692-ddb1-4c63-8118-1c2f9cbd343c"}
{"timestamp": "2025-12-28T16:26:06.772145+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "55d79692-ddb1-4c63-8118-1c2f9cbd343c"}
{"timestamp": "2025-12-28T16:26:06.772320+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "55d79692-ddb1-4c63-8118-1c2f9cbd343c"}
{"timestamp": "2025-12-28T16:26:06.773530+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.027s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "55d79692-ddb1-4c63-8118-1c2f9cbd343c"}
{"timestamp": "2025-12-28T16:26:06.774459+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "55d79692-ddb1-4c63-8118-1c2f9cbd343c"}
{"timestamp": "2025-12-28T16:26:06.776539+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "c8abd5d4-ee55-4bdf-8c28-7a1c9ae142a4"}
{"timestamp": "2025-12-28T16:26:06.778785+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c8abd5d4-ee55-4bdf-8c28-7a1c9ae142a4"}
{"timestamp": "2025-12-28T16:26:06.779831+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8abd5d4-ee55-4bdf-8c28-7a1c9ae142a4"}
{"timestamp": "2025-12-28T16:26:06.780107+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'pk_1': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8abd5d4-ee55-4bdf-8c28-7a1c9ae142a4"}
{"timestamp": "2025-12-28T16:26:06.782919+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8abd5d4-ee55-4bdf-8c28-7a1c9ae142a4"}
{"timestamp": "2025-12-28T16:26:06.783188+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'pk_1': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8abd5d4-ee55-4bdf-8c28-7a1c9ae142a4"}
{"timestamp": "2025-12-28T16:26:06.786188+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8abd5d4-ee55-4bdf-8c28-7a1c9ae142a4"}
{"timestamp": "2025-12-28T16:26:06.786627+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'screen_id_1': 20, 'start_time_1': datetime.datetime(2025, 12, 29, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 29, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8abd5d4-ee55-4bdf-8c28-7a1c9ae142a4"}
{"timestamp": "2025-12-28T16:26:06.790122+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8abd5d4-ee55-4bdf-8c28-7a1c9ae142a4"}
{"timestamp": "2025-12-28T16:26:06.790835+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00064s] {'start_time': datetime.datetime(2025, 12, 29, 19, 0), 'end_time': datetime.datetime(2025, 12, 29, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 21, 'screen_id': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8abd5d4-ee55-4bdf-8c28-7a1c9ae142a4"}
{"timestamp": "2025-12-28T16:26:06.793351+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "c8abd5d4-ee55-4bdf-8c28-7a1c9ae142a4"}
{"timestamp": "2025-12-28T16:26:06.798138+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c8abd5d4-ee55-4bdf-8c28-7a1c9ae142a4"}
{"timestamp": "2025-12-28T16:26:06.799052+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8abd5d4-ee55-4bdf-8c28-7a1c9ae142a4"}
{"timestamp": "2025-12-28T16:26:06.799560+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'pk_1': 17}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8abd5d4-ee55-4bdf-8c28-7a1c9ae142a4"}
{"timestamp": "2025-12-28T16:26:06.802693+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8abd5d4-ee55-4bdf-8c28-7a1c9ae142a4"}
{"timestamp": "2025-12-28T16:26:06.803131+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'pk_1': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8abd5d4-ee55-4bdf-8c28-7a1c9ae142a4"}
{"timestamp": "2025-12-28T16:26:06.805691+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8abd5d4-ee55-4bdf-8c28-7a1c9ae142a4"}
{"timestamp": "2025-12-28T16:26:06.806099+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'pk_1': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8abd5d4-ee55-4bdf-8c28-7a1c9ae142a4"}
{"timestamp": "2025-12-28T16:26:06.807825+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 17}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "c8abd5d4-ee55-4bdf-8c28-7a1c9ae142a4"}
{"timestamp": "2025-12-28T16:26:06.808119+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "c8abd5d4-ee55-4bdf-8c28-7a1c9ae142a4"}
{"timestamp": "2025-12-28T16:26:06.808865+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "c8abd5d4-ee55-4bdf-8c28-7a1c9ae142a4"}
{"timestamp": "2025-12-28T16:26:06.809068+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "c8abd5d4-ee55-4bdf-8c28-7a1c9ae142a4"}
{"timestamp": "2025-12-28T16:26:06.810526+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.034s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "c8abd5d4-ee55-4bdf-8c28-7a1c9ae142a4"}
{"timestamp": "2025-12-28T16:26:06.811540+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c8abd5d4-ee55-4bdf-8c28-7a1c9ae142a4"}
{"timestamp": "2025-12-28T16:26:06.813284+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /seatavailability/grid/17", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "3f17e16d-b849-47d8-bbfc-aae1177eb0ec"}
{"timestamp": "2025-12-28T16:26:06.815767+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3f17e16d-b849-47d8-bbfc-aae1177eb0ec"}
{"timestamp": "2025-12-28T16:26:06.817322+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f17e16d-b849-47d8-bbfc-aae1177eb0ec"}
{"timestamp": "2025-12-28T16:26:06.817637+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'showtime_id_1': 17}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f17e16d-b849-47d8-bbfc-aae1177eb0ec"}
{"timestamp": "2025-12-28T16:26:06.820882+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /seatavailability/grid/17 \u2192 200 (0.008s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "3f17e16d-b849-47d8-bbfc-aae1177eb0ec"}
{"timestamp": "2025-12-28T16:26:06.822298+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "3f17e16d-b849-47d8-bbfc-aae1177eb0ec"}
{"timestamp": "2025-12-28T16:26:06.824725+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.827980+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.828901+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.829301+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.1409s ago] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.832947+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.833465+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'user_id': 24, 'showtime_id': 17, 'seat_code': 'R5-8', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 28, 16, 26, 6, 832588, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 28, 16, 36, 6, 831673, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.835974+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.840293+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.841305+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.841660+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00041s] {'pk_1': 16}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.843804+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 16, 'user_id': 24, 'showtime_id': 17, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.844048+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.844849+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.845037+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.845148+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.845246+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.845409+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.846940+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.847995+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.848263+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'showtime_id_1': 17, 'seat_code_1': 'R5-8', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.851200+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.851602+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'seat_code': 'R5-8', 'showtime_id': 17, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.855474+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.855811+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'status': 'LOCKED', 'locked_by_user_id': 24, 'lock_expires_at': datetime.datetime(2025, 12, 28, 16, 36, 6, 853838, tzinfo=datetime.timezone.utc), 'seat_locks_id': 13}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.857596+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.861986+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.862835+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.863166+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00041s] {'pk_1': 13}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.865112+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 17, 'seat_code': 'R5-8', 'user_id': 24, 'expires_at': '2025-12-28T16:36:06.853838+00:00'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.865503+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.868843+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.event_bus", "message": "\u274c Event handler failed: reservation.created -> on_reservation_created: asyncio.run() cannot be called from a running event loop", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\event_bus.py\", line 40, in _safe_invoke\n    await handler(payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\seat_availability\\handlers.py\", line 24, in on_reservation_created\n    seat_service.lock_seat(\n    ~~~~~~~~~~~~~~~~~~~~~~^\n        db,\n        ^^^\n    ...<2 lines>...\n        user_id=user_id,\n        ^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\seat_availability\\service.py\", line 62, in lock_seat\n    publish_event(\n    ~~~~~~~~~~~~~^\n        \"seat.locked\",\n        ^^^^^^^^^^^^^^\n    ...<5 lines>...\n        },\n        ^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\shared\\services\\event_publisher.py\", line 17, in publish_event\n    asyncio.run(event_bus.publish(event_type, payload))\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 191, in run\n    raise RuntimeError(\n        \"asyncio.run() cannot be called from a running event loop\")\nRuntimeError: asyncio.run() cannot be called from a running event loop"}
{"timestamp": "2025-12-28T16:26:06.872099+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.872292+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 16, 'user_id': 24, 'showtime_id': 17, 'seat_code': 'R5-8'}", "module": "handlers", "function": "on_reservation_created", "line": 21, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.872586+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 16", "module": "handlers", "function": "on_reservation_created", "line": 33, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.874072+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.875261+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.875528+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'user_id': 24, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 16}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.878166+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.882086+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.883525+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.883976+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00042s] {'pk_1': 16}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.886291+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 16, 'reservation_id': 16, 'user_id': 24, 'showtime_id': 17, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.888591+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Failed to create order from reservation: asyncio.run() cannot be called from a running event loop", "module": "handlers", "function": "on_reservation_created", "line": 43, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\order\\handlers.py\", line 34, in on_reservation_created\n    create_order_from_event(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        db,\n        ^^^\n    ...<3 lines>...\n        seat_code=seat_code,\n        ^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\order\\service.py\", line 41, in create_order_from_event\n    publish_event(event[\"type\"], event[\"payload\"])\n    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\shared\\services\\event_publisher.py\", line 17, in publish_event\n    asyncio.run(event_bus.publish(event_type, payload))\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 191, in run\n    raise RuntimeError(\n        \"asyncio.run() cannot be called from a running event loop\")\nRuntimeError: asyncio.run() cannot be called from a running event loop"}
{"timestamp": "2025-12-28T16:26:06.891671+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.892883+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.893190+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.894694+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.896025+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.896530+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'actor_id': 24, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 16, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 16, \"user_id\": 24, \"showtime_id\": 17, \"seat_code\": \"R5-8\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 28, 16, 26, 6, 895625, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.899690+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.904645+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.905789+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.906161+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'pk_1': 16}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.908880+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.910017+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.911183+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.087s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.912074+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "720bf9e0-25c0-4d71-9d79-aed408e9a499"}
{"timestamp": "2025-12-28T16:26:06.913516+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "6363f7c6-a4b4-4220-bc55-e7d90decdd1a"}
{"timestamp": "2025-12-28T16:26:06.915989+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6363f7c6-a4b4-4220-bc55-e7d90decdd1a"}
{"timestamp": "2025-12-28T16:26:06.916699+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6363f7c6-a4b4-4220-bc55-e7d90decdd1a"}
{"timestamp": "2025-12-28T16:26:06.917096+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2287s ago] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6363f7c6-a4b4-4220-bc55-e7d90decdd1a"}
{"timestamp": "2025-12-28T16:26:06.920079+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6363f7c6-a4b4-4220-bc55-e7d90decdd1a"}
{"timestamp": "2025-12-28T16:26:06.920513+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'user_id_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6363f7c6-a4b4-4220-bc55-e7d90decdd1a"}
{"timestamp": "2025-12-28T16:26:06.922826+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.009s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "6363f7c6-a4b4-4220-bc55-e7d90decdd1a"}
{"timestamp": "2025-12-28T16:26:06.923657+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6363f7c6-a4b4-4220-bc55-e7d90decdd1a"}
{"timestamp": "2025-12-28T16:26:06.925286+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/order/16/initiate", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "6103778e-51ea-4c0f-bd8c-b3ceb869763c"}
{"timestamp": "2025-12-28T16:26:06.927433+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6103778e-51ea-4c0f-bd8c-b3ceb869763c"}
{"timestamp": "2025-12-28T16:26:06.928086+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6103778e-51ea-4c0f-bd8c-b3ceb869763c"}
{"timestamp": "2025-12-28T16:26:06.928471+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2401s ago] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6103778e-51ea-4c0f-bd8c-b3ceb869763c"}
{"timestamp": "2025-12-28T16:26:06.932432+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO payment_attempts (order_id, amount_attempted, status, final_amount, failure_reason, provider_payment_id, created_at) VALUES (%(order_id)s, %(amount_attempted)s, %(status)s, %(final_amount)s, %(failure_reason)s, %(provider_payment_id)s, %(created_at)s) RETURNING payment_attempts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6103778e-51ea-4c0f-bd8c-b3ceb869763c"}
{"timestamp": "2025-12-28T16:26:06.932821+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'order_id': 16, 'amount_attempted': 10.0, 'status': 'PENDING', 'final_amount': 10.0, 'failure_reason': None, 'provider_payment_id': None, 'created_at': datetime.datetime(2025, 12, 28, 16, 26, 6, 932114, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6103778e-51ea-4c0f-bd8c-b3ceb869763c"}
{"timestamp": "2025-12-28T16:26:06.935357+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6103778e-51ea-4c0f-bd8c-b3ceb869763c"}
{"timestamp": "2025-12-28T16:26:06.939709+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6103778e-51ea-4c0f-bd8c-b3ceb869763c"}
{"timestamp": "2025-12-28T16:26:06.940810+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6103778e-51ea-4c0f-bd8c-b3ceb869763c"}
{"timestamp": "2025-12-28T16:26:06.941081+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'pk_1': 9}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6103778e-51ea-4c0f-bd8c-b3ceb869763c"}
{"timestamp": "2025-12-28T16:26:06.943381+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.pending with payload: {'payment_attempt_id': 9, 'order_id': 16, 'amount_attempted': 10.0, 'final_amount': 10.0}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "6103778e-51ea-4c0f-bd8c-b3ceb869763c"}
{"timestamp": "2025-12-28T16:26:06.943677+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "6103778e-51ea-4c0f-bd8c-b3ceb869763c"}
{"timestamp": "2025-12-28T16:26:06.944542+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.pending to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "6103778e-51ea-4c0f-bd8c-b3ceb869763c"}
{"timestamp": "2025-12-28T16:26:06.944757+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: payment.pending", "module": "event_bus", "function": "publish", "line": 30, "request_id": "6103778e-51ea-4c0f-bd8c-b3ceb869763c"}
{"timestamp": "2025-12-28T16:26:06.945947+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/order/16/initiate \u2192 200 (0.021s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "6103778e-51ea-4c0f-bd8c-b3ceb869763c"}
{"timestamp": "2025-12-28T16:26:06.947064+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6103778e-51ea-4c0f-bd8c-b3ceb869763c"}
{"timestamp": "2025-12-28T16:26:06.948513+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/9/confirm", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "461cdaa6-43c4-4d5b-8576-1726f0e9c1ff"}
{"timestamp": "2025-12-28T16:26:06.950779+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "461cdaa6-43c4-4d5b-8576-1726f0e9c1ff"}
{"timestamp": "2025-12-28T16:26:06.951392+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "461cdaa6-43c4-4d5b-8576-1726f0e9c1ff"}
{"timestamp": "2025-12-28T16:26:06.951730+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2634s ago] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "461cdaa6-43c4-4d5b-8576-1726f0e9c1ff"}
{"timestamp": "2025-12-28T16:26:06.955099+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id AS payment_attempts_id, payment_attempts.order_id AS payment_attempts_order_id, payment_attempts.amount_attempted AS payment_attempts_amount_attempted, payment_attempts.status AS payment_attempts_status, payment_attempts.final_amount AS payment_attempts_final_amount, payment_attempts.failure_reason AS payment_attempts_failure_reason, payment_attempts.provider_payment_id AS payment_attempts_provider_payment_id, payment_attempts.created_at AS payment_attempts_created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "461cdaa6-43c4-4d5b-8576-1726f0e9c1ff"}
{"timestamp": "2025-12-28T16:26:06.955594+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'pk_1': 9}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "461cdaa6-43c4-4d5b-8576-1726f0e9c1ff"}
{"timestamp": "2025-12-28T16:26:06.958814+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "461cdaa6-43c4-4d5b-8576-1726f0e9c1ff"}
{"timestamp": "2025-12-28T16:26:06.959169+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'pk_1': 16}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "461cdaa6-43c4-4d5b-8576-1726f0e9c1ff"}
{"timestamp": "2025-12-28T16:26:06.961340+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "461cdaa6-43c4-4d5b-8576-1726f0e9c1ff"}
{"timestamp": "2025-12-28T16:26:06.972422+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.middleware", "message": "\u2717 POST /payments/9/confirm \u2192 FAILED (0.015s)", "module": "middleware", "function": "dispatch", "line": 83, "request_id": "461cdaa6-43c4-4d5b-8576-1726f0e9c1ff", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 151, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\streams\\memory.py\", line 126, in receive\n    raise EndOfStream from None\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\middleware.py\", line 57, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    raise app_exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 390, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 291, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\concurrency.py\", line 38, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\to_thread.py\", line 56, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 2485, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 976, in run\n    result = context.run(func, *args)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\payment\\router.py\", line 50, in confirm_payment_route\n    return mark_payment_succeeded(\n        db=db,\n        payment_attempt_id=payment_attempt_id,\n        provider_payment_id=provider_payment_id\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\payment\\service.py\", line 66, in mark_payment_succeeded\n    raise ValidationError(\"Final amount not equal to order amount\")\napp.core.errors.ValidationError: Final amount not equal to order amount"}
