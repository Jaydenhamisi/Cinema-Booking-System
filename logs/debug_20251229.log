{"timestamp": "2025-12-29T12:30:05.677646+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-29T12:30:05.677945+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-29T12:30:05.678125+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.678472+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.678603+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.678727+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.678854+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.678976+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.679098+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.679219+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.679340+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.679461+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.679583+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.679741+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.679864+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.679987+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.680189+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.680344+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.680477+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.680636+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.680883+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.681004+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.681123+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.681231+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.681344+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.681451+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.681598+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.681961+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.682153+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.682285+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.682407+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.682531+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.682708+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.683001+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.683319+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.683643+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.683926+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.684134+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.684250+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.684495+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.684780+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.685061+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.685418+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.685677+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.685905+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.686030+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.686141+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.686250+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.686373+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.686514+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.686738+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.686895+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.687019+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.687148+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.687305+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.687433+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.687663+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.687989+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.688299+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.688622+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.688988+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.689359+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:30:05.689670+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-29T12:30:05.689884+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-29T12:30:18.424768+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "37eed2d5-07c3-43de-9f2f-b4abea3bfc2a"}
{"timestamp": "2025-12-29T12:30:22.672211+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.middleware", "message": "\u2717 POST /auth/register \u2192 FAILED (4.116s)", "module": "middleware", "function": "dispatch", "line": 83, "request_id": "37eed2d5-07c3-43de-9f2f-b4abea3bfc2a", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 143, in __init__\n    self._dbapi_connection = engine.raw_connection()\n                             ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 3301, in raw_connection\n    return self.pool.connect()\n           ~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 447, in connect\n    return _ConnectionFairy._checkout(self)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 1264, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 711, in checkout\n    rec = pool._do_get()\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\pool\\impl.py\", line 177, in _do_get\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\pool\\impl.py\", line 175, in _do_get\n    return self._create_connection()\n           ~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 388, in _create_connection\n    return _ConnectionRecord(self)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 673, in __init__\n    self.__connect()\n    ~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 899, in __connect\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 895, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\create.py\", line 661, in connect\n    return dialect.connect(*cargs, **cparams)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 629, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\psycopg2\\__init__.py\", line 135, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\npsycopg2.OperationalError: connection to server at \"localhost\" (::1), port 5432 failed: Connection refused (0x0000274D/10061)\n\tIs the server running on that host and accepting TCP/IP connections?\nconnection to server at \"localhost\" (127.0.0.1), port 5432 failed: Connection refused (0x0000274D/10061)\n\tIs the server running on that host and accepting TCP/IP connections?\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\middleware.py\", line 57, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    raise app_exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 390, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 291, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\concurrency.py\", line 38, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\to_thread.py\", line 56, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 2485, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 976, in run\n    result = context.run(func, *args)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\auth\\router.py\", line 32, in register\n    user = auth_service.register_user(db, payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\auth\\service.py\", line 40, in register_user\n    existing = self.repo.get_user_by_email(db, payload.email)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\auth\\repository.py\", line 13, in get_user_by_email\n    .first()\n     ~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2351, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2239, in _execute_internal\n    conn = self._connection_for_bind(bind)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2108, in _connection_for_bind\n    return trans._connection_for_bind(engine, execution_options)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"<string>\", line 2, in _connection_for_bind\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\state_changes.py\", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 1187, in _connection_for_bind\n    conn = bind.connect()\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 3277, in connect\n    return self._connection_cls(self)\n           ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 145, in __init__\n    Connection._handle_dbapi_exception_noconnection(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        err, dialect, engine\n        ^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2440, in _handle_dbapi_exception_noconnection\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 143, in __init__\n    self._dbapi_connection = engine.raw_connection()\n                             ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 3301, in raw_connection\n    return self.pool.connect()\n           ~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 447, in connect\n    return _ConnectionFairy._checkout(self)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 1264, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 711, in checkout\n    rec = pool._do_get()\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\pool\\impl.py\", line 177, in _do_get\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\pool\\impl.py\", line 175, in _do_get\n    return self._create_connection()\n           ~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 388, in _create_connection\n    return _ConnectionRecord(self)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 673, in __init__\n    self.__connect()\n    ~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 899, in __connect\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\pool\\base.py\", line 895, in __connect\n    self.dbapi_connection = connection = pool._invoke_creator(self)\n                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\create.py\", line 661, in connect\n    return dialect.connect(*cargs, **cparams)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 629, in connect\n    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\psycopg2\\__init__.py\", line 135, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\nsqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at \"localhost\" (::1), port 5432 failed: Connection refused (0x0000274D/10061)\n\tIs the server running on that host and accepting TCP/IP connections?\nconnection to server at \"localhost\" (127.0.0.1), port 5432 failed: Connection refused (0x0000274D/10061)\n\tIs the server running on that host and accepting TCP/IP connections?\n\n(Background on this error at: https://sqlalche.me/e/20/e3q8)"}
{"timestamp": "2025-12-29T12:31:18.558149+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-29T12:31:35.864178+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-29T12:31:35.864983+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-29T12:31:35.865259+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.865532+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.865937+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.866397+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.866965+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.867462+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.867791+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.868145+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.868471+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.868837+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.869453+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.869876+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.870422+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.871007+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.871478+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.871969+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.872527+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.873015+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.873481+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.873921+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.874701+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.875101+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.875492+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.875853+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.876378+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.876702+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.877075+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.877540+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.878023+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.878483+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.879241+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.879696+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.880319+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.880810+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.881386+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.882154+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.882785+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.883290+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.883693+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.884031+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.884393+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.884885+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.885227+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.885591+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.885907+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.886276+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.886793+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.887394+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.888075+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.888576+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.888997+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.889335+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.889685+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.890118+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.890750+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.891607+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.892158+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.892600+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.893104+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.893523+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:31:35.893907+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-29T12:31:35.894370+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-29T12:31:45.851169+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:45.982754+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:45.983047+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:45.987660+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:45.988075+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:45.991219+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:45.991589+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:45.993462+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:45.996440+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:45.996861+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00065s] {'email_1': 'test_1767011503.794034@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.007335+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "detected 'bcrypt' backend, version '4.0.1'", "module": "bcrypt", "function": "_load_backend_mixin", "line": 625, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.008258+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "'bcrypt' backend lacks $2$ support, enabling workaround", "module": "bcrypt", "function": "_finalize_backend_mixin", "line": 406, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.234775+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.235360+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00065s] {'email': 'test_1767011503.794034@example.com', 'hashed_password': '$2b$12$zVDaBYUfa0bSmeeNzH3feekdmAN6SmYK8.JWnBM5wlwGKXqBw4MhK', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.241638+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.247139+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.248778+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.249452+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00079s] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.251865+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 25, 'email': 'test_1767011503.794034@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.252676+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.253873+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.254155+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 34, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.255048+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.271930+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.273623+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.274117+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00062s] {'user_id_1': 25, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.281893+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.282330+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'user_id': 25, 'name': None, 'email': 'test_1767011503.794034@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.289178+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.294038+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.295239+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.295617+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.298495+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 25, 'user_id': 25, 'email': 'test_1767011503.794034@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.298731+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.298922+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.299241+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.300418+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.301901+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.302358+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.3061s ago] {'email_1': 'test_1767011503.794034@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.535563+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 25, 'email': 'test_1767011503.794034@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.535856+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.536688+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.536894+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 30, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.539590+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.689s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.540566+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2b86d38f-41e1-4bfd-82fa-557eae633793"}
{"timestamp": "2025-12-29T12:31:46.543253+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/login", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "43e1aa2d-8633-47d1-8bf0-8622b6963512"}
{"timestamp": "2025-12-29T12:31:46.544065+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "43e1aa2d-8633-47d1-8bf0-8622b6963512"}
{"timestamp": "2025-12-29T12:31:46.544312+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[0:8]", "module": "multipart", "function": "callback", "line": 625, "request_id": "43e1aa2d-8633-47d1-8bf0-8622b6963512"}
{"timestamp": "2025-12-29T12:31:46.544498+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[9:45]", "module": "multipart", "function": "callback", "line": 625, "request_id": "43e1aa2d-8633-47d1-8bf0-8622b6963512"}
{"timestamp": "2025-12-29T12:31:46.544744+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "43e1aa2d-8633-47d1-8bf0-8622b6963512"}
{"timestamp": "2025-12-29T12:31:46.544927+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "43e1aa2d-8633-47d1-8bf0-8622b6963512"}
{"timestamp": "2025-12-29T12:31:46.545143+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[46:54]", "module": "multipart", "function": "callback", "line": 625, "request_id": "43e1aa2d-8633-47d1-8bf0-8622b6963512"}
{"timestamp": "2025-12-29T12:31:46.545380+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[55:73]", "module": "multipart", "function": "callback", "line": 625, "request_id": "43e1aa2d-8633-47d1-8bf0-8622b6963512"}
{"timestamp": "2025-12-29T12:31:46.545916+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "43e1aa2d-8633-47d1-8bf0-8622b6963512"}
{"timestamp": "2025-12-29T12:31:46.546135+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "43e1aa2d-8633-47d1-8bf0-8622b6963512"}
{"timestamp": "2025-12-29T12:31:46.549070+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "43e1aa2d-8633-47d1-8bf0-8622b6963512"}
{"timestamp": "2025-12-29T12:31:46.549809+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "43e1aa2d-8633-47d1-8bf0-8622b6963512"}
{"timestamp": "2025-12-29T12:31:46.550247+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.5541s ago] {'email_1': 'test_1767011503.794034@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "43e1aa2d-8633-47d1-8bf0-8622b6963512"}
{"timestamp": "2025-12-29T12:31:46.755538+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 25, 'email': 'test_1767011503.794034@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "43e1aa2d-8633-47d1-8bf0-8622b6963512"}
{"timestamp": "2025-12-29T12:31:46.755840+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "43e1aa2d-8633-47d1-8bf0-8622b6963512"}
{"timestamp": "2025-12-29T12:31:46.756613+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "43e1aa2d-8633-47d1-8bf0-8622b6963512"}
{"timestamp": "2025-12-29T12:31:46.756821+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 30, "request_id": "43e1aa2d-8633-47d1-8bf0-8622b6963512"}
{"timestamp": "2025-12-29T12:31:46.757789+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/login \u2192 200 (0.215s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "43e1aa2d-8633-47d1-8bf0-8622b6963512"}
{"timestamp": "2025-12-29T12:31:46.758742+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "43e1aa2d-8633-47d1-8bf0-8622b6963512"}
{"timestamp": "2025-12-29T12:31:46.760122+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /profiles/me", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b04be8c3-cf62-4dfc-bc3e-e7180a7c7ec6"}
{"timestamp": "2025-12-29T12:31:46.764449+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b04be8c3-cf62-4dfc-bc3e-e7180a7c7ec6"}
{"timestamp": "2025-12-29T12:31:46.765608+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b04be8c3-cf62-4dfc-bc3e-e7180a7c7ec6"}
{"timestamp": "2025-12-29T12:31:46.766013+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b04be8c3-cf62-4dfc-bc3e-e7180a7c7ec6"}
{"timestamp": "2025-12-29T12:31:46.769279+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b04be8c3-cf62-4dfc-bc3e-e7180a7c7ec6"}
{"timestamp": "2025-12-29T12:31:46.769731+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.4963s ago] {'user_id_1': 25, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b04be8c3-cf62-4dfc-bc3e-e7180a7c7ec6"}
{"timestamp": "2025-12-29T12:31:46.776348+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /profiles/me \u2192 200 (0.016s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b04be8c3-cf62-4dfc-bc3e-e7180a7c7ec6"}
{"timestamp": "2025-12-29T12:31:46.777568+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b04be8c3-cf62-4dfc-bc3e-e7180a7c7ec6"}
{"timestamp": "2025-12-29T12:31:46.779702+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "39754b6c-8c53-4804-9c31-9b6720f4105c"}
{"timestamp": "2025-12-29T12:31:46.782866+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "39754b6c-8c53-4804-9c31-9b6720f4105c"}
{"timestamp": "2025-12-29T12:31:46.784962+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "39754b6c-8c53-4804-9c31-9b6720f4105c"}
{"timestamp": "2025-12-29T12:31:46.785362+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'title_1': 'The Matrix Reloaded 1767011506.778131'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "39754b6c-8c53-4804-9c31-9b6720f4105c"}
{"timestamp": "2025-12-29T12:31:46.793568+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "39754b6c-8c53-4804-9c31-9b6720f4105c"}
{"timestamp": "2025-12-29T12:31:46.794227+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00066s] {'title': 'The Matrix Reloaded 1767011506.778131', 'description': 'Test movie: The Matrix Reloaded 1767011506.778131', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "39754b6c-8c53-4804-9c31-9b6720f4105c"}
{"timestamp": "2025-12-29T12:31:46.797446+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "39754b6c-8c53-4804-9c31-9b6720f4105c"}
{"timestamp": "2025-12-29T12:31:46.801822+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "39754b6c-8c53-4804-9c31-9b6720f4105c"}
{"timestamp": "2025-12-29T12:31:46.802924+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "39754b6c-8c53-4804-9c31-9b6720f4105c"}
{"timestamp": "2025-12-29T12:31:46.803311+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "39754b6c-8c53-4804-9c31-9b6720f4105c"}
{"timestamp": "2025-12-29T12:31:46.805539+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 22}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "39754b6c-8c53-4804-9c31-9b6720f4105c"}
{"timestamp": "2025-12-29T12:31:46.805800+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "39754b6c-8c53-4804-9c31-9b6720f4105c"}
{"timestamp": "2025-12-29T12:31:46.806613+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "39754b6c-8c53-4804-9c31-9b6720f4105c"}
{"timestamp": "2025-12-29T12:31:46.806875+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "39754b6c-8c53-4804-9c31-9b6720f4105c"}
{"timestamp": "2025-12-29T12:31:46.808567+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.029s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "39754b6c-8c53-4804-9c31-9b6720f4105c"}
{"timestamp": "2025-12-29T12:31:46.809585+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "39754b6c-8c53-4804-9c31-9b6720f4105c"}
{"timestamp": "2025-12-29T12:31:46.811238+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "28ed3698-bf2d-4113-bf30-8c31d8193f7a"}
{"timestamp": "2025-12-29T12:31:46.814223+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "28ed3698-bf2d-4113-bf30-8c31d8193f7a"}
{"timestamp": "2025-12-29T12:31:46.815670+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "28ed3698-bf2d-4113-bf30-8c31d8193f7a"}
{"timestamp": "2025-12-29T12:31:46.816097+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'name_1': 'Standard Layout 1767011506.809646'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "28ed3698-bf2d-4113-bf30-8c31d8193f7a"}
{"timestamp": "2025-12-29T12:31:46.821294+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "28ed3698-bf2d-4113-bf30-8c31d8193f7a"}
{"timestamp": "2025-12-29T12:31:46.821924+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'name': 'Standard Layout 1767011506.809646', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "28ed3698-bf2d-4113-bf30-8c31d8193f7a"}
{"timestamp": "2025-12-29T12:31:46.825427+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "28ed3698-bf2d-4113-bf30-8c31d8193f7a"}
{"timestamp": "2025-12-29T12:31:46.829685+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "28ed3698-bf2d-4113-bf30-8c31d8193f7a"}
{"timestamp": "2025-12-29T12:31:46.830540+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "28ed3698-bf2d-4113-bf30-8c31d8193f7a"}
{"timestamp": "2025-12-29T12:31:46.830836+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00041s] {'pk_1': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "28ed3698-bf2d-4113-bf30-8c31d8193f7a"}
{"timestamp": "2025-12-29T12:31:46.833055+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 21}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "28ed3698-bf2d-4113-bf30-8c31d8193f7a"}
{"timestamp": "2025-12-29T12:31:46.833313+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "28ed3698-bf2d-4113-bf30-8c31d8193f7a"}
{"timestamp": "2025-12-29T12:31:46.834292+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "28ed3698-bf2d-4113-bf30-8c31d8193f7a"}
{"timestamp": "2025-12-29T12:31:46.834506+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "28ed3698-bf2d-4113-bf30-8c31d8193f7a"}
{"timestamp": "2025-12-29T12:31:46.835740+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.025s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "28ed3698-bf2d-4113-bf30-8c31d8193f7a"}
{"timestamp": "2025-12-29T12:31:46.836614+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "28ed3698-bf2d-4113-bf30-8c31d8193f7a"}
{"timestamp": "2025-12-29T12:31:46.838151+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "dfb39553-71bd-40b2-85a3-9b325db8e444"}
{"timestamp": "2025-12-29T12:31:46.840981+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "dfb39553-71bd-40b2-85a3-9b325db8e444"}
{"timestamp": "2025-12-29T12:31:46.842380+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dfb39553-71bd-40b2-85a3-9b325db8e444"}
{"timestamp": "2025-12-29T12:31:46.842931+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'name_1': 'Screen 1 1767011506.83652', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dfb39553-71bd-40b2-85a3-9b325db8e444"}
{"timestamp": "2025-12-29T12:31:46.848377+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dfb39553-71bd-40b2-85a3-9b325db8e444"}
{"timestamp": "2025-12-29T12:31:46.848818+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'id_1': 21, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dfb39553-71bd-40b2-85a3-9b325db8e444"}
{"timestamp": "2025-12-29T12:31:46.851695+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dfb39553-71bd-40b2-85a3-9b325db8e444"}
{"timestamp": "2025-12-29T12:31:46.852155+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'name': 'Screen 1 1767011506.83652', 'capacity': 150, 'seat_layout_id': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dfb39553-71bd-40b2-85a3-9b325db8e444"}
{"timestamp": "2025-12-29T12:31:46.855778+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "dfb39553-71bd-40b2-85a3-9b325db8e444"}
{"timestamp": "2025-12-29T12:31:46.860439+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "dfb39553-71bd-40b2-85a3-9b325db8e444"}
{"timestamp": "2025-12-29T12:31:46.866183+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dfb39553-71bd-40b2-85a3-9b325db8e444"}
{"timestamp": "2025-12-29T12:31:46.866528+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'pk_1': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dfb39553-71bd-40b2-85a3-9b325db8e444"}
{"timestamp": "2025-12-29T12:31:46.868892+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 21}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "dfb39553-71bd-40b2-85a3-9b325db8e444"}
{"timestamp": "2025-12-29T12:31:46.869171+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "dfb39553-71bd-40b2-85a3-9b325db8e444"}
{"timestamp": "2025-12-29T12:31:46.869952+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "dfb39553-71bd-40b2-85a3-9b325db8e444"}
{"timestamp": "2025-12-29T12:31:46.870173+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "dfb39553-71bd-40b2-85a3-9b325db8e444"}
{"timestamp": "2025-12-29T12:31:46.871365+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.033s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "dfb39553-71bd-40b2-85a3-9b325db8e444"}
{"timestamp": "2025-12-29T12:31:46.872181+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "dfb39553-71bd-40b2-85a3-9b325db8e444"}
{"timestamp": "2025-12-29T12:31:46.874270+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.876943+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.878344+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.878933+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00063s] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.882091+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.882618+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00069s] {'pk_1': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.886292+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.886966+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00071s] {'screen_id_1': 21, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.894382+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.894693+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 22, 'screen_id': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.898602+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.902956+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.903999+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.904409+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'pk_1': 18}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.907916+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.908277+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.910607+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.910991+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'pk_1': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.913136+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 18}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.913622+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.914667+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.915004+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 30, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.916370+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.042s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.917689+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a7d32388-8b80-40f9-9d09-c34c854f9497"}
{"timestamp": "2025-12-29T12:31:46.919677+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /seatavailability/grid/18", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "634a8a58-158d-4bc6-b80f-9b0dae96e1c8"}
{"timestamp": "2025-12-29T12:31:46.922482+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "634a8a58-158d-4bc6-b80f-9b0dae96e1c8"}
{"timestamp": "2025-12-29T12:31:46.923965+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "634a8a58-158d-4bc6-b80f-9b0dae96e1c8"}
{"timestamp": "2025-12-29T12:31:46.925081+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'showtime_id_1': 18}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "634a8a58-158d-4bc6-b80f-9b0dae96e1c8"}
{"timestamp": "2025-12-29T12:31:46.931571+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /seatavailability/grid/18 \u2192 200 (0.012s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "634a8a58-158d-4bc6-b80f-9b0dae96e1c8"}
{"timestamp": "2025-12-29T12:31:46.932523+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "634a8a58-158d-4bc6-b80f-9b0dae96e1c8"}
{"timestamp": "2025-12-29T12:31:46.934459+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.937138+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.937920+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.938358+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.1729s ago] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.942588+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.942987+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'user_id': 25, 'showtime_id': 18, 'seat_code': 'R5-8', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 12, 31, 46, 942142, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 12, 41, 46, 941135, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.948785+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.953132+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.954409+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.954908+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'pk_1': 17}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.957241+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 17, 'user_id': 25, 'showtime_id': 18, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.957522+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.958263+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.958459+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.958716+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.959075+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.959569+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.961517+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.962552+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.962899+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'showtime_id_1': 18, 'seat_code_1': 'R5-8', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.966328+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.966673+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'seat_code': 'R5-8', 'showtime_id': 18, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.971267+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.971626+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'status': 'LOCKED', 'locked_by_user_id': 25, 'lock_expires_at': datetime.datetime(2025, 12, 29, 12, 41, 46, 970206, tzinfo=datetime.timezone.utc), 'seat_locks_id': 14}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.974378+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.978519+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.979390+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.979724+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00038s] {'pk_1': 14}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.981763+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 18, 'seat_code': 'R5-8', 'user_id': 25, 'expires_at': '2025-12-29T12:41:46.970206+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.982234+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.982570+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 30, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.983047+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.984115+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.984289+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.984526+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 17, 'user_id': 25, 'showtime_id': 18, 'seat_code': 'R5-8'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.984944+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 17", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.986789+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.987995+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.988665+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'user_id': 25, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 17}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.994550+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.998608+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:46.999757+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:47.000176+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'pk_1': 17}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:47.002055+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 17, 'reservation_id': 17, 'user_id': 25, 'showtime_id': 18, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:47.002235+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:47.002358+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_order_created for order.created", "module": "event_bus", "function": "publish", "line": 34, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:47.002496+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 17", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:47.002721+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:47.003677+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:47.003856+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 39, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:47.004991+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:47.006676+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:47.007034+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'actor_id': 25, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 17, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 17, \"user_id\": 25, \"showtime_id\": 18, \"seat_code\": \"R5-8\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 12, 31, 47, 6352, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:47.012135+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:47.015816+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:47.016959+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:47.017549+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'pk_1': 17}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:47.019839+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:47.020738+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:47.022009+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.088s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:47.022826+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "8143d9e8-3621-460d-8af6-ec7297cabe38"}
{"timestamp": "2025-12-29T12:31:47.024500+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "eb607afb-7e29-4f1f-b734-6ddee8cc44f7"}
{"timestamp": "2025-12-29T12:31:47.026626+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "eb607afb-7e29-4f1f-b734-6ddee8cc44f7"}
{"timestamp": "2025-12-29T12:31:47.027146+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "eb607afb-7e29-4f1f-b734-6ddee8cc44f7"}
{"timestamp": "2025-12-29T12:31:47.027628+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2621s ago] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "eb607afb-7e29-4f1f-b734-6ddee8cc44f7"}
{"timestamp": "2025-12-29T12:31:47.030892+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "eb607afb-7e29-4f1f-b734-6ddee8cc44f7"}
{"timestamp": "2025-12-29T12:31:47.031273+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'user_id_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "eb607afb-7e29-4f1f-b734-6ddee8cc44f7"}
{"timestamp": "2025-12-29T12:31:47.033264+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.009s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "eb607afb-7e29-4f1f-b734-6ddee8cc44f7"}
{"timestamp": "2025-12-29T12:31:47.034168+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "eb607afb-7e29-4f1f-b734-6ddee8cc44f7"}
{"timestamp": "2025-12-29T12:31:47.035921+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/order/17/initiate", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "32417ad2-a450-4b71-b19b-47bee543ec55"}
{"timestamp": "2025-12-29T12:31:47.038637+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "32417ad2-a450-4b71-b19b-47bee543ec55"}
{"timestamp": "2025-12-29T12:31:47.039247+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32417ad2-a450-4b71-b19b-47bee543ec55"}
{"timestamp": "2025-12-29T12:31:47.039611+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2742s ago] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32417ad2-a450-4b71-b19b-47bee543ec55"}
{"timestamp": "2025-12-29T12:31:47.042816+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO payment_attempts (order_id, amount_attempted, status, final_amount, failure_reason, provider_payment_id, created_at) VALUES (%(order_id)s, %(amount_attempted)s, %(status)s, %(final_amount)s, %(failure_reason)s, %(provider_payment_id)s, %(created_at)s) RETURNING payment_attempts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32417ad2-a450-4b71-b19b-47bee543ec55"}
{"timestamp": "2025-12-29T12:31:47.043123+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'order_id': 17, 'amount_attempted': 10.0, 'status': 'PENDING', 'final_amount': 10.0, 'failure_reason': None, 'provider_payment_id': None, 'created_at': datetime.datetime(2025, 12, 29, 12, 31, 47, 42515, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32417ad2-a450-4b71-b19b-47bee543ec55"}
{"timestamp": "2025-12-29T12:31:47.048221+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "32417ad2-a450-4b71-b19b-47bee543ec55"}
{"timestamp": "2025-12-29T12:31:47.052709+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "32417ad2-a450-4b71-b19b-47bee543ec55"}
{"timestamp": "2025-12-29T12:31:47.054191+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32417ad2-a450-4b71-b19b-47bee543ec55"}
{"timestamp": "2025-12-29T12:31:47.054532+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'pk_1': 10}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32417ad2-a450-4b71-b19b-47bee543ec55"}
{"timestamp": "2025-12-29T12:31:47.056621+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.pending with payload: {'payment_attempt_id': 10, 'order_id': 17, 'amount_attempted': 10.0, 'final_amount': 10.0}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "32417ad2-a450-4b71-b19b-47bee543ec55"}
{"timestamp": "2025-12-29T12:31:47.056858+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "32417ad2-a450-4b71-b19b-47bee543ec55"}
{"timestamp": "2025-12-29T12:31:47.057572+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.pending to 0 handlers", "module": "event_bus", "function": "publish", "line": 27, "request_id": "32417ad2-a450-4b71-b19b-47bee543ec55"}
{"timestamp": "2025-12-29T12:31:47.057748+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: payment.pending", "module": "event_bus", "function": "publish", "line": 30, "request_id": "32417ad2-a450-4b71-b19b-47bee543ec55"}
{"timestamp": "2025-12-29T12:31:47.059231+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/order/17/initiate \u2192 200 (0.023s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "32417ad2-a450-4b71-b19b-47bee543ec55"}
{"timestamp": "2025-12-29T12:31:47.060161+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "32417ad2-a450-4b71-b19b-47bee543ec55"}
{"timestamp": "2025-12-29T12:31:47.061842+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/10/confirm", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "f79b2b1c-8b75-4dde-8c2d-5278c3f065d6"}
{"timestamp": "2025-12-29T12:31:47.064340+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f79b2b1c-8b75-4dde-8c2d-5278c3f065d6"}
{"timestamp": "2025-12-29T12:31:47.064982+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f79b2b1c-8b75-4dde-8c2d-5278c3f065d6"}
{"timestamp": "2025-12-29T12:31:47.065539+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.3s ago] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f79b2b1c-8b75-4dde-8c2d-5278c3f065d6"}
{"timestamp": "2025-12-29T12:31:47.068620+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id AS payment_attempts_id, payment_attempts.order_id AS payment_attempts_order_id, payment_attempts.amount_attempted AS payment_attempts_amount_attempted, payment_attempts.status AS payment_attempts_status, payment_attempts.final_amount AS payment_attempts_final_amount, payment_attempts.failure_reason AS payment_attempts_failure_reason, payment_attempts.provider_payment_id AS payment_attempts_provider_payment_id, payment_attempts.created_at AS payment_attempts_created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f79b2b1c-8b75-4dde-8c2d-5278c3f065d6"}
{"timestamp": "2025-12-29T12:31:47.068893+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'pk_1': 10}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f79b2b1c-8b75-4dde-8c2d-5278c3f065d6"}
{"timestamp": "2025-12-29T12:31:47.071220+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f79b2b1c-8b75-4dde-8c2d-5278c3f065d6"}
{"timestamp": "2025-12-29T12:31:47.071613+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'pk_1': 17}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f79b2b1c-8b75-4dde-8c2d-5278c3f065d6"}
{"timestamp": "2025-12-29T12:31:47.073617+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f79b2b1c-8b75-4dde-8c2d-5278c3f065d6"}
{"timestamp": "2025-12-29T12:31:47.098901+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.middleware", "message": "\u2717 POST /payments/10/confirm \u2192 FAILED (0.013s)", "module": "middleware", "function": "dispatch", "line": 83, "request_id": "f79b2b1c-8b75-4dde-8c2d-5278c3f065d6", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 151, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\streams\\memory.py\", line 126, in receive\n    raise EndOfStream from None\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\middleware.py\", line 57, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    raise app_exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 390, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 291, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\concurrency.py\", line 38, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\to_thread.py\", line 56, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 2485, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 976, in run\n    result = context.run(func, *args)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\payment\\router.py\", line 50, in confirm_payment_route\n    return mark_payment_succeeded(\n        db=db,\n        payment_attempt_id=payment_attempt_id,\n        provider_payment_id=provider_payment_id\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\payment\\service.py\", line 66, in mark_payment_succeeded\n    raise ValidationError(\"Final amount not equal to order amount\")\napp.core.errors.ValidationError: Final amount not equal to order amount"}
{"timestamp": "2025-12-29T12:36:42.477463+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-29T12:36:44.799858+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-29T12:36:44.800312+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-29T12:36:44.800627+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.800926+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.801142+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.801378+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.801686+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.801926+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.802177+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.802473+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.802667+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.803035+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.803462+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.803981+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.804463+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.804895+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.805298+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.805665+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.805951+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.806285+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.806617+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.806952+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.807222+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.807552+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.807835+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.808084+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.808387+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.808676+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.808905+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.809310+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.809723+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.810107+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.810444+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.810738+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.811057+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.811233+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.811520+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.811738+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.811988+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.812181+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.812434+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.812682+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.812934+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.813126+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.813321+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.813593+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.813820+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.814051+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.814421+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.814810+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.815054+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.815197+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.815435+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.815670+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.815919+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.816149+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.816439+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.816688+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.817021+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.817311+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.817622+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.817851+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:36:44.818076+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-29T12:36:44.818276+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-29T12:36:56.506877+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.565644+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.566093+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.569036+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.569369+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.571558+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.572163+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.574788+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.577827+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.578377+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00065s] {'email_1': 'test_1767011814.451531@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.582117+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "detected 'bcrypt' backend, version '4.0.1'", "module": "bcrypt", "function": "_load_backend_mixin", "line": 625, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.582453+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "'bcrypt' backend lacks $2$ support, enabling workaround", "module": "bcrypt", "function": "_finalize_backend_mixin", "line": 406, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.804712+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.805239+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00066s] {'email': 'test_1767011814.451531@example.com', 'hashed_password': '$2b$12$mwEWXO1ssLZFF9YqviwBru7IB.2woYJ8katH3SXHo0uz9LY9uzZOy', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.807345+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.812537+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.813917+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.814301+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.816594+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 26, 'email': 'test_1767011814.451531@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.816939+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.817966+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.818282+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.818463+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.841126+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.842565+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.842852+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'user_id_1': 26, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.846467+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.846871+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00042s] {'user_id': 26, 'name': None, 'email': 'test_1767011814.451531@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.849196+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.853558+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.854399+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.854786+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00036s] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.856938+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 26, 'user_id': 26, 'email': 'test_1767011814.451531@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.857148+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.857277+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.857504+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.858483+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.859743+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:56.860089+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2826s ago] {'email_1': 'test_1767011814.451531@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:57.073756+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 26, 'email': 'test_1767011814.451531@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:57.074028+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:57.074835+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:57.075064+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:57.076362+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.570s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:57.077501+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "72d9e1fe-b1f0-43ff-bcd2-03633a5a4011"}
{"timestamp": "2025-12-29T12:36:57.079514+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/login", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "555c15fc-02e2-4bf2-a584-85732f5de5c0"}
{"timestamp": "2025-12-29T12:36:57.080323+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "555c15fc-02e2-4bf2-a584-85732f5de5c0"}
{"timestamp": "2025-12-29T12:36:57.080562+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[0:8]", "module": "multipart", "function": "callback", "line": 625, "request_id": "555c15fc-02e2-4bf2-a584-85732f5de5c0"}
{"timestamp": "2025-12-29T12:36:57.080766+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[9:45]", "module": "multipart", "function": "callback", "line": 625, "request_id": "555c15fc-02e2-4bf2-a584-85732f5de5c0"}
{"timestamp": "2025-12-29T12:36:57.080920+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "555c15fc-02e2-4bf2-a584-85732f5de5c0"}
{"timestamp": "2025-12-29T12:36:57.081057+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "555c15fc-02e2-4bf2-a584-85732f5de5c0"}
{"timestamp": "2025-12-29T12:36:57.081199+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[46:54]", "module": "multipart", "function": "callback", "line": 625, "request_id": "555c15fc-02e2-4bf2-a584-85732f5de5c0"}
{"timestamp": "2025-12-29T12:36:57.081374+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[55:73]", "module": "multipart", "function": "callback", "line": 625, "request_id": "555c15fc-02e2-4bf2-a584-85732f5de5c0"}
{"timestamp": "2025-12-29T12:36:57.081737+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "555c15fc-02e2-4bf2-a584-85732f5de5c0"}
{"timestamp": "2025-12-29T12:36:57.081876+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "555c15fc-02e2-4bf2-a584-85732f5de5c0"}
{"timestamp": "2025-12-29T12:36:57.084603+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "555c15fc-02e2-4bf2-a584-85732f5de5c0"}
{"timestamp": "2025-12-29T12:36:57.085209+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "555c15fc-02e2-4bf2-a584-85732f5de5c0"}
{"timestamp": "2025-12-29T12:36:57.085492+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.508s ago] {'email_1': 'test_1767011814.451531@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "555c15fc-02e2-4bf2-a584-85732f5de5c0"}
{"timestamp": "2025-12-29T12:36:57.293316+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 26, 'email': 'test_1767011814.451531@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "555c15fc-02e2-4bf2-a584-85732f5de5c0"}
{"timestamp": "2025-12-29T12:36:57.293654+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "555c15fc-02e2-4bf2-a584-85732f5de5c0"}
{"timestamp": "2025-12-29T12:36:57.294449+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "555c15fc-02e2-4bf2-a584-85732f5de5c0"}
{"timestamp": "2025-12-29T12:36:57.294711+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "555c15fc-02e2-4bf2-a584-85732f5de5c0"}
{"timestamp": "2025-12-29T12:36:57.295816+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/login \u2192 200 (0.216s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "555c15fc-02e2-4bf2-a584-85732f5de5c0"}
{"timestamp": "2025-12-29T12:36:57.296707+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "555c15fc-02e2-4bf2-a584-85732f5de5c0"}
{"timestamp": "2025-12-29T12:36:57.298095+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /profiles/me", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "94d7a898-dca7-4e26-b804-5d5775138c94"}
{"timestamp": "2025-12-29T12:36:57.300796+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "94d7a898-dca7-4e26-b804-5d5775138c94"}
{"timestamp": "2025-12-29T12:36:57.301914+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "94d7a898-dca7-4e26-b804-5d5775138c94"}
{"timestamp": "2025-12-29T12:36:57.302391+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "94d7a898-dca7-4e26-b804-5d5775138c94"}
{"timestamp": "2025-12-29T12:36:57.306897+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "94d7a898-dca7-4e26-b804-5d5775138c94"}
{"timestamp": "2025-12-29T12:36:57.307542+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.465s ago] {'user_id_1': 26, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "94d7a898-dca7-4e26-b804-5d5775138c94"}
{"timestamp": "2025-12-29T12:36:57.310703+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /profiles/me \u2192 200 (0.013s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "94d7a898-dca7-4e26-b804-5d5775138c94"}
{"timestamp": "2025-12-29T12:36:57.311919+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "94d7a898-dca7-4e26-b804-5d5775138c94"}
{"timestamp": "2025-12-29T12:36:57.314047+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "fff5f147-7285-46f5-9607-2555b4337021"}
{"timestamp": "2025-12-29T12:36:57.316540+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "fff5f147-7285-46f5-9607-2555b4337021"}
{"timestamp": "2025-12-29T12:36:57.319021+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "fff5f147-7285-46f5-9607-2555b4337021"}
{"timestamp": "2025-12-29T12:36:57.319836+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00093s] {'title_1': 'The Matrix Reloaded 1767011817.312387'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "fff5f147-7285-46f5-9607-2555b4337021"}
{"timestamp": "2025-12-29T12:36:57.324101+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "fff5f147-7285-46f5-9607-2555b4337021"}
{"timestamp": "2025-12-29T12:36:57.324963+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'title': 'The Matrix Reloaded 1767011817.312387', 'description': 'Test movie: The Matrix Reloaded 1767011817.312387', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "fff5f147-7285-46f5-9607-2555b4337021"}
{"timestamp": "2025-12-29T12:36:57.327128+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "fff5f147-7285-46f5-9607-2555b4337021"}
{"timestamp": "2025-12-29T12:36:57.332267+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "fff5f147-7285-46f5-9607-2555b4337021"}
{"timestamp": "2025-12-29T12:36:57.333432+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "fff5f147-7285-46f5-9607-2555b4337021"}
{"timestamp": "2025-12-29T12:36:57.333757+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "fff5f147-7285-46f5-9607-2555b4337021"}
{"timestamp": "2025-12-29T12:36:57.336000+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 23}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "fff5f147-7285-46f5-9607-2555b4337021"}
{"timestamp": "2025-12-29T12:36:57.336343+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "fff5f147-7285-46f5-9607-2555b4337021"}
{"timestamp": "2025-12-29T12:36:57.337064+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "fff5f147-7285-46f5-9607-2555b4337021"}
{"timestamp": "2025-12-29T12:36:57.337238+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "fff5f147-7285-46f5-9607-2555b4337021"}
{"timestamp": "2025-12-29T12:36:57.338534+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.025s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "fff5f147-7285-46f5-9607-2555b4337021"}
{"timestamp": "2025-12-29T12:36:57.339668+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "fff5f147-7285-46f5-9607-2555b4337021"}
{"timestamp": "2025-12-29T12:36:57.341469+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "ad525f6c-b428-4bcf-99af-147eff0798a8"}
{"timestamp": "2025-12-29T12:36:57.344031+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ad525f6c-b428-4bcf-99af-147eff0798a8"}
{"timestamp": "2025-12-29T12:36:57.345255+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ad525f6c-b428-4bcf-99af-147eff0798a8"}
{"timestamp": "2025-12-29T12:36:57.345826+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'name_1': 'Standard Layout 1767011817.339759'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ad525f6c-b428-4bcf-99af-147eff0798a8"}
{"timestamp": "2025-12-29T12:36:57.349717+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ad525f6c-b428-4bcf-99af-147eff0798a8"}
{"timestamp": "2025-12-29T12:36:57.350110+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'name': 'Standard Layout 1767011817.339759', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ad525f6c-b428-4bcf-99af-147eff0798a8"}
{"timestamp": "2025-12-29T12:36:57.352284+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "ad525f6c-b428-4bcf-99af-147eff0798a8"}
{"timestamp": "2025-12-29T12:36:57.356765+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ad525f6c-b428-4bcf-99af-147eff0798a8"}
{"timestamp": "2025-12-29T12:36:57.357777+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ad525f6c-b428-4bcf-99af-147eff0798a8"}
{"timestamp": "2025-12-29T12:36:57.358315+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ad525f6c-b428-4bcf-99af-147eff0798a8"}
{"timestamp": "2025-12-29T12:36:57.360721+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 22}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "ad525f6c-b428-4bcf-99af-147eff0798a8"}
{"timestamp": "2025-12-29T12:36:57.361037+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "ad525f6c-b428-4bcf-99af-147eff0798a8"}
{"timestamp": "2025-12-29T12:36:57.361722+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "ad525f6c-b428-4bcf-99af-147eff0798a8"}
{"timestamp": "2025-12-29T12:36:57.361894+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "ad525f6c-b428-4bcf-99af-147eff0798a8"}
{"timestamp": "2025-12-29T12:36:57.363049+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "ad525f6c-b428-4bcf-99af-147eff0798a8"}
{"timestamp": "2025-12-29T12:36:57.364023+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ad525f6c-b428-4bcf-99af-147eff0798a8"}
{"timestamp": "2025-12-29T12:36:57.365438+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "9ecb180d-ddd7-47b6-84ad-98739cdfa4cb"}
{"timestamp": "2025-12-29T12:36:57.368449+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9ecb180d-ddd7-47b6-84ad-98739cdfa4cb"}
{"timestamp": "2025-12-29T12:36:57.369802+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ecb180d-ddd7-47b6-84ad-98739cdfa4cb"}
{"timestamp": "2025-12-29T12:36:57.370173+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'name_1': 'Screen 1 1767011817.363803', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ecb180d-ddd7-47b6-84ad-98739cdfa4cb"}
{"timestamp": "2025-12-29T12:36:57.373410+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ecb180d-ddd7-47b6-84ad-98739cdfa4cb"}
{"timestamp": "2025-12-29T12:36:57.373835+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'id_1': 22, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ecb180d-ddd7-47b6-84ad-98739cdfa4cb"}
{"timestamp": "2025-12-29T12:36:57.376312+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ecb180d-ddd7-47b6-84ad-98739cdfa4cb"}
{"timestamp": "2025-12-29T12:36:57.376765+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'name': 'Screen 1 1767011817.363803', 'capacity': 150, 'seat_layout_id': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ecb180d-ddd7-47b6-84ad-98739cdfa4cb"}
{"timestamp": "2025-12-29T12:36:57.378815+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "9ecb180d-ddd7-47b6-84ad-98739cdfa4cb"}
{"timestamp": "2025-12-29T12:36:57.383501+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9ecb180d-ddd7-47b6-84ad-98739cdfa4cb"}
{"timestamp": "2025-12-29T12:36:57.389129+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ecb180d-ddd7-47b6-84ad-98739cdfa4cb"}
{"timestamp": "2025-12-29T12:36:57.389398+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ecb180d-ddd7-47b6-84ad-98739cdfa4cb"}
{"timestamp": "2025-12-29T12:36:57.391627+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 22}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "9ecb180d-ddd7-47b6-84ad-98739cdfa4cb"}
{"timestamp": "2025-12-29T12:36:57.391884+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "9ecb180d-ddd7-47b6-84ad-98739cdfa4cb"}
{"timestamp": "2025-12-29T12:36:57.392532+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "9ecb180d-ddd7-47b6-84ad-98739cdfa4cb"}
{"timestamp": "2025-12-29T12:36:57.392735+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "9ecb180d-ddd7-47b6-84ad-98739cdfa4cb"}
{"timestamp": "2025-12-29T12:36:57.393850+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.028s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "9ecb180d-ddd7-47b6-84ad-98739cdfa4cb"}
{"timestamp": "2025-12-29T12:36:57.394712+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "9ecb180d-ddd7-47b6-84ad-98739cdfa4cb"}
{"timestamp": "2025-12-29T12:36:57.396383+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.398796+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.399771+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.400297+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.403231+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.403497+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.406290+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.406697+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'screen_id_1': 22, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.409638+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.409937+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 23, 'screen_id': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.411876+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.416447+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.417500+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.417911+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'pk_1': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.421125+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.421563+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.423970+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.424301+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.425735+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 19}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.425968+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.426627+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.426848+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.428553+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.032s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.429491+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "cb18fd1f-b147-4c93-80db-305168e51565"}
{"timestamp": "2025-12-29T12:36:57.431296+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /seatavailability/grid/19", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b869094f-3222-4081-b6fb-88b8611aafd3"}
{"timestamp": "2025-12-29T12:36:57.433727+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b869094f-3222-4081-b6fb-88b8611aafd3"}
{"timestamp": "2025-12-29T12:36:57.435321+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b869094f-3222-4081-b6fb-88b8611aafd3"}
{"timestamp": "2025-12-29T12:36:57.435826+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'showtime_id_1': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b869094f-3222-4081-b6fb-88b8611aafd3"}
{"timestamp": "2025-12-29T12:36:57.438612+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /seatavailability/grid/19 \u2192 200 (0.007s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b869094f-3222-4081-b6fb-88b8611aafd3"}
{"timestamp": "2025-12-29T12:36:57.439645+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b869094f-3222-4081-b6fb-88b8611aafd3"}
{"timestamp": "2025-12-29T12:36:57.441486+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.444488+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.445177+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.445848+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.144s ago] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.449400+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.450047+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'user_id': 26, 'showtime_id': 19, 'seat_code': 'R5-8', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 12, 36, 57, 449026, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 12, 46, 57, 448148, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.452578+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.456915+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.458015+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.458280+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'pk_1': 18}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.460397+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 18, 'user_id': 26, 'showtime_id': 19, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.460646+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.461371+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.461569+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.461693+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.462970+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.464457+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.464900+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00087s] {'showtime_id_1': 19, 'seat_code_1': 'R5-8', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.467784+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.468066+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00040s] {'seat_code': 'R5-8', 'showtime_id': 19, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.470769+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.471109+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00042s] {'status': 'LOCKED', 'locked_by_user_id': 26, 'lock_expires_at': datetime.datetime(2025, 12, 29, 12, 46, 57, 469401, tzinfo=datetime.timezone.utc), 'seat_locks_id': 15}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.472833+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.476453+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.477671+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.478174+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00073s] {'pk_1': 15}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.480168+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 19, 'seat_code': 'R5-8', 'user_id': 26, 'expires_at': '2025-12-29T12:46:57.469401+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.480372+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.480498+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.480740+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.481897+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.482080+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.482226+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.482565+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 18, 'user_id': 26, 'showtime_id': 19, 'seat_code': 'R5-8'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.482914+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 18", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.484676+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.485855+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.486126+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00043s] {'user_id': 26, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 18}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.488345+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.492235+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.493377+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.493662+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'pk_1': 18}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.495360+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 18, 'reservation_id': 18, 'user_id': 26, 'showtime_id': 19, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.495625+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.495824+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_order_created for order.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.495962+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_order_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.496091+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 18", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.518265+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.520265+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.520696+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.526304+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 18, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.526543+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.526735+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_pricing_snapshot_created for pricing.snapshot_created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.527027+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_pricing_snapshot_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.527215+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 18, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.528598+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Failed to update order pricing: 'OrderRepository' object has no attribute 'get_by_id'", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 114, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\order\\handlers.py\", line 100, in on_pricing_snapshot_created\n    order = repo.get_by_id(db, order_id)\n            ^^^^^^^^^^^^^^\nAttributeError: 'OrderRepository' object has no attribute 'get_by_id'"}
{"timestamp": "2025-12-29T12:36:57.530849+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.531075+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 18: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.531449+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.533053+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.533360+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 18", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.533725+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.534967+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.535195+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.535330+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.536766+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.538025+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.538405+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'actor_id': 26, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 18, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 18, \"user_id\": 26, \"showtime_id\": 19, \"seat_code\": \"R5-8\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 12, 36, 57, 537685, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.541332+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.545634+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.546861+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.547516+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00072s] {'pk_1': 18}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.549732+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.550606+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.551996+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.111s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.552831+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2930f3c6-ff7c-462c-90fc-28f9dfa50206"}
{"timestamp": "2025-12-29T12:36:57.554773+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "68feca7d-745e-4a48-b18d-278834625a61"}
{"timestamp": "2025-12-29T12:36:57.557189+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "68feca7d-745e-4a48-b18d-278834625a61"}
{"timestamp": "2025-12-29T12:36:57.557839+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68feca7d-745e-4a48-b18d-278834625a61"}
{"timestamp": "2025-12-29T12:36:57.558189+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2565s ago] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68feca7d-745e-4a48-b18d-278834625a61"}
{"timestamp": "2025-12-29T12:36:57.561244+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68feca7d-745e-4a48-b18d-278834625a61"}
{"timestamp": "2025-12-29T12:36:57.561523+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'user_id_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68feca7d-745e-4a48-b18d-278834625a61"}
{"timestamp": "2025-12-29T12:36:57.563549+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.009s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "68feca7d-745e-4a48-b18d-278834625a61"}
{"timestamp": "2025-12-29T12:36:57.564481+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "68feca7d-745e-4a48-b18d-278834625a61"}
{"timestamp": "2025-12-29T12:36:57.566237+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/order/18/initiate", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "ee6efedf-5017-4462-9b0b-18594762b3ba"}
{"timestamp": "2025-12-29T12:36:57.568415+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ee6efedf-5017-4462-9b0b-18594762b3ba"}
{"timestamp": "2025-12-29T12:36:57.568954+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ee6efedf-5017-4462-9b0b-18594762b3ba"}
{"timestamp": "2025-12-29T12:36:57.569193+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2676s ago] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ee6efedf-5017-4462-9b0b-18594762b3ba"}
{"timestamp": "2025-12-29T12:36:57.572606+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO payment_attempts (order_id, amount_attempted, status, final_amount, failure_reason, provider_payment_id, created_at) VALUES (%(order_id)s, %(amount_attempted)s, %(status)s, %(final_amount)s, %(failure_reason)s, %(provider_payment_id)s, %(created_at)s) RETURNING payment_attempts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ee6efedf-5017-4462-9b0b-18594762b3ba"}
{"timestamp": "2025-12-29T12:36:57.572916+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'order_id': 18, 'amount_attempted': 10.0, 'status': 'PENDING', 'final_amount': 10.0, 'failure_reason': None, 'provider_payment_id': None, 'created_at': datetime.datetime(2025, 12, 29, 12, 36, 57, 572318, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ee6efedf-5017-4462-9b0b-18594762b3ba"}
{"timestamp": "2025-12-29T12:36:57.574907+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "ee6efedf-5017-4462-9b0b-18594762b3ba"}
{"timestamp": "2025-12-29T12:36:57.578983+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ee6efedf-5017-4462-9b0b-18594762b3ba"}
{"timestamp": "2025-12-29T12:36:57.580161+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ee6efedf-5017-4462-9b0b-18594762b3ba"}
{"timestamp": "2025-12-29T12:36:57.580438+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'pk_1': 11}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ee6efedf-5017-4462-9b0b-18594762b3ba"}
{"timestamp": "2025-12-29T12:36:57.583036+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.pending with payload: {'payment_attempt_id': 11, 'order_id': 18, 'amount_attempted': 10.0, 'final_amount': 10.0}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "ee6efedf-5017-4462-9b0b-18594762b3ba"}
{"timestamp": "2025-12-29T12:36:57.583399+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "ee6efedf-5017-4462-9b0b-18594762b3ba"}
{"timestamp": "2025-12-29T12:36:57.584248+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.pending to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "ee6efedf-5017-4462-9b0b-18594762b3ba"}
{"timestamp": "2025-12-29T12:36:57.584485+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: payment.pending", "module": "event_bus", "function": "publish", "line": 31, "request_id": "ee6efedf-5017-4462-9b0b-18594762b3ba"}
{"timestamp": "2025-12-29T12:36:57.585729+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/order/18/initiate \u2192 200 (0.019s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "ee6efedf-5017-4462-9b0b-18594762b3ba"}
{"timestamp": "2025-12-29T12:36:57.586873+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ee6efedf-5017-4462-9b0b-18594762b3ba"}
{"timestamp": "2025-12-29T12:36:57.588454+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/11/confirm", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "2f880832-3145-4b2f-9fa7-94df960df245"}
{"timestamp": "2025-12-29T12:36:57.590995+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2f880832-3145-4b2f-9fa7-94df960df245"}
{"timestamp": "2025-12-29T12:36:57.591596+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f880832-3145-4b2f-9fa7-94df960df245"}
{"timestamp": "2025-12-29T12:36:57.592001+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2903s ago] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f880832-3145-4b2f-9fa7-94df960df245"}
{"timestamp": "2025-12-29T12:36:57.595354+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id AS payment_attempts_id, payment_attempts.order_id AS payment_attempts_order_id, payment_attempts.amount_attempted AS payment_attempts_amount_attempted, payment_attempts.status AS payment_attempts_status, payment_attempts.final_amount AS payment_attempts_final_amount, payment_attempts.failure_reason AS payment_attempts_failure_reason, payment_attempts.provider_payment_id AS payment_attempts_provider_payment_id, payment_attempts.created_at AS payment_attempts_created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f880832-3145-4b2f-9fa7-94df960df245"}
{"timestamp": "2025-12-29T12:36:57.595749+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'pk_1': 11}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f880832-3145-4b2f-9fa7-94df960df245"}
{"timestamp": "2025-12-29T12:36:57.598330+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f880832-3145-4b2f-9fa7-94df960df245"}
{"timestamp": "2025-12-29T12:36:57.598652+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'pk_1': 18}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f880832-3145-4b2f-9fa7-94df960df245"}
{"timestamp": "2025-12-29T12:36:57.600738+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2f880832-3145-4b2f-9fa7-94df960df245"}
{"timestamp": "2025-12-29T12:36:57.611474+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.middleware", "message": "\u2717 POST /payments/11/confirm \u2192 FAILED (0.014s)", "module": "middleware", "function": "dispatch", "line": 83, "request_id": "2f880832-3145-4b2f-9fa7-94df960df245", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 151, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\streams\\memory.py\", line 126, in receive\n    raise EndOfStream from None\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\middleware.py\", line 57, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    raise app_exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 390, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 291, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\concurrency.py\", line 38, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\to_thread.py\", line 56, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 2485, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 976, in run\n    result = context.run(func, *args)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\payment\\router.py\", line 50, in confirm_payment_route\n    return mark_payment_succeeded(\n        db=db,\n        payment_attempt_id=payment_attempt_id,\n        provider_payment_id=provider_payment_id\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\payment\\service.py\", line 66, in mark_payment_succeeded\n    raise ValidationError(\"Final amount not equal to order amount\")\napp.core.errors.ValidationError: Final amount not equal to order amount"}
{"timestamp": "2025-12-29T12:40:23.459560+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-29T12:40:25.316897+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-29T12:40:25.317311+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-29T12:40:25.317485+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.317692+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.317813+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.317924+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.318096+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.318214+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.318367+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.318567+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.318764+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.318913+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.319058+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.319281+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.319424+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.319539+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.319650+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.319768+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.319881+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.319991+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.320318+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.320513+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.320715+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.321026+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.321308+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.321666+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.322088+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.322404+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.322693+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.322882+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.323020+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.323233+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.323421+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.323670+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.323923+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.324147+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.324346+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.324542+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.324886+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.325164+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.325331+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.325529+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.325764+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.325933+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.326055+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.326191+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.326480+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.326605+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.326723+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.326838+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.326951+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.327094+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.327347+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.327554+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.327794+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.327958+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.328176+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.328470+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.328728+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.328898+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.329157+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.329364+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:40:25.329489+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-29T12:40:25.329598+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-29T12:40:45.410669+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.454132+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.454600+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.457007+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.457352+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.459424+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.459773+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.462392+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.464980+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.465394+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'email_1': 'test_1767012043.352704@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.468983+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "detected 'bcrypt' backend, version '4.0.1'", "module": "bcrypt", "function": "_load_backend_mixin", "line": 625, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.469412+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "'bcrypt' backend lacks $2$ support, enabling workaround", "module": "bcrypt", "function": "_finalize_backend_mixin", "line": 406, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.690151+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.690651+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00063s] {'email': 'test_1767012043.352704@example.com', 'hashed_password': '$2b$12$dcPE5bJyLqJWV89/GLE.6eP4jRynulA.3iP.7.TlidyqtshvPyk7i', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.692798+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.698362+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.700094+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.700581+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00072s] {'pk_1': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.703042+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 27, 'email': 'test_1767012043.352704@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.703478+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.704686+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.705094+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.705472+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.727374+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.728921+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.729197+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'user_id_1': 27, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.732967+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.733333+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'user_id': 27, 'name': None, 'email': 'test_1767012043.352704@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.736336+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.740868+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.741983+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.742601+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00070s] {'pk_1': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.744815+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 27, 'user_id': 27, 'email': 'test_1767012043.352704@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.745028+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.745159+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.745385+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.746839+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.748242+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.748763+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2839s ago] {'email_1': 'test_1767012043.352704@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.963900+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 27, 'email': 'test_1767012043.352704@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.964261+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.965094+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.965321+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.966631+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.556s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.967593+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "48408119-885b-4a71-b04f-addab1b392d8"}
{"timestamp": "2025-12-29T12:40:45.969865+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/login", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "c344426e-8a70-4595-a0c9-7a2d3a9f6655"}
{"timestamp": "2025-12-29T12:40:45.970968+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "c344426e-8a70-4595-a0c9-7a2d3a9f6655"}
{"timestamp": "2025-12-29T12:40:45.971250+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[0:8]", "module": "multipart", "function": "callback", "line": 625, "request_id": "c344426e-8a70-4595-a0c9-7a2d3a9f6655"}
{"timestamp": "2025-12-29T12:40:45.971452+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[9:45]", "module": "multipart", "function": "callback", "line": 625, "request_id": "c344426e-8a70-4595-a0c9-7a2d3a9f6655"}
{"timestamp": "2025-12-29T12:40:45.971688+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "c344426e-8a70-4595-a0c9-7a2d3a9f6655"}
{"timestamp": "2025-12-29T12:40:45.971853+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "c344426e-8a70-4595-a0c9-7a2d3a9f6655"}
{"timestamp": "2025-12-29T12:40:45.972065+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[46:54]", "module": "multipart", "function": "callback", "line": 625, "request_id": "c344426e-8a70-4595-a0c9-7a2d3a9f6655"}
{"timestamp": "2025-12-29T12:40:45.972202+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[55:73]", "module": "multipart", "function": "callback", "line": 625, "request_id": "c344426e-8a70-4595-a0c9-7a2d3a9f6655"}
{"timestamp": "2025-12-29T12:40:45.972514+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "c344426e-8a70-4595-a0c9-7a2d3a9f6655"}
{"timestamp": "2025-12-29T12:40:45.972618+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "c344426e-8a70-4595-a0c9-7a2d3a9f6655"}
{"timestamp": "2025-12-29T12:40:45.978360+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c344426e-8a70-4595-a0c9-7a2d3a9f6655"}
{"timestamp": "2025-12-29T12:40:45.979294+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c344426e-8a70-4595-a0c9-7a2d3a9f6655"}
{"timestamp": "2025-12-29T12:40:45.979765+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.5149s ago] {'email_1': 'test_1767012043.352704@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c344426e-8a70-4595-a0c9-7a2d3a9f6655"}
{"timestamp": "2025-12-29T12:40:46.189240+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 27, 'email': 'test_1767012043.352704@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "c344426e-8a70-4595-a0c9-7a2d3a9f6655"}
{"timestamp": "2025-12-29T12:40:46.189550+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "c344426e-8a70-4595-a0c9-7a2d3a9f6655"}
{"timestamp": "2025-12-29T12:40:46.190416+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "c344426e-8a70-4595-a0c9-7a2d3a9f6655"}
{"timestamp": "2025-12-29T12:40:46.190892+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "c344426e-8a70-4595-a0c9-7a2d3a9f6655"}
{"timestamp": "2025-12-29T12:40:46.192153+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/login \u2192 200 (0.222s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "c344426e-8a70-4595-a0c9-7a2d3a9f6655"}
{"timestamp": "2025-12-29T12:40:46.193023+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c344426e-8a70-4595-a0c9-7a2d3a9f6655"}
{"timestamp": "2025-12-29T12:40:46.194423+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /profiles/me", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "e33ef20f-136c-4f14-a0f6-c0833cd1c488"}
{"timestamp": "2025-12-29T12:40:46.197401+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e33ef20f-136c-4f14-a0f6-c0833cd1c488"}
{"timestamp": "2025-12-29T12:40:46.198605+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e33ef20f-136c-4f14-a0f6-c0833cd1c488"}
{"timestamp": "2025-12-29T12:40:46.199050+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00067s] {'pk_1': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e33ef20f-136c-4f14-a0f6-c0833cd1c488"}
{"timestamp": "2025-12-29T12:40:46.202339+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e33ef20f-136c-4f14-a0f6-c0833cd1c488"}
{"timestamp": "2025-12-29T12:40:46.202670+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.4739s ago] {'user_id_1': 27, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e33ef20f-136c-4f14-a0f6-c0833cd1c488"}
{"timestamp": "2025-12-29T12:40:46.205633+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /profiles/me \u2192 200 (0.011s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "e33ef20f-136c-4f14-a0f6-c0833cd1c488"}
{"timestamp": "2025-12-29T12:40:46.206816+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "e33ef20f-136c-4f14-a0f6-c0833cd1c488"}
{"timestamp": "2025-12-29T12:40:46.208758+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "50217c0d-ffda-439f-b16e-bf90b1b4e97e"}
{"timestamp": "2025-12-29T12:40:46.211301+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "50217c0d-ffda-439f-b16e-bf90b1b4e97e"}
{"timestamp": "2025-12-29T12:40:46.213387+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50217c0d-ffda-439f-b16e-bf90b1b4e97e"}
{"timestamp": "2025-12-29T12:40:46.213661+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'title_1': 'The Matrix Reloaded 1767012046.20737'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50217c0d-ffda-439f-b16e-bf90b1b4e97e"}
{"timestamp": "2025-12-29T12:40:46.216973+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50217c0d-ffda-439f-b16e-bf90b1b4e97e"}
{"timestamp": "2025-12-29T12:40:46.217375+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00070s] {'title': 'The Matrix Reloaded 1767012046.20737', 'description': 'Test movie: The Matrix Reloaded 1767012046.20737', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50217c0d-ffda-439f-b16e-bf90b1b4e97e"}
{"timestamp": "2025-12-29T12:40:46.219369+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "50217c0d-ffda-439f-b16e-bf90b1b4e97e"}
{"timestamp": "2025-12-29T12:40:46.223559+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "50217c0d-ffda-439f-b16e-bf90b1b4e97e"}
{"timestamp": "2025-12-29T12:40:46.224685+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50217c0d-ffda-439f-b16e-bf90b1b4e97e"}
{"timestamp": "2025-12-29T12:40:46.225131+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50217c0d-ffda-439f-b16e-bf90b1b4e97e"}
{"timestamp": "2025-12-29T12:40:46.227853+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 24}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "50217c0d-ffda-439f-b16e-bf90b1b4e97e"}
{"timestamp": "2025-12-29T12:40:46.228146+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "50217c0d-ffda-439f-b16e-bf90b1b4e97e"}
{"timestamp": "2025-12-29T12:40:46.228875+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "50217c0d-ffda-439f-b16e-bf90b1b4e97e"}
{"timestamp": "2025-12-29T12:40:46.229055+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "50217c0d-ffda-439f-b16e-bf90b1b4e97e"}
{"timestamp": "2025-12-29T12:40:46.230384+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "50217c0d-ffda-439f-b16e-bf90b1b4e97e"}
{"timestamp": "2025-12-29T12:40:46.231447+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "50217c0d-ffda-439f-b16e-bf90b1b4e97e"}
{"timestamp": "2025-12-29T12:40:46.233246+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "397a1a48-2e88-4b5b-be83-1a013ae4be43"}
{"timestamp": "2025-12-29T12:40:46.235950+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "397a1a48-2e88-4b5b-be83-1a013ae4be43"}
{"timestamp": "2025-12-29T12:40:46.237387+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "397a1a48-2e88-4b5b-be83-1a013ae4be43"}
{"timestamp": "2025-12-29T12:40:46.237828+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'name_1': 'Standard Layout 1767012046.231532'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "397a1a48-2e88-4b5b-be83-1a013ae4be43"}
{"timestamp": "2025-12-29T12:40:46.241048+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "397a1a48-2e88-4b5b-be83-1a013ae4be43"}
{"timestamp": "2025-12-29T12:40:46.241481+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'name': 'Standard Layout 1767012046.231532', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "397a1a48-2e88-4b5b-be83-1a013ae4be43"}
{"timestamp": "2025-12-29T12:40:46.243315+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "397a1a48-2e88-4b5b-be83-1a013ae4be43"}
{"timestamp": "2025-12-29T12:40:46.247434+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "397a1a48-2e88-4b5b-be83-1a013ae4be43"}
{"timestamp": "2025-12-29T12:40:46.248663+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "397a1a48-2e88-4b5b-be83-1a013ae4be43"}
{"timestamp": "2025-12-29T12:40:46.249014+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "397a1a48-2e88-4b5b-be83-1a013ae4be43"}
{"timestamp": "2025-12-29T12:40:46.251164+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 23}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "397a1a48-2e88-4b5b-be83-1a013ae4be43"}
{"timestamp": "2025-12-29T12:40:46.251412+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "397a1a48-2e88-4b5b-be83-1a013ae4be43"}
{"timestamp": "2025-12-29T12:40:46.252065+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "397a1a48-2e88-4b5b-be83-1a013ae4be43"}
{"timestamp": "2025-12-29T12:40:46.252223+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "397a1a48-2e88-4b5b-be83-1a013ae4be43"}
{"timestamp": "2025-12-29T12:40:46.253447+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.020s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "397a1a48-2e88-4b5b-be83-1a013ae4be43"}
{"timestamp": "2025-12-29T12:40:46.254743+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "397a1a48-2e88-4b5b-be83-1a013ae4be43"}
{"timestamp": "2025-12-29T12:40:46.256003+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "44423d49-eb9f-477e-bd53-4058d545760e"}
{"timestamp": "2025-12-29T12:40:46.258493+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "44423d49-eb9f-477e-bd53-4058d545760e"}
{"timestamp": "2025-12-29T12:40:46.259757+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "44423d49-eb9f-477e-bd53-4058d545760e"}
{"timestamp": "2025-12-29T12:40:46.260360+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00066s] {'name_1': 'Screen 1 1767012046.254409', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "44423d49-eb9f-477e-bd53-4058d545760e"}
{"timestamp": "2025-12-29T12:40:46.263760+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "44423d49-eb9f-477e-bd53-4058d545760e"}
{"timestamp": "2025-12-29T12:40:46.264155+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00064s] {'id_1': 23, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "44423d49-eb9f-477e-bd53-4058d545760e"}
{"timestamp": "2025-12-29T12:40:46.266323+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "44423d49-eb9f-477e-bd53-4058d545760e"}
{"timestamp": "2025-12-29T12:40:46.266741+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00040s] {'name': 'Screen 1 1767012046.254409', 'capacity': 150, 'seat_layout_id': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "44423d49-eb9f-477e-bd53-4058d545760e"}
{"timestamp": "2025-12-29T12:40:46.268692+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "44423d49-eb9f-477e-bd53-4058d545760e"}
{"timestamp": "2025-12-29T12:40:46.272594+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "44423d49-eb9f-477e-bd53-4058d545760e"}
{"timestamp": "2025-12-29T12:40:46.277732+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "44423d49-eb9f-477e-bd53-4058d545760e"}
{"timestamp": "2025-12-29T12:40:46.278036+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "44423d49-eb9f-477e-bd53-4058d545760e"}
{"timestamp": "2025-12-29T12:40:46.280422+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 23}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "44423d49-eb9f-477e-bd53-4058d545760e"}
{"timestamp": "2025-12-29T12:40:46.280691+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "44423d49-eb9f-477e-bd53-4058d545760e"}
{"timestamp": "2025-12-29T12:40:46.281454+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "44423d49-eb9f-477e-bd53-4058d545760e"}
{"timestamp": "2025-12-29T12:40:46.281633+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "44423d49-eb9f-477e-bd53-4058d545760e"}
{"timestamp": "2025-12-29T12:40:46.282714+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.027s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "44423d49-eb9f-477e-bd53-4058d545760e"}
{"timestamp": "2025-12-29T12:40:46.283603+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "44423d49-eb9f-477e-bd53-4058d545760e"}
{"timestamp": "2025-12-29T12:40:46.285307+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.288230+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.289369+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.289828+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.292774+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.293169+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.296273+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.296686+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'screen_id_1': 23, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.299505+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.299966+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 24, 'screen_id': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.302352+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.306408+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.307309+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.307567+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00042s] {'pk_1': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.311273+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.311659+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00085s] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.313795+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.314201+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.315802+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 20}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.316076+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.316814+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.316995+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.318050+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.033s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.318982+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f84498c1-5ac2-4efb-97a9-542f558fbc51"}
{"timestamp": "2025-12-29T12:40:46.320705+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /seatavailability/grid/20", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "320645b3-173c-4eb3-b41b-8a85da4f0038"}
{"timestamp": "2025-12-29T12:40:46.323378+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "320645b3-173c-4eb3-b41b-8a85da4f0038"}
{"timestamp": "2025-12-29T12:40:46.325098+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "320645b3-173c-4eb3-b41b-8a85da4f0038"}
{"timestamp": "2025-12-29T12:40:46.325635+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'showtime_id_1': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "320645b3-173c-4eb3-b41b-8a85da4f0038"}
{"timestamp": "2025-12-29T12:40:46.328704+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /seatavailability/grid/20 \u2192 200 (0.008s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "320645b3-173c-4eb3-b41b-8a85da4f0038"}
{"timestamp": "2025-12-29T12:40:46.329749+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "320645b3-173c-4eb3-b41b-8a85da4f0038"}
{"timestamp": "2025-12-29T12:40:46.331706+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.334207+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.334742+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.335177+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.1368s ago] {'pk_1': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.338753+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.339097+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'user_id': 27, 'showtime_id': 20, 'seat_code': 'R5-8', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 12, 40, 46, 338456, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 12, 50, 46, 337591, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.341341+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.345977+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.347587+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.348126+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00065s] {'pk_1': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.351088+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 19, 'user_id': 27, 'showtime_id': 20, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.351440+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.352315+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.352647+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.352840+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.354849+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.355889+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.356231+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'showtime_id_1': 20, 'seat_code_1': 'R5-8', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.359744+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.360155+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'seat_code': 'R5-8', 'showtime_id': 20, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.363012+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.363418+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'status': 'LOCKED', 'locked_by_user_id': 27, 'lock_expires_at': datetime.datetime(2025, 12, 29, 12, 50, 46, 361881, tzinfo=datetime.timezone.utc), 'seat_locks_id': 16}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.365484+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.369257+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.370106+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.370356+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00038s] {'pk_1': 16}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.372505+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 20, 'seat_code': 'R5-8', 'user_id': 27, 'expires_at': '2025-12-29T12:50:46.361881+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.372698+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.372817+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.373131+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.374266+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.374444+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.374582+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.374894+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 19, 'user_id': 27, 'showtime_id': 20, 'seat_code': 'R5-8'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.375200+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 19", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.376794+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.378186+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.378573+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'user_id': 27, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.380948+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.384804+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.385911+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.386239+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'pk_1': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.388312+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 19, 'reservation_id': 19, 'user_id': 27, 'showtime_id': 20, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.388716+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.388951+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_order_created for order.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.389121+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_order_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.389363+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 19", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.414061+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.415729+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.416195+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.419018+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 19, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.419274+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.419454+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_pricing_snapshot_created for pricing.snapshot_created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.419698+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_pricing_snapshot_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.420020+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 19, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.433442+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.434699+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.435121+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'pk_1': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.438821+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.439313+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.441240+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.445359+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.446027+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.446544+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.06063s ago] {'pk_1': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.448517+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 19 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.448841+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.449961+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.450196+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 19: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.450454+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.451610+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.451964+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 19", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.452428+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.453712+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.453913+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.454079+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.455729+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.457405+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.458016+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'actor_id': 27, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 19, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 19, \"user_id\": 27, \"showtime_id\": 20, \"seat_code\": \"R5-8\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 12, 40, 46, 456988, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.460619+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.465021+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.466492+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.466801+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'pk_1': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.470001+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.471392+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.472707+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.141s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.473546+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0a9a0944-e2d0-46d7-977c-fc825583b6e1"}
{"timestamp": "2025-12-29T12:40:46.475435+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "16e79842-63b2-4f6f-a633-b855555283a2"}
{"timestamp": "2025-12-29T12:40:46.478366+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "16e79842-63b2-4f6f-a633-b855555283a2"}
{"timestamp": "2025-12-29T12:40:46.479010+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "16e79842-63b2-4f6f-a633-b855555283a2"}
{"timestamp": "2025-12-29T12:40:46.479558+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2811s ago] {'pk_1': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "16e79842-63b2-4f6f-a633-b855555283a2"}
{"timestamp": "2025-12-29T12:40:46.483398+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "16e79842-63b2-4f6f-a633-b855555283a2"}
{"timestamp": "2025-12-29T12:40:46.483910+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00088s] {'user_id_1': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "16e79842-63b2-4f6f-a633-b855555283a2"}
{"timestamp": "2025-12-29T12:40:46.487686+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.012s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "16e79842-63b2-4f6f-a633-b855555283a2"}
{"timestamp": "2025-12-29T12:40:46.489107+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "16e79842-63b2-4f6f-a633-b855555283a2"}
{"timestamp": "2025-12-29T12:40:46.490988+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/order/19/initiate", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "52d16839-652d-420b-9ae4-f39761b38862"}
{"timestamp": "2025-12-29T12:40:46.493893+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "52d16839-652d-420b-9ae4-f39761b38862"}
{"timestamp": "2025-12-29T12:40:46.494686+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "52d16839-652d-420b-9ae4-f39761b38862"}
{"timestamp": "2025-12-29T12:40:46.495266+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2968s ago] {'pk_1': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "52d16839-652d-420b-9ae4-f39761b38862"}
{"timestamp": "2025-12-29T12:40:46.499697+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO payment_attempts (order_id, amount_attempted, status, final_amount, failure_reason, provider_payment_id, created_at) VALUES (%(order_id)s, %(amount_attempted)s, %(status)s, %(final_amount)s, %(failure_reason)s, %(provider_payment_id)s, %(created_at)s) RETURNING payment_attempts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "52d16839-652d-420b-9ae4-f39761b38862"}
{"timestamp": "2025-12-29T12:40:46.500284+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'order_id': 19, 'amount_attempted': 10.0, 'status': 'PENDING', 'final_amount': 10.0, 'failure_reason': None, 'provider_payment_id': None, 'created_at': datetime.datetime(2025, 12, 29, 12, 40, 46, 499290, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "52d16839-652d-420b-9ae4-f39761b38862"}
{"timestamp": "2025-12-29T12:40:46.502561+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "52d16839-652d-420b-9ae4-f39761b38862"}
{"timestamp": "2025-12-29T12:40:46.506997+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "52d16839-652d-420b-9ae4-f39761b38862"}
{"timestamp": "2025-12-29T12:40:46.508348+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "52d16839-652d-420b-9ae4-f39761b38862"}
{"timestamp": "2025-12-29T12:40:46.508779+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'pk_1': 12}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "52d16839-652d-420b-9ae4-f39761b38862"}
{"timestamp": "2025-12-29T12:40:46.511630+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.pending with payload: {'payment_attempt_id': 12, 'order_id': 19, 'amount_attempted': 10.0, 'final_amount': 10.0}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "52d16839-652d-420b-9ae4-f39761b38862"}
{"timestamp": "2025-12-29T12:40:46.511985+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "52d16839-652d-420b-9ae4-f39761b38862"}
{"timestamp": "2025-12-29T12:40:46.512712+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.pending to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "52d16839-652d-420b-9ae4-f39761b38862"}
{"timestamp": "2025-12-29T12:40:46.512977+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: payment.pending", "module": "event_bus", "function": "publish", "line": 31, "request_id": "52d16839-652d-420b-9ae4-f39761b38862"}
{"timestamp": "2025-12-29T12:40:46.514492+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/order/19/initiate \u2192 200 (0.024s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "52d16839-652d-420b-9ae4-f39761b38862"}
{"timestamp": "2025-12-29T12:40:46.515355+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "52d16839-652d-420b-9ae4-f39761b38862"}
{"timestamp": "2025-12-29T12:40:46.517243+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/12/confirm", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "971a55fc-8e76-484f-bc99-0c881bdd3f36"}
{"timestamp": "2025-12-29T12:40:46.519558+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "971a55fc-8e76-484f-bc99-0c881bdd3f36"}
{"timestamp": "2025-12-29T12:40:46.520211+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "971a55fc-8e76-484f-bc99-0c881bdd3f36"}
{"timestamp": "2025-12-29T12:40:46.520598+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.3223s ago] {'pk_1': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "971a55fc-8e76-484f-bc99-0c881bdd3f36"}
{"timestamp": "2025-12-29T12:40:46.523881+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id AS payment_attempts_id, payment_attempts.order_id AS payment_attempts_order_id, payment_attempts.amount_attempted AS payment_attempts_amount_attempted, payment_attempts.status AS payment_attempts_status, payment_attempts.final_amount AS payment_attempts_final_amount, payment_attempts.failure_reason AS payment_attempts_failure_reason, payment_attempts.provider_payment_id AS payment_attempts_provider_payment_id, payment_attempts.created_at AS payment_attempts_created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "971a55fc-8e76-484f-bc99-0c881bdd3f36"}
{"timestamp": "2025-12-29T12:40:46.524428+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00062s] {'pk_1': 12}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "971a55fc-8e76-484f-bc99-0c881bdd3f36"}
{"timestamp": "2025-12-29T12:40:46.527479+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "971a55fc-8e76-484f-bc99-0c881bdd3f36"}
{"timestamp": "2025-12-29T12:40:46.527812+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'pk_1': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "971a55fc-8e76-484f-bc99-0c881bdd3f36"}
{"timestamp": "2025-12-29T12:40:46.530140+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "971a55fc-8e76-484f-bc99-0c881bdd3f36"}
{"timestamp": "2025-12-29T12:40:46.539421+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.middleware", "message": "\u2717 POST /payments/12/confirm \u2192 FAILED (0.015s)", "module": "middleware", "function": "dispatch", "line": 83, "request_id": "971a55fc-8e76-484f-bc99-0c881bdd3f36", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 151, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\streams\\memory.py\", line 126, in receive\n    raise EndOfStream from None\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\middleware.py\", line 57, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    raise app_exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 390, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 291, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\concurrency.py\", line 38, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\to_thread.py\", line 56, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 2485, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 976, in run\n    result = context.run(func, *args)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\payment\\router.py\", line 50, in confirm_payment_route\n    return mark_payment_succeeded(\n        db=db,\n        payment_attempt_id=payment_attempt_id,\n        provider_payment_id=provider_payment_id\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\payment\\service.py\", line 66, in mark_payment_succeeded\n    raise ValidationError(\"Final amount not equal to order amount\")\napp.core.errors.ValidationError: Final amount not equal to order amount"}
{"timestamp": "2025-12-29T12:46:04.811186+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-29T12:46:07.159493+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-29T12:46:07.160108+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-29T12:46:07.160439+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.160669+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.160850+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.160989+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.161171+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.161393+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.161541+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.161721+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.161883+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.162012+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.162181+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.162324+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.162477+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.162713+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.162980+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.163229+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.163465+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.163646+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.163831+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.164012+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.164143+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.164275+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.164437+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.164577+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.164712+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.164998+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.165200+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.165436+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.165639+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.165863+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.166050+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.166280+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.166579+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.166817+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.167036+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.167191+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.167339+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.167468+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.167596+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.167839+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.168190+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.168544+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.168946+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.169212+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.169386+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.169564+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.169891+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.170208+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.170532+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.170921+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.171187+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.171443+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.171606+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.171741+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.171881+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.172233+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.172560+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.172883+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.173132+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.173297+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:46:07.173671+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-29T12:46:07.174026+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-29T12:46:21.791445+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:21.847938+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:21.848256+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:21.850731+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:21.851042+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:21.853076+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:21.853378+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:21.855829+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:21.858506+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:21.859060+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00066s] {'email_1': 'test_1767012379.733983@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:21.862714+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "detected 'bcrypt' backend, version '4.0.1'", "module": "bcrypt", "function": "_load_backend_mixin", "line": 625, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:21.863025+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "'bcrypt' backend lacks $2$ support, enabling workaround", "module": "bcrypt", "function": "_finalize_backend_mixin", "line": 406, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.084605+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.085021+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'email': 'test_1767012379.733983@example.com', 'hashed_password': '$2b$12$6Nv7IGKLL.S6kBt0SvWqRutCnW5B6XvwT80qJ6RgitvSMwhB31YPq', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.087065+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.092958+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.094360+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.094943+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00071s] {'pk_1': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.097309+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 28, 'email': 'test_1767012379.733983@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.097730+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.098626+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.098886+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.099071+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.134775+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.136395+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.136817+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'user_id_1': 28, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.141100+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.141501+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'user_id': 28, 'name': None, 'email': 'test_1767012379.733983@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.143910+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.148189+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.149322+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.149776+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'pk_1': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.152487+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 28, 'user_id': 28, 'email': 'test_1767012379.733983@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.152929+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.153195+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.153558+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.155223+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.156765+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.157269+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2989s ago] {'email_1': 'test_1767012379.733983@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.370644+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 28, 'email': 'test_1767012379.733983@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.370949+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.371672+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.371868+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.373086+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.582s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.374006+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "4b294599-08b7-4538-96a2-87edf424d628"}
{"timestamp": "2025-12-29T12:46:22.376566+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/login", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "91d10ec2-cdbd-4f14-a7b9-2b8f007a5128"}
{"timestamp": "2025-12-29T12:46:22.377436+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "91d10ec2-cdbd-4f14-a7b9-2b8f007a5128"}
{"timestamp": "2025-12-29T12:46:22.377719+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[0:8]", "module": "multipart", "function": "callback", "line": 625, "request_id": "91d10ec2-cdbd-4f14-a7b9-2b8f007a5128"}
{"timestamp": "2025-12-29T12:46:22.377925+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[9:45]", "module": "multipart", "function": "callback", "line": 625, "request_id": "91d10ec2-cdbd-4f14-a7b9-2b8f007a5128"}
{"timestamp": "2025-12-29T12:46:22.378110+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "91d10ec2-cdbd-4f14-a7b9-2b8f007a5128"}
{"timestamp": "2025-12-29T12:46:22.378282+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "91d10ec2-cdbd-4f14-a7b9-2b8f007a5128"}
{"timestamp": "2025-12-29T12:46:22.378451+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[46:54]", "module": "multipart", "function": "callback", "line": 625, "request_id": "91d10ec2-cdbd-4f14-a7b9-2b8f007a5128"}
{"timestamp": "2025-12-29T12:46:22.378621+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[55:73]", "module": "multipart", "function": "callback", "line": 625, "request_id": "91d10ec2-cdbd-4f14-a7b9-2b8f007a5128"}
{"timestamp": "2025-12-29T12:46:22.379007+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "91d10ec2-cdbd-4f14-a7b9-2b8f007a5128"}
{"timestamp": "2025-12-29T12:46:22.379245+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "91d10ec2-cdbd-4f14-a7b9-2b8f007a5128"}
{"timestamp": "2025-12-29T12:46:22.381971+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "91d10ec2-cdbd-4f14-a7b9-2b8f007a5128"}
{"timestamp": "2025-12-29T12:46:22.382702+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "91d10ec2-cdbd-4f14-a7b9-2b8f007a5128"}
{"timestamp": "2025-12-29T12:46:22.383111+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.5248s ago] {'email_1': 'test_1767012379.733983@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "91d10ec2-cdbd-4f14-a7b9-2b8f007a5128"}
{"timestamp": "2025-12-29T12:46:22.588363+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 28, 'email': 'test_1767012379.733983@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "91d10ec2-cdbd-4f14-a7b9-2b8f007a5128"}
{"timestamp": "2025-12-29T12:46:22.588650+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "91d10ec2-cdbd-4f14-a7b9-2b8f007a5128"}
{"timestamp": "2025-12-29T12:46:22.589431+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "91d10ec2-cdbd-4f14-a7b9-2b8f007a5128"}
{"timestamp": "2025-12-29T12:46:22.589672+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "91d10ec2-cdbd-4f14-a7b9-2b8f007a5128"}
{"timestamp": "2025-12-29T12:46:22.590784+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/login \u2192 200 (0.214s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "91d10ec2-cdbd-4f14-a7b9-2b8f007a5128"}
{"timestamp": "2025-12-29T12:46:22.591650+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "91d10ec2-cdbd-4f14-a7b9-2b8f007a5128"}
{"timestamp": "2025-12-29T12:46:22.593257+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /profiles/me", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "a1068721-e954-4e44-a724-185f19c95256"}
{"timestamp": "2025-12-29T12:46:22.596281+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a1068721-e954-4e44-a724-185f19c95256"}
{"timestamp": "2025-12-29T12:46:22.597409+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a1068721-e954-4e44-a724-185f19c95256"}
{"timestamp": "2025-12-29T12:46:22.597971+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00062s] {'pk_1': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a1068721-e954-4e44-a724-185f19c95256"}
{"timestamp": "2025-12-29T12:46:22.601863+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a1068721-e954-4e44-a724-185f19c95256"}
{"timestamp": "2025-12-29T12:46:22.602526+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.4661s ago] {'user_id_1': 28, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a1068721-e954-4e44-a724-185f19c95256"}
{"timestamp": "2025-12-29T12:46:22.605732+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /profiles/me \u2192 200 (0.012s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "a1068721-e954-4e44-a724-185f19c95256"}
{"timestamp": "2025-12-29T12:46:22.606789+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a1068721-e954-4e44-a724-185f19c95256"}
{"timestamp": "2025-12-29T12:46:22.609075+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "cfb4679a-b64e-439a-a0a7-acbb9a857618"}
{"timestamp": "2025-12-29T12:46:22.611772+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cfb4679a-b64e-439a-a0a7-acbb9a857618"}
{"timestamp": "2025-12-29T12:46:22.613851+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cfb4679a-b64e-439a-a0a7-acbb9a857618"}
{"timestamp": "2025-12-29T12:46:22.614202+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'title_1': 'The Matrix Reloaded 1767012382.607642'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cfb4679a-b64e-439a-a0a7-acbb9a857618"}
{"timestamp": "2025-12-29T12:46:22.617653+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cfb4679a-b64e-439a-a0a7-acbb9a857618"}
{"timestamp": "2025-12-29T12:46:22.618017+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00072s] {'title': 'The Matrix Reloaded 1767012382.607642', 'description': 'Test movie: The Matrix Reloaded 1767012382.607642', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cfb4679a-b64e-439a-a0a7-acbb9a857618"}
{"timestamp": "2025-12-29T12:46:22.620012+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "cfb4679a-b64e-439a-a0a7-acbb9a857618"}
{"timestamp": "2025-12-29T12:46:22.624411+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cfb4679a-b64e-439a-a0a7-acbb9a857618"}
{"timestamp": "2025-12-29T12:46:22.625369+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cfb4679a-b64e-439a-a0a7-acbb9a857618"}
{"timestamp": "2025-12-29T12:46:22.625686+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cfb4679a-b64e-439a-a0a7-acbb9a857618"}
{"timestamp": "2025-12-29T12:46:22.627882+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 25}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "cfb4679a-b64e-439a-a0a7-acbb9a857618"}
{"timestamp": "2025-12-29T12:46:22.628142+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "cfb4679a-b64e-439a-a0a7-acbb9a857618"}
{"timestamp": "2025-12-29T12:46:22.629081+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "cfb4679a-b64e-439a-a0a7-acbb9a857618"}
{"timestamp": "2025-12-29T12:46:22.629637+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "cfb4679a-b64e-439a-a0a7-acbb9a857618"}
{"timestamp": "2025-12-29T12:46:22.630773+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "cfb4679a-b64e-439a-a0a7-acbb9a857618"}
{"timestamp": "2025-12-29T12:46:22.631635+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "cfb4679a-b64e-439a-a0a7-acbb9a857618"}
{"timestamp": "2025-12-29T12:46:22.633595+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "800553f9-fb3e-4d15-863c-f1d9517e12d9"}
{"timestamp": "2025-12-29T12:46:22.636275+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "800553f9-fb3e-4d15-863c-f1d9517e12d9"}
{"timestamp": "2025-12-29T12:46:22.637356+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "800553f9-fb3e-4d15-863c-f1d9517e12d9"}
{"timestamp": "2025-12-29T12:46:22.637685+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00040s] {'name_1': 'Standard Layout 1767012382.631882'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "800553f9-fb3e-4d15-863c-f1d9517e12d9"}
{"timestamp": "2025-12-29T12:46:22.641084+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "800553f9-fb3e-4d15-863c-f1d9517e12d9"}
{"timestamp": "2025-12-29T12:46:22.641438+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'name': 'Standard Layout 1767012382.631882', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "800553f9-fb3e-4d15-863c-f1d9517e12d9"}
{"timestamp": "2025-12-29T12:46:22.643865+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "800553f9-fb3e-4d15-863c-f1d9517e12d9"}
{"timestamp": "2025-12-29T12:46:22.648294+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "800553f9-fb3e-4d15-863c-f1d9517e12d9"}
{"timestamp": "2025-12-29T12:46:22.649240+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "800553f9-fb3e-4d15-863c-f1d9517e12d9"}
{"timestamp": "2025-12-29T12:46:22.649568+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "800553f9-fb3e-4d15-863c-f1d9517e12d9"}
{"timestamp": "2025-12-29T12:46:22.652043+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 24}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "800553f9-fb3e-4d15-863c-f1d9517e12d9"}
{"timestamp": "2025-12-29T12:46:22.652333+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "800553f9-fb3e-4d15-863c-f1d9517e12d9"}
{"timestamp": "2025-12-29T12:46:22.653444+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "800553f9-fb3e-4d15-863c-f1d9517e12d9"}
{"timestamp": "2025-12-29T12:46:22.653743+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "800553f9-fb3e-4d15-863c-f1d9517e12d9"}
{"timestamp": "2025-12-29T12:46:22.655629+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "800553f9-fb3e-4d15-863c-f1d9517e12d9"}
{"timestamp": "2025-12-29T12:46:22.656920+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "800553f9-fb3e-4d15-863c-f1d9517e12d9"}
{"timestamp": "2025-12-29T12:46:22.658299+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "958d8bab-4854-4306-85f3-da81c6fef8ea"}
{"timestamp": "2025-12-29T12:46:22.661148+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "958d8bab-4854-4306-85f3-da81c6fef8ea"}
{"timestamp": "2025-12-29T12:46:22.662693+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "958d8bab-4854-4306-85f3-da81c6fef8ea"}
{"timestamp": "2025-12-29T12:46:22.663149+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'name_1': 'Screen 1 1767012382.656697', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "958d8bab-4854-4306-85f3-da81c6fef8ea"}
{"timestamp": "2025-12-29T12:46:22.666018+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "958d8bab-4854-4306-85f3-da81c6fef8ea"}
{"timestamp": "2025-12-29T12:46:22.666365+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'id_1': 24, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "958d8bab-4854-4306-85f3-da81c6fef8ea"}
{"timestamp": "2025-12-29T12:46:22.668538+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "958d8bab-4854-4306-85f3-da81c6fef8ea"}
{"timestamp": "2025-12-29T12:46:22.669090+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'name': 'Screen 1 1767012382.656697', 'capacity': 150, 'seat_layout_id': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "958d8bab-4854-4306-85f3-da81c6fef8ea"}
{"timestamp": "2025-12-29T12:46:22.671032+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "958d8bab-4854-4306-85f3-da81c6fef8ea"}
{"timestamp": "2025-12-29T12:46:22.675205+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "958d8bab-4854-4306-85f3-da81c6fef8ea"}
{"timestamp": "2025-12-29T12:46:22.680812+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "958d8bab-4854-4306-85f3-da81c6fef8ea"}
{"timestamp": "2025-12-29T12:46:22.681187+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "958d8bab-4854-4306-85f3-da81c6fef8ea"}
{"timestamp": "2025-12-29T12:46:22.683258+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 24}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "958d8bab-4854-4306-85f3-da81c6fef8ea"}
{"timestamp": "2025-12-29T12:46:22.683558+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "958d8bab-4854-4306-85f3-da81c6fef8ea"}
{"timestamp": "2025-12-29T12:46:22.684592+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "958d8bab-4854-4306-85f3-da81c6fef8ea"}
{"timestamp": "2025-12-29T12:46:22.684822+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "958d8bab-4854-4306-85f3-da81c6fef8ea"}
{"timestamp": "2025-12-29T12:46:22.685876+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.028s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "958d8bab-4854-4306-85f3-da81c6fef8ea"}
{"timestamp": "2025-12-29T12:46:22.686826+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "958d8bab-4854-4306-85f3-da81c6fef8ea"}
{"timestamp": "2025-12-29T12:46:22.688750+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.690893+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.691857+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.692240+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00040s] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.695134+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.695409+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.698021+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.698422+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'screen_id_1': 24, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.701435+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.701728+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 25, 'screen_id': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.703666+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.707821+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.709192+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.709655+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00071s] {'pk_1': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.713071+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.713349+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.715794+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.716130+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.717584+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 21}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.717809+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.718616+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.718801+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.719846+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.031s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.720680+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "96e24a49-225c-416a-b3ad-929ed5bbf592"}
{"timestamp": "2025-12-29T12:46:22.722443+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /seatavailability/grid/21", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "da237471-9bcc-4fdb-b25e-62adb57c8031"}
{"timestamp": "2025-12-29T12:46:22.724954+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "da237471-9bcc-4fdb-b25e-62adb57c8031"}
{"timestamp": "2025-12-29T12:46:22.726487+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da237471-9bcc-4fdb-b25e-62adb57c8031"}
{"timestamp": "2025-12-29T12:46:22.726820+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00042s] {'showtime_id_1': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da237471-9bcc-4fdb-b25e-62adb57c8031"}
{"timestamp": "2025-12-29T12:46:22.729811+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /seatavailability/grid/21 \u2192 200 (0.007s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "da237471-9bcc-4fdb-b25e-62adb57c8031"}
{"timestamp": "2025-12-29T12:46:22.730923+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "da237471-9bcc-4fdb-b25e-62adb57c8031"}
{"timestamp": "2025-12-29T12:46:22.733007+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.736053+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.736767+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.737136+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.14s ago] {'pk_1': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.740382+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.740715+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'user_id': 28, 'showtime_id': 21, 'seat_code': 'R5-8', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 12, 46, 22, 740093, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 12, 56, 22, 739234, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.742853+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.747432+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.748378+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.748662+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00037s] {'pk_1': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.750891+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 20, 'user_id': 28, 'showtime_id': 21, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.751147+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.752270+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.752568+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.752824+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.754327+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.755265+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.755537+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00040s] {'showtime_id_1': 21, 'seat_code_1': 'R5-8', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.758762+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.759109+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'seat_code': 'R5-8', 'showtime_id': 21, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.762036+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.762332+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00042s] {'status': 'LOCKED', 'locked_by_user_id': 28, 'lock_expires_at': datetime.datetime(2025, 12, 29, 12, 56, 22, 760872, tzinfo=datetime.timezone.utc), 'seat_locks_id': 17}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.763989+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.767929+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.768752+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.769150+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'pk_1': 17}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.771667+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 21, 'seat_code': 'R5-8', 'user_id': 28, 'expires_at': '2025-12-29T12:56:22.760872+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.771887+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.772064+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.772323+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.773497+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.773688+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.773823+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.774037+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 20, 'user_id': 28, 'showtime_id': 21, 'seat_code': 'R5-8'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.774287+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 20", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.775784+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.777146+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.777686+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00074s] {'user_id': 28, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.780370+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.784195+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.785275+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.785579+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'pk_1': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.787620+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 20, 'reservation_id': 20, 'user_id': 28, 'showtime_id': 21, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.787808+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.787944+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_order_created for order.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.788043+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_order_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.788163+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 20", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.817704+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.819297+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.819800+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.822662+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 20, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.823110+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.823516+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_pricing_snapshot_created for pricing.snapshot_created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.823746+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_pricing_snapshot_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.823926+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 20, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.849492+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.850662+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.851067+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'pk_1': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.854467+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.854932+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.857052+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.861535+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.862230+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.862630+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.07743s ago] {'pk_1': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.864820+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 20 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.865185+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.866121+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.866335+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 20: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.866681+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.868218+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.868436+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 20", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.868741+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.870012+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.870297+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.870455+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.871814+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.873219+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.873652+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'actor_id': 28, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 20, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 20, \"user_id\": 28, \"showtime_id\": 21, \"seat_code\": \"R5-8\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 12, 46, 22, 872834, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.876538+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.880301+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.881545+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.882025+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'pk_1': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.884299+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.885483+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.887488+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.154s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.891193+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "811ca2a5-dd95-4f7f-ac25-81500fd8c956"}
{"timestamp": "2025-12-29T12:46:22.893531+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "281379d0-3556-476a-83d9-1ee7a876c93c"}
{"timestamp": "2025-12-29T12:46:22.897521+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "281379d0-3556-476a-83d9-1ee7a876c93c"}
{"timestamp": "2025-12-29T12:46:22.898655+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "281379d0-3556-476a-83d9-1ee7a876c93c"}
{"timestamp": "2025-12-29T12:46:22.899378+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.302s ago] {'pk_1': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "281379d0-3556-476a-83d9-1ee7a876c93c"}
{"timestamp": "2025-12-29T12:46:22.909010+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "281379d0-3556-476a-83d9-1ee7a876c93c"}
{"timestamp": "2025-12-29T12:46:22.914121+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00499s] {'user_id_1': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "281379d0-3556-476a-83d9-1ee7a876c93c"}
{"timestamp": "2025-12-29T12:46:22.918048+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.025s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "281379d0-3556-476a-83d9-1ee7a876c93c"}
{"timestamp": "2025-12-29T12:46:22.919529+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "281379d0-3556-476a-83d9-1ee7a876c93c"}
{"timestamp": "2025-12-29T12:46:22.921975+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/order/20/initiate", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "9500afa8-28a1-4f1f-876c-fd1082d7cf4c"}
{"timestamp": "2025-12-29T12:46:22.924993+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9500afa8-28a1-4f1f-876c-fd1082d7cf4c"}
{"timestamp": "2025-12-29T12:46:22.926500+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9500afa8-28a1-4f1f-876c-fd1082d7cf4c"}
{"timestamp": "2025-12-29T12:46:22.927409+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.3299s ago] {'pk_1': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9500afa8-28a1-4f1f-876c-fd1082d7cf4c"}
{"timestamp": "2025-12-29T12:46:22.932062+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9500afa8-28a1-4f1f-876c-fd1082d7cf4c"}
{"timestamp": "2025-12-29T12:46:22.932370+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.08195s ago] {'pk_1': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9500afa8-28a1-4f1f-876c-fd1082d7cf4c"}
{"timestamp": "2025-12-29T12:46:22.934872+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO payment_attempts (order_id, amount_attempted, status, final_amount, failure_reason, provider_payment_id, created_at) VALUES (%(order_id)s, %(amount_attempted)s, %(status)s, %(final_amount)s, %(failure_reason)s, %(provider_payment_id)s, %(created_at)s) RETURNING payment_attempts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9500afa8-28a1-4f1f-876c-fd1082d7cf4c"}
{"timestamp": "2025-12-29T12:46:22.935209+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'order_id': 20, 'amount_attempted': 1000, 'status': 'PENDING', 'final_amount': 1000, 'failure_reason': None, 'provider_payment_id': None, 'created_at': datetime.datetime(2025, 12, 29, 12, 46, 22, 934559, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9500afa8-28a1-4f1f-876c-fd1082d7cf4c"}
{"timestamp": "2025-12-29T12:46:22.938196+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "9500afa8-28a1-4f1f-876c-fd1082d7cf4c"}
{"timestamp": "2025-12-29T12:46:22.942413+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9500afa8-28a1-4f1f-876c-fd1082d7cf4c"}
{"timestamp": "2025-12-29T12:46:22.943508+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9500afa8-28a1-4f1f-876c-fd1082d7cf4c"}
{"timestamp": "2025-12-29T12:46:22.943807+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'pk_1': 13}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9500afa8-28a1-4f1f-876c-fd1082d7cf4c"}
{"timestamp": "2025-12-29T12:46:22.946676+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.pending with payload: {'payment_attempt_id': 13, 'order_id': 20, 'amount_attempted': 1000, 'final_amount': 1000}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "9500afa8-28a1-4f1f-876c-fd1082d7cf4c"}
{"timestamp": "2025-12-29T12:46:22.947112+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "9500afa8-28a1-4f1f-876c-fd1082d7cf4c"}
{"timestamp": "2025-12-29T12:46:22.947972+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.pending to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "9500afa8-28a1-4f1f-876c-fd1082d7cf4c"}
{"timestamp": "2025-12-29T12:46:22.948181+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: payment.pending", "module": "event_bus", "function": "publish", "line": 31, "request_id": "9500afa8-28a1-4f1f-876c-fd1082d7cf4c"}
{"timestamp": "2025-12-29T12:46:22.949488+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/order/20/initiate \u2192 200 (0.028s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "9500afa8-28a1-4f1f-876c-fd1082d7cf4c"}
{"timestamp": "2025-12-29T12:46:22.950311+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "9500afa8-28a1-4f1f-876c-fd1082d7cf4c"}
{"timestamp": "2025-12-29T12:46:22.952186+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/13/confirm", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.954499+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.955214+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.955697+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.3585s ago] {'pk_1': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.958928+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id AS payment_attempts_id, payment_attempts.order_id AS payment_attempts_order_id, payment_attempts.amount_attempted AS payment_attempts_amount_attempted, payment_attempts.status AS payment_attempts_status, payment_attempts.final_amount AS payment_attempts_final_amount, payment_attempts.failure_reason AS payment_attempts_failure_reason, payment_attempts.provider_payment_id AS payment_attempts_provider_payment_id, payment_attempts.created_at AS payment_attempts_created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.959240+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'pk_1': 13}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.962426+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.962965+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00072s] {'pk_1': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.965576+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE payment_attempts SET status=%(status)s, provider_payment_id=%(provider_payment_id)s WHERE payment_attempts.id = %(payment_attempts_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.965847+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00041s] {'status': 'SUCCEEDED', 'provider_payment_id': 'mock_payment_13', 'payment_attempts_id': 13}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.967293+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.971368+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.971895+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.972225+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.02885s ago] {'pk_1': 13}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.975214+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.975627+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'pk_1': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.977392+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.succeeded with payload: {'payment_attempt_id': 13, 'order_id': 20, 'final_amount': 1000.0}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.977731+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.978494+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.succeeded to 4 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.978703+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_payment_succeeded for payment.succeeded", "module": "event_bus", "function": "publish", "line": 36, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.978870+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_payment_succeeded", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.979217+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.979511+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_payment_succeeded for payment.succeeded", "module": "event_bus", "function": "publish", "line": 36, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.979780+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_payment_succeeded", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.983372+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.983609+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_payment_succeeded for payment.succeeded", "module": "event_bus", "function": "publish", "line": 36, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.983873+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_payment_succeeded", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.986680+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.event_bus", "message": "\u274c Event handler failed: payment.succeeded -> on_payment_succeeded: 'user_email'", "module": "event_bus", "function": "_safe_invoke", "line": 45, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\event_bus.py\", line 42, in _safe_invoke\n    await handler(payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\notification\\handlers.py\", line 11, in on_payment_succeeded\n    send_booking_confirmation(payload)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\notification\\service.py\", line 31, in send_booking_confirmation\n    to_email=payload[\"user_email\"],\n             ~~~~~~~^^^^^^^^^^^^^^\nKeyError: 'user_email'"}
{"timestamp": "2025-12-29T12:46:22.988289+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_payment_succeeded for payment.succeeded", "module": "event_bus", "function": "publish", "line": 36, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.988431+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_payment_succeeded", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.989945+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.990551+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.990923+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.1179s ago] {'actor_id': None, 'actor_type': 'user', 'action': 'payment.succeeded', 'target_id': 20, 'target_type': 'order', 'payload': '{\"payment_attempt_id\": 13, \"order_id\": 20, \"final_amount\": 1000.0}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 12, 46, 22, 990215, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:22.993168+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:23.054403+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.event_bus", "message": "\u274c Event handler failed: payment.succeeded -> on_payment_succeeded: (psycopg2.errors.NotNullViolation) null value in column \"actor_id\" of relation \"audit_logs\" violates not-null constraint\nDETAIL:  Failing row contains (21, null, user, payment.succeeded, 20, order, {\"payment_attempt_id\": 13, \"order_id\": 20, \"final_amount\": 1000...., null, 2025-12-29 12:46:22.990215+00).\n\n[SQL: INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id]\n[parameters: {'actor_id': None, 'actor_type': 'user', 'action': 'payment.succeeded', 'target_id': 20, 'target_type': 'order', 'payload': '{\"payment_attempt_id\": 13, \"order_id\": 20, \"final_amount\": 1000.0}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 12, 46, 22, 990215, tzinfo=datetime.timezone.utc)}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)", "module": "event_bus", "function": "_safe_invoke", "line": 45, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\npsycopg2.errors.NotNullViolation: null value in column \"actor_id\" of relation \"audit_logs\" violates not-null constraint\nDETAIL:  Failing row contains (21, null, user, payment.succeeded, 20, order, {\"payment_attempt_id\": 13, \"order_id\": 20, \"final_amount\": 1000...., null, 2025-12-29 12:46:22.990215+00).\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\event_bus.py\", line 42, in _safe_invoke\n    await handler(payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\audit\\handlers.py\", line 44, in on_payment_succeeded\n    write_audit_log(\n    ~~~~~~~~~~~~~~~^\n        db=db,\n        ^^^^^^\n    ...<5 lines>...\n        payload=payload,\n        ^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\audit\\service.py\", line 31, in write_audit_log\n    return repo.create(db, entry)\n           ~~~~~~~~~~~^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\audit\\repository.py\", line 17, in create\n    db.commit()\n    ~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2030, in commit\n    trans.commit(_to_root=True)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^\n  File \"<string>\", line 2, in commit\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\state_changes.py\", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 1311, in commit\n    self._prepare_impl()\n    ~~~~~~~~~~~~~~~~~~^^\n  File \"<string>\", line 2, in _prepare_impl\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\state_changes.py\", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 1286, in _prepare_impl\n    self.session.flush()\n    ~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 4331, in flush\n    self._flush(objects)\n    ~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 4466, in _flush\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 4427, in _flush\n    flush_context.execute()\n    ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py\", line 466, in execute\n    rec.execute(self)\n    ~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py\", line 642, in execute\n    util.preloaded.orm_persistence.save_obj(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self.mapper,\n        ^^^^^^^^^^^^\n        uow.states_for_mapper_hierarchy(self.mapper, False, False),\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        uow,\n        ^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\persistence.py\", line 93, in save_obj\n    _emit_insert_statements(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        base_mapper,\n        ^^^^^^^^^^^^\n    ...<3 lines>...\n        insert,\n        ^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\persistence.py\", line 1233, in _emit_insert_statements\n    result = connection.execute(\n        statement,\n        params,\n        execution_options=execution_options,\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\nsqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column \"actor_id\" of relation \"audit_logs\" violates not-null constraint\nDETAIL:  Failing row contains (21, null, user, payment.succeeded, 20, order, {\"payment_attempt_id\": 13, \"order_id\": 20, \"final_amount\": 1000...., null, 2025-12-29 12:46:22.990215+00).\n\n[SQL: INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id]\n[parameters: {'actor_id': None, 'actor_type': 'user', 'action': 'payment.succeeded', 'target_id': 20, 'target_type': 'order', 'payload': '{\"payment_attempt_id\": 13, \"order_id\": 20, \"final_amount\": 1000.0}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 12, 46, 22, 990215, tzinfo=datetime.timezone.utc)}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)"}
{"timestamp": "2025-12-29T12:46:23.066904+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/13/confirm \u2192 200 (0.115s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:23.067905+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "9bc0eae0-e149-4d7c-bf95-59463fc50525"}
{"timestamp": "2025-12-29T12:46:23.069982+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "48592919-53a5-467c-aa7c-6770550631ca"}
{"timestamp": "2025-12-29T12:46:23.072668+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "48592919-53a5-467c-aa7c-6770550631ca"}
{"timestamp": "2025-12-29T12:46:23.073350+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48592919-53a5-467c-aa7c-6770550631ca"}
{"timestamp": "2025-12-29T12:46:23.073820+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.4766s ago] {'pk_1': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48592919-53a5-467c-aa7c-6770550631ca"}
{"timestamp": "2025-12-29T12:46:23.077135+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48592919-53a5-467c-aa7c-6770550631ca"}
{"timestamp": "2025-12-29T12:46:23.077444+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.173s ago] {'user_id_1': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "48592919-53a5-467c-aa7c-6770550631ca"}
{"timestamp": "2025-12-29T12:46:23.079860+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.010s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "48592919-53a5-467c-aa7c-6770550631ca"}
{"timestamp": "2025-12-29T12:46:23.081106+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "48592919-53a5-467c-aa7c-6770550631ca"}
{"timestamp": "2025-12-29T12:49:52.992525+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-29T12:49:55.217248+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-29T12:49:55.217760+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-29T12:49:55.218036+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.218204+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.218346+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.218501+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.218745+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.218964+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.219267+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.219666+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.220015+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.220446+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.220850+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.221214+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.221503+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.221842+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.222261+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.222655+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.223067+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.223433+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.223682+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.223855+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.224199+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.224439+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.224670+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.225036+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.225421+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.225764+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.226153+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.226518+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.226901+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.227291+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.227675+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.228095+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.228769+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.229150+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.229438+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.229706+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.230003+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.230252+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.230459+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.230631+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.230792+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.230926+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.231054+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.231194+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.231357+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.231554+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.231758+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.232052+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.232349+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.232949+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.233316+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.233565+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.233879+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.234111+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.234373+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.234654+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.234907+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.235087+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.235290+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.235464+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:49:55.235860+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-29T12:49:55.236250+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-29T12:50:10.365862+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.411588+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.411940+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.414272+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.414694+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.416625+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.417052+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.419283+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.422224+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.422584+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00063s] {'email_1': 'test_1767012608.301873@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.425678+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "detected 'bcrypt' backend, version '4.0.1'", "module": "bcrypt", "function": "_load_backend_mixin", "line": 625, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.425989+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "'bcrypt' backend lacks $2$ support, enabling workaround", "module": "bcrypt", "function": "_finalize_backend_mixin", "line": 406, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.648416+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.648834+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'email': 'test_1767012608.301873@example.com', 'hashed_password': '$2b$12$4JZaqz5nOkUHUPe1xlSl2e71NaMPUv3bg9Os1F1U5vzPE4lW60n2a', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.651029+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.657082+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.658343+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.658782+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.661277+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 29, 'email': 'test_1767012608.301873@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.661711+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.662486+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.662704+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.662886+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.696081+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.697586+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.697929+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'user_id_1': 29, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.702192+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.702792+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'user_id': 29, 'name': None, 'email': 'test_1767012608.301873@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.705234+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.709806+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.710934+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.711400+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00064s] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.713571+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 29, 'user_id': 29, 'email': 'test_1767012608.301873@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.713863+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.714052+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.714342+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.715439+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.716936+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.717463+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2954s ago] {'email_1': 'test_1767012608.301873@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.929365+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 29, 'email': 'test_1767012608.301873@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.929703+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.930497+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.930697+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.932149+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.567s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.933194+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6f341bbc-a406-4caf-baa5-3d4854900dc0"}
{"timestamp": "2025-12-29T12:50:10.935578+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/login", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "bfb74b22-25fb-495d-be8c-f4c8ead95967"}
{"timestamp": "2025-12-29T12:50:10.936744+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "bfb74b22-25fb-495d-be8c-f4c8ead95967"}
{"timestamp": "2025-12-29T12:50:10.936955+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[0:8]", "module": "multipart", "function": "callback", "line": 625, "request_id": "bfb74b22-25fb-495d-be8c-f4c8ead95967"}
{"timestamp": "2025-12-29T12:50:10.937109+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[9:45]", "module": "multipart", "function": "callback", "line": 625, "request_id": "bfb74b22-25fb-495d-be8c-f4c8ead95967"}
{"timestamp": "2025-12-29T12:50:10.937240+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "bfb74b22-25fb-495d-be8c-f4c8ead95967"}
{"timestamp": "2025-12-29T12:50:10.937367+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "bfb74b22-25fb-495d-be8c-f4c8ead95967"}
{"timestamp": "2025-12-29T12:50:10.937497+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[46:54]", "module": "multipart", "function": "callback", "line": 625, "request_id": "bfb74b22-25fb-495d-be8c-f4c8ead95967"}
{"timestamp": "2025-12-29T12:50:10.937626+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[55:73]", "module": "multipart", "function": "callback", "line": 625, "request_id": "bfb74b22-25fb-495d-be8c-f4c8ead95967"}
{"timestamp": "2025-12-29T12:50:10.937956+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "bfb74b22-25fb-495d-be8c-f4c8ead95967"}
{"timestamp": "2025-12-29T12:50:10.938078+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "bfb74b22-25fb-495d-be8c-f4c8ead95967"}
{"timestamp": "2025-12-29T12:50:10.942779+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bfb74b22-25fb-495d-be8c-f4c8ead95967"}
{"timestamp": "2025-12-29T12:50:10.945188+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bfb74b22-25fb-495d-be8c-f4c8ead95967"}
{"timestamp": "2025-12-29T12:50:10.945847+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.5237s ago] {'email_1': 'test_1767012608.301873@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bfb74b22-25fb-495d-be8c-f4c8ead95967"}
{"timestamp": "2025-12-29T12:50:11.154464+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 29, 'email': 'test_1767012608.301873@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "bfb74b22-25fb-495d-be8c-f4c8ead95967"}
{"timestamp": "2025-12-29T12:50:11.154751+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "bfb74b22-25fb-495d-be8c-f4c8ead95967"}
{"timestamp": "2025-12-29T12:50:11.155591+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "bfb74b22-25fb-495d-be8c-f4c8ead95967"}
{"timestamp": "2025-12-29T12:50:11.155783+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "bfb74b22-25fb-495d-be8c-f4c8ead95967"}
{"timestamp": "2025-12-29T12:50:11.156718+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/login \u2192 200 (0.221s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "bfb74b22-25fb-495d-be8c-f4c8ead95967"}
{"timestamp": "2025-12-29T12:50:11.157535+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "bfb74b22-25fb-495d-be8c-f4c8ead95967"}
{"timestamp": "2025-12-29T12:50:11.159045+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /profiles/me", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "0b583b95-e975-49c4-ac69-79f1a3881548"}
{"timestamp": "2025-12-29T12:50:11.161899+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0b583b95-e975-49c4-ac69-79f1a3881548"}
{"timestamp": "2025-12-29T12:50:11.163151+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0b583b95-e975-49c4-ac69-79f1a3881548"}
{"timestamp": "2025-12-29T12:50:11.163560+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0b583b95-e975-49c4-ac69-79f1a3881548"}
{"timestamp": "2025-12-29T12:50:11.166818+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0b583b95-e975-49c4-ac69-79f1a3881548"}
{"timestamp": "2025-12-29T12:50:11.167504+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.4698s ago] {'user_id_1': 29, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0b583b95-e975-49c4-ac69-79f1a3881548"}
{"timestamp": "2025-12-29T12:50:11.170491+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /profiles/me \u2192 200 (0.011s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "0b583b95-e975-49c4-ac69-79f1a3881548"}
{"timestamp": "2025-12-29T12:50:11.171494+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0b583b95-e975-49c4-ac69-79f1a3881548"}
{"timestamp": "2025-12-29T12:50:11.174008+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b3aefc68-a8bc-4788-ba5f-e2d9489ce7fa"}
{"timestamp": "2025-12-29T12:50:11.176745+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b3aefc68-a8bc-4788-ba5f-e2d9489ce7fa"}
{"timestamp": "2025-12-29T12:50:11.178670+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b3aefc68-a8bc-4788-ba5f-e2d9489ce7fa"}
{"timestamp": "2025-12-29T12:50:11.179141+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'title_1': 'The Matrix Reloaded 1767012611.172205'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b3aefc68-a8bc-4788-ba5f-e2d9489ce7fa"}
{"timestamp": "2025-12-29T12:50:11.182749+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b3aefc68-a8bc-4788-ba5f-e2d9489ce7fa"}
{"timestamp": "2025-12-29T12:50:11.183207+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'title': 'The Matrix Reloaded 1767012611.172205', 'description': 'Test movie: The Matrix Reloaded 1767012611.172205', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b3aefc68-a8bc-4788-ba5f-e2d9489ce7fa"}
{"timestamp": "2025-12-29T12:50:11.185562+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b3aefc68-a8bc-4788-ba5f-e2d9489ce7fa"}
{"timestamp": "2025-12-29T12:50:11.190154+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b3aefc68-a8bc-4788-ba5f-e2d9489ce7fa"}
{"timestamp": "2025-12-29T12:50:11.191415+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b3aefc68-a8bc-4788-ba5f-e2d9489ce7fa"}
{"timestamp": "2025-12-29T12:50:11.191898+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b3aefc68-a8bc-4788-ba5f-e2d9489ce7fa"}
{"timestamp": "2025-12-29T12:50:11.195175+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 26}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "b3aefc68-a8bc-4788-ba5f-e2d9489ce7fa"}
{"timestamp": "2025-12-29T12:50:11.195491+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "b3aefc68-a8bc-4788-ba5f-e2d9489ce7fa"}
{"timestamp": "2025-12-29T12:50:11.196411+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b3aefc68-a8bc-4788-ba5f-e2d9489ce7fa"}
{"timestamp": "2025-12-29T12:50:11.196767+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "b3aefc68-a8bc-4788-ba5f-e2d9489ce7fa"}
{"timestamp": "2025-12-29T12:50:11.198073+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.024s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b3aefc68-a8bc-4788-ba5f-e2d9489ce7fa"}
{"timestamp": "2025-12-29T12:50:11.198935+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b3aefc68-a8bc-4788-ba5f-e2d9489ce7fa"}
{"timestamp": "2025-12-29T12:50:11.201224+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b2f37a8d-3f85-4931-bde4-c4e4c3819e34"}
{"timestamp": "2025-12-29T12:50:11.203936+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b2f37a8d-3f85-4931-bde4-c4e4c3819e34"}
{"timestamp": "2025-12-29T12:50:11.205309+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b2f37a8d-3f85-4931-bde4-c4e4c3819e34"}
{"timestamp": "2025-12-29T12:50:11.205642+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'name_1': 'Standard Layout 1767012611.199249'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b2f37a8d-3f85-4931-bde4-c4e4c3819e34"}
{"timestamp": "2025-12-29T12:50:11.208855+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b2f37a8d-3f85-4931-bde4-c4e4c3819e34"}
{"timestamp": "2025-12-29T12:50:11.209195+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'name': 'Standard Layout 1767012611.199249', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b2f37a8d-3f85-4931-bde4-c4e4c3819e34"}
{"timestamp": "2025-12-29T12:50:11.211098+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b2f37a8d-3f85-4931-bde4-c4e4c3819e34"}
{"timestamp": "2025-12-29T12:50:11.215151+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b2f37a8d-3f85-4931-bde4-c4e4c3819e34"}
{"timestamp": "2025-12-29T12:50:11.216400+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b2f37a8d-3f85-4931-bde4-c4e4c3819e34"}
{"timestamp": "2025-12-29T12:50:11.216749+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b2f37a8d-3f85-4931-bde4-c4e4c3819e34"}
{"timestamp": "2025-12-29T12:50:11.218980+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 25}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "b2f37a8d-3f85-4931-bde4-c4e4c3819e34"}
{"timestamp": "2025-12-29T12:50:11.219254+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "b2f37a8d-3f85-4931-bde4-c4e4c3819e34"}
{"timestamp": "2025-12-29T12:50:11.220033+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b2f37a8d-3f85-4931-bde4-c4e4c3819e34"}
{"timestamp": "2025-12-29T12:50:11.220266+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "b2f37a8d-3f85-4931-bde4-c4e4c3819e34"}
{"timestamp": "2025-12-29T12:50:11.221534+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.020s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b2f37a8d-3f85-4931-bde4-c4e4c3819e34"}
{"timestamp": "2025-12-29T12:50:11.222326+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b2f37a8d-3f85-4931-bde4-c4e4c3819e34"}
{"timestamp": "2025-12-29T12:50:11.224011+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "5f972926-9f6c-4fc3-bc68-d463f71e9222"}
{"timestamp": "2025-12-29T12:50:11.226474+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "5f972926-9f6c-4fc3-bc68-d463f71e9222"}
{"timestamp": "2025-12-29T12:50:11.228158+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f972926-9f6c-4fc3-bc68-d463f71e9222"}
{"timestamp": "2025-12-29T12:50:11.228678+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00067s] {'name_1': 'Screen 1 1767012611.222245', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f972926-9f6c-4fc3-bc68-d463f71e9222"}
{"timestamp": "2025-12-29T12:50:11.232417+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f972926-9f6c-4fc3-bc68-d463f71e9222"}
{"timestamp": "2025-12-29T12:50:11.232768+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'id_1': 25, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f972926-9f6c-4fc3-bc68-d463f71e9222"}
{"timestamp": "2025-12-29T12:50:11.235376+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f972926-9f6c-4fc3-bc68-d463f71e9222"}
{"timestamp": "2025-12-29T12:50:11.235844+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'name': 'Screen 1 1767012611.222245', 'capacity': 150, 'seat_layout_id': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f972926-9f6c-4fc3-bc68-d463f71e9222"}
{"timestamp": "2025-12-29T12:50:11.237988+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "5f972926-9f6c-4fc3-bc68-d463f71e9222"}
{"timestamp": "2025-12-29T12:50:11.242525+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "5f972926-9f6c-4fc3-bc68-d463f71e9222"}
{"timestamp": "2025-12-29T12:50:11.248397+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f972926-9f6c-4fc3-bc68-d463f71e9222"}
{"timestamp": "2025-12-29T12:50:11.248705+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f972926-9f6c-4fc3-bc68-d463f71e9222"}
{"timestamp": "2025-12-29T12:50:11.250890+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 25}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "5f972926-9f6c-4fc3-bc68-d463f71e9222"}
{"timestamp": "2025-12-29T12:50:11.251149+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "5f972926-9f6c-4fc3-bc68-d463f71e9222"}
{"timestamp": "2025-12-29T12:50:11.252004+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "5f972926-9f6c-4fc3-bc68-d463f71e9222"}
{"timestamp": "2025-12-29T12:50:11.252199+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "5f972926-9f6c-4fc3-bc68-d463f71e9222"}
{"timestamp": "2025-12-29T12:50:11.253255+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.029s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "5f972926-9f6c-4fc3-bc68-d463f71e9222"}
{"timestamp": "2025-12-29T12:50:11.254044+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "5f972926-9f6c-4fc3-bc68-d463f71e9222"}
{"timestamp": "2025-12-29T12:50:11.255715+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.257830+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.258985+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.259437+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.262567+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.263139+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00070s] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.266047+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.266622+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'screen_id_1': 25, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.269421+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.269841+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 26, 'screen_id': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.271908+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.275919+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.276816+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.277176+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00041s] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.280265+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.280575+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.282625+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.283077+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.284845+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 22}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.285125+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.285809+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.285976+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.286972+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.031s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.287704+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "811899ef-c792-498c-82c0-c9e612ccdc6d"}
{"timestamp": "2025-12-29T12:50:11.289464+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /seatavailability/grid/22", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "a63be856-7a89-4692-9bfd-a5165f61cb80"}
{"timestamp": "2025-12-29T12:50:11.291866+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a63be856-7a89-4692-9bfd-a5165f61cb80"}
{"timestamp": "2025-12-29T12:50:11.293805+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a63be856-7a89-4692-9bfd-a5165f61cb80"}
{"timestamp": "2025-12-29T12:50:11.294188+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'showtime_id_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a63be856-7a89-4692-9bfd-a5165f61cb80"}
{"timestamp": "2025-12-29T12:50:11.297244+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /seatavailability/grid/22 \u2192 200 (0.008s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "a63be856-7a89-4692-9bfd-a5165f61cb80"}
{"timestamp": "2025-12-29T12:50:11.298331+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a63be856-7a89-4692-9bfd-a5165f61cb80"}
{"timestamp": "2025-12-29T12:50:11.300416+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.303067+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.303884+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.304261+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.1413s ago] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.307578+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.307888+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00043s] {'user_id': 29, 'showtime_id': 22, 'seat_code': 'R5-8', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 12, 50, 11, 307294, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 0, 11, 306444, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.310265+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.314045+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.315303+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.315847+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00065s] {'pk_1': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.317930+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 21, 'user_id': 29, 'showtime_id': 22, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.318355+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.319569+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.319963+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.320211+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.322346+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.323480+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.323812+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'showtime_id_1': 22, 'seat_code_1': 'R5-8', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.327744+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.328329+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00069s] {'seat_code': 'R5-8', 'showtime_id': 22, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.331686+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.332259+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00078s] {'status': 'LOCKED', 'locked_by_user_id': 29, 'lock_expires_at': datetime.datetime(2025, 12, 29, 13, 0, 11, 330231, tzinfo=datetime.timezone.utc), 'seat_locks_id': 18}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.334551+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.339029+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.340546+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.340958+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00064s] {'pk_1': 18}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.342976+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 22, 'seat_code': 'R5-8', 'user_id': 29, 'expires_at': '2025-12-29T13:00:11.330231+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.343195+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.343434+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.343691+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.344708+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.344874+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.344986+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.345122+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 21, 'user_id': 29, 'showtime_id': 22, 'seat_code': 'R5-8'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.345325+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 21", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.347013+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.348125+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.348379+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00037s] {'user_id': 29, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.350757+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.354916+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.355918+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.356323+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00042s] {'pk_1': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.358601+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 21, 'reservation_id': 21, 'user_id': 29, 'showtime_id': 22, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.358854+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.359269+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_order_created for order.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.359554+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_order_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.359857+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 21", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.382396+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.384315+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.384665+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.387890+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 21, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.388113+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.388256+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_pricing_snapshot_created for pricing.snapshot_created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.388372+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_pricing_snapshot_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.388498+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 21, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.412302+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.413417+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.413781+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'pk_1': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.417061+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.417451+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.419594+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.423595+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.424180+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.424549+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.0687s ago] {'pk_1': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.426496+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 21 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.426764+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.427619+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.427790+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 21: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.428037+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.429244+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.429439+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 21", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.429706+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.430940+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.431171+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.431310+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.432626+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.433770+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.434323+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'actor_id': 29, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 21, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 21, \"user_id\": 29, \"showtime_id\": 22, \"seat_code\": \"R5-8\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 12, 50, 11, 433459, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.437566+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.441336+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.442555+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.443047+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.445252+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.446202+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.447402+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.147s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.448307+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "18063385-225f-4fd2-881b-3570d74dacd8"}
{"timestamp": "2025-12-29T12:50:11.450354+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "a4fe1618-c1a2-4145-aaa9-852a052aec12"}
{"timestamp": "2025-12-29T12:50:11.452521+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a4fe1618-c1a2-4145-aaa9-852a052aec12"}
{"timestamp": "2025-12-29T12:50:11.453097+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a4fe1618-c1a2-4145-aaa9-852a052aec12"}
{"timestamp": "2025-12-29T12:50:11.453520+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2905s ago] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a4fe1618-c1a2-4145-aaa9-852a052aec12"}
{"timestamp": "2025-12-29T12:50:11.456895+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a4fe1618-c1a2-4145-aaa9-852a052aec12"}
{"timestamp": "2025-12-29T12:50:11.457179+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'user_id_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a4fe1618-c1a2-4145-aaa9-852a052aec12"}
{"timestamp": "2025-12-29T12:50:11.459406+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.009s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "a4fe1618-c1a2-4145-aaa9-852a052aec12"}
{"timestamp": "2025-12-29T12:50:11.460338+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a4fe1618-c1a2-4145-aaa9-852a052aec12"}
{"timestamp": "2025-12-29T12:50:11.462116+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/order/21/initiate", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "3754164b-3723-44f9-8417-38185cc90451"}
{"timestamp": "2025-12-29T12:50:11.464708+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3754164b-3723-44f9-8417-38185cc90451"}
{"timestamp": "2025-12-29T12:50:11.465562+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3754164b-3723-44f9-8417-38185cc90451"}
{"timestamp": "2025-12-29T12:50:11.466089+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.3031s ago] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3754164b-3723-44f9-8417-38185cc90451"}
{"timestamp": "2025-12-29T12:50:11.469051+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3754164b-3723-44f9-8417-38185cc90451"}
{"timestamp": "2025-12-29T12:50:11.469384+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.05616s ago] {'pk_1': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3754164b-3723-44f9-8417-38185cc90451"}
{"timestamp": "2025-12-29T12:50:11.471819+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO payment_attempts (order_id, amount_attempted, status, final_amount, failure_reason, provider_payment_id, created_at) VALUES (%(order_id)s, %(amount_attempted)s, %(status)s, %(final_amount)s, %(failure_reason)s, %(provider_payment_id)s, %(created_at)s) RETURNING payment_attempts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3754164b-3723-44f9-8417-38185cc90451"}
{"timestamp": "2025-12-29T12:50:11.472199+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'order_id': 21, 'amount_attempted': 1000, 'status': 'PENDING', 'final_amount': 1000, 'failure_reason': None, 'provider_payment_id': None, 'created_at': datetime.datetime(2025, 12, 29, 12, 50, 11, 471479, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3754164b-3723-44f9-8417-38185cc90451"}
{"timestamp": "2025-12-29T12:50:11.474414+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "3754164b-3723-44f9-8417-38185cc90451"}
{"timestamp": "2025-12-29T12:50:11.478035+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3754164b-3723-44f9-8417-38185cc90451"}
{"timestamp": "2025-12-29T12:50:11.479341+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3754164b-3723-44f9-8417-38185cc90451"}
{"timestamp": "2025-12-29T12:50:11.479613+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'pk_1': 14}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3754164b-3723-44f9-8417-38185cc90451"}
{"timestamp": "2025-12-29T12:50:11.481759+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.pending with payload: {'payment_attempt_id': 14, 'order_id': 21, 'amount_attempted': 1000, 'final_amount': 1000}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "3754164b-3723-44f9-8417-38185cc90451"}
{"timestamp": "2025-12-29T12:50:11.482009+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "3754164b-3723-44f9-8417-38185cc90451"}
{"timestamp": "2025-12-29T12:50:11.482698+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.pending to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "3754164b-3723-44f9-8417-38185cc90451"}
{"timestamp": "2025-12-29T12:50:11.482897+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: payment.pending", "module": "event_bus", "function": "publish", "line": 31, "request_id": "3754164b-3723-44f9-8417-38185cc90451"}
{"timestamp": "2025-12-29T12:50:11.484589+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/order/21/initiate \u2192 200 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "3754164b-3723-44f9-8417-38185cc90451"}
{"timestamp": "2025-12-29T12:50:11.485447+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "3754164b-3723-44f9-8417-38185cc90451"}
{"timestamp": "2025-12-29T12:50:11.487027+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/14/confirm", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.489083+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.489716+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.490051+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.3272s ago] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.493337+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id AS payment_attempts_id, payment_attempts.order_id AS payment_attempts_order_id, payment_attempts.amount_attempted AS payment_attempts_amount_attempted, payment_attempts.status AS payment_attempts_status, payment_attempts.final_amount AS payment_attempts_final_amount, payment_attempts.failure_reason AS payment_attempts_failure_reason, payment_attempts.provider_payment_id AS payment_attempts_provider_payment_id, payment_attempts.created_at AS payment_attempts_created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.493653+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'pk_1': 14}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.496656+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.497023+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'pk_1': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.499521+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE payment_attempts SET status=%(status)s, provider_payment_id=%(provider_payment_id)s WHERE payment_attempts.id = %(payment_attempts_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.499891+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'status': 'SUCCEEDED', 'provider_payment_id': 'mock_payment_14', 'payment_attempts_id': 14}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.501484+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.505409+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.505969+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.506362+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.02714s ago] {'pk_1': 14}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.509216+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.509505+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'pk_1': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.510826+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.succeeded with payload: {'payment_attempt_id': 14, 'order_id': 21, 'final_amount': 1000.0}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.511064+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.511957+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.succeeded to 4 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.512245+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_payment_succeeded for payment.succeeded", "module": "event_bus", "function": "publish", "line": 36, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.512401+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_payment_succeeded", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.512591+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.512779+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_payment_succeeded for payment.succeeded", "module": "event_bus", "function": "publish", "line": 36, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.512982+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_payment_succeeded", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.514421+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.514897+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.515158+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.102s ago] {'pk_1': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.517339+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET is_completed=%(is_completed)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.517606+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00039s] {'is_completed': True, 'orders_id': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.519164+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.522707+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.523433+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.523798+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.1679s ago] {'pk_1': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.525681+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.completed with payload: {'order_id': 21}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.525907+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.completed to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.526068+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: order.completed", "module": "event_bus", "function": "publish", "line": 31, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.526340+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.527496+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.527838+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_payment_succeeded for payment.succeeded", "module": "event_bus", "function": "publish", "line": 36, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.527994+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_payment_succeeded", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.530718+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.event_bus", "message": "\u274c Event handler failed: payment.succeeded -> on_payment_succeeded: 'user_email'", "module": "event_bus", "function": "_safe_invoke", "line": 45, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\event_bus.py\", line 42, in _safe_invoke\n    await handler(payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\notification\\handlers.py\", line 11, in on_payment_succeeded\n    send_booking_confirmation(payload)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\notification\\service.py\", line 31, in send_booking_confirmation\n    to_email=payload[\"user_email\"],\n             ~~~~~~~^^^^^^^^^^^^^^\nKeyError: 'user_email'"}
{"timestamp": "2025-12-29T12:50:11.532297+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_payment_succeeded for payment.succeeded", "module": "event_bus", "function": "publish", "line": 36, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.532481+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_payment_succeeded", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.534228+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.534759+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.535217+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.1015s ago] {'actor_id': None, 'actor_type': 'user', 'action': 'payment.succeeded', 'target_id': 21, 'target_type': 'order', 'payload': '{\"payment_attempt_id\": 14, \"order_id\": 21, \"final_amount\": 1000.0}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 12, 50, 11, 534488, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.537536+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.552389+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.event_bus", "message": "\u274c Event handler failed: payment.succeeded -> on_payment_succeeded: (psycopg2.errors.NotNullViolation) null value in column \"actor_id\" of relation \"audit_logs\" violates not-null constraint\nDETAIL:  Failing row contains (23, null, user, payment.succeeded, 21, order, {\"payment_attempt_id\": 14, \"order_id\": 21, \"final_amount\": 1000...., null, 2025-12-29 12:50:11.534488+00).\n\n[SQL: INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id]\n[parameters: {'actor_id': None, 'actor_type': 'user', 'action': 'payment.succeeded', 'target_id': 21, 'target_type': 'order', 'payload': '{\"payment_attempt_id\": 14, \"order_id\": 21, \"final_amount\": 1000.0}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 12, 50, 11, 534488, tzinfo=datetime.timezone.utc)}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)", "module": "event_bus", "function": "_safe_invoke", "line": 45, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\npsycopg2.errors.NotNullViolation: null value in column \"actor_id\" of relation \"audit_logs\" violates not-null constraint\nDETAIL:  Failing row contains (23, null, user, payment.succeeded, 21, order, {\"payment_attempt_id\": 14, \"order_id\": 21, \"final_amount\": 1000...., null, 2025-12-29 12:50:11.534488+00).\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\event_bus.py\", line 42, in _safe_invoke\n    await handler(payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\audit\\handlers.py\", line 44, in on_payment_succeeded\n    write_audit_log(\n    ~~~~~~~~~~~~~~~^\n        db=db,\n        ^^^^^^\n    ...<5 lines>...\n        payload=payload,\n        ^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\audit\\service.py\", line 31, in write_audit_log\n    return repo.create(db, entry)\n           ~~~~~~~~~~~^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\audit\\repository.py\", line 17, in create\n    db.commit()\n    ~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2030, in commit\n    trans.commit(_to_root=True)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^\n  File \"<string>\", line 2, in commit\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\state_changes.py\", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 1311, in commit\n    self._prepare_impl()\n    ~~~~~~~~~~~~~~~~~~^^\n  File \"<string>\", line 2, in _prepare_impl\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\state_changes.py\", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 1286, in _prepare_impl\n    self.session.flush()\n    ~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 4331, in flush\n    self._flush(objects)\n    ~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 4466, in _flush\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 4427, in _flush\n    flush_context.execute()\n    ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py\", line 466, in execute\n    rec.execute(self)\n    ~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py\", line 642, in execute\n    util.preloaded.orm_persistence.save_obj(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self.mapper,\n        ^^^^^^^^^^^^\n        uow.states_for_mapper_hierarchy(self.mapper, False, False),\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        uow,\n        ^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\persistence.py\", line 93, in save_obj\n    _emit_insert_statements(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        base_mapper,\n        ^^^^^^^^^^^^\n    ...<3 lines>...\n        insert,\n        ^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\persistence.py\", line 1233, in _emit_insert_statements\n    result = connection.execute(\n        statement,\n        params,\n        execution_options=execution_options,\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\nsqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column \"actor_id\" of relation \"audit_logs\" violates not-null constraint\nDETAIL:  Failing row contains (23, null, user, payment.succeeded, 21, order, {\"payment_attempt_id\": 14, \"order_id\": 21, \"final_amount\": 1000...., null, 2025-12-29 12:50:11.534488+00).\n\n[SQL: INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id]\n[parameters: {'actor_id': None, 'actor_type': 'user', 'action': 'payment.succeeded', 'target_id': 21, 'target_type': 'order', 'payload': '{\"payment_attempt_id\": 14, \"order_id\": 21, \"final_amount\": 1000.0}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 12, 50, 11, 534488, tzinfo=datetime.timezone.utc)}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)"}
{"timestamp": "2025-12-29T12:50:11.565162+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/14/confirm \u2192 200 (0.078s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.566137+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "40dc0c42-4472-4253-885f-5e67d1b053d2"}
{"timestamp": "2025-12-29T12:50:11.567961+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "d1b33a09-ab68-4282-99ad-a09be8fd76d6"}
{"timestamp": "2025-12-29T12:50:11.570580+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d1b33a09-ab68-4282-99ad-a09be8fd76d6"}
{"timestamp": "2025-12-29T12:50:11.571309+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1b33a09-ab68-4282-99ad-a09be8fd76d6"}
{"timestamp": "2025-12-29T12:50:11.571752+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.4088s ago] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1b33a09-ab68-4282-99ad-a09be8fd76d6"}
{"timestamp": "2025-12-29T12:50:11.575486+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1b33a09-ab68-4282-99ad-a09be8fd76d6"}
{"timestamp": "2025-12-29T12:50:11.575794+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.1191s ago] {'user_id_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1b33a09-ab68-4282-99ad-a09be8fd76d6"}
{"timestamp": "2025-12-29T12:50:11.577857+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.010s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "d1b33a09-ab68-4282-99ad-a09be8fd76d6"}
{"timestamp": "2025-12-29T12:50:11.579256+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d1b33a09-ab68-4282-99ad-a09be8fd76d6"}
{"timestamp": "2025-12-29T12:54:58.976808+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-29T12:55:00.842743+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-29T12:55:00.843174+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-29T12:55:00.843380+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.843597+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.843762+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.843931+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.844123+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.844311+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.844480+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.844711+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.844907+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.845102+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.845348+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.845612+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.845786+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.845948+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.846119+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.846381+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.846566+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.846754+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.847016+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.847424+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.847859+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.848229+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.848494+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.848720+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.849029+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.849313+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.849663+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.849940+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.850317+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.851028+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.851510+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.851977+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.852467+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.852946+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.853410+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.853714+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.854040+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.854346+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.854694+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.855047+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.855384+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.855720+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.855956+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.856242+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.856553+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.856891+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.857275+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.857651+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.857939+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.858255+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.858641+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.858980+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.859247+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.859571+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.859877+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.860194+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.860540+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.860765+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.861014+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.861326+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:00.861608+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-29T12:55:00.861899+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-29T12:55:39.830854+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-29T12:55:41.772071+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-29T12:55:41.772740+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-29T12:55:41.773277+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.773756+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.774103+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.774383+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.774571+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.774755+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.774973+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.775249+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.775426+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.775683+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.776025+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.776538+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.777018+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.777412+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.777795+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.778218+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.778528+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.778845+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.779265+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.779608+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.779928+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.780312+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.780701+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.781036+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.781475+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.781882+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.782144+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.782481+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.782862+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.783256+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.783619+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.784009+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.784362+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.784691+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.785008+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.785329+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.785637+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.785957+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.786185+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.786484+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.786957+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.787325+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.787814+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.788660+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.789051+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.789424+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.789813+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.790246+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.790801+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.791261+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.791776+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.792200+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.792615+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.793011+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.793479+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.794221+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.794795+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.795194+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.795519+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.795902+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:55:41.796246+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-29T12:55:41.796584+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-29T12:56:39.812127+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-29T12:56:41.749654+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-29T12:56:41.750179+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-29T12:56:41.750622+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.750933+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.751204+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.751517+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.751788+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.752027+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.752209+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.752407+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.752576+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.752849+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.753322+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.753779+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.754086+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.754441+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.754852+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.755323+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.755781+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.756311+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.756701+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.757206+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.757693+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.758066+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.758348+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.758653+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.759039+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.759419+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.759906+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.760317+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.760669+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.760944+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.761306+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.761547+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.761769+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.762010+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.762238+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.762453+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.762718+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.763077+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.763474+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.763822+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.764162+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.765018+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.765462+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.765842+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.766421+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.766878+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.767203+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.767551+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.767869+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.768124+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.768465+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.769253+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.769830+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.770307+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.770915+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.771630+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.772188+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.772792+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.773217+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.773568+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T12:56:41.773785+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-29T12:56:41.773979+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-29T12:57:16.638673+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-29T13:02:44.161157+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-29T13:02:44.161483+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-29T13:02:44.161657+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.161813+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.161959+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.162160+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.162306+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.162452+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.162594+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.162929+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.163167+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.163329+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.163495+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.163646+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.163866+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.164037+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.164327+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.164506+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.164689+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.164851+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.165019+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.165169+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.165314+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.165458+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.165616+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.165915+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.166206+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.166481+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.166701+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.166902+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.167063+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.167222+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.167390+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.167612+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.167766+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.167927+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.168064+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.168182+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.168310+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.168450+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.168609+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.168770+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.168898+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.169057+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.169189+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.169319+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.169445+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.169628+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.169791+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.169925+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.170072+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.170198+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.170379+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.170503+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.170622+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.170866+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.171198+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.171498+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.171795+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.172076+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.172340+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.172555+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:02:44.172760+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-29T13:02:44.172996+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-29T13:02:56.353660+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.441526+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.441910+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.444766+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.445069+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.447369+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.447779+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.450124+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.453158+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.453476+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'email_1': 'test_1767013374.290238@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.457244+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "detected 'bcrypt' backend, version '4.0.1'", "module": "bcrypt", "function": "_load_backend_mixin", "line": 625, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.458211+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "'bcrypt' backend lacks $2$ support, enabling workaround", "module": "bcrypt", "function": "_finalize_backend_mixin", "line": 406, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.681610+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.682079+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'email': 'test_1767013374.290238@example.com', 'hashed_password': '$2b$12$v4D4o6gtKVtTX2RWlDEI6uCOPa.8Rv7K6K8ow4UbZR8GwLLgwtkqK', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.684563+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.689525+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.691185+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.691625+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00067s] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.694031+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 30, 'email': 'test_1767013374.290238@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.694910+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.695790+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.696028+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.696204+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.730984+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.732641+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.733042+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'user_id_1': 30, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.737804+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.738219+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'user_id': 30, 'name': None, 'email': 'test_1767013374.290238@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.741251+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.745748+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.746778+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.747280+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.749676+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 30, 'user_id': 30, 'email': 'test_1767013374.290238@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.749930+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.750156+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.750507+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.751733+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.753415+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.753801+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.3008s ago] {'email_1': 'test_1767013374.290238@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.995580+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 30, 'email': 'test_1767013374.290238@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.995876+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.996615+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.996806+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:56.999884+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.646s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:57.000887+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0c99ced6-2972-42ad-afe9-fe964dea8693"}
{"timestamp": "2025-12-29T13:02:57.003250+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/login", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "ea17b05b-cc92-448e-a10b-33110914af4c"}
{"timestamp": "2025-12-29T13:02:57.004017+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "ea17b05b-cc92-448e-a10b-33110914af4c"}
{"timestamp": "2025-12-29T13:02:57.004223+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[0:8]", "module": "multipart", "function": "callback", "line": 625, "request_id": "ea17b05b-cc92-448e-a10b-33110914af4c"}
{"timestamp": "2025-12-29T13:02:57.004399+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[9:45]", "module": "multipart", "function": "callback", "line": 625, "request_id": "ea17b05b-cc92-448e-a10b-33110914af4c"}
{"timestamp": "2025-12-29T13:02:57.004559+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "ea17b05b-cc92-448e-a10b-33110914af4c"}
{"timestamp": "2025-12-29T13:02:57.004739+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_start with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "ea17b05b-cc92-448e-a10b-33110914af4c"}
{"timestamp": "2025-12-29T13:02:57.004890+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_name with data[46:54]", "module": "multipart", "function": "callback", "line": 625, "request_id": "ea17b05b-cc92-448e-a10b-33110914af4c"}
{"timestamp": "2025-12-29T13:02:57.005046+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_data with data[55:73]", "module": "multipart", "function": "callback", "line": 625, "request_id": "ea17b05b-cc92-448e-a10b-33110914af4c"}
{"timestamp": "2025-12-29T13:02:57.005491+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_field_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "ea17b05b-cc92-448e-a10b-33110914af4c"}
{"timestamp": "2025-12-29T13:02:57.005752+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "python_multipart.multipart", "message": "Calling on_end with no data", "module": "multipart", "function": "callback", "line": 628, "request_id": "ea17b05b-cc92-448e-a10b-33110914af4c"}
{"timestamp": "2025-12-29T13:02:57.008318+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ea17b05b-cc92-448e-a10b-33110914af4c"}
{"timestamp": "2025-12-29T13:02:57.009043+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea17b05b-cc92-448e-a10b-33110914af4c"}
{"timestamp": "2025-12-29T13:02:57.009515+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.5565s ago] {'email_1': 'test_1767013374.290238@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea17b05b-cc92-448e-a10b-33110914af4c"}
{"timestamp": "2025-12-29T13:02:57.214905+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 30, 'email': 'test_1767013374.290238@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "ea17b05b-cc92-448e-a10b-33110914af4c"}
{"timestamp": "2025-12-29T13:02:57.215239+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "ea17b05b-cc92-448e-a10b-33110914af4c"}
{"timestamp": "2025-12-29T13:02:57.215941+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "ea17b05b-cc92-448e-a10b-33110914af4c"}
{"timestamp": "2025-12-29T13:02:57.216141+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "ea17b05b-cc92-448e-a10b-33110914af4c"}
{"timestamp": "2025-12-29T13:02:57.217201+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/login \u2192 200 (0.214s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "ea17b05b-cc92-448e-a10b-33110914af4c"}
{"timestamp": "2025-12-29T13:02:57.217998+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ea17b05b-cc92-448e-a10b-33110914af4c"}
{"timestamp": "2025-12-29T13:02:57.219476+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /profiles/me", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "57c11e9d-fe7f-488f-952f-4a0972a250bd"}
{"timestamp": "2025-12-29T13:02:57.223803+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "57c11e9d-fe7f-488f-952f-4a0972a250bd"}
{"timestamp": "2025-12-29T13:02:57.225034+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "57c11e9d-fe7f-488f-952f-4a0972a250bd"}
{"timestamp": "2025-12-29T13:02:57.225376+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "57c11e9d-fe7f-488f-952f-4a0972a250bd"}
{"timestamp": "2025-12-29T13:02:57.228577+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "57c11e9d-fe7f-488f-952f-4a0972a250bd"}
{"timestamp": "2025-12-29T13:02:57.228941+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.4965s ago] {'user_id_1': 30, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "57c11e9d-fe7f-488f-952f-4a0972a250bd"}
{"timestamp": "2025-12-29T13:02:57.234452+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /profiles/me \u2192 200 (0.015s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "57c11e9d-fe7f-488f-952f-4a0972a250bd"}
{"timestamp": "2025-12-29T13:02:57.236050+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "57c11e9d-fe7f-488f-952f-4a0972a250bd"}
{"timestamp": "2025-12-29T13:02:57.238085+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "7988b050-ca42-412c-beb7-2ed05567445e"}
{"timestamp": "2025-12-29T13:02:57.240428+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7988b050-ca42-412c-beb7-2ed05567445e"}
{"timestamp": "2025-12-29T13:02:57.243361+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7988b050-ca42-412c-beb7-2ed05567445e"}
{"timestamp": "2025-12-29T13:02:57.243766+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00067s] {'title_1': 'The Matrix Reloaded 1767013377.236505'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7988b050-ca42-412c-beb7-2ed05567445e"}
{"timestamp": "2025-12-29T13:02:57.247115+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7988b050-ca42-412c-beb7-2ed05567445e"}
{"timestamp": "2025-12-29T13:02:57.247575+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'title': 'The Matrix Reloaded 1767013377.236505', 'description': 'Test movie: The Matrix Reloaded 1767013377.236505', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7988b050-ca42-412c-beb7-2ed05567445e"}
{"timestamp": "2025-12-29T13:02:57.249662+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "7988b050-ca42-412c-beb7-2ed05567445e"}
{"timestamp": "2025-12-29T13:02:57.253661+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7988b050-ca42-412c-beb7-2ed05567445e"}
{"timestamp": "2025-12-29T13:02:57.254800+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7988b050-ca42-412c-beb7-2ed05567445e"}
{"timestamp": "2025-12-29T13:02:57.255225+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'pk_1': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7988b050-ca42-412c-beb7-2ed05567445e"}
{"timestamp": "2025-12-29T13:02:57.257518+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 27}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "7988b050-ca42-412c-beb7-2ed05567445e"}
{"timestamp": "2025-12-29T13:02:57.257779+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "7988b050-ca42-412c-beb7-2ed05567445e"}
{"timestamp": "2025-12-29T13:02:57.258453+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "7988b050-ca42-412c-beb7-2ed05567445e"}
{"timestamp": "2025-12-29T13:02:57.258647+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "7988b050-ca42-412c-beb7-2ed05567445e"}
{"timestamp": "2025-12-29T13:02:57.259835+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "7988b050-ca42-412c-beb7-2ed05567445e"}
{"timestamp": "2025-12-29T13:02:57.260672+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "7988b050-ca42-412c-beb7-2ed05567445e"}
{"timestamp": "2025-12-29T13:02:57.262454+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "44484cc7-349e-4a82-8165-ef8d1579b0b4"}
{"timestamp": "2025-12-29T13:02:57.265528+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "44484cc7-349e-4a82-8165-ef8d1579b0b4"}
{"timestamp": "2025-12-29T13:02:57.266734+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "44484cc7-349e-4a82-8165-ef8d1579b0b4"}
{"timestamp": "2025-12-29T13:02:57.267131+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'name_1': 'Standard Layout 1767013377.260928'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "44484cc7-349e-4a82-8165-ef8d1579b0b4"}
{"timestamp": "2025-12-29T13:02:57.270447+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "44484cc7-349e-4a82-8165-ef8d1579b0b4"}
{"timestamp": "2025-12-29T13:02:57.270857+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'name': 'Standard Layout 1767013377.260928', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "44484cc7-349e-4a82-8165-ef8d1579b0b4"}
{"timestamp": "2025-12-29T13:02:57.273356+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "44484cc7-349e-4a82-8165-ef8d1579b0b4"}
{"timestamp": "2025-12-29T13:02:57.277696+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "44484cc7-349e-4a82-8165-ef8d1579b0b4"}
{"timestamp": "2025-12-29T13:02:57.278664+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "44484cc7-349e-4a82-8165-ef8d1579b0b4"}
{"timestamp": "2025-12-29T13:02:57.278944+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "44484cc7-349e-4a82-8165-ef8d1579b0b4"}
{"timestamp": "2025-12-29T13:02:57.281287+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 26}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "44484cc7-349e-4a82-8165-ef8d1579b0b4"}
{"timestamp": "2025-12-29T13:02:57.281541+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "44484cc7-349e-4a82-8165-ef8d1579b0b4"}
{"timestamp": "2025-12-29T13:02:57.282241+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "44484cc7-349e-4a82-8165-ef8d1579b0b4"}
{"timestamp": "2025-12-29T13:02:57.282409+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "44484cc7-349e-4a82-8165-ef8d1579b0b4"}
{"timestamp": "2025-12-29T13:02:57.283517+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.021s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "44484cc7-349e-4a82-8165-ef8d1579b0b4"}
{"timestamp": "2025-12-29T13:02:57.284553+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "44484cc7-349e-4a82-8165-ef8d1579b0b4"}
{"timestamp": "2025-12-29T13:02:57.286360+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "daabd8f4-412a-4567-95cd-ab34fb8debf0"}
{"timestamp": "2025-12-29T13:02:57.289152+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "daabd8f4-412a-4567-95cd-ab34fb8debf0"}
{"timestamp": "2025-12-29T13:02:57.291020+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "daabd8f4-412a-4567-95cd-ab34fb8debf0"}
{"timestamp": "2025-12-29T13:02:57.291716+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00097s] {'name_1': 'Screen 1 1767013377.284284', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "daabd8f4-412a-4567-95cd-ab34fb8debf0"}
{"timestamp": "2025-12-29T13:02:57.295151+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "daabd8f4-412a-4567-95cd-ab34fb8debf0"}
{"timestamp": "2025-12-29T13:02:57.295654+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'id_1': 26, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "daabd8f4-412a-4567-95cd-ab34fb8debf0"}
{"timestamp": "2025-12-29T13:02:57.298621+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "daabd8f4-412a-4567-95cd-ab34fb8debf0"}
{"timestamp": "2025-12-29T13:02:57.299181+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'name': 'Screen 1 1767013377.284284', 'capacity': 150, 'seat_layout_id': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "daabd8f4-412a-4567-95cd-ab34fb8debf0"}
{"timestamp": "2025-12-29T13:02:57.301696+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "daabd8f4-412a-4567-95cd-ab34fb8debf0"}
{"timestamp": "2025-12-29T13:02:57.305642+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "daabd8f4-412a-4567-95cd-ab34fb8debf0"}
{"timestamp": "2025-12-29T13:02:57.310403+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "daabd8f4-412a-4567-95cd-ab34fb8debf0"}
{"timestamp": "2025-12-29T13:02:57.310874+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "daabd8f4-412a-4567-95cd-ab34fb8debf0"}
{"timestamp": "2025-12-29T13:02:57.313408+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 26}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "daabd8f4-412a-4567-95cd-ab34fb8debf0"}
{"timestamp": "2025-12-29T13:02:57.313672+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "daabd8f4-412a-4567-95cd-ab34fb8debf0"}
{"timestamp": "2025-12-29T13:02:57.314542+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "daabd8f4-412a-4567-95cd-ab34fb8debf0"}
{"timestamp": "2025-12-29T13:02:57.314772+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "daabd8f4-412a-4567-95cd-ab34fb8debf0"}
{"timestamp": "2025-12-29T13:02:57.315799+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.030s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "daabd8f4-412a-4567-95cd-ab34fb8debf0"}
{"timestamp": "2025-12-29T13:02:57.316968+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "daabd8f4-412a-4567-95cd-ab34fb8debf0"}
{"timestamp": "2025-12-29T13:02:57.318540+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.320824+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.321799+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.322179+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00041s] {'pk_1': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.324923+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.325264+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.327951+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.328585+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'screen_id_1': 26, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.332529+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.332947+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 27, 'screen_id': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.335580+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.340053+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.341122+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.341446+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.344390+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.344708+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'pk_1': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.346917+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.347270+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.348922+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 23}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.349164+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.349860+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.350028+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.351084+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.033s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.351779+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "edd2ae36-11a5-4102-98a3-c85376d61cf1"}
{"timestamp": "2025-12-29T13:02:57.353990+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /seatavailability/grid/23", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "f9029b9c-4943-4b2d-b2df-9f9aa1a6a6b9"}
{"timestamp": "2025-12-29T13:02:57.356232+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f9029b9c-4943-4b2d-b2df-9f9aa1a6a6b9"}
{"timestamp": "2025-12-29T13:02:57.357757+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f9029b9c-4943-4b2d-b2df-9f9aa1a6a6b9"}
{"timestamp": "2025-12-29T13:02:57.358458+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'showtime_id_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f9029b9c-4943-4b2d-b2df-9f9aa1a6a6b9"}
{"timestamp": "2025-12-29T13:02:57.362062+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /seatavailability/grid/23 \u2192 200 (0.008s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "f9029b9c-4943-4b2d-b2df-9f9aa1a6a6b9"}
{"timestamp": "2025-12-29T13:02:57.362838+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f9029b9c-4943-4b2d-b2df-9f9aa1a6a6b9"}
{"timestamp": "2025-12-29T13:02:57.365278+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.368417+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.369594+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.369991+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.1451s ago] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.373520+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.373854+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'user_id': 30, 'showtime_id': 23, 'seat_code': 'R5-8', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 13, 2, 57, 373206, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 12, 57, 372350, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.376336+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.380544+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.381622+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.381933+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.384121+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 22, 'user_id': 30, 'showtime_id': 23, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.384391+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.385381+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.385605+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.385775+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.387620+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.388580+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.388871+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00043s] {'showtime_id_1': 23, 'seat_code_1': 'R5-8', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.391704+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.391986+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00043s] {'seat_code': 'R5-8', 'showtime_id': 23, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.395177+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.395515+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'status': 'LOCKED', 'locked_by_user_id': 30, 'lock_expires_at': datetime.datetime(2025, 12, 29, 13, 12, 57, 393792, tzinfo=datetime.timezone.utc), 'seat_locks_id': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.397341+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.402006+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.403048+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.403458+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'pk_1': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.407817+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 23, 'seat_code': 'R5-8', 'user_id': 30, 'expires_at': '2025-12-29T13:12:57.393792+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.408382+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.408820+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.409392+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.411228+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.411604+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.411940+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.412282+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 22, 'user_id': 30, 'showtime_id': 23, 'seat_code': 'R5-8'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.412722+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 22", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.415895+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.417861+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.418493+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00076s] {'user_id': 30, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.423184+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.428648+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.430388+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.431127+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00079s] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.433992+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 22, 'reservation_id': 22, 'user_id': 30, 'showtime_id': 23, 'seat_code': 'R5-8'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.434351+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.434816+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_order_created for order.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.435170+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_order_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.435765+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 22", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.454062+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.455979+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.456510+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.460310+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 22, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.460745+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.461262+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_pricing_snapshot_created for pricing.snapshot_created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.461661+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_pricing_snapshot_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.462006+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 22, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.480201+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.481545+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.481852+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.485511+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.485836+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00042s] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.488051+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.492101+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.492782+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.493171+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.06313s ago] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.495374+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 22 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.495674+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.496718+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.496962+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 22: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.497307+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.499062+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.499327+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 22", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.499601+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.500753+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.500937+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.501045+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.502383+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.503763+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.504101+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'actor_id': 30, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 22, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 22, \"user_id\": 30, \"showtime_id\": 23, \"seat_code\": \"R5-8\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 2, 57, 503420, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.506824+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.510880+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.512157+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.512591+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.515003+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.516110+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.517465+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.152s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.518434+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "bab8e174-b275-420c-901e-e330b66a1771"}
{"timestamp": "2025-12-29T13:02:57.520178+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "961de99d-6d59-4404-aa0c-01e4977a6718"}
{"timestamp": "2025-12-29T13:02:57.522575+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "961de99d-6d59-4404-aa0c-01e4977a6718"}
{"timestamp": "2025-12-29T13:02:57.523285+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "961de99d-6d59-4404-aa0c-01e4977a6718"}
{"timestamp": "2025-12-29T13:02:57.523832+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2988s ago] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "961de99d-6d59-4404-aa0c-01e4977a6718"}
{"timestamp": "2025-12-29T13:02:57.527125+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "961de99d-6d59-4404-aa0c-01e4977a6718"}
{"timestamp": "2025-12-29T13:02:57.527544+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'user_id_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "961de99d-6d59-4404-aa0c-01e4977a6718"}
{"timestamp": "2025-12-29T13:02:57.531472+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.011s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "961de99d-6d59-4404-aa0c-01e4977a6718"}
{"timestamp": "2025-12-29T13:02:57.532475+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "961de99d-6d59-4404-aa0c-01e4977a6718"}
{"timestamp": "2025-12-29T13:02:57.534839+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/order/22/initiate", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "e96fd47a-e790-4517-bd1f-0f3d7c3aa68a"}
{"timestamp": "2025-12-29T13:02:57.538063+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e96fd47a-e790-4517-bd1f-0f3d7c3aa68a"}
{"timestamp": "2025-12-29T13:02:57.539087+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e96fd47a-e790-4517-bd1f-0f3d7c3aa68a"}
{"timestamp": "2025-12-29T13:02:57.539590+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.3147s ago] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e96fd47a-e790-4517-bd1f-0f3d7c3aa68a"}
{"timestamp": "2025-12-29T13:02:57.543169+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e96fd47a-e790-4517-bd1f-0f3d7c3aa68a"}
{"timestamp": "2025-12-29T13:02:57.543801+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.06228s ago] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e96fd47a-e790-4517-bd1f-0f3d7c3aa68a"}
{"timestamp": "2025-12-29T13:02:57.547099+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO payment_attempts (order_id, amount_attempted, status, final_amount, failure_reason, provider_payment_id, created_at) VALUES (%(order_id)s, %(amount_attempted)s, %(status)s, %(final_amount)s, %(failure_reason)s, %(provider_payment_id)s, %(created_at)s) RETURNING payment_attempts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e96fd47a-e790-4517-bd1f-0f3d7c3aa68a"}
{"timestamp": "2025-12-29T13:02:57.547602+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'order_id': 22, 'amount_attempted': 1000, 'status': 'PENDING', 'final_amount': 1000, 'failure_reason': None, 'provider_payment_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 2, 57, 546732, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e96fd47a-e790-4517-bd1f-0f3d7c3aa68a"}
{"timestamp": "2025-12-29T13:02:57.550550+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "e96fd47a-e790-4517-bd1f-0f3d7c3aa68a"}
{"timestamp": "2025-12-29T13:02:57.554897+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e96fd47a-e790-4517-bd1f-0f3d7c3aa68a"}
{"timestamp": "2025-12-29T13:02:57.556011+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e96fd47a-e790-4517-bd1f-0f3d7c3aa68a"}
{"timestamp": "2025-12-29T13:02:57.556362+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'pk_1': 15}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e96fd47a-e790-4517-bd1f-0f3d7c3aa68a"}
{"timestamp": "2025-12-29T13:02:57.559384+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e96fd47a-e790-4517-bd1f-0f3d7c3aa68a"}
{"timestamp": "2025-12-29T13:02:57.559664+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00043s] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e96fd47a-e790-4517-bd1f-0f3d7c3aa68a"}
{"timestamp": "2025-12-29T13:02:57.561269+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.pending with payload: {'payment_attempt_id': 15, 'order_id': 22, 'amount_attempted': 1000, 'final_amount': 1000, 'user_id': 30}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "e96fd47a-e790-4517-bd1f-0f3d7c3aa68a"}
{"timestamp": "2025-12-29T13:02:57.561553+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "e96fd47a-e790-4517-bd1f-0f3d7c3aa68a"}
{"timestamp": "2025-12-29T13:02:57.562423+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.pending to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "e96fd47a-e790-4517-bd1f-0f3d7c3aa68a"}
{"timestamp": "2025-12-29T13:02:57.562824+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: payment.pending", "module": "event_bus", "function": "publish", "line": 31, "request_id": "e96fd47a-e790-4517-bd1f-0f3d7c3aa68a"}
{"timestamp": "2025-12-29T13:02:57.564035+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/order/22/initiate \u2192 200 (0.030s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "e96fd47a-e790-4517-bd1f-0f3d7c3aa68a"}
{"timestamp": "2025-12-29T13:02:57.564873+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "e96fd47a-e790-4517-bd1f-0f3d7c3aa68a"}
{"timestamp": "2025-12-29T13:02:57.566705+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/15/confirm", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.569899+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.570521+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.570912+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.3461s ago] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.574108+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id AS payment_attempts_id, payment_attempts.order_id AS payment_attempts_order_id, payment_attempts.amount_attempted AS payment_attempts_amount_attempted, payment_attempts.status AS payment_attempts_status, payment_attempts.final_amount AS payment_attempts_final_amount, payment_attempts.failure_reason AS payment_attempts_failure_reason, payment_attempts.provider_payment_id AS payment_attempts_provider_payment_id, payment_attempts.created_at AS payment_attempts_created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.574543+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'pk_1': 15}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.577168+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.577454+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.579724+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE payment_attempts SET status=%(status)s, provider_payment_id=%(provider_payment_id)s WHERE payment_attempts.id = %(payment_attempts_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.579976+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00038s] {'status': 'SUCCEEDED', 'provider_payment_id': 'mock_payment_15', 'payment_attempts_id': 15}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.582163+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.586072+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.586707+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.587154+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.03122s ago] {'pk_1': 15}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.592901+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.594063+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.03401s ago] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.596276+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.succeeded with payload: {'payment_attempt_id': 15, 'order_id': 22, 'final_amount': 1000.0, 'user_id': 30}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.596863+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.598131+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.succeeded to 4 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.598539+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_payment_succeeded for payment.succeeded", "module": "event_bus", "function": "publish", "line": 36, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.598927+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_payment_succeeded", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.599389+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.599808+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_payment_succeeded for payment.succeeded", "module": "event_bus", "function": "publish", "line": 36, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.600211+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_payment_succeeded", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.602683+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.604626+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.605394+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.1238s ago] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.609399+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET is_completed=%(is_completed)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.610222+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00073s] {'is_completed': True, 'orders_id': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.612429+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.617306+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.618419+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.619021+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.1888s ago] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.621999+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.completed with payload: {'order_id': 22}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.622331+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.completed to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.622546+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: order.completed", "module": "event_bus", "function": "publish", "line": 31, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.622892+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.624017+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.624235+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_payment_succeeded for payment.succeeded", "module": "event_bus", "function": "publish", "line": 36, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.624353+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_payment_succeeded", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.625782+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.626286+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.626554+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.8942s ago] {'user_id_1': 30, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.629263+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.630286+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.630473+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_payment_succeeded for payment.succeeded", "module": "event_bus", "function": "publish", "line": 36, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.630599+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_payment_succeeded", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.631936+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.632377+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.632762+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.1292s ago] {'actor_id': 30, 'actor_type': 'user', 'action': 'payment.succeeded', 'target_id': 22, 'target_type': 'order', 'payload': '{\"payment_attempt_id\": 15, \"order_id\": 22, \"final_amount\": 1000.0, \"user_id\": 30}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 2, 57, 632170, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.634657+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.638963+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.639568+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.639978+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.1279s ago] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.641817+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.642832+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.644127+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/15/confirm \u2192 200 (0.077s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.645349+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "adad0319-fb41-4c0f-af67-5b16e4295de0"}
{"timestamp": "2025-12-29T13:02:57.646816+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "cd336f34-43eb-4553-8e01-b2320dd509b0"}
{"timestamp": "2025-12-29T13:02:57.649039+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cd336f34-43eb-4553-8e01-b2320dd509b0"}
{"timestamp": "2025-12-29T13:02:57.649639+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd336f34-43eb-4553-8e01-b2320dd509b0"}
{"timestamp": "2025-12-29T13:02:57.650023+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.4252s ago] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd336f34-43eb-4553-8e01-b2320dd509b0"}
{"timestamp": "2025-12-29T13:02:57.652764+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd336f34-43eb-4553-8e01-b2320dd509b0"}
{"timestamp": "2025-12-29T13:02:57.653044+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.1262s ago] {'user_id_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd336f34-43eb-4553-8e01-b2320dd509b0"}
{"timestamp": "2025-12-29T13:02:57.655019+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.008s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "cd336f34-43eb-4553-8e01-b2320dd509b0"}
{"timestamp": "2025-12-29T13:02:57.655792+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "cd336f34-43eb-4553-8e01-b2320dd509b0"}
{"timestamp": "2025-12-29T13:11:53.136882+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-29T13:11:55.370624+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-29T13:11:55.370961+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-29T13:11:55.371126+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.371319+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.371438+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.371557+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.371727+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.371857+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.371978+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.372107+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.372258+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.372445+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.372578+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.372702+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.372839+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.372991+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.373144+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.373285+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.373436+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.373563+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.373686+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.373800+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.373915+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.374097+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.374217+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.374356+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.374518+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.374671+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.374855+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.375103+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.375398+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.375645+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.375905+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.376206+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.376524+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.376810+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.376948+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.377089+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.377225+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.377401+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.377670+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.377895+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.378046+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.378177+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.378346+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.378492+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.378630+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.378780+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.378918+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.379062+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.379204+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.379342+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.379481+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.379626+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.379764+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.379903+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.380039+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.380156+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.380268+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.380400+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.380610+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.380895+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:11:55.381140+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-29T13:11:55.381339+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-29T13:14:47.091737+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-29T13:14:49.142765+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-29T13:14:49.143191+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-29T13:14:49.143433+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.143744+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.144008+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.144311+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.144551+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.144789+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.144916+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.145043+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.145166+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.145281+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.145417+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.145531+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.145681+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.145943+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.146174+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.146317+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.146534+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.146655+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.146806+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.147046+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.147352+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.147622+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.147782+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.147955+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.148224+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.148464+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.148632+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.148808+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.149071+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.149318+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.149561+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.149798+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.149987+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.150205+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.150323+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.150439+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.150582+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.150811+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.151107+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.151349+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.151584+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.151800+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.152165+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.152508+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.152784+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.152966+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.153101+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.153298+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.153445+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.153595+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.153835+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.154023+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.154228+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.154389+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.154516+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.154637+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.154981+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.155237+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.155438+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.155557+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:14:49.155664+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-29T13:14:49.155829+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-29T13:17:08.697841+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-29T13:17:10.711756+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-29T13:17:10.712140+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-29T13:17:10.712382+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.712549+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.712728+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.713194+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.713615+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.713994+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.714371+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.714548+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.714718+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.714867+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.714991+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.715107+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.715224+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.715410+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.715533+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.715663+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.715873+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.716334+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.716742+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.717449+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.717861+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.718070+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.718331+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.718611+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.718827+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.719132+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.719430+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.719787+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.720090+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.720221+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.720336+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.720458+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.721018+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.721203+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.721323+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.721459+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.721726+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.722054+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.722293+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.722419+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.722533+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.722644+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.722755+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.722864+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.722982+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.723096+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.723205+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.723314+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.723424+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.723533+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.723643+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.723839+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.724144+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.724404+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.724629+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.724809+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.724960+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.725125+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.725362+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/showtimes/{showtime_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.725578+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.725772+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:17:10.725900+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-29T13:17:10.726012+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-29T13:18:30.874018+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-29T13:18:33.162580+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-29T13:18:33.163008+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-29T13:18:33.163250+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.163436+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.163617+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.163848+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.164188+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.164398+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.164636+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.164865+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.165085+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.165314+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.165553+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.165770+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.166021+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.166451+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.166860+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.167276+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.167577+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.168034+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.168351+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.168586+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.168969+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.169244+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.169540+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.169868+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.170165+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.170399+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.170626+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.170810+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.171004+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.171313+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.171651+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.171979+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.172222+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.172410+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.172595+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.172815+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.173196+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.173560+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.173796+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.174055+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.174273+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.174504+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.174701+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.174978+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.175205+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.175463+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.175795+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.176127+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.176511+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.176778+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.176983+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.177159+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.177341+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.177512+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.177740+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.177962+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.178197+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.178441+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.178705+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/showtimes/{showtime_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.178917+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.179095+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:18:33.179341+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-29T13:18:33.179586+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-29T13:19:06.965442+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "a72bc11c-b804-4a1c-b6b5-9ed325b435b9"}
{"timestamp": "2025-12-29T13:19:06.971716+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 422 (0.006s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "a72bc11c-b804-4a1c-b6b5-9ed325b435b9"}
{"timestamp": "2025-12-29T13:19:09.026201+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "86fa9678-c94a-4593-a4a9-9b5b89f507af"}
{"timestamp": "2025-12-29T13:19:09.027828+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 422 (0.002s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "86fa9678-c94a-4593-a4a9-9b5b89f507af"}
{"timestamp": "2025-12-29T13:19:11.069471+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "6c25050e-ec5f-4753-8725-0cd306833331"}
{"timestamp": "2025-12-29T13:19:11.071176+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 422 (0.002s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "6c25050e-ec5f-4753-8725-0cd306833331"}
{"timestamp": "2025-12-29T13:19:13.119568+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "3f136641-ee8c-4ca1-b6c8-071e8d861b86"}
{"timestamp": "2025-12-29T13:19:13.121004+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 422 (0.001s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "3f136641-ee8c-4ca1-b6c8-071e8d861b86"}
{"timestamp": "2025-12-29T13:19:15.162481+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b48a79b1-95fb-4dc7-af18-f91d6e357e98"}
{"timestamp": "2025-12-29T13:19:15.164634+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 422 (0.002s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b48a79b1-95fb-4dc7-af18-f91d6e357e98"}
{"timestamp": "2025-12-29T13:20:40.538241+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-29T13:20:42.437434+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-29T13:20:42.437833+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-29T13:20:42.437983+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.438205+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.438409+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.438681+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.438941+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.439277+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.439499+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.439682+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.439861+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.440109+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.440324+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.440487+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.440688+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.440852+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.441081+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.441264+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.441590+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.441874+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.442181+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.442453+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.442755+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.443114+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.443306+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.443446+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.443567+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.443686+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.443803+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.443919+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.444037+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.444230+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.444509+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.444894+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.445257+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.445590+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.445740+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.445863+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.445979+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.446129+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.446328+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.446610+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.446874+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.447113+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.447505+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.447816+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.448116+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.448278+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.448496+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.448661+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.448841+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.449101+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.449386+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.449638+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.449906+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.450115+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.450289+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.450470+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.450679+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.450861+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.451253+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/showtimes/{showtime_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.451578+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.451889+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:20:42.452231+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-29T13:20:42.452664+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-29T13:20:55.152202+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.242645+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.243082+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.246081+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.246390+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.248804+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.249308+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.251517+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.254985+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.255357+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00069s] {'email_1': 'test_admin_1767014453.093281@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.259284+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "detected 'bcrypt' backend, version '4.0.1'", "module": "bcrypt", "function": "_load_backend_mixin", "line": 625, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.260102+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "'bcrypt' backend lacks $2$ support, enabling workaround", "module": "bcrypt", "function": "_finalize_backend_mixin", "line": 406, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.484276+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.484745+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'email': 'test_admin_1767014453.093281@example.com', 'hashed_password': '$2b$12$Mr13cMkYN6QBHceSo0qBe.gQ/m9i9o.3ZbigvxwMEP8nHhvFITpda', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.488668+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.494281+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.495726+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.496330+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00070s] {'pk_1': 31}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.498681+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 31, 'email': 'test_admin_1767014453.093281@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.499455+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.500329+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.500548+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.500696+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.527843+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.529366+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.529790+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'user_id_1': 31, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.534078+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.534683+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00073s] {'user_id': 31, 'name': None, 'email': 'test_admin_1767014453.093281@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.538776+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.544384+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.545593+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.545927+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'pk_1': 31}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.548122+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 31, 'user_id': 31, 'email': 'test_admin_1767014453.093281@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.548355+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.548529+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.548927+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.550349+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.551854+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.552341+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2976s ago] {'email_1': 'test_admin_1767014453.093281@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.785981+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 31, 'email': 'test_admin_1767014453.093281@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.786468+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.787298+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.787576+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.790109+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.638s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:55.791226+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a2b0d29f-d6c5-487e-950a-5b9d23cffbf9"}
{"timestamp": "2025-12-29T13:20:57.839248+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b3b00414-ceac-4e4b-83a2-77d9c2edc87e"}
{"timestamp": "2025-12-29T13:20:57.842248+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 422 (0.003s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b3b00414-ceac-4e4b-83a2-77d9c2edc87e"}
{"timestamp": "2025-12-29T13:20:59.893695+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:20:59.897591+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:20:59.898297+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:20:59.898845+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.644s ago] {'email_1': 'test_admin_1767014457.8438218@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.106697+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.107135+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.623s ago] {'email': 'test_admin_1767014457.8438218@example.com', 'hashed_password': '$2b$12$OCiF/GNzU2RVTdEe1umy3OB/Uyi4fZFSdTvV39edEG5FDjkLDpHGS', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.108883+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.113626+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.114268+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.114659+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.619s ago] {'pk_1': 32}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.116789+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 32, 'email': 'test_admin_1767014457.8438218@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.117048+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.117753+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.117961+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.118090+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.119691+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.120381+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.120887+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.592s ago] {'user_id_1': 32, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.123230+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.123530+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.59s ago] {'user_id': 32, 'name': None, 'email': 'test_admin_1767014457.8438218@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.125458+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.129746+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.130209+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.130545+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.585s ago] {'pk_1': 32}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.133099+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 32, 'user_id': 32, 'email': 'test_admin_1767014457.8438218@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.133328+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.133481+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.133749+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.134798+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.135951+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.136450+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.882s ago] {'email_1': 'test_admin_1767014457.8438218@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.339950+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 32, 'email': 'test_admin_1767014457.8438218@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.340297+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.341151+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.341427+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.342537+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.449s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:00.343596+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2df93a39-7461-431e-b5d4-57abc6ab42a6"}
{"timestamp": "2025-12-29T13:21:02.387886+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "6a4724db-c318-4edb-a6ae-c6926b0e2849"}
{"timestamp": "2025-12-29T13:21:02.389446+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 422 (0.002s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "6a4724db-c318-4edb-a6ae-c6926b0e2849"}
{"timestamp": "2025-12-29T13:21:04.436140+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.438870+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.439509+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.439916+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 9.185s ago] {'email_1': 'test_admin_1767014462.3905213@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.648282+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.648598+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 9.165s ago] {'email': 'test_admin_1767014462.3905213@example.com', 'hashed_password': '$2b$12$V0uu0mrEFQkrAWkpQOmpk.AkT4jKS./t6hSzMgzL4jcxAs25vdOHq', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.650217+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.657266+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.658323+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.658981+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 9.163s ago] {'pk_1': 33}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.662283+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 33, 'email': 'test_admin_1767014462.3905213@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.662846+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.664517+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.665117+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.665523+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.668033+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.669178+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.669793+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 9.141s ago] {'user_id_1': 33, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.673772+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.674377+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 9.141s ago] {'user_id': 33, 'name': None, 'email': 'test_admin_1767014462.3905213@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.677012+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.682144+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.682823+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.683356+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 9.138s ago] {'pk_1': 33}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.687060+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 33, 'user_id': 33, 'email': 'test_admin_1767014462.3905213@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.687615+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.688265+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.689072+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.690710+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.691952+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.692321+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 9.438s ago] {'email_1': 'test_admin_1767014462.3905213@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.910940+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 33, 'email': 'test_admin_1767014462.3905213@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.911259+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.912074+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.912305+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.913484+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.477s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:04.914426+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "386a0c34-dbc8-467d-addf-1b61e0a6e5b7"}
{"timestamp": "2025-12-29T13:21:06.960311+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "5e13db79-ada7-4c2c-836c-fc3c8d2f9452"}
{"timestamp": "2025-12-29T13:21:06.961716+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 422 (0.001s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "5e13db79-ada7-4c2c-836c-fc3c8d2f9452"}
{"timestamp": "2025-12-29T13:21:09.008678+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.011655+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.012608+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.013105+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 13.76s ago] {'email_1': 'test_admin_1767014466.9629178@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.218470+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.219068+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 13.74s ago] {'email': 'test_admin_1767014466.9629178@example.com', 'hashed_password': '$2b$12$EwrFa.yr/ehXnynYmtbfP.J0zu8yRqw.Y2dpBd7hP/6o3Ho7q0huu', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.220846+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.226839+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.227707+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.228131+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 13.73s ago] {'pk_1': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.230189+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 34, 'email': 'test_admin_1767014466.9629178@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.230542+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.231544+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.231868+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.232258+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.234043+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.234645+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.234923+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 13.71s ago] {'user_id_1': 34, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.237033+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.237314+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 13.7s ago] {'user_id': 34, 'name': None, 'email': 'test_admin_1767014466.9629178@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.239542+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.244473+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.245308+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.245835+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 13.7s ago] {'pk_1': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.248246+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 34, 'user_id': 34, 'email': 'test_admin_1767014466.9629178@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.248485+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.248698+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.248989+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.250105+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.251408+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.251934+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 14s ago] {'email_1': 'test_admin_1767014466.9629178@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.455337+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 34, 'email': 'test_admin_1767014466.9629178@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.455731+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.456561+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.456827+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.457879+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.449s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:09.458738+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "de858b2f-3952-4c19-85fc-b6c0af07cd7f"}
{"timestamp": "2025-12-29T13:21:11.514097+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "289df08e-149c-49de-9877-549c866f1dd2"}
{"timestamp": "2025-12-29T13:21:11.515781+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 422 (0.002s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "289df08e-149c-49de-9877-549c866f1dd2"}
{"timestamp": "2025-12-29T13:21:13.564677+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.567523+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.568136+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.568477+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 18.31s ago] {'email_1': 'test_admin_1767014471.5169668@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.773704+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.774336+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 18.29s ago] {'email': 'test_admin_1767014471.5169668@example.com', 'hashed_password': '$2b$12$ITZMKWeTFp1sl2WfnBz7Neza1z1X9kEzUOuBDEXU2No8Ak93TJWK6', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.776501+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.781137+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.781745+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.782258+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 18.29s ago] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.784741+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 35, 'email': 'test_admin_1767014471.5169668@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.785274+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.786147+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.786335+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.786440+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.788174+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.788700+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.789068+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 18.26s ago] {'user_id_1': 35, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.791518+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.791778+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 18.26s ago] {'user_id': 35, 'name': None, 'email': 'test_admin_1767014471.5169668@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.793624+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.797692+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.798586+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.799017+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 18.25s ago] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.801109+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 35, 'user_id': 35, 'email': 'test_admin_1767014471.5169668@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.801402+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.801539+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.801774+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.802842+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.804253+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:13.804763+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 18.55s ago] {'email_1': 'test_admin_1767014471.5169668@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:14.008783+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 35, 'email': 'test_admin_1767014471.5169668@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:14.009132+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:14.009924+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:14.010161+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:14.011326+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.447s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:14.012262+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "db533de7-b41c-4b0d-8cf8-410c7acc5950"}
{"timestamp": "2025-12-29T13:21:16.052239+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "31899cd0-da15-4581-9894-12e369b9ce71"}
{"timestamp": "2025-12-29T13:21:16.054025+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 422 (0.002s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "31899cd0-da15-4581-9894-12e369b9ce71"}
{"timestamp": "2025-12-29T13:23:43.316140+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-29T13:23:45.475175+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-29T13:23:45.475582+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-29T13:23:45.475746+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.475878+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.476066+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.476318+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.476611+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.476794+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.477017+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.477164+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.477344+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.477465+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.477580+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.477695+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.477823+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.477950+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.478133+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.478628+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.478996+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.479330+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.479671+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.479912+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.480125+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.480389+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.480564+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.480694+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.480839+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.481005+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.481214+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.481337+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.481501+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.481619+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.481729+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.481889+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.482153+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.482301+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.482447+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.482651+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.482808+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.482932+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.483044+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.483154+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.483272+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.483381+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.483491+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.483639+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.483932+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.484167+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.484414+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.484741+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.484942+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.485178+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.485487+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.485724+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.485906+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.486147+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.486382+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.486606+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.486769+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.486905+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.487071+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/showtimes/{showtime_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.487349+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.487528+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:23:45.487673+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-29T13:23:45.487952+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-29T13:23:57.436649+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.486717+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.487218+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.489608+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.489900+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.491900+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.492232+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.494611+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.497207+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.497623+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'email_1': 'test_admin_1767014635.389653@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.501140+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "detected 'bcrypt' backend, version '4.0.1'", "module": "bcrypt", "function": "_load_backend_mixin", "line": 625, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.501459+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "'bcrypt' backend lacks $2$ support, enabling workaround", "module": "bcrypt", "function": "_finalize_backend_mixin", "line": 406, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.726674+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.727036+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'email': 'test_admin_1767014635.389653@example.com', 'hashed_password': '$2b$12$bD7ggNRKUBjkp1uFa/N/hu2DxBWNAhPsSx/zNwjXytCE7qmcoxG6m', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.729549+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.735442+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.737065+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.737558+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00064s] {'pk_1': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.739867+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 36, 'email': 'test_admin_1767014635.389653@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.740203+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.741045+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.741220+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.741323+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.758170+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.759736+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.760242+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00066s] {'user_id_1': 36, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.764015+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.764576+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'user_id': 36, 'name': None, 'email': 'test_admin_1767014635.389653@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.767135+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.772784+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.773715+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.774021+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00042s] {'pk_1': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.776224+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 36, 'user_id': 36, 'email': 'test_admin_1767014635.389653@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.776509+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.776710+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.777375+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.778837+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.780126+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.780532+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2835s ago] {'email_1': 'test_admin_1767014635.389653@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.990363+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 36, 'email': 'test_admin_1767014635.389653@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.990653+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.991420+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.991658+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.992953+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.557s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:23:57.994079+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "214f4a82-2fd4-413c-957d-a64d1c7ed70c"}
{"timestamp": "2025-12-29T13:24:00.042719+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "8008d3fb-98e1-40cf-8387-076b8006d3c1"}
{"timestamp": "2025-12-29T13:24:00.044683+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 422 (0.002s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "8008d3fb-98e1-40cf-8387-076b8006d3c1"}
{"timestamp": "2025-12-29T13:24:02.091943+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.095479+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.096454+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.097081+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.6s ago] {'email_1': 'test_admin_1767014640.046023@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.306707+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.307225+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.581s ago] {'email': 'test_admin_1767014640.046023@example.com', 'hashed_password': '$2b$12$Zmk7HjANGxkmR8xRvRsar.N3M4Vodu3eknUbmTJwwFBCC1xIt5kAO', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.309266+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.314131+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.315053+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.315579+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.579s ago] {'pk_1': 37}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.317832+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 37, 'email': 'test_admin_1767014640.046023@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.318196+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.319124+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.319480+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.319850+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.321692+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.322269+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.322604+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.563s ago] {'user_id_1': 37, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.325379+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.325886+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.562s ago] {'user_id': 37, 'name': None, 'email': 'test_admin_1767014640.046023@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.327891+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.332126+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.332889+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.333472+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.56s ago] {'pk_1': 37}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.335980+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 37, 'user_id': 37, 'email': 'test_admin_1767014640.046023@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.336210+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.336454+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.336865+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.338223+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.339386+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.339735+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.843s ago] {'email_1': 'test_admin_1767014640.046023@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.544256+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 37, 'email': 'test_admin_1767014640.046023@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.544558+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.545355+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.545726+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.546969+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.456s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:02.548055+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "adf38d1d-400f-4790-8b4d-9c3c9b179c05"}
{"timestamp": "2025-12-29T13:24:04.587981+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "abf54f30-37ad-4a33-b61f-96248303d35a"}
{"timestamp": "2025-12-29T13:24:04.589734+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 422 (0.002s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "abf54f30-37ad-4a33-b61f-96248303d35a"}
{"timestamp": "2025-12-29T13:24:06.630054+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.632884+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.633567+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.633929+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 9.137s ago] {'email_1': 'test_admin_1767014644.5912158@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.837980+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.838270+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 9.112s ago] {'email': 'test_admin_1767014644.5912158@example.com', 'hashed_password': '$2b$12$KK5jKIfnoghF8idBHCvxUuJ.tnHAU2zzQHVeqhdRbP1edmLG5A7ne', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.839936+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.844282+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.844993+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.845454+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 9.109s ago] {'pk_1': 38}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.847721+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 38, 'email': 'test_admin_1767014644.5912158@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.848154+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.849183+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.849415+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.849533+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.851179+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.851781+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.852046+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 9.093s ago] {'user_id_1': 38, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.854863+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.855443+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 9.092s ago] {'user_id': 38, 'name': None, 'email': 'test_admin_1767014644.5912158@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.857649+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.862874+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.863752+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.864223+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 9.091s ago] {'pk_1': 38}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.866613+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 38, 'user_id': 38, 'email': 'test_admin_1767014644.5912158@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.866861+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.867126+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.867421+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.868731+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.870096+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:06.870571+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 9.374s ago] {'email_1': 'test_admin_1767014644.5912158@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:07.075612+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 38, 'email': 'test_admin_1767014644.5912158@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:07.075997+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:07.076899+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:07.077167+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:07.078406+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.448s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:07.079425+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "51f35335-f36e-4f1c-b24e-55c9888078a5"}
{"timestamp": "2025-12-29T13:24:09.135217+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "dab8a5e9-8b0e-461a-907b-fbe1e48f4f53"}
{"timestamp": "2025-12-29T13:24:09.136678+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 422 (0.001s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "dab8a5e9-8b0e-461a-907b-fbe1e48f4f53"}
{"timestamp": "2025-12-29T13:24:11.179709+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.183254+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.183905+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.184360+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 13.69s ago] {'email_1': 'test_admin_1767014649.1378145@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.391219+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.391599+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 13.67s ago] {'email': 'test_admin_1767014649.1378145@example.com', 'hashed_password': '$2b$12$uBBnM8UAXU6uQICowNbBZ.KAR2VTOCAeVqfo1LQbSFSt/7QI7B6nq', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.393296+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.398547+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.399141+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.399416+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 13.66s ago] {'pk_1': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.401401+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 39, 'email': 'test_admin_1767014649.1378145@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.401644+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.402302+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.402476+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.402587+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.404188+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.404804+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.405075+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 13.65s ago] {'user_id_1': 39, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.407464+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.407722+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 13.64s ago] {'user_id': 39, 'name': None, 'email': 'test_admin_1767014649.1378145@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.409383+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.413763+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.414368+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.414671+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 13.64s ago] {'pk_1': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.416667+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 39, 'user_id': 39, 'email': 'test_admin_1767014649.1378145@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.416966+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.417090+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.417389+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.418568+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.419675+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.419961+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 13.92s ago] {'email_1': 'test_admin_1767014649.1378145@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.623172+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 39, 'email': 'test_admin_1767014649.1378145@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.623520+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.624424+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.624867+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.626176+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.447s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:11.627141+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "035b7da8-5aed-4245-a3ae-c7066b912170"}
{"timestamp": "2025-12-29T13:24:13.679299+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "561b8d3f-3bef-4cfc-ad5b-042324e1e13a"}
{"timestamp": "2025-12-29T13:24:13.681051+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 422 (0.002s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "561b8d3f-3bef-4cfc-ad5b-042324e1e13a"}
{"timestamp": "2025-12-29T13:24:15.730214+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.733190+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.733855+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.734254+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 18.24s ago] {'email_1': 'test_admin_1767014653.6823537@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.941021+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.941708+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 18.22s ago] {'email': 'test_admin_1767014653.6823537@example.com', 'hashed_password': '$2b$12$iItW4c0AvVMNVAqEGAWutO7DwaG8WQmYU7302/Nilo5voQkXTYDae', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.943511+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.948389+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.949204+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.949586+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 18.21s ago] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.951568+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 40, 'email': 'test_admin_1767014653.6823537@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.951999+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.952980+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.953237+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.953499+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.955681+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.956416+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.956733+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 18.2s ago] {'user_id_1': 40, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.959293+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.959909+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 18.2s ago] {'user_id': 40, 'name': None, 'email': 'test_admin_1767014653.6823537@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.961675+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.965855+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.966610+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.967047+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 18.19s ago] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.969138+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 40, 'user_id': 40, 'email': 'test_admin_1767014653.6823537@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.969381+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.969527+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.969753+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.970801+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.971995+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:15.972601+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 18.48s ago] {'email_1': 'test_admin_1767014653.6823537@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:16.177012+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 40, 'email': 'test_admin_1767014653.6823537@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:16.177256+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:16.177978+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:16.178185+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:16.179220+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.449s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:16.180269+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "384ac2a1-03b9-4780-81ea-cd253e570b41"}
{"timestamp": "2025-12-29T13:24:18.219777+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "c5166f91-2f09-47b8-add4-b347789ba889"}
{"timestamp": "2025-12-29T13:24:18.221524+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 422 (0.002s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "c5166f91-2f09-47b8-add4-b347789ba889"}
{"timestamp": "2025-12-29T13:25:42.204800+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-29T13:25:44.561033+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-29T13:25:44.561374+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-29T13:25:44.561530+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.561673+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.561885+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.562250+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.562482+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.562625+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.562769+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.562968+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.563141+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.563308+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.563433+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.563583+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.563767+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.563890+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.564004+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.564118+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.564232+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.564344+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.564456+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.564567+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.564679+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.564790+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.565015+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.565130+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.565242+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.565373+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.565589+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.565823+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.565983+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.566185+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.566338+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.566543+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.566683+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.566842+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.566988+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.567186+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.567376+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.567543+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.567771+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.567926+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.568058+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.568199+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.568330+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.568483+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.568628+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.568816+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.568973+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.569138+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.569268+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.569436+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.569590+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.569720+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.569843+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.569991+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.570267+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.570490+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.570633+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.570887+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.571075+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/showtimes/{showtime_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.571209+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.571435+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:25:44.571613+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-29T13:25:44.571773+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-29T13:26:03.234347+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.292029+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.292584+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.295816+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.296448+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.299270+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.299732+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.302083+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.304761+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.305327+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'email_1': 'test_admin_1767014761.1741905@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.308968+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "detected 'bcrypt' backend, version '4.0.1'", "module": "bcrypt", "function": "_load_backend_mixin", "line": 625, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.309425+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "'bcrypt' backend lacks $2$ support, enabling workaround", "module": "bcrypt", "function": "_finalize_backend_mixin", "line": 406, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.535888+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.536331+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00065s] {'email': 'test_admin_1767014761.1741905@example.com', 'hashed_password': '$2b$12$AsS6sSd0MQEnPK1EUqPl2OmgqRmYwryWtN4TJADY0IUsAi3H4VVA2', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.538462+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.545533+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.547039+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.547500+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00062s] {'pk_1': 41}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.550502+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 41, 'email': 'test_admin_1767014761.1741905@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.551009+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.552155+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.552475+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.552679+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.583750+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.585307+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.585709+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'user_id_1': 41, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.589746+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.590306+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00069s] {'user_id': 41, 'name': None, 'email': 'test_admin_1767014761.1741905@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.593295+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.597671+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.599269+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.599808+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00082s] {'pk_1': 41}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.602199+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 41, 'user_id': 41, 'email': 'test_admin_1767014761.1741905@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.602522+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.602760+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.603235+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.604618+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.606212+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.606742+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.3021s ago] {'email_1': 'test_admin_1767014761.1741905@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.830274+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 41, 'email': 'test_admin_1767014761.1741905@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.830630+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.831498+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.831788+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.833128+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.599s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:03.834408+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d33f838f-5069-4950-aed6-b510d8ec9bb5"}
{"timestamp": "2025-12-29T13:26:05.873539+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "a86d53c1-0b5f-437f-b2ea-10fa925e7d0e"}
{"timestamp": "2025-12-29T13:26:05.876877+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a86d53c1-0b5f-437f-b2ea-10fa925e7d0e"}
{"timestamp": "2025-12-29T13:26:05.878655+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a86d53c1-0b5f-437f-b2ea-10fa925e7d0e"}
{"timestamp": "2025-12-29T13:26:05.879157+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'title_1': 'Test Movie 1767014761.1741905'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a86d53c1-0b5f-437f-b2ea-10fa925e7d0e"}
{"timestamp": "2025-12-29T13:26:05.883809+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a86d53c1-0b5f-437f-b2ea-10fa925e7d0e"}
{"timestamp": "2025-12-29T13:26:05.884378+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00063s] {'title': 'Test Movie 1767014761.1741905', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a86d53c1-0b5f-437f-b2ea-10fa925e7d0e"}
{"timestamp": "2025-12-29T13:26:05.886701+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "a86d53c1-0b5f-437f-b2ea-10fa925e7d0e"}
{"timestamp": "2025-12-29T13:26:05.892147+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a86d53c1-0b5f-437f-b2ea-10fa925e7d0e"}
{"timestamp": "2025-12-29T13:26:05.893438+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a86d53c1-0b5f-437f-b2ea-10fa925e7d0e"}
{"timestamp": "2025-12-29T13:26:05.893978+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00077s] {'pk_1': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a86d53c1-0b5f-437f-b2ea-10fa925e7d0e"}
{"timestamp": "2025-12-29T13:26:05.896684+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 28}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "a86d53c1-0b5f-437f-b2ea-10fa925e7d0e"}
{"timestamp": "2025-12-29T13:26:05.897090+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "a86d53c1-0b5f-437f-b2ea-10fa925e7d0e"}
{"timestamp": "2025-12-29T13:26:05.898209+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "a86d53c1-0b5f-437f-b2ea-10fa925e7d0e"}
{"timestamp": "2025-12-29T13:26:05.898524+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "a86d53c1-0b5f-437f-b2ea-10fa925e7d0e"}
{"timestamp": "2025-12-29T13:26:05.900313+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.027s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "a86d53c1-0b5f-437f-b2ea-10fa925e7d0e"}
{"timestamp": "2025-12-29T13:26:05.901399+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a86d53c1-0b5f-437f-b2ea-10fa925e7d0e"}
{"timestamp": "2025-12-29T13:26:07.957292+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "463f4179-6b59-46ac-8e4b-a2e5534e259f"}
{"timestamp": "2025-12-29T13:26:07.960701+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "463f4179-6b59-46ac-8e4b-a2e5534e259f"}
{"timestamp": "2025-12-29T13:26:07.962006+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "463f4179-6b59-46ac-8e4b-a2e5534e259f"}
{"timestamp": "2025-12-29T13:26:07.962480+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'name_1': 'Test Layout 1767014761.1741905'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "463f4179-6b59-46ac-8e4b-a2e5534e259f"}
{"timestamp": "2025-12-29T13:26:07.966337+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "463f4179-6b59-46ac-8e4b-a2e5534e259f"}
{"timestamp": "2025-12-29T13:26:07.966752+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'name': 'Test Layout 1767014761.1741905', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "463f4179-6b59-46ac-8e4b-a2e5534e259f"}
{"timestamp": "2025-12-29T13:26:07.969052+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "463f4179-6b59-46ac-8e4b-a2e5534e259f"}
{"timestamp": "2025-12-29T13:26:07.973515+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "463f4179-6b59-46ac-8e4b-a2e5534e259f"}
{"timestamp": "2025-12-29T13:26:07.974553+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "463f4179-6b59-46ac-8e4b-a2e5534e259f"}
{"timestamp": "2025-12-29T13:26:07.975140+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'pk_1': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "463f4179-6b59-46ac-8e4b-a2e5534e259f"}
{"timestamp": "2025-12-29T13:26:07.977554+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 27}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "463f4179-6b59-46ac-8e4b-a2e5534e259f"}
{"timestamp": "2025-12-29T13:26:07.977987+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "463f4179-6b59-46ac-8e4b-a2e5534e259f"}
{"timestamp": "2025-12-29T13:26:07.978833+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "463f4179-6b59-46ac-8e4b-a2e5534e259f"}
{"timestamp": "2025-12-29T13:26:07.979086+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "463f4179-6b59-46ac-8e4b-a2e5534e259f"}
{"timestamp": "2025-12-29T13:26:07.980426+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.023s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "463f4179-6b59-46ac-8e4b-a2e5534e259f"}
{"timestamp": "2025-12-29T13:26:07.981647+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "463f4179-6b59-46ac-8e4b-a2e5534e259f"}
{"timestamp": "2025-12-29T13:26:10.016988+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "bc63e413-09a8-4627-921e-2224c26f0acb"}
{"timestamp": "2025-12-29T13:26:10.019691+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bc63e413-09a8-4627-921e-2224c26f0acb"}
{"timestamp": "2025-12-29T13:26:10.021754+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bc63e413-09a8-4627-921e-2224c26f0acb"}
{"timestamp": "2025-12-29T13:26:10.022311+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00101s] {'name_1': 'Test Screen 1767014761.1741905', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bc63e413-09a8-4627-921e-2224c26f0acb"}
{"timestamp": "2025-12-29T13:26:10.026554+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bc63e413-09a8-4627-921e-2224c26f0acb"}
{"timestamp": "2025-12-29T13:26:10.027074+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00070s] {'id_1': 27, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bc63e413-09a8-4627-921e-2224c26f0acb"}
{"timestamp": "2025-12-29T13:26:10.034352+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bc63e413-09a8-4627-921e-2224c26f0acb"}
{"timestamp": "2025-12-29T13:26:10.035004+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00063s] {'name': 'Test Screen 1767014761.1741905', 'capacity': 150, 'seat_layout_id': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bc63e413-09a8-4627-921e-2224c26f0acb"}
{"timestamp": "2025-12-29T13:26:10.037622+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "bc63e413-09a8-4627-921e-2224c26f0acb"}
{"timestamp": "2025-12-29T13:26:10.043306+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bc63e413-09a8-4627-921e-2224c26f0acb"}
{"timestamp": "2025-12-29T13:26:10.044510+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bc63e413-09a8-4627-921e-2224c26f0acb"}
{"timestamp": "2025-12-29T13:26:10.045030+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'pk_1': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bc63e413-09a8-4627-921e-2224c26f0acb"}
{"timestamp": "2025-12-29T13:26:10.047787+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 27}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "bc63e413-09a8-4627-921e-2224c26f0acb"}
{"timestamp": "2025-12-29T13:26:10.048186+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "bc63e413-09a8-4627-921e-2224c26f0acb"}
{"timestamp": "2025-12-29T13:26:10.049137+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "bc63e413-09a8-4627-921e-2224c26f0acb"}
{"timestamp": "2025-12-29T13:26:10.049487+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "bc63e413-09a8-4627-921e-2224c26f0acb"}
{"timestamp": "2025-12-29T13:26:10.051300+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.034s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "bc63e413-09a8-4627-921e-2224c26f0acb"}
{"timestamp": "2025-12-29T13:26:10.052319+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "bc63e413-09a8-4627-921e-2224c26f0acb"}
{"timestamp": "2025-12-29T13:26:12.091761+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "8d49d493-daf1-4dd2-a3c8-56e9756e7930"}
{"timestamp": "2025-12-29T13:26:12.095169+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 422 (0.003s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "8d49d493-daf1-4dd2-a3c8-56e9756e7930"}
{"timestamp": "2025-12-29T13:26:14.138689+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.141758+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.142604+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.143089+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.84s ago] {'email_1': 'test_admin_1767014772.096821@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.355958+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.356420+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.82s ago] {'email': 'test_admin_1767014772.096821@example.com', 'hashed_password': '$2b$12$bkJJtyxk1zdIXH7iie9HPOCwCZ6o1iDnsPlfXJXGKfi3vfvqwN/8a', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.358496+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.363959+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.364655+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.365257+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.82s ago] {'pk_1': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.367307+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 42, 'email': 'test_admin_1767014772.096821@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.367659+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.368504+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.368759+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.369078+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.370859+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.371631+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.372066+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.79s ago] {'user_id_1': 42, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.374455+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.374941+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.79s ago] {'user_id': 42, 'name': None, 'email': 'test_admin_1767014772.096821@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.377069+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.382319+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.383453+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.384128+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.79s ago] {'pk_1': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.386600+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 42, 'user_id': 42, 'email': 'test_admin_1767014772.096821@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.386956+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.387222+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.387751+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.389392+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.391052+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.391564+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 11.09s ago] {'email_1': 'test_admin_1767014772.096821@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.597113+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 42, 'email': 'test_admin_1767014772.096821@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.597534+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.598469+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.598777+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.599861+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.461s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:14.600867+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a6ef23f6-9e7b-4975-9032-996f00fc2a3d"}
{"timestamp": "2025-12-29T13:26:16.639406+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "d2741109-3da4-44d9-b11c-c86adac587a9"}
{"timestamp": "2025-12-29T13:26:16.642115+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d2741109-3da4-44d9-b11c-c86adac587a9"}
{"timestamp": "2025-12-29T13:26:16.642797+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d2741109-3da4-44d9-b11c-c86adac587a9"}
{"timestamp": "2025-12-29T13:26:16.643217+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.76s ago] {'title_1': 'Test Movie 1767014772.096821'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d2741109-3da4-44d9-b11c-c86adac587a9"}
{"timestamp": "2025-12-29T13:26:16.645918+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d2741109-3da4-44d9-b11c-c86adac587a9"}
{"timestamp": "2025-12-29T13:26:16.646860+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.76s ago] {'title': 'Test Movie 1767014772.096821', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d2741109-3da4-44d9-b11c-c86adac587a9"}
{"timestamp": "2025-12-29T13:26:16.649371+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "d2741109-3da4-44d9-b11c-c86adac587a9"}
{"timestamp": "2025-12-29T13:26:16.655168+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d2741109-3da4-44d9-b11c-c86adac587a9"}
{"timestamp": "2025-12-29T13:26:16.655962+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d2741109-3da4-44d9-b11c-c86adac587a9"}
{"timestamp": "2025-12-29T13:26:16.656470+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.76s ago] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d2741109-3da4-44d9-b11c-c86adac587a9"}
{"timestamp": "2025-12-29T13:26:16.658691+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 29}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "d2741109-3da4-44d9-b11c-c86adac587a9"}
{"timestamp": "2025-12-29T13:26:16.659018+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "d2741109-3da4-44d9-b11c-c86adac587a9"}
{"timestamp": "2025-12-29T13:26:16.659975+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "d2741109-3da4-44d9-b11c-c86adac587a9"}
{"timestamp": "2025-12-29T13:26:16.660274+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "d2741109-3da4-44d9-b11c-c86adac587a9"}
{"timestamp": "2025-12-29T13:26:16.661813+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "d2741109-3da4-44d9-b11c-c86adac587a9"}
{"timestamp": "2025-12-29T13:26:16.662928+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d2741109-3da4-44d9-b11c-c86adac587a9"}
{"timestamp": "2025-12-29T13:26:18.709441+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "d78f539f-44c4-40a8-8abe-0b4181cfe29a"}
{"timestamp": "2025-12-29T13:26:18.712199+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d78f539f-44c4-40a8-8abe-0b4181cfe29a"}
{"timestamp": "2025-12-29T13:26:18.712882+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d78f539f-44c4-40a8-8abe-0b4181cfe29a"}
{"timestamp": "2025-12-29T13:26:18.713321+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.75s ago] {'name_1': 'Test Layout 1767014772.096821'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d78f539f-44c4-40a8-8abe-0b4181cfe29a"}
{"timestamp": "2025-12-29T13:26:18.715644+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d78f539f-44c4-40a8-8abe-0b4181cfe29a"}
{"timestamp": "2025-12-29T13:26:18.716116+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.75s ago] {'name': 'Test Layout 1767014772.096821', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d78f539f-44c4-40a8-8abe-0b4181cfe29a"}
{"timestamp": "2025-12-29T13:26:18.719762+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "d78f539f-44c4-40a8-8abe-0b4181cfe29a"}
{"timestamp": "2025-12-29T13:26:18.723912+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d78f539f-44c4-40a8-8abe-0b4181cfe29a"}
{"timestamp": "2025-12-29T13:26:18.724792+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d78f539f-44c4-40a8-8abe-0b4181cfe29a"}
{"timestamp": "2025-12-29T13:26:18.725281+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.75s ago] {'pk_1': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d78f539f-44c4-40a8-8abe-0b4181cfe29a"}
{"timestamp": "2025-12-29T13:26:18.727876+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 28}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "d78f539f-44c4-40a8-8abe-0b4181cfe29a"}
{"timestamp": "2025-12-29T13:26:18.728188+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "d78f539f-44c4-40a8-8abe-0b4181cfe29a"}
{"timestamp": "2025-12-29T13:26:18.729078+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "d78f539f-44c4-40a8-8abe-0b4181cfe29a"}
{"timestamp": "2025-12-29T13:26:18.729336+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "d78f539f-44c4-40a8-8abe-0b4181cfe29a"}
{"timestamp": "2025-12-29T13:26:18.730940+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "d78f539f-44c4-40a8-8abe-0b4181cfe29a"}
{"timestamp": "2025-12-29T13:26:18.732076+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d78f539f-44c4-40a8-8abe-0b4181cfe29a"}
{"timestamp": "2025-12-29T13:26:20.752825+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "9567e0eb-abce-4b01-8b39-9e11f7ea2733"}
{"timestamp": "2025-12-29T13:26:20.755653+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9567e0eb-abce-4b01-8b39-9e11f7ea2733"}
{"timestamp": "2025-12-29T13:26:20.756381+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9567e0eb-abce-4b01-8b39-9e11f7ea2733"}
{"timestamp": "2025-12-29T13:26:20.756842+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.74s ago] {'name_1': 'Test Screen 1767014772.096821', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9567e0eb-abce-4b01-8b39-9e11f7ea2733"}
{"timestamp": "2025-12-29T13:26:20.759649+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9567e0eb-abce-4b01-8b39-9e11f7ea2733"}
{"timestamp": "2025-12-29T13:26:20.760173+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.73s ago] {'id_1': 28, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9567e0eb-abce-4b01-8b39-9e11f7ea2733"}
{"timestamp": "2025-12-29T13:26:20.762243+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9567e0eb-abce-4b01-8b39-9e11f7ea2733"}
{"timestamp": "2025-12-29T13:26:20.762737+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.73s ago] {'name': 'Test Screen 1767014772.096821', 'capacity': 150, 'seat_layout_id': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9567e0eb-abce-4b01-8b39-9e11f7ea2733"}
{"timestamp": "2025-12-29T13:26:20.764719+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "9567e0eb-abce-4b01-8b39-9e11f7ea2733"}
{"timestamp": "2025-12-29T13:26:20.769297+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9567e0eb-abce-4b01-8b39-9e11f7ea2733"}
{"timestamp": "2025-12-29T13:26:20.769966+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9567e0eb-abce-4b01-8b39-9e11f7ea2733"}
{"timestamp": "2025-12-29T13:26:20.770494+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.73s ago] {'pk_1': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9567e0eb-abce-4b01-8b39-9e11f7ea2733"}
{"timestamp": "2025-12-29T13:26:20.773009+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 28}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "9567e0eb-abce-4b01-8b39-9e11f7ea2733"}
{"timestamp": "2025-12-29T13:26:20.773406+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "9567e0eb-abce-4b01-8b39-9e11f7ea2733"}
{"timestamp": "2025-12-29T13:26:20.774156+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "9567e0eb-abce-4b01-8b39-9e11f7ea2733"}
{"timestamp": "2025-12-29T13:26:20.774396+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "9567e0eb-abce-4b01-8b39-9e11f7ea2733"}
{"timestamp": "2025-12-29T13:26:20.775467+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.023s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "9567e0eb-abce-4b01-8b39-9e11f7ea2733"}
{"timestamp": "2025-12-29T13:26:20.776496+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "9567e0eb-abce-4b01-8b39-9e11f7ea2733"}
{"timestamp": "2025-12-29T13:26:22.835296+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "ae2fc372-c039-441c-a564-c70b3e65d32a"}
{"timestamp": "2025-12-29T13:26:22.837431+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 422 (0.002s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "ae2fc372-c039-441c-a564-c70b3e65d32a"}
{"timestamp": "2025-12-29T13:26:24.881264+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:24.884327+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:24.885043+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:24.885601+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 21.58s ago] {'email_1': 'test_admin_1767014782.8390186@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.103178+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.103683+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 21.57s ago] {'email': 'test_admin_1767014782.8390186@example.com', 'hashed_password': '$2b$12$7B/9N0t/kxlvIo9PJwkPXeZrJY6dJuDI..BzT/NvcAKbOdJoGTg62', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.105442+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.110375+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.111272+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.111899+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 21.57s ago] {'pk_1': 43}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.114286+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 43, 'email': 'test_admin_1767014782.8390186@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.114596+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.115387+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.115644+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.115847+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.117635+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.118420+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.118819+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 21.53s ago] {'user_id_1': 43, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.121172+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.121576+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 21.53s ago] {'user_id': 43, 'name': None, 'email': 'test_admin_1767014782.8390186@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.123244+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.127031+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.128011+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.128451+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 21.53s ago] {'pk_1': 43}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.130561+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 43, 'user_id': 43, 'email': 'test_admin_1767014782.8390186@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.130870+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.131102+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.131441+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.132349+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.133747+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.134278+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 21.83s ago] {'email_1': 'test_admin_1767014782.8390186@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.339770+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 43, 'email': 'test_admin_1767014782.8390186@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.340368+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.341342+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.341596+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.342791+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.462s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:25.343791+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0c1673ca-e81f-4246-b5ae-1ca713a670b9"}
{"timestamp": "2025-12-29T13:26:27.392735+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "139a9b21-3de3-4b3d-84d4-616af27f87c8"}
{"timestamp": "2025-12-29T13:26:27.395245+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "139a9b21-3de3-4b3d-84d4-616af27f87c8"}
{"timestamp": "2025-12-29T13:26:27.395898+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "139a9b21-3de3-4b3d-84d4-616af27f87c8"}
{"timestamp": "2025-12-29T13:26:27.396373+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 21.52s ago] {'title_1': 'Test Movie 1767014782.8390186'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "139a9b21-3de3-4b3d-84d4-616af27f87c8"}
{"timestamp": "2025-12-29T13:26:27.399438+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "139a9b21-3de3-4b3d-84d4-616af27f87c8"}
{"timestamp": "2025-12-29T13:26:27.399997+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 21.52s ago] {'title': 'Test Movie 1767014782.8390186', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "139a9b21-3de3-4b3d-84d4-616af27f87c8"}
{"timestamp": "2025-12-29T13:26:27.401746+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "139a9b21-3de3-4b3d-84d4-616af27f87c8"}
{"timestamp": "2025-12-29T13:26:27.406160+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "139a9b21-3de3-4b3d-84d4-616af27f87c8"}
{"timestamp": "2025-12-29T13:26:27.407024+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "139a9b21-3de3-4b3d-84d4-616af27f87c8"}
{"timestamp": "2025-12-29T13:26:27.407619+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 21.51s ago] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "139a9b21-3de3-4b3d-84d4-616af27f87c8"}
{"timestamp": "2025-12-29T13:26:27.409870+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 30}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "139a9b21-3de3-4b3d-84d4-616af27f87c8"}
{"timestamp": "2025-12-29T13:26:27.410184+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "139a9b21-3de3-4b3d-84d4-616af27f87c8"}
{"timestamp": "2025-12-29T13:26:27.411125+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "139a9b21-3de3-4b3d-84d4-616af27f87c8"}
{"timestamp": "2025-12-29T13:26:27.411476+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "139a9b21-3de3-4b3d-84d4-616af27f87c8"}
{"timestamp": "2025-12-29T13:26:27.412970+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.020s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "139a9b21-3de3-4b3d-84d4-616af27f87c8"}
{"timestamp": "2025-12-29T13:26:27.414013+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "139a9b21-3de3-4b3d-84d4-616af27f87c8"}
{"timestamp": "2025-12-29T13:26:29.457509+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "2d88262b-196b-4958-bf8c-074f3af700fa"}
{"timestamp": "2025-12-29T13:26:29.460461+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2d88262b-196b-4958-bf8c-074f3af700fa"}
{"timestamp": "2025-12-29T13:26:29.461087+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2d88262b-196b-4958-bf8c-074f3af700fa"}
{"timestamp": "2025-12-29T13:26:29.461525+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 21.5s ago] {'name_1': 'Test Layout 1767014782.8390186'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2d88262b-196b-4958-bf8c-074f3af700fa"}
{"timestamp": "2025-12-29T13:26:29.464031+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2d88262b-196b-4958-bf8c-074f3af700fa"}
{"timestamp": "2025-12-29T13:26:29.464522+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 21.5s ago] {'name': 'Test Layout 1767014782.8390186', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2d88262b-196b-4958-bf8c-074f3af700fa"}
{"timestamp": "2025-12-29T13:26:29.466270+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2d88262b-196b-4958-bf8c-074f3af700fa"}
{"timestamp": "2025-12-29T13:26:29.471460+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2d88262b-196b-4958-bf8c-074f3af700fa"}
{"timestamp": "2025-12-29T13:26:29.472332+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2d88262b-196b-4958-bf8c-074f3af700fa"}
{"timestamp": "2025-12-29T13:26:29.472810+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 21.5s ago] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2d88262b-196b-4958-bf8c-074f3af700fa"}
{"timestamp": "2025-12-29T13:26:29.475295+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 29}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "2d88262b-196b-4958-bf8c-074f3af700fa"}
{"timestamp": "2025-12-29T13:26:29.475626+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "2d88262b-196b-4958-bf8c-074f3af700fa"}
{"timestamp": "2025-12-29T13:26:29.476452+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2d88262b-196b-4958-bf8c-074f3af700fa"}
{"timestamp": "2025-12-29T13:26:29.476714+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "2d88262b-196b-4958-bf8c-074f3af700fa"}
{"timestamp": "2025-12-29T13:26:29.478198+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.021s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "2d88262b-196b-4958-bf8c-074f3af700fa"}
{"timestamp": "2025-12-29T13:26:29.479181+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2d88262b-196b-4958-bf8c-074f3af700fa"}
{"timestamp": "2025-12-29T13:26:31.529467+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "d9484162-e97b-4f32-9497-5fd1146aceec"}
{"timestamp": "2025-12-29T13:26:31.532585+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d9484162-e97b-4f32-9497-5fd1146aceec"}
{"timestamp": "2025-12-29T13:26:31.533376+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d9484162-e97b-4f32-9497-5fd1146aceec"}
{"timestamp": "2025-12-29T13:26:31.533817+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 21.51s ago] {'name_1': 'Test Screen 1767014782.8390186', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d9484162-e97b-4f32-9497-5fd1146aceec"}
{"timestamp": "2025-12-29T13:26:31.536548+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d9484162-e97b-4f32-9497-5fd1146aceec"}
{"timestamp": "2025-12-29T13:26:31.537141+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 21.51s ago] {'id_1': 29, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d9484162-e97b-4f32-9497-5fd1146aceec"}
{"timestamp": "2025-12-29T13:26:31.539402+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d9484162-e97b-4f32-9497-5fd1146aceec"}
{"timestamp": "2025-12-29T13:26:31.539914+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 21.51s ago] {'name': 'Test Screen 1767014782.8390186', 'capacity': 150, 'seat_layout_id': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d9484162-e97b-4f32-9497-5fd1146aceec"}
{"timestamp": "2025-12-29T13:26:31.541792+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "d9484162-e97b-4f32-9497-5fd1146aceec"}
{"timestamp": "2025-12-29T13:26:31.546521+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d9484162-e97b-4f32-9497-5fd1146aceec"}
{"timestamp": "2025-12-29T13:26:31.547262+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d9484162-e97b-4f32-9497-5fd1146aceec"}
{"timestamp": "2025-12-29T13:26:31.547781+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 21.5s ago] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d9484162-e97b-4f32-9497-5fd1146aceec"}
{"timestamp": "2025-12-29T13:26:31.550035+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 29}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "d9484162-e97b-4f32-9497-5fd1146aceec"}
{"timestamp": "2025-12-29T13:26:31.550799+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "d9484162-e97b-4f32-9497-5fd1146aceec"}
{"timestamp": "2025-12-29T13:26:31.552012+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "d9484162-e97b-4f32-9497-5fd1146aceec"}
{"timestamp": "2025-12-29T13:26:31.552414+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "d9484162-e97b-4f32-9497-5fd1146aceec"}
{"timestamp": "2025-12-29T13:26:31.554203+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.025s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "d9484162-e97b-4f32-9497-5fd1146aceec"}
{"timestamp": "2025-12-29T13:26:31.555399+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d9484162-e97b-4f32-9497-5fd1146aceec"}
{"timestamp": "2025-12-29T13:26:33.607775+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "6bdd5fe4-b6c2-4aff-8235-031f363ad1b5"}
{"timestamp": "2025-12-29T13:26:33.609806+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 422 (0.002s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "6bdd5fe4-b6c2-4aff-8235-031f363ad1b5"}
{"timestamp": "2025-12-29T13:26:35.639848+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.642655+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.643295+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.643711+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.34s ago] {'email_1': 'test_admin_1767014793.6117089@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.854908+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.855516+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.32s ago] {'email': 'test_admin_1767014793.6117089@example.com', 'hashed_password': '$2b$12$0q1womj8WXmEboCE.mtC8OwlM2ed2wAZG9U7K/SmznovZ8Lvj4ZFa', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.857803+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.862908+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.863737+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.864381+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.32s ago] {'pk_1': 44}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.866531+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 44, 'email': 'test_admin_1767014793.6117089@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.866845+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.867700+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.867993+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.868252+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.870308+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.871221+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.871872+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.29s ago] {'user_id_1': 44, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.874819+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.875311+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.29s ago] {'user_id': 44, 'name': None, 'email': 'test_admin_1767014793.6117089@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.877395+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.881904+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.882696+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.883204+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.28s ago] {'pk_1': 44}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.885429+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 44, 'user_id': 44, 'email': 'test_admin_1767014793.6117089@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.885759+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.885939+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.886396+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.887755+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.889184+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:35.889627+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.59s ago] {'email_1': 'test_admin_1767014793.6117089@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:36.108851+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 44, 'email': 'test_admin_1767014793.6117089@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:36.109228+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:36.110259+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:36.110552+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:36.112053+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.472s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:36.113269+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2398f4c6-94f0-492e-ba5b-69efe9742472"}
{"timestamp": "2025-12-29T13:26:38.156398+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "2ff9b0f3-217d-4511-ab5d-a8f22fb4fa77"}
{"timestamp": "2025-12-29T13:26:38.160026+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2ff9b0f3-217d-4511-ab5d-a8f22fb4fa77"}
{"timestamp": "2025-12-29T13:26:38.160929+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ff9b0f3-217d-4511-ab5d-a8f22fb4fa77"}
{"timestamp": "2025-12-29T13:26:38.161506+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.28s ago] {'title_1': 'Test Movie 1767014793.6117089'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ff9b0f3-217d-4511-ab5d-a8f22fb4fa77"}
{"timestamp": "2025-12-29T13:26:38.165526+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ff9b0f3-217d-4511-ab5d-a8f22fb4fa77"}
{"timestamp": "2025-12-29T13:26:38.166655+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.28s ago] {'title': 'Test Movie 1767014793.6117089', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ff9b0f3-217d-4511-ab5d-a8f22fb4fa77"}
{"timestamp": "2025-12-29T13:26:38.169452+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2ff9b0f3-217d-4511-ab5d-a8f22fb4fa77"}
{"timestamp": "2025-12-29T13:26:38.175250+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2ff9b0f3-217d-4511-ab5d-a8f22fb4fa77"}
{"timestamp": "2025-12-29T13:26:38.176393+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ff9b0f3-217d-4511-ab5d-a8f22fb4fa77"}
{"timestamp": "2025-12-29T13:26:38.177095+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.28s ago] {'pk_1': 31}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ff9b0f3-217d-4511-ab5d-a8f22fb4fa77"}
{"timestamp": "2025-12-29T13:26:38.180079+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 31}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "2ff9b0f3-217d-4511-ab5d-a8f22fb4fa77"}
{"timestamp": "2025-12-29T13:26:38.180530+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "2ff9b0f3-217d-4511-ab5d-a8f22fb4fa77"}
{"timestamp": "2025-12-29T13:26:38.181613+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2ff9b0f3-217d-4511-ab5d-a8f22fb4fa77"}
{"timestamp": "2025-12-29T13:26:38.181988+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "2ff9b0f3-217d-4511-ab5d-a8f22fb4fa77"}
{"timestamp": "2025-12-29T13:26:38.184313+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.028s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "2ff9b0f3-217d-4511-ab5d-a8f22fb4fa77"}
{"timestamp": "2025-12-29T13:26:38.185606+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2ff9b0f3-217d-4511-ab5d-a8f22fb4fa77"}
{"timestamp": "2025-12-29T13:26:40.235077+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "7f175569-901e-4bb1-94cc-57c47f75a654"}
{"timestamp": "2025-12-29T13:26:40.238525+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7f175569-901e-4bb1-94cc-57c47f75a654"}
{"timestamp": "2025-12-29T13:26:40.239376+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f175569-901e-4bb1-94cc-57c47f75a654"}
{"timestamp": "2025-12-29T13:26:40.240078+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.28s ago] {'name_1': 'Test Layout 1767014793.6117089'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f175569-901e-4bb1-94cc-57c47f75a654"}
{"timestamp": "2025-12-29T13:26:40.243926+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f175569-901e-4bb1-94cc-57c47f75a654"}
{"timestamp": "2025-12-29T13:26:40.244629+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.28s ago] {'name': 'Test Layout 1767014793.6117089', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f175569-901e-4bb1-94cc-57c47f75a654"}
{"timestamp": "2025-12-29T13:26:40.246955+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "7f175569-901e-4bb1-94cc-57c47f75a654"}
{"timestamp": "2025-12-29T13:26:40.251333+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7f175569-901e-4bb1-94cc-57c47f75a654"}
{"timestamp": "2025-12-29T13:26:40.252196+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f175569-901e-4bb1-94cc-57c47f75a654"}
{"timestamp": "2025-12-29T13:26:40.252992+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.28s ago] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f175569-901e-4bb1-94cc-57c47f75a654"}
{"timestamp": "2025-12-29T13:26:40.256073+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 30}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "7f175569-901e-4bb1-94cc-57c47f75a654"}
{"timestamp": "2025-12-29T13:26:40.256589+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "7f175569-901e-4bb1-94cc-57c47f75a654"}
{"timestamp": "2025-12-29T13:26:40.257932+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "7f175569-901e-4bb1-94cc-57c47f75a654"}
{"timestamp": "2025-12-29T13:26:40.258393+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "7f175569-901e-4bb1-94cc-57c47f75a654"}
{"timestamp": "2025-12-29T13:26:40.260206+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.025s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "7f175569-901e-4bb1-94cc-57c47f75a654"}
{"timestamp": "2025-12-29T13:26:40.261744+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "7f175569-901e-4bb1-94cc-57c47f75a654"}
{"timestamp": "2025-12-29T13:26:42.311795+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "2efb256c-1420-421e-826e-befa01db32c8"}
{"timestamp": "2025-12-29T13:26:42.314981+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2efb256c-1420-421e-826e-befa01db32c8"}
{"timestamp": "2025-12-29T13:26:42.315782+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2efb256c-1420-421e-826e-befa01db32c8"}
{"timestamp": "2025-12-29T13:26:42.316363+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.3s ago] {'name_1': 'Test Screen 1767014793.6117089', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2efb256c-1420-421e-826e-befa01db32c8"}
{"timestamp": "2025-12-29T13:26:42.319686+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2efb256c-1420-421e-826e-befa01db32c8"}
{"timestamp": "2025-12-29T13:26:42.320162+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.29s ago] {'id_1': 30, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2efb256c-1420-421e-826e-befa01db32c8"}
{"timestamp": "2025-12-29T13:26:42.322252+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2efb256c-1420-421e-826e-befa01db32c8"}
{"timestamp": "2025-12-29T13:26:42.322758+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.29s ago] {'name': 'Test Screen 1767014793.6117089', 'capacity': 150, 'seat_layout_id': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2efb256c-1420-421e-826e-befa01db32c8"}
{"timestamp": "2025-12-29T13:26:42.324835+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2efb256c-1420-421e-826e-befa01db32c8"}
{"timestamp": "2025-12-29T13:26:42.330842+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2efb256c-1420-421e-826e-befa01db32c8"}
{"timestamp": "2025-12-29T13:26:42.331748+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2efb256c-1420-421e-826e-befa01db32c8"}
{"timestamp": "2025-12-29T13:26:42.332300+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.29s ago] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2efb256c-1420-421e-826e-befa01db32c8"}
{"timestamp": "2025-12-29T13:26:42.334992+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 30}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "2efb256c-1420-421e-826e-befa01db32c8"}
{"timestamp": "2025-12-29T13:26:42.335421+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "2efb256c-1420-421e-826e-befa01db32c8"}
{"timestamp": "2025-12-29T13:26:42.336507+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2efb256c-1420-421e-826e-befa01db32c8"}
{"timestamp": "2025-12-29T13:26:42.336870+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "2efb256c-1420-421e-826e-befa01db32c8"}
{"timestamp": "2025-12-29T13:26:42.338822+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.027s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "2efb256c-1420-421e-826e-befa01db32c8"}
{"timestamp": "2025-12-29T13:26:42.340079+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2efb256c-1420-421e-826e-befa01db32c8"}
{"timestamp": "2025-12-29T13:26:44.389693+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "3112ee0e-505a-4772-80e1-13276bc5afe9"}
{"timestamp": "2025-12-29T13:26:44.392093+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 422 (0.002s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "3112ee0e-505a-4772-80e1-13276bc5afe9"}
{"timestamp": "2025-12-29T13:26:46.442048+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.445092+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.445971+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.446398+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 43.14s ago] {'email_1': 'test_admin_1767014804.3940573@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.659758+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.660247+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 43.13s ago] {'email': 'test_admin_1767014804.3940573@example.com', 'hashed_password': '$2b$12$rhjrETDs3b5XZYb2kM2ru.vcDFJJvpDcUASIrzoC9nF4aHYa0vk5q', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.661899+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.666306+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.667072+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.667648+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 43.12s ago] {'pk_1': 45}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.669951+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 45, 'email': 'test_admin_1767014804.3940573@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.670290+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.671212+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.671499+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.671698+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.673511+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.674211+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.674590+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 43.09s ago] {'user_id_1': 45, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.677248+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.677684+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 43.09s ago] {'user_id': 45, 'name': None, 'email': 'test_admin_1767014804.3940573@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.679512+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.683304+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.684079+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.684619+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 43.09s ago] {'pk_1': 45}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.686517+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 45, 'user_id': 45, 'email': 'test_admin_1767014804.3940573@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.686789+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.686981+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.687275+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.688283+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.689624+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.690094+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 43.39s ago] {'email_1': 'test_admin_1767014804.3940573@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.897580+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 45, 'email': 'test_admin_1767014804.3940573@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.897968+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.898863+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.899204+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.900369+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.458s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:46.901369+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "aa212f03-4738-4bad-89c7-c6d43e704745"}
{"timestamp": "2025-12-29T13:26:48.940730+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "bf13a03d-c11c-4625-9e08-d8338ed89682"}
{"timestamp": "2025-12-29T13:26:48.943455+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bf13a03d-c11c-4625-9e08-d8338ed89682"}
{"timestamp": "2025-12-29T13:26:48.944197+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf13a03d-c11c-4625-9e08-d8338ed89682"}
{"timestamp": "2025-12-29T13:26:48.944633+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 43.07s ago] {'title_1': 'Test Movie 1767014804.3940573'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf13a03d-c11c-4625-9e08-d8338ed89682"}
{"timestamp": "2025-12-29T13:26:48.947201+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf13a03d-c11c-4625-9e08-d8338ed89682"}
{"timestamp": "2025-12-29T13:26:48.947753+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 43.06s ago] {'title': 'Test Movie 1767014804.3940573', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf13a03d-c11c-4625-9e08-d8338ed89682"}
{"timestamp": "2025-12-29T13:26:48.949841+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "bf13a03d-c11c-4625-9e08-d8338ed89682"}
{"timestamp": "2025-12-29T13:26:48.955258+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bf13a03d-c11c-4625-9e08-d8338ed89682"}
{"timestamp": "2025-12-29T13:26:48.955996+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf13a03d-c11c-4625-9e08-d8338ed89682"}
{"timestamp": "2025-12-29T13:26:48.956434+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 43.06s ago] {'pk_1': 32}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf13a03d-c11c-4625-9e08-d8338ed89682"}
{"timestamp": "2025-12-29T13:26:48.958519+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 32}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "bf13a03d-c11c-4625-9e08-d8338ed89682"}
{"timestamp": "2025-12-29T13:26:48.958838+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "bf13a03d-c11c-4625-9e08-d8338ed89682"}
{"timestamp": "2025-12-29T13:26:48.959640+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "bf13a03d-c11c-4625-9e08-d8338ed89682"}
{"timestamp": "2025-12-29T13:26:48.959919+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "bf13a03d-c11c-4625-9e08-d8338ed89682"}
{"timestamp": "2025-12-29T13:26:48.961508+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.021s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "bf13a03d-c11c-4625-9e08-d8338ed89682"}
{"timestamp": "2025-12-29T13:26:48.962552+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "bf13a03d-c11c-4625-9e08-d8338ed89682"}
{"timestamp": "2025-12-29T13:26:51.002005+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "f8e1a9a2-3327-4c42-867b-3b98c30807a5"}
{"timestamp": "2025-12-29T13:26:51.004885+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f8e1a9a2-3327-4c42-867b-3b98c30807a5"}
{"timestamp": "2025-12-29T13:26:51.005531+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f8e1a9a2-3327-4c42-867b-3b98c30807a5"}
{"timestamp": "2025-12-29T13:26:51.006050+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 43.04s ago] {'name_1': 'Test Layout 1767014804.3940573'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f8e1a9a2-3327-4c42-867b-3b98c30807a5"}
{"timestamp": "2025-12-29T13:26:51.008499+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f8e1a9a2-3327-4c42-867b-3b98c30807a5"}
{"timestamp": "2025-12-29T13:26:51.008905+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 43.04s ago] {'name': 'Test Layout 1767014804.3940573', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f8e1a9a2-3327-4c42-867b-3b98c30807a5"}
{"timestamp": "2025-12-29T13:26:51.010818+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "f8e1a9a2-3327-4c42-867b-3b98c30807a5"}
{"timestamp": "2025-12-29T13:26:51.015752+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f8e1a9a2-3327-4c42-867b-3b98c30807a5"}
{"timestamp": "2025-12-29T13:26:51.016567+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f8e1a9a2-3327-4c42-867b-3b98c30807a5"}
{"timestamp": "2025-12-29T13:26:51.017010+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 43.04s ago] {'pk_1': 31}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f8e1a9a2-3327-4c42-867b-3b98c30807a5"}
{"timestamp": "2025-12-29T13:26:51.019221+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 31}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "f8e1a9a2-3327-4c42-867b-3b98c30807a5"}
{"timestamp": "2025-12-29T13:26:51.019570+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "f8e1a9a2-3327-4c42-867b-3b98c30807a5"}
{"timestamp": "2025-12-29T13:26:51.020335+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "f8e1a9a2-3327-4c42-867b-3b98c30807a5"}
{"timestamp": "2025-12-29T13:26:51.020609+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "f8e1a9a2-3327-4c42-867b-3b98c30807a5"}
{"timestamp": "2025-12-29T13:26:51.021720+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.020s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "f8e1a9a2-3327-4c42-867b-3b98c30807a5"}
{"timestamp": "2025-12-29T13:26:51.022914+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f8e1a9a2-3327-4c42-867b-3b98c30807a5"}
{"timestamp": "2025-12-29T13:26:53.068108+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "ddd72ca6-54c2-44b1-9883-ac6c227fd04f"}
{"timestamp": "2025-12-29T13:26:53.071008+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ddd72ca6-54c2-44b1-9883-ac6c227fd04f"}
{"timestamp": "2025-12-29T13:26:53.071851+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ddd72ca6-54c2-44b1-9883-ac6c227fd04f"}
{"timestamp": "2025-12-29T13:26:53.072424+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 43.05s ago] {'name_1': 'Test Screen 1767014804.3940573', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ddd72ca6-54c2-44b1-9883-ac6c227fd04f"}
{"timestamp": "2025-12-29T13:26:53.075367+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ddd72ca6-54c2-44b1-9883-ac6c227fd04f"}
{"timestamp": "2025-12-29T13:26:53.075898+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 43.05s ago] {'id_1': 31, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ddd72ca6-54c2-44b1-9883-ac6c227fd04f"}
{"timestamp": "2025-12-29T13:26:53.078203+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ddd72ca6-54c2-44b1-9883-ac6c227fd04f"}
{"timestamp": "2025-12-29T13:26:53.078619+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 43.05s ago] {'name': 'Test Screen 1767014804.3940573', 'capacity': 150, 'seat_layout_id': 31}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ddd72ca6-54c2-44b1-9883-ac6c227fd04f"}
{"timestamp": "2025-12-29T13:26:53.080865+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "ddd72ca6-54c2-44b1-9883-ac6c227fd04f"}
{"timestamp": "2025-12-29T13:26:53.085598+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ddd72ca6-54c2-44b1-9883-ac6c227fd04f"}
{"timestamp": "2025-12-29T13:26:53.086562+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ddd72ca6-54c2-44b1-9883-ac6c227fd04f"}
{"timestamp": "2025-12-29T13:26:53.087190+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 43.04s ago] {'pk_1': 31}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ddd72ca6-54c2-44b1-9883-ac6c227fd04f"}
{"timestamp": "2025-12-29T13:26:53.089953+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 31}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "ddd72ca6-54c2-44b1-9883-ac6c227fd04f"}
{"timestamp": "2025-12-29T13:26:53.090356+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "ddd72ca6-54c2-44b1-9883-ac6c227fd04f"}
{"timestamp": "2025-12-29T13:26:53.091281+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "ddd72ca6-54c2-44b1-9883-ac6c227fd04f"}
{"timestamp": "2025-12-29T13:26:53.091576+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "ddd72ca6-54c2-44b1-9883-ac6c227fd04f"}
{"timestamp": "2025-12-29T13:26:53.093407+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.025s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "ddd72ca6-54c2-44b1-9883-ac6c227fd04f"}
{"timestamp": "2025-12-29T13:26:53.094560+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ddd72ca6-54c2-44b1-9883-ac6c227fd04f"}
{"timestamp": "2025-12-29T13:26:55.130778+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "23e183e5-7c25-49ba-abf6-9b742efc58df"}
{"timestamp": "2025-12-29T13:26:55.132447+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 422 (0.002s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "23e183e5-7c25-49ba-abf6-9b742efc58df"}
{"timestamp": "2025-12-29T13:28:56.057294+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-29T13:28:58.280502+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-29T13:28:58.280997+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-29T13:28:58.281164+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.281334+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.281498+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.281666+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.281956+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.282138+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.282283+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.282424+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.282563+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.282832+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.282981+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.283128+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.283272+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.283412+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.283552+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.283696+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.283839+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.283988+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.284135+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.284285+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.284432+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.284635+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.285041+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.285364+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.285587+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.285807+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.286066+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.286238+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.286541+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.286803+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.286980+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.287126+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.287334+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.287511+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.287642+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.287756+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.287863+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.287968+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.288083+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.288250+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.288513+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.288739+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.288996+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.289186+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.289299+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.289407+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.289529+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.289910+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.290084+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.290232+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.290356+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.290482+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.290672+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.290923+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.291078+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.291355+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.291604+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.291776+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.291930+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/showtimes/{showtime_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.292044+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.292159+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:28:58.292266+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-29T13:28:58.292369+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-29T13:29:16.145878+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.192996+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.193526+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.195611+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.195861+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.197388+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.197629+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.199542+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.202670+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.203088+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00067s] {'email_1': 'test_admin_1767014954.0904438@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.205902+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "detected 'bcrypt' backend, version '4.0.1'", "module": "bcrypt", "function": "_load_backend_mixin", "line": 625, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.206448+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "'bcrypt' backend lacks $2$ support, enabling workaround", "module": "bcrypt", "function": "_finalize_backend_mixin", "line": 406, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.428021+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.428593+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'email': 'test_admin_1767014954.0904438@example.com', 'hashed_password': '$2b$12$nfSsSYkPodDKfrzTkr1nre/r9RyUpc4h1etUGaDc4l9prqy6nHnz6', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.430719+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.435888+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.437225+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.437727+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'pk_1': 46}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.440031+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 46, 'email': 'test_admin_1767014954.0904438@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.440386+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.441258+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.441550+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.441764+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.475381+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.476968+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.477422+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00063s] {'user_id_1': 46, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.481563+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.481993+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00062s] {'user_id': 46, 'name': None, 'email': 'test_admin_1767014954.0904438@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.485087+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.489349+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.490420+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.490920+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'pk_1': 46}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.493182+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 46, 'user_id': 46, 'email': 'test_admin_1767014954.0904438@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.493396+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.493560+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.493854+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.494896+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.496228+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.496566+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2942s ago] {'email_1': 'test_admin_1767014954.0904438@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.711317+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 46, 'email': 'test_admin_1767014954.0904438@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.711721+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.712525+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.712780+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.714064+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.568s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:16.715127+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f4f9e9d0-0787-44ed-8e61-da068339e26e"}
{"timestamp": "2025-12-29T13:29:18.759175+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "efc5e5e5-a707-48b7-8fd2-4de8e430dbd6"}
{"timestamp": "2025-12-29T13:29:18.762901+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "efc5e5e5-a707-48b7-8fd2-4de8e430dbd6"}
{"timestamp": "2025-12-29T13:29:18.765193+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "efc5e5e5-a707-48b7-8fd2-4de8e430dbd6"}
{"timestamp": "2025-12-29T13:29:18.765711+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00065s] {'title_1': 'Test Movie 1767014954.0904438'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "efc5e5e5-a707-48b7-8fd2-4de8e430dbd6"}
{"timestamp": "2025-12-29T13:29:18.769768+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "efc5e5e5-a707-48b7-8fd2-4de8e430dbd6"}
{"timestamp": "2025-12-29T13:29:18.770214+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'title': 'Test Movie 1767014954.0904438', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "efc5e5e5-a707-48b7-8fd2-4de8e430dbd6"}
{"timestamp": "2025-12-29T13:29:18.772609+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "efc5e5e5-a707-48b7-8fd2-4de8e430dbd6"}
{"timestamp": "2025-12-29T13:29:18.778059+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "efc5e5e5-a707-48b7-8fd2-4de8e430dbd6"}
{"timestamp": "2025-12-29T13:29:18.779141+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "efc5e5e5-a707-48b7-8fd2-4de8e430dbd6"}
{"timestamp": "2025-12-29T13:29:18.779513+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'pk_1': 33}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "efc5e5e5-a707-48b7-8fd2-4de8e430dbd6"}
{"timestamp": "2025-12-29T13:29:18.782162+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 33}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "efc5e5e5-a707-48b7-8fd2-4de8e430dbd6"}
{"timestamp": "2025-12-29T13:29:18.782690+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "efc5e5e5-a707-48b7-8fd2-4de8e430dbd6"}
{"timestamp": "2025-12-29T13:29:18.783780+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "efc5e5e5-a707-48b7-8fd2-4de8e430dbd6"}
{"timestamp": "2025-12-29T13:29:18.784126+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "efc5e5e5-a707-48b7-8fd2-4de8e430dbd6"}
{"timestamp": "2025-12-29T13:29:18.786344+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.027s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "efc5e5e5-a707-48b7-8fd2-4de8e430dbd6"}
{"timestamp": "2025-12-29T13:29:18.787884+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "efc5e5e5-a707-48b7-8fd2-4de8e430dbd6"}
{"timestamp": "2025-12-29T13:29:20.838843+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b09f62d2-a3df-44eb-81a5-f3e1ec2fdc90"}
{"timestamp": "2025-12-29T13:29:20.842566+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b09f62d2-a3df-44eb-81a5-f3e1ec2fdc90"}
{"timestamp": "2025-12-29T13:29:20.843974+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b09f62d2-a3df-44eb-81a5-f3e1ec2fdc90"}
{"timestamp": "2025-12-29T13:29:20.844638+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00062s] {'name_1': 'Test Layout 1767014954.0904438'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b09f62d2-a3df-44eb-81a5-f3e1ec2fdc90"}
{"timestamp": "2025-12-29T13:29:20.848688+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b09f62d2-a3df-44eb-81a5-f3e1ec2fdc90"}
{"timestamp": "2025-12-29T13:29:20.849142+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'name': 'Test Layout 1767014954.0904438', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b09f62d2-a3df-44eb-81a5-f3e1ec2fdc90"}
{"timestamp": "2025-12-29T13:29:20.851276+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b09f62d2-a3df-44eb-81a5-f3e1ec2fdc90"}
{"timestamp": "2025-12-29T13:29:20.855742+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b09f62d2-a3df-44eb-81a5-f3e1ec2fdc90"}
{"timestamp": "2025-12-29T13:29:20.856687+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b09f62d2-a3df-44eb-81a5-f3e1ec2fdc90"}
{"timestamp": "2025-12-29T13:29:20.857032+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'pk_1': 32}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b09f62d2-a3df-44eb-81a5-f3e1ec2fdc90"}
{"timestamp": "2025-12-29T13:29:20.859538+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 32}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "b09f62d2-a3df-44eb-81a5-f3e1ec2fdc90"}
{"timestamp": "2025-12-29T13:29:20.859795+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "b09f62d2-a3df-44eb-81a5-f3e1ec2fdc90"}
{"timestamp": "2025-12-29T13:29:20.860558+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b09f62d2-a3df-44eb-81a5-f3e1ec2fdc90"}
{"timestamp": "2025-12-29T13:29:20.860728+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "b09f62d2-a3df-44eb-81a5-f3e1ec2fdc90"}
{"timestamp": "2025-12-29T13:29:20.861949+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.023s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b09f62d2-a3df-44eb-81a5-f3e1ec2fdc90"}
{"timestamp": "2025-12-29T13:29:20.863006+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b09f62d2-a3df-44eb-81a5-f3e1ec2fdc90"}
{"timestamp": "2025-12-29T13:29:22.919784+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "7c12e44a-4165-49c4-9fc2-67b410474687"}
{"timestamp": "2025-12-29T13:29:22.922938+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7c12e44a-4165-49c4-9fc2-67b410474687"}
{"timestamp": "2025-12-29T13:29:22.924287+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7c12e44a-4165-49c4-9fc2-67b410474687"}
{"timestamp": "2025-12-29T13:29:22.924827+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'name_1': 'Test Screen 1767014954.0904438', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7c12e44a-4165-49c4-9fc2-67b410474687"}
{"timestamp": "2025-12-29T13:29:22.928226+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7c12e44a-4165-49c4-9fc2-67b410474687"}
{"timestamp": "2025-12-29T13:29:22.928726+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'id_1': 32, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7c12e44a-4165-49c4-9fc2-67b410474687"}
{"timestamp": "2025-12-29T13:29:22.935833+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7c12e44a-4165-49c4-9fc2-67b410474687"}
{"timestamp": "2025-12-29T13:29:22.936319+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'name': 'Test Screen 1767014954.0904438', 'capacity': 150, 'seat_layout_id': 32}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7c12e44a-4165-49c4-9fc2-67b410474687"}
{"timestamp": "2025-12-29T13:29:22.938458+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "7c12e44a-4165-49c4-9fc2-67b410474687"}
{"timestamp": "2025-12-29T13:29:22.944134+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7c12e44a-4165-49c4-9fc2-67b410474687"}
{"timestamp": "2025-12-29T13:29:22.945546+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7c12e44a-4165-49c4-9fc2-67b410474687"}
{"timestamp": "2025-12-29T13:29:22.946028+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00066s] {'pk_1': 32}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7c12e44a-4165-49c4-9fc2-67b410474687"}
{"timestamp": "2025-12-29T13:29:22.948584+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 32}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "7c12e44a-4165-49c4-9fc2-67b410474687"}
{"timestamp": "2025-12-29T13:29:22.948877+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "7c12e44a-4165-49c4-9fc2-67b410474687"}
{"timestamp": "2025-12-29T13:29:22.949897+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "7c12e44a-4165-49c4-9fc2-67b410474687"}
{"timestamp": "2025-12-29T13:29:22.950245+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "7c12e44a-4165-49c4-9fc2-67b410474687"}
{"timestamp": "2025-12-29T13:29:22.951893+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.032s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "7c12e44a-4165-49c4-9fc2-67b410474687"}
{"timestamp": "2025-12-29T13:29:22.953125+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "7c12e44a-4165-49c4-9fc2-67b410474687"}
{"timestamp": "2025-12-29T13:29:24.999602+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:25.002832+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:25.003969+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:25.004452+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'pk_1': 33}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:25.007803+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:25.008196+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'pk_1': 32}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:25.011130+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:25.011586+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'screen_id_1': 32, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:25.016180+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:25.016795+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 33, 'screen_id': 32}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:25.019855+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:25.024933+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:25.026609+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:25.027101+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00074s] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:25.031000+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:25.031665+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00073s] {'pk_1': 33}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:25.034650+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:25.035060+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'pk_1': 32}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:25.037057+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 24}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:25.037616+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:25.038784+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:25.039146+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:25.042250+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.043s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:25.043595+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "e006f514-ee1e-4f21-8764-f1b94518757f"}
{"timestamp": "2025-12-29T13:29:27.098633+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.101818+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.102621+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.103084+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.9s ago] {'email_1': 'test_booking_1767014965.0434582@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.313689+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.314157+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.89s ago] {'email': 'test_booking_1767014965.0434582@example.com', 'hashed_password': '$2b$12$iFNi9AqlNkDVIittacrfhOdBkbTn/YePdwqmFrA7PmChHlII75Ug2', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.315942+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.321287+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.322505+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.323143+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.89s ago] {'pk_1': 47}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.326516+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 47, 'email': 'test_booking_1767014965.0434582@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.327078+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.328365+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.328813+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.329196+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.331315+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.332240+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.333011+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.86s ago] {'user_id_1': 47, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.335486+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.335818+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.85s ago] {'user_id': 47, 'name': None, 'email': 'test_booking_1767014965.0434582@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.337685+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.342503+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.343126+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.343723+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.85s ago] {'pk_1': 47}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.346037+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 47, 'user_id': 47, 'email': 'test_booking_1767014965.0434582@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.346409+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.346685+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.347020+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.348109+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.349644+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.350048+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 11.15s ago] {'email_1': 'test_booking_1767014965.0434582@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.557345+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 47, 'email': 'test_booking_1767014965.0434582@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.557757+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.558605+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.558862+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.559877+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.461s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:27.560955+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "9b82559b-4131-41ef-b404-6b7d60ee7638"}
{"timestamp": "2025-12-29T13:29:29.591806+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.596808+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.598131+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.598537+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00069s] {'pk_1': 47}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.602746+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.603413+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'user_id': 47, 'showtime_id': 24, 'seat_code': 'R5-5', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 13, 29, 29, 602348, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 39, 29, 601408, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.606274+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.610463+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.611660+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.611968+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.614287+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 23, 'user_id': 47, 'showtime_id': 24, 'seat_code': 'R5-5'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.614565+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.615284+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.615510+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.615635+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.617293+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.618699+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.619058+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'showtime_id_1': 24, 'seat_code_1': 'R5-5', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.622669+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.623029+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'seat_code': 'R5-5', 'showtime_id': 24, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.626330+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.626637+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00042s] {'status': 'LOCKED', 'locked_by_user_id': 47, 'lock_expires_at': datetime.datetime(2025, 12, 29, 13, 39, 29, 625255, tzinfo=datetime.timezone.utc), 'seat_locks_id': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.628633+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.632588+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.633394+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.633622+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00034s] {'pk_1': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.635376+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 24, 'seat_code': 'R5-5', 'user_id': 47, 'expires_at': '2025-12-29T13:39:29.625255+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.635562+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.635683+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.635895+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.636777+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.636942+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.637055+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.637284+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 23, 'user_id': 47, 'showtime_id': 24, 'seat_code': 'R5-5'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.637694+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 23", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.639327+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.640540+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.640831+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'user_id': 47, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.643468+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.647672+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.648665+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.648910+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00036s] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.651146+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 23, 'reservation_id': 23, 'user_id': 47, 'showtime_id': 24, 'seat_code': 'R5-5'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.651505+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.651688+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_order_created for order.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.651790+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_order_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.651908+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 23", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.679396+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.681023+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.681384+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.685958+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 23, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.686251+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.686575+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_pricing_snapshot_created for pricing.snapshot_created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.686795+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_pricing_snapshot_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.687128+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 23, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.711379+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.712546+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.712907+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.716722+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.717108+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.719661+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.724185+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.724913+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.725310+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.07665s ago] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.727387+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 23 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.727856+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.729008+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.729256+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 23: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.729633+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.730838+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.731133+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 23", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.731404+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.732596+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.732849+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.732956+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.734423+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.735729+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.736050+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'actor_id': 47, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 23, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 23, \"user_id\": 47, \"showtime_id\": 24, \"seat_code\": \"R5-5\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 29, 29, 735391, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.738635+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.742727+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.744036+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.744445+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00062s] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.746638+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.747508+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.749198+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.157s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:29.750171+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "3df73024-0d47-430e-9f79-ee278832ca36"}
{"timestamp": "2025-12-29T13:29:31.793201+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "28305859-bc9d-4e8b-9480-fb1561bf5195"}
{"timestamp": "2025-12-29T13:29:31.795833+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "28305859-bc9d-4e8b-9480-fb1561bf5195"}
{"timestamp": "2025-12-29T13:29:31.796501+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "28305859-bc9d-4e8b-9480-fb1561bf5195"}
{"timestamp": "2025-12-29T13:29:31.796876+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 2.199s ago] {'pk_1': 47}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "28305859-bc9d-4e8b-9480-fb1561bf5195"}
{"timestamp": "2025-12-29T13:29:31.800077+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "28305859-bc9d-4e8b-9480-fb1561bf5195"}
{"timestamp": "2025-12-29T13:29:31.800520+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'user_id_1': 47}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "28305859-bc9d-4e8b-9480-fb1561bf5195"}
{"timestamp": "2025-12-29T13:29:31.805169+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.012s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "28305859-bc9d-4e8b-9480-fb1561bf5195"}
{"timestamp": "2025-12-29T13:29:31.806174+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "28305859-bc9d-4e8b-9480-fb1561bf5195"}
{"timestamp": "2025-12-29T13:29:33.855359+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/order/23/initiate", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "e98d7925-6c46-4473-a3e6-cf09aae4463a"}
{"timestamp": "2025-12-29T13:29:33.857862+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e98d7925-6c46-4473-a3e6-cf09aae4463a"}
{"timestamp": "2025-12-29T13:29:33.858694+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e98d7925-6c46-4473-a3e6-cf09aae4463a"}
{"timestamp": "2025-12-29T13:29:33.859224+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.261s ago] {'pk_1': 47}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e98d7925-6c46-4473-a3e6-cf09aae4463a"}
{"timestamp": "2025-12-29T13:29:33.862591+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e98d7925-6c46-4473-a3e6-cf09aae4463a"}
{"timestamp": "2025-12-29T13:29:33.863013+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.151s ago] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e98d7925-6c46-4473-a3e6-cf09aae4463a"}
{"timestamp": "2025-12-29T13:29:33.865977+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO payment_attempts (order_id, amount_attempted, status, final_amount, failure_reason, provider_payment_id, created_at) VALUES (%(order_id)s, %(amount_attempted)s, %(status)s, %(final_amount)s, %(failure_reason)s, %(provider_payment_id)s, %(created_at)s) RETURNING payment_attempts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e98d7925-6c46-4473-a3e6-cf09aae4463a"}
{"timestamp": "2025-12-29T13:29:33.866519+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'order_id': 23, 'amount_attempted': 1000, 'status': 'PENDING', 'final_amount': 1000, 'failure_reason': None, 'provider_payment_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 29, 33, 865590, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e98d7925-6c46-4473-a3e6-cf09aae4463a"}
{"timestamp": "2025-12-29T13:29:33.869535+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "e98d7925-6c46-4473-a3e6-cf09aae4463a"}
{"timestamp": "2025-12-29T13:29:33.874701+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e98d7925-6c46-4473-a3e6-cf09aae4463a"}
{"timestamp": "2025-12-29T13:29:33.876143+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e98d7925-6c46-4473-a3e6-cf09aae4463a"}
{"timestamp": "2025-12-29T13:29:33.876570+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'pk_1': 16}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e98d7925-6c46-4473-a3e6-cf09aae4463a"}
{"timestamp": "2025-12-29T13:29:33.879555+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e98d7925-6c46-4473-a3e6-cf09aae4463a"}
{"timestamp": "2025-12-29T13:29:33.879906+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e98d7925-6c46-4473-a3e6-cf09aae4463a"}
{"timestamp": "2025-12-29T13:29:33.881815+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.pending with payload: {'payment_attempt_id': 16, 'order_id': 23, 'amount_attempted': 1000, 'final_amount': 1000, 'user_id': 47}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "e98d7925-6c46-4473-a3e6-cf09aae4463a"}
{"timestamp": "2025-12-29T13:29:33.882102+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "e98d7925-6c46-4473-a3e6-cf09aae4463a"}
{"timestamp": "2025-12-29T13:29:33.882818+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.pending to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "e98d7925-6c46-4473-a3e6-cf09aae4463a"}
{"timestamp": "2025-12-29T13:29:33.883019+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: payment.pending", "module": "event_bus", "function": "publish", "line": 31, "request_id": "e98d7925-6c46-4473-a3e6-cf09aae4463a"}
{"timestamp": "2025-12-29T13:29:33.884113+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/order/23/initiate \u2192 200 (0.029s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "e98d7925-6c46-4473-a3e6-cf09aae4463a"}
{"timestamp": "2025-12-29T13:29:33.884995+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "e98d7925-6c46-4473-a3e6-cf09aae4463a"}
{"timestamp": "2025-12-29T13:29:35.931751+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/16/confirm", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.934257+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.935336+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.935735+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.338s ago] {'pk_1': 47}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.939002+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id AS payment_attempts_id, payment_attempts.order_id AS payment_attempts_order_id, payment_attempts.amount_attempted AS payment_attempts_amount_attempted, payment_attempts.status AS payment_attempts_status, payment_attempts.final_amount AS payment_attempts_final_amount, payment_attempts.failure_reason AS payment_attempts_failure_reason, payment_attempts.provider_payment_id AS payment_attempts_provider_payment_id, payment_attempts.created_at AS payment_attempts_created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.939383+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'pk_1': 16}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.942414+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.942740+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.945346+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE payment_attempts SET status=%(status)s, provider_payment_id=%(provider_payment_id)s WHERE payment_attempts.id = %(payment_attempts_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.945691+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'status': 'SUCCEEDED', 'provider_payment_id': 'mock_payment_16', 'payment_attempts_id': 16}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.947715+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.951740+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.952409+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.952872+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 2.077s ago] {'pk_1': 16}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.955374+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.955682+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 2.076s ago] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.956799+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.succeeded with payload: {'payment_attempt_id': 16, 'order_id': 23, 'final_amount': 1000.0, 'user_id': 47}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.957096+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.957985+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.succeeded to 4 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.958199+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_payment_succeeded for payment.succeeded", "module": "event_bus", "function": "publish", "line": 36, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.958327+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_payment_succeeded", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.958501+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.958662+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_payment_succeeded for payment.succeeded", "module": "event_bus", "function": "publish", "line": 36, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.958812+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_payment_succeeded", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.960136+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.960619+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.960844+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.249s ago] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.963321+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET is_completed=%(is_completed)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.963612+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00038s] {'is_completed': True, 'orders_id': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.965318+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.968850+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.969443+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.969857+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.321s ago] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.972071+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.completed with payload: {'order_id': 23}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.972265+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.completed to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.972392+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: order.completed", "module": "event_bus", "function": "publish", "line": 31, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.972602+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.973581+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.973838+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_payment_succeeded for payment.succeeded", "module": "event_bus", "function": "publish", "line": 36, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.973968+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_payment_succeeded", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.975526+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.976026+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.976257+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 19.5s ago] {'user_id_1': 47, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.979210+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.980413+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.980617+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_payment_succeeded for payment.succeeded", "module": "event_bus", "function": "publish", "line": 36, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.980718+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_payment_succeeded", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.982134+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.982596+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.982874+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.247s ago] {'actor_id': 47, 'actor_type': 'user', 'action': 'payment.succeeded', 'target_id': 23, 'target_type': 'order', 'payload': '{\"payment_attempt_id\": 16, \"order_id\": 23, \"final_amount\": 1000.0, \"user_id\": 47}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 29, 35, 982400, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.984876+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.988820+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.989347+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.989635+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.246s ago] {'pk_1': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.991467+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.993089+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.994444+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/16/confirm \u2192 200 (0.063s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:35.995421+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d8a3a915-5cbb-400a-869e-9c911188a5f6"}
{"timestamp": "2025-12-29T13:29:38.041844+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "d03b1aef-094d-4709-8d09-8c135c004c9f"}
{"timestamp": "2025-12-29T13:29:38.044407+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d03b1aef-094d-4709-8d09-8c135c004c9f"}
{"timestamp": "2025-12-29T13:29:38.045031+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d03b1aef-094d-4709-8d09-8c135c004c9f"}
{"timestamp": "2025-12-29T13:29:38.045390+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 8.448s ago] {'pk_1': 47}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d03b1aef-094d-4709-8d09-8c135c004c9f"}
{"timestamp": "2025-12-29T13:29:38.048066+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d03b1aef-094d-4709-8d09-8c135c004c9f"}
{"timestamp": "2025-12-29T13:29:38.048518+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.249s ago] {'user_id_1': 47}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d03b1aef-094d-4709-8d09-8c135c004c9f"}
{"timestamp": "2025-12-29T13:29:38.050752+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.009s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "d03b1aef-094d-4709-8d09-8c135c004c9f"}
{"timestamp": "2025-12-29T13:29:38.051643+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d03b1aef-094d-4709-8d09-8c135c004c9f"}
{"timestamp": "2025-12-29T13:29:40.092948+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.095718+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.096499+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.097034+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.89s ago] {'email_1': 'test_admin_1767014978.0521476@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.304714+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.305103+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.88s ago] {'email': 'test_admin_1767014978.0521476@example.com', 'hashed_password': '$2b$12$ecd8GrrNDlPMkbnGDdFPNekB67sNDS78Dr6Nm4ARvkS7B1yRQ7hR.', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.307084+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.311876+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.312699+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.313253+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.88s ago] {'pk_1': 48}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.315821+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 48, 'email': 'test_admin_1767014978.0521476@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.316175+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.317107+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.317516+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.317833+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.319604+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.320162+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.320541+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.84s ago] {'user_id_1': 48, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.322938+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.323317+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.84s ago] {'user_id': 48, 'name': None, 'email': 'test_admin_1767014978.0521476@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.325202+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.329408+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.330047+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.330383+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.84s ago] {'pk_1': 48}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.332824+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 48, 'user_id': 48, 'email': 'test_admin_1767014978.0521476@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.333154+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.333488+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.333866+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.335086+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.336370+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.336793+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 24.13s ago] {'email_1': 'test_admin_1767014978.0521476@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.542352+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 48, 'email': 'test_admin_1767014978.0521476@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.542722+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.543601+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.543887+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.545008+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.452s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:40.546178+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "3f20c518-5ffc-46e0-a2db-fb0ca9f9a85c"}
{"timestamp": "2025-12-29T13:29:42.589369+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "f6aa4315-3640-4f30-b29b-950db07c0fe3"}
{"timestamp": "2025-12-29T13:29:42.591858+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f6aa4315-3640-4f30-b29b-950db07c0fe3"}
{"timestamp": "2025-12-29T13:29:42.592454+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f6aa4315-3640-4f30-b29b-950db07c0fe3"}
{"timestamp": "2025-12-29T13:29:42.592780+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.83s ago] {'title_1': 'Test Movie 1767014978.0521476'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f6aa4315-3640-4f30-b29b-950db07c0fe3"}
{"timestamp": "2025-12-29T13:29:42.595370+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f6aa4315-3640-4f30-b29b-950db07c0fe3"}
{"timestamp": "2025-12-29T13:29:42.595928+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.83s ago] {'title': 'Test Movie 1767014978.0521476', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f6aa4315-3640-4f30-b29b-950db07c0fe3"}
{"timestamp": "2025-12-29T13:29:42.598017+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "f6aa4315-3640-4f30-b29b-950db07c0fe3"}
{"timestamp": "2025-12-29T13:29:42.603262+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f6aa4315-3640-4f30-b29b-950db07c0fe3"}
{"timestamp": "2025-12-29T13:29:42.604308+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f6aa4315-3640-4f30-b29b-950db07c0fe3"}
{"timestamp": "2025-12-29T13:29:42.604777+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.83s ago] {'pk_1': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f6aa4315-3640-4f30-b29b-950db07c0fe3"}
{"timestamp": "2025-12-29T13:29:42.606926+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 34}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "f6aa4315-3640-4f30-b29b-950db07c0fe3"}
{"timestamp": "2025-12-29T13:29:42.607212+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "f6aa4315-3640-4f30-b29b-950db07c0fe3"}
{"timestamp": "2025-12-29T13:29:42.607948+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "f6aa4315-3640-4f30-b29b-950db07c0fe3"}
{"timestamp": "2025-12-29T13:29:42.608193+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "f6aa4315-3640-4f30-b29b-950db07c0fe3"}
{"timestamp": "2025-12-29T13:29:42.609213+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.020s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "f6aa4315-3640-4f30-b29b-950db07c0fe3"}
{"timestamp": "2025-12-29T13:29:42.610378+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f6aa4315-3640-4f30-b29b-950db07c0fe3"}
{"timestamp": "2025-12-29T13:29:44.653892+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "6b788084-fff7-4595-9a34-f9a14f2f74ae"}
{"timestamp": "2025-12-29T13:29:44.656586+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6b788084-fff7-4595-9a34-f9a14f2f74ae"}
{"timestamp": "2025-12-29T13:29:44.657220+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6b788084-fff7-4595-9a34-f9a14f2f74ae"}
{"timestamp": "2025-12-29T13:29:44.657601+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.81s ago] {'name_1': 'Test Layout 1767014978.0521476'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6b788084-fff7-4595-9a34-f9a14f2f74ae"}
{"timestamp": "2025-12-29T13:29:44.660285+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6b788084-fff7-4595-9a34-f9a14f2f74ae"}
{"timestamp": "2025-12-29T13:29:44.660634+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.81s ago] {'name': 'Test Layout 1767014978.0521476', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6b788084-fff7-4595-9a34-f9a14f2f74ae"}
{"timestamp": "2025-12-29T13:29:44.662464+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6b788084-fff7-4595-9a34-f9a14f2f74ae"}
{"timestamp": "2025-12-29T13:29:44.668035+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6b788084-fff7-4595-9a34-f9a14f2f74ae"}
{"timestamp": "2025-12-29T13:29:44.668802+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6b788084-fff7-4595-9a34-f9a14f2f74ae"}
{"timestamp": "2025-12-29T13:29:44.669398+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.81s ago] {'pk_1': 33}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6b788084-fff7-4595-9a34-f9a14f2f74ae"}
{"timestamp": "2025-12-29T13:29:44.671873+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 33}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "6b788084-fff7-4595-9a34-f9a14f2f74ae"}
{"timestamp": "2025-12-29T13:29:44.672206+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "6b788084-fff7-4595-9a34-f9a14f2f74ae"}
{"timestamp": "2025-12-29T13:29:44.673323+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6b788084-fff7-4595-9a34-f9a14f2f74ae"}
{"timestamp": "2025-12-29T13:29:44.673636+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "6b788084-fff7-4595-9a34-f9a14f2f74ae"}
{"timestamp": "2025-12-29T13:29:44.675123+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.021s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "6b788084-fff7-4595-9a34-f9a14f2f74ae"}
{"timestamp": "2025-12-29T13:29:44.676210+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6b788084-fff7-4595-9a34-f9a14f2f74ae"}
{"timestamp": "2025-12-29T13:29:46.713341+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "3f7fba08-5be7-4b2c-a5cd-be3aa74fc8b6"}
{"timestamp": "2025-12-29T13:29:46.715901+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3f7fba08-5be7-4b2c-a5cd-be3aa74fc8b6"}
{"timestamp": "2025-12-29T13:29:46.716535+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f7fba08-5be7-4b2c-a5cd-be3aa74fc8b6"}
{"timestamp": "2025-12-29T13:29:46.716918+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'name_1': 'Test Screen 1767014978.0521476', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f7fba08-5be7-4b2c-a5cd-be3aa74fc8b6"}
{"timestamp": "2025-12-29T13:29:46.719912+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f7fba08-5be7-4b2c-a5cd-be3aa74fc8b6"}
{"timestamp": "2025-12-29T13:29:46.720383+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'id_1': 33, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f7fba08-5be7-4b2c-a5cd-be3aa74fc8b6"}
{"timestamp": "2025-12-29T13:29:46.723047+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f7fba08-5be7-4b2c-a5cd-be3aa74fc8b6"}
{"timestamp": "2025-12-29T13:29:46.723756+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'name': 'Test Screen 1767014978.0521476', 'capacity': 150, 'seat_layout_id': 33}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f7fba08-5be7-4b2c-a5cd-be3aa74fc8b6"}
{"timestamp": "2025-12-29T13:29:46.726012+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "3f7fba08-5be7-4b2c-a5cd-be3aa74fc8b6"}
{"timestamp": "2025-12-29T13:29:46.730563+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3f7fba08-5be7-4b2c-a5cd-be3aa74fc8b6"}
{"timestamp": "2025-12-29T13:29:46.731339+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f7fba08-5be7-4b2c-a5cd-be3aa74fc8b6"}
{"timestamp": "2025-12-29T13:29:46.731795+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'pk_1': 33}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f7fba08-5be7-4b2c-a5cd-be3aa74fc8b6"}
{"timestamp": "2025-12-29T13:29:46.733961+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 33}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "3f7fba08-5be7-4b2c-a5cd-be3aa74fc8b6"}
{"timestamp": "2025-12-29T13:29:46.734209+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "3f7fba08-5be7-4b2c-a5cd-be3aa74fc8b6"}
{"timestamp": "2025-12-29T13:29:46.734912+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "3f7fba08-5be7-4b2c-a5cd-be3aa74fc8b6"}
{"timestamp": "2025-12-29T13:29:46.735081+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "3f7fba08-5be7-4b2c-a5cd-be3aa74fc8b6"}
{"timestamp": "2025-12-29T13:29:46.736081+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.023s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "3f7fba08-5be7-4b2c-a5cd-be3aa74fc8b6"}
{"timestamp": "2025-12-29T13:29:46.736962+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "3f7fba08-5be7-4b2c-a5cd-be3aa74fc8b6"}
{"timestamp": "2025-12-29T13:29:48.785542+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:48.788186+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:48.788813+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:48.789169+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'pk_1': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:48.791766+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:48.792604+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'pk_1': 33}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:48.794827+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:48.795248+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.78s ago] {'screen_id_1': 33, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:48.797238+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:48.797633+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.78s ago] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 34, 'screen_id': 33}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:48.801300+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:48.805674+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:48.806323+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:48.806765+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.78s ago] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:48.809494+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:48.809808+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.78s ago] {'pk_1': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:48.811697+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:48.812018+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.78s ago] {'pk_1': 33}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:48.813827+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 25}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:48.814130+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:48.814897+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:48.815217+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:48.816360+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.031s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:48.817573+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "8d8f0058-9dea-4ffb-bef2-00a080289054"}
{"timestamp": "2025-12-29T13:29:50.863151+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:50.865722+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:50.866390+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:50.866875+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.66s ago] {'email_1': 'test_cancel_1767014988.8173316@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.070917+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.071413+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.64s ago] {'email': 'test_cancel_1767014988.8173316@example.com', 'hashed_password': '$2b$12$Eud0lOYCS3Ui.C63OGqGc.JAu.ptCOFeCBW0He/WdPHmVg90e4oEa', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.073222+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.077709+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.078358+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.078768+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.64s ago] {'pk_1': 49}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.080983+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 49, 'email': 'test_cancel_1767014988.8173316@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.081269+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.082076+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.082313+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.082492+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.084238+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.084861+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.085290+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.61s ago] {'user_id_1': 49, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.087573+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.087878+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.61s ago] {'user_id': 49, 'name': None, 'email': 'test_cancel_1767014988.8173316@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.089828+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.094144+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.094643+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.094893+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.61s ago] {'pk_1': 49}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.097222+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 49, 'user_id': 49, 'email': 'test_cancel_1767014988.8173316@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.097485+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.097700+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.098077+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.099122+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.100352+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.100726+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.9s ago] {'email_1': 'test_cancel_1767014988.8173316@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.304503+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 49, 'email': 'test_cancel_1767014988.8173316@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.304920+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.305828+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.306121+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.307284+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.444s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:51.308234+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "98a0fab9-ec68-4e44-b773-f77b79dc9a67"}
{"timestamp": "2025-12-29T13:29:53.347633+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.350227+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.350853+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.351207+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.75s ago] {'pk_1': 49}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.354106+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.354620+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.75s ago] {'user_id': 49, 'showtime_id': 25, 'seat_code': 'R6-6', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 13, 29, 53, 353765, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 39, 53, 353495, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.357011+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.361780+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.362678+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.363081+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.75s ago] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.365152+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 24, 'user_id': 49, 'showtime_id': 25, 'seat_code': 'R6-6'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.365477+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.366175+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.366398+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.366557+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.368366+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.369178+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.369561+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.75s ago] {'showtime_id_1': 25, 'seat_code_1': 'R6-6', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.372207+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.372668+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.75s ago] {'seat_code': 'R6-6', 'showtime_id': 25, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.375371+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.375887+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.75s ago] {'status': 'LOCKED', 'locked_by_user_id': 49, 'lock_expires_at': datetime.datetime(2025, 12, 29, 13, 39, 53, 374628, tzinfo=datetime.timezone.utc), 'seat_locks_id': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.377833+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.382922+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.383757+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.384249+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.75s ago] {'pk_1': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.386225+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 25, 'seat_code': 'R6-6', 'user_id': 49, 'expires_at': '2025-12-29T13:39:53.374628+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.386625+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.386789+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.387030+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.388033+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.388257+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.388628+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.389000+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 24, 'user_id': 49, 'showtime_id': 25, 'seat_code': 'R6-6'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.389341+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 24", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.391113+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.391679+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.391979+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.75s ago] {'user_id': 49, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.394621+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.398466+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.399008+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.399285+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.75s ago] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.401163+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 24, 'reservation_id': 24, 'user_id': 49, 'showtime_id': 25, 'seat_code': 'R6-6'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.401377+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.401548+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_order_created for order.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.401861+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_order_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.402127+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 24", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.403696+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.404196+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.404443+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.72s ago] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.406407+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 24, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.406596+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.406715+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_pricing_snapshot_created for pricing.snapshot_created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.406829+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_pricing_snapshot_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.407052+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 24, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.408483+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.409131+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.409469+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.7s ago] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.411733+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.412158+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.7s ago] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.413644+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.417384+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.417974+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.418321+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.77s ago] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.420104+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 24 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.420379+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.421333+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.421517+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 24: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.421803+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.422875+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.423071+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 24", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.423370+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.424765+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.424954+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.425054+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.426298+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.426723+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.426990+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.69s ago] {'actor_id': 49, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 24, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 24, \"user_id\": 49, \"showtime_id\": 25, \"seat_code\": \"R6-6\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 29, 53, 426538, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.428882+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.433198+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.433819+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.434288+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.69s ago] {'pk_1': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.436428+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.437449+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.438572+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.091s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:53.439823+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b8fd81b6-d993-40bf-a214-03c4625ecd58"}
{"timestamp": "2025-12-29T13:29:55.492076+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "6109b8d1-5f34-4776-adf5-6873811c6ea6"}
{"timestamp": "2025-12-29T13:29:55.494674+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6109b8d1-5f34-4776-adf5-6873811c6ea6"}
{"timestamp": "2025-12-29T13:29:55.495299+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6109b8d1-5f34-4776-adf5-6873811c6ea6"}
{"timestamp": "2025-12-29T13:29:55.495608+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 25.9s ago] {'pk_1': 49}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6109b8d1-5f34-4776-adf5-6873811c6ea6"}
{"timestamp": "2025-12-29T13:29:55.498263+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6109b8d1-5f34-4776-adf5-6873811c6ea6"}
{"timestamp": "2025-12-29T13:29:55.498701+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.7s ago] {'user_id_1': 49}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6109b8d1-5f34-4776-adf5-6873811c6ea6"}
{"timestamp": "2025-12-29T13:29:55.500932+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.009s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "6109b8d1-5f34-4776-adf5-6873811c6ea6"}
{"timestamp": "2025-12-29T13:29:55.501838+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6109b8d1-5f34-4776-adf5-6873811c6ea6"}
{"timestamp": "2025-12-29T13:29:57.549717+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/order/24/initiate", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "783adc66-65da-4ff9-9833-82f25a43a928"}
{"timestamp": "2025-12-29T13:29:57.552131+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "783adc66-65da-4ff9-9833-82f25a43a928"}
{"timestamp": "2025-12-29T13:29:57.552748+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "783adc66-65da-4ff9-9833-82f25a43a928"}
{"timestamp": "2025-12-29T13:29:57.553108+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 27.96s ago] {'pk_1': 49}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "783adc66-65da-4ff9-9833-82f25a43a928"}
{"timestamp": "2025-12-29T13:29:57.555969+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "783adc66-65da-4ff9-9833-82f25a43a928"}
{"timestamp": "2025-12-29T13:29:57.556441+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 27.84s ago] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "783adc66-65da-4ff9-9833-82f25a43a928"}
{"timestamp": "2025-12-29T13:29:57.558504+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO payment_attempts (order_id, amount_attempted, status, final_amount, failure_reason, provider_payment_id, created_at) VALUES (%(order_id)s, %(amount_attempted)s, %(status)s, %(final_amount)s, %(failure_reason)s, %(provider_payment_id)s, %(created_at)s) RETURNING payment_attempts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "783adc66-65da-4ff9-9833-82f25a43a928"}
{"timestamp": "2025-12-29T13:29:57.558933+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.69s ago] {'order_id': 24, 'amount_attempted': 1000, 'status': 'PENDING', 'final_amount': 1000, 'failure_reason': None, 'provider_payment_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 29, 57, 558151, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "783adc66-65da-4ff9-9833-82f25a43a928"}
{"timestamp": "2025-12-29T13:29:57.560616+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "783adc66-65da-4ff9-9833-82f25a43a928"}
{"timestamp": "2025-12-29T13:29:57.565603+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "783adc66-65da-4ff9-9833-82f25a43a928"}
{"timestamp": "2025-12-29T13:29:57.566298+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "783adc66-65da-4ff9-9833-82f25a43a928"}
{"timestamp": "2025-12-29T13:29:57.566695+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.69s ago] {'pk_1': 17}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "783adc66-65da-4ff9-9833-82f25a43a928"}
{"timestamp": "2025-12-29T13:29:57.569258+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "783adc66-65da-4ff9-9833-82f25a43a928"}
{"timestamp": "2025-12-29T13:29:57.569698+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.69s ago] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "783adc66-65da-4ff9-9833-82f25a43a928"}
{"timestamp": "2025-12-29T13:29:57.571304+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.pending with payload: {'payment_attempt_id': 17, 'order_id': 24, 'amount_attempted': 1000, 'final_amount': 1000, 'user_id': 49}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "783adc66-65da-4ff9-9833-82f25a43a928"}
{"timestamp": "2025-12-29T13:29:57.571634+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "783adc66-65da-4ff9-9833-82f25a43a928"}
{"timestamp": "2025-12-29T13:29:57.572678+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.pending to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "783adc66-65da-4ff9-9833-82f25a43a928"}
{"timestamp": "2025-12-29T13:29:57.572945+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: payment.pending", "module": "event_bus", "function": "publish", "line": 31, "request_id": "783adc66-65da-4ff9-9833-82f25a43a928"}
{"timestamp": "2025-12-29T13:29:57.574094+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/order/24/initiate \u2192 200 (0.024s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "783adc66-65da-4ff9-9833-82f25a43a928"}
{"timestamp": "2025-12-29T13:29:57.574941+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "783adc66-65da-4ff9-9833-82f25a43a928"}
{"timestamp": "2025-12-29T13:29:59.614931+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/17/confirm", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.618320+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.619098+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.619608+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 30.02s ago] {'pk_1': 49}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.625523+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id AS payment_attempts_id, payment_attempts.order_id AS payment_attempts_order_id, payment_attempts.amount_attempted AS payment_attempts_amount_attempted, payment_attempts.status AS payment_attempts_status, payment_attempts.final_amount AS payment_attempts_final_amount, payment_attempts.failure_reason AS payment_attempts_failure_reason, payment_attempts.provider_payment_id AS payment_attempts_provider_payment_id, payment_attempts.created_at AS payment_attempts_created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.626422+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.69s ago] {'pk_1': 17}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.630208+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.631078+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.69s ago] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.633838+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE payment_attempts SET status=%(status)s, provider_payment_id=%(provider_payment_id)s WHERE payment_attempts.id = %(payment_attempts_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.634856+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.69s ago] {'status': 'SUCCEEDED', 'provider_payment_id': 'mock_payment_17', 'payment_attempts_id': 17}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.637274+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.643714+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.645055+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.645839+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 25.77s ago] {'pk_1': 17}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.649467+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.650189+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 25.77s ago] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.652329+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.succeeded with payload: {'payment_attempt_id': 17, 'order_id': 24, 'final_amount': 1000.0, 'user_id': 49}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.653174+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.654303+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.succeeded to 4 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.654673+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_payment_succeeded for payment.succeeded", "module": "event_bus", "function": "publish", "line": 36, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.655125+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_payment_succeeded", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.655587+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.655948+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_payment_succeeded for payment.succeeded", "module": "event_bus", "function": "publish", "line": 36, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.656248+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_payment_succeeded", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.658338+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.659216+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.660144+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 29.95s ago] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.664221+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET is_completed=%(is_completed)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.664789+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.7s ago] {'is_completed': True, 'orders_id': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.667013+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.672709+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.673679+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.674355+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 30.03s ago] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.677508+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.completed with payload: {'order_id': 24}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.677812+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.completed to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.678133+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: order.completed", "module": "event_bus", "function": "publish", "line": 31, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.678555+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.679753+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.679985+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_payment_succeeded for payment.succeeded", "module": "event_bus", "function": "publish", "line": 36, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.680251+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_payment_succeeded", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.681850+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.682686+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.684702+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 43.21s ago] {'user_id_1': 49, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.690321+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.692389+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.692817+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_payment_succeeded for payment.succeeded", "module": "event_bus", "function": "publish", "line": 36, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.693143+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_payment_succeeded", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.694938+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.695511+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.695908+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 29.96s ago] {'actor_id': 49, 'actor_type': 'user', 'action': 'payment.succeeded', 'target_id': 24, 'target_type': 'order', 'payload': '{\"payment_attempt_id\": 17, \"order_id\": 24, \"final_amount\": 1000.0, \"user_id\": 49}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 29, 59, 695200, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.698154+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.702269+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.702975+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.703360+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 29.96s ago] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.705466+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.706531+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.707653+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/17/confirm \u2192 200 (0.093s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:29:59.708711+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "3eb9d5bf-f190-4f26-a528-26fb22ee7073"}
{"timestamp": "2025-12-29T13:30:01.757141+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/24/cancel", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.760127+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.760782+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.761124+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.16s ago] {'pk_1': 49}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.764453+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id AS reservations_id, reservations.user_id AS reservations_user_id, reservations.showtime_id AS reservations_showtime_id, reservations.seat_code AS reservations_seat_code, reservations.status AS reservations_status, reservations.created_at AS reservations_created_at, reservations.expires_at AS reservations_expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.764813+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.767096+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE reservations SET status=%(status)s, expires_at=%(expires_at)s WHERE reservations.id = %(reservations_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.767417+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'status': 'CANCELLED', 'expires_at': None, 'reservations_id': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.768975+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.773861+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.774428+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.774710+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.16s ago] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.776795+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.cancelled with payload: {'reservation_id': 24}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.777042+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.777889+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.cancelled to 4 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.778219+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_cancelled for reservation.cancelled", "module": "event_bus", "function": "publish", "line": 36, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.778492+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_cancelled", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.778799+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_cancelled completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.778956+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_cancelled for reservation.cancelled", "module": "event_bus", "function": "publish", "line": 36, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.779052+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_cancelled", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.779149+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Order handler received reservation.cancelled: {'reservation_id': 24}", "module": "handlers", "function": "on_reservation_cancelled", "line": 50, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.780605+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.781448+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.reservation_id = %(reservation_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.781834+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00036s] {'reservation_id_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.783981+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.cancelled with payload: {'order_id': 24}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.784182+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.cancelled to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.784309+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: order.cancelled", "module": "event_bus", "function": "publish", "line": 31, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.784525+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.785694+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_cancelled completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.785918+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_cancelled for reservation.cancelled", "module": "event_bus", "function": "publish", "line": 36, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.786171+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_cancelled", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.787910+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.788796+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.reservation_id = %(reservation_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.789209+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.007732s ago] {'reservation_id_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.792641+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.order_id = %(order_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.793163+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'order_id_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.796314+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT refunds.id, refunds.reservation_id, refunds.payment_attempt_id, refunds.amount, refunds.reason, refunds.created_at, refunds.status \nFROM refunds \nWHERE refunds.reservation_id = %(reservation_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.796730+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'reservation_id_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.802918+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO refunds (reservation_id, payment_attempt_id, amount, reason, created_at, status) VALUES (%(reservation_id)s, %(payment_attempt_id)s, %(amount)s, %(reason)s, %(created_at)s, %(status)s) RETURNING refunds.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.803278+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'reservation_id': 24, 'payment_attempt_id': 17, 'amount': 1000.0, 'reason': 'reservation_cancelled', 'created_at': datetime.datetime(2025, 12, 29, 13, 30, 1, 802620, tzinfo=datetime.timezone.utc), 'status': 'ISSUED'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.808652+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.812783+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.813814+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT refunds.id, refunds.reservation_id, refunds.payment_attempt_id, refunds.amount, refunds.reason, refunds.created_at, refunds.status \nFROM refunds \nWHERE refunds.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.814215+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'pk_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.816915+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id AS payment_attempts_id, payment_attempts.order_id AS payment_attempts_order_id, payment_attempts.amount_attempted AS payment_attempts_amount_attempted, payment_attempts.status AS payment_attempts_status, payment_attempts.final_amount AS payment_attempts_final_amount, payment_attempts.failure_reason AS payment_attempts_failure_reason, payment_attempts.provider_payment_id AS payment_attempts_provider_payment_id, payment_attempts.created_at AS payment_attempts_created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.817192+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'pk_1': 17}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.818463+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: refund.issued with payload: {'refund_id': 1, 'reservation_id': 24, 'payment_attempt_id': 17, 'amount': 1000.0}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.818971+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.824294+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.event_bus", "message": "\u274c Event handler failed: reservation.cancelled -> on_reservation_cancelled: asyncio.run() cannot be called from a running event loop", "module": "event_bus", "function": "_safe_invoke", "line": 45, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\event_bus.py\", line 42, in _safe_invoke\n    await handler(payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\refund\\handlers.py\", line 34, in on_reservation_cancelled\n    issue_refund_from_event(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        db,\n        ^^^\n    ...<2 lines>...\n        reason=\"reservation_cancelled\"\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\refund\\service.py\", line 58, in issue_refund_from_event\n    publish_event(event[\"type\"], event[\"payload\"])\n    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\shared\\services\\event_publisher.py\", line 17, in publish_event\n    asyncio.run(event_bus.publish(event_type, payload))\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 191, in run\n    raise RuntimeError(\n        \"asyncio.run() cannot be called from a running event loop\")\nRuntimeError: asyncio.run() cannot be called from a running event loop"}
{"timestamp": "2025-12-29T13:30:01.829762+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_cancelled for reservation.cancelled", "module": "event_bus", "function": "publish", "line": 36, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.829943+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_cancelled", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.831438+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.831951+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.832303+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.1s ago] {'actor_id': None, 'actor_type': 'user', 'action': 'reservation.cancelled', 'target_id': 24, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 24}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 30, 1, 831705, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.834740+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.850904+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.event_bus", "message": "\u274c Event handler failed: reservation.cancelled -> on_reservation_cancelled: (psycopg2.errors.NotNullViolation) null value in column \"actor_id\" of relation \"audit_logs\" violates not-null constraint\nDETAIL:  Failing row contains (30, null, user, reservation.cancelled, 24, reservation, {\"reservation_id\": 24}, null, 2025-12-29 13:30:01.831705+00).\n\n[SQL: INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id]\n[parameters: {'actor_id': None, 'actor_type': 'user', 'action': 'reservation.cancelled', 'target_id': 24, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 24}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 30, 1, 831705, tzinfo=datetime.timezone.utc)}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)", "module": "event_bus", "function": "_safe_invoke", "line": 45, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\npsycopg2.errors.NotNullViolation: null value in column \"actor_id\" of relation \"audit_logs\" violates not-null constraint\nDETAIL:  Failing row contains (30, null, user, reservation.cancelled, 24, reservation, {\"reservation_id\": 24}, null, 2025-12-29 13:30:01.831705+00).\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\event_bus.py\", line 42, in _safe_invoke\n    await handler(payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\audit\\handlers.py\", line 28, in on_reservation_cancelled\n    write_audit_log(\n    ~~~~~~~~~~~~~~~^\n        db=db,\n        ^^^^^^\n    ...<5 lines>...\n        payload=payload,\n        ^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\audit\\service.py\", line 31, in write_audit_log\n    return repo.create(db, entry)\n           ~~~~~~~~~~~^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\audit\\repository.py\", line 17, in create\n    db.commit()\n    ~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2030, in commit\n    trans.commit(_to_root=True)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^\n  File \"<string>\", line 2, in commit\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\state_changes.py\", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 1311, in commit\n    self._prepare_impl()\n    ~~~~~~~~~~~~~~~~~~^^\n  File \"<string>\", line 2, in _prepare_impl\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\state_changes.py\", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 1286, in _prepare_impl\n    self.session.flush()\n    ~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 4331, in flush\n    self._flush(objects)\n    ~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 4466, in _flush\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 4427, in _flush\n    flush_context.execute()\n    ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py\", line 466, in execute\n    rec.execute(self)\n    ~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py\", line 642, in execute\n    util.preloaded.orm_persistence.save_obj(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self.mapper,\n        ^^^^^^^^^^^^\n        uow.states_for_mapper_hierarchy(self.mapper, False, False),\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        uow,\n        ^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\persistence.py\", line 93, in save_obj\n    _emit_insert_statements(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        base_mapper,\n        ^^^^^^^^^^^^\n    ...<3 lines>...\n        insert,\n        ^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\persistence.py\", line 1233, in _emit_insert_statements\n    result = connection.execute(\n        statement,\n        params,\n        execution_options=execution_options,\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\nsqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column \"actor_id\" of relation \"audit_logs\" violates not-null constraint\nDETAIL:  Failing row contains (30, null, user, reservation.cancelled, 24, reservation, {\"reservation_id\": 24}, null, 2025-12-29 13:30:01.831705+00).\n\n[SQL: INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id]\n[parameters: {'actor_id': None, 'actor_type': 'user', 'action': 'reservation.cancelled', 'target_id': 24, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 24}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 30, 1, 831705, tzinfo=datetime.timezone.utc)}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)"}
{"timestamp": "2025-12-29T13:30:01.863351+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/24/cancel \u2192 200 (0.106s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:01.864346+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ac8711a6-990c-4ba8-ab03-7727698bcc10"}
{"timestamp": "2025-12-29T13:30:03.917927+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:03.920549+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:03.921240+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:03.921626+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.72s ago] {'email_1': 'test_admin_1767015001.8649912@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.125359+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.125743+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.7s ago] {'email': 'test_admin_1767015001.8649912@example.com', 'hashed_password': '$2b$12$5GmuJQ6pnsrsKJFFsIbKR.V1xIYGr/A829CIKQKAN.qJfnIZLcBiq', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.127469+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.131427+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.132310+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.132822+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.7s ago] {'pk_1': 50}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.134836+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 50, 'email': 'test_admin_1767015001.8649912@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.135121+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.135855+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.136057+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.136206+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.137967+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.138596+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.138918+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.66s ago] {'user_id_1': 50, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.141671+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.142022+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.66s ago] {'user_id': 50, 'name': None, 'email': 'test_admin_1767015001.8649912@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.143595+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.147784+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.148269+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.148488+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.66s ago] {'pk_1': 50}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.150705+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 50, 'user_id': 50, 'email': 'test_admin_1767015001.8649912@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.150917+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.151089+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.151478+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.152783+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.154047+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.154311+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.95s ago] {'email_1': 'test_admin_1767015001.8649912@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.357821+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 50, 'email': 'test_admin_1767015001.8649912@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.358161+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.358922+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.359126+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.360181+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.442s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:04.361121+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "21fa437d-9d74-41ff-a795-c62714b07a94"}
{"timestamp": "2025-12-29T13:30:06.402738+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "d8aa0942-6eb7-4f0b-b042-e30195ac88a0"}
{"timestamp": "2025-12-29T13:30:06.405612+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d8aa0942-6eb7-4f0b-b042-e30195ac88a0"}
{"timestamp": "2025-12-29T13:30:06.406244+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8aa0942-6eb7-4f0b-b042-e30195ac88a0"}
{"timestamp": "2025-12-29T13:30:06.406613+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.64s ago] {'title_1': 'Test Movie 1767015001.8649912'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8aa0942-6eb7-4f0b-b042-e30195ac88a0"}
{"timestamp": "2025-12-29T13:30:06.409176+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8aa0942-6eb7-4f0b-b042-e30195ac88a0"}
{"timestamp": "2025-12-29T13:30:06.409656+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.64s ago] {'title': 'Test Movie 1767015001.8649912', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8aa0942-6eb7-4f0b-b042-e30195ac88a0"}
{"timestamp": "2025-12-29T13:30:06.411738+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "d8aa0942-6eb7-4f0b-b042-e30195ac88a0"}
{"timestamp": "2025-12-29T13:30:06.416965+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d8aa0942-6eb7-4f0b-b042-e30195ac88a0"}
{"timestamp": "2025-12-29T13:30:06.417855+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8aa0942-6eb7-4f0b-b042-e30195ac88a0"}
{"timestamp": "2025-12-29T13:30:06.418193+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.64s ago] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d8aa0942-6eb7-4f0b-b042-e30195ac88a0"}
{"timestamp": "2025-12-29T13:30:06.420234+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 35}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "d8aa0942-6eb7-4f0b-b042-e30195ac88a0"}
{"timestamp": "2025-12-29T13:30:06.420504+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "d8aa0942-6eb7-4f0b-b042-e30195ac88a0"}
{"timestamp": "2025-12-29T13:30:06.421227+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "d8aa0942-6eb7-4f0b-b042-e30195ac88a0"}
{"timestamp": "2025-12-29T13:30:06.421425+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "d8aa0942-6eb7-4f0b-b042-e30195ac88a0"}
{"timestamp": "2025-12-29T13:30:06.422654+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.020s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "d8aa0942-6eb7-4f0b-b042-e30195ac88a0"}
{"timestamp": "2025-12-29T13:30:06.423576+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d8aa0942-6eb7-4f0b-b042-e30195ac88a0"}
{"timestamp": "2025-12-29T13:30:08.464783+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "8d472196-2272-4cc5-9519-e73671cf1c19"}
{"timestamp": "2025-12-29T13:30:08.467479+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8d472196-2272-4cc5-9519-e73671cf1c19"}
{"timestamp": "2025-12-29T13:30:08.468033+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8d472196-2272-4cc5-9519-e73671cf1c19"}
{"timestamp": "2025-12-29T13:30:08.468379+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.63s ago] {'name_1': 'Test Layout 1767015001.8649912'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8d472196-2272-4cc5-9519-e73671cf1c19"}
{"timestamp": "2025-12-29T13:30:08.470950+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8d472196-2272-4cc5-9519-e73671cf1c19"}
{"timestamp": "2025-12-29T13:30:08.471368+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.62s ago] {'name': 'Test Layout 1767015001.8649912', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8d472196-2272-4cc5-9519-e73671cf1c19"}
{"timestamp": "2025-12-29T13:30:08.473452+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "8d472196-2272-4cc5-9519-e73671cf1c19"}
{"timestamp": "2025-12-29T13:30:08.478360+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8d472196-2272-4cc5-9519-e73671cf1c19"}
{"timestamp": "2025-12-29T13:30:08.478946+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8d472196-2272-4cc5-9519-e73671cf1c19"}
{"timestamp": "2025-12-29T13:30:08.479355+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.62s ago] {'pk_1': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8d472196-2272-4cc5-9519-e73671cf1c19"}
{"timestamp": "2025-12-29T13:30:08.482011+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 34}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "8d472196-2272-4cc5-9519-e73671cf1c19"}
{"timestamp": "2025-12-29T13:30:08.482433+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "8d472196-2272-4cc5-9519-e73671cf1c19"}
{"timestamp": "2025-12-29T13:30:08.483316+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "8d472196-2272-4cc5-9519-e73671cf1c19"}
{"timestamp": "2025-12-29T13:30:08.483585+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "8d472196-2272-4cc5-9519-e73671cf1c19"}
{"timestamp": "2025-12-29T13:30:08.485037+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.020s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "8d472196-2272-4cc5-9519-e73671cf1c19"}
{"timestamp": "2025-12-29T13:30:08.486044+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "8d472196-2272-4cc5-9519-e73671cf1c19"}
{"timestamp": "2025-12-29T13:30:10.525950+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "77daceda-c85b-4810-b72a-509e7291f94e"}
{"timestamp": "2025-12-29T13:30:10.528858+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "77daceda-c85b-4810-b72a-509e7291f94e"}
{"timestamp": "2025-12-29T13:30:10.529550+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "77daceda-c85b-4810-b72a-509e7291f94e"}
{"timestamp": "2025-12-29T13:30:10.529898+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.61s ago] {'name_1': 'Test Screen 1767015001.8649912', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "77daceda-c85b-4810-b72a-509e7291f94e"}
{"timestamp": "2025-12-29T13:30:10.532231+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "77daceda-c85b-4810-b72a-509e7291f94e"}
{"timestamp": "2025-12-29T13:30:10.532502+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.61s ago] {'id_1': 34, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "77daceda-c85b-4810-b72a-509e7291f94e"}
{"timestamp": "2025-12-29T13:30:10.534397+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "77daceda-c85b-4810-b72a-509e7291f94e"}
{"timestamp": "2025-12-29T13:30:10.534716+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.6s ago] {'name': 'Test Screen 1767015001.8649912', 'capacity': 150, 'seat_layout_id': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "77daceda-c85b-4810-b72a-509e7291f94e"}
{"timestamp": "2025-12-29T13:30:10.536577+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "77daceda-c85b-4810-b72a-509e7291f94e"}
{"timestamp": "2025-12-29T13:30:10.540768+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "77daceda-c85b-4810-b72a-509e7291f94e"}
{"timestamp": "2025-12-29T13:30:10.541585+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "77daceda-c85b-4810-b72a-509e7291f94e"}
{"timestamp": "2025-12-29T13:30:10.542100+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.6s ago] {'pk_1': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "77daceda-c85b-4810-b72a-509e7291f94e"}
{"timestamp": "2025-12-29T13:30:10.544321+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 34}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "77daceda-c85b-4810-b72a-509e7291f94e"}
{"timestamp": "2025-12-29T13:30:10.544571+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "77daceda-c85b-4810-b72a-509e7291f94e"}
{"timestamp": "2025-12-29T13:30:10.545264+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "77daceda-c85b-4810-b72a-509e7291f94e"}
{"timestamp": "2025-12-29T13:30:10.545442+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "77daceda-c85b-4810-b72a-509e7291f94e"}
{"timestamp": "2025-12-29T13:30:10.546589+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.021s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "77daceda-c85b-4810-b72a-509e7291f94e"}
{"timestamp": "2025-12-29T13:30:10.547692+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "77daceda-c85b-4810-b72a-509e7291f94e"}
{"timestamp": "2025-12-29T13:30:12.588987+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:12.591915+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:12.592629+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:12.593038+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.59s ago] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:12.595750+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:12.596229+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.59s ago] {'pk_1': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:12.598684+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:12.599335+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.59s ago] {'screen_id_1': 34, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:12.601537+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:12.601920+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.59s ago] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 35, 'screen_id': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:12.604185+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:12.608447+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:12.609168+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:12.609527+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.58s ago] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:12.612019+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:12.612470+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.58s ago] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:12.614298+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:12.614748+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.58s ago] {'pk_1': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:12.616354+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 26}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:12.616691+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:12.617445+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:12.617614+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:12.618687+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.030s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:12.620085+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "1b91f8c1-fc58-40c5-bf71-eeffef3466a3"}
{"timestamp": "2025-12-29T13:30:14.667829+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.670391+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.671091+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.671508+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.47s ago] {'email_1': 'test_failpay_1767015012.6198866@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.883645+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.884275+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.46s ago] {'email': 'test_failpay_1767015012.6198866@example.com', 'hashed_password': '$2b$12$en4pS7.uQNpkwp7wxOtaXeZMia8yLV7EwUqKzvzYcA0VGgxUBddJm', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.886569+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.891406+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.892503+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.893151+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.46s ago] {'pk_1': 51}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.895896+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 51, 'email': 'test_failpay_1767015012.6198866@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.896287+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.897485+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.897846+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.898118+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.899926+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.900589+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.900979+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.43s ago] {'user_id_1': 51, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.903285+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.903746+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.42s ago] {'user_id': 51, 'name': None, 'email': 'test_failpay_1767015012.6198866@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.906127+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.910270+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.911235+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.911713+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.42s ago] {'pk_1': 51}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.913931+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 51, 'user_id': 51, 'email': 'test_failpay_1767015012.6198866@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.914206+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.914404+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.914765+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.916080+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.917751+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:14.918356+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.72s ago] {'email_1': 'test_failpay_1767015012.6198866@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:15.121630+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 51, 'email': 'test_failpay_1767015012.6198866@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:15.122048+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:15.123150+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:15.123523+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:15.124816+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.457s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:15.125766+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c93ba29e-269f-441a-bdc9-34455dd13344"}
{"timestamp": "2025-12-29T13:30:17.164421+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.167387+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.168122+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.168489+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.57s ago] {'pk_1': 51}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.171424+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.171954+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.57s ago] {'user_id': 51, 'showtime_id': 26, 'seat_code': 'R7-7', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 13, 30, 17, 171071, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 40, 17, 170793, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.174195+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.178674+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.179553+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.180004+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.57s ago] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.182165+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 25, 'user_id': 51, 'showtime_id': 26, 'seat_code': 'R7-7'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.182618+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.183517+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.183765+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.183945+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.185896+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.186604+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.186970+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.57s ago] {'showtime_id_1': 26, 'seat_code_1': 'R7-7', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.189718+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.190215+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.57s ago] {'seat_code': 'R7-7', 'showtime_id': 26, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.192459+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.192811+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.57s ago] {'status': 'LOCKED', 'locked_by_user_id': 51, 'lock_expires_at': datetime.datetime(2025, 12, 29, 13, 40, 17, 191937, tzinfo=datetime.timezone.utc), 'seat_locks_id': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.194546+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.198744+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.199338+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.199727+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.57s ago] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.201885+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 26, 'seat_code': 'R7-7', 'user_id': 51, 'expires_at': '2025-12-29T13:40:17.191937+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.202162+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.202446+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.202896+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.204011+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.204267+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.204460+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.204731+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 25, 'user_id': 51, 'showtime_id': 26, 'seat_code': 'R7-7'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.205045+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 25", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.206609+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.207236+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.207595+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.57s ago] {'user_id': 51, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.209956+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.213778+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.214335+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.214677+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.57s ago] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.216880+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 25, 'reservation_id': 25, 'user_id': 51, 'showtime_id': 26, 'seat_code': 'R7-7'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.217131+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.217396+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_order_created for order.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.217622+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_order_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.217994+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 25", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.219682+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.220238+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.220571+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.54s ago] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.223251+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 25, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.223650+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.224080+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_pricing_snapshot_created for pricing.snapshot_created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.224328+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_pricing_snapshot_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.224533+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 25, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.226253+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.226814+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.227041+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.52s ago] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.229253+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.229772+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.51s ago] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.231689+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.236305+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.237179+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.237776+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.59s ago] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.240500+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 25 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.241052+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.242285+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.242665+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 25: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.243285+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.244779+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.245116+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 25", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.245525+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.246802+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.247083+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.247455+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.249129+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.249759+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.250301+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.52s ago] {'actor_id': 51, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 25, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 25, \"user_id\": 51, \"showtime_id\": 26, \"seat_code\": \"R7-7\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 30, 17, 249391, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.252901+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.257131+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.257972+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.258458+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.52s ago] {'pk_1': 31}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.260973+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.262031+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.263289+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.099s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:17.264288+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "709d1dbc-6b8f-44ec-ae2f-ec649a820ef5"}
{"timestamp": "2025-12-29T13:30:19.307189+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "c7bec67a-404b-4177-90ae-0d466118d5ef"}
{"timestamp": "2025-12-29T13:30:19.310077+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c7bec67a-404b-4177-90ae-0d466118d5ef"}
{"timestamp": "2025-12-29T13:30:19.310764+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c7bec67a-404b-4177-90ae-0d466118d5ef"}
{"timestamp": "2025-12-29T13:30:19.311198+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 49.71s ago] {'pk_1': 51}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c7bec67a-404b-4177-90ae-0d466118d5ef"}
{"timestamp": "2025-12-29T13:30:19.314606+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c7bec67a-404b-4177-90ae-0d466118d5ef"}
{"timestamp": "2025-12-29T13:30:19.315178+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.52s ago] {'user_id_1': 51}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c7bec67a-404b-4177-90ae-0d466118d5ef"}
{"timestamp": "2025-12-29T13:30:19.317428+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.010s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "c7bec67a-404b-4177-90ae-0d466118d5ef"}
{"timestamp": "2025-12-29T13:30:19.318458+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c7bec67a-404b-4177-90ae-0d466118d5ef"}
{"timestamp": "2025-12-29T13:30:21.368991+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/order/25/initiate", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "c53fe3e6-af4d-466a-b806-492061a2f319"}
{"timestamp": "2025-12-29T13:30:21.371896+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c53fe3e6-af4d-466a-b806-492061a2f319"}
{"timestamp": "2025-12-29T13:30:21.372543+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c53fe3e6-af4d-466a-b806-492061a2f319"}
{"timestamp": "2025-12-29T13:30:21.372921+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 51.78s ago] {'pk_1': 51}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c53fe3e6-af4d-466a-b806-492061a2f319"}
{"timestamp": "2025-12-29T13:30:21.375770+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c53fe3e6-af4d-466a-b806-492061a2f319"}
{"timestamp": "2025-12-29T13:30:21.376425+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 51.66s ago] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c53fe3e6-af4d-466a-b806-492061a2f319"}
{"timestamp": "2025-12-29T13:30:21.378406+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO payment_attempts (order_id, amount_attempted, status, final_amount, failure_reason, provider_payment_id, created_at) VALUES (%(order_id)s, %(amount_attempted)s, %(status)s, %(final_amount)s, %(failure_reason)s, %(provider_payment_id)s, %(created_at)s) RETURNING payment_attempts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c53fe3e6-af4d-466a-b806-492061a2f319"}
{"timestamp": "2025-12-29T13:30:21.378865+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.51s ago] {'order_id': 25, 'amount_attempted': 1000, 'status': 'PENDING', 'final_amount': 1000, 'failure_reason': None, 'provider_payment_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 30, 21, 378061, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c53fe3e6-af4d-466a-b806-492061a2f319"}
{"timestamp": "2025-12-29T13:30:21.380675+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "c53fe3e6-af4d-466a-b806-492061a2f319"}
{"timestamp": "2025-12-29T13:30:21.385735+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c53fe3e6-af4d-466a-b806-492061a2f319"}
{"timestamp": "2025-12-29T13:30:21.386277+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c53fe3e6-af4d-466a-b806-492061a2f319"}
{"timestamp": "2025-12-29T13:30:21.386577+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.51s ago] {'pk_1': 18}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c53fe3e6-af4d-466a-b806-492061a2f319"}
{"timestamp": "2025-12-29T13:30:21.388790+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c53fe3e6-af4d-466a-b806-492061a2f319"}
{"timestamp": "2025-12-29T13:30:21.389240+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.51s ago] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c53fe3e6-af4d-466a-b806-492061a2f319"}
{"timestamp": "2025-12-29T13:30:21.391012+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.pending with payload: {'payment_attempt_id': 18, 'order_id': 25, 'amount_attempted': 1000, 'final_amount': 1000, 'user_id': 51}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "c53fe3e6-af4d-466a-b806-492061a2f319"}
{"timestamp": "2025-12-29T13:30:21.391294+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "c53fe3e6-af4d-466a-b806-492061a2f319"}
{"timestamp": "2025-12-29T13:30:21.392033+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.pending to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "c53fe3e6-af4d-466a-b806-492061a2f319"}
{"timestamp": "2025-12-29T13:30:21.392208+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: payment.pending", "module": "event_bus", "function": "publish", "line": 31, "request_id": "c53fe3e6-af4d-466a-b806-492061a2f319"}
{"timestamp": "2025-12-29T13:30:21.393192+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/order/25/initiate \u2192 200 (0.024s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "c53fe3e6-af4d-466a-b806-492061a2f319"}
{"timestamp": "2025-12-29T13:30:21.394037+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c53fe3e6-af4d-466a-b806-492061a2f319"}
{"timestamp": "2025-12-29T13:30:23.433791+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /admin/payments/18/fail", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "543d406c-56b0-4264-90eb-ae104a74a08f"}
{"timestamp": "2025-12-29T13:30:23.436278+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "543d406c-56b0-4264-90eb-ae104a74a08f"}
{"timestamp": "2025-12-29T13:30:23.436879+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "543d406c-56b0-4264-90eb-ae104a74a08f"}
{"timestamp": "2025-12-29T13:30:23.437217+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 53.84s ago] {'pk_1': 50}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "543d406c-56b0-4264-90eb-ae104a74a08f"}
{"timestamp": "2025-12-29T13:30:23.441021+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "543d406c-56b0-4264-90eb-ae104a74a08f"}
{"timestamp": "2025-12-29T13:30:23.442756+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /admin/payments/18/fail \u2192 403 (0.009s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "543d406c-56b0-4264-90eb-ae104a74a08f"}
{"timestamp": "2025-12-29T13:30:25.500080+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.503305+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.503988+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.504348+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.3s ago] {'email_1': 'test_admin_1767015023.4440458@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.711486+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.711880+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.29s ago] {'email': 'test_admin_1767015023.4440458@example.com', 'hashed_password': '$2b$12$Pi0NJsWK259EpRYqFuP45uuisJEHbX9HIrgi2BOvYwdQK2yVooMpm', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.715270+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.719807+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.720436+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.720862+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.28s ago] {'pk_1': 52}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.722833+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 52, 'email': 'test_admin_1767015023.4440458@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.723122+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.723866+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.724112+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.724243+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.725763+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.726403+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.726933+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.25s ago] {'user_id_1': 52, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.729360+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.729762+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.25s ago] {'user_id': 52, 'name': None, 'email': 'test_admin_1767015023.4440458@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.731525+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.735576+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.736069+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.736367+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.25s ago] {'pk_1': 52}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.738868+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 52, 'user_id': 52, 'email': 'test_admin_1767015023.4440458@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.739129+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.739257+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.739482+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.740514+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.741506+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.741863+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.54s ago] {'email_1': 'test_admin_1767015023.4440458@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.946956+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 52, 'email': 'test_admin_1767015023.4440458@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.947364+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.948232+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.948474+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.949630+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.450s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:25.950506+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "7682263b-461e-4ad9-887f-fe052d00544b"}
{"timestamp": "2025-12-29T13:30:27.991556+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "06ddf6fc-18d2-4391-908c-6789b0e41af9"}
{"timestamp": "2025-12-29T13:30:27.994026+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "06ddf6fc-18d2-4391-908c-6789b0e41af9"}
{"timestamp": "2025-12-29T13:30:27.994799+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "06ddf6fc-18d2-4391-908c-6789b0e41af9"}
{"timestamp": "2025-12-29T13:30:27.995138+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.23s ago] {'title_1': 'Test Movie 1767015023.4440458'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "06ddf6fc-18d2-4391-908c-6789b0e41af9"}
{"timestamp": "2025-12-29T13:30:27.997499+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "06ddf6fc-18d2-4391-908c-6789b0e41af9"}
{"timestamp": "2025-12-29T13:30:27.997901+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.23s ago] {'title': 'Test Movie 1767015023.4440458', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "06ddf6fc-18d2-4391-908c-6789b0e41af9"}
{"timestamp": "2025-12-29T13:30:27.999681+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "06ddf6fc-18d2-4391-908c-6789b0e41af9"}
{"timestamp": "2025-12-29T13:30:28.003740+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "06ddf6fc-18d2-4391-908c-6789b0e41af9"}
{"timestamp": "2025-12-29T13:30:28.004528+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "06ddf6fc-18d2-4391-908c-6789b0e41af9"}
{"timestamp": "2025-12-29T13:30:28.005049+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.23s ago] {'pk_1': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "06ddf6fc-18d2-4391-908c-6789b0e41af9"}
{"timestamp": "2025-12-29T13:30:28.007358+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 36}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "06ddf6fc-18d2-4391-908c-6789b0e41af9"}
{"timestamp": "2025-12-29T13:30:28.007607+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "06ddf6fc-18d2-4391-908c-6789b0e41af9"}
{"timestamp": "2025-12-29T13:30:28.008256+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "06ddf6fc-18d2-4391-908c-6789b0e41af9"}
{"timestamp": "2025-12-29T13:30:28.008418+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "06ddf6fc-18d2-4391-908c-6789b0e41af9"}
{"timestamp": "2025-12-29T13:30:28.009437+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.018s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "06ddf6fc-18d2-4391-908c-6789b0e41af9"}
{"timestamp": "2025-12-29T13:30:28.010390+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "06ddf6fc-18d2-4391-908c-6789b0e41af9"}
{"timestamp": "2025-12-29T13:30:30.056975+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "686682e8-e598-4882-aba8-8e00bfcdd4b6"}
{"timestamp": "2025-12-29T13:30:30.059504+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "686682e8-e598-4882-aba8-8e00bfcdd4b6"}
{"timestamp": "2025-12-29T13:30:30.060114+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "686682e8-e598-4882-aba8-8e00bfcdd4b6"}
{"timestamp": "2025-12-29T13:30:30.060490+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.22s ago] {'name_1': 'Test Layout 1767015023.4440458'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "686682e8-e598-4882-aba8-8e00bfcdd4b6"}
{"timestamp": "2025-12-29T13:30:30.063002+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "686682e8-e598-4882-aba8-8e00bfcdd4b6"}
{"timestamp": "2025-12-29T13:30:30.063384+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.22s ago] {'name': 'Test Layout 1767015023.4440458', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "686682e8-e598-4882-aba8-8e00bfcdd4b6"}
{"timestamp": "2025-12-29T13:30:30.065438+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "686682e8-e598-4882-aba8-8e00bfcdd4b6"}
{"timestamp": "2025-12-29T13:30:30.069524+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "686682e8-e598-4882-aba8-8e00bfcdd4b6"}
{"timestamp": "2025-12-29T13:30:30.070128+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "686682e8-e598-4882-aba8-8e00bfcdd4b6"}
{"timestamp": "2025-12-29T13:30:30.070632+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.21s ago] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "686682e8-e598-4882-aba8-8e00bfcdd4b6"}
{"timestamp": "2025-12-29T13:30:30.072846+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 35}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "686682e8-e598-4882-aba8-8e00bfcdd4b6"}
{"timestamp": "2025-12-29T13:30:30.073090+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "686682e8-e598-4882-aba8-8e00bfcdd4b6"}
{"timestamp": "2025-12-29T13:30:30.073740+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "686682e8-e598-4882-aba8-8e00bfcdd4b6"}
{"timestamp": "2025-12-29T13:30:30.073913+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "686682e8-e598-4882-aba8-8e00bfcdd4b6"}
{"timestamp": "2025-12-29T13:30:30.075036+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.018s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "686682e8-e598-4882-aba8-8e00bfcdd4b6"}
{"timestamp": "2025-12-29T13:30:30.075994+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "686682e8-e598-4882-aba8-8e00bfcdd4b6"}
{"timestamp": "2025-12-29T13:30:32.123832+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "7bc64145-ebd8-4371-9fad-819cb3b84399"}
{"timestamp": "2025-12-29T13:30:32.126364+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7bc64145-ebd8-4371-9fad-819cb3b84399"}
{"timestamp": "2025-12-29T13:30:32.127019+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7bc64145-ebd8-4371-9fad-819cb3b84399"}
{"timestamp": "2025-12-29T13:30:32.127390+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.2s ago] {'name_1': 'Test Screen 1767015023.4440458', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7bc64145-ebd8-4371-9fad-819cb3b84399"}
{"timestamp": "2025-12-29T13:30:32.129959+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7bc64145-ebd8-4371-9fad-819cb3b84399"}
{"timestamp": "2025-12-29T13:30:32.130394+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.2s ago] {'id_1': 35, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7bc64145-ebd8-4371-9fad-819cb3b84399"}
{"timestamp": "2025-12-29T13:30:32.132265+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7bc64145-ebd8-4371-9fad-819cb3b84399"}
{"timestamp": "2025-12-29T13:30:32.132549+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.2s ago] {'name': 'Test Screen 1767015023.4440458', 'capacity': 150, 'seat_layout_id': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7bc64145-ebd8-4371-9fad-819cb3b84399"}
{"timestamp": "2025-12-29T13:30:32.134461+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "7bc64145-ebd8-4371-9fad-819cb3b84399"}
{"timestamp": "2025-12-29T13:30:32.139373+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7bc64145-ebd8-4371-9fad-819cb3b84399"}
{"timestamp": "2025-12-29T13:30:32.139979+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7bc64145-ebd8-4371-9fad-819cb3b84399"}
{"timestamp": "2025-12-29T13:30:32.140252+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.2s ago] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7bc64145-ebd8-4371-9fad-819cb3b84399"}
{"timestamp": "2025-12-29T13:30:32.142616+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 35}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "7bc64145-ebd8-4371-9fad-819cb3b84399"}
{"timestamp": "2025-12-29T13:30:32.142993+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "7bc64145-ebd8-4371-9fad-819cb3b84399"}
{"timestamp": "2025-12-29T13:30:32.144124+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "7bc64145-ebd8-4371-9fad-819cb3b84399"}
{"timestamp": "2025-12-29T13:30:32.144343+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "7bc64145-ebd8-4371-9fad-819cb3b84399"}
{"timestamp": "2025-12-29T13:30:32.145367+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "7bc64145-ebd8-4371-9fad-819cb3b84399"}
{"timestamp": "2025-12-29T13:30:32.146253+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "7bc64145-ebd8-4371-9fad-819cb3b84399"}
{"timestamp": "2025-12-29T13:30:34.185559+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:34.188038+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:34.188604+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:34.188881+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.19s ago] {'pk_1': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:34.191496+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:34.191955+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.19s ago] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:34.193974+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:34.194313+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.18s ago] {'screen_id_1': 35, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:34.196120+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:34.196567+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.18s ago] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 36, 'screen_id': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:34.198330+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:34.202955+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:34.203861+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:34.204469+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.18s ago] {'pk_1': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:34.207767+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:34.208234+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.18s ago] {'pk_1': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:34.210549+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:34.210994+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.18s ago] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:34.212678+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 27}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:34.212937+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:34.213808+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:34.214000+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:34.215056+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.030s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:34.216027+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "737ea192-518e-4b5b-b119-a425d0216f95"}
{"timestamp": "2025-12-29T13:30:36.274403+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.277164+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.277812+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.278155+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 80.08s ago] {'email_1': 'test_admincancel_1767015034.2159493@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.482571+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.483175+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 80.06s ago] {'email': 'test_admincancel_1767015034.2159493@example.com', 'hashed_password': '$2b$12$6mLVaRl3.lqN0MzNdGsgrubVlgIbtXaTuJf90w4gQ/Qg5Iy/dcH7q', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.485051+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.490462+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.491205+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.491662+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 80.06s ago] {'pk_1': 53}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.493790+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 53, 'email': 'test_admincancel_1767015034.2159493@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.494103+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.494774+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.494952+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.495052+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.496622+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.497346+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.497774+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 80.02s ago] {'user_id_1': 53, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.500168+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.500483+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 80.02s ago] {'user_id': 53, 'name': None, 'email': 'test_admincancel_1767015034.2159493@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.502276+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.506856+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.507603+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.508085+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 80.02s ago] {'pk_1': 53}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.510542+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 53, 'user_id': 53, 'email': 'test_admincancel_1767015034.2159493@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.510807+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.510948+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.511181+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.512259+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.513532+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.513907+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 80.31s ago] {'email_1': 'test_admincancel_1767015034.2159493@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.717569+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 53, 'email': 'test_admincancel_1767015034.2159493@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.718034+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.719063+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.719406+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.720441+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.446s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:36.721324+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "df116a2b-10e7-4c96-a9c6-e73ff474ae98"}
{"timestamp": "2025-12-29T13:30:38.765807+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.768865+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.769559+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.770007+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.17s ago] {'pk_1': 53}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.773278+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.773917+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.17s ago] {'user_id': 53, 'showtime_id': 27, 'seat_code': 'R8-8', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 13, 30, 38, 772839, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 40, 38, 772544, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.775953+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.781861+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.782654+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.783222+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.17s ago] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.785265+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 26, 'user_id': 53, 'showtime_id': 27, 'seat_code': 'R8-8'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.785524+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.786427+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.786740+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.787054+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.788939+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.789833+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.790390+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.17s ago] {'showtime_id_1': 27, 'seat_code_1': 'R8-8', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.792907+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.793383+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.17s ago] {'seat_code': 'R8-8', 'showtime_id': 27, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.795982+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.796369+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.17s ago] {'status': 'LOCKED', 'locked_by_user_id': 53, 'lock_expires_at': datetime.datetime(2025, 12, 29, 13, 40, 38, 795139, tzinfo=datetime.timezone.utc), 'seat_locks_id': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.798164+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.802657+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.803369+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.803770+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.17s ago] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.805943+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 27, 'seat_code': 'R8-8', 'user_id': 53, 'expires_at': '2025-12-29T13:40:38.795139+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.806210+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.806499+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.806963+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.808243+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.808653+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.809021+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.809392+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 26, 'user_id': 53, 'showtime_id': 27, 'seat_code': 'R8-8'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.809773+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 26", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.811466+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.812131+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.812564+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.17s ago] {'user_id': 53, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.815552+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.819852+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.820489+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.820851+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.17s ago] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.823279+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 26, 'reservation_id': 26, 'user_id': 53, 'showtime_id': 27, 'seat_code': 'R8-8'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.823547+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.823761+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_order_created for order.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.823882+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_order_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.823997+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 26", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.825437+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.826103+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.826528+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.15s ago] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.828815+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 26, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.829173+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.829419+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_pricing_snapshot_created for pricing.snapshot_created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.829679+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_pricing_snapshot_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.829954+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 26, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.831764+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.832491+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.832912+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.12s ago] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.835224+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.835521+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.12s ago] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.837250+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.841467+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.842053+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.842825+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.19s ago] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.845232+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 26 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.845501+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.846476+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.846747+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 26: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.847104+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.848364+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.848593+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 26", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.848908+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.850307+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.850614+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.850801+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.852193+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.852783+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.853245+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.12s ago] {'actor_id': 53, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 26, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 26, \"user_id\": 53, \"showtime_id\": 27, \"seat_code\": \"R8-8\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 30, 38, 852440, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.855442+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.860100+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.860613+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.860824+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.12s ago] {'pk_1': 32}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.862972+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.864191+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.866100+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.100s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:38.869386+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "76705df4-d2e4-4d7d-9477-62162cc2e256"}
{"timestamp": "2025-12-29T13:30:40.913687+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /admin/reservations/26/cancel", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "9d9e50bd-2afb-4aa5-9f2f-3417c36139b9"}
{"timestamp": "2025-12-29T13:30:40.916144+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9d9e50bd-2afb-4aa5-9f2f-3417c36139b9"}
{"timestamp": "2025-12-29T13:30:40.916760+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9d9e50bd-2afb-4aa5-9f2f-3417c36139b9"}
{"timestamp": "2025-12-29T13:30:40.917191+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.32s ago] {'pk_1': 52}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9d9e50bd-2afb-4aa5-9f2f-3417c36139b9"}
{"timestamp": "2025-12-29T13:30:40.919921+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "9d9e50bd-2afb-4aa5-9f2f-3417c36139b9"}
{"timestamp": "2025-12-29T13:30:40.921600+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /admin/reservations/26/cancel \u2192 403 (0.008s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "9d9e50bd-2afb-4aa5-9f2f-3417c36139b9"}
{"timestamp": "2025-12-29T13:30:42.948278+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:42.950931+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:42.951561+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:42.951899+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.75s ago] {'email_1': 'test_admin_1767015040.9226742@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.156313+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.156750+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.73s ago] {'email': 'test_admin_1767015040.9226742@example.com', 'hashed_password': '$2b$12$gjGHC3ChXc/8lVdsnCvs9ucCBTCSpBBa6WaUa3v58jSog4NKsZuIK', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.158377+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.163432+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.164120+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.164644+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.73s ago] {'pk_1': 54}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.166695+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 54, 'email': 'test_admin_1767015040.9226742@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.167008+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.167754+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.167972+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.168103+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.169663+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.170351+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.170844+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.7s ago] {'user_id_1': 54, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.173097+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.173376+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.69s ago] {'user_id': 54, 'name': None, 'email': 'test_admin_1767015040.9226742@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.174881+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.178717+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.179228+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.179555+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.69s ago] {'pk_1': 54}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.181287+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 54, 'user_id': 54, 'email': 'test_admin_1767015040.9226742@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.181491+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.181664+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.182048+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.183090+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.184298+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.184579+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.98s ago] {'email_1': 'test_admin_1767015040.9226742@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.390534+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 54, 'email': 'test_admin_1767015040.9226742@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.390861+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.391622+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.391896+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.393070+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.445s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:43.394006+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f3e2bc37-c2c8-4f67-a5a8-148b425d83a4"}
{"timestamp": "2025-12-29T13:30:45.444957+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "109fabe5-ad4f-4139-a7e3-d1e97429bfbf"}
{"timestamp": "2025-12-29T13:30:45.447640+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "109fabe5-ad4f-4139-a7e3-d1e97429bfbf"}
{"timestamp": "2025-12-29T13:30:45.448327+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "109fabe5-ad4f-4139-a7e3-d1e97429bfbf"}
{"timestamp": "2025-12-29T13:30:45.448779+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.69s ago] {'title_1': 'Test Movie 1767015040.9226742'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "109fabe5-ad4f-4139-a7e3-d1e97429bfbf"}
{"timestamp": "2025-12-29T13:30:45.451624+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "109fabe5-ad4f-4139-a7e3-d1e97429bfbf"}
{"timestamp": "2025-12-29T13:30:45.452092+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.68s ago] {'title': 'Test Movie 1767015040.9226742', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "109fabe5-ad4f-4139-a7e3-d1e97429bfbf"}
{"timestamp": "2025-12-29T13:30:45.454063+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "109fabe5-ad4f-4139-a7e3-d1e97429bfbf"}
{"timestamp": "2025-12-29T13:30:45.460073+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "109fabe5-ad4f-4139-a7e3-d1e97429bfbf"}
{"timestamp": "2025-12-29T13:30:45.461373+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "109fabe5-ad4f-4139-a7e3-d1e97429bfbf"}
{"timestamp": "2025-12-29T13:30:45.462083+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.68s ago] {'pk_1': 37}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "109fabe5-ad4f-4139-a7e3-d1e97429bfbf"}
{"timestamp": "2025-12-29T13:30:45.464939+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 37}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "109fabe5-ad4f-4139-a7e3-d1e97429bfbf"}
{"timestamp": "2025-12-29T13:30:45.465209+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "109fabe5-ad4f-4139-a7e3-d1e97429bfbf"}
{"timestamp": "2025-12-29T13:30:45.466031+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "109fabe5-ad4f-4139-a7e3-d1e97429bfbf"}
{"timestamp": "2025-12-29T13:30:45.466336+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "109fabe5-ad4f-4139-a7e3-d1e97429bfbf"}
{"timestamp": "2025-12-29T13:30:45.467402+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "109fabe5-ad4f-4139-a7e3-d1e97429bfbf"}
{"timestamp": "2025-12-29T13:30:45.468286+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "109fabe5-ad4f-4139-a7e3-d1e97429bfbf"}
{"timestamp": "2025-12-29T13:30:47.521138+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "6146f8e2-4296-4719-80e3-02d777fdf4df"}
{"timestamp": "2025-12-29T13:30:47.523735+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6146f8e2-4296-4719-80e3-02d777fdf4df"}
{"timestamp": "2025-12-29T13:30:47.524356+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6146f8e2-4296-4719-80e3-02d777fdf4df"}
{"timestamp": "2025-12-29T13:30:47.524719+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.68s ago] {'name_1': 'Test Layout 1767015040.9226742'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6146f8e2-4296-4719-80e3-02d777fdf4df"}
{"timestamp": "2025-12-29T13:30:47.527247+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6146f8e2-4296-4719-80e3-02d777fdf4df"}
{"timestamp": "2025-12-29T13:30:47.527673+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.68s ago] {'name': 'Test Layout 1767015040.9226742', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6146f8e2-4296-4719-80e3-02d777fdf4df"}
{"timestamp": "2025-12-29T13:30:47.529497+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6146f8e2-4296-4719-80e3-02d777fdf4df"}
{"timestamp": "2025-12-29T13:30:47.534821+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6146f8e2-4296-4719-80e3-02d777fdf4df"}
{"timestamp": "2025-12-29T13:30:47.535499+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6146f8e2-4296-4719-80e3-02d777fdf4df"}
{"timestamp": "2025-12-29T13:30:47.535899+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.68s ago] {'pk_1': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6146f8e2-4296-4719-80e3-02d777fdf4df"}
{"timestamp": "2025-12-29T13:30:47.538332+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 36}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "6146f8e2-4296-4719-80e3-02d777fdf4df"}
{"timestamp": "2025-12-29T13:30:47.538722+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "6146f8e2-4296-4719-80e3-02d777fdf4df"}
{"timestamp": "2025-12-29T13:30:47.539539+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6146f8e2-4296-4719-80e3-02d777fdf4df"}
{"timestamp": "2025-12-29T13:30:47.539732+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "6146f8e2-4296-4719-80e3-02d777fdf4df"}
{"timestamp": "2025-12-29T13:30:47.541145+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.020s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "6146f8e2-4296-4719-80e3-02d777fdf4df"}
{"timestamp": "2025-12-29T13:30:47.542207+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6146f8e2-4296-4719-80e3-02d777fdf4df"}
{"timestamp": "2025-12-29T13:30:49.578611+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "29011ec4-9d78-406f-b6c0-bd146725dae7"}
{"timestamp": "2025-12-29T13:30:49.581289+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "29011ec4-9d78-406f-b6c0-bd146725dae7"}
{"timestamp": "2025-12-29T13:30:49.581969+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "29011ec4-9d78-406f-b6c0-bd146725dae7"}
{"timestamp": "2025-12-29T13:30:49.582318+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.66s ago] {'name_1': 'Test Screen 1767015040.9226742', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "29011ec4-9d78-406f-b6c0-bd146725dae7"}
{"timestamp": "2025-12-29T13:30:49.584804+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "29011ec4-9d78-406f-b6c0-bd146725dae7"}
{"timestamp": "2025-12-29T13:30:49.585192+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.66s ago] {'id_1': 36, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "29011ec4-9d78-406f-b6c0-bd146725dae7"}
{"timestamp": "2025-12-29T13:30:49.587320+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "29011ec4-9d78-406f-b6c0-bd146725dae7"}
{"timestamp": "2025-12-29T13:30:49.587616+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.65s ago] {'name': 'Test Screen 1767015040.9226742', 'capacity': 150, 'seat_layout_id': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "29011ec4-9d78-406f-b6c0-bd146725dae7"}
{"timestamp": "2025-12-29T13:30:49.589275+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "29011ec4-9d78-406f-b6c0-bd146725dae7"}
{"timestamp": "2025-12-29T13:30:49.595177+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "29011ec4-9d78-406f-b6c0-bd146725dae7"}
{"timestamp": "2025-12-29T13:30:49.595787+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "29011ec4-9d78-406f-b6c0-bd146725dae7"}
{"timestamp": "2025-12-29T13:30:49.596173+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.65s ago] {'pk_1': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "29011ec4-9d78-406f-b6c0-bd146725dae7"}
{"timestamp": "2025-12-29T13:30:49.598183+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 36}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "29011ec4-9d78-406f-b6c0-bd146725dae7"}
{"timestamp": "2025-12-29T13:30:49.598600+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "29011ec4-9d78-406f-b6c0-bd146725dae7"}
{"timestamp": "2025-12-29T13:30:49.599475+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "29011ec4-9d78-406f-b6c0-bd146725dae7"}
{"timestamp": "2025-12-29T13:30:49.599774+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "29011ec4-9d78-406f-b6c0-bd146725dae7"}
{"timestamp": "2025-12-29T13:30:49.600979+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "29011ec4-9d78-406f-b6c0-bd146725dae7"}
{"timestamp": "2025-12-29T13:30:49.601883+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "29011ec4-9d78-406f-b6c0-bd146725dae7"}
{"timestamp": "2025-12-29T13:30:51.639037+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:51.641466+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:51.642132+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:51.642641+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.64s ago] {'pk_1': 37}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:51.644999+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:51.645389+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.64s ago] {'pk_1': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:51.647466+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:51.647956+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.64s ago] {'screen_id_1': 36, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:51.649890+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:51.650312+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.64s ago] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 37, 'screen_id': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:51.652321+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:51.657765+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:51.658364+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:51.658722+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.63s ago] {'pk_1': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:51.661177+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:51.661525+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.63s ago] {'pk_1': 37}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:51.663327+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:51.663651+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.63s ago] {'pk_1': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:51.665227+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 28}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:51.665510+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:51.666166+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:51.666338+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:51.667313+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.028s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:51.668153+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "8164b0b1-9b68-485b-b6c6-f363ff630678"}
{"timestamp": "2025-12-29T13:30:53.713182+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.715880+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.716502+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.716847+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 97.52s ago] {'email_1': 'test_concurrent1_1767015051.668121@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.924490+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.924964+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 97.5s ago] {'email': 'test_concurrent1_1767015051.668121@example.com', 'hashed_password': '$2b$12$OFMBEF5lVGIPU7qcpD5kMO2bPNDNqrjl55G5wpXVCQNS7e3C9SOIm', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.926705+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.931943+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.932788+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.933218+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 97.5s ago] {'pk_1': 55}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.935261+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 55, 'email': 'test_concurrent1_1767015051.668121@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.935531+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.936266+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.936476+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.936608+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.938208+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.938844+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.939152+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 97.46s ago] {'user_id_1': 55, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.941427+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.941851+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 97.46s ago] {'user_id': 55, 'name': None, 'email': 'test_concurrent1_1767015051.668121@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.943540+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.947319+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.947904+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.948260+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 97.46s ago] {'pk_1': 55}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.950691+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 55, 'user_id': 55, 'email': 'test_concurrent1_1767015051.668121@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.950912+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.951041+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.951264+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.952286+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.953474+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:53.953790+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 97.75s ago] {'email_1': 'test_concurrent1_1767015051.668121@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:54.156664+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 55, 'email': 'test_concurrent1_1767015051.668121@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:54.157054+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:54.158029+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:54.158274+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:54.159368+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.446s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:54.160234+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2f69df80-897f-445a-b63d-eb9254c08f81"}
{"timestamp": "2025-12-29T13:30:56.309433+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.312327+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.312941+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.313257+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 100.1s ago] {'email_1': 'test_concurrent2_1767015054.2601655@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.518837+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.519255+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 100.1s ago] {'email': 'test_concurrent2_1767015054.2601655@example.com', 'hashed_password': '$2b$12$4eNUoUEL/QTt2jvYaVLyU.hkxwREaWk5zssDJxe3qvlVgNjZ1ZBHa', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.520975+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.526496+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.527240+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.527569+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 100.1s ago] {'pk_1': 56}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.529623+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 56, 'email': 'test_concurrent2_1767015054.2601655@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.529931+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.530639+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.530841+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.530977+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.532815+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.533330+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.533556+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 100.1s ago] {'user_id_1': 56, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.535814+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.536202+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 100.1s ago] {'user_id': 56, 'name': None, 'email': 'test_concurrent2_1767015054.2601655@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.538640+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.542552+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.543297+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.543715+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 100.1s ago] {'pk_1': 56}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.545676+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 56, 'user_id': 56, 'email': 'test_concurrent2_1767015054.2601655@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.545879+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.546001+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.546216+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.547202+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.548197+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.548594+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 100.3s ago] {'email_1': 'test_concurrent2_1767015054.2601655@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.751420+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 56, 'email': 'test_concurrent2_1767015054.2601655@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.751693+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.752451+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.752658+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.754067+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.445s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:56.754950+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ea3b261f-afe8-41e4-8258-92bab15c3ba8"}
{"timestamp": "2025-12-29T13:30:58.791680+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.794555+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.795453+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.795930+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.2s ago] {'pk_1': 55}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.798976+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.799509+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.2s ago] {'user_id': 55, 'showtime_id': 28, 'seat_code': 'R9-9', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 13, 30, 58, 798610, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 40, 58, 798339, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.801659+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.806560+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.807269+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.807666+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.2s ago] {'pk_1': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.810094+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 27, 'user_id': 55, 'showtime_id': 28, 'seat_code': 'R9-9'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.810402+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.811121+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.811307+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.811434+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.813178+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.813756+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.814004+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.2s ago] {'showtime_id_1': 28, 'seat_code_1': 'R9-9', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.816749+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.817224+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.2s ago] {'seat_code': 'R9-9', 'showtime_id': 28, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.819357+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.819681+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.19s ago] {'status': 'LOCKED', 'locked_by_user_id': 55, 'lock_expires_at': datetime.datetime(2025, 12, 29, 13, 40, 58, 818875, tzinfo=datetime.timezone.utc), 'seat_locks_id': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.821511+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.825608+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.826169+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.826449+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.19s ago] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.828248+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 28, 'seat_code': 'R9-9', 'user_id': 55, 'expires_at': '2025-12-29T13:40:58.818875+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.828441+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.828595+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.828981+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.830338+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.830658+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.830814+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.831007+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 27, 'user_id': 55, 'showtime_id': 28, 'seat_code': 'R9-9'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.831216+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 27", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.833020+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.833692+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.834082+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.19s ago] {'user_id': 55, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.836882+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.842187+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.843190+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.843863+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.2s ago] {'pk_1': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.846352+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 27, 'reservation_id': 27, 'user_id': 55, 'showtime_id': 28, 'seat_code': 'R9-9'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.846638+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.846816+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_order_created for order.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.847036+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_order_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.847206+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 27", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.848626+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.849303+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.849745+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.17s ago] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.852008+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 27, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.852306+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.852448+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_pricing_snapshot_created for pricing.snapshot_created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.852555+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_pricing_snapshot_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.852679+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 27, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.854197+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.854862+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.855208+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.14s ago] {'pk_1': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.857928+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.858475+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.14s ago] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.860311+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.864529+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.865362+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.865827+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.22s ago] {'pk_1': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.868268+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 27 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.868582+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.869853+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.870132+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 27: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.870419+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.871993+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.872329+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 27", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.872817+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.873983+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.874191+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.874296+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.875654+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.876074+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.876446+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.14s ago] {'actor_id': 55, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 27, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 27, \"user_id\": 55, \"showtime_id\": 28, \"seat_code\": \"R9-9\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 30, 58, 875873, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.878865+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.883016+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.883594+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.884012+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.14s ago] {'pk_1': 33}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.886806+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.887806+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.888864+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.097s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:30:58.889785+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c1517eba-0a8d-4f6b-9cde-084e1329dbb8"}
{"timestamp": "2025-12-29T13:31:00.936278+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.938849+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.939474+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.939803+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 91.34s ago] {'pk_1': 56}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.942824+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.943373+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 91.34s ago] {'user_id': 56, 'showtime_id': 28, 'seat_code': 'R9-9', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 13, 31, 0, 942437, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 41, 0, 942147, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.945430+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.949800+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.950425+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.951074+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 91.34s ago] {'pk_1': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.953152+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 28, 'user_id': 56, 'showtime_id': 28, 'seat_code': 'R9-9'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.953413+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.954129+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.954315+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.954419+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.955895+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.956531+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.956996+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 91.34s ago] {'showtime_id_1': 28, 'seat_code_1': 'R9-9', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.958991+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.961981+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.event_bus", "message": "\u274c Event handler failed: reservation.created -> on_reservation_created: ('Seat locked by another user', {'locked_by': 55, 'attempt_user': 56})", "module": "event_bus", "function": "_safe_invoke", "line": 45, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\event_bus.py\", line 42, in _safe_invoke\n    await handler(payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\seat_availability\\handlers.py\", line 23, in on_reservation_created\n    await seat_service.lock_seat(  # Added await!\n    ...<4 lines>...\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\seat_availability\\service.py\", line 49, in lock_seat\n    raise ValidationError(\n    ...<2 lines>...\n    )\napp.core.errors.ValidationError: ('Seat locked by another user', {'locked_by': 55, 'attempt_user': 56})"}
{"timestamp": "2025-12-29T13:31:00.964182+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.964308+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.964433+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 28, 'user_id': 56, 'showtime_id': 28, 'seat_code': 'R9-9'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.964585+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 28", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.966166+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.966718+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.966951+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 91.33s ago] {'user_id': 56, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.969111+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.973251+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.973741+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.974031+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 91.33s ago] {'pk_1': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.976088+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 28, 'reservation_id': 28, 'user_id': 56, 'showtime_id': 28, 'seat_code': 'R9-9'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.976461+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.976755+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_order_created for order.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.977019+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_order_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.977228+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 28", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.978778+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.979563+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.979954+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 91.3s ago] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.981835+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 28, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.982090+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.982214+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_pricing_snapshot_created for pricing.snapshot_created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.982310+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_pricing_snapshot_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.982429+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 28, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.983909+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.984536+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.984919+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 91.27s ago] {'pk_1': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.987206+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.987491+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 91.27s ago] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.988893+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.992852+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.993385+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.993615+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 91.35s ago] {'pk_1': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.995427+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 28 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.995859+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.997285+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.997524+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 28: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.997875+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.999060+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.999330+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 28", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:00.999595+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:01.000729+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:01.000978+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:01.001078+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:01.002370+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:01.002794+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:01.003203+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 91.27s ago] {'actor_id': 56, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 28, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 28, \"user_id\": 56, \"showtime_id\": 28, \"seat_code\": \"R9-9\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 31, 1, 2610, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:01.005655+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:01.009240+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:01.009848+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:01.010241+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 91.27s ago] {'pk_1': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:01.012320+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:01.013506+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:01.014748+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.079s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:31:01.015699+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c0be121d-4a14-4754-8beb-8e0c3584233d"}
{"timestamp": "2025-12-29T13:36:30.755537+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-29T13:36:32.885215+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-29T13:36:32.885588+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-29T13:36:32.885760+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.885906+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.886048+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.886208+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.886374+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.886516+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.886662+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.886806+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.887027+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.887181+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.887324+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.887464+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.887605+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.887746+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.887888+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.888002+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.888115+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.888260+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.888520+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.888693+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.888837+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.888987+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.889138+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.889376+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.889529+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.889715+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.889837+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.890067+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.890322+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.890564+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.890722+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.890838+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.890958+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.891101+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.891296+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.891464+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.891657+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.891972+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.892170+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.892302+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.892412+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.892520+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.892629+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.892736+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.892843+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.892974+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.893219+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.893378+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.893492+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.893601+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.893720+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.893849+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.893975+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.894089+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.894214+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.894350+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.894468+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.894576+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.894687+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/showtimes/{showtime_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.894796+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.894927+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:36:32.895270+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-29T13:36:32.895482+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-29T13:36:46.434267+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.503007+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.503426+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.506382+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.506688+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.508818+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.509279+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.511628+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.514341+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.514844+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'email_1': 'test_admin_1767015404.3625028@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.519317+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "detected 'bcrypt' backend, version '4.0.1'", "module": "bcrypt", "function": "_load_backend_mixin", "line": 625, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.519686+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "'bcrypt' backend lacks $2$ support, enabling workaround", "module": "bcrypt", "function": "_finalize_backend_mixin", "line": 406, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.742587+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.743068+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00069s] {'email': 'test_admin_1767015404.3625028@example.com', 'hashed_password': '$2b$12$z1cKUXzOckitzVbqBlZ/2.hDtjOVC9B.6KAHQbQVTXtUUynffs06e', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.746050+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.752808+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.754244+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.754703+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00065s] {'pk_1': 57}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.757088+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 57, 'email': 'test_admin_1767015404.3625028@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.757468+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.758347+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.758624+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.758896+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.775200+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.776774+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.777236+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'user_id_1': 57, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.781474+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.782085+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'user_id': 57, 'name': None, 'email': 'test_admin_1767015404.3625028@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.785758+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.790174+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.791231+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.791597+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'pk_1': 57}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.793624+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 57, 'user_id': 57, 'email': 'test_admin_1767015404.3625028@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.793820+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.793946+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.794224+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.795582+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.796940+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:46.797316+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2831s ago] {'email_1': 'test_admin_1767015404.3625028@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:47.011536+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 57, 'email': 'test_admin_1767015404.3625028@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:47.011852+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:47.012575+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:47.012840+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:47.014086+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.580s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:47.015298+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "68bde0af-bae4-4baf-8988-98ed0a132e8e"}
{"timestamp": "2025-12-29T13:36:49.064840+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b8a1a569-3651-4044-a430-05063bf15f2c"}
{"timestamp": "2025-12-29T13:36:49.067847+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b8a1a569-3651-4044-a430-05063bf15f2c"}
{"timestamp": "2025-12-29T13:36:49.069390+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8a1a569-3651-4044-a430-05063bf15f2c"}
{"timestamp": "2025-12-29T13:36:49.069821+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'title_1': 'Test Movie 1767015404.3625028'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8a1a569-3651-4044-a430-05063bf15f2c"}
{"timestamp": "2025-12-29T13:36:49.074110+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8a1a569-3651-4044-a430-05063bf15f2c"}
{"timestamp": "2025-12-29T13:36:49.074539+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'title': 'Test Movie 1767015404.3625028', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8a1a569-3651-4044-a430-05063bf15f2c"}
{"timestamp": "2025-12-29T13:36:49.076660+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b8a1a569-3651-4044-a430-05063bf15f2c"}
{"timestamp": "2025-12-29T13:36:49.081265+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b8a1a569-3651-4044-a430-05063bf15f2c"}
{"timestamp": "2025-12-29T13:36:49.082403+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8a1a569-3651-4044-a430-05063bf15f2c"}
{"timestamp": "2025-12-29T13:36:49.082822+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'pk_1': 38}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8a1a569-3651-4044-a430-05063bf15f2c"}
{"timestamp": "2025-12-29T13:36:49.085295+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 38}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "b8a1a569-3651-4044-a430-05063bf15f2c"}
{"timestamp": "2025-12-29T13:36:49.085632+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "b8a1a569-3651-4044-a430-05063bf15f2c"}
{"timestamp": "2025-12-29T13:36:49.086441+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b8a1a569-3651-4044-a430-05063bf15f2c"}
{"timestamp": "2025-12-29T13:36:49.086738+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "b8a1a569-3651-4044-a430-05063bf15f2c"}
{"timestamp": "2025-12-29T13:36:49.088217+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.023s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b8a1a569-3651-4044-a430-05063bf15f2c"}
{"timestamp": "2025-12-29T13:36:49.089562+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b8a1a569-3651-4044-a430-05063bf15f2c"}
{"timestamp": "2025-12-29T13:36:51.116113+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "32a61326-bd84-494c-b243-f305b259da09"}
{"timestamp": "2025-12-29T13:36:51.118994+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "32a61326-bd84-494c-b243-f305b259da09"}
{"timestamp": "2025-12-29T13:36:51.120233+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32a61326-bd84-494c-b243-f305b259da09"}
{"timestamp": "2025-12-29T13:36:51.120610+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'name_1': 'Test Layout 1767015404.3625028'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32a61326-bd84-494c-b243-f305b259da09"}
{"timestamp": "2025-12-29T13:36:51.124351+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32a61326-bd84-494c-b243-f305b259da09"}
{"timestamp": "2025-12-29T13:36:51.124771+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'name': 'Test Layout 1767015404.3625028', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32a61326-bd84-494c-b243-f305b259da09"}
{"timestamp": "2025-12-29T13:36:51.126944+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "32a61326-bd84-494c-b243-f305b259da09"}
{"timestamp": "2025-12-29T13:36:51.132622+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "32a61326-bd84-494c-b243-f305b259da09"}
{"timestamp": "2025-12-29T13:36:51.133909+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32a61326-bd84-494c-b243-f305b259da09"}
{"timestamp": "2025-12-29T13:36:51.134376+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00064s] {'pk_1': 37}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "32a61326-bd84-494c-b243-f305b259da09"}
{"timestamp": "2025-12-29T13:36:51.136961+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 37}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "32a61326-bd84-494c-b243-f305b259da09"}
{"timestamp": "2025-12-29T13:36:51.137407+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "32a61326-bd84-494c-b243-f305b259da09"}
{"timestamp": "2025-12-29T13:36:51.138139+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "32a61326-bd84-494c-b243-f305b259da09"}
{"timestamp": "2025-12-29T13:36:51.138372+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "32a61326-bd84-494c-b243-f305b259da09"}
{"timestamp": "2025-12-29T13:36:51.139575+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.024s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "32a61326-bd84-494c-b243-f305b259da09"}
{"timestamp": "2025-12-29T13:36:51.140699+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "32a61326-bd84-494c-b243-f305b259da09"}
{"timestamp": "2025-12-29T13:36:53.195358+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "9df1f4de-b429-47b3-9fe5-56b78b3344ca"}
{"timestamp": "2025-12-29T13:36:53.198282+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9df1f4de-b429-47b3-9fe5-56b78b3344ca"}
{"timestamp": "2025-12-29T13:36:53.199705+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9df1f4de-b429-47b3-9fe5-56b78b3344ca"}
{"timestamp": "2025-12-29T13:36:53.200118+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'name_1': 'Test Screen 1767015404.3625028', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9df1f4de-b429-47b3-9fe5-56b78b3344ca"}
{"timestamp": "2025-12-29T13:36:53.203441+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9df1f4de-b429-47b3-9fe5-56b78b3344ca"}
{"timestamp": "2025-12-29T13:36:53.203877+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'id_1': 37, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9df1f4de-b429-47b3-9fe5-56b78b3344ca"}
{"timestamp": "2025-12-29T13:36:53.211143+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9df1f4de-b429-47b3-9fe5-56b78b3344ca"}
{"timestamp": "2025-12-29T13:36:53.211644+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'name': 'Test Screen 1767015404.3625028', 'capacity': 150, 'seat_layout_id': 37}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9df1f4de-b429-47b3-9fe5-56b78b3344ca"}
{"timestamp": "2025-12-29T13:36:53.214636+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "9df1f4de-b429-47b3-9fe5-56b78b3344ca"}
{"timestamp": "2025-12-29T13:36:53.219624+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9df1f4de-b429-47b3-9fe5-56b78b3344ca"}
{"timestamp": "2025-12-29T13:36:53.220809+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9df1f4de-b429-47b3-9fe5-56b78b3344ca"}
{"timestamp": "2025-12-29T13:36:53.221205+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'pk_1': 37}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9df1f4de-b429-47b3-9fe5-56b78b3344ca"}
{"timestamp": "2025-12-29T13:36:53.223601+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 37}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "9df1f4de-b429-47b3-9fe5-56b78b3344ca"}
{"timestamp": "2025-12-29T13:36:53.223938+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "9df1f4de-b429-47b3-9fe5-56b78b3344ca"}
{"timestamp": "2025-12-29T13:36:53.224659+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "9df1f4de-b429-47b3-9fe5-56b78b3344ca"}
{"timestamp": "2025-12-29T13:36:53.224854+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "9df1f4de-b429-47b3-9fe5-56b78b3344ca"}
{"timestamp": "2025-12-29T13:36:53.226129+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.031s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "9df1f4de-b429-47b3-9fe5-56b78b3344ca"}
{"timestamp": "2025-12-29T13:36:53.227343+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "9df1f4de-b429-47b3-9fe5-56b78b3344ca"}
{"timestamp": "2025-12-29T13:36:55.259197+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:55.262172+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:55.263377+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:55.263882+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'pk_1': 38}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:55.267018+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:55.267475+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'pk_1': 37}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:55.270597+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:55.271154+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'screen_id_1': 37, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:55.274943+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:55.275740+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00063s] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 38, 'screen_id': 37}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:55.278679+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:55.282953+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:55.284052+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:55.284450+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:55.287679+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:55.288016+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'pk_1': 38}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:55.290669+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:55.291036+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'pk_1': 37}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:55.292527+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 29}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:55.292839+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:55.293554+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:55.293729+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:55.295073+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.036s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:55.296339+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "860b8ecf-a9eb-4bc1-b111-03100146dda4"}
{"timestamp": "2025-12-29T13:36:57.343891+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.346904+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.347630+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.348036+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.83s ago] {'email_1': 'test_booking_1767015415.296245@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.558110+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.558567+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.82s ago] {'email': 'test_booking_1767015415.296245@example.com', 'hashed_password': '$2b$12$u2UEDOTjERjdZSNWmIA6OehTVdev.kyuzbpthYjrrQPYMsXl1h.8a', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.560492+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.564758+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.565404+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.565780+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.81s ago] {'pk_1': 58}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.567776+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 58, 'email': 'test_booking_1767015415.296245@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.568011+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.568657+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.568821+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.568925+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.570323+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.570976+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.571280+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.79s ago] {'user_id_1': 58, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.573741+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.574043+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.79s ago] {'user_id': 58, 'name': None, 'email': 'test_booking_1767015415.296245@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.575533+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.579552+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.580143+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.580424+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.79s ago] {'pk_1': 58}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.582753+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 58, 'user_id': 58, 'email': 'test_booking_1767015415.296245@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.583066+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.583233+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.583544+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.584860+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.586131+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.586628+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 11.07s ago] {'email_1': 'test_booking_1767015415.296245@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.791400+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 58, 'email': 'test_booking_1767015415.296245@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.791840+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.792664+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.792896+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.793934+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.450s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:57.794776+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6c0e551a-6926-4250-9cba-0540a8a53f8f"}
{"timestamp": "2025-12-29T13:36:59.843577+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.846440+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.847398+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.847745+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'pk_1': 58}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.851683+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.852104+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'showtime_id_1': 29, 'seat_code_1': 'R5-5', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.855495+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.855914+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'user_id': 58, 'showtime_id': 29, 'seat_code': 'R5-5', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 13, 36, 59, 855129, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 46, 59, 854284, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.858809+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.863030+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.864299+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.864804+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00068s] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.867276+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 29, 'user_id': 58, 'showtime_id': 29, 'seat_code': 'R5-5'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.867549+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.868264+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.868508+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.868777+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.870465+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.871121+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.871391+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.01998s ago] {'showtime_id_1': 29, 'seat_code_1': 'R5-5', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.874567+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.874981+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'seat_code': 'R5-5', 'showtime_id': 29, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.878102+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.878460+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'status': 'LOCKED', 'locked_by_user_id': 58, 'lock_expires_at': datetime.datetime(2025, 12, 29, 13, 46, 59, 877020, tzinfo=datetime.timezone.utc), 'seat_locks_id': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.880494+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.884376+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.885173+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.885414+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00036s] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.887474+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 29, 'seat_code': 'R5-5', 'user_id': 58, 'expires_at': '2025-12-29T13:46:59.877020+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.887672+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.887792+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.888078+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.889259+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.889440+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.889578+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.889877+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 29, 'user_id': 58, 'showtime_id': 29, 'seat_code': 'R5-5'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.890154+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 29", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.891523+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.892631+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.893184+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'user_id': 58, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.895713+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.899313+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.900452+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.900716+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.902497+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 29, 'reservation_id': 29, 'user_id': 58, 'showtime_id': 29, 'seat_code': 'R5-5'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.902681+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.902802+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_order_created for order.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.902898+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_order_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.903078+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 29", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.918405+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.920264+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.920817+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00068s] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.923532+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 29, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.923728+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.923956+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_pricing_snapshot_created for pricing.snapshot_created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.924215+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_pricing_snapshot_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.924515+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 29, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.963253+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.964397+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.964739+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.968726+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.969298+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.971784+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.976574+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.977438+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.977854+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.07745s ago] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.979939+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 29 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.980332+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.981532+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.981813+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 29: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.982104+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.983443+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.983811+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 29", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.984333+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.985626+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.985907+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.986066+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.987548+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.988741+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.989221+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'actor_id': 58, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 29, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 29, \"user_id\": 58, \"showtime_id\": 29, \"seat_code\": \"R5-5\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 36, 59, 988425, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.992371+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.996969+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.998387+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:36:59.998690+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:37:00.001197+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:37:00.002465+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:37:00.003958+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.160s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:37:00.004959+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "793844bc-65c7-4537-9245-bf7b96ab466d"}
{"timestamp": "2025-12-29T13:37:02.045727+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "931b01cc-a471-47d6-b141-b0d75498dfee"}
{"timestamp": "2025-12-29T13:37:02.048347+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "931b01cc-a471-47d6-b141-b0d75498dfee"}
{"timestamp": "2025-12-29T13:37:02.049060+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "931b01cc-a471-47d6-b141-b0d75498dfee"}
{"timestamp": "2025-12-29T13:37:02.049378+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 2.202s ago] {'pk_1': 58}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "931b01cc-a471-47d6-b141-b0d75498dfee"}
{"timestamp": "2025-12-29T13:37:02.052552+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "931b01cc-a471-47d6-b141-b0d75498dfee"}
{"timestamp": "2025-12-29T13:37:02.053219+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00083s] {'user_id_1': 58}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "931b01cc-a471-47d6-b141-b0d75498dfee"}
{"timestamp": "2025-12-29T13:37:02.055475+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.010s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "931b01cc-a471-47d6-b141-b0d75498dfee"}
{"timestamp": "2025-12-29T13:37:02.056372+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "931b01cc-a471-47d6-b141-b0d75498dfee"}
{"timestamp": "2025-12-29T13:37:04.109388+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/order/29/initiate", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "bf21a846-0752-4ef2-9ace-385dbad45cfe"}
{"timestamp": "2025-12-29T13:37:04.112129+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bf21a846-0752-4ef2-9ace-385dbad45cfe"}
{"timestamp": "2025-12-29T13:37:04.112817+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf21a846-0752-4ef2-9ace-385dbad45cfe"}
{"timestamp": "2025-12-29T13:37:04.113215+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.266s ago] {'pk_1': 58}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf21a846-0752-4ef2-9ace-385dbad45cfe"}
{"timestamp": "2025-12-29T13:37:04.116813+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf21a846-0752-4ef2-9ace-385dbad45cfe"}
{"timestamp": "2025-12-29T13:37:04.117297+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.153s ago] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf21a846-0752-4ef2-9ace-385dbad45cfe"}
{"timestamp": "2025-12-29T13:37:04.120230+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO payment_attempts (order_id, amount_attempted, status, final_amount, failure_reason, provider_payment_id, created_at) VALUES (%(order_id)s, %(amount_attempted)s, %(status)s, %(final_amount)s, %(failure_reason)s, %(provider_payment_id)s, %(created_at)s) RETURNING payment_attempts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf21a846-0752-4ef2-9ace-385dbad45cfe"}
{"timestamp": "2025-12-29T13:37:04.120688+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00062s] {'order_id': 29, 'amount_attempted': 1000, 'status': 'PENDING', 'final_amount': 1000, 'failure_reason': None, 'provider_payment_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 37, 4, 119791, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf21a846-0752-4ef2-9ace-385dbad45cfe"}
{"timestamp": "2025-12-29T13:37:04.124299+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "bf21a846-0752-4ef2-9ace-385dbad45cfe"}
{"timestamp": "2025-12-29T13:37:04.129647+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bf21a846-0752-4ef2-9ace-385dbad45cfe"}
{"timestamp": "2025-12-29T13:37:04.131068+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf21a846-0752-4ef2-9ace-385dbad45cfe"}
{"timestamp": "2025-12-29T13:37:04.131455+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'pk_1': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf21a846-0752-4ef2-9ace-385dbad45cfe"}
{"timestamp": "2025-12-29T13:37:04.134571+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf21a846-0752-4ef2-9ace-385dbad45cfe"}
{"timestamp": "2025-12-29T13:37:04.134924+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf21a846-0752-4ef2-9ace-385dbad45cfe"}
{"timestamp": "2025-12-29T13:37:04.136874+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.pending with payload: {'payment_attempt_id': 19, 'order_id': 29, 'amount_attempted': 1000, 'final_amount': 1000, 'user_id': 58}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "bf21a846-0752-4ef2-9ace-385dbad45cfe"}
{"timestamp": "2025-12-29T13:37:04.137153+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "bf21a846-0752-4ef2-9ace-385dbad45cfe"}
{"timestamp": "2025-12-29T13:37:04.138067+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.pending to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "bf21a846-0752-4ef2-9ace-385dbad45cfe"}
{"timestamp": "2025-12-29T13:37:04.138372+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: payment.pending", "module": "event_bus", "function": "publish", "line": 31, "request_id": "bf21a846-0752-4ef2-9ace-385dbad45cfe"}
{"timestamp": "2025-12-29T13:37:04.139833+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/order/29/initiate \u2192 200 (0.031s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "bf21a846-0752-4ef2-9ace-385dbad45cfe"}
{"timestamp": "2025-12-29T13:37:04.140799+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "bf21a846-0752-4ef2-9ace-385dbad45cfe"}
{"timestamp": "2025-12-29T13:37:06.189085+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/19/confirm", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.191572+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.192236+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.194339+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.347s ago] {'pk_1': 58}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.198160+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id AS payment_attempts_id, payment_attempts.order_id AS payment_attempts_order_id, payment_attempts.amount_attempted AS payment_attempts_amount_attempted, payment_attempts.status AS payment_attempts_status, payment_attempts.final_amount AS payment_attempts_final_amount, payment_attempts.failure_reason AS payment_attempts_failure_reason, payment_attempts.provider_payment_id AS payment_attempts_provider_payment_id, payment_attempts.created_at AS payment_attempts_created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.198549+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'pk_1': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.201677+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.202064+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.204689+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE payment_attempts SET status=%(status)s, provider_payment_id=%(provider_payment_id)s WHERE payment_attempts.id = %(payment_attempts_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.205103+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'status': 'SUCCEEDED', 'provider_payment_id': 'mock_payment_19', 'payment_attempts_id': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.207170+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.211799+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.212619+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.213113+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 2.082s ago] {'pk_1': 19}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.215776+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.216102+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 2.082s ago] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.217534+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.succeeded with payload: {'payment_attempt_id': 19, 'order_id': 29, 'final_amount': 1000.0, 'user_id': 58}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.217937+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.218924+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.succeeded to 4 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.219212+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_payment_succeeded for payment.succeeded", "module": "event_bus", "function": "publish", "line": 36, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.219469+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_payment_succeeded", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.219745+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.219967+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_payment_succeeded for payment.succeeded", "module": "event_bus", "function": "publish", "line": 36, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.220071+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_payment_succeeded", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.221447+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.222006+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.222400+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.258s ago] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.225332+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET is_completed=%(is_completed)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.225679+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00041s] {'is_completed': True, 'orders_id': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.227388+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.232296+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.232973+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.233452+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.333s ago] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.236077+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.completed with payload: {'order_id': 29}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.236418+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.completed to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.236660+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: order.completed", "module": "event_bus", "function": "publish", "line": 31, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.236908+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.237931+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.238121+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_payment_succeeded for payment.succeeded", "module": "event_bus", "function": "publish", "line": 36, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.238261+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_payment_succeeded", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.239918+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.240524+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.240861+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 19.46s ago] {'user_id_1': 58, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.243718+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.244860+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.245173+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_payment_succeeded for payment.succeeded", "module": "event_bus", "function": "publish", "line": 36, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.245363+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_payment_succeeded", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.246682+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.247240+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.247686+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.259s ago] {'actor_id': 58, 'actor_type': 'user', 'action': 'payment.succeeded', 'target_id': 29, 'target_type': 'order', 'payload': '{\"payment_attempt_id\": 19, \"order_id\": 29, \"final_amount\": 1000.0, \"user_id\": 58}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 37, 6, 246930, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.249709+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.254020+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.254853+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.255244+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.257s ago] {'pk_1': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.257837+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.258958+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.260234+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/19/confirm \u2192 200 (0.071s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:06.261502+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "1e23d272-3fc3-47bf-9f82-26fca8448946"}
{"timestamp": "2025-12-29T13:37:08.309296+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "17b6302e-c2ea-4a3e-9c56-3cf603cc7d11"}
{"timestamp": "2025-12-29T13:37:08.311902+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "17b6302e-c2ea-4a3e-9c56-3cf603cc7d11"}
{"timestamp": "2025-12-29T13:37:08.312710+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "17b6302e-c2ea-4a3e-9c56-3cf603cc7d11"}
{"timestamp": "2025-12-29T13:37:08.313172+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 8.466s ago] {'pk_1': 58}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "17b6302e-c2ea-4a3e-9c56-3cf603cc7d11"}
{"timestamp": "2025-12-29T13:37:08.316006+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "17b6302e-c2ea-4a3e-9c56-3cf603cc7d11"}
{"timestamp": "2025-12-29T13:37:08.316380+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.264s ago] {'user_id_1': 58}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "17b6302e-c2ea-4a3e-9c56-3cf603cc7d11"}
{"timestamp": "2025-12-29T13:37:08.318708+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.009s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "17b6302e-c2ea-4a3e-9c56-3cf603cc7d11"}
{"timestamp": "2025-12-29T13:37:08.319622+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "17b6302e-c2ea-4a3e-9c56-3cf603cc7d11"}
{"timestamp": "2025-12-29T13:37:10.358598+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.361728+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.362529+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.362997+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.85s ago] {'email_1': 'test_admin_1767015428.3202643@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.569549+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.570065+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.83s ago] {'email': 'test_admin_1767015428.3202643@example.com', 'hashed_password': '$2b$12$d8eZQR.V3vPn/MoQK7XWPe4hCL5fQC0ll/9UlxZDWsZF8Je38J5Be', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.571869+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.576617+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.577703+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.578423+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.82s ago] {'pk_1': 59}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.581500+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 59, 'email': 'test_admin_1767015428.3202643@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.581893+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.582846+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.583083+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.583223+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.585152+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.585876+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.586288+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.81s ago] {'user_id_1': 59, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.588907+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.589401+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.81s ago] {'user_id': 59, 'name': None, 'email': 'test_admin_1767015428.3202643@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.591439+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.596265+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.596992+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.597472+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.81s ago] {'pk_1': 59}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.599465+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 59, 'user_id': 59, 'email': 'test_admin_1767015428.3202643@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.599831+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.600045+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.600264+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.601295+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.602759+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.603247+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 24.09s ago] {'email_1': 'test_admin_1767015428.3202643@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.809195+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 59, 'email': 'test_admin_1767015428.3202643@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.809493+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.810358+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.810582+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.811767+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.453s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:10.812906+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "e255c3a3-69b2-457a-b76c-6817eb380223"}
{"timestamp": "2025-12-29T13:37:12.855294+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "87900f42-f171-4dcd-8d0e-aba2f2edb53b"}
{"timestamp": "2025-12-29T13:37:12.858216+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "87900f42-f171-4dcd-8d0e-aba2f2edb53b"}
{"timestamp": "2025-12-29T13:37:12.858881+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "87900f42-f171-4dcd-8d0e-aba2f2edb53b"}
{"timestamp": "2025-12-29T13:37:12.859350+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'title_1': 'Test Movie 1767015428.3202643'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "87900f42-f171-4dcd-8d0e-aba2f2edb53b"}
{"timestamp": "2025-12-29T13:37:12.862118+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "87900f42-f171-4dcd-8d0e-aba2f2edb53b"}
{"timestamp": "2025-12-29T13:37:12.862649+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'title': 'Test Movie 1767015428.3202643', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "87900f42-f171-4dcd-8d0e-aba2f2edb53b"}
{"timestamp": "2025-12-29T13:37:12.864774+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "87900f42-f171-4dcd-8d0e-aba2f2edb53b"}
{"timestamp": "2025-12-29T13:37:12.869331+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "87900f42-f171-4dcd-8d0e-aba2f2edb53b"}
{"timestamp": "2025-12-29T13:37:12.870428+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "87900f42-f171-4dcd-8d0e-aba2f2edb53b"}
{"timestamp": "2025-12-29T13:37:12.870944+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'pk_1': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "87900f42-f171-4dcd-8d0e-aba2f2edb53b"}
{"timestamp": "2025-12-29T13:37:12.873245+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 39}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "87900f42-f171-4dcd-8d0e-aba2f2edb53b"}
{"timestamp": "2025-12-29T13:37:12.873574+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "87900f42-f171-4dcd-8d0e-aba2f2edb53b"}
{"timestamp": "2025-12-29T13:37:12.874348+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "87900f42-f171-4dcd-8d0e-aba2f2edb53b"}
{"timestamp": "2025-12-29T13:37:12.874570+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "87900f42-f171-4dcd-8d0e-aba2f2edb53b"}
{"timestamp": "2025-12-29T13:37:12.875943+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.021s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "87900f42-f171-4dcd-8d0e-aba2f2edb53b"}
{"timestamp": "2025-12-29T13:37:12.876979+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "87900f42-f171-4dcd-8d0e-aba2f2edb53b"}
{"timestamp": "2025-12-29T13:37:14.908478+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "d881cc24-b4b6-4b36-8936-cd75a1996f86"}
{"timestamp": "2025-12-29T13:37:14.910991+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d881cc24-b4b6-4b36-8936-cd75a1996f86"}
{"timestamp": "2025-12-29T13:37:14.911528+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d881cc24-b4b6-4b36-8936-cd75a1996f86"}
{"timestamp": "2025-12-29T13:37:14.911864+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'name_1': 'Test Layout 1767015428.3202643'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d881cc24-b4b6-4b36-8936-cd75a1996f86"}
{"timestamp": "2025-12-29T13:37:14.914340+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d881cc24-b4b6-4b36-8936-cd75a1996f86"}
{"timestamp": "2025-12-29T13:37:14.914714+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'name': 'Test Layout 1767015428.3202643', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d881cc24-b4b6-4b36-8936-cd75a1996f86"}
{"timestamp": "2025-12-29T13:37:14.916599+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "d881cc24-b4b6-4b36-8936-cd75a1996f86"}
{"timestamp": "2025-12-29T13:37:14.921231+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d881cc24-b4b6-4b36-8936-cd75a1996f86"}
{"timestamp": "2025-12-29T13:37:14.922004+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d881cc24-b4b6-4b36-8936-cd75a1996f86"}
{"timestamp": "2025-12-29T13:37:14.922575+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'pk_1': 38}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d881cc24-b4b6-4b36-8936-cd75a1996f86"}
{"timestamp": "2025-12-29T13:37:14.924912+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 38}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "d881cc24-b4b6-4b36-8936-cd75a1996f86"}
{"timestamp": "2025-12-29T13:37:14.925177+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "d881cc24-b4b6-4b36-8936-cd75a1996f86"}
{"timestamp": "2025-12-29T13:37:14.925878+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "d881cc24-b4b6-4b36-8936-cd75a1996f86"}
{"timestamp": "2025-12-29T13:37:14.926069+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "d881cc24-b4b6-4b36-8936-cd75a1996f86"}
{"timestamp": "2025-12-29T13:37:14.927142+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.019s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "d881cc24-b4b6-4b36-8936-cd75a1996f86"}
{"timestamp": "2025-12-29T13:37:14.928091+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d881cc24-b4b6-4b36-8936-cd75a1996f86"}
{"timestamp": "2025-12-29T13:37:16.968127+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "6c6d07dd-fbbd-4e3a-a169-5b4593482c3d"}
{"timestamp": "2025-12-29T13:37:16.970776+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6c6d07dd-fbbd-4e3a-a169-5b4593482c3d"}
{"timestamp": "2025-12-29T13:37:16.971401+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c6d07dd-fbbd-4e3a-a169-5b4593482c3d"}
{"timestamp": "2025-12-29T13:37:16.971731+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.77s ago] {'name_1': 'Test Screen 1767015428.3202643', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c6d07dd-fbbd-4e3a-a169-5b4593482c3d"}
{"timestamp": "2025-12-29T13:37:16.974412+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c6d07dd-fbbd-4e3a-a169-5b4593482c3d"}
{"timestamp": "2025-12-29T13:37:16.974785+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.77s ago] {'id_1': 38, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c6d07dd-fbbd-4e3a-a169-5b4593482c3d"}
{"timestamp": "2025-12-29T13:37:16.977244+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c6d07dd-fbbd-4e3a-a169-5b4593482c3d"}
{"timestamp": "2025-12-29T13:37:16.977625+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.77s ago] {'name': 'Test Screen 1767015428.3202643', 'capacity': 150, 'seat_layout_id': 38}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c6d07dd-fbbd-4e3a-a169-5b4593482c3d"}
{"timestamp": "2025-12-29T13:37:16.979483+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6c6d07dd-fbbd-4e3a-a169-5b4593482c3d"}
{"timestamp": "2025-12-29T13:37:16.984039+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6c6d07dd-fbbd-4e3a-a169-5b4593482c3d"}
{"timestamp": "2025-12-29T13:37:16.984746+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c6d07dd-fbbd-4e3a-a169-5b4593482c3d"}
{"timestamp": "2025-12-29T13:37:16.985087+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.76s ago] {'pk_1': 38}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c6d07dd-fbbd-4e3a-a169-5b4593482c3d"}
{"timestamp": "2025-12-29T13:37:16.987005+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 38}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "6c6d07dd-fbbd-4e3a-a169-5b4593482c3d"}
{"timestamp": "2025-12-29T13:37:16.987331+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "6c6d07dd-fbbd-4e3a-a169-5b4593482c3d"}
{"timestamp": "2025-12-29T13:37:16.988188+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6c6d07dd-fbbd-4e3a-a169-5b4593482c3d"}
{"timestamp": "2025-12-29T13:37:16.988455+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "6c6d07dd-fbbd-4e3a-a169-5b4593482c3d"}
{"timestamp": "2025-12-29T13:37:16.989564+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.021s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "6c6d07dd-fbbd-4e3a-a169-5b4593482c3d"}
{"timestamp": "2025-12-29T13:37:16.990406+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6c6d07dd-fbbd-4e3a-a169-5b4593482c3d"}
{"timestamp": "2025-12-29T13:37:19.027684+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:19.030203+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:19.030868+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:19.031330+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.77s ago] {'pk_1': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:19.033829+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:19.034266+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.77s ago] {'pk_1': 38}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:19.036559+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:19.036987+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.77s ago] {'screen_id_1': 38, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:19.039070+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:19.039578+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.77s ago] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 39, 'screen_id': 38}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:19.042069+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:19.047076+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:19.047806+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:19.048335+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.76s ago] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:19.051086+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:19.051404+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.76s ago] {'pk_1': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:19.053792+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:19.054292+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.76s ago] {'pk_1': 38}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:19.056302+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 30}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:19.056633+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:19.057314+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:19.057499+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:19.058770+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.031s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:19.059711+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "145a8327-b248-4e0d-a1b5-7a532e438458"}
{"timestamp": "2025-12-29T13:37:21.106021+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.108650+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.109323+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.109813+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.6s ago] {'email_1': 'test_cancel_1767015439.059651@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.316167+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.316573+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.57s ago] {'email': 'test_cancel_1767015439.059651@example.com', 'hashed_password': '$2b$12$JcixA8YCyiX7Lb12uxTUJeSbZC6/M6yaPdiS6f3Na9dlX3TIXdkGO', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.318358+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.323227+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.323911+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.324494+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.57s ago] {'pk_1': 60}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.326765+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 60, 'email': 'test_cancel_1767015439.059651@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.327240+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.328010+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.328249+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.328475+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.330248+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.331024+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.331363+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.56s ago] {'user_id_1': 60, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.333968+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.334577+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.55s ago] {'user_id': 60, 'name': None, 'email': 'test_cancel_1767015439.059651@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.336564+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.341064+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.341607+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.341855+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.55s ago] {'pk_1': 60}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.344050+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 60, 'user_id': 60, 'email': 'test_cancel_1767015439.059651@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.344266+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.344411+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.344919+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.346178+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.347314+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.347777+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.83s ago] {'email_1': 'test_cancel_1767015439.059651@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.551508+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 60, 'email': 'test_cancel_1767015439.059651@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.551773+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.552526+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.552739+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.553967+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.448s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:21.554911+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2f3727cb-e4f2-47d5-bbe1-4feaa51eac86"}
{"timestamp": "2025-12-29T13:37:23.595102+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.597786+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.598462+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.598942+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.75s ago] {'pk_1': 60}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.601950+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.602457+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.75s ago] {'showtime_id_1': 30, 'seat_code_1': 'R6-6', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.604925+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.605337+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.75s ago] {'user_id': 60, 'showtime_id': 30, 'seat_code': 'R6-6', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 13, 37, 23, 604576, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 47, 23, 604313, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.607629+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.612983+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.613614+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.613963+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.75s ago] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.616291+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 30, 'user_id': 60, 'showtime_id': 30, 'seat_code': 'R6-6'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.616758+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.617755+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.618083+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.618255+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.619943+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.620579+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.621163+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.77s ago] {'showtime_id_1': 30, 'seat_code_1': 'R6-6', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.624162+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.624510+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.75s ago] {'seat_code': 'R6-6', 'showtime_id': 30, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.626813+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.627344+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.75s ago] {'status': 'LOCKED', 'locked_by_user_id': 60, 'lock_expires_at': datetime.datetime(2025, 12, 29, 13, 47, 23, 626356, tzinfo=datetime.timezone.utc), 'seat_locks_id': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.629454+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.633707+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.634476+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.635062+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.75s ago] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.637249+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 30, 'seat_code': 'R6-6', 'user_id': 60, 'expires_at': '2025-12-29T13:47:23.626356+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.637761+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.638013+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.638242+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.639314+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.639541+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.639680+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.639984+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 30, 'user_id': 60, 'showtime_id': 30, 'seat_code': 'R6-6'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.640333+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 30", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.642052+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.642628+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.642920+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.75s ago] {'user_id': 60, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.645294+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.649255+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.649793+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.650122+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.75s ago] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.652707+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 30, 'reservation_id': 30, 'user_id': 60, 'showtime_id': 30, 'seat_code': 'R6-6'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.653024+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.653281+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_order_created for order.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.653406+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_order_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.653533+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 30", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.654967+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.655467+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.655681+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.74s ago] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.658128+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 30, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.658419+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.658756+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_pricing_snapshot_created for pricing.snapshot_created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.659018+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_pricing_snapshot_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.659207+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 30, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.660679+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.661425+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.661862+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.7s ago] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.664114+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.664532+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.7s ago] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.666335+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.670001+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.670850+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.671275+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.77s ago] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.673696+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 30 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.674072+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.675232+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.675636+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 30: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.676244+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.677488+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.677770+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 30", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.678064+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.679354+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.679629+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.679821+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.681360+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.682098+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.682757+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.69s ago] {'actor_id': 60, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 30, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 30, \"user_id\": 60, \"showtime_id\": 30, \"seat_code\": \"R6-6\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 37, 23, 681651, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.685139+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.689862+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.690602+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.690930+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.69s ago] {'pk_1': 37}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.693495+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.695056+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.696269+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.101s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:23.697262+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "da1f65cd-c071-4c5a-a613-92f9240aa28c"}
{"timestamp": "2025-12-29T13:37:25.742889+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "20212ae3-950b-408f-9191-eb33421f5ab6"}
{"timestamp": "2025-12-29T13:37:25.745265+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "20212ae3-950b-408f-9191-eb33421f5ab6"}
{"timestamp": "2025-12-29T13:37:25.745854+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "20212ae3-950b-408f-9191-eb33421f5ab6"}
{"timestamp": "2025-12-29T13:37:25.746218+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 25.9s ago] {'pk_1': 60}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "20212ae3-950b-408f-9191-eb33421f5ab6"}
{"timestamp": "2025-12-29T13:37:25.748981+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "20212ae3-950b-408f-9191-eb33421f5ab6"}
{"timestamp": "2025-12-29T13:37:25.749446+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.7s ago] {'user_id_1': 60}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "20212ae3-950b-408f-9191-eb33421f5ab6"}
{"timestamp": "2025-12-29T13:37:25.751599+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.009s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "20212ae3-950b-408f-9191-eb33421f5ab6"}
{"timestamp": "2025-12-29T13:37:25.752473+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "20212ae3-950b-408f-9191-eb33421f5ab6"}
{"timestamp": "2025-12-29T13:37:27.804901+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/order/30/initiate", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "5afcdf2c-96e9-4001-a500-d293afedac72"}
{"timestamp": "2025-12-29T13:37:27.807603+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "5afcdf2c-96e9-4001-a500-d293afedac72"}
{"timestamp": "2025-12-29T13:37:27.808401+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5afcdf2c-96e9-4001-a500-d293afedac72"}
{"timestamp": "2025-12-29T13:37:27.808889+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 27.96s ago] {'pk_1': 60}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5afcdf2c-96e9-4001-a500-d293afedac72"}
{"timestamp": "2025-12-29T13:37:27.812651+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5afcdf2c-96e9-4001-a500-d293afedac72"}
{"timestamp": "2025-12-29T13:37:27.813147+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 27.85s ago] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5afcdf2c-96e9-4001-a500-d293afedac72"}
{"timestamp": "2025-12-29T13:37:27.815806+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO payment_attempts (order_id, amount_attempted, status, final_amount, failure_reason, provider_payment_id, created_at) VALUES (%(order_id)s, %(amount_attempted)s, %(status)s, %(final_amount)s, %(failure_reason)s, %(provider_payment_id)s, %(created_at)s) RETURNING payment_attempts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5afcdf2c-96e9-4001-a500-d293afedac72"}
{"timestamp": "2025-12-29T13:37:27.816408+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.7s ago] {'order_id': 30, 'amount_attempted': 1000, 'status': 'PENDING', 'final_amount': 1000, 'failure_reason': None, 'provider_payment_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 37, 27, 815412, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5afcdf2c-96e9-4001-a500-d293afedac72"}
{"timestamp": "2025-12-29T13:37:27.818280+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "5afcdf2c-96e9-4001-a500-d293afedac72"}
{"timestamp": "2025-12-29T13:37:27.822957+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "5afcdf2c-96e9-4001-a500-d293afedac72"}
{"timestamp": "2025-12-29T13:37:27.823538+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5afcdf2c-96e9-4001-a500-d293afedac72"}
{"timestamp": "2025-12-29T13:37:27.823847+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.69s ago] {'pk_1': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5afcdf2c-96e9-4001-a500-d293afedac72"}
{"timestamp": "2025-12-29T13:37:27.826628+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5afcdf2c-96e9-4001-a500-d293afedac72"}
{"timestamp": "2025-12-29T13:37:27.826997+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.69s ago] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5afcdf2c-96e9-4001-a500-d293afedac72"}
{"timestamp": "2025-12-29T13:37:27.828844+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.pending with payload: {'payment_attempt_id': 20, 'order_id': 30, 'amount_attempted': 1000, 'final_amount': 1000, 'user_id': 60}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "5afcdf2c-96e9-4001-a500-d293afedac72"}
{"timestamp": "2025-12-29T13:37:27.829192+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "5afcdf2c-96e9-4001-a500-d293afedac72"}
{"timestamp": "2025-12-29T13:37:27.829915+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.pending to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "5afcdf2c-96e9-4001-a500-d293afedac72"}
{"timestamp": "2025-12-29T13:37:27.830172+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: payment.pending", "module": "event_bus", "function": "publish", "line": 31, "request_id": "5afcdf2c-96e9-4001-a500-d293afedac72"}
{"timestamp": "2025-12-29T13:37:27.831334+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/order/30/initiate \u2192 200 (0.027s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "5afcdf2c-96e9-4001-a500-d293afedac72"}
{"timestamp": "2025-12-29T13:37:27.832189+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "5afcdf2c-96e9-4001-a500-d293afedac72"}
{"timestamp": "2025-12-29T13:37:29.879843+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/20/confirm", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.882413+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.883049+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.883448+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 30.04s ago] {'pk_1': 60}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.886351+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id AS payment_attempts_id, payment_attempts.order_id AS payment_attempts_order_id, payment_attempts.amount_attempted AS payment_attempts_amount_attempted, payment_attempts.status AS payment_attempts_status, payment_attempts.final_amount AS payment_attempts_final_amount, payment_attempts.failure_reason AS payment_attempts_failure_reason, payment_attempts.provider_payment_id AS payment_attempts_provider_payment_id, payment_attempts.created_at AS payment_attempts_created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.886824+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.69s ago] {'pk_1': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.889425+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.889915+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.69s ago] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.891938+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE payment_attempts SET status=%(status)s, provider_payment_id=%(provider_payment_id)s WHERE payment_attempts.id = %(payment_attempts_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.892330+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.69s ago] {'status': 'SUCCEEDED', 'provider_payment_id': 'mock_payment_20', 'payment_attempts_id': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.894632+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.899335+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.900012+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.900470+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 25.77s ago] {'pk_1': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.903295+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.903746+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 25.77s ago] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.905266+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.succeeded with payload: {'payment_attempt_id': 20, 'order_id': 30, 'final_amount': 1000.0, 'user_id': 60}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.905554+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.906585+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.succeeded to 4 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.906862+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_payment_succeeded for payment.succeeded", "module": "event_bus", "function": "publish", "line": 36, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.907099+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_payment_succeeded", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.907451+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.907745+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_payment_succeeded for payment.succeeded", "module": "event_bus", "function": "publish", "line": 36, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.908035+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_payment_succeeded", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.909849+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.910753+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.911327+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 29.95s ago] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.914243+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET is_completed=%(is_completed)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.914739+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.69s ago] {'is_completed': True, 'orders_id': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.916806+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.921130+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.921819+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.922228+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 30.02s ago] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.925079+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.completed with payload: {'order_id': 30}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.925367+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.completed to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.925553+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: order.completed", "module": "event_bus", "function": "publish", "line": 31, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.925952+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.927311+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.927597+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_payment_succeeded for payment.succeeded", "module": "event_bus", "function": "publish", "line": 36, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.927850+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_payment_succeeded", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.929742+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.930433+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.930885+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 43.15s ago] {'user_id_1': 60, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.934142+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.935294+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.935558+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_payment_succeeded for payment.succeeded", "module": "event_bus", "function": "publish", "line": 36, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.935713+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_payment_succeeded", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.937389+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.937918+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.938489+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 29.95s ago] {'actor_id': 60, 'actor_type': 'user', 'action': 'payment.succeeded', 'target_id': 30, 'target_type': 'order', 'payload': '{\"payment_attempt_id\": 20, \"order_id\": 30, \"final_amount\": 1000.0, \"user_id\": 60}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 37, 29, 937667, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.941084+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.945428+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.946414+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.946814+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 29.95s ago] {'pk_1': 38}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.948777+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.949762+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.951277+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/20/confirm \u2192 200 (0.072s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:29.952077+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ea6258c3-13d2-41d3-8208-12af14ea1514"}
{"timestamp": "2025-12-29T13:37:32.002712+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/30/cancel", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.005085+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.005634+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.005998+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.16s ago] {'pk_1': 60}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.009241+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id AS reservations_id, reservations.user_id AS reservations_user_id, reservations.showtime_id AS reservations_showtime_id, reservations.seat_code AS reservations_seat_code, reservations.status AS reservations_status, reservations.created_at AS reservations_created_at, reservations.expires_at AS reservations_expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.009789+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.012102+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE reservations SET status=%(status)s, expires_at=%(expires_at)s WHERE reservations.id = %(reservations_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.012461+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'status': 'CANCELLED', 'expires_at': None, 'reservations_id': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.014171+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.019034+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.019637+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.020052+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.16s ago] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.022017+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.cancelled with payload: {'reservation_id': 30}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.022305+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.023292+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.cancelled to 4 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.023584+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_cancelled for reservation.cancelled", "module": "event_bus", "function": "publish", "line": 36, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.023702+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_cancelled", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.023866+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_cancelled completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.023989+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_cancelled for reservation.cancelled", "module": "event_bus", "function": "publish", "line": 36, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.024083+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_cancelled", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.024183+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Order handler received reservation.cancelled: {'reservation_id': 30}", "module": "handlers", "function": "on_reservation_cancelled", "line": 50, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.025819+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.026954+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.reservation_id = %(reservation_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.027408+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'reservation_id_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.030003+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.cancelled with payload: {'order_id': 30}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.030298+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.cancelled to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.030569+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: order.cancelled", "module": "event_bus", "function": "publish", "line": 31, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.030966+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.032179+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_cancelled completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.032577+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_cancelled for reservation.cancelled", "module": "event_bus", "function": "publish", "line": 36, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.032892+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_cancelled", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.034842+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.035438+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.reservation_id = %(reservation_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.035783+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.009074s ago] {'reservation_id_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.039169+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.order_id = %(order_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.039667+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'order_id_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.042535+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT refunds.id, refunds.reservation_id, refunds.payment_attempt_id, refunds.amount, refunds.reason, refunds.created_at, refunds.status \nFROM refunds \nWHERE refunds.reservation_id = %(reservation_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.042907+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'reservation_id_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.045485+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO refunds (reservation_id, payment_attempt_id, amount, reason, created_at, status) VALUES (%(reservation_id)s, %(payment_attempt_id)s, %(amount)s, %(reason)s, %(created_at)s, %(status)s) RETURNING refunds.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.045919+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'reservation_id': 30, 'payment_attempt_id': 20, 'amount': 1000.0, 'reason': 'reservation_cancelled', 'created_at': datetime.datetime(2025, 12, 29, 13, 37, 32, 45118, tzinfo=datetime.timezone.utc), 'status': 'ISSUED'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.048579+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.053076+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.054242+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT refunds.id, refunds.reservation_id, refunds.payment_attempt_id, refunds.amount, refunds.reason, refunds.created_at, refunds.status \nFROM refunds \nWHERE refunds.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.054656+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'pk_1': 2}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.057728+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id AS payment_attempts_id, payment_attempts.order_id AS payment_attempts_order_id, payment_attempts.amount_attempted AS payment_attempts_amount_attempted, payment_attempts.status AS payment_attempts_status, payment_attempts.final_amount AS payment_attempts_final_amount, payment_attempts.failure_reason AS payment_attempts_failure_reason, payment_attempts.provider_payment_id AS payment_attempts_provider_payment_id, payment_attempts.created_at AS payment_attempts_created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.058121+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'pk_1': 20}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.059719+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: refund.issued with payload: {'refund_id': 2, 'reservation_id': 30, 'payment_attempt_id': 20, 'amount': 1000.0}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.060297+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.064138+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.event_bus", "message": "\u274c Event handler failed: reservation.cancelled -> on_reservation_cancelled: asyncio.run() cannot be called from a running event loop", "module": "event_bus", "function": "_safe_invoke", "line": 45, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\event_bus.py\", line 42, in _safe_invoke\n    await handler(payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\refund\\handlers.py\", line 34, in on_reservation_cancelled\n    issue_refund_from_event(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        db,\n        ^^^\n    ...<2 lines>...\n        reason=\"reservation_cancelled\"\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\refund\\service.py\", line 58, in issue_refund_from_event\n    publish_event(event[\"type\"], event[\"payload\"])\n    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\shared\\services\\event_publisher.py\", line 17, in publish_event\n    asyncio.run(event_bus.publish(event_type, payload))\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 191, in run\n    raise RuntimeError(\n        \"asyncio.run() cannot be called from a running event loop\")\nRuntimeError: asyncio.run() cannot be called from a running event loop"}
{"timestamp": "2025-12-29T13:37:32.068582+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_cancelled for reservation.cancelled", "module": "event_bus", "function": "publish", "line": 36, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.068883+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_cancelled", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.070626+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.071104+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.071370+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.08s ago] {'actor_id': None, 'actor_type': 'user', 'action': 'reservation.cancelled', 'target_id': 30, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 30}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 37, 32, 70885, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.073574+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.085836+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.event_bus", "message": "\u274c Event handler failed: reservation.cancelled -> on_reservation_cancelled: (psycopg2.errors.NotNullViolation) null value in column \"actor_id\" of relation \"audit_logs\" violates not-null constraint\nDETAIL:  Failing row contains (39, null, user, reservation.cancelled, 30, reservation, {\"reservation_id\": 30}, null, 2025-12-29 13:37:32.070885+00).\n\n[SQL: INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id]\n[parameters: {'actor_id': None, 'actor_type': 'user', 'action': 'reservation.cancelled', 'target_id': 30, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 30}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 37, 32, 70885, tzinfo=datetime.timezone.utc)}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)", "module": "event_bus", "function": "_safe_invoke", "line": 45, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\npsycopg2.errors.NotNullViolation: null value in column \"actor_id\" of relation \"audit_logs\" violates not-null constraint\nDETAIL:  Failing row contains (39, null, user, reservation.cancelled, 30, reservation, {\"reservation_id\": 30}, null, 2025-12-29 13:37:32.070885+00).\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\event_bus.py\", line 42, in _safe_invoke\n    await handler(payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\audit\\handlers.py\", line 28, in on_reservation_cancelled\n    write_audit_log(\n    ~~~~~~~~~~~~~~~^\n        db=db,\n        ^^^^^^\n    ...<5 lines>...\n        payload=payload,\n        ^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\audit\\service.py\", line 31, in write_audit_log\n    return repo.create(db, entry)\n           ~~~~~~~~~~~^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\audit\\repository.py\", line 17, in create\n    db.commit()\n    ~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2030, in commit\n    trans.commit(_to_root=True)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^\n  File \"<string>\", line 2, in commit\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\state_changes.py\", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 1311, in commit\n    self._prepare_impl()\n    ~~~~~~~~~~~~~~~~~~^^\n  File \"<string>\", line 2, in _prepare_impl\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\state_changes.py\", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 1286, in _prepare_impl\n    self.session.flush()\n    ~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 4331, in flush\n    self._flush(objects)\n    ~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 4466, in _flush\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 4427, in _flush\n    flush_context.execute()\n    ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py\", line 466, in execute\n    rec.execute(self)\n    ~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py\", line 642, in execute\n    util.preloaded.orm_persistence.save_obj(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self.mapper,\n        ^^^^^^^^^^^^\n        uow.states_for_mapper_hierarchy(self.mapper, False, False),\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        uow,\n        ^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\persistence.py\", line 93, in save_obj\n    _emit_insert_statements(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        base_mapper,\n        ^^^^^^^^^^^^\n    ...<3 lines>...\n        insert,\n        ^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\persistence.py\", line 1233, in _emit_insert_statements\n    result = connection.execute(\n        statement,\n        params,\n        execution_options=execution_options,\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\nsqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column \"actor_id\" of relation \"audit_logs\" violates not-null constraint\nDETAIL:  Failing row contains (39, null, user, reservation.cancelled, 30, reservation, {\"reservation_id\": 30}, null, 2025-12-29 13:37:32.070885+00).\n\n[SQL: INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id]\n[parameters: {'actor_id': None, 'actor_type': 'user', 'action': 'reservation.cancelled', 'target_id': 30, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 30}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 37, 32, 70885, tzinfo=datetime.timezone.utc)}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)"}
{"timestamp": "2025-12-29T13:37:32.100663+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/30/cancel \u2192 200 (0.098s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:32.101714+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "8bf8ba06-0f27-4fb3-8ab0-ee9ba0c11d1a"}
{"timestamp": "2025-12-29T13:37:34.140522+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.143396+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.144062+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.144625+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.63s ago] {'email_1': 'test_admin_1767015452.1023808@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.349418+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.349883+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.61s ago] {'email': 'test_admin_1767015452.1023808@example.com', 'hashed_password': '$2b$12$KnFNfGGSLGOFQXndCBNYQ.TyLLva4hu/TAQ99eZ4B0nSo7eyq3ImW', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.351635+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.356713+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.357446+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.357835+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.6s ago] {'pk_1': 61}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.359837+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 61, 'email': 'test_admin_1767015452.1023808@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.360217+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.361020+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.361305+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.361557+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.363432+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.364019+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.364313+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.59s ago] {'user_id_1': 61, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.366482+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.366921+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.59s ago] {'user_id': 61, 'name': None, 'email': 'test_admin_1767015452.1023808@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.369120+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.373985+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.374646+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.374963+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.58s ago] {'pk_1': 61}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.377330+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 61, 'user_id': 61, 'email': 'test_admin_1767015452.1023808@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.377577+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.377844+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.378161+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.379346+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.380630+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.381147+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.87s ago] {'email_1': 'test_admin_1767015452.1023808@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.585464+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 61, 'email': 'test_admin_1767015452.1023808@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.585850+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.586778+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.587006+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.588040+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.448s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:34.588918+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "50949d3e-74ac-4f84-b7f6-c761418ea270"}
{"timestamp": "2025-12-29T13:37:36.635264+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "92d6bc8b-b48b-4674-9907-0a8a6b4d4078"}
{"timestamp": "2025-12-29T13:37:36.638173+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "92d6bc8b-b48b-4674-9907-0a8a6b4d4078"}
{"timestamp": "2025-12-29T13:37:36.638641+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "92d6bc8b-b48b-4674-9907-0a8a6b4d4078"}
{"timestamp": "2025-12-29T13:37:36.639016+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.57s ago] {'title_1': 'Test Movie 1767015452.1023808'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "92d6bc8b-b48b-4674-9907-0a8a6b4d4078"}
{"timestamp": "2025-12-29T13:37:36.641373+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "92d6bc8b-b48b-4674-9907-0a8a6b4d4078"}
{"timestamp": "2025-12-29T13:37:36.641762+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.57s ago] {'title': 'Test Movie 1767015452.1023808', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "92d6bc8b-b48b-4674-9907-0a8a6b4d4078"}
{"timestamp": "2025-12-29T13:37:36.643571+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "92d6bc8b-b48b-4674-9907-0a8a6b4d4078"}
{"timestamp": "2025-12-29T13:37:36.648389+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "92d6bc8b-b48b-4674-9907-0a8a6b4d4078"}
{"timestamp": "2025-12-29T13:37:36.649095+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "92d6bc8b-b48b-4674-9907-0a8a6b4d4078"}
{"timestamp": "2025-12-29T13:37:36.650033+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.57s ago] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "92d6bc8b-b48b-4674-9907-0a8a6b4d4078"}
{"timestamp": "2025-12-29T13:37:36.651941+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 40}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "92d6bc8b-b48b-4674-9907-0a8a6b4d4078"}
{"timestamp": "2025-12-29T13:37:36.652215+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "92d6bc8b-b48b-4674-9907-0a8a6b4d4078"}
{"timestamp": "2025-12-29T13:37:36.652908+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "92d6bc8b-b48b-4674-9907-0a8a6b4d4078"}
{"timestamp": "2025-12-29T13:37:36.653086+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "92d6bc8b-b48b-4674-9907-0a8a6b4d4078"}
{"timestamp": "2025-12-29T13:37:36.654229+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.019s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "92d6bc8b-b48b-4674-9907-0a8a6b4d4078"}
{"timestamp": "2025-12-29T13:37:36.655212+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "92d6bc8b-b48b-4674-9907-0a8a6b4d4078"}
{"timestamp": "2025-12-29T13:37:38.694968+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "4a82973f-cd38-45bc-b4dd-0bd952837b37"}
{"timestamp": "2025-12-29T13:37:38.698014+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "4a82973f-cd38-45bc-b4dd-0bd952837b37"}
{"timestamp": "2025-12-29T13:37:38.698603+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4a82973f-cd38-45bc-b4dd-0bd952837b37"}
{"timestamp": "2025-12-29T13:37:38.698962+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.58s ago] {'name_1': 'Test Layout 1767015452.1023808'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4a82973f-cd38-45bc-b4dd-0bd952837b37"}
{"timestamp": "2025-12-29T13:37:38.701731+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4a82973f-cd38-45bc-b4dd-0bd952837b37"}
{"timestamp": "2025-12-29T13:37:38.702141+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.58s ago] {'name': 'Test Layout 1767015452.1023808', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4a82973f-cd38-45bc-b4dd-0bd952837b37"}
{"timestamp": "2025-12-29T13:37:38.704158+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "4a82973f-cd38-45bc-b4dd-0bd952837b37"}
{"timestamp": "2025-12-29T13:37:38.709273+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "4a82973f-cd38-45bc-b4dd-0bd952837b37"}
{"timestamp": "2025-12-29T13:37:38.710003+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4a82973f-cd38-45bc-b4dd-0bd952837b37"}
{"timestamp": "2025-12-29T13:37:38.710562+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.58s ago] {'pk_1': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4a82973f-cd38-45bc-b4dd-0bd952837b37"}
{"timestamp": "2025-12-29T13:37:38.712641+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 39}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "4a82973f-cd38-45bc-b4dd-0bd952837b37"}
{"timestamp": "2025-12-29T13:37:38.713203+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "4a82973f-cd38-45bc-b4dd-0bd952837b37"}
{"timestamp": "2025-12-29T13:37:38.713979+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "4a82973f-cd38-45bc-b4dd-0bd952837b37"}
{"timestamp": "2025-12-29T13:37:38.714201+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "4a82973f-cd38-45bc-b4dd-0bd952837b37"}
{"timestamp": "2025-12-29T13:37:38.715365+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.021s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "4a82973f-cd38-45bc-b4dd-0bd952837b37"}
{"timestamp": "2025-12-29T13:37:38.716303+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "4a82973f-cd38-45bc-b4dd-0bd952837b37"}
{"timestamp": "2025-12-29T13:37:40.743653+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b62c2ccb-ce12-41d1-a849-7a24675dd6de"}
{"timestamp": "2025-12-29T13:37:40.746376+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b62c2ccb-ce12-41d1-a849-7a24675dd6de"}
{"timestamp": "2025-12-29T13:37:40.746960+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b62c2ccb-ce12-41d1-a849-7a24675dd6de"}
{"timestamp": "2025-12-29T13:37:40.747252+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.55s ago] {'name_1': 'Test Screen 1767015452.1023808', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b62c2ccb-ce12-41d1-a849-7a24675dd6de"}
{"timestamp": "2025-12-29T13:37:40.750056+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b62c2ccb-ce12-41d1-a849-7a24675dd6de"}
{"timestamp": "2025-12-29T13:37:40.750534+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.55s ago] {'id_1': 39, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b62c2ccb-ce12-41d1-a849-7a24675dd6de"}
{"timestamp": "2025-12-29T13:37:40.752734+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b62c2ccb-ce12-41d1-a849-7a24675dd6de"}
{"timestamp": "2025-12-29T13:37:40.753072+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.54s ago] {'name': 'Test Screen 1767015452.1023808', 'capacity': 150, 'seat_layout_id': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b62c2ccb-ce12-41d1-a849-7a24675dd6de"}
{"timestamp": "2025-12-29T13:37:40.754949+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b62c2ccb-ce12-41d1-a849-7a24675dd6de"}
{"timestamp": "2025-12-29T13:37:40.759490+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b62c2ccb-ce12-41d1-a849-7a24675dd6de"}
{"timestamp": "2025-12-29T13:37:40.760066+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b62c2ccb-ce12-41d1-a849-7a24675dd6de"}
{"timestamp": "2025-12-29T13:37:40.760419+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.54s ago] {'pk_1': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b62c2ccb-ce12-41d1-a849-7a24675dd6de"}
{"timestamp": "2025-12-29T13:37:40.762559+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 39}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "b62c2ccb-ce12-41d1-a849-7a24675dd6de"}
{"timestamp": "2025-12-29T13:37:40.762833+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "b62c2ccb-ce12-41d1-a849-7a24675dd6de"}
{"timestamp": "2025-12-29T13:37:40.763818+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b62c2ccb-ce12-41d1-a849-7a24675dd6de"}
{"timestamp": "2025-12-29T13:37:40.764141+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "b62c2ccb-ce12-41d1-a849-7a24675dd6de"}
{"timestamp": "2025-12-29T13:37:40.765254+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b62c2ccb-ce12-41d1-a849-7a24675dd6de"}
{"timestamp": "2025-12-29T13:37:40.766147+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b62c2ccb-ce12-41d1-a849-7a24675dd6de"}
{"timestamp": "2025-12-29T13:37:42.808989+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:42.811450+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:42.812035+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:42.812406+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.55s ago] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:42.814961+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:42.815335+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.55s ago] {'pk_1': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:42.817417+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:42.817824+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.55s ago] {'screen_id_1': 39, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:42.819877+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:42.820337+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.55s ago] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 40, 'screen_id': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:42.822478+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:42.826997+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:42.827822+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:42.828281+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.55s ago] {'pk_1': 31}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:42.830895+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:42.831241+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.54s ago] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:42.833053+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:42.833362+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.54s ago] {'pk_1': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:42.834910+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 31}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:42.835147+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:42.835916+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:42.836184+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:42.837206+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.028s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:42.838085+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "068b9dda-9ec7-41cb-9cea-f6ff6df2bf84"}
{"timestamp": "2025-12-29T13:37:44.886322+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:44.888955+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:44.889588+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:44.890044+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.38s ago] {'email_1': 'test_failpay_1767015462.8380132@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.099411+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.099924+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.36s ago] {'email': 'test_failpay_1767015462.8380132@example.com', 'hashed_password': '$2b$12$c3mK2pRKBuxqZMjeKuWwCe0RkltCYGnW2SObSnjKbjjprpGwTNVb2', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.101654+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.105806+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.106574+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.107069+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.35s ago] {'pk_1': 62}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.109036+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 62, 'email': 'test_failpay_1767015462.8380132@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.109271+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.109935+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.110090+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.110183+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.111749+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.112324+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.112678+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.34s ago] {'user_id_1': 62, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.114978+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.115260+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.33s ago] {'user_id': 62, 'name': None, 'email': 'test_failpay_1767015462.8380132@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.116801+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.121444+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.121960+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.122178+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.33s ago] {'pk_1': 62}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.123909+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 62, 'user_id': 62, 'email': 'test_failpay_1767015462.8380132@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.124138+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.124562+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.124960+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.126124+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.127171+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.127444+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.61s ago] {'email_1': 'test_failpay_1767015462.8380132@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.333540+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 62, 'email': 'test_failpay_1767015462.8380132@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.333837+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.334694+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.334938+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.336028+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.450s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:45.336981+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b8acd6e4-176b-4c06-9e31-50bf374174f3"}
{"timestamp": "2025-12-29T13:37:47.371406+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.374057+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.374689+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.375153+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.53s ago] {'pk_1': 62}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.378126+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.378533+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.53s ago] {'showtime_id_1': 31, 'seat_code_1': 'R7-7', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.380602+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.381081+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.53s ago] {'user_id': 62, 'showtime_id': 31, 'seat_code': 'R7-7', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 13, 37, 47, 380250, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 47, 47, 379985, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.383336+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.387885+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.388478+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.388973+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.53s ago] {'pk_1': 31}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.390985+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 31, 'user_id': 62, 'showtime_id': 31, 'seat_code': 'R7-7'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.391255+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.392074+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.392340+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.392495+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.394131+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.394761+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.395062+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.54s ago] {'showtime_id_1': 31, 'seat_code_1': 'R7-7', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.397591+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.397962+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.52s ago] {'seat_code': 'R7-7', 'showtime_id': 31, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.399949+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.400221+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.52s ago] {'status': 'LOCKED', 'locked_by_user_id': 62, 'lock_expires_at': datetime.datetime(2025, 12, 29, 13, 47, 47, 399551, tzinfo=datetime.timezone.utc), 'seat_locks_id': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.402080+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.405970+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.406576+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.406921+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.52s ago] {'pk_1': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.408755+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 31, 'seat_code': 'R7-7', 'user_id': 62, 'expires_at': '2025-12-29T13:47:47.399551+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.408952+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.409077+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.409398+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.410411+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.410641+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.410837+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.411001+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 31, 'user_id': 62, 'showtime_id': 31, 'seat_code': 'R7-7'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.411210+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 31", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.412614+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.413300+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.413621+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.52s ago] {'user_id': 62, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 31}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.415744+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.419562+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.420171+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.420487+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.52s ago] {'pk_1': 31}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.422347+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 31, 'reservation_id': 31, 'user_id': 62, 'showtime_id': 31, 'seat_code': 'R7-7'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.422540+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.422694+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_order_created for order.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.422913+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_order_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.423064+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 31", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.424460+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.425001+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.425482+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.51s ago] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.428778+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 31, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.429062+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.429347+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_pricing_snapshot_created for pricing.snapshot_created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.429516+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_pricing_snapshot_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.429672+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 31, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.431627+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.432366+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.432792+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.47s ago] {'pk_1': 31}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.435595+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.436032+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.47s ago] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 31}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.437930+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.442131+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.442638+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.442848+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.54s ago] {'pk_1': 31}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.444975+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 31 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.445272+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.446273+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.446466+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 31: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.446693+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.447788+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.448009+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 31", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.448221+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.449252+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.449419+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.449514+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.450734+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.451267+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.451569+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.46s ago] {'actor_id': 62, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 31, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 31, \"user_id\": 62, \"showtime_id\": 31, \"seat_code\": \"R7-7\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 37, 47, 451012, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.453715+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.457482+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.458025+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.458298+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.46s ago] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.460284+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.461509+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.462695+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.091s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:47.463621+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "cebc2ef8-af05-4daa-b205-e12da8add43e"}
{"timestamp": "2025-12-29T13:37:49.513256+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "3c643832-5068-429a-bc35-1aec135c07bb"}
{"timestamp": "2025-12-29T13:37:49.515736+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3c643832-5068-429a-bc35-1aec135c07bb"}
{"timestamp": "2025-12-29T13:37:49.516415+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3c643832-5068-429a-bc35-1aec135c07bb"}
{"timestamp": "2025-12-29T13:37:49.516898+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 49.67s ago] {'pk_1': 62}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3c643832-5068-429a-bc35-1aec135c07bb"}
{"timestamp": "2025-12-29T13:37:49.519715+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3c643832-5068-429a-bc35-1aec135c07bb"}
{"timestamp": "2025-12-29T13:37:49.520164+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.47s ago] {'user_id_1': 62}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3c643832-5068-429a-bc35-1aec135c07bb"}
{"timestamp": "2025-12-29T13:37:49.522524+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.009s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "3c643832-5068-429a-bc35-1aec135c07bb"}
{"timestamp": "2025-12-29T13:37:49.523436+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "3c643832-5068-429a-bc35-1aec135c07bb"}
{"timestamp": "2025-12-29T13:37:51.581340+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/order/31/initiate", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "06a59b0b-e295-4577-8e95-8abcb18fe3bb"}
{"timestamp": "2025-12-29T13:37:51.583963+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "06a59b0b-e295-4577-8e95-8abcb18fe3bb"}
{"timestamp": "2025-12-29T13:37:51.584585+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "06a59b0b-e295-4577-8e95-8abcb18fe3bb"}
{"timestamp": "2025-12-29T13:37:51.584917+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 51.74s ago] {'pk_1': 62}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "06a59b0b-e295-4577-8e95-8abcb18fe3bb"}
{"timestamp": "2025-12-29T13:37:51.587771+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "06a59b0b-e295-4577-8e95-8abcb18fe3bb"}
{"timestamp": "2025-12-29T13:37:51.588171+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 51.62s ago] {'pk_1': 31}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "06a59b0b-e295-4577-8e95-8abcb18fe3bb"}
{"timestamp": "2025-12-29T13:37:51.590361+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO payment_attempts (order_id, amount_attempted, status, final_amount, failure_reason, provider_payment_id, created_at) VALUES (%(order_id)s, %(amount_attempted)s, %(status)s, %(final_amount)s, %(failure_reason)s, %(provider_payment_id)s, %(created_at)s) RETURNING payment_attempts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "06a59b0b-e295-4577-8e95-8abcb18fe3bb"}
{"timestamp": "2025-12-29T13:37:51.590975+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.47s ago] {'order_id': 31, 'amount_attempted': 1000, 'status': 'PENDING', 'final_amount': 1000, 'failure_reason': None, 'provider_payment_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 37, 51, 589904, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "06a59b0b-e295-4577-8e95-8abcb18fe3bb"}
{"timestamp": "2025-12-29T13:37:51.592927+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "06a59b0b-e295-4577-8e95-8abcb18fe3bb"}
{"timestamp": "2025-12-29T13:37:51.598331+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "06a59b0b-e295-4577-8e95-8abcb18fe3bb"}
{"timestamp": "2025-12-29T13:37:51.599044+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "06a59b0b-e295-4577-8e95-8abcb18fe3bb"}
{"timestamp": "2025-12-29T13:37:51.599394+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.47s ago] {'pk_1': 21}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "06a59b0b-e295-4577-8e95-8abcb18fe3bb"}
{"timestamp": "2025-12-29T13:37:51.601740+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "06a59b0b-e295-4577-8e95-8abcb18fe3bb"}
{"timestamp": "2025-12-29T13:37:51.602083+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.47s ago] {'pk_1': 31}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "06a59b0b-e295-4577-8e95-8abcb18fe3bb"}
{"timestamp": "2025-12-29T13:37:51.603510+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.pending with payload: {'payment_attempt_id': 21, 'order_id': 31, 'amount_attempted': 1000, 'final_amount': 1000, 'user_id': 62}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "06a59b0b-e295-4577-8e95-8abcb18fe3bb"}
{"timestamp": "2025-12-29T13:37:51.603760+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "06a59b0b-e295-4577-8e95-8abcb18fe3bb"}
{"timestamp": "2025-12-29T13:37:51.604771+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.pending to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "06a59b0b-e295-4577-8e95-8abcb18fe3bb"}
{"timestamp": "2025-12-29T13:37:51.605028+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: payment.pending", "module": "event_bus", "function": "publish", "line": 31, "request_id": "06a59b0b-e295-4577-8e95-8abcb18fe3bb"}
{"timestamp": "2025-12-29T13:37:51.606188+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/order/31/initiate \u2192 200 (0.025s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "06a59b0b-e295-4577-8e95-8abcb18fe3bb"}
{"timestamp": "2025-12-29T13:37:51.607024+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "06a59b0b-e295-4577-8e95-8abcb18fe3bb"}
{"timestamp": "2025-12-29T13:37:53.643264+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /admin/payments/21/fail", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "bcc6a970-0cf1-4bae-9d26-944b5e2d4d4f"}
{"timestamp": "2025-12-29T13:37:53.645581+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bcc6a970-0cf1-4bae-9d26-944b5e2d4d4f"}
{"timestamp": "2025-12-29T13:37:53.646276+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bcc6a970-0cf1-4bae-9d26-944b5e2d4d4f"}
{"timestamp": "2025-12-29T13:37:53.646657+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 53.8s ago] {'pk_1': 61}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bcc6a970-0cf1-4bae-9d26-944b5e2d4d4f"}
{"timestamp": "2025-12-29T13:37:53.649614+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "bcc6a970-0cf1-4bae-9d26-944b5e2d4d4f"}
{"timestamp": "2025-12-29T13:37:53.651185+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /admin/payments/21/fail \u2192 403 (0.008s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "bcc6a970-0cf1-4bae-9d26-944b5e2d4d4f"}
{"timestamp": "2025-12-29T13:37:55.691540+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.694345+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.695034+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.695437+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.18s ago] {'email_1': 'test_admin_1767015473.6523@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.901136+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.901642+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.16s ago] {'email': 'test_admin_1767015473.6523@example.com', 'hashed_password': '$2b$12$Ji06TPUJyr.IK6Tmx2JLZOHYZce32ppvH8fCA.Y8QO0w5kTwic4WS', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.903439+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.907956+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.908616+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.909041+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.16s ago] {'pk_1': 63}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.911207+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 63, 'email': 'test_admin_1767015473.6523@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.911479+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.912186+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.912391+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.912494+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.914019+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.914550+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.914787+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.14s ago] {'user_id_1': 63, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.916908+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.917177+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.14s ago] {'user_id': 63, 'name': None, 'email': 'test_admin_1767015473.6523@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.918770+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.923081+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.923827+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.924402+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.13s ago] {'pk_1': 63}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.926609+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 63, 'user_id': 63, 'email': 'test_admin_1767015473.6523@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.926923+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.927068+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.927310+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.928405+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.929628+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:55.930118+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.42s ago] {'email_1': 'test_admin_1767015473.6523@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:56.135950+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 63, 'email': 'test_admin_1767015473.6523@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:56.136312+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:56.137163+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:56.137425+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:56.138617+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.447s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:56.139566+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2ac6bd21-ec8c-4e2a-8519-5ab7866b7efe"}
{"timestamp": "2025-12-29T13:37:58.184600+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "8c75d2ed-0a32-442b-9932-2bf66a00cb49"}
{"timestamp": "2025-12-29T13:37:58.187373+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8c75d2ed-0a32-442b-9932-2bf66a00cb49"}
{"timestamp": "2025-12-29T13:37:58.188025+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8c75d2ed-0a32-442b-9932-2bf66a00cb49"}
{"timestamp": "2025-12-29T13:37:58.188485+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.12s ago] {'title_1': 'Test Movie 1767015473.6523'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8c75d2ed-0a32-442b-9932-2bf66a00cb49"}
{"timestamp": "2025-12-29T13:37:58.191270+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8c75d2ed-0a32-442b-9932-2bf66a00cb49"}
{"timestamp": "2025-12-29T13:37:58.191801+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.12s ago] {'title': 'Test Movie 1767015473.6523', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8c75d2ed-0a32-442b-9932-2bf66a00cb49"}
{"timestamp": "2025-12-29T13:37:58.193847+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "8c75d2ed-0a32-442b-9932-2bf66a00cb49"}
{"timestamp": "2025-12-29T13:37:58.199347+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8c75d2ed-0a32-442b-9932-2bf66a00cb49"}
{"timestamp": "2025-12-29T13:37:58.200205+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8c75d2ed-0a32-442b-9932-2bf66a00cb49"}
{"timestamp": "2025-12-29T13:37:58.200633+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.12s ago] {'pk_1': 41}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8c75d2ed-0a32-442b-9932-2bf66a00cb49"}
{"timestamp": "2025-12-29T13:37:58.203051+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 41}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "8c75d2ed-0a32-442b-9932-2bf66a00cb49"}
{"timestamp": "2025-12-29T13:37:58.203403+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "8c75d2ed-0a32-442b-9932-2bf66a00cb49"}
{"timestamp": "2025-12-29T13:37:58.204339+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "8c75d2ed-0a32-442b-9932-2bf66a00cb49"}
{"timestamp": "2025-12-29T13:37:58.204749+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "8c75d2ed-0a32-442b-9932-2bf66a00cb49"}
{"timestamp": "2025-12-29T13:37:58.205917+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.021s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "8c75d2ed-0a32-442b-9932-2bf66a00cb49"}
{"timestamp": "2025-12-29T13:37:58.206791+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "8c75d2ed-0a32-442b-9932-2bf66a00cb49"}
{"timestamp": "2025-12-29T13:38:00.245112+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b7c0582a-6e82-4c37-a3b8-f58105a88e82"}
{"timestamp": "2025-12-29T13:38:00.248130+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b7c0582a-6e82-4c37-a3b8-f58105a88e82"}
{"timestamp": "2025-12-29T13:38:00.248798+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b7c0582a-6e82-4c37-a3b8-f58105a88e82"}
{"timestamp": "2025-12-29T13:38:00.249313+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.13s ago] {'name_1': 'Test Layout 1767015473.6523'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b7c0582a-6e82-4c37-a3b8-f58105a88e82"}
{"timestamp": "2025-12-29T13:38:00.251965+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b7c0582a-6e82-4c37-a3b8-f58105a88e82"}
{"timestamp": "2025-12-29T13:38:00.252339+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.13s ago] {'name': 'Test Layout 1767015473.6523', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b7c0582a-6e82-4c37-a3b8-f58105a88e82"}
{"timestamp": "2025-12-29T13:38:00.254113+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b7c0582a-6e82-4c37-a3b8-f58105a88e82"}
{"timestamp": "2025-12-29T13:38:00.258493+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b7c0582a-6e82-4c37-a3b8-f58105a88e82"}
{"timestamp": "2025-12-29T13:38:00.259286+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b7c0582a-6e82-4c37-a3b8-f58105a88e82"}
{"timestamp": "2025-12-29T13:38:00.259855+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.13s ago] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b7c0582a-6e82-4c37-a3b8-f58105a88e82"}
{"timestamp": "2025-12-29T13:38:00.262221+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 40}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "b7c0582a-6e82-4c37-a3b8-f58105a88e82"}
{"timestamp": "2025-12-29T13:38:00.262497+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "b7c0582a-6e82-4c37-a3b8-f58105a88e82"}
{"timestamp": "2025-12-29T13:38:00.263170+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b7c0582a-6e82-4c37-a3b8-f58105a88e82"}
{"timestamp": "2025-12-29T13:38:00.263386+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "b7c0582a-6e82-4c37-a3b8-f58105a88e82"}
{"timestamp": "2025-12-29T13:38:00.264717+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.020s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b7c0582a-6e82-4c37-a3b8-f58105a88e82"}
{"timestamp": "2025-12-29T13:38:00.265675+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b7c0582a-6e82-4c37-a3b8-f58105a88e82"}
{"timestamp": "2025-12-29T13:38:02.307187+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "ef9a3246-6208-408c-ba7a-38c8e69dfa59"}
{"timestamp": "2025-12-29T13:38:02.310205+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ef9a3246-6208-408c-ba7a-38c8e69dfa59"}
{"timestamp": "2025-12-29T13:38:02.310888+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ef9a3246-6208-408c-ba7a-38c8e69dfa59"}
{"timestamp": "2025-12-29T13:38:02.311345+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.11s ago] {'name_1': 'Test Screen 1767015473.6523', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ef9a3246-6208-408c-ba7a-38c8e69dfa59"}
{"timestamp": "2025-12-29T13:38:02.314385+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ef9a3246-6208-408c-ba7a-38c8e69dfa59"}
{"timestamp": "2025-12-29T13:38:02.314799+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.11s ago] {'id_1': 40, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ef9a3246-6208-408c-ba7a-38c8e69dfa59"}
{"timestamp": "2025-12-29T13:38:02.316743+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ef9a3246-6208-408c-ba7a-38c8e69dfa59"}
{"timestamp": "2025-12-29T13:38:02.317154+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.11s ago] {'name': 'Test Screen 1767015473.6523', 'capacity': 150, 'seat_layout_id': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ef9a3246-6208-408c-ba7a-38c8e69dfa59"}
{"timestamp": "2025-12-29T13:38:02.319121+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "ef9a3246-6208-408c-ba7a-38c8e69dfa59"}
{"timestamp": "2025-12-29T13:38:02.324479+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ef9a3246-6208-408c-ba7a-38c8e69dfa59"}
{"timestamp": "2025-12-29T13:38:02.325182+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ef9a3246-6208-408c-ba7a-38c8e69dfa59"}
{"timestamp": "2025-12-29T13:38:02.325658+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.11s ago] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ef9a3246-6208-408c-ba7a-38c8e69dfa59"}
{"timestamp": "2025-12-29T13:38:02.328014+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 40}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "ef9a3246-6208-408c-ba7a-38c8e69dfa59"}
{"timestamp": "2025-12-29T13:38:02.328538+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "ef9a3246-6208-408c-ba7a-38c8e69dfa59"}
{"timestamp": "2025-12-29T13:38:02.329288+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "ef9a3246-6208-408c-ba7a-38c8e69dfa59"}
{"timestamp": "2025-12-29T13:38:02.329484+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "ef9a3246-6208-408c-ba7a-38c8e69dfa59"}
{"timestamp": "2025-12-29T13:38:02.330673+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.024s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "ef9a3246-6208-408c-ba7a-38c8e69dfa59"}
{"timestamp": "2025-12-29T13:38:02.331625+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ef9a3246-6208-408c-ba7a-38c8e69dfa59"}
{"timestamp": "2025-12-29T13:38:04.367930+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:04.370386+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:04.370999+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:04.371330+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.11s ago] {'pk_1': 41}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:04.373681+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:04.374133+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.11s ago] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:04.376122+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:04.376684+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.11s ago] {'screen_id_1': 40, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:04.378712+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:04.379130+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.11s ago] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 41, 'screen_id': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:04.381014+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:04.385521+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:04.386120+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:04.386551+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.1s ago] {'pk_1': 32}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:04.388905+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:04.389309+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.1s ago] {'pk_1': 41}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:04.391171+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:04.391640+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.1s ago] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:04.393152+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 32}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:04.393498+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:04.394242+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:04.394461+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:04.395448+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.028s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:04.396291+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "04b8c363-0179-479c-905e-2a7150c1eeab"}
{"timestamp": "2025-12-29T13:38:06.446881+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.450028+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.450702+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.451079+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 79.94s ago] {'email_1': 'test_admincancel_1767015484.396258@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.655805+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.656323+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 79.92s ago] {'email': 'test_admincancel_1767015484.396258@example.com', 'hashed_password': '$2b$12$rChcOsuspF9Z4DLjj7filepoK.KLYChT3U7YZ5MngfdLRrO.xw4Vu', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.657834+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.662206+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.662902+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.663322+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 79.91s ago] {'pk_1': 64}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.665158+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 64, 'email': 'test_admincancel_1767015484.396258@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.665399+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.666120+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.666372+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.666508+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.668138+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.668782+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.669103+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 79.89s ago] {'user_id_1': 64, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.671241+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.671581+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 79.89s ago] {'user_id': 64, 'name': None, 'email': 'test_admincancel_1767015484.396258@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.673073+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.676837+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.677440+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.677810+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 79.89s ago] {'pk_1': 64}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.679786+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 64, 'user_id': 64, 'email': 'test_admincancel_1767015484.396258@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.680073+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.680199+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.680414+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.681504+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.682559+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.683102+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 80.17s ago] {'email_1': 'test_admincancel_1767015484.396258@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.886259+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 64, 'email': 'test_admincancel_1767015484.396258@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.886600+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.887422+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.887652+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.888692+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.442s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:06.889779+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f0354e59-fa62-4618-8ee9-5fc13bc1a0ad"}
{"timestamp": "2025-12-29T13:38:08.933593+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.936642+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.937292+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.937642+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.09s ago] {'pk_1': 64}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.940767+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.941211+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.09s ago] {'showtime_id_1': 32, 'seat_code_1': 'R8-8', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.943292+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.943639+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.09s ago] {'user_id': 64, 'showtime_id': 32, 'seat_code': 'R8-8', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 13, 38, 8, 943000, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 48, 8, 942736, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.945419+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.949888+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.950443+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.950710+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.09s ago] {'pk_1': 32}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.952711+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 32, 'user_id': 64, 'showtime_id': 32, 'seat_code': 'R8-8'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.952958+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.953859+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.954097+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.954350+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.955917+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.956460+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.956835+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.11s ago] {'showtime_id_1': 32, 'seat_code_1': 'R8-8', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.958956+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.959308+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.09s ago] {'seat_code': 'R8-8', 'showtime_id': 32, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.961433+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.961704+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.08s ago] {'status': 'LOCKED', 'locked_by_user_id': 64, 'lock_expires_at': datetime.datetime(2025, 12, 29, 13, 48, 8, 961037, tzinfo=datetime.timezone.utc), 'seat_locks_id': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.963193+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.967177+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.967802+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.968113+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.08s ago] {'pk_1': 28}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.969888+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 32, 'seat_code': 'R8-8', 'user_id': 64, 'expires_at': '2025-12-29T13:48:08.961037+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.970074+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.970198+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.970410+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.971291+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.971494+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.971594+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.971711+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 32, 'user_id': 64, 'showtime_id': 32, 'seat_code': 'R8-8'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.971855+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 32", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.973181+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.973894+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.974443+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.08s ago] {'user_id': 64, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 32}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.976743+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.980705+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.981179+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.981389+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.08s ago] {'pk_1': 32}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.983245+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 32, 'reservation_id': 32, 'user_id': 64, 'showtime_id': 32, 'seat_code': 'R8-8'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.983456+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.983579+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_order_created for order.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.983672+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_order_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.983774+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 32", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.984976+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.985405+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.985705+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.07s ago] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.987996+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 32, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.988200+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.988317+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_pricing_snapshot_created for pricing.snapshot_created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.988411+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_pricing_snapshot_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.988548+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 32, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.989894+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.990385+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.990724+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.03s ago] {'pk_1': 32}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.993109+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.993412+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.03s ago] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 32}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.995085+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.998705+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.999277+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:08.999570+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.1s ago] {'pk_1': 32}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:09.001783+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 32 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:09.002140+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:09.003146+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:09.003319+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 32: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:09.003655+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:09.004776+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:09.004970+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 32", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:09.005178+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:09.006153+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:09.006331+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:09.006427+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:09.007825+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:09.008352+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:09.008735+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.02s ago] {'actor_id': 64, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 32, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 32, \"user_id\": 64, \"showtime_id\": 32, \"seat_code\": \"R8-8\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 38, 9, 8108, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:09.011203+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:09.015043+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:09.015772+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:09.016147+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.02s ago] {'pk_1': 41}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:09.017899+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:09.018628+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:09.019665+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.086s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:09.020508+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6e1e3657-cbf1-48ae-887d-d48c16865f38"}
{"timestamp": "2025-12-29T13:38:11.076841+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /admin/reservations/32/cancel", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "cde95bcd-2ee5-45ea-8e45-274cb669152e"}
{"timestamp": "2025-12-29T13:38:11.079227+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cde95bcd-2ee5-45ea-8e45-274cb669152e"}
{"timestamp": "2025-12-29T13:38:11.079810+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cde95bcd-2ee5-45ea-8e45-274cb669152e"}
{"timestamp": "2025-12-29T13:38:11.080158+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.23s ago] {'pk_1': 63}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cde95bcd-2ee5-45ea-8e45-274cb669152e"}
{"timestamp": "2025-12-29T13:38:11.082735+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "cde95bcd-2ee5-45ea-8e45-274cb669152e"}
{"timestamp": "2025-12-29T13:38:11.084268+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /admin/reservations/32/cancel \u2192 403 (0.007s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "cde95bcd-2ee5-45ea-8e45-274cb669152e"}
{"timestamp": "2025-12-29T13:38:13.138026+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.141066+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.141837+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.142230+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.63s ago] {'email_1': 'test_admin_1767015491.0854542@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.346752+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.347162+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.61s ago] {'email': 'test_admin_1767015491.0854542@example.com', 'hashed_password': '$2b$12$8qUKPVoAoiQeAMA6xxwJI.8nu2hGtJHCjBQkUCyYajkWufB.3PXWK', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.348966+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.353499+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.354169+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.354697+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.6s ago] {'pk_1': 65}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.357036+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 65, 'email': 'test_admin_1767015491.0854542@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.357335+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.358137+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.358347+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.358474+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.360213+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.360883+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.361257+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.59s ago] {'user_id_1': 65, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.363857+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.364271+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.58s ago] {'user_id': 65, 'name': None, 'email': 'test_admin_1767015491.0854542@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.366071+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.370142+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.370775+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.371434+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.58s ago] {'pk_1': 65}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.373891+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 65, 'user_id': 65, 'email': 'test_admin_1767015491.0854542@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.374168+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.374361+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.374734+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.375865+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.377507+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.378077+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.87s ago] {'email_1': 'test_admin_1767015491.0854542@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.583968+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 65, 'email': 'test_admin_1767015491.0854542@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.584317+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.585204+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.585448+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.586476+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.448s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:13.587548+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6b38e97e-ef77-4d59-bd32-3f1e63fad8fa"}
{"timestamp": "2025-12-29T13:38:15.638175+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b642638d-bbb9-4daf-86f9-3d373499f676"}
{"timestamp": "2025-12-29T13:38:15.642501+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b642638d-bbb9-4daf-86f9-3d373499f676"}
{"timestamp": "2025-12-29T13:38:15.643738+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b642638d-bbb9-4daf-86f9-3d373499f676"}
{"timestamp": "2025-12-29T13:38:15.645042+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.58s ago] {'title_1': 'Test Movie 1767015491.0854542'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b642638d-bbb9-4daf-86f9-3d373499f676"}
{"timestamp": "2025-12-29T13:38:15.649489+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b642638d-bbb9-4daf-86f9-3d373499f676"}
{"timestamp": "2025-12-29T13:38:15.650750+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.58s ago] {'title': 'Test Movie 1767015491.0854542', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b642638d-bbb9-4daf-86f9-3d373499f676"}
{"timestamp": "2025-12-29T13:38:15.653410+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b642638d-bbb9-4daf-86f9-3d373499f676"}
{"timestamp": "2025-12-29T13:38:15.659150+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b642638d-bbb9-4daf-86f9-3d373499f676"}
{"timestamp": "2025-12-29T13:38:15.660408+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b642638d-bbb9-4daf-86f9-3d373499f676"}
{"timestamp": "2025-12-29T13:38:15.661258+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.58s ago] {'pk_1': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b642638d-bbb9-4daf-86f9-3d373499f676"}
{"timestamp": "2025-12-29T13:38:15.664330+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 42}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "b642638d-bbb9-4daf-86f9-3d373499f676"}
{"timestamp": "2025-12-29T13:38:15.664913+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "b642638d-bbb9-4daf-86f9-3d373499f676"}
{"timestamp": "2025-12-29T13:38:15.666265+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b642638d-bbb9-4daf-86f9-3d373499f676"}
{"timestamp": "2025-12-29T13:38:15.666824+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "b642638d-bbb9-4daf-86f9-3d373499f676"}
{"timestamp": "2025-12-29T13:38:15.669147+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.031s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b642638d-bbb9-4daf-86f9-3d373499f676"}
{"timestamp": "2025-12-29T13:38:15.671251+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b642638d-bbb9-4daf-86f9-3d373499f676"}
{"timestamp": "2025-12-29T13:38:17.711626+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "5a4d87d7-f83f-4659-96d1-6c38f2a703bf"}
{"timestamp": "2025-12-29T13:38:17.714378+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "5a4d87d7-f83f-4659-96d1-6c38f2a703bf"}
{"timestamp": "2025-12-29T13:38:17.714946+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5a4d87d7-f83f-4659-96d1-6c38f2a703bf"}
{"timestamp": "2025-12-29T13:38:17.715291+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.6s ago] {'name_1': 'Test Layout 1767015491.0854542'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5a4d87d7-f83f-4659-96d1-6c38f2a703bf"}
{"timestamp": "2025-12-29T13:38:17.717788+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5a4d87d7-f83f-4659-96d1-6c38f2a703bf"}
{"timestamp": "2025-12-29T13:38:17.718213+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.6s ago] {'name': 'Test Layout 1767015491.0854542', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5a4d87d7-f83f-4659-96d1-6c38f2a703bf"}
{"timestamp": "2025-12-29T13:38:17.720207+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "5a4d87d7-f83f-4659-96d1-6c38f2a703bf"}
{"timestamp": "2025-12-29T13:38:17.725035+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "5a4d87d7-f83f-4659-96d1-6c38f2a703bf"}
{"timestamp": "2025-12-29T13:38:17.726038+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5a4d87d7-f83f-4659-96d1-6c38f2a703bf"}
{"timestamp": "2025-12-29T13:38:17.726620+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.59s ago] {'pk_1': 41}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5a4d87d7-f83f-4659-96d1-6c38f2a703bf"}
{"timestamp": "2025-12-29T13:38:17.728910+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 41}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "5a4d87d7-f83f-4659-96d1-6c38f2a703bf"}
{"timestamp": "2025-12-29T13:38:17.729215+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "5a4d87d7-f83f-4659-96d1-6c38f2a703bf"}
{"timestamp": "2025-12-29T13:38:17.729946+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "5a4d87d7-f83f-4659-96d1-6c38f2a703bf"}
{"timestamp": "2025-12-29T13:38:17.730173+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "5a4d87d7-f83f-4659-96d1-6c38f2a703bf"}
{"timestamp": "2025-12-29T13:38:17.731495+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.020s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "5a4d87d7-f83f-4659-96d1-6c38f2a703bf"}
{"timestamp": "2025-12-29T13:38:17.732494+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "5a4d87d7-f83f-4659-96d1-6c38f2a703bf"}
{"timestamp": "2025-12-29T13:38:19.768845+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "ef22fa46-4b0b-4df7-8e5f-2540da2fbd07"}
{"timestamp": "2025-12-29T13:38:19.771609+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ef22fa46-4b0b-4df7-8e5f-2540da2fbd07"}
{"timestamp": "2025-12-29T13:38:19.772288+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ef22fa46-4b0b-4df7-8e5f-2540da2fbd07"}
{"timestamp": "2025-12-29T13:38:19.772695+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.57s ago] {'name_1': 'Test Screen 1767015491.0854542', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ef22fa46-4b0b-4df7-8e5f-2540da2fbd07"}
{"timestamp": "2025-12-29T13:38:19.775341+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ef22fa46-4b0b-4df7-8e5f-2540da2fbd07"}
{"timestamp": "2025-12-29T13:38:19.775915+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.57s ago] {'id_1': 41, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ef22fa46-4b0b-4df7-8e5f-2540da2fbd07"}
{"timestamp": "2025-12-29T13:38:19.778152+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ef22fa46-4b0b-4df7-8e5f-2540da2fbd07"}
{"timestamp": "2025-12-29T13:38:19.778606+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.57s ago] {'name': 'Test Screen 1767015491.0854542', 'capacity': 150, 'seat_layout_id': 41}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ef22fa46-4b0b-4df7-8e5f-2540da2fbd07"}
{"timestamp": "2025-12-29T13:38:19.780671+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "ef22fa46-4b0b-4df7-8e5f-2540da2fbd07"}
{"timestamp": "2025-12-29T13:38:19.785209+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ef22fa46-4b0b-4df7-8e5f-2540da2fbd07"}
{"timestamp": "2025-12-29T13:38:19.785870+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ef22fa46-4b0b-4df7-8e5f-2540da2fbd07"}
{"timestamp": "2025-12-29T13:38:19.786174+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.57s ago] {'pk_1': 41}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ef22fa46-4b0b-4df7-8e5f-2540da2fbd07"}
{"timestamp": "2025-12-29T13:38:19.788215+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 41}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "ef22fa46-4b0b-4df7-8e5f-2540da2fbd07"}
{"timestamp": "2025-12-29T13:38:19.788547+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "ef22fa46-4b0b-4df7-8e5f-2540da2fbd07"}
{"timestamp": "2025-12-29T13:38:19.789402+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "ef22fa46-4b0b-4df7-8e5f-2540da2fbd07"}
{"timestamp": "2025-12-29T13:38:19.789636+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "ef22fa46-4b0b-4df7-8e5f-2540da2fbd07"}
{"timestamp": "2025-12-29T13:38:19.790759+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "ef22fa46-4b0b-4df7-8e5f-2540da2fbd07"}
{"timestamp": "2025-12-29T13:38:19.791638+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ef22fa46-4b0b-4df7-8e5f-2540da2fbd07"}
{"timestamp": "2025-12-29T13:38:21.828179+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:21.830735+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:21.831457+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:21.831819+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.57s ago] {'pk_1': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:21.834335+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:21.834822+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.57s ago] {'pk_1': 41}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:21.837225+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:21.837616+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.57s ago] {'screen_id_1': 41, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:21.839667+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:21.840131+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.57s ago] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 42, 'screen_id': 41}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:21.842609+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:21.847946+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:21.848729+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:21.849304+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.57s ago] {'pk_1': 33}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:21.852050+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:21.852547+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.57s ago] {'pk_1': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:21.854805+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:21.855569+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.57s ago] {'pk_1': 41}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:21.857615+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 33}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:21.857959+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:21.859153+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:21.859538+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:21.861095+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.033s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:21.862537+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "3870e54e-bbd5-46a1-a1a2-356a3658cb8a"}
{"timestamp": "2025-12-29T13:38:23.905245+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:23.908208+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:23.908907+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:23.909411+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 97.4s ago] {'email_1': 'test_concurrent1_1767015501.8625734@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.117097+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.117646+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 97.38s ago] {'email': 'test_concurrent1_1767015501.8625734@example.com', 'hashed_password': '$2b$12$Qb6eINd5pBzts.Wtl9dgIe3S7Cl.09tLIk/.j504n87wO5f/t1fDG', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.119565+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.124321+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.125137+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.125826+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 97.37s ago] {'pk_1': 66}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.128287+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 66, 'email': 'test_concurrent1_1767015501.8625734@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.128610+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.129427+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.129713+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.129851+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.131447+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.132237+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.132819+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 97.36s ago] {'user_id_1': 66, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.135688+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.136126+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 97.36s ago] {'user_id': 66, 'name': None, 'email': 'test_concurrent1_1767015501.8625734@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.138151+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.142440+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.142982+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.143379+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 97.35s ago] {'pk_1': 66}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.145594+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 66, 'user_id': 66, 'email': 'test_concurrent1_1767015501.8625734@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.145861+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.146016+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.146270+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.147364+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.148530+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.148875+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 97.64s ago] {'email_1': 'test_concurrent1_1767015501.8625734@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.352732+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 66, 'email': 'test_concurrent1_1767015501.8625734@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.353167+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.353983+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.354252+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.355329+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.450s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:24.356182+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "dcb9c9f1-5623-4139-ac87-86cec00e2188"}
{"timestamp": "2025-12-29T13:38:26.494582+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.497136+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.497701+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.498086+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 99.99s ago] {'email_1': 'test_concurrent2_1767015504.4561174@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.704308+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.704707+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 99.96s ago] {'email': 'test_concurrent2_1767015504.4561174@example.com', 'hashed_password': '$2b$12$JVoeH6xG5NBBv8.LPpyOIO76gGAtlixxiKH8HfH3RWuMgDFpe2r1m', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.706402+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.711896+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.712554+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.713170+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 99.96s ago] {'pk_1': 67}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.715258+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 67, 'email': 'test_concurrent2_1767015504.4561174@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.715524+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.716181+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.716374+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.716498+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.718662+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.719309+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.719862+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 99.94s ago] {'user_id_1': 67, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.722083+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.722505+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 99.94s ago] {'user_id': 67, 'name': None, 'email': 'test_concurrent2_1767015504.4561174@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.724530+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.728505+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.728978+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.729228+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 99.94s ago] {'pk_1': 67}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.731286+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 67, 'user_id': 67, 'email': 'test_concurrent2_1767015504.4561174@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.731621+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.731834+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.732056+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.733051+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.734047+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.734446+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 100.2s ago] {'email_1': 'test_concurrent2_1767015504.4561174@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.940260+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 67, 'email': 'test_concurrent2_1767015504.4561174@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.940490+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.941254+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.941520+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.942580+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.448s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:26.943693+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "73098c42-52d4-4fb1-b426-fc4d529fc39b"}
{"timestamp": "2025-12-29T13:38:28.990538+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:28.993344+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:28.993998+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:28.994371+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.15s ago] {'pk_1': 66}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:28.997415+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:28.997951+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.15s ago] {'showtime_id_1': 33, 'seat_code_1': 'R9-9', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.000064+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.000470+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.15s ago] {'user_id': 66, 'showtime_id': 33, 'seat_code': 'R9-9', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 13, 38, 28, 999720, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 48, 28, 999454, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.002254+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.007524+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.008224+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.008642+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.15s ago] {'pk_1': 33}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.010738+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 33, 'user_id': 66, 'showtime_id': 33, 'seat_code': 'R9-9'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.011003+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.011757+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.012028+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.012262+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.013678+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.014348+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.014752+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.16s ago] {'showtime_id_1': 33, 'seat_code_1': 'R9-9', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.017145+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.017412+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.14s ago] {'seat_code': 'R9-9', 'showtime_id': 33, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.019205+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.019632+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.14s ago] {'status': 'LOCKED', 'locked_by_user_id': 66, 'lock_expires_at': datetime.datetime(2025, 12, 29, 13, 48, 29, 18806, tzinfo=datetime.timezone.utc), 'seat_locks_id': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.021453+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.025442+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.026057+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.026613+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.14s ago] {'pk_1': 29}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.028693+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 33, 'seat_code': 'R9-9', 'user_id': 66, 'expires_at': '2025-12-29T13:48:29.018806+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.028877+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.028995+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.029203+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.030411+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.030586+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.030743+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.030986+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 33, 'user_id': 66, 'showtime_id': 33, 'seat_code': 'R9-9'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.031220+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 33", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.032794+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.033286+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.033583+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.14s ago] {'user_id': 66, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 33}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.035638+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.039979+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.040576+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.040969+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.14s ago] {'pk_1': 33}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.042890+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 33, 'reservation_id': 33, 'user_id': 66, 'showtime_id': 33, 'seat_code': 'R9-9'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.043076+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.043193+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_order_created for order.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.043286+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_order_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.043388+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 33", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.044800+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.045259+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.045719+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.13s ago] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.047924+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 33, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.048108+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.048227+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_pricing_snapshot_created for pricing.snapshot_created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.048322+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_pricing_snapshot_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.048440+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 33, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.049696+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.050161+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.050435+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.09s ago] {'pk_1': 33}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.053087+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.053440+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.09s ago] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 33}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.054917+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.058829+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.059335+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.059629+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.16s ago] {'pk_1': 33}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.061482+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 33 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.061755+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.062673+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.062892+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 33: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.063115+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.064216+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.064491+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 33", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.064902+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.066027+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.066306+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.066510+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.068224+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.068778+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.069136+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.08s ago] {'actor_id': 66, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 33, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 33, \"user_id\": 66, \"showtime_id\": 33, \"seat_code\": \"R9-9\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 38, 29, 68475, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.071028+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.074738+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.075336+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.075697+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.08s ago] {'pk_1': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.077592+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.078673+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.079716+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.089s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:29.080541+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "05114e3d-d9ec-4f8d-afcd-edd6d8a93dae"}
{"timestamp": "2025-12-29T13:38:31.134152+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "40ee2511-eb19-41d9-b41b-48979f3dcbdf"}
{"timestamp": "2025-12-29T13:38:31.136993+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "40ee2511-eb19-41d9-b41b-48979f3dcbdf"}
{"timestamp": "2025-12-29T13:38:31.137640+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40ee2511-eb19-41d9-b41b-48979f3dcbdf"}
{"timestamp": "2025-12-29T13:38:31.138077+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 91.29s ago] {'pk_1': 67}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40ee2511-eb19-41d9-b41b-48979f3dcbdf"}
{"timestamp": "2025-12-29T13:38:31.141193+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40ee2511-eb19-41d9-b41b-48979f3dcbdf"}
{"timestamp": "2025-12-29T13:38:31.141810+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 91.29s ago] {'showtime_id_1': 33, 'seat_code_1': 'R9-9', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "40ee2511-eb19-41d9-b41b-48979f3dcbdf"}
{"timestamp": "2025-12-29T13:38:31.144174+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "40ee2511-eb19-41d9-b41b-48979f3dcbdf"}
{"timestamp": "2025-12-29T13:38:31.158896+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.middleware", "message": "\u2717 POST /reservations/ \u2192 FAILED (0.012s)", "module": "middleware", "function": "dispatch", "line": 83, "request_id": "40ee2511-eb19-41d9-b41b-48979f3dcbdf", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 151, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\streams\\memory.py\", line 126, in receive\n    raise EndOfStream from None\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\middleware.py\", line 57, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    raise app_exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 390, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 291, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\concurrency.py\", line 38, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\to_thread.py\", line 56, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 2485, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 976, in run\n    result = context.run(func, *args)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\reservation\\router.py\", line 31, in create_reservation_route\n    return create_reservation(db=db, user_id=current_user.id, data=payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\reservation\\service.py\", line 53, in create_reservation\n    raise ValidationError(\n    ...<2 lines>...\n    )\napp.core.errors.ValidationError: ('Seat is locked by another user', {'seat_code': 'R9-9'})"}
{"timestamp": "2025-12-29T13:42:12.956005+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-29T13:42:14.739877+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-29T13:42:14.740535+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-29T13:42:14.740829+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.741053+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.741219+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.741499+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET,HEAD   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.741700+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.741868+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.742176+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.742460+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.742693+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.742862+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.743025+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.743183+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.743513+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.743705+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.743833+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.743975+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.744356+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.744664+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.744920+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.745313+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.745665+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.745989+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.746226+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.746388+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.746642+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.746893+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.747182+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.747432+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.747568+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.747711+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.747957+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.748247+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.748443+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.748679+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.748917+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.749182+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.749466+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.749707+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.749979+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.750296+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.750627+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.750891+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.751061+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.751203+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.751407+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.751576+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.751824+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.752045+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.752228+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.752427+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.752657+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.752847+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.753071+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.753275+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.753616+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.753888+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.754062+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.754234+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.754685+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/showtimes/{showtime_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.755035+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.755259+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:42:14.755397+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-29T13:42:14.755573+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-29T13:42:23.940815+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:23.984381+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:23.984810+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:23.987372+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:23.987824+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:23.990267+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:23.990679+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:23.992799+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:23.995846+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:23.996459+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00070s] {'email_1': 'test_admin_1767015741.8872051@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:23.999508+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "detected 'bcrypt' backend, version '4.0.1'", "module": "bcrypt", "function": "_load_backend_mixin", "line": 625, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:23.999820+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "'bcrypt' backend lacks $2$ support, enabling workaround", "module": "bcrypt", "function": "_finalize_backend_mixin", "line": 406, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.224682+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.225150+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00063s] {'email': 'test_admin_1767015741.8872051@example.com', 'hashed_password': '$2b$12$gXNu6kprf9AMf05ZLGtn5.R8W9K3AfiyytZQbiBhCmiKRPzQ80phW', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.227570+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.232895+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.234177+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.234437+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00043s] {'pk_1': 68}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.236502+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 68, 'email': 'test_admin_1767015741.8872051@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.236804+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.237520+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.237703+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.237802+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.272449+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.274029+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.274342+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'user_id_1': 68, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.277948+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.278498+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'user_id': 68, 'name': None, 'email': 'test_admin_1767015741.8872051@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.281601+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.286564+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.287932+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.288343+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00063s] {'pk_1': 68}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.290502+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 68, 'user_id': 68, 'email': 'test_admin_1767015741.8872051@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.290730+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.290916+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.291194+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.292218+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.293345+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.293935+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2982s ago] {'email_1': 'test_admin_1767015741.8872051@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.504119+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 68, 'email': 'test_admin_1767015741.8872051@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.504499+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.505369+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.505664+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.507115+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.566s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:24.508258+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "3f3be811-c3fa-4740-804d-bde1f9e4d236"}
{"timestamp": "2025-12-29T13:42:26.558125+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "8776f458-cab8-44e2-b990-e97ecc5b20ac"}
{"timestamp": "2025-12-29T13:42:26.561234+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8776f458-cab8-44e2-b990-e97ecc5b20ac"}
{"timestamp": "2025-12-29T13:42:26.562722+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8776f458-cab8-44e2-b990-e97ecc5b20ac"}
{"timestamp": "2025-12-29T13:42:26.563148+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'title_1': 'Test Movie 1767015741.8872051'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8776f458-cab8-44e2-b990-e97ecc5b20ac"}
{"timestamp": "2025-12-29T13:42:26.567412+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8776f458-cab8-44e2-b990-e97ecc5b20ac"}
{"timestamp": "2025-12-29T13:42:26.567847+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'title': 'Test Movie 1767015741.8872051', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8776f458-cab8-44e2-b990-e97ecc5b20ac"}
{"timestamp": "2025-12-29T13:42:26.569917+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "8776f458-cab8-44e2-b990-e97ecc5b20ac"}
{"timestamp": "2025-12-29T13:42:26.575553+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8776f458-cab8-44e2-b990-e97ecc5b20ac"}
{"timestamp": "2025-12-29T13:42:26.576752+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8776f458-cab8-44e2-b990-e97ecc5b20ac"}
{"timestamp": "2025-12-29T13:42:26.577152+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'pk_1': 43}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8776f458-cab8-44e2-b990-e97ecc5b20ac"}
{"timestamp": "2025-12-29T13:42:26.579709+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 43}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "8776f458-cab8-44e2-b990-e97ecc5b20ac"}
{"timestamp": "2025-12-29T13:42:26.580081+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "8776f458-cab8-44e2-b990-e97ecc5b20ac"}
{"timestamp": "2025-12-29T13:42:26.580808+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "8776f458-cab8-44e2-b990-e97ecc5b20ac"}
{"timestamp": "2025-12-29T13:42:26.581112+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "8776f458-cab8-44e2-b990-e97ecc5b20ac"}
{"timestamp": "2025-12-29T13:42:26.582502+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.024s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "8776f458-cab8-44e2-b990-e97ecc5b20ac"}
{"timestamp": "2025-12-29T13:42:26.583577+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "8776f458-cab8-44e2-b990-e97ecc5b20ac"}
{"timestamp": "2025-12-29T13:42:28.636151+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "153f337c-920c-4cf9-989d-227eadf1f745"}
{"timestamp": "2025-12-29T13:42:28.638857+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "153f337c-920c-4cf9-989d-227eadf1f745"}
{"timestamp": "2025-12-29T13:42:28.640100+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "153f337c-920c-4cf9-989d-227eadf1f745"}
{"timestamp": "2025-12-29T13:42:28.640486+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'name_1': 'Test Layout 1767015741.8872051'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "153f337c-920c-4cf9-989d-227eadf1f745"}
{"timestamp": "2025-12-29T13:42:28.643620+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "153f337c-920c-4cf9-989d-227eadf1f745"}
{"timestamp": "2025-12-29T13:42:28.644005+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'name': 'Test Layout 1767015741.8872051', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "153f337c-920c-4cf9-989d-227eadf1f745"}
{"timestamp": "2025-12-29T13:42:28.646242+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "153f337c-920c-4cf9-989d-227eadf1f745"}
{"timestamp": "2025-12-29T13:42:28.651971+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "153f337c-920c-4cf9-989d-227eadf1f745"}
{"timestamp": "2025-12-29T13:42:28.652937+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "153f337c-920c-4cf9-989d-227eadf1f745"}
{"timestamp": "2025-12-29T13:42:28.653333+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'pk_1': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "153f337c-920c-4cf9-989d-227eadf1f745"}
{"timestamp": "2025-12-29T13:42:28.655741+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 42}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "153f337c-920c-4cf9-989d-227eadf1f745"}
{"timestamp": "2025-12-29T13:42:28.656114+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "153f337c-920c-4cf9-989d-227eadf1f745"}
{"timestamp": "2025-12-29T13:42:28.657100+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "153f337c-920c-4cf9-989d-227eadf1f745"}
{"timestamp": "2025-12-29T13:42:28.657336+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "153f337c-920c-4cf9-989d-227eadf1f745"}
{"timestamp": "2025-12-29T13:42:28.658462+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "153f337c-920c-4cf9-989d-227eadf1f745"}
{"timestamp": "2025-12-29T13:42:28.659375+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "153f337c-920c-4cf9-989d-227eadf1f745"}
{"timestamp": "2025-12-29T13:42:30.695356+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "1a397b78-c5f2-4bd4-ad07-a2707ba57790"}
{"timestamp": "2025-12-29T13:42:30.698010+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1a397b78-c5f2-4bd4-ad07-a2707ba57790"}
{"timestamp": "2025-12-29T13:42:30.699243+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1a397b78-c5f2-4bd4-ad07-a2707ba57790"}
{"timestamp": "2025-12-29T13:42:30.699670+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'name_1': 'Test Screen 1767015741.8872051', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1a397b78-c5f2-4bd4-ad07-a2707ba57790"}
{"timestamp": "2025-12-29T13:42:30.703051+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1a397b78-c5f2-4bd4-ad07-a2707ba57790"}
{"timestamp": "2025-12-29T13:42:30.703403+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'id_1': 42, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1a397b78-c5f2-4bd4-ad07-a2707ba57790"}
{"timestamp": "2025-12-29T13:42:30.709831+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1a397b78-c5f2-4bd4-ad07-a2707ba57790"}
{"timestamp": "2025-12-29T13:42:30.710268+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00064s] {'name': 'Test Screen 1767015741.8872051', 'capacity': 150, 'seat_layout_id': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1a397b78-c5f2-4bd4-ad07-a2707ba57790"}
{"timestamp": "2025-12-29T13:42:30.712514+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "1a397b78-c5f2-4bd4-ad07-a2707ba57790"}
{"timestamp": "2025-12-29T13:42:30.718091+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1a397b78-c5f2-4bd4-ad07-a2707ba57790"}
{"timestamp": "2025-12-29T13:42:30.719129+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1a397b78-c5f2-4bd4-ad07-a2707ba57790"}
{"timestamp": "2025-12-29T13:42:30.719503+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'pk_1': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1a397b78-c5f2-4bd4-ad07-a2707ba57790"}
{"timestamp": "2025-12-29T13:42:30.721911+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 42}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "1a397b78-c5f2-4bd4-ad07-a2707ba57790"}
{"timestamp": "2025-12-29T13:42:30.722267+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "1a397b78-c5f2-4bd4-ad07-a2707ba57790"}
{"timestamp": "2025-12-29T13:42:30.723023+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "1a397b78-c5f2-4bd4-ad07-a2707ba57790"}
{"timestamp": "2025-12-29T13:42:30.723236+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "1a397b78-c5f2-4bd4-ad07-a2707ba57790"}
{"timestamp": "2025-12-29T13:42:30.724403+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.029s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "1a397b78-c5f2-4bd4-ad07-a2707ba57790"}
{"timestamp": "2025-12-29T13:42:30.725963+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "1a397b78-c5f2-4bd4-ad07-a2707ba57790"}
{"timestamp": "2025-12-29T13:42:32.768780+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:32.771476+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:32.772728+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:32.773305+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'pk_1': 43}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:32.776276+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:32.776700+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] {'pk_1': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:32.779731+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:32.780297+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'screen_id_1': 42, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:32.783592+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:32.784108+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00066s] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 43, 'screen_id': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:32.786480+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:32.791784+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:32.792890+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:32.793256+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'pk_1': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:32.796746+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:32.797127+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'pk_1': 43}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:32.799680+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:32.800033+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'pk_1': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:32.801781+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 34}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:32.802081+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:32.802827+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:32.803057+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:32.804192+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.036s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:32.805264+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "460bbcb1-48b8-48b8-93d1-ea3f62d4cb2e"}
{"timestamp": "2025-12-29T13:42:34.849450+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:34.852249+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:34.852931+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:34.853369+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.86s ago] {'email_1': 'test_booking_1767015752.8051336@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.058426+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.058975+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.83s ago] {'email': 'test_booking_1767015752.8051336@example.com', 'hashed_password': '$2b$12$I.bffXcvubpFPcOEOTX5SuoDu0N29dWlqEnz3K6d9OwcL3Oj7DIVO', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.060759+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.065714+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.066474+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.066923+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.83s ago] {'pk_1': 69}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.069026+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 69, 'email': 'test_booking_1767015752.8051336@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.069352+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.070027+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.070210+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.070327+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.071846+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.072745+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.073220+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.8s ago] {'user_id_1': 69, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.075654+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.076043+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.8s ago] {'user_id': 69, 'name': None, 'email': 'test_booking_1767015752.8051336@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.077751+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.081977+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.082571+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.082816+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.8s ago] {'pk_1': 69}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.084908+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 69, 'user_id': 69, 'email': 'test_booking_1767015752.8051336@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.085215+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.085483+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.085749+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.087044+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.088768+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.089255+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 11.09s ago] {'email_1': 'test_booking_1767015752.8051336@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.292989+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 69, 'email': 'test_booking_1767015752.8051336@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.293276+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.294047+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.294324+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.295503+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.446s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:35.296465+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "eee50a7f-cacf-4103-af7c-21b6fdadb533"}
{"timestamp": "2025-12-29T13:42:37.335560+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.338399+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.339589+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.340003+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00068s] {'pk_1': 69}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.344261+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.344653+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'showtime_id_1': 34, 'seat_code_1': 'R5-5', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.347586+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.348032+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'user_id': 69, 'showtime_id': 34, 'seat_code': 'R5-5', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 13, 42, 37, 347235, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 52, 37, 346382, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.350470+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.355766+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.356878+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.357317+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'pk_1': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.359789+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 34, 'user_id': 69, 'showtime_id': 34, 'seat_code': 'R5-5'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.360075+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.360873+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.361264+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.361660+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.363565+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.364474+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.365314+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.02086s ago] {'showtime_id_1': 34, 'seat_code_1': 'R5-5', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.369668+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.371231+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00085s] {'seat_code': 'R5-5', 'showtime_id': 34, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.375093+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.375673+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'status': 'LOCKED', 'locked_by_user_id': 69, 'lock_expires_at': datetime.datetime(2025, 12, 29, 13, 52, 37, 373879, tzinfo=datetime.timezone.utc), 'seat_locks_id': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.378284+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.382545+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.383556+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.383957+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'pk_1': 30}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.386417+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 34, 'seat_code': 'R5-5', 'user_id': 69, 'expires_at': '2025-12-29T13:52:37.373879+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.386738+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.387043+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.387513+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.388836+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.389179+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.389497+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.389667+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 34, 'user_id': 69, 'showtime_id': 34, 'seat_code': 'R5-5'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.389843+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 34", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.391383+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.392971+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.393364+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00075s] {'user_id': 69, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.396151+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.400743+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.402267+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.403049+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00093s] {'pk_1': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.405564+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 34, 'reservation_id': 34, 'user_id': 69, 'showtime_id': 34, 'seat_code': 'R5-5'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.406009+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.406387+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_order_created for order.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.406577+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_order_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.406862+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 34", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.423984+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.425507+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.425790+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.428672+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 34, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.428943+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.429116+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_pricing_snapshot_created for pricing.snapshot_created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.429463+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_pricing_snapshot_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.429752+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 34, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.452542+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.454340+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.454880+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00106s] {'pk_1': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.458633+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.459198+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00076s] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.461451+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.465906+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.466752+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.467375+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.06527s ago] {'pk_1': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.470229+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 34 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.470706+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.472119+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.472498+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 34: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.472954+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.474331+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.474664+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 34", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.475133+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.476467+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.476770+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.477020+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.478734+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.479982+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.480340+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'actor_id': 69, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 34, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 34, \"user_id\": 69, \"showtime_id\": 34, \"seat_code\": \"R5-5\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 42, 37, 479647, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.483243+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.488023+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.489440+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.489808+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00071s] {'pk_1': 43}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.492218+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.493396+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.494761+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.159s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:37.495745+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6c5740a5-5d02-4fbf-9a6e-1c7b369def1d"}
{"timestamp": "2025-12-29T13:42:39.540397+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "94696e25-0b48-4bbf-a388-86805aa4e90b"}
{"timestamp": "2025-12-29T13:42:39.543081+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "94696e25-0b48-4bbf-a388-86805aa4e90b"}
{"timestamp": "2025-12-29T13:42:39.543738+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "94696e25-0b48-4bbf-a388-86805aa4e90b"}
{"timestamp": "2025-12-29T13:42:39.544166+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 2.205s ago] {'pk_1': 69}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "94696e25-0b48-4bbf-a388-86805aa4e90b"}
{"timestamp": "2025-12-29T13:42:39.547647+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "94696e25-0b48-4bbf-a388-86805aa4e90b"}
{"timestamp": "2025-12-29T13:42:39.548153+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'user_id_1': 69}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "94696e25-0b48-4bbf-a388-86805aa4e90b"}
{"timestamp": "2025-12-29T13:42:39.550544+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.010s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "94696e25-0b48-4bbf-a388-86805aa4e90b"}
{"timestamp": "2025-12-29T13:42:39.551538+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "94696e25-0b48-4bbf-a388-86805aa4e90b"}
{"timestamp": "2025-12-29T13:42:41.606939+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/order/34/initiate", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "bda3078b-e07c-451f-8e1f-c90f149e420b"}
{"timestamp": "2025-12-29T13:42:41.610618+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bda3078b-e07c-451f-8e1f-c90f149e420b"}
{"timestamp": "2025-12-29T13:42:41.611356+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bda3078b-e07c-451f-8e1f-c90f149e420b"}
{"timestamp": "2025-12-29T13:42:41.611822+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.273s ago] {'pk_1': 69}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bda3078b-e07c-451f-8e1f-c90f149e420b"}
{"timestamp": "2025-12-29T13:42:41.616540+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bda3078b-e07c-451f-8e1f-c90f149e420b"}
{"timestamp": "2025-12-29T13:42:41.617251+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.163s ago] {'pk_1': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bda3078b-e07c-451f-8e1f-c90f149e420b"}
{"timestamp": "2025-12-29T13:42:41.620748+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO payment_attempts (order_id, amount_attempted, status, final_amount, failure_reason, provider_payment_id, created_at) VALUES (%(order_id)s, %(amount_attempted)s, %(status)s, %(final_amount)s, %(failure_reason)s, %(provider_payment_id)s, %(created_at)s) RETURNING payment_attempts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bda3078b-e07c-451f-8e1f-c90f149e420b"}
{"timestamp": "2025-12-29T13:42:41.621856+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00119s] {'order_id': 34, 'amount_attempted': 1000, 'status': 'PENDING', 'final_amount': 1000, 'failure_reason': None, 'provider_payment_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 42, 41, 620303, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bda3078b-e07c-451f-8e1f-c90f149e420b"}
{"timestamp": "2025-12-29T13:42:41.624696+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "bda3078b-e07c-451f-8e1f-c90f149e420b"}
{"timestamp": "2025-12-29T13:42:41.629710+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bda3078b-e07c-451f-8e1f-c90f149e420b"}
{"timestamp": "2025-12-29T13:42:41.631224+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bda3078b-e07c-451f-8e1f-c90f149e420b"}
{"timestamp": "2025-12-29T13:42:41.631549+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bda3078b-e07c-451f-8e1f-c90f149e420b"}
{"timestamp": "2025-12-29T13:42:41.634493+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bda3078b-e07c-451f-8e1f-c90f149e420b"}
{"timestamp": "2025-12-29T13:42:41.634858+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'pk_1': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bda3078b-e07c-451f-8e1f-c90f149e420b"}
{"timestamp": "2025-12-29T13:42:41.636820+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.pending with payload: {'payment_attempt_id': 22, 'order_id': 34, 'amount_attempted': 1000, 'final_amount': 1000, 'user_id': 69}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "bda3078b-e07c-451f-8e1f-c90f149e420b"}
{"timestamp": "2025-12-29T13:42:41.637093+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "bda3078b-e07c-451f-8e1f-c90f149e420b"}
{"timestamp": "2025-12-29T13:42:41.637763+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.pending to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "bda3078b-e07c-451f-8e1f-c90f149e420b"}
{"timestamp": "2025-12-29T13:42:41.637933+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: payment.pending", "module": "event_bus", "function": "publish", "line": 31, "request_id": "bda3078b-e07c-451f-8e1f-c90f149e420b"}
{"timestamp": "2025-12-29T13:42:41.638978+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/order/34/initiate \u2192 200 (0.032s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "bda3078b-e07c-451f-8e1f-c90f149e420b"}
{"timestamp": "2025-12-29T13:42:41.639803+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "bda3078b-e07c-451f-8e1f-c90f149e420b"}
{"timestamp": "2025-12-29T13:42:43.683631+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/22/confirm", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.686151+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.686781+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.687550+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.348s ago] {'pk_1': 69}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.690910+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id AS payment_attempts_id, payment_attempts.order_id AS payment_attempts_order_id, payment_attempts.amount_attempted AS payment_attempts_amount_attempted, payment_attempts.status AS payment_attempts_status, payment_attempts.final_amount AS payment_attempts_final_amount, payment_attempts.failure_reason AS payment_attempts_failure_reason, payment_attempts.provider_payment_id AS payment_attempts_provider_payment_id, payment_attempts.created_at AS payment_attempts_created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.691374+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.694275+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.694660+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'pk_1': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.697114+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE payment_attempts SET status=%(status)s, provider_payment_id=%(provider_payment_id)s WHERE payment_attempts.id = %(payment_attempts_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.697519+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'status': 'SUCCEEDED', 'provider_payment_id': 'mock_payment_22', 'payment_attempts_id': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.699680+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.705680+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.706677+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.707233+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 2.076s ago] {'pk_1': 22}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.710266+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.710691+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 2.076s ago] {'pk_1': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.712411+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.succeeded with payload: {'payment_attempt_id': 22, 'order_id': 34, 'final_amount': 1000.0, 'user_id': 69}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.712777+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.713541+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.succeeded to 4 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.713847+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_payment_succeeded for payment.succeeded", "module": "event_bus", "function": "publish", "line": 36, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.714095+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_payment_succeeded", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.714320+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.714478+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_payment_succeeded for payment.succeeded", "module": "event_bus", "function": "publish", "line": 36, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.714597+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_payment_succeeded", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.715988+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.716634+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.717076+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.263s ago] {'pk_1': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.719714+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET is_completed=%(is_completed)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.720043+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'is_completed': True, 'orders_id': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.721806+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.726068+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.726618+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.727065+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.325s ago] {'pk_1': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.729100+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.completed with payload: {'order_id': 34}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.729327+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.completed to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.729452+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: order.completed", "module": "event_bus", "function": "publish", "line": 31, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.729668+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.730690+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.730868+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_payment_succeeded for payment.succeeded", "module": "event_bus", "function": "publish", "line": 36, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.730965+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_payment_succeeded", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.732430+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.733231+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.733555+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 19.46s ago] {'user_id_1': 69, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.736526+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.737608+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.737792+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_payment_succeeded for payment.succeeded", "module": "event_bus", "function": "publish", "line": 36, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.737910+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_payment_succeeded", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.739666+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.740137+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.740467+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.261s ago] {'actor_id': 69, 'actor_type': 'user', 'action': 'payment.succeeded', 'target_id': 34, 'target_type': 'order', 'payload': '{\"payment_attempt_id\": 22, \"order_id\": 34, \"final_amount\": 1000.0, \"user_id\": 69}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 42, 43, 739930, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.742492+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.746687+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.747303+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.747585+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.259s ago] {'pk_1': 44}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.749482+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.750622+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.751756+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/22/confirm \u2192 200 (0.068s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:43.752651+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "217a5b82-92dd-4716-b66b-383e6ff38314"}
{"timestamp": "2025-12-29T13:42:45.797579+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b86cb581-b811-47d8-8cac-d62b4e196fbe"}
{"timestamp": "2025-12-29T13:42:45.800326+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b86cb581-b811-47d8-8cac-d62b4e196fbe"}
{"timestamp": "2025-12-29T13:42:45.801132+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b86cb581-b811-47d8-8cac-d62b4e196fbe"}
{"timestamp": "2025-12-29T13:42:45.801540+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 8.462s ago] {'pk_1': 69}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b86cb581-b811-47d8-8cac-d62b4e196fbe"}
{"timestamp": "2025-12-29T13:42:45.805102+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b86cb581-b811-47d8-8cac-d62b4e196fbe"}
{"timestamp": "2025-12-29T13:42:45.805675+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.258s ago] {'user_id_1': 69}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b86cb581-b811-47d8-8cac-d62b4e196fbe"}
{"timestamp": "2025-12-29T13:42:45.808736+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.011s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b86cb581-b811-47d8-8cac-d62b4e196fbe"}
{"timestamp": "2025-12-29T13:42:45.810037+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b86cb581-b811-47d8-8cac-d62b4e196fbe"}
{"timestamp": "2025-12-29T13:42:47.864079+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:47.866733+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:47.867351+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:47.867686+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.87s ago] {'email_1': 'test_admin_1767015765.8110971@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.072947+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.073374+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.85s ago] {'email': 'test_admin_1767015765.8110971@example.com', 'hashed_password': '$2b$12$9xKT2dBANmmnVFctGmHOr.7qRZWtCYZQdx4cdjbh3VGXs9IQUECCa', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.075159+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.081035+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.081969+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.082700+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.85s ago] {'pk_1': 70}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.085335+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 70, 'email': 'test_admin_1767015765.8110971@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.085725+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.086542+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.086934+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.087284+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.089505+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.090281+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.090623+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.82s ago] {'user_id_1': 70, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.093151+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.093709+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.82s ago] {'user_id': 70, 'name': None, 'email': 'test_admin_1767015765.8110971@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.096418+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.101187+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.101905+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.102252+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.81s ago] {'pk_1': 70}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.104146+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 70, 'user_id': 70, 'email': 'test_admin_1767015765.8110971@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.104337+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.104474+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.104696+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.105684+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.106721+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.107161+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 24.11s ago] {'email_1': 'test_admin_1767015765.8110971@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.312208+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 70, 'email': 'test_admin_1767015765.8110971@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.312579+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.313373+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.313625+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.314644+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.451s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:48.315506+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "69e57e90-57f4-4d7d-bf80-04f1390de0fa"}
{"timestamp": "2025-12-29T13:42:50.369016+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "f7a5eae7-ba0f-4c4a-987e-fad840e713e0"}
{"timestamp": "2025-12-29T13:42:50.371926+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f7a5eae7-ba0f-4c4a-987e-fad840e713e0"}
{"timestamp": "2025-12-29T13:42:50.372637+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f7a5eae7-ba0f-4c4a-987e-fad840e713e0"}
{"timestamp": "2025-12-29T13:42:50.373049+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.81s ago] {'title_1': 'Test Movie 1767015765.8110971'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f7a5eae7-ba0f-4c4a-987e-fad840e713e0"}
{"timestamp": "2025-12-29T13:42:50.375812+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f7a5eae7-ba0f-4c4a-987e-fad840e713e0"}
{"timestamp": "2025-12-29T13:42:50.376412+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.81s ago] {'title': 'Test Movie 1767015765.8110971', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f7a5eae7-ba0f-4c4a-987e-fad840e713e0"}
{"timestamp": "2025-12-29T13:42:50.378345+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "f7a5eae7-ba0f-4c4a-987e-fad840e713e0"}
{"timestamp": "2025-12-29T13:42:50.383611+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f7a5eae7-ba0f-4c4a-987e-fad840e713e0"}
{"timestamp": "2025-12-29T13:42:50.384307+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f7a5eae7-ba0f-4c4a-987e-fad840e713e0"}
{"timestamp": "2025-12-29T13:42:50.384747+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.81s ago] {'pk_1': 44}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f7a5eae7-ba0f-4c4a-987e-fad840e713e0"}
{"timestamp": "2025-12-29T13:42:50.387027+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 44}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "f7a5eae7-ba0f-4c4a-987e-fad840e713e0"}
{"timestamp": "2025-12-29T13:42:50.387381+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "f7a5eae7-ba0f-4c4a-987e-fad840e713e0"}
{"timestamp": "2025-12-29T13:42:50.388218+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "f7a5eae7-ba0f-4c4a-987e-fad840e713e0"}
{"timestamp": "2025-12-29T13:42:50.388425+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "f7a5eae7-ba0f-4c4a-987e-fad840e713e0"}
{"timestamp": "2025-12-29T13:42:50.389776+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.021s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "f7a5eae7-ba0f-4c4a-987e-fad840e713e0"}
{"timestamp": "2025-12-29T13:42:50.390659+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f7a5eae7-ba0f-4c4a-987e-fad840e713e0"}
{"timestamp": "2025-12-29T13:42:52.427791+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b93de4fc-b379-49bc-be08-53cec2fdd9a6"}
{"timestamp": "2025-12-29T13:42:52.430722+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b93de4fc-b379-49bc-be08-53cec2fdd9a6"}
{"timestamp": "2025-12-29T13:42:52.431317+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b93de4fc-b379-49bc-be08-53cec2fdd9a6"}
{"timestamp": "2025-12-29T13:42:52.431662+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'name_1': 'Test Layout 1767015765.8110971'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b93de4fc-b379-49bc-be08-53cec2fdd9a6"}
{"timestamp": "2025-12-29T13:42:52.434525+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b93de4fc-b379-49bc-be08-53cec2fdd9a6"}
{"timestamp": "2025-12-29T13:42:52.434983+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'name': 'Test Layout 1767015765.8110971', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b93de4fc-b379-49bc-be08-53cec2fdd9a6"}
{"timestamp": "2025-12-29T13:42:52.436969+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b93de4fc-b379-49bc-be08-53cec2fdd9a6"}
{"timestamp": "2025-12-29T13:42:52.442429+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b93de4fc-b379-49bc-be08-53cec2fdd9a6"}
{"timestamp": "2025-12-29T13:42:52.443203+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b93de4fc-b379-49bc-be08-53cec2fdd9a6"}
{"timestamp": "2025-12-29T13:42:52.443628+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'pk_1': 43}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b93de4fc-b379-49bc-be08-53cec2fdd9a6"}
{"timestamp": "2025-12-29T13:42:52.445886+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 43}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "b93de4fc-b379-49bc-be08-53cec2fdd9a6"}
{"timestamp": "2025-12-29T13:42:52.446200+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "b93de4fc-b379-49bc-be08-53cec2fdd9a6"}
{"timestamp": "2025-12-29T13:42:52.447101+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b93de4fc-b379-49bc-be08-53cec2fdd9a6"}
{"timestamp": "2025-12-29T13:42:52.447367+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "b93de4fc-b379-49bc-be08-53cec2fdd9a6"}
{"timestamp": "2025-12-29T13:42:52.448771+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.021s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b93de4fc-b379-49bc-be08-53cec2fdd9a6"}
{"timestamp": "2025-12-29T13:42:52.449838+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b93de4fc-b379-49bc-be08-53cec2fdd9a6"}
{"timestamp": "2025-12-29T13:42:54.493389+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b0489dad-92d0-4144-aeec-969494534265"}
{"timestamp": "2025-12-29T13:42:54.495878+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b0489dad-92d0-4144-aeec-969494534265"}
{"timestamp": "2025-12-29T13:42:54.496559+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b0489dad-92d0-4144-aeec-969494534265"}
{"timestamp": "2025-12-29T13:42:54.497051+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.8s ago] {'name_1': 'Test Screen 1767015765.8110971', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b0489dad-92d0-4144-aeec-969494534265"}
{"timestamp": "2025-12-29T13:42:54.500088+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b0489dad-92d0-4144-aeec-969494534265"}
{"timestamp": "2025-12-29T13:42:54.500527+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.8s ago] {'id_1': 43, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b0489dad-92d0-4144-aeec-969494534265"}
{"timestamp": "2025-12-29T13:42:54.502967+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b0489dad-92d0-4144-aeec-969494534265"}
{"timestamp": "2025-12-29T13:42:54.503420+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'name': 'Test Screen 1767015765.8110971', 'capacity': 150, 'seat_layout_id': 43}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b0489dad-92d0-4144-aeec-969494534265"}
{"timestamp": "2025-12-29T13:42:54.505770+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b0489dad-92d0-4144-aeec-969494534265"}
{"timestamp": "2025-12-29T13:42:54.510439+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b0489dad-92d0-4144-aeec-969494534265"}
{"timestamp": "2025-12-29T13:42:54.511144+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b0489dad-92d0-4144-aeec-969494534265"}
{"timestamp": "2025-12-29T13:42:54.511611+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'pk_1': 43}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b0489dad-92d0-4144-aeec-969494534265"}
{"timestamp": "2025-12-29T13:42:54.513479+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 43}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "b0489dad-92d0-4144-aeec-969494534265"}
{"timestamp": "2025-12-29T13:42:54.513752+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "b0489dad-92d0-4144-aeec-969494534265"}
{"timestamp": "2025-12-29T13:42:54.514456+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b0489dad-92d0-4144-aeec-969494534265"}
{"timestamp": "2025-12-29T13:42:54.514656+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "b0489dad-92d0-4144-aeec-969494534265"}
{"timestamp": "2025-12-29T13:42:54.515628+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b0489dad-92d0-4144-aeec-969494534265"}
{"timestamp": "2025-12-29T13:42:54.516592+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b0489dad-92d0-4144-aeec-969494534265"}
{"timestamp": "2025-12-29T13:42:56.554932+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:56.557481+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:56.558089+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:56.558392+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'pk_1': 44}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:56.560806+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:56.561244+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'pk_1': 43}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:56.563392+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:56.563799+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.78s ago] {'screen_id_1': 43, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:56.565783+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:56.566204+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.78s ago] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 44, 'screen_id': 43}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:56.568589+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:56.573812+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:56.574530+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:56.574935+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.78s ago] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:56.577791+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:56.578147+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.78s ago] {'pk_1': 44}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:56.580231+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:56.580802+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.78s ago] {'pk_1': 43}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:56.582851+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 35}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:56.583206+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:56.584001+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:56.584209+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:56.585507+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.031s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:56.586652+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2ccd3ba0-c3b2-4858-8b80-fcff550829f8"}
{"timestamp": "2025-12-29T13:42:58.634392+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.637164+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.637720+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.638015+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.64s ago] {'email_1': 'test_cancel_1767015776.586503@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.842924+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.843557+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.62s ago] {'email': 'test_cancel_1767015776.586503@example.com', 'hashed_password': '$2b$12$aEssW5j25gzpTldbhgPCbOO5oU1StCuTDvP4zFw/b.VmXv3i2Oo.O', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.845242+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.849921+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.850515+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.850889+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.62s ago] {'pk_1': 71}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.853054+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 71, 'email': 'test_cancel_1767015776.586503@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.853441+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.854317+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.854536+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.854667+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.856230+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.856854+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.857310+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.58s ago] {'user_id_1': 71, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.859953+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.860333+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.58s ago] {'user_id': 71, 'name': None, 'email': 'test_cancel_1767015776.586503@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.862159+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.866232+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.866762+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.867037+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.58s ago] {'pk_1': 71}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.869086+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 71, 'user_id': 71, 'email': 'test_cancel_1767015776.586503@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.869483+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.869882+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.870236+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.871365+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.872427+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:58.872712+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.88s ago] {'email_1': 'test_cancel_1767015776.586503@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:59.076290+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 71, 'email': 'test_cancel_1767015776.586503@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:59.076643+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:59.077525+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:59.077748+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:59.078769+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.444s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:42:59.079752+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "e8d07c30-93a5-4db6-9288-191e19c23ed6"}
{"timestamp": "2025-12-29T13:43:01.122782+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.125462+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.126067+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.126449+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'pk_1': 71}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.129340+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.129863+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'showtime_id_1': 35, 'seat_code_1': 'R6-6', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.132371+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.132738+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'user_id': 71, 'showtime_id': 35, 'seat_code': 'R6-6', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 13, 43, 1, 132047, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 53, 1, 131772, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.134850+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.139276+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.139816+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.140184+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.78s ago] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.142071+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 35, 'user_id': 71, 'showtime_id': 35, 'seat_code': 'R6-6'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.142336+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.143199+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.143505+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.143683+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.145188+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.145750+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.146151+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.8s ago] {'showtime_id_1': 35, 'seat_code_1': 'R6-6', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.148839+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.149288+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.78s ago] {'seat_code': 'R6-6', 'showtime_id': 35, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.151656+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.151950+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.78s ago] {'status': 'LOCKED', 'locked_by_user_id': 71, 'lock_expires_at': datetime.datetime(2025, 12, 29, 13, 53, 1, 151203, tzinfo=datetime.timezone.utc), 'seat_locks_id': 31}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.153578+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.158130+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.158614+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.158824+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.78s ago] {'pk_1': 31}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.160665+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 35, 'seat_code': 'R6-6', 'user_id': 71, 'expires_at': '2025-12-29T13:53:01.151203+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.160853+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.160975+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.161193+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.162055+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.162226+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.162323+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.162434+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 35, 'user_id': 71, 'showtime_id': 35, 'seat_code': 'R6-6'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.162577+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 35", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.163979+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.164644+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.165071+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.77s ago] {'user_id': 71, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.167527+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.171483+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.172112+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.172555+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.77s ago] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.174591+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 35, 'reservation_id': 35, 'user_id': 71, 'showtime_id': 35, 'seat_code': 'R6-6'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.174778+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.174904+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_order_created for order.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.175001+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_order_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.175114+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 35", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.176523+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.177219+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.177813+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.75s ago] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.180117+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 35, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.180388+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.180530+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_pricing_snapshot_created for pricing.snapshot_created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.180648+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_pricing_snapshot_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.180783+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 35, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.182153+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.182842+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.183327+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.73s ago] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.186213+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.186681+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.73s ago] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.188245+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.192114+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.192675+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.192962+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.194833+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 35 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.195225+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.196330+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.196605+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 35: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.197031+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.198218+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.198625+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 35", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.199234+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.200450+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.200731+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.200860+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.202410+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.203025+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.203591+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.72s ago] {'actor_id': 71, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 35, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 35, \"user_id\": 71, \"showtime_id\": 35, \"seat_code\": \"R6-6\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 43, 1, 202676, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.206099+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.210177+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.210876+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.211298+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.72s ago] {'pk_1': 45}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.213843+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.214903+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.216087+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.093s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:01.217085+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "462b8030-09ef-419a-be1d-ebc43de5acd4"}
{"timestamp": "2025-12-29T13:43:03.250318+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "0e7728ba-a440-40e9-97e2-016e15fa6af3"}
{"timestamp": "2025-12-29T13:43:03.252922+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0e7728ba-a440-40e9-97e2-016e15fa6af3"}
{"timestamp": "2025-12-29T13:43:03.253652+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0e7728ba-a440-40e9-97e2-016e15fa6af3"}
{"timestamp": "2025-12-29T13:43:03.254036+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 25.92s ago] {'pk_1': 71}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0e7728ba-a440-40e9-97e2-016e15fa6af3"}
{"timestamp": "2025-12-29T13:43:03.257287+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0e7728ba-a440-40e9-97e2-016e15fa6af3"}
{"timestamp": "2025-12-29T13:43:03.257681+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.71s ago] {'user_id_1': 71}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0e7728ba-a440-40e9-97e2-016e15fa6af3"}
{"timestamp": "2025-12-29T13:43:03.259941+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.010s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "0e7728ba-a440-40e9-97e2-016e15fa6af3"}
{"timestamp": "2025-12-29T13:43:03.260769+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0e7728ba-a440-40e9-97e2-016e15fa6af3"}
{"timestamp": "2025-12-29T13:43:05.301377+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/order/35/initiate", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "f5dc2f29-2b7a-4fcd-bb07-1ffe9b1163d8"}
{"timestamp": "2025-12-29T13:43:05.304017+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f5dc2f29-2b7a-4fcd-bb07-1ffe9b1163d8"}
{"timestamp": "2025-12-29T13:43:05.304667+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f5dc2f29-2b7a-4fcd-bb07-1ffe9b1163d8"}
{"timestamp": "2025-12-29T13:43:05.305133+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 27.97s ago] {'pk_1': 71}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f5dc2f29-2b7a-4fcd-bb07-1ffe9b1163d8"}
{"timestamp": "2025-12-29T13:43:05.308215+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f5dc2f29-2b7a-4fcd-bb07-1ffe9b1163d8"}
{"timestamp": "2025-12-29T13:43:05.308713+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 27.86s ago] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f5dc2f29-2b7a-4fcd-bb07-1ffe9b1163d8"}
{"timestamp": "2025-12-29T13:43:05.311194+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO payment_attempts (order_id, amount_attempted, status, final_amount, failure_reason, provider_payment_id, created_at) VALUES (%(order_id)s, %(amount_attempted)s, %(status)s, %(final_amount)s, %(failure_reason)s, %(provider_payment_id)s, %(created_at)s) RETURNING payment_attempts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f5dc2f29-2b7a-4fcd-bb07-1ffe9b1163d8"}
{"timestamp": "2025-12-29T13:43:05.311765+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.69s ago] {'order_id': 35, 'amount_attempted': 1000, 'status': 'PENDING', 'final_amount': 1000, 'failure_reason': None, 'provider_payment_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 43, 5, 310729, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f5dc2f29-2b7a-4fcd-bb07-1ffe9b1163d8"}
{"timestamp": "2025-12-29T13:43:05.313888+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "f5dc2f29-2b7a-4fcd-bb07-1ffe9b1163d8"}
{"timestamp": "2025-12-29T13:43:05.319430+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f5dc2f29-2b7a-4fcd-bb07-1ffe9b1163d8"}
{"timestamp": "2025-12-29T13:43:05.320069+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f5dc2f29-2b7a-4fcd-bb07-1ffe9b1163d8"}
{"timestamp": "2025-12-29T13:43:05.320393+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.69s ago] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f5dc2f29-2b7a-4fcd-bb07-1ffe9b1163d8"}
{"timestamp": "2025-12-29T13:43:05.322664+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f5dc2f29-2b7a-4fcd-bb07-1ffe9b1163d8"}
{"timestamp": "2025-12-29T13:43:05.322928+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.69s ago] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f5dc2f29-2b7a-4fcd-bb07-1ffe9b1163d8"}
{"timestamp": "2025-12-29T13:43:05.324338+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.pending with payload: {'payment_attempt_id': 23, 'order_id': 35, 'amount_attempted': 1000, 'final_amount': 1000, 'user_id': 71}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "f5dc2f29-2b7a-4fcd-bb07-1ffe9b1163d8"}
{"timestamp": "2025-12-29T13:43:05.324584+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "f5dc2f29-2b7a-4fcd-bb07-1ffe9b1163d8"}
{"timestamp": "2025-12-29T13:43:05.325231+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.pending to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "f5dc2f29-2b7a-4fcd-bb07-1ffe9b1163d8"}
{"timestamp": "2025-12-29T13:43:05.325393+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: payment.pending", "module": "event_bus", "function": "publish", "line": 31, "request_id": "f5dc2f29-2b7a-4fcd-bb07-1ffe9b1163d8"}
{"timestamp": "2025-12-29T13:43:05.326497+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/order/35/initiate \u2192 200 (0.025s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "f5dc2f29-2b7a-4fcd-bb07-1ffe9b1163d8"}
{"timestamp": "2025-12-29T13:43:05.327380+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f5dc2f29-2b7a-4fcd-bb07-1ffe9b1163d8"}
{"timestamp": "2025-12-29T13:43:07.365928+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/23/confirm", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.368645+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.369270+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.369557+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 30.03s ago] {'pk_1': 71}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.372803+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id AS payment_attempts_id, payment_attempts.order_id AS payment_attempts_order_id, payment_attempts.amount_attempted AS payment_attempts_amount_attempted, payment_attempts.status AS payment_attempts_status, payment_attempts.final_amount AS payment_attempts_final_amount, payment_attempts.failure_reason AS payment_attempts_failure_reason, payment_attempts.provider_payment_id AS payment_attempts_provider_payment_id, payment_attempts.created_at AS payment_attempts_created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.373363+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.68s ago] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.375413+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.375716+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.68s ago] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.377526+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE payment_attempts SET status=%(status)s, provider_payment_id=%(provider_payment_id)s WHERE payment_attempts.id = %(payment_attempts_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.377964+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.68s ago] {'status': 'SUCCEEDED', 'provider_payment_id': 'mock_payment_23', 'payment_attempts_id': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.379651+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.384581+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.385055+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.385298+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 25.75s ago] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.388303+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.388964+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 25.75s ago] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.390563+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.succeeded with payload: {'payment_attempt_id': 23, 'order_id': 35, 'final_amount': 1000.0, 'user_id': 71}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.390798+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.391583+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.succeeded to 4 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.391794+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_payment_succeeded for payment.succeeded", "module": "event_bus", "function": "publish", "line": 36, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.391894+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_payment_succeeded", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.392060+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.392182+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_payment_succeeded for payment.succeeded", "module": "event_bus", "function": "publish", "line": 36, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.392287+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_payment_succeeded", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.393926+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.394558+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.394954+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 29.94s ago] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.397593+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET is_completed=%(is_completed)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.397877+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.68s ago] {'is_completed': True, 'orders_id': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.399217+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.402852+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.403439+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.403754+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 30s ago] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.405487+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.completed with payload: {'order_id': 35}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.405681+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.completed to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.405803+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: order.completed", "module": "event_bus", "function": "publish", "line": 31, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.406020+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.406916+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.407299+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_payment_succeeded for payment.succeeded", "module": "event_bus", "function": "publish", "line": 36, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.407587+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_payment_succeeded", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.409055+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.409674+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.410138+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 43.14s ago] {'user_id_1': 71, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.413224+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.414400+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.414718+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_payment_succeeded for payment.succeeded", "module": "event_bus", "function": "publish", "line": 36, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.414900+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_payment_succeeded", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.416657+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.417284+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.417656+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 29.94s ago] {'actor_id': 71, 'actor_type': 'user', 'action': 'payment.succeeded', 'target_id': 35, 'target_type': 'order', 'payload': '{\"payment_attempt_id\": 23, \"order_id\": 35, \"final_amount\": 1000.0, \"user_id\": 71}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 43, 7, 416963, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.420582+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.424767+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.425303+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.425873+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 29.94s ago] {'pk_1': 46}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.428281+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.429703+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.431098+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/23/confirm \u2192 200 (0.065s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:07.432041+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "9ee52f3d-50ce-4306-b716-1b2f1a5695f1"}
{"timestamp": "2025-12-29T13:43:09.473042+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/35/cancel", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.475460+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.476068+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.476421+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.14s ago] {'pk_1': 71}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.479726+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id AS reservations_id, reservations.user_id AS reservations_user_id, reservations.showtime_id AS reservations_showtime_id, reservations.seat_code AS reservations_seat_code, reservations.status AS reservations_status, reservations.created_at AS reservations_created_at, reservations.expires_at AS reservations_expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.480151+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.482404+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE reservations SET status=%(status)s, expires_at=%(expires_at)s WHERE reservations.id = %(reservations_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.482790+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'status': 'CANCELLED', 'expires_at': None, 'reservations_id': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.484440+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.489605+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.490279+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.490654+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.13s ago] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.493083+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.cancelled with payload: {'reservation_id': 35}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.493362+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.494253+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.cancelled to 4 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.494549+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_cancelled for reservation.cancelled", "module": "event_bus", "function": "publish", "line": 36, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.494740+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_cancelled", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.495016+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_cancelled completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.495255+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_cancelled for reservation.cancelled", "module": "event_bus", "function": "publish", "line": 36, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.495385+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_cancelled", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.495509+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Order handler received reservation.cancelled: {'reservation_id': 35}", "module": "handlers", "function": "on_reservation_cancelled", "line": 50, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.496996+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.497922+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.reservation_id = %(reservation_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.498203+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'reservation_id_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.500509+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.cancelled with payload: {'order_id': 35}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.500719+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.cancelled to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.500847+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: order.cancelled", "module": "event_bus", "function": "publish", "line": 31, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.501227+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.502255+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_cancelled completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.502425+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_cancelled for reservation.cancelled", "module": "event_bus", "function": "publish", "line": 36, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.502521+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_cancelled", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.504076+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.504678+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.reservation_id = %(reservation_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.505254+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.007261s ago] {'reservation_id_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.508978+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.order_id = %(order_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.509259+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'order_id_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.511830+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT refunds.id, refunds.reservation_id, refunds.payment_attempt_id, refunds.amount, refunds.reason, refunds.created_at, refunds.status \nFROM refunds \nWHERE refunds.reservation_id = %(reservation_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.512177+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'reservation_id_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.514458+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO refunds (reservation_id, payment_attempt_id, amount, reason, created_at, status) VALUES (%(reservation_id)s, %(payment_attempt_id)s, %(amount)s, %(reason)s, %(created_at)s, %(status)s) RETURNING refunds.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.514794+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'reservation_id': 35, 'payment_attempt_id': 23, 'amount': 1000.0, 'reason': 'reservation_cancelled', 'created_at': datetime.datetime(2025, 12, 29, 13, 43, 9, 514159, tzinfo=datetime.timezone.utc), 'status': 'ISSUED'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.516998+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.521386+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.522422+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT refunds.id, refunds.reservation_id, refunds.payment_attempt_id, refunds.amount, refunds.reason, refunds.created_at, refunds.status \nFROM refunds \nWHERE refunds.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.522728+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'pk_1': 3}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.525412+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id AS payment_attempts_id, payment_attempts.order_id AS payment_attempts_order_id, payment_attempts.amount_attempted AS payment_attempts_amount_attempted, payment_attempts.status AS payment_attempts_status, payment_attempts.final_amount AS payment_attempts_final_amount, payment_attempts.failure_reason AS payment_attempts_failure_reason, payment_attempts.provider_payment_id AS payment_attempts_provider_payment_id, payment_attempts.created_at AS payment_attempts_created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.525778+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'pk_1': 23}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.527439+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: refund.issued with payload: {'refund_id': 3, 'reservation_id': 35, 'payment_attempt_id': 23, 'amount': 1000.0}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.527974+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.531299+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.event_bus", "message": "\u274c Event handler failed: reservation.cancelled -> on_reservation_cancelled: asyncio.run() cannot be called from a running event loop", "module": "event_bus", "function": "_safe_invoke", "line": 45, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\event_bus.py\", line 42, in _safe_invoke\n    await handler(payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\refund\\handlers.py\", line 34, in on_reservation_cancelled\n    issue_refund_from_event(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        db,\n        ^^^\n    ...<2 lines>...\n        reason=\"reservation_cancelled\"\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\refund\\service.py\", line 58, in issue_refund_from_event\n    publish_event(event[\"type\"], event[\"payload\"])\n    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\shared\\services\\event_publisher.py\", line 17, in publish_event\n    asyncio.run(event_bus.publish(event_type, payload))\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 191, in run\n    raise RuntimeError(\n        \"asyncio.run() cannot be called from a running event loop\")\nRuntimeError: asyncio.run() cannot be called from a running event loop"}
{"timestamp": "2025-12-29T13:43:09.536295+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_cancelled for reservation.cancelled", "module": "event_bus", "function": "publish", "line": 36, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.536442+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_cancelled", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.537887+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.538342+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.538629+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.06s ago] {'actor_id': None, 'actor_type': 'user', 'action': 'reservation.cancelled', 'target_id': 35, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 35}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 43, 9, 538142, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.541163+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.552596+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.event_bus", "message": "\u274c Event handler failed: reservation.cancelled -> on_reservation_cancelled: (psycopg2.errors.NotNullViolation) null value in column \"actor_id\" of relation \"audit_logs\" violates not-null constraint\nDETAIL:  Failing row contains (47, null, user, reservation.cancelled, 35, reservation, {\"reservation_id\": 35}, null, 2025-12-29 13:43:09.538142+00).\n\n[SQL: INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id]\n[parameters: {'actor_id': None, 'actor_type': 'user', 'action': 'reservation.cancelled', 'target_id': 35, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 35}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 43, 9, 538142, tzinfo=datetime.timezone.utc)}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)", "module": "event_bus", "function": "_safe_invoke", "line": 45, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\npsycopg2.errors.NotNullViolation: null value in column \"actor_id\" of relation \"audit_logs\" violates not-null constraint\nDETAIL:  Failing row contains (47, null, user, reservation.cancelled, 35, reservation, {\"reservation_id\": 35}, null, 2025-12-29 13:43:09.538142+00).\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\event_bus.py\", line 42, in _safe_invoke\n    await handler(payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\audit\\handlers.py\", line 28, in on_reservation_cancelled\n    write_audit_log(\n    ~~~~~~~~~~~~~~~^\n        db=db,\n        ^^^^^^\n    ...<5 lines>...\n        payload=payload,\n        ^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\audit\\service.py\", line 31, in write_audit_log\n    return repo.create(db, entry)\n           ~~~~~~~~~~~^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\audit\\repository.py\", line 17, in create\n    db.commit()\n    ~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2030, in commit\n    trans.commit(_to_root=True)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^\n  File \"<string>\", line 2, in commit\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\state_changes.py\", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 1311, in commit\n    self._prepare_impl()\n    ~~~~~~~~~~~~~~~~~~^^\n  File \"<string>\", line 2, in _prepare_impl\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\state_changes.py\", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 1286, in _prepare_impl\n    self.session.flush()\n    ~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 4331, in flush\n    self._flush(objects)\n    ~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 4466, in _flush\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 4427, in _flush\n    flush_context.execute()\n    ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py\", line 466, in execute\n    rec.execute(self)\n    ~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py\", line 642, in execute\n    util.preloaded.orm_persistence.save_obj(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self.mapper,\n        ^^^^^^^^^^^^\n        uow.states_for_mapper_hierarchy(self.mapper, False, False),\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        uow,\n        ^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\persistence.py\", line 93, in save_obj\n    _emit_insert_statements(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        base_mapper,\n        ^^^^^^^^^^^^\n    ...<3 lines>...\n        insert,\n        ^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\persistence.py\", line 1233, in _emit_insert_statements\n    result = connection.execute(\n        statement,\n        params,\n        execution_options=execution_options,\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\nsqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column \"actor_id\" of relation \"audit_logs\" violates not-null constraint\nDETAIL:  Failing row contains (47, null, user, reservation.cancelled, 35, reservation, {\"reservation_id\": 35}, null, 2025-12-29 13:43:09.538142+00).\n\n[SQL: INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id]\n[parameters: {'actor_id': None, 'actor_type': 'user', 'action': 'reservation.cancelled', 'target_id': 35, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 35}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 43, 9, 538142, tzinfo=datetime.timezone.utc)}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)"}
{"timestamp": "2025-12-29T13:43:09.565441+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/35/cancel \u2192 200 (0.092s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:09.567033+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "afdafbb5-1e5f-4c61-8e79-9d172c01e719"}
{"timestamp": "2025-12-29T13:43:11.614089+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.616852+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.617597+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.618129+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.62s ago] {'email_1': 'test_admin_1767015789.567222@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.823623+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.824336+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.6s ago] {'email': 'test_admin_1767015789.567222@example.com', 'hashed_password': '$2b$12$.wr/z9ICxZsUC8K3blqkLuT/ddDmWVpxkTJnYe5wDnT5273kXzfIe', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.826162+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.831719+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.832614+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.833202+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.6s ago] {'pk_1': 72}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.835291+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 72, 'email': 'test_admin_1767015789.567222@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.835646+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.836488+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.836734+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.836921+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.838674+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.839392+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.839785+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.57s ago] {'user_id_1': 72, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.842101+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.842490+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.57s ago] {'user_id': 72, 'name': None, 'email': 'test_admin_1767015789.567222@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.844245+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.848799+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.849360+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.849803+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.56s ago] {'pk_1': 72}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.852297+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 72, 'user_id': 72, 'email': 'test_admin_1767015789.567222@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.852683+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.853012+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.853445+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.854584+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.855796+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:11.856157+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.86s ago] {'email_1': 'test_admin_1767015789.567222@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:12.061405+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 72, 'email': 'test_admin_1767015789.567222@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:12.061691+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:12.062493+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:12.062712+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:12.063710+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.450s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:12.064726+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d4be794b-ece3-457d-9926-912c4a09f22f"}
{"timestamp": "2025-12-29T13:43:14.118972+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "7f08f703-2f1d-432f-9fef-675a9770cbb6"}
{"timestamp": "2025-12-29T13:43:14.121702+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7f08f703-2f1d-432f-9fef-675a9770cbb6"}
{"timestamp": "2025-12-29T13:43:14.122283+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f08f703-2f1d-432f-9fef-675a9770cbb6"}
{"timestamp": "2025-12-29T13:43:14.122623+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.56s ago] {'title_1': 'Test Movie 1767015789.567222'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f08f703-2f1d-432f-9fef-675a9770cbb6"}
{"timestamp": "2025-12-29T13:43:14.125971+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f08f703-2f1d-432f-9fef-675a9770cbb6"}
{"timestamp": "2025-12-29T13:43:14.126586+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.56s ago] {'title': 'Test Movie 1767015789.567222', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f08f703-2f1d-432f-9fef-675a9770cbb6"}
{"timestamp": "2025-12-29T13:43:14.129172+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "7f08f703-2f1d-432f-9fef-675a9770cbb6"}
{"timestamp": "2025-12-29T13:43:14.135578+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7f08f703-2f1d-432f-9fef-675a9770cbb6"}
{"timestamp": "2025-12-29T13:43:14.136161+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f08f703-2f1d-432f-9fef-675a9770cbb6"}
{"timestamp": "2025-12-29T13:43:14.136497+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.56s ago] {'pk_1': 45}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f08f703-2f1d-432f-9fef-675a9770cbb6"}
{"timestamp": "2025-12-29T13:43:14.138888+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 45}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "7f08f703-2f1d-432f-9fef-675a9770cbb6"}
{"timestamp": "2025-12-29T13:43:14.139165+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "7f08f703-2f1d-432f-9fef-675a9770cbb6"}
{"timestamp": "2025-12-29T13:43:14.140014+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "7f08f703-2f1d-432f-9fef-675a9770cbb6"}
{"timestamp": "2025-12-29T13:43:14.140235+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "7f08f703-2f1d-432f-9fef-675a9770cbb6"}
{"timestamp": "2025-12-29T13:43:14.141300+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "7f08f703-2f1d-432f-9fef-675a9770cbb6"}
{"timestamp": "2025-12-29T13:43:14.142122+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "7f08f703-2f1d-432f-9fef-675a9770cbb6"}
{"timestamp": "2025-12-29T13:43:16.181640+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "6d057e52-4777-49e8-bfff-70ed3d22f27f"}
{"timestamp": "2025-12-29T13:43:16.184341+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6d057e52-4777-49e8-bfff-70ed3d22f27f"}
{"timestamp": "2025-12-29T13:43:16.184919+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6d057e52-4777-49e8-bfff-70ed3d22f27f"}
{"timestamp": "2025-12-29T13:43:16.185312+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.55s ago] {'name_1': 'Test Layout 1767015789.567222'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6d057e52-4777-49e8-bfff-70ed3d22f27f"}
{"timestamp": "2025-12-29T13:43:16.187956+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6d057e52-4777-49e8-bfff-70ed3d22f27f"}
{"timestamp": "2025-12-29T13:43:16.188404+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.55s ago] {'name': 'Test Layout 1767015789.567222', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6d057e52-4777-49e8-bfff-70ed3d22f27f"}
{"timestamp": "2025-12-29T13:43:16.190230+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6d057e52-4777-49e8-bfff-70ed3d22f27f"}
{"timestamp": "2025-12-29T13:43:16.194733+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6d057e52-4777-49e8-bfff-70ed3d22f27f"}
{"timestamp": "2025-12-29T13:43:16.195384+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6d057e52-4777-49e8-bfff-70ed3d22f27f"}
{"timestamp": "2025-12-29T13:43:16.195941+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.54s ago] {'pk_1': 44}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6d057e52-4777-49e8-bfff-70ed3d22f27f"}
{"timestamp": "2025-12-29T13:43:16.198049+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 44}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "6d057e52-4777-49e8-bfff-70ed3d22f27f"}
{"timestamp": "2025-12-29T13:43:16.198351+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "6d057e52-4777-49e8-bfff-70ed3d22f27f"}
{"timestamp": "2025-12-29T13:43:16.199117+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6d057e52-4777-49e8-bfff-70ed3d22f27f"}
{"timestamp": "2025-12-29T13:43:16.199386+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "6d057e52-4777-49e8-bfff-70ed3d22f27f"}
{"timestamp": "2025-12-29T13:43:16.200794+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.019s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "6d057e52-4777-49e8-bfff-70ed3d22f27f"}
{"timestamp": "2025-12-29T13:43:16.201870+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6d057e52-4777-49e8-bfff-70ed3d22f27f"}
{"timestamp": "2025-12-29T13:43:18.241683+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "adc7f9c3-29d3-4157-8ab1-2d900aadd82f"}
{"timestamp": "2025-12-29T13:43:18.244183+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "adc7f9c3-29d3-4157-8ab1-2d900aadd82f"}
{"timestamp": "2025-12-29T13:43:18.244767+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adc7f9c3-29d3-4157-8ab1-2d900aadd82f"}
{"timestamp": "2025-12-29T13:43:18.245116+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.55s ago] {'name_1': 'Test Screen 1767015789.567222', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adc7f9c3-29d3-4157-8ab1-2d900aadd82f"}
{"timestamp": "2025-12-29T13:43:18.247685+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adc7f9c3-29d3-4157-8ab1-2d900aadd82f"}
{"timestamp": "2025-12-29T13:43:18.248046+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.55s ago] {'id_1': 44, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adc7f9c3-29d3-4157-8ab1-2d900aadd82f"}
{"timestamp": "2025-12-29T13:43:18.250057+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adc7f9c3-29d3-4157-8ab1-2d900aadd82f"}
{"timestamp": "2025-12-29T13:43:18.250429+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.54s ago] {'name': 'Test Screen 1767015789.567222', 'capacity': 150, 'seat_layout_id': 44}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adc7f9c3-29d3-4157-8ab1-2d900aadd82f"}
{"timestamp": "2025-12-29T13:43:18.252320+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "adc7f9c3-29d3-4157-8ab1-2d900aadd82f"}
{"timestamp": "2025-12-29T13:43:18.257406+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "adc7f9c3-29d3-4157-8ab1-2d900aadd82f"}
{"timestamp": "2025-12-29T13:43:18.258050+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adc7f9c3-29d3-4157-8ab1-2d900aadd82f"}
{"timestamp": "2025-12-29T13:43:18.258523+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.54s ago] {'pk_1': 44}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "adc7f9c3-29d3-4157-8ab1-2d900aadd82f"}
{"timestamp": "2025-12-29T13:43:18.260413+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 44}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "adc7f9c3-29d3-4157-8ab1-2d900aadd82f"}
{"timestamp": "2025-12-29T13:43:18.260678+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "adc7f9c3-29d3-4157-8ab1-2d900aadd82f"}
{"timestamp": "2025-12-29T13:43:18.261430+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "adc7f9c3-29d3-4157-8ab1-2d900aadd82f"}
{"timestamp": "2025-12-29T13:43:18.261645+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "adc7f9c3-29d3-4157-8ab1-2d900aadd82f"}
{"timestamp": "2025-12-29T13:43:18.262829+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.021s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "adc7f9c3-29d3-4157-8ab1-2d900aadd82f"}
{"timestamp": "2025-12-29T13:43:18.263741+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "adc7f9c3-29d3-4157-8ab1-2d900aadd82f"}
{"timestamp": "2025-12-29T13:43:20.298435+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:20.301200+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:20.301886+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:20.302263+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.53s ago] {'pk_1': 45}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:20.304995+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:20.305561+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.53s ago] {'pk_1': 44}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:20.307860+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:20.308372+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.53s ago] {'screen_id_1': 44, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:20.310594+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:20.311119+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.53s ago] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 45, 'screen_id': 44}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:20.313797+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:20.318524+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:20.319227+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:20.319691+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.53s ago] {'pk_1': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:20.322155+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:20.322632+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.53s ago] {'pk_1': 45}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:20.324522+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:20.325088+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.53s ago] {'pk_1': 44}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:20.326744+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 36}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:20.327070+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:20.327917+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:20.328256+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:20.329797+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.031s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:20.331040+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "7f147112-5813-4227-ba89-2d308de2d26b"}
{"timestamp": "2025-12-29T13:43:22.377533+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.380137+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.380688+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.381159+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.39s ago] {'email_1': 'test_failpay_1767015800.330936@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.585235+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.585680+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.36s ago] {'email': 'test_failpay_1767015800.330936@example.com', 'hashed_password': '$2b$12$1YPswckaskWd9RVhWLnCbuDgs6W.CPMx3Fnl84OMq6XL8b4IOrZ2a', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.587521+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.591935+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.592644+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.593201+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.36s ago] {'pk_1': 73}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.595298+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 73, 'email': 'test_failpay_1767015800.330936@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.595759+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.596815+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.597208+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.597553+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.599494+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.600074+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.600422+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.33s ago] {'user_id_1': 73, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.602934+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.603624+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.33s ago] {'user_id': 73, 'name': None, 'email': 'test_failpay_1767015800.330936@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.605768+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.609772+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.610696+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.611085+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.32s ago] {'pk_1': 73}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.613378+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 73, 'user_id': 73, 'email': 'test_failpay_1767015800.330936@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.613930+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.614121+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.614446+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.615754+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.617256+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.617858+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.62s ago] {'email_1': 'test_failpay_1767015800.330936@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.821431+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 73, 'email': 'test_failpay_1767015800.330936@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.821800+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.822671+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.822910+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.823978+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.446s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:22.824785+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ba22d7cf-39b3-4b16-a7c9-cbff37858df5"}
{"timestamp": "2025-12-29T13:43:24.866952+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.869833+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.870490+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.870920+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.53s ago] {'pk_1': 73}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.874035+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.874585+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.53s ago] {'showtime_id_1': 36, 'seat_code_1': 'R7-7', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.876817+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.877294+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.53s ago] {'user_id': 73, 'showtime_id': 36, 'seat_code': 'R7-7', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 13, 43, 24, 876444, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 53, 24, 876176, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.879199+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.883479+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.884117+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.884556+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.53s ago] {'pk_1': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.886634+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 36, 'user_id': 73, 'showtime_id': 36, 'seat_code': 'R7-7'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.886982+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.888114+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.888445+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.888688+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.890253+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.890897+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.891219+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.55s ago] {'showtime_id_1': 36, 'seat_code_1': 'R7-7', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.893728+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.894271+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.53s ago] {'seat_code': 'R7-7', 'showtime_id': 36, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.896420+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.896965+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.52s ago] {'status': 'LOCKED', 'locked_by_user_id': 73, 'lock_expires_at': datetime.datetime(2025, 12, 29, 13, 53, 24, 895975, tzinfo=datetime.timezone.utc), 'seat_locks_id': 32}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.898785+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.903185+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.903737+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.904124+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.52s ago] {'pk_1': 32}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.906039+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 36, 'seat_code': 'R7-7', 'user_id': 73, 'expires_at': '2025-12-29T13:53:24.895975+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.906270+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.906399+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.906619+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.907618+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.907795+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.907897+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.908009+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 36, 'user_id': 73, 'showtime_id': 36, 'seat_code': 'R7-7'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.908428+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 36", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.909990+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.910507+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.910746+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.52s ago] {'user_id': 73, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.913456+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.918535+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.919294+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.919947+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.52s ago] {'pk_1': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.923043+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 36, 'reservation_id': 36, 'user_id': 73, 'showtime_id': 36, 'seat_code': 'R7-7'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.923503+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.923801+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_order_created for order.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.924015+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_order_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.924326+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 36", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.926467+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.927117+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.927588+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.5s ago] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.931213+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 36, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.931598+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.932047+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_pricing_snapshot_created for pricing.snapshot_created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.932331+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_pricing_snapshot_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.932578+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 36, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.934096+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.934688+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.934986+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.48s ago] {'pk_1': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.937631+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.938157+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.48s ago] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.939959+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.944061+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.944729+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.945047+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.54s ago] {'pk_1': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.946990+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 36 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.947347+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.948424+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.948668+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 36: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.949138+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.950363+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.950654+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 36", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.950999+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.952210+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.952432+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.952654+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.954082+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.954601+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.955207+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.48s ago] {'actor_id': 73, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 36, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 36, \"user_id\": 73, \"showtime_id\": 36, \"seat_code\": \"R7-7\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 43, 24, 954335, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.957665+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.961871+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.962382+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.962620+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.47s ago] {'pk_1': 48}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.964543+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.965598+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.966639+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.100s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:24.967496+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f775f44b-21f7-4c4b-8164-0bb13afe0c7e"}
{"timestamp": "2025-12-29T13:43:27.007577+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "d4e192e7-05be-4c11-8925-82a51a4a4456"}
{"timestamp": "2025-12-29T13:43:27.010274+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d4e192e7-05be-4c11-8925-82a51a4a4456"}
{"timestamp": "2025-12-29T13:43:27.010954+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d4e192e7-05be-4c11-8925-82a51a4a4456"}
{"timestamp": "2025-12-29T13:43:27.011367+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 49.67s ago] {'pk_1': 73}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d4e192e7-05be-4c11-8925-82a51a4a4456"}
{"timestamp": "2025-12-29T13:43:27.014395+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d4e192e7-05be-4c11-8925-82a51a4a4456"}
{"timestamp": "2025-12-29T13:43:27.014843+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.47s ago] {'user_id_1': 73}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d4e192e7-05be-4c11-8925-82a51a4a4456"}
{"timestamp": "2025-12-29T13:43:27.017092+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.010s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "d4e192e7-05be-4c11-8925-82a51a4a4456"}
{"timestamp": "2025-12-29T13:43:27.018091+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d4e192e7-05be-4c11-8925-82a51a4a4456"}
{"timestamp": "2025-12-29T13:43:29.060502+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/order/36/initiate", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "503e0cdc-cfe5-4683-b060-fb9b387b7df0"}
{"timestamp": "2025-12-29T13:43:29.062973+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "503e0cdc-cfe5-4683-b060-fb9b387b7df0"}
{"timestamp": "2025-12-29T13:43:29.063621+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "503e0cdc-cfe5-4683-b060-fb9b387b7df0"}
{"timestamp": "2025-12-29T13:43:29.063956+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 51.73s ago] {'pk_1': 73}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "503e0cdc-cfe5-4683-b060-fb9b387b7df0"}
{"timestamp": "2025-12-29T13:43:29.066700+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "503e0cdc-cfe5-4683-b060-fb9b387b7df0"}
{"timestamp": "2025-12-29T13:43:29.067140+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 51.61s ago] {'pk_1': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "503e0cdc-cfe5-4683-b060-fb9b387b7df0"}
{"timestamp": "2025-12-29T13:43:29.069357+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO payment_attempts (order_id, amount_attempted, status, final_amount, failure_reason, provider_payment_id, created_at) VALUES (%(order_id)s, %(amount_attempted)s, %(status)s, %(final_amount)s, %(failure_reason)s, %(provider_payment_id)s, %(created_at)s) RETURNING payment_attempts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "503e0cdc-cfe5-4683-b060-fb9b387b7df0"}
{"timestamp": "2025-12-29T13:43:29.069770+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.45s ago] {'order_id': 36, 'amount_attempted': 1000, 'status': 'PENDING', 'final_amount': 1000, 'failure_reason': None, 'provider_payment_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 43, 29, 69000, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "503e0cdc-cfe5-4683-b060-fb9b387b7df0"}
{"timestamp": "2025-12-29T13:43:29.071649+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "503e0cdc-cfe5-4683-b060-fb9b387b7df0"}
{"timestamp": "2025-12-29T13:43:29.076830+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "503e0cdc-cfe5-4683-b060-fb9b387b7df0"}
{"timestamp": "2025-12-29T13:43:29.077517+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "503e0cdc-cfe5-4683-b060-fb9b387b7df0"}
{"timestamp": "2025-12-29T13:43:29.077940+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.45s ago] {'pk_1': 24}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "503e0cdc-cfe5-4683-b060-fb9b387b7df0"}
{"timestamp": "2025-12-29T13:43:29.080299+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "503e0cdc-cfe5-4683-b060-fb9b387b7df0"}
{"timestamp": "2025-12-29T13:43:29.080709+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.45s ago] {'pk_1': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "503e0cdc-cfe5-4683-b060-fb9b387b7df0"}
{"timestamp": "2025-12-29T13:43:29.082271+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.pending with payload: {'payment_attempt_id': 24, 'order_id': 36, 'amount_attempted': 1000, 'final_amount': 1000, 'user_id': 73}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "503e0cdc-cfe5-4683-b060-fb9b387b7df0"}
{"timestamp": "2025-12-29T13:43:29.082557+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "503e0cdc-cfe5-4683-b060-fb9b387b7df0"}
{"timestamp": "2025-12-29T13:43:29.083275+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.pending to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "503e0cdc-cfe5-4683-b060-fb9b387b7df0"}
{"timestamp": "2025-12-29T13:43:29.083569+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: payment.pending", "module": "event_bus", "function": "publish", "line": 31, "request_id": "503e0cdc-cfe5-4683-b060-fb9b387b7df0"}
{"timestamp": "2025-12-29T13:43:29.084706+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/order/36/initiate \u2192 200 (0.024s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "503e0cdc-cfe5-4683-b060-fb9b387b7df0"}
{"timestamp": "2025-12-29T13:43:29.085604+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "503e0cdc-cfe5-4683-b060-fb9b387b7df0"}
{"timestamp": "2025-12-29T13:43:31.135763+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /admin/payments/24/fail", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b74f55f5-82a8-46b1-985a-035eb9713768"}
{"timestamp": "2025-12-29T13:43:31.138443+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b74f55f5-82a8-46b1-985a-035eb9713768"}
{"timestamp": "2025-12-29T13:43:31.139072+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b74f55f5-82a8-46b1-985a-035eb9713768"}
{"timestamp": "2025-12-29T13:43:31.139411+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 53.8s ago] {'pk_1': 72}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b74f55f5-82a8-46b1-985a-035eb9713768"}
{"timestamp": "2025-12-29T13:43:31.142112+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b74f55f5-82a8-46b1-985a-035eb9713768"}
{"timestamp": "2025-12-29T13:43:31.143640+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /admin/payments/24/fail \u2192 403 (0.008s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b74f55f5-82a8-46b1-985a-035eb9713768"}
{"timestamp": "2025-12-29T13:43:33.187673+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.190677+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.191365+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.191887+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.2s ago] {'email_1': 'test_admin_1767015811.1448884@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.396393+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.396857+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.17s ago] {'email': 'test_admin_1767015811.1448884@example.com', 'hashed_password': '$2b$12$S5dbixW.Tt1hZYa8sLnSeOoKYiYsaHoBJ5LS8w6tl5Q0tg/kTLpZq', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.398643+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.403771+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.404477+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.404858+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.17s ago] {'pk_1': 74}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.406873+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 74, 'email': 'test_admin_1767015811.1448884@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.407115+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.407798+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.407963+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.408060+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.409442+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.409965+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.410316+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.14s ago] {'user_id_1': 74, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.412807+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.413069+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.14s ago] {'user_id': 74, 'name': None, 'email': 'test_admin_1767015811.1448884@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.414559+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.418281+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.418985+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.419421+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.13s ago] {'pk_1': 74}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.421330+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 74, 'user_id': 74, 'email': 'test_admin_1767015811.1448884@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.421554+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.421707+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.421978+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.423045+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.424085+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.424573+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.43s ago] {'email_1': 'test_admin_1767015811.1448884@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.632732+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 74, 'email': 'test_admin_1767015811.1448884@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.633060+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.633925+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.634223+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.635369+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.448s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:33.636289+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a2723c85-8225-4025-8a77-eb4e71c53de6"}
{"timestamp": "2025-12-29T13:43:35.677109+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "87f4a4a9-7b13-403a-b0be-78d266d90db3"}
{"timestamp": "2025-12-29T13:43:35.679785+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "87f4a4a9-7b13-403a-b0be-78d266d90db3"}
{"timestamp": "2025-12-29T13:43:35.680485+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "87f4a4a9-7b13-403a-b0be-78d266d90db3"}
{"timestamp": "2025-12-29T13:43:35.680894+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.12s ago] {'title_1': 'Test Movie 1767015811.1448884'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "87f4a4a9-7b13-403a-b0be-78d266d90db3"}
{"timestamp": "2025-12-29T13:43:35.683463+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "87f4a4a9-7b13-403a-b0be-78d266d90db3"}
{"timestamp": "2025-12-29T13:43:35.683953+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.12s ago] {'title': 'Test Movie 1767015811.1448884', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "87f4a4a9-7b13-403a-b0be-78d266d90db3"}
{"timestamp": "2025-12-29T13:43:35.685950+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "87f4a4a9-7b13-403a-b0be-78d266d90db3"}
{"timestamp": "2025-12-29T13:43:35.691499+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "87f4a4a9-7b13-403a-b0be-78d266d90db3"}
{"timestamp": "2025-12-29T13:43:35.692319+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "87f4a4a9-7b13-403a-b0be-78d266d90db3"}
{"timestamp": "2025-12-29T13:43:35.692732+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.12s ago] {'pk_1': 46}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "87f4a4a9-7b13-403a-b0be-78d266d90db3"}
{"timestamp": "2025-12-29T13:43:35.694962+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 46}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "87f4a4a9-7b13-403a-b0be-78d266d90db3"}
{"timestamp": "2025-12-29T13:43:35.695201+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "87f4a4a9-7b13-403a-b0be-78d266d90db3"}
{"timestamp": "2025-12-29T13:43:35.695879+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "87f4a4a9-7b13-403a-b0be-78d266d90db3"}
{"timestamp": "2025-12-29T13:43:35.696043+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "87f4a4a9-7b13-403a-b0be-78d266d90db3"}
{"timestamp": "2025-12-29T13:43:35.697148+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.020s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "87f4a4a9-7b13-403a-b0be-78d266d90db3"}
{"timestamp": "2025-12-29T13:43:35.698097+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "87f4a4a9-7b13-403a-b0be-78d266d90db3"}
{"timestamp": "2025-12-29T13:43:37.740233+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "620d1b78-c73b-4c67-ba5d-496b875c6b3c"}
{"timestamp": "2025-12-29T13:43:37.743055+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "620d1b78-c73b-4c67-ba5d-496b875c6b3c"}
{"timestamp": "2025-12-29T13:43:37.743610+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "620d1b78-c73b-4c67-ba5d-496b875c6b3c"}
{"timestamp": "2025-12-29T13:43:37.743901+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.1s ago] {'name_1': 'Test Layout 1767015811.1448884'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "620d1b78-c73b-4c67-ba5d-496b875c6b3c"}
{"timestamp": "2025-12-29T13:43:37.746455+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "620d1b78-c73b-4c67-ba5d-496b875c6b3c"}
{"timestamp": "2025-12-29T13:43:37.746925+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.1s ago] {'name': 'Test Layout 1767015811.1448884', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "620d1b78-c73b-4c67-ba5d-496b875c6b3c"}
{"timestamp": "2025-12-29T13:43:37.748817+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "620d1b78-c73b-4c67-ba5d-496b875c6b3c"}
{"timestamp": "2025-12-29T13:43:37.754319+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "620d1b78-c73b-4c67-ba5d-496b875c6b3c"}
{"timestamp": "2025-12-29T13:43:37.755364+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "620d1b78-c73b-4c67-ba5d-496b875c6b3c"}
{"timestamp": "2025-12-29T13:43:37.755875+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.1s ago] {'pk_1': 45}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "620d1b78-c73b-4c67-ba5d-496b875c6b3c"}
{"timestamp": "2025-12-29T13:43:37.758469+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 45}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "620d1b78-c73b-4c67-ba5d-496b875c6b3c"}
{"timestamp": "2025-12-29T13:43:37.758807+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "620d1b78-c73b-4c67-ba5d-496b875c6b3c"}
{"timestamp": "2025-12-29T13:43:37.759719+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "620d1b78-c73b-4c67-ba5d-496b875c6b3c"}
{"timestamp": "2025-12-29T13:43:37.759957+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "620d1b78-c73b-4c67-ba5d-496b875c6b3c"}
{"timestamp": "2025-12-29T13:43:37.760977+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.021s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "620d1b78-c73b-4c67-ba5d-496b875c6b3c"}
{"timestamp": "2025-12-29T13:43:37.761933+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "620d1b78-c73b-4c67-ba5d-496b875c6b3c"}
{"timestamp": "2025-12-29T13:43:39.803723+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "a6d5d385-bac5-4377-938b-af807899085a"}
{"timestamp": "2025-12-29T13:43:39.806427+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a6d5d385-bac5-4377-938b-af807899085a"}
{"timestamp": "2025-12-29T13:43:39.807048+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a6d5d385-bac5-4377-938b-af807899085a"}
{"timestamp": "2025-12-29T13:43:39.807428+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.11s ago] {'name_1': 'Test Screen 1767015811.1448884', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a6d5d385-bac5-4377-938b-af807899085a"}
{"timestamp": "2025-12-29T13:43:39.810018+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a6d5d385-bac5-4377-938b-af807899085a"}
{"timestamp": "2025-12-29T13:43:39.810413+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.11s ago] {'id_1': 45, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a6d5d385-bac5-4377-938b-af807899085a"}
{"timestamp": "2025-12-29T13:43:39.812385+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a6d5d385-bac5-4377-938b-af807899085a"}
{"timestamp": "2025-12-29T13:43:39.812767+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.1s ago] {'name': 'Test Screen 1767015811.1448884', 'capacity': 150, 'seat_layout_id': 45}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a6d5d385-bac5-4377-938b-af807899085a"}
{"timestamp": "2025-12-29T13:43:39.814831+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "a6d5d385-bac5-4377-938b-af807899085a"}
{"timestamp": "2025-12-29T13:43:39.820105+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a6d5d385-bac5-4377-938b-af807899085a"}
{"timestamp": "2025-12-29T13:43:39.820703+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a6d5d385-bac5-4377-938b-af807899085a"}
{"timestamp": "2025-12-29T13:43:39.821145+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.1s ago] {'pk_1': 45}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a6d5d385-bac5-4377-938b-af807899085a"}
{"timestamp": "2025-12-29T13:43:39.823052+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 45}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "a6d5d385-bac5-4377-938b-af807899085a"}
{"timestamp": "2025-12-29T13:43:39.823334+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "a6d5d385-bac5-4377-938b-af807899085a"}
{"timestamp": "2025-12-29T13:43:39.824038+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "a6d5d385-bac5-4377-938b-af807899085a"}
{"timestamp": "2025-12-29T13:43:39.824245+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "a6d5d385-bac5-4377-938b-af807899085a"}
{"timestamp": "2025-12-29T13:43:39.825257+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "a6d5d385-bac5-4377-938b-af807899085a"}
{"timestamp": "2025-12-29T13:43:39.826271+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a6d5d385-bac5-4377-938b-af807899085a"}
{"timestamp": "2025-12-29T13:43:41.868071+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:41.870591+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:41.871229+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:41.871529+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.1s ago] {'pk_1': 46}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:41.874024+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:41.874454+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.1s ago] {'pk_1': 45}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:41.876677+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:41.877108+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.1s ago] {'screen_id_1': 45, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:41.879004+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:41.879464+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.1s ago] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 46, 'screen_id': 45}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:41.881366+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:41.886042+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:41.886709+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:41.887306+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.1s ago] {'pk_1': 37}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:41.889894+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:41.890170+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.09s ago] {'pk_1': 46}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:41.892042+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:41.892314+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.09s ago] {'pk_1': 45}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:41.893918+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 37}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:41.894208+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:41.894920+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:41.895161+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:41.896204+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.028s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:41.897099+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a95a2b2f-cdaa-438a-9bf4-b219a65de0fb"}
{"timestamp": "2025-12-29T13:43:43.937494+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:43.940471+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:43.941163+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:43.941545+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 79.95s ago] {'email_1': 'test_admincancel_1767015821.8970177@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.146691+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.147244+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 79.92s ago] {'email': 'test_admincancel_1767015821.8970177@example.com', 'hashed_password': '$2b$12$bPNYWjHjDGrlODaATV0FoOHaevGLL5epJ7WvM.zd7wXElwRlEePZu', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.148987+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.154677+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.155200+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.155461+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 79.92s ago] {'pk_1': 75}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.157274+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 75, 'email': 'test_admincancel_1767015821.8970177@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.157591+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.158320+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.158545+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.158647+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.160137+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.160939+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.161359+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 79.89s ago] {'user_id_1': 75, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.163502+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.163774+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 79.89s ago] {'user_id': 75, 'name': None, 'email': 'test_admincancel_1767015821.8970177@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.165185+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.169156+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.169791+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.170276+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 79.88s ago] {'pk_1': 75}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.172184+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 75, 'user_id': 75, 'email': 'test_admincancel_1767015821.8970177@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.172378+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.172501+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.172714+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.173715+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.174752+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.175158+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 80.18s ago] {'email_1': 'test_admincancel_1767015821.8970177@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.378633+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 75, 'email': 'test_admincancel_1767015821.8970177@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.378874+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.379557+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.379720+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.380671+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.443s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:44.381588+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b17cf8e0-5c4e-4947-9ce8-3c933c69a0f9"}
{"timestamp": "2025-12-29T13:43:46.442912+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.446123+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.446826+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.447249+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.11s ago] {'pk_1': 75}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.450465+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.450933+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.11s ago] {'showtime_id_1': 37, 'seat_code_1': 'R8-8', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.453081+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.453440+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.11s ago] {'user_id': 75, 'showtime_id': 37, 'seat_code': 'R8-8', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 13, 43, 46, 452745, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 53, 46, 452477, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.455193+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.460280+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.460780+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.461079+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.11s ago] {'pk_1': 37}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.462934+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 37, 'user_id': 75, 'showtime_id': 37, 'seat_code': 'R8-8'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.463197+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.464021+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.464239+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.464340+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.465929+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.466528+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.466775+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.12s ago] {'showtime_id_1': 37, 'seat_code_1': 'R8-8', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.469093+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.469378+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.1s ago] {'seat_code': 'R8-8', 'showtime_id': 37, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.471275+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.471563+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.1s ago] {'status': 'LOCKED', 'locked_by_user_id': 75, 'lock_expires_at': datetime.datetime(2025, 12, 29, 13, 53, 46, 470878, tzinfo=datetime.timezone.utc), 'seat_locks_id': 33}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.473217+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.477066+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.477716+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.477986+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.1s ago] {'pk_1': 33}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.480193+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 37, 'seat_code': 'R8-8', 'user_id': 75, 'expires_at': '2025-12-29T13:53:46.470878+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.480411+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.480546+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.480762+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.481708+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.481875+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.481972+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.482163+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 37, 'user_id': 75, 'showtime_id': 37, 'seat_code': 'R8-8'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.482314+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 37", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.483687+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.484307+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.484740+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.09s ago] {'user_id': 75, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 37}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.487261+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.491203+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.491785+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.492088+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.09s ago] {'pk_1': 37}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.494263+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 37, 'reservation_id': 37, 'user_id': 75, 'showtime_id': 37, 'seat_code': 'R8-8'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.494452+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.494572+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_order_created for order.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.494676+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_order_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.494786+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 37", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.495993+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.496413+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.496618+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.07s ago] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.498566+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 37, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.498776+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.498900+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_pricing_snapshot_created for pricing.snapshot_created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.499024+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_pricing_snapshot_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.499278+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 37, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.501085+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.501834+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.502463+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.05s ago] {'pk_1': 37}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.505602+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.506020+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.05s ago] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 37}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.508051+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.512440+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.513061+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.513501+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.11s ago] {'pk_1': 37}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.515652+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 37 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.516064+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.517150+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.517353+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 37: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.517668+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.519036+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.519341+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 37", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.519643+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.520750+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.520991+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.521236+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.522593+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.523186+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.523591+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.04s ago] {'actor_id': 75, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 37, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 37, \"user_id\": 75, \"showtime_id\": 37, \"seat_code\": \"R8-8\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 43, 46, 522840, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.525945+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.529610+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.530201+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.530706+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 69.04s ago] {'pk_1': 49}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.532582+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.533520+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.534625+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.092s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:46.535600+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b55654d8-d589-438e-98d6-e1c5762dee73"}
{"timestamp": "2025-12-29T13:43:48.584350+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /admin/reservations/37/cancel", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "51b60c82-94ba-493c-9713-4f6b81af60cf"}
{"timestamp": "2025-12-29T13:43:48.586959+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "51b60c82-94ba-493c-9713-4f6b81af60cf"}
{"timestamp": "2025-12-29T13:43:48.587566+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51b60c82-94ba-493c-9713-4f6b81af60cf"}
{"timestamp": "2025-12-29T13:43:48.587894+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.25s ago] {'pk_1': 74}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51b60c82-94ba-493c-9713-4f6b81af60cf"}
{"timestamp": "2025-12-29T13:43:48.590929+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "51b60c82-94ba-493c-9713-4f6b81af60cf"}
{"timestamp": "2025-12-29T13:43:48.592678+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /admin/reservations/37/cancel \u2192 403 (0.008s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "51b60c82-94ba-493c-9713-4f6b81af60cf"}
{"timestamp": "2025-12-29T13:43:50.643333+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.645912+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.646551+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.646917+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.65s ago] {'email_1': 'test_admin_1767015828.59374@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.851206+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.851657+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.63s ago] {'email': 'test_admin_1767015828.59374@example.com', 'hashed_password': '$2b$12$1imI1HzvBVawWBdgsx7YCO/aGvnBM.08ywhy8/aB3/CXnAzGWXVQ.', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.853526+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.859055+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.859813+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.860412+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.63s ago] {'pk_1': 76}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.863255+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 76, 'email': 'test_admin_1767015828.59374@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.863649+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.864438+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.864669+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.864832+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.866646+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.867229+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.867576+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.59s ago] {'user_id_1': 76, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.870156+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.870639+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.59s ago] {'user_id': 76, 'name': None, 'email': 'test_admin_1767015828.59374@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.872458+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.876784+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.877494+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.878007+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.59s ago] {'pk_1': 76}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.880026+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 76, 'user_id': 76, 'email': 'test_admin_1767015828.59374@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.880260+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.880402+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.880677+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.881802+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.883148+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:50.883637+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.89s ago] {'email_1': 'test_admin_1767015828.59374@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:51.091932+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 76, 'email': 'test_admin_1767015828.59374@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:51.092281+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:51.093131+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:51.093367+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:51.094406+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.451s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:51.095296+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0f55269b-2dd2-4a64-89ec-0af30f8a4651"}
{"timestamp": "2025-12-29T13:43:53.132002+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "191e53ac-d3b7-413d-a296-ac8c18f09685"}
{"timestamp": "2025-12-29T13:43:53.134483+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "191e53ac-d3b7-413d-a296-ac8c18f09685"}
{"timestamp": "2025-12-29T13:43:53.135027+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "191e53ac-d3b7-413d-a296-ac8c18f09685"}
{"timestamp": "2025-12-29T13:43:53.135386+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.57s ago] {'title_1': 'Test Movie 1767015828.59374'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "191e53ac-d3b7-413d-a296-ac8c18f09685"}
{"timestamp": "2025-12-29T13:43:53.137893+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "191e53ac-d3b7-413d-a296-ac8c18f09685"}
{"timestamp": "2025-12-29T13:43:53.138352+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.57s ago] {'title': 'Test Movie 1767015828.59374', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "191e53ac-d3b7-413d-a296-ac8c18f09685"}
{"timestamp": "2025-12-29T13:43:53.140209+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "191e53ac-d3b7-413d-a296-ac8c18f09685"}
{"timestamp": "2025-12-29T13:43:53.145283+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "191e53ac-d3b7-413d-a296-ac8c18f09685"}
{"timestamp": "2025-12-29T13:43:53.145947+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "191e53ac-d3b7-413d-a296-ac8c18f09685"}
{"timestamp": "2025-12-29T13:43:53.146384+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.57s ago] {'pk_1': 47}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "191e53ac-d3b7-413d-a296-ac8c18f09685"}
{"timestamp": "2025-12-29T13:43:53.148493+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 47}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "191e53ac-d3b7-413d-a296-ac8c18f09685"}
{"timestamp": "2025-12-29T13:43:53.148769+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "191e53ac-d3b7-413d-a296-ac8c18f09685"}
{"timestamp": "2025-12-29T13:43:53.149445+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "191e53ac-d3b7-413d-a296-ac8c18f09685"}
{"timestamp": "2025-12-29T13:43:53.149650+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "191e53ac-d3b7-413d-a296-ac8c18f09685"}
{"timestamp": "2025-12-29T13:43:53.150683+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.019s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "191e53ac-d3b7-413d-a296-ac8c18f09685"}
{"timestamp": "2025-12-29T13:43:53.151519+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "191e53ac-d3b7-413d-a296-ac8c18f09685"}
{"timestamp": "2025-12-29T13:43:55.191588+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "9a13efc9-7633-4b84-bee7-a07095f9fc2f"}
{"timestamp": "2025-12-29T13:43:55.194045+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9a13efc9-7633-4b84-bee7-a07095f9fc2f"}
{"timestamp": "2025-12-29T13:43:55.194557+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9a13efc9-7633-4b84-bee7-a07095f9fc2f"}
{"timestamp": "2025-12-29T13:43:55.194884+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.56s ago] {'name_1': 'Test Layout 1767015828.59374'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9a13efc9-7633-4b84-bee7-a07095f9fc2f"}
{"timestamp": "2025-12-29T13:43:55.197681+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9a13efc9-7633-4b84-bee7-a07095f9fc2f"}
{"timestamp": "2025-12-29T13:43:55.198225+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.56s ago] {'name': 'Test Layout 1767015828.59374', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9a13efc9-7633-4b84-bee7-a07095f9fc2f"}
{"timestamp": "2025-12-29T13:43:55.200114+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "9a13efc9-7633-4b84-bee7-a07095f9fc2f"}
{"timestamp": "2025-12-29T13:43:55.204645+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9a13efc9-7633-4b84-bee7-a07095f9fc2f"}
{"timestamp": "2025-12-29T13:43:55.205286+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9a13efc9-7633-4b84-bee7-a07095f9fc2f"}
{"timestamp": "2025-12-29T13:43:55.205633+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.55s ago] {'pk_1': 46}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9a13efc9-7633-4b84-bee7-a07095f9fc2f"}
{"timestamp": "2025-12-29T13:43:55.207578+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 46}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "9a13efc9-7633-4b84-bee7-a07095f9fc2f"}
{"timestamp": "2025-12-29T13:43:55.207833+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "9a13efc9-7633-4b84-bee7-a07095f9fc2f"}
{"timestamp": "2025-12-29T13:43:55.208804+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "9a13efc9-7633-4b84-bee7-a07095f9fc2f"}
{"timestamp": "2025-12-29T13:43:55.209099+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "9a13efc9-7633-4b84-bee7-a07095f9fc2f"}
{"timestamp": "2025-12-29T13:43:55.210143+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.019s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "9a13efc9-7633-4b84-bee7-a07095f9fc2f"}
{"timestamp": "2025-12-29T13:43:55.211097+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "9a13efc9-7633-4b84-bee7-a07095f9fc2f"}
{"timestamp": "2025-12-29T13:43:57.249057+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "ac1e5504-f90e-4c35-8fce-d5bbeee0a087"}
{"timestamp": "2025-12-29T13:43:57.251611+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ac1e5504-f90e-4c35-8fce-d5bbeee0a087"}
{"timestamp": "2025-12-29T13:43:57.252245+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac1e5504-f90e-4c35-8fce-d5bbeee0a087"}
{"timestamp": "2025-12-29T13:43:57.252651+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.55s ago] {'name_1': 'Test Screen 1767015828.59374', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac1e5504-f90e-4c35-8fce-d5bbeee0a087"}
{"timestamp": "2025-12-29T13:43:57.255297+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac1e5504-f90e-4c35-8fce-d5bbeee0a087"}
{"timestamp": "2025-12-29T13:43:57.255725+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.55s ago] {'id_1': 46, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac1e5504-f90e-4c35-8fce-d5bbeee0a087"}
{"timestamp": "2025-12-29T13:43:57.257894+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac1e5504-f90e-4c35-8fce-d5bbeee0a087"}
{"timestamp": "2025-12-29T13:43:57.258317+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.55s ago] {'name': 'Test Screen 1767015828.59374', 'capacity': 150, 'seat_layout_id': 46}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac1e5504-f90e-4c35-8fce-d5bbeee0a087"}
{"timestamp": "2025-12-29T13:43:57.260032+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "ac1e5504-f90e-4c35-8fce-d5bbeee0a087"}
{"timestamp": "2025-12-29T13:43:57.265569+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ac1e5504-f90e-4c35-8fce-d5bbeee0a087"}
{"timestamp": "2025-12-29T13:43:57.266135+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac1e5504-f90e-4c35-8fce-d5bbeee0a087"}
{"timestamp": "2025-12-29T13:43:57.266485+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.55s ago] {'pk_1': 46}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ac1e5504-f90e-4c35-8fce-d5bbeee0a087"}
{"timestamp": "2025-12-29T13:43:57.268580+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 46}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "ac1e5504-f90e-4c35-8fce-d5bbeee0a087"}
{"timestamp": "2025-12-29T13:43:57.268906+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "ac1e5504-f90e-4c35-8fce-d5bbeee0a087"}
{"timestamp": "2025-12-29T13:43:57.269791+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "ac1e5504-f90e-4c35-8fce-d5bbeee0a087"}
{"timestamp": "2025-12-29T13:43:57.270127+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "ac1e5504-f90e-4c35-8fce-d5bbeee0a087"}
{"timestamp": "2025-12-29T13:43:57.271369+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "ac1e5504-f90e-4c35-8fce-d5bbeee0a087"}
{"timestamp": "2025-12-29T13:43:57.272444+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ac1e5504-f90e-4c35-8fce-d5bbeee0a087"}
{"timestamp": "2025-12-29T13:43:59.314885+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:43:59.317954+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:43:59.318623+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:43:59.318976+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.55s ago] {'pk_1': 47}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:43:59.321594+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:43:59.322011+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.55s ago] {'pk_1': 46}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:43:59.323994+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:43:59.324383+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.55s ago] {'screen_id_1': 46, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:43:59.326338+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:43:59.326690+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.54s ago] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 47, 'screen_id': 46}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:43:59.328869+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:43:59.334165+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:43:59.334862+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:43:59.335290+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.54s ago] {'pk_1': 38}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:43:59.337724+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:43:59.338095+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.54s ago] {'pk_1': 47}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:43:59.339834+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:43:59.340334+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 86.54s ago] {'pk_1': 46}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:43:59.341999+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 38}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:43:59.342307+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:43:59.343099+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:43:59.343318+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:43:59.344317+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.030s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:43:59.345520+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2baed0a3-cdbf-4a73-ae5e-fb51497b85cc"}
{"timestamp": "2025-12-29T13:44:01.393205+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.396134+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.396779+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.397167+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 97.4s ago] {'email_1': 'test_concurrent1_1767015839.3454082@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.600695+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.600995+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 97.38s ago] {'email': 'test_concurrent1_1767015839.3454082@example.com', 'hashed_password': '$2b$12$gJa/BSIRKHFr6D9yYfMYgeRcoAnLkQNKPabO1xD9IwS3k9S7oGY9u', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.602508+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.607545+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.608426+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.609058+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 97.38s ago] {'pk_1': 77}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.611316+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 77, 'email': 'test_concurrent1_1767015839.3454082@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.611620+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.612554+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.612797+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.613054+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.614796+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.615624+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.615869+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 97.34s ago] {'user_id_1': 77, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.618087+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.618609+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 97.34s ago] {'user_id': 77, 'name': None, 'email': 'test_concurrent1_1767015839.3454082@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.620666+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.624412+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.624967+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.625366+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 97.34s ago] {'pk_1': 77}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.628136+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 77, 'user_id': 77, 'email': 'test_concurrent1_1767015839.3454082@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.628358+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.628482+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.628715+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.629666+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.630765+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.631181+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 97.64s ago] {'email_1': 'test_concurrent1_1767015839.3454082@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.835794+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 77, 'email': 'test_concurrent1_1767015839.3454082@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.836093+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.836992+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.837201+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.838224+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.445s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:01.839132+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "81dc7702-305d-486c-ac1d-70b98a6d2a00"}
{"timestamp": "2025-12-29T13:44:03.980779+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:03.983760+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:03.984522+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:03.985058+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 99.99s ago] {'email_1': 'test_concurrent2_1767015841.9391289@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.190163+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.190623+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 99.97s ago] {'email': 'test_concurrent2_1767015841.9391289@example.com', 'hashed_password': '$2b$12$CTw/Oj8YvxUy.qgJAZMqN.OSMB8u4ZIW9jgG.MtYhdWuwBCKP9J2a', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.192394+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.197094+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.197886+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.198417+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 99.97s ago] {'pk_1': 78}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.200589+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 78, 'email': 'test_concurrent2_1767015841.9391289@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.200872+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.201647+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.201843+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.201971+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.203515+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.204178+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.204501+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 99.93s ago] {'user_id_1': 78, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.206670+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.206944+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 99.93s ago] {'user_id': 78, 'name': None, 'email': 'test_concurrent2_1767015841.9391289@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.208364+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.212532+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.213010+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.213328+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 99.93s ago] {'pk_1': 78}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.215323+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 78, 'user_id': 78, 'email': 'test_concurrent2_1767015841.9391289@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.215552+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.215780+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.216108+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.217238+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.218289+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.218573+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 100.2s ago] {'email_1': 'test_concurrent2_1767015841.9391289@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.422796+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 78, 'email': 'test_concurrent2_1767015841.9391289@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.423152+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.424019+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.424289+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.425651+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.445s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:04.426592+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "df62ea47-9a9d-4f0c-bcfb-c5f019b9a5c3"}
{"timestamp": "2025-12-29T13:44:06.467918+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.470753+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.471362+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.471672+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.13s ago] {'pk_1': 77}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.474958+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.475405+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.13s ago] {'showtime_id_1': 38, 'seat_code_1': 'R9-9', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.477238+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.477556+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.13s ago] {'user_id': 77, 'showtime_id': 38, 'seat_code': 'R9-9', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 13, 44, 6, 476976, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 54, 6, 476702, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.479214+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.483595+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.484200+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.484488+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.13s ago] {'pk_1': 38}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.486495+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 38, 'user_id': 77, 'showtime_id': 38, 'seat_code': 'R9-9'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.486765+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.487607+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.487869+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.488153+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.489642+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.490136+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.490364+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.15s ago] {'showtime_id_1': 38, 'seat_code_1': 'R9-9', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.492503+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.492844+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.12s ago] {'seat_code': 'R9-9', 'showtime_id': 38, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.494907+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.495200+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.12s ago] {'status': 'LOCKED', 'locked_by_user_id': 77, 'lock_expires_at': datetime.datetime(2025, 12, 29, 13, 54, 6, 494490, tzinfo=datetime.timezone.utc), 'seat_locks_id': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.496809+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.501649+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.502779+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.503383+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.12s ago] {'pk_1': 34}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.505634+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 38, 'seat_code': 'R9-9', 'user_id': 77, 'expires_at': '2025-12-29T13:54:06.494490+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.505859+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.506028+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.506361+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.507408+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.507803+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.508177+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.508476+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 38, 'user_id': 77, 'showtime_id': 38, 'seat_code': 'R9-9'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.508793+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 38", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.510217+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.510706+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.510927+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.12s ago] {'user_id': 77, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 38}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.512844+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.516855+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.517363+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.517739+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.12s ago] {'pk_1': 38}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.520102+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 38, 'reservation_id': 38, 'user_id': 77, 'showtime_id': 38, 'seat_code': 'R9-9'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.520317+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.520441+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_order_created for order.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.520544+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_order_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.520649+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 38", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.522308+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.522939+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.523341+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.1s ago] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.525147+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 38, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.525344+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.525469+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_pricing_snapshot_created for pricing.snapshot_created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.525566+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_pricing_snapshot_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.525683+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 38, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.527024+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.527563+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.527883+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.08s ago] {'pk_1': 38}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.530445+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.530714+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.07s ago] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 38}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.532089+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.535684+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.536295+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.536727+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.14s ago] {'pk_1': 38}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.538701+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 38 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.539112+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.540206+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.540389+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 38: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.540668+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.541733+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.541931+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 38", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.542137+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.543272+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.543523+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.543626+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.545033+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.545480+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.545892+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.07s ago] {'actor_id': 77, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 38, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 38, \"user_id\": 77, \"showtime_id\": 38, \"seat_code\": \"R9-9\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 44, 6, 545292, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.547858+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.551576+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.552271+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.552678+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 89.06s ago] {'pk_1': 50}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.554587+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.555648+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.556696+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.089s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:06.557922+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "e2cf7624-e276-442a-9ea7-728fba6e6cca"}
{"timestamp": "2025-12-29T13:44:08.608322+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "d599c239-cb07-4465-b7c4-0051c08e658e"}
{"timestamp": "2025-12-29T13:44:08.612482+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d599c239-cb07-4465-b7c4-0051c08e658e"}
{"timestamp": "2025-12-29T13:44:08.613717+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d599c239-cb07-4465-b7c4-0051c08e658e"}
{"timestamp": "2025-12-29T13:44:08.614401+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 91.28s ago] {'pk_1': 78}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d599c239-cb07-4465-b7c4-0051c08e658e"}
{"timestamp": "2025-12-29T13:44:08.619031+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d599c239-cb07-4465-b7c4-0051c08e658e"}
{"timestamp": "2025-12-29T13:44:08.619688+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 91.28s ago] {'showtime_id_1': 38, 'seat_code_1': 'R9-9', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d599c239-cb07-4465-b7c4-0051c08e658e"}
{"timestamp": "2025-12-29T13:44:08.622889+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d599c239-cb07-4465-b7c4-0051c08e658e"}
{"timestamp": "2025-12-29T13:44:08.641725+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.middleware", "message": "\u2717 POST /reservations/ \u2192 FAILED (0.017s)", "module": "middleware", "function": "dispatch", "line": 83, "request_id": "d599c239-cb07-4465-b7c4-0051c08e658e", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 151, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\streams\\memory.py\", line 126, in receive\n    raise EndOfStream from None\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\middleware.py\", line 57, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    raise app_exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 390, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 291, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\concurrency.py\", line 38, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\to_thread.py\", line 56, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 2485, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 976, in run\n    result = context.run(func, *args)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\reservation\\router.py\", line 31, in create_reservation_route\n    return create_reservation(db=db, user_id=current_user.id, data=payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\reservation\\service.py\", line 53, in create_reservation\n    raise ValidationError(\n    ...<2 lines>...\n    )\napp.core.errors.ValidationError: ('Seat is locked by another user', {'seat_code': 'R9-9'})"}
{"timestamp": "2025-12-29T13:47:25.323082+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
{"timestamp": "2025-12-29T13:47:27.278250+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "\ud83c\udfac Cinema Booking System starting up...", "module": "main", "function": "startup_event", "line": 75}
{"timestamp": "2025-12-29T13:47:27.278720+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Registered routes:", "module": "main", "function": "startup_event", "line": 76}
{"timestamp": "2025-12-29T13:47:27.278960+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /openapi.json", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.279136+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.279314+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /docs/oauth2-redirect", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.279472+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  HEAD,GET   /redoc", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.279676+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/register", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.279962+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/login", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.280344+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /auth/refresh", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.280720+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.281026+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /profiles/me", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.281248+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.281461+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.281711+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.281926+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.282130+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /movies/{movie_id}/deactivate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.282334+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /movies/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.282679+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.283027+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.283373+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.283694+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.283887+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/screens/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.284172+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.284456+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.284725+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.285009+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.285330+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /screen/layouts/{layout_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.285683+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.286036+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.286333+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.286610+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/movie/{movie_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.286884+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /showtimes/screen/{screen_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.287124+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PUT        /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.287350+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /showtimes/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.287692+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/lock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.288028+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /seatavailability/unlock", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.288483+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /seatavailability/grid/{showtime_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.288850+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.289059+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.289232+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /reservations/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.289396+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.289538+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /orders/", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.289706+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.289860+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.290067+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.290224+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.290400+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /pricing/modifiers/{modifier_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.290596+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/order/{order_id}/initiate", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.290763+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /payments/{payment_attempt_id}/confirm", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.290971+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/order/{order_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.291223+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /payments/{payment_attempt_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.291407+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/{refund_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.291648+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /refunds/reservation/{reservation_id}", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.291845+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/reservations/{reservation_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.292021+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/orders/{order_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.292246+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/payments/{payment_attempt_id}/fail", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.292484+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/refunds/force", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.292623+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.292789+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  PATCH      /admin/users/{user_id}/type", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.293077+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  DELETE     /admin/users/{user_id}/profile", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.293393+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  POST       /admin/showtimes/{showtime_id}/cancel", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.293675+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.293924+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "  GET        /health", "module": "main", "function": "startup_event", "line": 81}
{"timestamp": "2025-12-29T13:47:27.294159+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "All event handlers registered", "module": "main", "function": "startup_event", "line": 83}
{"timestamp": "2025-12-29T13:47:27.294451+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "System ready to accept requests", "module": "main", "function": "startup_event", "line": 84}
{"timestamp": "2025-12-29T13:47:42.316420+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.374254+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.374577+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.377098+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.377397+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.379527+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.379873+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.382277+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.385143+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.385523+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'email_1': 'test_admin_1767016060.2661738@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.388992+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "detected 'bcrypt' backend, version '4.0.1'", "module": "bcrypt", "function": "_load_backend_mixin", "line": 625, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.389430+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "passlib.handlers.bcrypt", "message": "'bcrypt' backend lacks $2$ support, enabling workaround", "module": "bcrypt", "function": "_finalize_backend_mixin", "line": 406, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.610776+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.611232+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00079s] {'email': 'test_admin_1767016060.2661738@example.com', 'hashed_password': '$2b$12$TVHBgld34jBGZDJAfb.mV.jvFmIHWk8W5MHAdkTCJhJxRyXzQMlAq', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.613423+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.619080+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.620521+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.620899+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00063s] {'pk_1': 79}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.623145+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 79, 'email': 'test_admin_1767016060.2661738@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.623564+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.624331+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.624571+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.624743+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.647396+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.649189+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.649495+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'user_id_1': 79, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.653393+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.653866+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'user_id': 79, 'name': None, 'email': 'test_admin_1767016060.2661738@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.656795+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.661377+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.662551+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.662965+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00057s] {'pk_1': 79}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.665026+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 79, 'user_id': 79, 'email': 'test_admin_1767016060.2661738@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.665338+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.665530+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.665808+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.667194+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.668749+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.669182+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2842s ago] {'email_1': 'test_admin_1767016060.2661738@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.879873+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 79, 'email': 'test_admin_1767016060.2661738@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.880186+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.880956+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.881184+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.882620+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.566s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:42.883560+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "dc1f20e1-a25d-4e83-b385-ae9f16e42d94"}
{"timestamp": "2025-12-29T13:47:44.969476+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "4afbe663-59d9-4569-8e16-543f107a5bd8"}
{"timestamp": "2025-12-29T13:47:44.972628+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "4afbe663-59d9-4569-8e16-543f107a5bd8"}
{"timestamp": "2025-12-29T13:47:44.974151+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4afbe663-59d9-4569-8e16-543f107a5bd8"}
{"timestamp": "2025-12-29T13:47:44.974525+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'title_1': 'Test Movie 1767016060.2661738'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4afbe663-59d9-4569-8e16-543f107a5bd8"}
{"timestamp": "2025-12-29T13:47:44.978371+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4afbe663-59d9-4569-8e16-543f107a5bd8"}
{"timestamp": "2025-12-29T13:47:44.978849+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'title': 'Test Movie 1767016060.2661738', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4afbe663-59d9-4569-8e16-543f107a5bd8"}
{"timestamp": "2025-12-29T13:47:44.981150+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "4afbe663-59d9-4569-8e16-543f107a5bd8"}
{"timestamp": "2025-12-29T13:47:44.986992+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "4afbe663-59d9-4569-8e16-543f107a5bd8"}
{"timestamp": "2025-12-29T13:47:44.988302+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4afbe663-59d9-4569-8e16-543f107a5bd8"}
{"timestamp": "2025-12-29T13:47:44.988695+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00066s] {'pk_1': 48}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "4afbe663-59d9-4569-8e16-543f107a5bd8"}
{"timestamp": "2025-12-29T13:47:44.991098+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 48}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "4afbe663-59d9-4569-8e16-543f107a5bd8"}
{"timestamp": "2025-12-29T13:47:44.991444+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "4afbe663-59d9-4569-8e16-543f107a5bd8"}
{"timestamp": "2025-12-29T13:47:44.992287+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "4afbe663-59d9-4569-8e16-543f107a5bd8"}
{"timestamp": "2025-12-29T13:47:44.992485+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "4afbe663-59d9-4569-8e16-543f107a5bd8"}
{"timestamp": "2025-12-29T13:47:44.993983+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.025s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "4afbe663-59d9-4569-8e16-543f107a5bd8"}
{"timestamp": "2025-12-29T13:47:44.994862+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "4afbe663-59d9-4569-8e16-543f107a5bd8"}
{"timestamp": "2025-12-29T13:47:47.044412+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "af65c9cf-9e87-4e11-8289-14e1b794a3a7"}
{"timestamp": "2025-12-29T13:47:47.047225+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "af65c9cf-9e87-4e11-8289-14e1b794a3a7"}
{"timestamp": "2025-12-29T13:47:47.048395+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "af65c9cf-9e87-4e11-8289-14e1b794a3a7"}
{"timestamp": "2025-12-29T13:47:47.048744+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'name_1': 'Test Layout 1767016060.2661738'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "af65c9cf-9e87-4e11-8289-14e1b794a3a7"}
{"timestamp": "2025-12-29T13:47:47.052024+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "af65c9cf-9e87-4e11-8289-14e1b794a3a7"}
{"timestamp": "2025-12-29T13:47:47.052441+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'name': 'Test Layout 1767016060.2661738', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "af65c9cf-9e87-4e11-8289-14e1b794a3a7"}
{"timestamp": "2025-12-29T13:47:47.054628+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "af65c9cf-9e87-4e11-8289-14e1b794a3a7"}
{"timestamp": "2025-12-29T13:47:47.059445+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "af65c9cf-9e87-4e11-8289-14e1b794a3a7"}
{"timestamp": "2025-12-29T13:47:47.060586+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "af65c9cf-9e87-4e11-8289-14e1b794a3a7"}
{"timestamp": "2025-12-29T13:47:47.061091+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] {'pk_1': 47}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "af65c9cf-9e87-4e11-8289-14e1b794a3a7"}
{"timestamp": "2025-12-29T13:47:47.063424+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 47}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "af65c9cf-9e87-4e11-8289-14e1b794a3a7"}
{"timestamp": "2025-12-29T13:47:47.063705+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "af65c9cf-9e87-4e11-8289-14e1b794a3a7"}
{"timestamp": "2025-12-29T13:47:47.064510+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "af65c9cf-9e87-4e11-8289-14e1b794a3a7"}
{"timestamp": "2025-12-29T13:47:47.064728+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "af65c9cf-9e87-4e11-8289-14e1b794a3a7"}
{"timestamp": "2025-12-29T13:47:47.065864+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "af65c9cf-9e87-4e11-8289-14e1b794a3a7"}
{"timestamp": "2025-12-29T13:47:47.066595+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "af65c9cf-9e87-4e11-8289-14e1b794a3a7"}
{"timestamp": "2025-12-29T13:47:49.103401+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "f72ae6dd-2bdf-48fc-9b97-8d04fe5cc9fc"}
{"timestamp": "2025-12-29T13:47:49.106111+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f72ae6dd-2bdf-48fc-9b97-8d04fe5cc9fc"}
{"timestamp": "2025-12-29T13:47:49.107306+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f72ae6dd-2bdf-48fc-9b97-8d04fe5cc9fc"}
{"timestamp": "2025-12-29T13:47:49.107685+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'name_1': 'Test Screen 1767016060.2661738', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f72ae6dd-2bdf-48fc-9b97-8d04fe5cc9fc"}
{"timestamp": "2025-12-29T13:47:49.110719+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f72ae6dd-2bdf-48fc-9b97-8d04fe5cc9fc"}
{"timestamp": "2025-12-29T13:47:49.111080+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'id_1': 47, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f72ae6dd-2bdf-48fc-9b97-8d04fe5cc9fc"}
{"timestamp": "2025-12-29T13:47:49.117659+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f72ae6dd-2bdf-48fc-9b97-8d04fe5cc9fc"}
{"timestamp": "2025-12-29T13:47:49.118231+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00077s] {'name': 'Test Screen 1767016060.2661738', 'capacity': 150, 'seat_layout_id': 47}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f72ae6dd-2bdf-48fc-9b97-8d04fe5cc9fc"}
{"timestamp": "2025-12-29T13:47:49.120940+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "f72ae6dd-2bdf-48fc-9b97-8d04fe5cc9fc"}
{"timestamp": "2025-12-29T13:47:49.126165+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "f72ae6dd-2bdf-48fc-9b97-8d04fe5cc9fc"}
{"timestamp": "2025-12-29T13:47:49.127111+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f72ae6dd-2bdf-48fc-9b97-8d04fe5cc9fc"}
{"timestamp": "2025-12-29T13:47:49.127544+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00051s] {'pk_1': 47}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "f72ae6dd-2bdf-48fc-9b97-8d04fe5cc9fc"}
{"timestamp": "2025-12-29T13:47:49.129711+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 47}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "f72ae6dd-2bdf-48fc-9b97-8d04fe5cc9fc"}
{"timestamp": "2025-12-29T13:47:49.129987+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "f72ae6dd-2bdf-48fc-9b97-8d04fe5cc9fc"}
{"timestamp": "2025-12-29T13:47:49.130679+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "f72ae6dd-2bdf-48fc-9b97-8d04fe5cc9fc"}
{"timestamp": "2025-12-29T13:47:49.130878+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "f72ae6dd-2bdf-48fc-9b97-8d04fe5cc9fc"}
{"timestamp": "2025-12-29T13:47:49.132005+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.029s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "f72ae6dd-2bdf-48fc-9b97-8d04fe5cc9fc"}
{"timestamp": "2025-12-29T13:47:49.133111+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "f72ae6dd-2bdf-48fc-9b97-8d04fe5cc9fc"}
{"timestamp": "2025-12-29T13:47:51.183499+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:51.186253+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:51.187376+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:51.187796+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'pk_1': 48}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:51.190801+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:51.191187+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'pk_1': 47}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:51.194380+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:51.194825+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'screen_id_1': 47, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:51.197953+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:51.198525+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00071s] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 48, 'screen_id': 47}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:51.200796+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:51.206332+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:51.207383+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:51.207785+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'pk_1': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:51.211163+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:51.211554+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] {'pk_1': 48}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:51.214021+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:51.214472+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00067s] {'pk_1': 47}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:51.216110+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 39}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:51.216442+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:51.217187+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:51.217400+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:51.218703+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.035s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:51.219663+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b83f56f9-d766-457b-9489-3dd428d5fb07"}
{"timestamp": "2025-12-29T13:47:53.268291+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.270983+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.271566+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.271946+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.89s ago] {'email_1': 'test_booking_1767016071.219718@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.477703+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.478163+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.87s ago] {'email': 'test_booking_1767016071.219718@example.com', 'hashed_password': '$2b$12$ZalVO2pa00sftpbmfKVcbuqiEBdv1VMBnjuqnO.K9yTrtYaOMS.iy', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.480076+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.485127+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.485751+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.486144+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.87s ago] {'pk_1': 80}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.488267+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 80, 'email': 'test_booking_1767016071.219718@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.488593+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.489351+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.489565+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.489699+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.491192+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.491849+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.492238+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.84s ago] {'user_id_1': 80, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.494653+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.494943+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.84s ago] {'user_id': 80, 'name': None, 'email': 'test_booking_1767016071.219718@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.496429+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.500277+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.500812+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.501211+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 10.84s ago] {'pk_1': 80}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.503474+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 80, 'user_id': 80, 'email': 'test_booking_1767016071.219718@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.503893+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.504068+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.504345+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.505327+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.506460+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.506824+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 11.12s ago] {'email_1': 'test_booking_1767016071.219718@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.711864+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 80, 'email': 'test_booking_1767016071.219718@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.712202+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.713004+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.713250+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.714310+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.446s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:53.715515+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "47dd980b-35f6-480f-93da-44ea4d4d7ecf"}
{"timestamp": "2025-12-29T13:47:55.755367+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.758508+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.759552+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.759928+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'pk_1': 80}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.764259+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.764675+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'showtime_id_1': 39, 'seat_code_1': 'R5-5', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.767843+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.768212+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'user_id': 80, 'showtime_id': 39, 'seat_code': 'R5-5', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 13, 47, 55, 767540, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 57, 55, 766689, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.770632+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.776841+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.778209+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.778602+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'pk_1': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.781512+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 39, 'user_id': 80, 'showtime_id': 39, 'seat_code': 'R5-5'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.781801+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.782825+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.783199+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.783568+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.785760+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.786589+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.786919+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.02284s ago] {'showtime_id_1': 39, 'seat_code_1': 'R5-5', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.789670+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.790172+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'seat_code': 'R5-5', 'showtime_id': 39, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.793767+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.794116+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'status': 'LOCKED', 'locked_by_user_id': 80, 'lock_expires_at': datetime.datetime(2025, 12, 29, 13, 57, 55, 792444, tzinfo=datetime.timezone.utc), 'seat_locks_id': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.795878+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.800775+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.801726+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.802213+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'pk_1': 35}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.804755+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 39, 'seat_code': 'R5-5', 'user_id': 80, 'expires_at': '2025-12-29T13:57:55.792444+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.805026+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.805213+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.805557+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.806845+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.807163+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.807381+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.807560+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 39, 'user_id': 80, 'showtime_id': 39, 'seat_code': 'R5-5'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.807809+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 39", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.809402+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.810496+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.810821+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00038s] {'user_id': 80, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.814342+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.818781+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.819929+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.820386+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'pk_1': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.822774+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 39, 'reservation_id': 39, 'user_id': 80, 'showtime_id': 39, 'seat_code': 'R5-5'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.822987+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.823150+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_order_created for order.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.823380+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_order_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.823684+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 39", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.857522+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.859251+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.859725+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.863378+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 39, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.863837+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.864135+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_pricing_snapshot_created for pricing.snapshot_created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.864377+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_pricing_snapshot_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.864661+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 39, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.888415+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.889488+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.889901+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00053s] {'pk_1': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.893593+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.894011+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.896012+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.900453+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.900989+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.901313+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.08147s ago] {'pk_1': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.903580+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 39 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.903972+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.905135+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.905344+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 39: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.905640+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.906700+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.906906+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 39", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.907195+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.908351+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.908518+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.908623+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.910148+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.911331+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.911656+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00043s] {'actor_id': 80, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 39, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 39, \"user_id\": 80, \"showtime_id\": 39, \"seat_code\": \"R5-5\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 47, 55, 911047, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.914274+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.918463+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.919852+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.920235+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] {'pk_1': 51}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.922486+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.923619+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.925178+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.170s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:55.926141+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "cd19f50a-82fd-4637-b4b0-69754d37d115"}
{"timestamp": "2025-12-29T13:47:57.964117+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b79836e2-1113-4a03-909c-8615b096a7c6"}
{"timestamp": "2025-12-29T13:47:57.966845+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b79836e2-1113-4a03-909c-8615b096a7c6"}
{"timestamp": "2025-12-29T13:47:57.967510+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b79836e2-1113-4a03-909c-8615b096a7c6"}
{"timestamp": "2025-12-29T13:47:57.967874+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 2.208s ago] {'pk_1': 80}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b79836e2-1113-4a03-909c-8615b096a7c6"}
{"timestamp": "2025-12-29T13:47:57.971129+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b79836e2-1113-4a03-909c-8615b096a7c6"}
{"timestamp": "2025-12-29T13:47:57.971558+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00066s] {'user_id_1': 80}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b79836e2-1113-4a03-909c-8615b096a7c6"}
{"timestamp": "2025-12-29T13:47:57.973977+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.010s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b79836e2-1113-4a03-909c-8615b096a7c6"}
{"timestamp": "2025-12-29T13:47:57.974807+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b79836e2-1113-4a03-909c-8615b096a7c6"}
{"timestamp": "2025-12-29T13:48:00.024844+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/order/39/initiate", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "51f8ba9a-7687-40e6-94b3-18639be5fc21"}
{"timestamp": "2025-12-29T13:48:00.027442+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "51f8ba9a-7687-40e6-94b3-18639be5fc21"}
{"timestamp": "2025-12-29T13:48:00.028034+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f8ba9a-7687-40e6-94b3-18639be5fc21"}
{"timestamp": "2025-12-29T13:48:00.028359+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.269s ago] {'pk_1': 80}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f8ba9a-7687-40e6-94b3-18639be5fc21"}
{"timestamp": "2025-12-29T13:48:00.031764+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f8ba9a-7687-40e6-94b3-18639be5fc21"}
{"timestamp": "2025-12-29T13:48:00.032150+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 4.143s ago] {'pk_1': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f8ba9a-7687-40e6-94b3-18639be5fc21"}
{"timestamp": "2025-12-29T13:48:00.035013+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO payment_attempts (order_id, amount_attempted, status, final_amount, failure_reason, provider_payment_id, created_at) VALUES (%(order_id)s, %(amount_attempted)s, %(status)s, %(final_amount)s, %(failure_reason)s, %(provider_payment_id)s, %(created_at)s) RETURNING payment_attempts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f8ba9a-7687-40e6-94b3-18639be5fc21"}
{"timestamp": "2025-12-29T13:48:00.035459+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'order_id': 39, 'amount_attempted': 1000, 'status': 'PENDING', 'final_amount': 1000, 'failure_reason': None, 'provider_payment_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 48, 0, 34599, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f8ba9a-7687-40e6-94b3-18639be5fc21"}
{"timestamp": "2025-12-29T13:48:00.037808+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "51f8ba9a-7687-40e6-94b3-18639be5fc21"}
{"timestamp": "2025-12-29T13:48:00.043417+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "51f8ba9a-7687-40e6-94b3-18639be5fc21"}
{"timestamp": "2025-12-29T13:48:00.044713+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f8ba9a-7687-40e6-94b3-18639be5fc21"}
{"timestamp": "2025-12-29T13:48:00.045323+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00062s] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f8ba9a-7687-40e6-94b3-18639be5fc21"}
{"timestamp": "2025-12-29T13:48:00.048904+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f8ba9a-7687-40e6-94b3-18639be5fc21"}
{"timestamp": "2025-12-29T13:48:00.049224+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] {'pk_1': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51f8ba9a-7687-40e6-94b3-18639be5fc21"}
{"timestamp": "2025-12-29T13:48:00.051335+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.pending with payload: {'payment_attempt_id': 25, 'order_id': 39, 'amount_attempted': 1000, 'final_amount': 1000, 'user_id': 80}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "51f8ba9a-7687-40e6-94b3-18639be5fc21"}
{"timestamp": "2025-12-29T13:48:00.051638+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "51f8ba9a-7687-40e6-94b3-18639be5fc21"}
{"timestamp": "2025-12-29T13:48:00.052327+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.pending to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "51f8ba9a-7687-40e6-94b3-18639be5fc21"}
{"timestamp": "2025-12-29T13:48:00.052531+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: payment.pending", "module": "event_bus", "function": "publish", "line": 31, "request_id": "51f8ba9a-7687-40e6-94b3-18639be5fc21"}
{"timestamp": "2025-12-29T13:48:00.053651+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/order/39/initiate \u2192 200 (0.029s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "51f8ba9a-7687-40e6-94b3-18639be5fc21"}
{"timestamp": "2025-12-29T13:48:00.054473+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "51f8ba9a-7687-40e6-94b3-18639be5fc21"}
{"timestamp": "2025-12-29T13:48:02.099788+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/25/confirm", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.102308+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.102920+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.103668+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.344s ago] {'pk_1': 80}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.107129+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id AS payment_attempts_id, payment_attempts.order_id AS payment_attempts_order_id, payment_attempts.amount_attempted AS payment_attempts_amount_attempted, payment_attempts.status AS payment_attempts_status, payment_attempts.final_amount AS payment_attempts_final_amount, payment_attempts.failure_reason AS payment_attempts_failure_reason, payment_attempts.provider_payment_id AS payment_attempts_provider_payment_id, payment_attempts.created_at AS payment_attempts_created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.107518+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.110413+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.110790+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] {'pk_1': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.113248+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE payment_attempts SET status=%(status)s, provider_payment_id=%(provider_payment_id)s WHERE payment_attempts.id = %(payment_attempts_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.113645+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00052s] {'status': 'SUCCEEDED', 'provider_payment_id': 'mock_payment_25', 'payment_attempts_id': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.115681+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.119897+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.120733+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.121237+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 2.077s ago] {'pk_1': 25}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.124057+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.124415+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 2.076s ago] {'pk_1': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.125924+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.succeeded with payload: {'payment_attempt_id': 25, 'order_id': 39, 'final_amount': 1000.0, 'user_id': 80}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.126210+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.127301+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.succeeded to 4 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.127595+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_payment_succeeded for payment.succeeded", "module": "event_bus", "function": "publish", "line": 36, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.127865+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_payment_succeeded", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.128144+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.128319+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_payment_succeeded for payment.succeeded", "module": "event_bus", "function": "publish", "line": 36, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.128423+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_payment_succeeded", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.129838+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.130309+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.130572+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.241s ago] {'pk_1': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.133208+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET is_completed=%(is_completed)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.133862+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] {'is_completed': True, 'orders_id': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.135753+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.140031+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.140996+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.141482+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.322s ago] {'pk_1': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.143691+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.completed with payload: {'order_id': 39}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.144007+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.completed to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.144235+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: order.completed", "module": "event_bus", "function": "publish", "line": 31, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.144500+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.145803+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.146007+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_payment_succeeded for payment.succeeded", "module": "event_bus", "function": "publish", "line": 36, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.146111+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_payment_succeeded", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.147870+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.148368+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.148638+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 19.5s ago] {'user_id_1': 80, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.151380+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.152763+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.152955+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_payment_succeeded for payment.succeeded", "module": "event_bus", "function": "publish", "line": 36, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.153059+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_payment_succeeded", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.154437+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.154943+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.155299+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.244s ago] {'actor_id': 80, 'actor_type': 'user', 'action': 'payment.succeeded', 'target_id': 39, 'target_type': 'order', 'payload': '{\"payment_attempt_id\": 25, \"order_id\": 39, \"final_amount\": 1000.0, \"user_id\": 80}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 48, 2, 154698, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.157735+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.161928+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.162437+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.162711+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.243s ago] {'pk_1': 52}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.164478+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.165611+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.166721+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/25/confirm \u2192 200 (0.067s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:02.167494+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0f8f7035-5a12-4d28-a268-c58ad4f3013e"}
{"timestamp": "2025-12-29T13:48:04.206089+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "5d9fd51e-ce78-42d5-bb83-f9ffc6a96106"}
{"timestamp": "2025-12-29T13:48:04.208533+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "5d9fd51e-ce78-42d5-bb83-f9ffc6a96106"}
{"timestamp": "2025-12-29T13:48:04.209139+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5d9fd51e-ce78-42d5-bb83-f9ffc6a96106"}
{"timestamp": "2025-12-29T13:48:04.209507+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 8.45s ago] {'pk_1': 80}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5d9fd51e-ce78-42d5-bb83-f9ffc6a96106"}
{"timestamp": "2025-12-29T13:48:04.212400+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5d9fd51e-ce78-42d5-bb83-f9ffc6a96106"}
{"timestamp": "2025-12-29T13:48:04.212809+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.242s ago] {'user_id_1': 80}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5d9fd51e-ce78-42d5-bb83-f9ffc6a96106"}
{"timestamp": "2025-12-29T13:48:04.215275+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.009s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "5d9fd51e-ce78-42d5-bb83-f9ffc6a96106"}
{"timestamp": "2025-12-29T13:48:04.216137+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "5d9fd51e-ce78-42d5-bb83-f9ffc6a96106"}
{"timestamp": "2025-12-29T13:48:06.261276+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.263930+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.264494+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.264799+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.88s ago] {'email_1': 'test_admin_1767016084.2167208@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.470029+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.470505+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.86s ago] {'email': 'test_admin_1767016084.2167208@example.com', 'hashed_password': '$2b$12$W7vfZaAROgZbTVeDlgybz.gAMQNsQBcZ1YGlov9H2dvkF.nr/6RGq', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.472193+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.476116+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.476692+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.477121+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.86s ago] {'pk_1': 81}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.479947+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 81, 'email': 'test_admin_1767016084.2167208@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.480703+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.481680+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.481889+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.482083+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.483885+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.484441+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.484758+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.84s ago] {'user_id_1': 81, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.487110+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.487467+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.83s ago] {'user_id': 81, 'name': None, 'email': 'test_admin_1767016084.2167208@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.489324+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.493280+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.494176+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.494894+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.83s ago] {'pk_1': 81}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.497631+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 81, 'user_id': 81, 'email': 'test_admin_1767016084.2167208@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.497852+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.498024+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.498309+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.499746+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.501269+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.501809+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 24.12s ago] {'email_1': 'test_admin_1767016084.2167208@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.705820+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 81, 'email': 'test_admin_1767016084.2167208@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.706140+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.706951+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.707175+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.708259+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.447s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:06.709042+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0b998d92-3c6b-447b-8a84-481f6c16d162"}
{"timestamp": "2025-12-29T13:48:08.792688+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "c1b8b4bf-cc69-496e-a5e1-7a19f9195c8a"}
{"timestamp": "2025-12-29T13:48:08.795289+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c1b8b4bf-cc69-496e-a5e1-7a19f9195c8a"}
{"timestamp": "2025-12-29T13:48:08.795860+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1b8b4bf-cc69-496e-a5e1-7a19f9195c8a"}
{"timestamp": "2025-12-29T13:48:08.796239+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.82s ago] {'title_1': 'Test Movie 1767016084.2167208'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1b8b4bf-cc69-496e-a5e1-7a19f9195c8a"}
{"timestamp": "2025-12-29T13:48:08.799037+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1b8b4bf-cc69-496e-a5e1-7a19f9195c8a"}
{"timestamp": "2025-12-29T13:48:08.799450+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.82s ago] {'title': 'Test Movie 1767016084.2167208', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1b8b4bf-cc69-496e-a5e1-7a19f9195c8a"}
{"timestamp": "2025-12-29T13:48:08.801377+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "c1b8b4bf-cc69-496e-a5e1-7a19f9195c8a"}
{"timestamp": "2025-12-29T13:48:08.807029+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c1b8b4bf-cc69-496e-a5e1-7a19f9195c8a"}
{"timestamp": "2025-12-29T13:48:08.808060+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1b8b4bf-cc69-496e-a5e1-7a19f9195c8a"}
{"timestamp": "2025-12-29T13:48:08.808695+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.82s ago] {'pk_1': 49}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c1b8b4bf-cc69-496e-a5e1-7a19f9195c8a"}
{"timestamp": "2025-12-29T13:48:08.811122+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 49}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "c1b8b4bf-cc69-496e-a5e1-7a19f9195c8a"}
{"timestamp": "2025-12-29T13:48:08.811453+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "c1b8b4bf-cc69-496e-a5e1-7a19f9195c8a"}
{"timestamp": "2025-12-29T13:48:08.812235+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "c1b8b4bf-cc69-496e-a5e1-7a19f9195c8a"}
{"timestamp": "2025-12-29T13:48:08.812507+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "c1b8b4bf-cc69-496e-a5e1-7a19f9195c8a"}
{"timestamp": "2025-12-29T13:48:08.813780+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.021s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "c1b8b4bf-cc69-496e-a5e1-7a19f9195c8a"}
{"timestamp": "2025-12-29T13:48:08.814816+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c1b8b4bf-cc69-496e-a5e1-7a19f9195c8a"}
{"timestamp": "2025-12-29T13:48:10.855440+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "1f367c61-37e1-4627-92f0-140b2e8781f1"}
{"timestamp": "2025-12-29T13:48:10.858109+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1f367c61-37e1-4627-92f0-140b2e8781f1"}
{"timestamp": "2025-12-29T13:48:10.858704+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1f367c61-37e1-4627-92f0-140b2e8781f1"}
{"timestamp": "2025-12-29T13:48:10.859057+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.81s ago] {'name_1': 'Test Layout 1767016084.2167208'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1f367c61-37e1-4627-92f0-140b2e8781f1"}
{"timestamp": "2025-12-29T13:48:10.861751+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1f367c61-37e1-4627-92f0-140b2e8781f1"}
{"timestamp": "2025-12-29T13:48:10.862056+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.81s ago] {'name': 'Test Layout 1767016084.2167208', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1f367c61-37e1-4627-92f0-140b2e8781f1"}
{"timestamp": "2025-12-29T13:48:10.864049+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "1f367c61-37e1-4627-92f0-140b2e8781f1"}
{"timestamp": "2025-12-29T13:48:10.869223+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1f367c61-37e1-4627-92f0-140b2e8781f1"}
{"timestamp": "2025-12-29T13:48:10.869956+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1f367c61-37e1-4627-92f0-140b2e8781f1"}
{"timestamp": "2025-12-29T13:48:10.870459+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.81s ago] {'pk_1': 48}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1f367c61-37e1-4627-92f0-140b2e8781f1"}
{"timestamp": "2025-12-29T13:48:10.872795+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 48}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "1f367c61-37e1-4627-92f0-140b2e8781f1"}
{"timestamp": "2025-12-29T13:48:10.873052+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "1f367c61-37e1-4627-92f0-140b2e8781f1"}
{"timestamp": "2025-12-29T13:48:10.873743+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "1f367c61-37e1-4627-92f0-140b2e8781f1"}
{"timestamp": "2025-12-29T13:48:10.873978+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "1f367c61-37e1-4627-92f0-140b2e8781f1"}
{"timestamp": "2025-12-29T13:48:10.875150+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.020s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "1f367c61-37e1-4627-92f0-140b2e8781f1"}
{"timestamp": "2025-12-29T13:48:10.876071+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "1f367c61-37e1-4627-92f0-140b2e8781f1"}
{"timestamp": "2025-12-29T13:48:12.921051+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "02ede9a8-6c9d-4e04-8455-575651915747"}
{"timestamp": "2025-12-29T13:48:12.923687+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "02ede9a8-6c9d-4e04-8455-575651915747"}
{"timestamp": "2025-12-29T13:48:12.924282+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "02ede9a8-6c9d-4e04-8455-575651915747"}
{"timestamp": "2025-12-29T13:48:12.924632+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.82s ago] {'name_1': 'Test Screen 1767016084.2167208', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "02ede9a8-6c9d-4e04-8455-575651915747"}
{"timestamp": "2025-12-29T13:48:12.927566+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "02ede9a8-6c9d-4e04-8455-575651915747"}
{"timestamp": "2025-12-29T13:48:12.927983+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.82s ago] {'id_1': 48, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "02ede9a8-6c9d-4e04-8455-575651915747"}
{"timestamp": "2025-12-29T13:48:12.930239+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "02ede9a8-6c9d-4e04-8455-575651915747"}
{"timestamp": "2025-12-29T13:48:12.930604+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.81s ago] {'name': 'Test Screen 1767016084.2167208', 'capacity': 150, 'seat_layout_id': 48}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "02ede9a8-6c9d-4e04-8455-575651915747"}
{"timestamp": "2025-12-29T13:48:12.932429+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "02ede9a8-6c9d-4e04-8455-575651915747"}
{"timestamp": "2025-12-29T13:48:12.937586+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "02ede9a8-6c9d-4e04-8455-575651915747"}
{"timestamp": "2025-12-29T13:48:12.938145+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "02ede9a8-6c9d-4e04-8455-575651915747"}
{"timestamp": "2025-12-29T13:48:12.938480+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.81s ago] {'pk_1': 48}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "02ede9a8-6c9d-4e04-8455-575651915747"}
{"timestamp": "2025-12-29T13:48:12.940683+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 48}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "02ede9a8-6c9d-4e04-8455-575651915747"}
{"timestamp": "2025-12-29T13:48:12.940944+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "02ede9a8-6c9d-4e04-8455-575651915747"}
{"timestamp": "2025-12-29T13:48:12.941902+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "02ede9a8-6c9d-4e04-8455-575651915747"}
{"timestamp": "2025-12-29T13:48:12.942185+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "02ede9a8-6c9d-4e04-8455-575651915747"}
{"timestamp": "2025-12-29T13:48:12.943178+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "02ede9a8-6c9d-4e04-8455-575651915747"}
{"timestamp": "2025-12-29T13:48:12.944015+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "02ede9a8-6c9d-4e04-8455-575651915747"}
{"timestamp": "2025-12-29T13:48:14.979531+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:14.982507+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:14.983143+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:14.983498+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.8s ago] {'pk_1': 49}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:14.986149+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:14.986503+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.8s ago] {'pk_1': 48}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:14.988626+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:14.989117+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.8s ago] {'screen_id_1': 48, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:14.991156+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:14.991601+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 49, 'screen_id': 48}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:14.993922+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:14.998954+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:14.999539+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:14.999851+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:15.002545+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:15.002913+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'pk_1': 49}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:15.005275+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:15.005736+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'pk_1': 48}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:15.007445+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 40}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:15.007712+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:15.008394+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:15.008592+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:15.009797+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.030s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:15.011035+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6f233f04-8d08-4ebd-b7e6-13ff5d496cfa"}
{"timestamp": "2025-12-29T13:48:17.060059+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.062796+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.063435+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.063794+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.68s ago] {'email_1': 'test_cancel_1767016095.010865@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.268266+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.268756+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.66s ago] {'email': 'test_cancel_1767016095.010865@example.com', 'hashed_password': '$2b$12$DdG9pulcHD9KoDR8Tlbh0OoEm1ZKhT9q7Zim.Fam2W2m2tYaIGz/C', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.270457+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.275581+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.276353+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.276808+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.66s ago] {'pk_1': 82}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.278883+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 82, 'email': 'test_cancel_1767016095.010865@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.279156+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.279908+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.280220+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.280457+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.282357+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.282981+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.283291+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.63s ago] {'user_id_1': 82, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.285492+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.285831+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.63s ago] {'user_id': 82, 'name': None, 'email': 'test_cancel_1767016095.010865@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.287804+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.291731+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.292338+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.292655+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.63s ago] {'pk_1': 82}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.295037+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 82, 'user_id': 82, 'email': 'test_cancel_1767016095.010865@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.295219+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.295341+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.295578+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.296493+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.297626+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.297961+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.91s ago] {'email_1': 'test_cancel_1767016095.010865@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.502686+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 82, 'email': 'test_cancel_1767016095.010865@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.502974+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.503711+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.503903+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.504846+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.445s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:17.505749+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "0ba4bf2c-c1e9-470a-a91a-b3a7926e5cb0"}
{"timestamp": "2025-12-29T13:48:19.556548+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.559305+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.559936+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.560311+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.8s ago] {'pk_1': 82}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.563156+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.563560+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.8s ago] {'showtime_id_1': 40, 'seat_code_1': 'R6-6', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.565980+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.566349+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.8s ago] {'user_id': 82, 'showtime_id': 40, 'seat_code': 'R6-6', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 13, 48, 19, 565634, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 58, 19, 565369, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.568480+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.574178+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.574716+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.575013+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.8s ago] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.577059+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 40, 'user_id': 82, 'showtime_id': 40, 'seat_code': 'R6-6'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.577326+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.577975+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.578177+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.578310+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.580013+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.580674+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.580986+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.82s ago] {'showtime_id_1': 40, 'seat_code_1': 'R6-6', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.583427+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.583731+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'seat_code': 'R6-6', 'showtime_id': 40, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.585681+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.586216+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'status': 'LOCKED', 'locked_by_user_id': 82, 'lock_expires_at': datetime.datetime(2025, 12, 29, 13, 58, 19, 585269, tzinfo=datetime.timezone.utc), 'seat_locks_id': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.587897+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.591383+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.591935+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.592322+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'pk_1': 36}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.594456+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 40, 'seat_code': 'R6-6', 'user_id': 82, 'expires_at': '2025-12-29T13:58:19.585269+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.594675+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.594831+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.595190+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.596152+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.596330+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.596529+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.596660+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 40, 'user_id': 82, 'showtime_id': 40, 'seat_code': 'R6-6'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.596813+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 40", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.598098+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.598682+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.599087+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'user_id': 82, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.601614+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.605362+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.606061+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.606403+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.79s ago] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.608621+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 40, 'reservation_id': 40, 'user_id': 82, 'showtime_id': 40, 'seat_code': 'R6-6'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.608810+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.608943+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_order_created for order.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.609046+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_order_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.609193+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 40", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.610460+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.610974+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.611326+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.75s ago] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.613448+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 40, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.613749+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.613971+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_pricing_snapshot_created for pricing.snapshot_created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.614085+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_pricing_snapshot_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.614216+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 40, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.615489+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.615974+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.616303+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.73s ago] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.618813+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.619091+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.73s ago] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.620534+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.624248+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.624923+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.625406+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.81s ago] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.627136+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 40 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.627476+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.628581+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.628774+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 40: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.629001+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.630133+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.630353+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 40", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.630641+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.631674+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.631852+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.631955+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.633251+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.633803+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.634464+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.72s ago] {'actor_id': 82, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 40, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 40, \"user_id\": 82, \"showtime_id\": 40, \"seat_code\": \"R6-6\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 48, 19, 633520, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.636558+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.640193+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.640823+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.641446+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.72s ago] {'pk_1': 53}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.643627+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.644622+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.645816+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.089s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:19.646744+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "67d3ad89-4f73-4d51-82c7-252cf73e07a9"}
{"timestamp": "2025-12-29T13:48:21.699506+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "e8a1a2cb-71c9-45c1-aacd-7d24a4f8354d"}
{"timestamp": "2025-12-29T13:48:21.701915+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "e8a1a2cb-71c9-45c1-aacd-7d24a4f8354d"}
{"timestamp": "2025-12-29T13:48:21.702510+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e8a1a2cb-71c9-45c1-aacd-7d24a4f8354d"}
{"timestamp": "2025-12-29T13:48:21.702877+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 25.94s ago] {'pk_1': 82}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e8a1a2cb-71c9-45c1-aacd-7d24a4f8354d"}
{"timestamp": "2025-12-29T13:48:21.705789+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e8a1a2cb-71c9-45c1-aacd-7d24a4f8354d"}
{"timestamp": "2025-12-29T13:48:21.706200+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.74s ago] {'user_id_1': 82}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "e8a1a2cb-71c9-45c1-aacd-7d24a4f8354d"}
{"timestamp": "2025-12-29T13:48:21.708414+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.009s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "e8a1a2cb-71c9-45c1-aacd-7d24a4f8354d"}
{"timestamp": "2025-12-29T13:48:21.709268+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "e8a1a2cb-71c9-45c1-aacd-7d24a4f8354d"}
{"timestamp": "2025-12-29T13:48:23.762837+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/order/40/initiate", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "6c842275-4ba2-4453-80ac-ec134728641d"}
{"timestamp": "2025-12-29T13:48:23.765291+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6c842275-4ba2-4453-80ac-ec134728641d"}
{"timestamp": "2025-12-29T13:48:23.765897+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c842275-4ba2-4453-80ac-ec134728641d"}
{"timestamp": "2025-12-29T13:48:23.766249+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 28.01s ago] {'pk_1': 82}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c842275-4ba2-4453-80ac-ec134728641d"}
{"timestamp": "2025-12-29T13:48:23.769295+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c842275-4ba2-4453-80ac-ec134728641d"}
{"timestamp": "2025-12-29T13:48:23.769663+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 27.88s ago] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c842275-4ba2-4453-80ac-ec134728641d"}
{"timestamp": "2025-12-29T13:48:23.771577+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO payment_attempts (order_id, amount_attempted, status, final_amount, failure_reason, provider_payment_id, created_at) VALUES (%(order_id)s, %(amount_attempted)s, %(status)s, %(final_amount)s, %(failure_reason)s, %(provider_payment_id)s, %(created_at)s) RETURNING payment_attempts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c842275-4ba2-4453-80ac-ec134728641d"}
{"timestamp": "2025-12-29T13:48:23.771983+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.74s ago] {'order_id': 40, 'amount_attempted': 1000, 'status': 'PENDING', 'final_amount': 1000, 'failure_reason': None, 'provider_payment_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 48, 23, 771234, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c842275-4ba2-4453-80ac-ec134728641d"}
{"timestamp": "2025-12-29T13:48:23.773828+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "6c842275-4ba2-4453-80ac-ec134728641d"}
{"timestamp": "2025-12-29T13:48:23.778236+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "6c842275-4ba2-4453-80ac-ec134728641d"}
{"timestamp": "2025-12-29T13:48:23.778797+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c842275-4ba2-4453-80ac-ec134728641d"}
{"timestamp": "2025-12-29T13:48:23.779239+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.74s ago] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c842275-4ba2-4453-80ac-ec134728641d"}
{"timestamp": "2025-12-29T13:48:23.781876+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c842275-4ba2-4453-80ac-ec134728641d"}
{"timestamp": "2025-12-29T13:48:23.782242+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.73s ago] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "6c842275-4ba2-4453-80ac-ec134728641d"}
{"timestamp": "2025-12-29T13:48:23.783745+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.pending with payload: {'payment_attempt_id': 26, 'order_id': 40, 'amount_attempted': 1000, 'final_amount': 1000, 'user_id': 82}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "6c842275-4ba2-4453-80ac-ec134728641d"}
{"timestamp": "2025-12-29T13:48:23.783996+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "6c842275-4ba2-4453-80ac-ec134728641d"}
{"timestamp": "2025-12-29T13:48:23.784994+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.pending to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "6c842275-4ba2-4453-80ac-ec134728641d"}
{"timestamp": "2025-12-29T13:48:23.785247+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: payment.pending", "module": "event_bus", "function": "publish", "line": 31, "request_id": "6c842275-4ba2-4453-80ac-ec134728641d"}
{"timestamp": "2025-12-29T13:48:23.786299+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/order/40/initiate \u2192 200 (0.024s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "6c842275-4ba2-4453-80ac-ec134728641d"}
{"timestamp": "2025-12-29T13:48:23.787071+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "6c842275-4ba2-4453-80ac-ec134728641d"}
{"timestamp": "2025-12-29T13:48:25.824485+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/26/confirm", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.827173+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.827828+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.828192+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 30.07s ago] {'pk_1': 82}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.831256+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id AS payment_attempts_id, payment_attempts.order_id AS payment_attempts_order_id, payment_attempts.amount_attempted AS payment_attempts_amount_attempted, payment_attempts.status AS payment_attempts_status, payment_attempts.final_amount AS payment_attempts_final_amount, payment_attempts.failure_reason AS payment_attempts_failure_reason, payment_attempts.provider_payment_id AS payment_attempts_provider_payment_id, payment_attempts.created_at AS payment_attempts_created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.831622+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.73s ago] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.833583+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.833915+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.72s ago] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.835976+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE payment_attempts SET status=%(status)s, provider_payment_id=%(provider_payment_id)s WHERE payment_attempts.id = %(payment_attempts_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.836420+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.72s ago] {'status': 'SUCCEEDED', 'provider_payment_id': 'mock_payment_26', 'payment_attempts_id': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.838237+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.843790+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.844641+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.845134+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 25.8s ago] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.847729+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.848013+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 25.8s ago] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.849409+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.succeeded with payload: {'payment_attempt_id': 26, 'order_id': 40, 'final_amount': 1000.0, 'user_id': 82}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.849653+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.850653+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.succeeded to 4 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.850924+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_payment_succeeded for payment.succeeded", "module": "event_bus", "function": "publish", "line": 36, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.851099+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_payment_succeeded", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.851343+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.851506+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_payment_succeeded for payment.succeeded", "module": "event_bus", "function": "publish", "line": 36, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.851630+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_payment_succeeded", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.852951+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.853440+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.853705+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 29.96s ago] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.855904+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET is_completed=%(is_completed)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.856173+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 23.72s ago] {'is_completed': True, 'orders_id': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.857900+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.861488+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.862012+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.862402+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 30.04s ago] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.864707+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.completed with payload: {'order_id': 40}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.864906+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.completed to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.865034+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: order.completed", "module": "event_bus", "function": "publish", "line": 31, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.865261+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.866352+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.866529+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_payment_succeeded for payment.succeeded", "module": "event_bus", "function": "publish", "line": 36, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.866635+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_payment_succeeded", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.867970+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.868555+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.868940+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 43.22s ago] {'user_id_1': 82, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.871912+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.872976+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.873142+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_payment_succeeded for payment.succeeded", "module": "event_bus", "function": "publish", "line": 36, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.873244+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_payment_succeeded", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.874721+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.875236+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.875540+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 29.96s ago] {'actor_id': 82, 'actor_type': 'user', 'action': 'payment.succeeded', 'target_id': 40, 'target_type': 'order', 'payload': '{\"payment_attempt_id\": 26, \"order_id\": 40, \"final_amount\": 1000.0, \"user_id\": 82}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 48, 25, 874984, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.877640+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.881805+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.882382+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.882669+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 29.96s ago] {'pk_1': 54}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.884876+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.886105+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_payment_succeeded completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.887147+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/26/confirm \u2192 200 (0.063s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:25.888042+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "5f59201b-2bc7-4679-bd15-061ec79c812d"}
{"timestamp": "2025-12-29T13:48:27.936093+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/40/cancel", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.938704+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.939302+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.939691+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.18s ago] {'pk_1': 82}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.943201+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id AS reservations_id, reservations.user_id AS reservations_user_id, reservations.showtime_id AS reservations_showtime_id, reservations.seat_code AS reservations_seat_code, reservations.status AS reservations_status, reservations.created_at AS reservations_created_at, reservations.expires_at AS reservations_expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.943681+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00064s] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.946155+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE reservations SET status=%(status)s, expires_at=%(expires_at)s WHERE reservations.id = %(reservations_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.946458+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] {'status': 'CANCELLED', 'expires_at': None, 'reservations_id': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.948258+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.953506+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.954110+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.954525+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.18s ago] {'pk_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.956541+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.cancelled with payload: {'reservation_id': 40}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.956798+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.957585+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.cancelled to 4 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.957796+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_cancelled for reservation.cancelled", "module": "event_bus", "function": "publish", "line": 36, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.957928+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_cancelled", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.958120+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_cancelled completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.958271+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_cancelled for reservation.cancelled", "module": "event_bus", "function": "publish", "line": 36, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.958403+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_cancelled", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.958567+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Order handler received reservation.cancelled: {'reservation_id': 40}", "module": "handlers", "function": "on_reservation_cancelled", "line": 50, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.959996+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.960832+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.reservation_id = %(reservation_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.961249+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'reservation_id_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.963607+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.cancelled with payload: {'order_id': 40}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.963832+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.cancelled to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.963965+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: order.cancelled", "module": "event_bus", "function": "publish", "line": 31, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.964324+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.965476+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_cancelled completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.965650+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_cancelled for reservation.cancelled", "module": "event_bus", "function": "publish", "line": 36, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.965750+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_cancelled", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.967116+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.967558+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.reservation_id = %(reservation_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.967817+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.0071s ago] {'reservation_id_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.970902+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.order_id = %(order_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.971196+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00047s] {'order_id_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.973819+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT refunds.id, refunds.reservation_id, refunds.payment_attempt_id, refunds.amount, refunds.reason, refunds.created_at, refunds.status \nFROM refunds \nWHERE refunds.reservation_id = %(reservation_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.974105+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] {'reservation_id_1': 40}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.976279+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO refunds (reservation_id, payment_attempt_id, amount, reason, created_at, status) VALUES (%(reservation_id)s, %(payment_attempt_id)s, %(amount)s, %(reason)s, %(created_at)s, %(status)s) RETURNING refunds.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.976575+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00043s] {'reservation_id': 40, 'payment_attempt_id': 26, 'amount': 1000.0, 'reason': 'reservation_cancelled', 'created_at': datetime.datetime(2025, 12, 29, 13, 48, 27, 975988, tzinfo=datetime.timezone.utc), 'status': 'ISSUED'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.978747+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.983033+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.983964+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT refunds.id, refunds.reservation_id, refunds.payment_attempt_id, refunds.amount, refunds.reason, refunds.created_at, refunds.status \nFROM refunds \nWHERE refunds.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.984253+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00042s] {'pk_1': 4}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.987122+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id AS payment_attempts_id, payment_attempts.order_id AS payment_attempts_order_id, payment_attempts.amount_attempted AS payment_attempts_amount_attempted, payment_attempts.status AS payment_attempts_status, payment_attempts.final_amount AS payment_attempts_final_amount, payment_attempts.failure_reason AS payment_attempts_failure_reason, payment_attempts.provider_payment_id AS payment_attempts_provider_payment_id, payment_attempts.created_at AS payment_attempts_created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.987401+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] {'pk_1': 26}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.989009+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: refund.issued with payload: {'refund_id': 4, 'reservation_id': 40, 'payment_attempt_id': 26, 'amount': 1000.0}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.989446+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.992586+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.event_bus", "message": "\u274c Event handler failed: reservation.cancelled -> on_reservation_cancelled: asyncio.run() cannot be called from a running event loop", "module": "event_bus", "function": "_safe_invoke", "line": 45, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\event_bus.py\", line 42, in _safe_invoke\n    await handler(payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\refund\\handlers.py\", line 34, in on_reservation_cancelled\n    issue_refund_from_event(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        db,\n        ^^^\n    ...<2 lines>...\n        reason=\"reservation_cancelled\"\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\refund\\service.py\", line 58, in issue_refund_from_event\n    publish_event(event[\"type\"], event[\"payload\"])\n    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\shared\\services\\event_publisher.py\", line 17, in publish_event\n    asyncio.run(event_bus.publish(event_type, payload))\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 191, in run\n    raise RuntimeError(\n        \"asyncio.run() cannot be called from a running event loop\")\nRuntimeError: asyncio.run() cannot be called from a running event loop"}
{"timestamp": "2025-12-29T13:48:27.997205+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_cancelled for reservation.cancelled", "module": "event_bus", "function": "publish", "line": 36, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.997494+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_cancelled", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.999198+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:27.999726+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:28.000137+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 32.09s ago] {'actor_id': None, 'actor_type': 'user', 'action': 'reservation.cancelled', 'target_id': 40, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 40}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 48, 27, 999453, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:28.002336+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:28.015550+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.event_bus", "message": "\u274c Event handler failed: reservation.cancelled -> on_reservation_cancelled: (psycopg2.errors.NotNullViolation) null value in column \"actor_id\" of relation \"audit_logs\" violates not-null constraint\nDETAIL:  Failing row contains (55, null, user, reservation.cancelled, 40, reservation, {\"reservation_id\": 40}, null, 2025-12-29 13:48:27.999453+00).\n\n[SQL: INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id]\n[parameters: {'actor_id': None, 'actor_type': 'user', 'action': 'reservation.cancelled', 'target_id': 40, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 40}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 48, 27, 999453, tzinfo=datetime.timezone.utc)}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)", "module": "event_bus", "function": "_safe_invoke", "line": 45, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\npsycopg2.errors.NotNullViolation: null value in column \"actor_id\" of relation \"audit_logs\" violates not-null constraint\nDETAIL:  Failing row contains (55, null, user, reservation.cancelled, 40, reservation, {\"reservation_id\": 40}, null, 2025-12-29 13:48:27.999453+00).\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\event_bus.py\", line 42, in _safe_invoke\n    await handler(payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\audit\\handlers.py\", line 28, in on_reservation_cancelled\n    write_audit_log(\n    ~~~~~~~~~~~~~~~^\n        db=db,\n        ^^^^^^\n    ...<5 lines>...\n        payload=payload,\n        ^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\audit\\service.py\", line 31, in write_audit_log\n    return repo.create(db, entry)\n           ~~~~~~~~~~~^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\audit\\repository.py\", line 17, in create\n    db.commit()\n    ~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2030, in commit\n    trans.commit(_to_root=True)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^\n  File \"<string>\", line 2, in commit\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\state_changes.py\", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 1311, in commit\n    self._prepare_impl()\n    ~~~~~~~~~~~~~~~~~~^^\n  File \"<string>\", line 2, in _prepare_impl\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\state_changes.py\", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 1286, in _prepare_impl\n    self.session.flush()\n    ~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 4331, in flush\n    self._flush(objects)\n    ~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 4466, in _flush\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 4427, in _flush\n    flush_context.execute()\n    ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py\", line 466, in execute\n    rec.execute(self)\n    ~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py\", line 642, in execute\n    util.preloaded.orm_persistence.save_obj(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self.mapper,\n        ^^^^^^^^^^^^\n        uow.states_for_mapper_hierarchy(self.mapper, False, False),\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        uow,\n        ^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\persistence.py\", line 93, in save_obj\n    _emit_insert_statements(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        base_mapper,\n        ^^^^^^^^^^^^\n    ...<3 lines>...\n        insert,\n        ^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\orm\\persistence.py\", line 1233, in _emit_insert_statements\n    result = connection.execute(\n        statement,\n        params,\n        execution_options=execution_options,\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\nsqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column \"actor_id\" of relation \"audit_logs\" violates not-null constraint\nDETAIL:  Failing row contains (55, null, user, reservation.cancelled, 40, reservation, {\"reservation_id\": 40}, null, 2025-12-29 13:48:27.999453+00).\n\n[SQL: INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id]\n[parameters: {'actor_id': None, 'actor_type': 'user', 'action': 'reservation.cancelled', 'target_id': 40, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 40}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 48, 27, 999453, tzinfo=datetime.timezone.utc)}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)"}
{"timestamp": "2025-12-29T13:48:28.028812+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/40/cancel \u2192 200 (0.093s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:28.029877+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c8e4e110-6a50-4c4c-b2f6-8cf4f2f27a2f"}
{"timestamp": "2025-12-29T13:48:30.076456+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.079226+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.079942+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.080349+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.7s ago] {'email_1': 'test_admin_1767016108.030704@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.284981+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.285372+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.68s ago] {'email': 'test_admin_1767016108.030704@example.com', 'hashed_password': '$2b$12$YGxhJ0T7VXuuNzvBl4fVIu9yvrxfZ.6z1KYE76tXVYK2rR6Y1o05e', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.287110+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.292133+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.292739+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.293284+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.67s ago] {'pk_1': 83}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.295625+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 83, 'email': 'test_admin_1767016108.030704@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.295886+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.296594+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.296781+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.296906+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.298564+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.299062+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.299395+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.65s ago] {'user_id_1': 83, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.301551+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.301946+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.65s ago] {'user_id': 83, 'name': None, 'email': 'test_admin_1767016108.030704@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.303862+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.307565+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.308160+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.308653+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.65s ago] {'pk_1': 83}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.310867+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 83, 'user_id': 83, 'email': 'test_admin_1767016108.030704@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.311057+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.311204+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.311426+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.312380+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.313459+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.313936+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.93s ago] {'email_1': 'test_admin_1767016108.030704@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.517693+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 83, 'email': 'test_admin_1767016108.030704@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.518101+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.518989+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.519223+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.520332+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.444s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:30.521345+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "8132f67c-0bf5-4fb2-bba2-d046187f3412"}
{"timestamp": "2025-12-29T13:48:32.593848+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "1a135a37-32a8-4abf-87fa-4601ae647161"}
{"timestamp": "2025-12-29T13:48:32.596338+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1a135a37-32a8-4abf-87fa-4601ae647161"}
{"timestamp": "2025-12-29T13:48:32.596909+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1a135a37-32a8-4abf-87fa-4601ae647161"}
{"timestamp": "2025-12-29T13:48:32.597263+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.62s ago] {'title_1': 'Test Movie 1767016108.030704'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1a135a37-32a8-4abf-87fa-4601ae647161"}
{"timestamp": "2025-12-29T13:48:32.599699+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1a135a37-32a8-4abf-87fa-4601ae647161"}
{"timestamp": "2025-12-29T13:48:32.600108+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.62s ago] {'title': 'Test Movie 1767016108.030704', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1a135a37-32a8-4abf-87fa-4601ae647161"}
{"timestamp": "2025-12-29T13:48:32.602053+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "1a135a37-32a8-4abf-87fa-4601ae647161"}
{"timestamp": "2025-12-29T13:48:32.607084+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1a135a37-32a8-4abf-87fa-4601ae647161"}
{"timestamp": "2025-12-29T13:48:32.607915+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1a135a37-32a8-4abf-87fa-4601ae647161"}
{"timestamp": "2025-12-29T13:48:32.608612+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.62s ago] {'pk_1': 50}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1a135a37-32a8-4abf-87fa-4601ae647161"}
{"timestamp": "2025-12-29T13:48:32.610829+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 50}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "1a135a37-32a8-4abf-87fa-4601ae647161"}
{"timestamp": "2025-12-29T13:48:32.611116+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "1a135a37-32a8-4abf-87fa-4601ae647161"}
{"timestamp": "2025-12-29T13:48:32.611818+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "1a135a37-32a8-4abf-87fa-4601ae647161"}
{"timestamp": "2025-12-29T13:48:32.612078+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "1a135a37-32a8-4abf-87fa-4601ae647161"}
{"timestamp": "2025-12-29T13:48:32.613343+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.020s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "1a135a37-32a8-4abf-87fa-4601ae647161"}
{"timestamp": "2025-12-29T13:48:32.614191+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "1a135a37-32a8-4abf-87fa-4601ae647161"}
{"timestamp": "2025-12-29T13:48:34.659529+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "3fae48b1-5695-421a-801c-d71dd78febb3"}
{"timestamp": "2025-12-29T13:48:34.662189+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3fae48b1-5695-421a-801c-d71dd78febb3"}
{"timestamp": "2025-12-29T13:48:34.662764+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3fae48b1-5695-421a-801c-d71dd78febb3"}
{"timestamp": "2025-12-29T13:48:34.663136+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.62s ago] {'name_1': 'Test Layout 1767016108.030704'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3fae48b1-5695-421a-801c-d71dd78febb3"}
{"timestamp": "2025-12-29T13:48:34.665980+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3fae48b1-5695-421a-801c-d71dd78febb3"}
{"timestamp": "2025-12-29T13:48:34.666445+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.62s ago] {'name': 'Test Layout 1767016108.030704', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3fae48b1-5695-421a-801c-d71dd78febb3"}
{"timestamp": "2025-12-29T13:48:34.668824+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "3fae48b1-5695-421a-801c-d71dd78febb3"}
{"timestamp": "2025-12-29T13:48:34.674475+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "3fae48b1-5695-421a-801c-d71dd78febb3"}
{"timestamp": "2025-12-29T13:48:34.675104+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3fae48b1-5695-421a-801c-d71dd78febb3"}
{"timestamp": "2025-12-29T13:48:34.675472+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.62s ago] {'pk_1': 49}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "3fae48b1-5695-421a-801c-d71dd78febb3"}
{"timestamp": "2025-12-29T13:48:34.678087+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 49}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "3fae48b1-5695-421a-801c-d71dd78febb3"}
{"timestamp": "2025-12-29T13:48:34.678382+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "3fae48b1-5695-421a-801c-d71dd78febb3"}
{"timestamp": "2025-12-29T13:48:34.679291+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "3fae48b1-5695-421a-801c-d71dd78febb3"}
{"timestamp": "2025-12-29T13:48:34.679529+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "3fae48b1-5695-421a-801c-d71dd78febb3"}
{"timestamp": "2025-12-29T13:48:34.681254+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "3fae48b1-5695-421a-801c-d71dd78febb3"}
{"timestamp": "2025-12-29T13:48:34.682341+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "3fae48b1-5695-421a-801c-d71dd78febb3"}
{"timestamp": "2025-12-29T13:48:36.720393+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "598beae3-80a4-4747-9519-a031c543d97a"}
{"timestamp": "2025-12-29T13:48:36.723084+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "598beae3-80a4-4747-9519-a031c543d97a"}
{"timestamp": "2025-12-29T13:48:36.723691+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "598beae3-80a4-4747-9519-a031c543d97a"}
{"timestamp": "2025-12-29T13:48:36.724046+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.62s ago] {'name_1': 'Test Screen 1767016108.030704', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "598beae3-80a4-4747-9519-a031c543d97a"}
{"timestamp": "2025-12-29T13:48:36.726525+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "598beae3-80a4-4747-9519-a031c543d97a"}
{"timestamp": "2025-12-29T13:48:36.727022+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.62s ago] {'id_1': 49, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "598beae3-80a4-4747-9519-a031c543d97a"}
{"timestamp": "2025-12-29T13:48:36.729131+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "598beae3-80a4-4747-9519-a031c543d97a"}
{"timestamp": "2025-12-29T13:48:36.729486+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.61s ago] {'name': 'Test Screen 1767016108.030704', 'capacity': 150, 'seat_layout_id': 49}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "598beae3-80a4-4747-9519-a031c543d97a"}
{"timestamp": "2025-12-29T13:48:36.731282+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "598beae3-80a4-4747-9519-a031c543d97a"}
{"timestamp": "2025-12-29T13:48:36.736540+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "598beae3-80a4-4747-9519-a031c543d97a"}
{"timestamp": "2025-12-29T13:48:36.737063+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "598beae3-80a4-4747-9519-a031c543d97a"}
{"timestamp": "2025-12-29T13:48:36.737388+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.61s ago] {'pk_1': 49}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "598beae3-80a4-4747-9519-a031c543d97a"}
{"timestamp": "2025-12-29T13:48:36.739130+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 49}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "598beae3-80a4-4747-9519-a031c543d97a"}
{"timestamp": "2025-12-29T13:48:36.739415+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "598beae3-80a4-4747-9519-a031c543d97a"}
{"timestamp": "2025-12-29T13:48:36.740194+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "598beae3-80a4-4747-9519-a031c543d97a"}
{"timestamp": "2025-12-29T13:48:36.740395+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "598beae3-80a4-4747-9519-a031c543d97a"}
{"timestamp": "2025-12-29T13:48:36.741574+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.021s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "598beae3-80a4-4747-9519-a031c543d97a"}
{"timestamp": "2025-12-29T13:48:36.742313+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "598beae3-80a4-4747-9519-a031c543d97a"}
{"timestamp": "2025-12-29T13:48:38.785276+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:38.787854+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:38.788579+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:38.789021+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.6s ago] {'pk_1': 50}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:38.791528+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:38.791870+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.6s ago] {'pk_1': 49}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:38.794004+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:38.794419+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.6s ago] {'screen_id_1': 49, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:38.796538+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:38.796947+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.6s ago] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 50, 'screen_id': 49}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:38.799452+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:38.804801+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:38.805672+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:38.806182+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.6s ago] {'pk_1': 41}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:38.808960+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:38.809451+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.6s ago] {'pk_1': 50}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:38.811651+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:38.812100+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.6s ago] {'pk_1': 49}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:38.813855+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 41}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:38.814189+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:38.814910+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:38.815184+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:38.816561+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.031s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:38.817648+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "51de9bb5-04b2-4de1-82d8-f1b88c36f3d1"}
{"timestamp": "2025-12-29T13:48:40.858693+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:40.861450+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:40.862097+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:40.862486+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.48s ago] {'email_1': 'test_failpay_1767016118.817553@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.066565+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.067055+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.46s ago] {'email': 'test_failpay_1767016118.817553@example.com', 'hashed_password': '$2b$12$KlJWYlAh9ubuOEyT9FBpvOZ7h1c86p52/60Deb1Y6gwc56zy0sqZy', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.068846+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.073410+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.074397+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.074969+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.46s ago] {'pk_1': 84}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.077484+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 84, 'email': 'test_failpay_1767016118.817553@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.077764+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.078506+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.078877+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.079179+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.080930+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.081482+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.081796+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.43s ago] {'user_id_1': 84, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.083921+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.084187+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.43s ago] {'user_id': 84, 'name': None, 'email': 'test_failpay_1767016118.817553@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.085884+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.089867+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.090494+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.090843+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.43s ago] {'pk_1': 84}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.092969+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 84, 'user_id': 84, 'email': 'test_failpay_1767016118.817553@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.093225+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.093373+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.093690+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.094912+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.096065+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.096501+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 58.71s ago] {'email_1': 'test_failpay_1767016118.817553@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.300542+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 84, 'email': 'test_failpay_1767016118.817553@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.300810+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.301571+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.301813+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.302939+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.444s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:41.303983+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b883e5f3-7c60-42e9-8aa4-0d59c91cfa74"}
{"timestamp": "2025-12-29T13:48:43.342115+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.345071+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.345753+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.346169+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.59s ago] {'pk_1': 84}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.349108+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.349517+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.59s ago] {'showtime_id_1': 41, 'seat_code_1': 'R7-7', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.351811+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.352251+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.59s ago] {'user_id': 84, 'showtime_id': 41, 'seat_code': 'R7-7', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 13, 48, 43, 351425, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 58, 43, 351132, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.354104+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.358842+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.359716+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.360224+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.58s ago] {'pk_1': 41}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.362815+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 41, 'user_id': 84, 'showtime_id': 41, 'seat_code': 'R7-7'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.363138+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.364291+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.364573+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.364790+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.366500+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.367136+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.367412+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.6s ago] {'showtime_id_1': 41, 'seat_code_1': 'R7-7', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.370054+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.370493+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.58s ago] {'seat_code': 'R7-7', 'showtime_id': 41, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.372788+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.373151+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.58s ago] {'status': 'LOCKED', 'locked_by_user_id': 84, 'lock_expires_at': datetime.datetime(2025, 12, 29, 13, 58, 43, 372275, tzinfo=datetime.timezone.utc), 'seat_locks_id': 37}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.374851+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.378735+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.379352+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.379662+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.58s ago] {'pk_1': 37}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.381489+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 41, 'seat_code': 'R7-7', 'user_id': 84, 'expires_at': '2025-12-29T13:58:43.372275+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.381672+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.381796+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.382022+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.382916+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.383092+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.383207+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.383331+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 41, 'user_id': 84, 'showtime_id': 41, 'seat_code': 'R7-7'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.383484+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 41", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.384990+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.385484+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.385807+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.58s ago] {'user_id': 84, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 41}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.388099+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.391865+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.392477+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.392945+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.57s ago] {'pk_1': 41}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.394854+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 41, 'reservation_id': 41, 'user_id': 84, 'showtime_id': 41, 'seat_code': 'R7-7'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.395046+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.395177+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_order_created for order.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.395278+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_order_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.395394+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 41", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.396911+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.397423+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.397811+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.54s ago] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.400601+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 41, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.400792+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.400926+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_pricing_snapshot_created for pricing.snapshot_created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.401041+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_pricing_snapshot_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.401199+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 41, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.402478+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.403029+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.403401+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.51s ago] {'pk_1': 41}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.405771+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.406054+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.51s ago] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 41}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.407696+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.411444+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.412074+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.412458+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.59s ago] {'pk_1': 41}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.414974+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 41 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.415342+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.416550+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.416766+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 41: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.417015+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.418061+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.418252+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 41", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.418466+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.419470+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.419722+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.419903+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.421576+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.422050+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.422391+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.51s ago] {'actor_id': 84, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 41, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 41, \"user_id\": 84, \"showtime_id\": 41, \"seat_code\": \"R7-7\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 48, 43, 421819, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.424565+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.428658+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.429192+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.429467+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.51s ago] {'pk_1': 56}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.431156+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.431978+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.433030+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.091s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:43.433765+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "573fbf2a-0547-452a-aabf-da362d940b7b"}
{"timestamp": "2025-12-29T13:48:45.476279+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "c002e441-97a7-4f9f-98a1-36137ec970e8"}
{"timestamp": "2025-12-29T13:48:45.478834+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c002e441-97a7-4f9f-98a1-36137ec970e8"}
{"timestamp": "2025-12-29T13:48:45.479466+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c002e441-97a7-4f9f-98a1-36137ec970e8"}
{"timestamp": "2025-12-29T13:48:45.479910+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 49.72s ago] {'pk_1': 84}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c002e441-97a7-4f9f-98a1-36137ec970e8"}
{"timestamp": "2025-12-29T13:48:45.482789+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c002e441-97a7-4f9f-98a1-36137ec970e8"}
{"timestamp": "2025-12-29T13:48:45.483202+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.51s ago] {'user_id_1': 84}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c002e441-97a7-4f9f-98a1-36137ec970e8"}
{"timestamp": "2025-12-29T13:48:45.485573+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.009s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "c002e441-97a7-4f9f-98a1-36137ec970e8"}
{"timestamp": "2025-12-29T13:48:45.486419+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c002e441-97a7-4f9f-98a1-36137ec970e8"}
{"timestamp": "2025-12-29T13:48:47.519852+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /payments/order/41/initiate", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "91e6caf3-1d41-4d7c-997a-2941a18cec10"}
{"timestamp": "2025-12-29T13:48:47.522428+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "91e6caf3-1d41-4d7c-997a-2941a18cec10"}
{"timestamp": "2025-12-29T13:48:47.523081+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "91e6caf3-1d41-4d7c-997a-2941a18cec10"}
{"timestamp": "2025-12-29T13:48:47.523588+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 51.76s ago] {'pk_1': 84}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "91e6caf3-1d41-4d7c-997a-2941a18cec10"}
{"timestamp": "2025-12-29T13:48:47.527234+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "91e6caf3-1d41-4d7c-997a-2941a18cec10"}
{"timestamp": "2025-12-29T13:48:47.527623+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 51.64s ago] {'pk_1': 41}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "91e6caf3-1d41-4d7c-997a-2941a18cec10"}
{"timestamp": "2025-12-29T13:48:47.529775+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO payment_attempts (order_id, amount_attempted, status, final_amount, failure_reason, provider_payment_id, created_at) VALUES (%(order_id)s, %(amount_attempted)s, %(status)s, %(final_amount)s, %(failure_reason)s, %(provider_payment_id)s, %(created_at)s) RETURNING payment_attempts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "91e6caf3-1d41-4d7c-997a-2941a18cec10"}
{"timestamp": "2025-12-29T13:48:47.530200+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.5s ago] {'order_id': 41, 'amount_attempted': 1000, 'status': 'PENDING', 'final_amount': 1000, 'failure_reason': None, 'provider_payment_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 48, 47, 529422, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "91e6caf3-1d41-4d7c-997a-2941a18cec10"}
{"timestamp": "2025-12-29T13:48:47.532094+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "91e6caf3-1d41-4d7c-997a-2941a18cec10"}
{"timestamp": "2025-12-29T13:48:47.537493+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "91e6caf3-1d41-4d7c-997a-2941a18cec10"}
{"timestamp": "2025-12-29T13:48:47.538068+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT payment_attempts.id, payment_attempts.order_id, payment_attempts.amount_attempted, payment_attempts.status, payment_attempts.final_amount, payment_attempts.failure_reason, payment_attempts.provider_payment_id, payment_attempts.created_at \nFROM payment_attempts \nWHERE payment_attempts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "91e6caf3-1d41-4d7c-997a-2941a18cec10"}
{"timestamp": "2025-12-29T13:48:47.538405+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.49s ago] {'pk_1': 27}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "91e6caf3-1d41-4d7c-997a-2941a18cec10"}
{"timestamp": "2025-12-29T13:48:47.541109+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "91e6caf3-1d41-4d7c-997a-2941a18cec10"}
{"timestamp": "2025-12-29T13:48:47.541471+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 47.49s ago] {'pk_1': 41}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "91e6caf3-1d41-4d7c-997a-2941a18cec10"}
{"timestamp": "2025-12-29T13:48:47.543016+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: payment.pending with payload: {'payment_attempt_id': 27, 'order_id': 41, 'amount_attempted': 1000, 'final_amount': 1000, 'user_id': 84}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "91e6caf3-1d41-4d7c-997a-2941a18cec10"}
{"timestamp": "2025-12-29T13:48:47.543302+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "91e6caf3-1d41-4d7c-997a-2941a18cec10"}
{"timestamp": "2025-12-29T13:48:47.544048+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing payment.pending to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "91e6caf3-1d41-4d7c-997a-2941a18cec10"}
{"timestamp": "2025-12-29T13:48:47.544236+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: payment.pending", "module": "event_bus", "function": "publish", "line": 31, "request_id": "91e6caf3-1d41-4d7c-997a-2941a18cec10"}
{"timestamp": "2025-12-29T13:48:47.545400+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /payments/order/41/initiate \u2192 200 (0.026s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "91e6caf3-1d41-4d7c-997a-2941a18cec10"}
{"timestamp": "2025-12-29T13:48:47.546504+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "91e6caf3-1d41-4d7c-997a-2941a18cec10"}
{"timestamp": "2025-12-29T13:48:49.595888+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /admin/payments/27/fail", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "234e049d-2929-4c6f-8880-42fd3522c658"}
{"timestamp": "2025-12-29T13:48:49.598829+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "234e049d-2929-4c6f-8880-42fd3522c658"}
{"timestamp": "2025-12-29T13:48:49.599549+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "234e049d-2929-4c6f-8880-42fd3522c658"}
{"timestamp": "2025-12-29T13:48:49.599966+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 53.84s ago] {'pk_1': 83}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "234e049d-2929-4c6f-8880-42fd3522c658"}
{"timestamp": "2025-12-29T13:48:49.603407+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: admin.force_fail_payment with payload: {'payment_attempt_id': 27}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "234e049d-2929-4c6f-8880-42fd3522c658"}
{"timestamp": "2025-12-29T13:48:49.603855+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "234e049d-2929-4c6f-8880-42fd3522c658"}
{"timestamp": "2025-12-29T13:48:49.604807+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing admin.force_fail_payment to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "234e049d-2929-4c6f-8880-42fd3522c658"}
{"timestamp": "2025-12-29T13:48:49.605092+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: admin.force_fail_payment", "module": "event_bus", "function": "publish", "line": 31, "request_id": "234e049d-2929-4c6f-8880-42fd3522c658"}
{"timestamp": "2025-12-29T13:48:49.606006+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /admin/payments/27/fail \u2192 200 (0.010s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "234e049d-2929-4c6f-8880-42fd3522c658"}
{"timestamp": "2025-12-29T13:48:49.606879+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "234e049d-2929-4c6f-8880-42fd3522c658"}
{"timestamp": "2025-12-29T13:48:51.630975+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /orders/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "35944943-d5d5-4a3d-aa41-9d4a0e73229a"}
{"timestamp": "2025-12-29T13:48:51.633483+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "35944943-d5d5-4a3d-aa41-9d4a0e73229a"}
{"timestamp": "2025-12-29T13:48:51.634063+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "35944943-d5d5-4a3d-aa41-9d4a0e73229a"}
{"timestamp": "2025-12-29T13:48:51.634472+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 55.88s ago] {'pk_1': 84}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "35944943-d5d5-4a3d-aa41-9d4a0e73229a"}
{"timestamp": "2025-12-29T13:48:51.637314+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.user_id = %(user_id_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "35944943-d5d5-4a3d-aa41-9d4a0e73229a"}
{"timestamp": "2025-12-29T13:48:51.637686+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 53.67s ago] {'user_id_1': 84}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "35944943-d5d5-4a3d-aa41-9d4a0e73229a"}
{"timestamp": "2025-12-29T13:48:51.639895+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /orders/ \u2192 200 (0.009s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "35944943-d5d5-4a3d-aa41-9d4a0e73229a"}
{"timestamp": "2025-12-29T13:48:51.640754+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "35944943-d5d5-4a3d-aa41-9d4a0e73229a"}
{"timestamp": "2025-12-29T13:48:53.681736+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.684434+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.685134+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.685521+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.3s ago] {'email_1': 'test_admin_1767016131.6413574@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.890398+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.890827+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.28s ago] {'email': 'test_admin_1767016131.6413574@example.com', 'hashed_password': '$2b$12$zdOdmwk1dOqnCeg9vRsc8O5yUS/0Cq1Urxodu9ts7/YshH0DQClk.', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.892461+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.896470+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.897075+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.897496+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.28s ago] {'pk_1': 85}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.899708+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 85, 'email': 'test_admin_1767016131.6413574@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.899948+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.900712+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.900897+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.901038+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.902441+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.902994+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.903507+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.26s ago] {'user_id_1': 85, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.905752+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.906021+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.25s ago] {'user_id': 85, 'name': None, 'email': 'test_admin_1767016131.6413574@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.907418+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.911434+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.911944+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.912219+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.25s ago] {'pk_1': 85}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.914162+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 85, 'user_id': 85, 'email': 'test_admin_1767016131.6413574@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.914558+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.914840+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.915179+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.916329+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.917499+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:53.917866+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.53s ago] {'email_1': 'test_admin_1767016131.6413574@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:54.123573+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 85, 'email': 'test_admin_1767016131.6413574@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:54.124052+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:54.125028+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:54.125432+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:54.126772+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.445s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:54.127936+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "aae44e1a-005a-47f4-8b0b-147c607836e3"}
{"timestamp": "2025-12-29T13:48:56.200765+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "208f2849-64d5-45be-aa7f-225fd3115a59"}
{"timestamp": "2025-12-29T13:48:56.203433+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "208f2849-64d5-45be-aa7f-225fd3115a59"}
{"timestamp": "2025-12-29T13:48:56.204167+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "208f2849-64d5-45be-aa7f-225fd3115a59"}
{"timestamp": "2025-12-29T13:48:56.204523+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.23s ago] {'title_1': 'Test Movie 1767016131.6413574'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "208f2849-64d5-45be-aa7f-225fd3115a59"}
{"timestamp": "2025-12-29T13:48:56.207458+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "208f2849-64d5-45be-aa7f-225fd3115a59"}
{"timestamp": "2025-12-29T13:48:56.207874+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.23s ago] {'title': 'Test Movie 1767016131.6413574', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "208f2849-64d5-45be-aa7f-225fd3115a59"}
{"timestamp": "2025-12-29T13:48:56.209879+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "208f2849-64d5-45be-aa7f-225fd3115a59"}
{"timestamp": "2025-12-29T13:48:56.214865+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "208f2849-64d5-45be-aa7f-225fd3115a59"}
{"timestamp": "2025-12-29T13:48:56.215532+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "208f2849-64d5-45be-aa7f-225fd3115a59"}
{"timestamp": "2025-12-29T13:48:56.215939+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.23s ago] {'pk_1': 51}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "208f2849-64d5-45be-aa7f-225fd3115a59"}
{"timestamp": "2025-12-29T13:48:56.217736+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 51}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "208f2849-64d5-45be-aa7f-225fd3115a59"}
{"timestamp": "2025-12-29T13:48:56.217984+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "208f2849-64d5-45be-aa7f-225fd3115a59"}
{"timestamp": "2025-12-29T13:48:56.218622+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "208f2849-64d5-45be-aa7f-225fd3115a59"}
{"timestamp": "2025-12-29T13:48:56.218785+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "208f2849-64d5-45be-aa7f-225fd3115a59"}
{"timestamp": "2025-12-29T13:48:56.219702+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.019s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "208f2849-64d5-45be-aa7f-225fd3115a59"}
{"timestamp": "2025-12-29T13:48:56.220748+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "208f2849-64d5-45be-aa7f-225fd3115a59"}
{"timestamp": "2025-12-29T13:48:58.262486+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "dd5300df-e308-4ece-812f-5d15736d5519"}
{"timestamp": "2025-12-29T13:48:58.265021+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "dd5300df-e308-4ece-812f-5d15736d5519"}
{"timestamp": "2025-12-29T13:48:58.265593+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dd5300df-e308-4ece-812f-5d15736d5519"}
{"timestamp": "2025-12-29T13:48:58.265947+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.22s ago] {'name_1': 'Test Layout 1767016131.6413574'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dd5300df-e308-4ece-812f-5d15736d5519"}
{"timestamp": "2025-12-29T13:48:58.268314+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dd5300df-e308-4ece-812f-5d15736d5519"}
{"timestamp": "2025-12-29T13:48:58.268662+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.22s ago] {'name': 'Test Layout 1767016131.6413574', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dd5300df-e308-4ece-812f-5d15736d5519"}
{"timestamp": "2025-12-29T13:48:58.270643+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "dd5300df-e308-4ece-812f-5d15736d5519"}
{"timestamp": "2025-12-29T13:48:58.275204+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "dd5300df-e308-4ece-812f-5d15736d5519"}
{"timestamp": "2025-12-29T13:48:58.276125+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dd5300df-e308-4ece-812f-5d15736d5519"}
{"timestamp": "2025-12-29T13:48:58.276607+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.22s ago] {'pk_1': 50}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "dd5300df-e308-4ece-812f-5d15736d5519"}
{"timestamp": "2025-12-29T13:48:58.278931+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 50}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "dd5300df-e308-4ece-812f-5d15736d5519"}
{"timestamp": "2025-12-29T13:48:58.279278+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "dd5300df-e308-4ece-812f-5d15736d5519"}
{"timestamp": "2025-12-29T13:48:58.280013+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "dd5300df-e308-4ece-812f-5d15736d5519"}
{"timestamp": "2025-12-29T13:48:58.280190+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "dd5300df-e308-4ece-812f-5d15736d5519"}
{"timestamp": "2025-12-29T13:48:58.281124+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.019s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "dd5300df-e308-4ece-812f-5d15736d5519"}
{"timestamp": "2025-12-29T13:48:58.282262+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "dd5300df-e308-4ece-812f-5d15736d5519"}
{"timestamp": "2025-12-29T13:49:00.325688+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "a1aafa9a-29c2-49db-9e9a-26d180431d14"}
{"timestamp": "2025-12-29T13:49:00.328282+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a1aafa9a-29c2-49db-9e9a-26d180431d14"}
{"timestamp": "2025-12-29T13:49:00.328887+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a1aafa9a-29c2-49db-9e9a-26d180431d14"}
{"timestamp": "2025-12-29T13:49:00.329321+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.22s ago] {'name_1': 'Test Screen 1767016131.6413574', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a1aafa9a-29c2-49db-9e9a-26d180431d14"}
{"timestamp": "2025-12-29T13:49:00.332024+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a1aafa9a-29c2-49db-9e9a-26d180431d14"}
{"timestamp": "2025-12-29T13:49:00.332663+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.22s ago] {'id_1': 50, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a1aafa9a-29c2-49db-9e9a-26d180431d14"}
{"timestamp": "2025-12-29T13:49:00.334983+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a1aafa9a-29c2-49db-9e9a-26d180431d14"}
{"timestamp": "2025-12-29T13:49:00.335440+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.22s ago] {'name': 'Test Screen 1767016131.6413574', 'capacity': 150, 'seat_layout_id': 50}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a1aafa9a-29c2-49db-9e9a-26d180431d14"}
{"timestamp": "2025-12-29T13:49:00.337243+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "a1aafa9a-29c2-49db-9e9a-26d180431d14"}
{"timestamp": "2025-12-29T13:49:00.342331+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a1aafa9a-29c2-49db-9e9a-26d180431d14"}
{"timestamp": "2025-12-29T13:49:00.342820+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a1aafa9a-29c2-49db-9e9a-26d180431d14"}
{"timestamp": "2025-12-29T13:49:00.343097+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.22s ago] {'pk_1': 50}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a1aafa9a-29c2-49db-9e9a-26d180431d14"}
{"timestamp": "2025-12-29T13:49:00.345115+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 50}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "a1aafa9a-29c2-49db-9e9a-26d180431d14"}
{"timestamp": "2025-12-29T13:49:00.345459+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "a1aafa9a-29c2-49db-9e9a-26d180431d14"}
{"timestamp": "2025-12-29T13:49:00.346288+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "a1aafa9a-29c2-49db-9e9a-26d180431d14"}
{"timestamp": "2025-12-29T13:49:00.346573+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "a1aafa9a-29c2-49db-9e9a-26d180431d14"}
{"timestamp": "2025-12-29T13:49:00.347543+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.022s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "a1aafa9a-29c2-49db-9e9a-26d180431d14"}
{"timestamp": "2025-12-29T13:49:00.348260+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a1aafa9a-29c2-49db-9e9a-26d180431d14"}
{"timestamp": "2025-12-29T13:49:02.388531+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:02.392419+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:02.393355+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:02.393994+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.21s ago] {'pk_1': 51}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:02.397531+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:02.397988+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.21s ago] {'pk_1': 50}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:02.400383+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:02.401143+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.21s ago] {'screen_id_1': 50, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:02.403751+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:02.404143+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.21s ago] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 51, 'screen_id': 50}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:02.405987+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:02.410845+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:02.411350+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:02.411727+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.21s ago] {'pk_1': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:02.414326+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:02.414670+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.2s ago] {'pk_1': 51}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:02.416480+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:02.416759+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.2s ago] {'pk_1': 50}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:02.418177+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 42}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:02.418502+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:02.419245+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:02.419419+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:02.420377+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.032s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:02.421211+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2939f8c6-a2ef-4c72-bf96-99d37ddad656"}
{"timestamp": "2025-12-29T13:49:04.471802+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.474746+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.475352+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.475675+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 82.09s ago] {'email_1': 'test_admincancel_1767016142.4211683@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.683058+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.683490+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 82.07s ago] {'email': 'test_admincancel_1767016142.4211683@example.com', 'hashed_password': '$2b$12$VtESz38muMCB7DMKm/ETo.WpfP6C.84y0gVcAOzsc4jKPH6TcXF1a', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.685095+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.690614+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.691192+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.691474+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 82.07s ago] {'pk_1': 86}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.693644+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 86, 'email': 'test_admincancel_1767016142.4211683@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.693884+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.694579+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.694744+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.694854+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.696481+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.697075+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.697510+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 82.05s ago] {'user_id_1': 86, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.699891+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.700283+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 82.05s ago] {'user_id': 86, 'name': None, 'email': 'test_admincancel_1767016142.4211683@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.702084+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.706488+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.707047+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.707319+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 82.05s ago] {'pk_1': 86}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.709177+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 86, 'user_id': 86, 'email': 'test_admincancel_1767016142.4211683@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.709380+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.709512+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.709962+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.711225+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.712277+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.712605+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 82.33s ago] {'email_1': 'test_admincancel_1767016142.4211683@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.916371+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 86, 'email': 'test_admincancel_1767016142.4211683@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.916689+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.917604+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.917868+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.919114+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.447s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:04.920145+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "8cbb047a-9d12-4803-8f8c-28e67b32f22d"}
{"timestamp": "2025-12-29T13:49:06.973082+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:06.975815+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:06.976414+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:06.976800+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.22s ago] {'pk_1': 86}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:06.980119+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:06.980507+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.22s ago] {'showtime_id_1': 42, 'seat_code_1': 'R8-8', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:06.982579+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:06.983015+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.22s ago] {'user_id': 86, 'showtime_id': 42, 'seat_code': 'R8-8', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 13, 49, 6, 982238, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 59, 6, 981979, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:06.984913+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:06.990146+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:06.990665+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:06.990925+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.21s ago] {'pk_1': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:06.993151+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 42, 'user_id': 86, 'showtime_id': 42, 'seat_code': 'R8-8'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:06.993525+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:06.994506+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:06.994807+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:06.994959+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:06.996412+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:06.996940+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:06.997192+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.23s ago] {'showtime_id_1': 42, 'seat_code_1': 'R8-8', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:06.999659+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:06.999927+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.21s ago] {'seat_code': 'R8-8', 'showtime_id': 42, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.001746+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.002039+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.21s ago] {'status': 'LOCKED', 'locked_by_user_id': 86, 'lock_expires_at': datetime.datetime(2025, 12, 29, 13, 59, 7, 1318, tzinfo=datetime.timezone.utc), 'seat_locks_id': 38}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.003681+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.007437+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.008034+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.008343+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.21s ago] {'pk_1': 38}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.010239+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 42, 'seat_code': 'R8-8', 'user_id': 86, 'expires_at': '2025-12-29T13:59:07.001318+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.010477+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.010636+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.010864+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.011915+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.012129+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.012285+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.012414+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 42, 'user_id': 86, 'showtime_id': 42, 'seat_code': 'R8-8'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.012621+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 42", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.014199+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.014744+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.015021+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.21s ago] {'user_id': 86, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.016927+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.020843+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.021331+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.021585+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.2s ago] {'pk_1': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.023304+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 42, 'reservation_id': 42, 'user_id': 86, 'showtime_id': 42, 'seat_code': 'R8-8'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.023486+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.023616+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_order_created for order.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.023823+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_order_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.024102+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 42", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.025521+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.025999+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.026412+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.17s ago] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.028502+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 42, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.028689+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.028842+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_pricing_snapshot_created for pricing.snapshot_created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.028993+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_pricing_snapshot_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.029233+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 42, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.030810+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.031279+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.031512+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.14s ago] {'pk_1': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.033761+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.034040+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.14s ago] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.035628+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.039266+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.039867+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.040278+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.22s ago] {'pk_1': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.042048+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 42 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.042327+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.043306+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.043492+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 42: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.043792+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.044888+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.045108+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 42", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.045608+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.046805+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.047084+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.047259+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.048533+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.049012+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.049368+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.14s ago] {'actor_id': 86, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 42, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 42, \"user_id\": 86, \"showtime_id\": 42, \"seat_code\": \"R8-8\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 49, 7, 48774, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.051615+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.055518+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.056120+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.056351+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 71.14s ago] {'pk_1': 57}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.058150+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.059139+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.060167+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.087s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:07.061075+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "d1317e03-a068-4ff3-8f2a-caf35130233b"}
{"timestamp": "2025-12-29T13:49:09.106723+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /admin/reservations/42/cancel", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "a74c06ed-d7f4-4ff4-9be6-654e82563d23"}
{"timestamp": "2025-12-29T13:49:09.109594+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a74c06ed-d7f4-4ff4-9be6-654e82563d23"}
{"timestamp": "2025-12-29T13:49:09.110327+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a74c06ed-d7f4-4ff4-9be6-654e82563d23"}
{"timestamp": "2025-12-29T13:49:09.110665+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 73.35s ago] {'pk_1': 85}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a74c06ed-d7f4-4ff4-9be6-654e82563d23"}
{"timestamp": "2025-12-29T13:49:09.113797+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: admin.force_cancel_reservation with payload: {'reservation_id': 42}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "a74c06ed-d7f4-4ff4-9be6-654e82563d23"}
{"timestamp": "2025-12-29T13:49:09.114071+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "a74c06ed-d7f4-4ff4-9be6-654e82563d23"}
{"timestamp": "2025-12-29T13:49:09.114977+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing admin.force_cancel_reservation to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "a74c06ed-d7f4-4ff4-9be6-654e82563d23"}
{"timestamp": "2025-12-29T13:49:09.115236+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_admin_force_cancel_reservation for admin.force_cancel_reservation", "module": "event_bus", "function": "publish", "line": 36, "request_id": "a74c06ed-d7f4-4ff4-9be6-654e82563d23"}
{"timestamp": "2025-12-29T13:49:09.115536+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_admin_force_cancel_reservation", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "a74c06ed-d7f4-4ff4-9be6-654e82563d23"}
{"timestamp": "2025-12-29T13:49:09.117223+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a74c06ed-d7f4-4ff4-9be6-654e82563d23"}
{"timestamp": "2025-12-29T13:49:09.117778+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id AS reservations_id, reservations.user_id AS reservations_user_id, reservations.showtime_id AS reservations_showtime_id, reservations.seat_code AS reservations_seat_code, reservations.status AS reservations_status, reservations.created_at AS reservations_created_at, reservations.expires_at AS reservations_expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a74c06ed-d7f4-4ff4-9be6-654e82563d23"}
{"timestamp": "2025-12-29T13:49:09.118057+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 41.18s ago] {'pk_1': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a74c06ed-d7f4-4ff4-9be6-654e82563d23"}
{"timestamp": "2025-12-29T13:49:09.120267+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE reservations SET status=%(status)s, expires_at=%(expires_at)s WHERE reservations.id = %(reservations_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a74c06ed-d7f4-4ff4-9be6-654e82563d23"}
{"timestamp": "2025-12-29T13:49:09.120564+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 41.18s ago] {'status': 'CANCELLED', 'expires_at': None, 'reservations_id': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a74c06ed-d7f4-4ff4-9be6-654e82563d23"}
{"timestamp": "2025-12-29T13:49:09.122528+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "a74c06ed-d7f4-4ff4-9be6-654e82563d23"}
{"timestamp": "2025-12-29T13:49:09.126780+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a74c06ed-d7f4-4ff4-9be6-654e82563d23"}
{"timestamp": "2025-12-29T13:49:09.127486+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a74c06ed-d7f4-4ff4-9be6-654e82563d23"}
{"timestamp": "2025-12-29T13:49:09.127937+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 73.35s ago] {'pk_1': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a74c06ed-d7f4-4ff4-9be6-654e82563d23"}
{"timestamp": "2025-12-29T13:49:09.129742+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.cancelled with payload: {'reservation_id': 42}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "a74c06ed-d7f4-4ff4-9be6-654e82563d23"}
{"timestamp": "2025-12-29T13:49:09.130022+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a74c06ed-d7f4-4ff4-9be6-654e82563d23"}
{"timestamp": "2025-12-29T13:49:09.132972+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.event_bus", "message": "\u274c Event handler failed: admin.force_cancel_reservation -> on_admin_force_cancel_reservation: asyncio.run() cannot be called from a running event loop", "module": "event_bus", "function": "_safe_invoke", "line": 45, "request_id": "a74c06ed-d7f4-4ff4-9be6-654e82563d23", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\event_bus.py\", line 42, in _safe_invoke\n    await handler(payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\reservation\\handlers.py\", line 59, in on_admin_force_cancel_reservation\n    cancel_reservation(\n    ~~~~~~~~~~~~~~~~~~^\n        db,\n        ^^^\n        reservation_id=reservation_id,\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        allow_admin_override=True,\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\reservation\\service.py\", line 110, in cancel_reservation\n    publish_event(event[\"type\"], event[\"payload\"])\n    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\shared\\services\\event_publisher.py\", line 17, in publish_event\n    asyncio.run(event_bus.publish(event_type, payload))\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 191, in run\n    raise RuntimeError(\n        \"asyncio.run() cannot be called from a running event loop\")\nRuntimeError: asyncio.run() cannot be called from a running event loop"}
{"timestamp": "2025-12-29T13:49:09.136523+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /admin/reservations/42/cancel \u2192 200 (0.030s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "a74c06ed-d7f4-4ff4-9be6-654e82563d23"}
{"timestamp": "2025-12-29T13:49:09.137607+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a74c06ed-d7f4-4ff4-9be6-654e82563d23"}
{"timestamp": "2025-12-29T13:49:11.174079+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 GET /reservations/42", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "bf957903-f2eb-4ed1-92a1-3acede800c3c"}
{"timestamp": "2025-12-29T13:49:11.176462+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "bf957903-f2eb-4ed1-92a1-3acede800c3c"}
{"timestamp": "2025-12-29T13:49:11.177042+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf957903-f2eb-4ed1-92a1-3acede800c3c"}
{"timestamp": "2025-12-29T13:49:11.177389+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 75.42s ago] {'pk_1': 86}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf957903-f2eb-4ed1-92a1-3acede800c3c"}
{"timestamp": "2025-12-29T13:49:11.180797+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id AS reservations_id, reservations.user_id AS reservations_user_id, reservations.showtime_id AS reservations_showtime_id, reservations.seat_code AS reservations_seat_code, reservations.status AS reservations_status, reservations.created_at AS reservations_created_at, reservations.expires_at AS reservations_expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf957903-f2eb-4ed1-92a1-3acede800c3c"}
{"timestamp": "2025-12-29T13:49:11.181217+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 43.24s ago] {'pk_1': 42}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "bf957903-f2eb-4ed1-92a1-3acede800c3c"}
{"timestamp": "2025-12-29T13:49:11.183376+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 GET /reservations/42 \u2192 200 (0.009s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "bf957903-f2eb-4ed1-92a1-3acede800c3c"}
{"timestamp": "2025-12-29T13:49:11.184247+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "bf957903-f2eb-4ed1-92a1-3acede800c3c"}
{"timestamp": "2025-12-29T13:49:13.222405+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.226219+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.226909+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.227334+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.84s ago] {'email_1': 'test_admin_1767016151.1846836@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.431859+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.432239+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.82s ago] {'email': 'test_admin_1767016151.1846836@example.com', 'hashed_password': '$2b$12$G13Z/q2aa6QYB3UHoEIC2.bVsHuJIB93ipcjkb/egqltPbcK/ljhu', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.433860+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.439034+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.439677+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.440044+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.82s ago] {'pk_1': 87}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.441906+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 87, 'email': 'test_admin_1767016151.1846836@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.442172+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.442864+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.443112+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.443373+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.445022+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.445590+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.445872+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.8s ago] {'user_id_1': 87, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.447971+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.448268+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.8s ago] {'user_id': 87, 'name': None, 'email': 'test_admin_1767016151.1846836@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.449922+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.454221+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.454868+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.455211+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.79s ago] {'pk_1': 87}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.457527+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 87, 'user_id': 87, 'email': 'test_admin_1767016151.1846836@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.457811+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.457950+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.458174+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.459260+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.460409+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.460777+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 91.08s ago] {'email_1': 'test_admin_1767016151.1846836@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.664215+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 87, 'email': 'test_admin_1767016151.1846836@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.664486+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.665279+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.665490+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.666604+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.444s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:13.667433+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "9d639ac6-a5e0-4f20-b87d-63b91da9d844"}
{"timestamp": "2025-12-29T13:49:15.744027+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /movies/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "1a9f5661-e1cc-4a51-909d-f04ad669b028"}
{"timestamp": "2025-12-29T13:49:15.747153+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1a9f5661-e1cc-4a51-909d-f04ad669b028"}
{"timestamp": "2025-12-29T13:49:15.747725+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.title = %(title_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1a9f5661-e1cc-4a51-909d-f04ad669b028"}
{"timestamp": "2025-12-29T13:49:15.748101+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.78s ago] {'title_1': 'Test Movie 1767016151.1846836'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1a9f5661-e1cc-4a51-909d-f04ad669b028"}
{"timestamp": "2025-12-29T13:49:15.750947+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO movies (title, description, duration_minutes, release_date, poster_url, trailer_url, is_active, age_rating) VALUES (%(title)s, %(description)s, %(duration_minutes)s, %(release_date)s, %(poster_url)s, %(trailer_url)s, %(is_active)s, %(age_rating)s) RETURNING movies.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1a9f5661-e1cc-4a51-909d-f04ad669b028"}
{"timestamp": "2025-12-29T13:49:15.751375+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.77s ago] {'title': 'Test Movie 1767016151.1846836', 'description': 'Test movie', 'duration_minutes': 120, 'release_date': None, 'poster_url': None, 'trailer_url': None, 'is_active': True, 'age_rating': 'PG_13'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1a9f5661-e1cc-4a51-909d-f04ad669b028"}
{"timestamp": "2025-12-29T13:49:15.753202+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "1a9f5661-e1cc-4a51-909d-f04ad669b028"}
{"timestamp": "2025-12-29T13:49:15.757487+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "1a9f5661-e1cc-4a51-909d-f04ad669b028"}
{"timestamp": "2025-12-29T13:49:15.758294+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id, movies.title, movies.description, movies.duration_minutes, movies.release_date, movies.poster_url, movies.trailer_url, movies.is_active, movies.age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1a9f5661-e1cc-4a51-909d-f04ad669b028"}
{"timestamp": "2025-12-29T13:49:15.758784+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.77s ago] {'pk_1': 52}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "1a9f5661-e1cc-4a51-909d-f04ad669b028"}
{"timestamp": "2025-12-29T13:49:15.760656+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: movie.created with payload: {'movie_id': 52}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "1a9f5661-e1cc-4a51-909d-f04ad669b028"}
{"timestamp": "2025-12-29T13:49:15.760920+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "1a9f5661-e1cc-4a51-909d-f04ad669b028"}
{"timestamp": "2025-12-29T13:49:15.761584+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing movie.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "1a9f5661-e1cc-4a51-909d-f04ad669b028"}
{"timestamp": "2025-12-29T13:49:15.761746+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: movie.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "1a9f5661-e1cc-4a51-909d-f04ad669b028"}
{"timestamp": "2025-12-29T13:49:15.762692+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /movies/ \u2192 200 (0.019s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "1a9f5661-e1cc-4a51-909d-f04ad669b028"}
{"timestamp": "2025-12-29T13:49:15.763833+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "1a9f5661-e1cc-4a51-909d-f04ad669b028"}
{"timestamp": "2025-12-29T13:49:17.803964+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/layouts", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "2eb32b8c-2bbc-4b31-b066-3db03996d20d"}
{"timestamp": "2025-12-29T13:49:17.806697+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2eb32b8c-2bbc-4b31-b066-3db03996d20d"}
{"timestamp": "2025-12-29T13:49:17.807241+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.name = %(name_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2eb32b8c-2bbc-4b31-b066-3db03996d20d"}
{"timestamp": "2025-12-29T13:49:17.807589+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.76s ago] {'name_1': 'Test Layout 1767016151.1846836'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2eb32b8c-2bbc-4b31-b066-3db03996d20d"}
{"timestamp": "2025-12-29T13:49:17.810027+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_layouts (name, rows, seats_per_row, grid) VALUES (%(name)s, %(rows)s, %(seats_per_row)s, %(grid)s::JSON) RETURNING seat_layouts.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2eb32b8c-2bbc-4b31-b066-3db03996d20d"}
{"timestamp": "2025-12-29T13:49:17.810414+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.76s ago] {'name': 'Test Layout 1767016151.1846836', 'rows': 10, 'seats_per_row': 15, 'grid': 'null'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2eb32b8c-2bbc-4b31-b066-3db03996d20d"}
{"timestamp": "2025-12-29T13:49:17.812295+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "2eb32b8c-2bbc-4b31-b066-3db03996d20d"}
{"timestamp": "2025-12-29T13:49:17.817047+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "2eb32b8c-2bbc-4b31-b066-3db03996d20d"}
{"timestamp": "2025-12-29T13:49:17.817707+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id, seat_layouts.name, seat_layouts.rows, seat_layouts.seats_per_row, seat_layouts.grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2eb32b8c-2bbc-4b31-b066-3db03996d20d"}
{"timestamp": "2025-12-29T13:49:17.818197+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.76s ago] {'pk_1': 51}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "2eb32b8c-2bbc-4b31-b066-3db03996d20d"}
{"timestamp": "2025-12-29T13:49:17.820351+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.layout_created with payload: {'layout_id': 51}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "2eb32b8c-2bbc-4b31-b066-3db03996d20d"}
{"timestamp": "2025-12-29T13:49:17.820583+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "2eb32b8c-2bbc-4b31-b066-3db03996d20d"}
{"timestamp": "2025-12-29T13:49:17.821234+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.layout_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "2eb32b8c-2bbc-4b31-b066-3db03996d20d"}
{"timestamp": "2025-12-29T13:49:17.821396+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.layout_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "2eb32b8c-2bbc-4b31-b066-3db03996d20d"}
{"timestamp": "2025-12-29T13:49:17.822380+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/layouts \u2192 201 (0.019s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "2eb32b8c-2bbc-4b31-b066-3db03996d20d"}
{"timestamp": "2025-12-29T13:49:17.823214+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "2eb32b8c-2bbc-4b31-b066-3db03996d20d"}
{"timestamp": "2025-12-29T13:49:19.869530+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /screen/screens", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "b93abc30-0c83-49ce-a25d-8b6dd936e0a5"}
{"timestamp": "2025-12-29T13:49:19.872261+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b93abc30-0c83-49ce-a25d-8b6dd936e0a5"}
{"timestamp": "2025-12-29T13:49:19.872889+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.name = %(name_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b93abc30-0c83-49ce-a25d-8b6dd936e0a5"}
{"timestamp": "2025-12-29T13:49:19.873268+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.77s ago] {'name_1': 'Test Screen 1767016151.1846836', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b93abc30-0c83-49ce-a25d-8b6dd936e0a5"}
{"timestamp": "2025-12-29T13:49:19.876289+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_layouts.id AS seat_layouts_id, seat_layouts.name AS seat_layouts_name, seat_layouts.rows AS seat_layouts_rows, seat_layouts.seats_per_row AS seat_layouts_seats_per_row, seat_layouts.grid AS seat_layouts_grid \nFROM seat_layouts \nWHERE seat_layouts.id = %(id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b93abc30-0c83-49ce-a25d-8b6dd936e0a5"}
{"timestamp": "2025-12-29T13:49:19.876678+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.77s ago] {'id_1': 51, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b93abc30-0c83-49ce-a25d-8b6dd936e0a5"}
{"timestamp": "2025-12-29T13:49:19.878879+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO screens (name, capacity, seat_layout_id) VALUES (%(name)s, %(capacity)s, %(seat_layout_id)s) RETURNING screens.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b93abc30-0c83-49ce-a25d-8b6dd936e0a5"}
{"timestamp": "2025-12-29T13:49:19.879232+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.76s ago] {'name': 'Test Screen 1767016151.1846836', 'capacity': 150, 'seat_layout_id': 51}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b93abc30-0c83-49ce-a25d-8b6dd936e0a5"}
{"timestamp": "2025-12-29T13:49:19.880945+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "b93abc30-0c83-49ce-a25d-8b6dd936e0a5"}
{"timestamp": "2025-12-29T13:49:19.886591+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "b93abc30-0c83-49ce-a25d-8b6dd936e0a5"}
{"timestamp": "2025-12-29T13:49:19.887184+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id, screens.name, screens.capacity, screens.seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b93abc30-0c83-49ce-a25d-8b6dd936e0a5"}
{"timestamp": "2025-12-29T13:49:19.887729+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.76s ago] {'pk_1': 51}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "b93abc30-0c83-49ce-a25d-8b6dd936e0a5"}
{"timestamp": "2025-12-29T13:49:19.890191+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: screen.created with payload: {'screen_id': 51}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "b93abc30-0c83-49ce-a25d-8b6dd936e0a5"}
{"timestamp": "2025-12-29T13:49:19.890519+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "b93abc30-0c83-49ce-a25d-8b6dd936e0a5"}
{"timestamp": "2025-12-29T13:49:19.891293+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing screen.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "b93abc30-0c83-49ce-a25d-8b6dd936e0a5"}
{"timestamp": "2025-12-29T13:49:19.891499+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: screen.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "b93abc30-0c83-49ce-a25d-8b6dd936e0a5"}
{"timestamp": "2025-12-29T13:49:19.892421+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /screen/screens \u2192 201 (0.023s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "b93abc30-0c83-49ce-a25d-8b6dd936e0a5"}
{"timestamp": "2025-12-29T13:49:19.893753+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "b93abc30-0c83-49ce-a25d-8b6dd936e0a5"}
{"timestamp": "2025-12-29T13:49:21.944668+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /showtimes/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:21.947333+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:21.947988+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:21.948367+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.76s ago] {'pk_1': 52}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:21.951037+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:21.951516+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.76s ago] {'pk_1': 51}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:21.953639+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.screen_id = %(screen_id_1)s AND showtimes.start_time < %(start_time_1)s AND showtimes.end_time > %(end_time_1)s AND showtimes.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:21.954075+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.76s ago] {'screen_id_1': 51, 'start_time_1': datetime.datetime(2025, 12, 30, 21, 0), 'end_time_1': datetime.datetime(2025, 12, 30, 19, 0)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:21.955898+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO showtimes (start_time, end_time, is_active, format, movie_id, screen_id) VALUES (%(start_time)s, %(end_time)s, %(is_active)s, %(format)s, %(movie_id)s, %(screen_id)s) RETURNING showtimes.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:21.956282+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.76s ago] {'start_time': datetime.datetime(2025, 12, 30, 19, 0), 'end_time': datetime.datetime(2025, 12, 30, 21, 0), 'is_active': True, 'format': 'TWO_D', 'movie_id': 52, 'screen_id': 51}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:21.958068+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:21.963455+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:21.964243+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT showtimes.id, showtimes.start_time, showtimes.end_time, showtimes.is_active, showtimes.format, showtimes.movie_id, showtimes.screen_id \nFROM showtimes \nWHERE showtimes.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:21.964781+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.76s ago] {'pk_1': 43}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:21.967285+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT movies.id AS movies_id, movies.title AS movies_title, movies.description AS movies_description, movies.duration_minutes AS movies_duration_minutes, movies.release_date AS movies_release_date, movies.poster_url AS movies_poster_url, movies.trailer_url AS movies_trailer_url, movies.is_active AS movies_is_active, movies.age_rating AS movies_age_rating \nFROM movies \nWHERE movies.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:21.967653+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.76s ago] {'pk_1': 52}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:21.969503+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT screens.id AS screens_id, screens.name AS screens_name, screens.capacity AS screens_capacity, screens.seat_layout_id AS screens_seat_layout_id \nFROM screens \nWHERE screens.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:21.969932+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 90.76s ago] {'pk_1': 51}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:21.971773+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: showtime.created with payload: {'showtime_id': 43}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:21.972188+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:21.972934+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing showtime.created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:21.973114+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: showtime.created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:21.974318+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /showtimes/ \u2192 201 (0.030s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:21.975649+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "53b93844-957f-49f7-bc91-79919b1f7bc1"}
{"timestamp": "2025-12-29T13:49:24.028591+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.031180+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.031796+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.032158+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 101.6s ago] {'email_1': 'test_concurrent1_1767016161.9758787@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.236940+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.237321+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 101.6s ago] {'email': 'test_concurrent1_1767016161.9758787@example.com', 'hashed_password': '$2b$12$JH.0gpKLWA5er8ZEYMBkheaBgkdVesRx96GQlVVEK1LmZrY87k9T6', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.238904+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.243526+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.244435+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.244932+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 101.6s ago] {'pk_1': 88}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.246901+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 88, 'email': 'test_concurrent1_1767016161.9758787@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.247223+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.248305+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.248657+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.248866+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.250833+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.251476+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.251782+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 101.6s ago] {'user_id_1': 88, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.254081+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.254598+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 101.6s ago] {'user_id': 88, 'name': None, 'email': 'test_concurrent1_1767016161.9758787@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.256313+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.260664+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.261199+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.261580+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 101.6s ago] {'pk_1': 88}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.263751+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 88, 'user_id': 88, 'email': 'test_concurrent1_1767016161.9758787@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.264145+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.264438+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.264813+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.266016+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.267319+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.267742+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 101.9s ago] {'email_1': 'test_concurrent1_1767016161.9758787@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.472873+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 88, 'email': 'test_concurrent1_1767016161.9758787@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.473164+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.474006+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.474248+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.475377+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.447s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:24.476319+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "c45c2aa9-f5a4-4720-986c-c0618a50cd57"}
{"timestamp": "2025-12-29T13:49:26.619389+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /auth/register", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.622472+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.623058+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.623431+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 104.2s ago] {'email_1': 'test_concurrent2_1767016164.576332@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.828684+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_credentials (email, hashed_password, is_active, token_version, user_type) VALUES (%(email)s, %(hashed_password)s, %(is_active)s, %(token_version)s, %(user_type)s) RETURNING user_credentials.id, user_credentials.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.829079+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 104.2s ago] {'email': 'test_concurrent2_1767016164.576332@example.com', 'hashed_password': '$2b$12$jcy28kB0cM.q9RDrAiUZKeuBiUKLj2VkbXTl2zDWXR3gvLb3rY.1q', 'is_active': True, 'token_version': 0, 'user_type': 'user'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.830693+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.835812+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.836445+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id, user_credentials.email, user_credentials.hashed_password, user_credentials.created_at, user_credentials.is_active, user_credentials.token_version, user_credentials.user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.836981+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 104.2s ago] {'pk_1': 89}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.839476+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_registered with payload: {'user_id': 89, 'email': 'test_concurrent2_1767016164.576332@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.839783+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.840605+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_registered to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.840827+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_user_registered for auth.user_registered", "module": "event_bus", "function": "publish", "line": 36, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.840993+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_user_registered", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.842691+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.843322+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id AS user_profiles_id, user_profiles.user_id AS user_profiles_user_id, user_profiles.name AS user_profiles_name, user_profiles.email AS user_profiles_email, user_profiles.user_type AS user_profiles_user_type, user_profiles.created_at AS user_profiles_created_at \nFROM user_profiles \nWHERE user_profiles.user_id = %(user_id_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.843592+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 104.2s ago] {'user_id_1': 89, 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.846082+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO user_profiles (user_id, name, email, user_type) VALUES (%(user_id)s, %(name)s, %(email)s, %(user_type)s) RETURNING user_profiles.id, user_profiles.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.846369+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 104.2s ago] {'user_id': 89, 'name': None, 'email': 'test_concurrent2_1767016164.576332@example.com', 'user_type': 'USER'}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.848153+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.852193+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.852668+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_profiles.id, user_profiles.user_id, user_profiles.name, user_profiles.email, user_profiles.user_type, user_profiles.created_at \nFROM user_profiles \nWHERE user_profiles.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.852930+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 104.2s ago] {'pk_1': 89}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.855051+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: user.profile_created with payload: {'profile_id': 89, 'user_id': 89, 'email': 'test_concurrent2_1767016164.576332@example.com', 'name': None}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.855288+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing user.profile_created to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.855440+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: user.profile_created", "module": "event_bus", "function": "publish", "line": 31, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.855672+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.856590+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_user_registered completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.857619+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.email = %(email_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:26.858004+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 104.5s ago] {'email_1': 'test_concurrent2_1767016164.576332@example.com', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:27.061945+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: auth.user_logged_in with payload: {'user_id': 89, 'email': 'test_concurrent2_1767016164.576332@example.com'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:27.062303+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:27.088730+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing auth.user_logged_in to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:27.089126+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: auth.user_logged_in", "module": "event_bus", "function": "publish", "line": 31, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:27.090475+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /auth/register \u2192 201 (0.471s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:27.091355+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "a86f0050-edc1-4449-9738-1294c9362dd4"}
{"timestamp": "2025-12-29T13:49:29.139821+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.142445+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.143053+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.143423+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 93.39s ago] {'pk_1': 88}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.146833+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.147260+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 93.38s ago] {'showtime_id_1': 43, 'seat_code_1': 'R9-9', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.149478+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO reservations (user_id, showtime_id, seat_code, status, created_at, expires_at) VALUES (%(user_id)s, %(showtime_id)s, %(seat_code)s, %(status)s, %(created_at)s, %(expires_at)s) RETURNING reservations.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.149882+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 93.38s ago] {'user_id': 88, 'showtime_id': 43, 'seat_code': 'R9-9', 'status': 'ACTIVE', 'created_at': datetime.datetime(2025, 12, 29, 13, 49, 29, 149128, tzinfo=datetime.timezone.utc), 'expires_at': datetime.datetime(2025, 12, 29, 13, 59, 29, 148873, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.151592+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.156038+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.156580+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT reservations.id, reservations.user_id, reservations.showtime_id, reservations.seat_code, reservations.status, reservations.created_at, reservations.expires_at \nFROM reservations \nWHERE reservations.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.156885+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 93.38s ago] {'pk_1': 43}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.158736+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: reservation.created with payload: {'reservation_id': 43, 'user_id': 88, 'showtime_id': 43, 'seat_code': 'R9-9'}", "module": "event_publisher", "function": "publish_event", "line": 16, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.159040+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "asyncio", "message": "Using proactor: IocpProactor", "module": "proactor_events", "function": "__init__", "line": 631, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.160011+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing reservation.created to 3 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.160324+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.160488+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.162053+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.162586+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.162870+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 93.4s ago] {'showtime_id_1': 43, 'seat_code_1': 'R9-9', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.165456+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO seat_locks (seat_code, showtime_id, status, locked_by_user_id, lock_expires_at) VALUES (%(seat_code)s, %(showtime_id)s, %(status)s, %(locked_by_user_id)s, %(lock_expires_at)s) RETURNING seat_locks.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.165761+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 93.38s ago] {'seat_code': 'R9-9', 'showtime_id': 43, 'status': 'AVAILABLE', 'locked_by_user_id': None, 'lock_expires_at': None}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.167719+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE seat_locks SET status=%(status)s, locked_by_user_id=%(locked_by_user_id)s, lock_expires_at=%(lock_expires_at)s WHERE seat_locks.id = %(seat_locks_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.168031+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 93.38s ago] {'status': 'LOCKED', 'locked_by_user_id': 88, 'lock_expires_at': datetime.datetime(2025, 12, 29, 13, 59, 29, 167278, tzinfo=datetime.timezone.utc), 'seat_locks_id': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.169617+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.173544+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.174291+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id, seat_locks.seat_code, seat_locks.showtime_id, seat_locks.status, seat_locks.locked_by_user_id, seat_locks.lock_expires_at \nFROM seat_locks \nWHERE seat_locks.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.174718+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 93.37s ago] {'pk_1': 39}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.176789+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: seat.locked with payload: {'showtime_id': 43, 'seat_code': 'R9-9', 'user_id': 88, 'expires_at': '2025-12-29T13:59:29.167278+00:00'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.176999+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing seat.locked to 0 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.177178+00:00", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.core.event_bus", "message": "\u26a0\ufe0f  No handlers registered for event: seat.locked", "module": "event_bus", "function": "publish", "line": 31, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.177436+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.178454+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.178621+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.178722+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.178867+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83c\udfab Order handler received reservation.created: {'reservation_id': 43, 'user_id': 88, 'showtime_id': 43, 'seat_code': 'R9-9'}", "module": "handlers", "function": "on_reservation_created", "line": 22, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.179166+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "Creating order for reservation 43", "module": "handlers", "function": "on_reservation_created", "line": 34, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.181071+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.181582+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO orders (user_id, pricing_snapshot, final_amount, is_completed, reservation_id) VALUES (%(user_id)s, %(pricing_snapshot)s::JSON, %(final_amount)s, %(is_completed)s, %(reservation_id)s) RETURNING orders.id, orders.created_at", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.181822+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 93.37s ago] {'user_id': 88, 'pricing_snapshot': '{}', 'final_amount': 0, 'is_completed': False, 'reservation_id': 43}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.183731+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.187721+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.188185+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.188420+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 93.37s ago] {'pk_1': 43}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.190127+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: order.created with payload: {'order_id': 43, 'reservation_id': 43, 'user_id': 88, 'showtime_id': 43, 'seat_code': 'R9-9'}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.190324+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing order.created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.190490+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_order_created for order.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.190600+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_order_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.190750+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\ud83d\udcb0 Pricing handler received order.created for order 43", "module": "handlers", "function": "on_order_created", "line": 25, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.192197+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.192631+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT price_modifiers.id, price_modifiers.name, price_modifiers.modifier_type, price_modifiers.amount, price_modifiers.is_active, price_modifiers.applies_to \nFROM price_modifiers \nWHERE price_modifiers.is_active = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.192858+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 93.34s ago] {}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.194929+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.shared.services.event_publisher", "message": "\ud83d\udce2 Publishing event: pricing.snapshot_created with payload: {'order_id': 43, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "event_publisher", "function": "publish_event_async", "line": 24, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.195119+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\ud83d\udce8 Event bus publishing pricing.snapshot_created to 1 handlers", "module": "event_bus", "function": "publish", "line": 28, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.195245+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_pricing_snapshot_created for pricing.snapshot_created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.195377+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_pricing_snapshot_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.195599+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\ud83d\udcb0 Order handler received pricing.snapshot_created: {'order_id': 43, 'snapshot': {'base_price': 1000.0, 'final_price': 1000.0, 'modifiers_applied': []}}", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 89, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.197147+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.197720+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id AS orders_id, orders.user_id AS orders_user_id, orders.pricing_snapshot AS orders_pricing_snapshot, orders.final_amount AS orders_final_amount, orders.is_completed AS orders_is_completed, orders.reservation_id AS orders_reservation_id, orders.created_at AS orders_created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.198019+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 93.31s ago] {'pk_1': 43}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.200074+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "UPDATE orders SET pricing_snapshot=%(pricing_snapshot)s::JSON, final_amount=%(final_amount)s WHERE orders.id = %(orders_id)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.200439+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 93.31s ago] {'pricing_snapshot': '{\"base_price\": 1000.0, \"final_price\": 1000.0, \"modifiers_applied\": []}', 'final_amount': 1000.0, 'orders_id': 43}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.202348+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.206044+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.206700+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT orders.id, orders.user_id, orders.pricing_snapshot, orders.final_amount, orders.is_completed, orders.reservation_id, orders.created_at \nFROM orders \nWHERE orders.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.207163+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 93.39s ago] {'pk_1': 43}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.209211+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order 43 updated with final_amount: 1000", "module": "handlers", "function": "on_pricing_snapshot_created", "line": 112, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.209542+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.210576+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_pricing_snapshot_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.210788+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.pricing.handlers", "message": "\u2713 Pricing snapshot created for order 43: final_price=1000.0", "module": "handlers", "function": "on_order_created", "line": 34, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.211089+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.212259+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_order_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.212454+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.contexts.order.handlers", "message": "\u2713 Order created successfully for reservation 43", "module": "handlers", "function": "on_reservation_created", "line": 42, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.212689+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.213687+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.213903+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Invoking handler: on_reservation_created for reservation.created", "module": "event_bus", "function": "publish", "line": 36, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.214065+00:00", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.event_bus", "message": "Executing handler on_reservation_created", "module": "event_bus", "function": "_safe_invoke", "line": 41, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.215669+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.216182+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO audit_logs (actor_id, actor_type, action, target_id, target_type, payload, request_id, created_at) VALUES (%(actor_id)s, %(actor_type)s, %(action)s, %(target_id)s, %(target_type)s, %(payload)s::JSON, %(request_id)s, %(created_at)s) RETURNING audit_logs.id", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.216729+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 93.31s ago] {'actor_id': 88, 'actor_type': 'user', 'action': 'reservation.created', 'target_id': 43, 'target_type': 'reservation', 'payload': '{\"reservation_id\": 43, \"user_id\": 88, \"showtime_id\": 43, \"seat_code\": \"R9-9\"}', 'request_id': None, 'created_at': datetime.datetime(2025, 12, 29, 13, 49, 29, 215929, tzinfo=datetime.timezone.utc)}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.218928+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2708, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.222598+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.223216+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT audit_logs.id, audit_logs.actor_id, audit_logs.actor_type, audit_logs.action, audit_logs.target_id, audit_logs.target_type, audit_logs.payload, audit_logs.request_id, audit_logs.created_at \nFROM audit_logs \nWHERE audit_logs.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.223565+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 93.31s ago] {'pk_1': 58}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.225628+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.226525+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.event_bus", "message": "\u2713 Handler on_reservation_created completed successfully", "module": "event_bus", "function": "_safe_invoke", "line": 43, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.227530+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2190 POST /reservations/ \u2192 200 (0.088s)", "module": "middleware", "function": "dispatch", "line": 63, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:29.228228+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "7670c911-fa23-4726-9b41-3b098d160399"}
{"timestamp": "2025-12-29T13:49:31.279761+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.middleware", "message": "\u2192 POST /reservations/", "module": "middleware", "function": "dispatch", "line": 44, "request_id": "ddab7466-060b-4d47-9edc-c51c917dec55"}
{"timestamp": "2025-12-29T13:49:31.282481+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2702, "request_id": "ddab7466-060b-4d47-9edc-c51c917dec55"}
{"timestamp": "2025-12-29T13:49:31.283141+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT user_credentials.id AS user_credentials_id, user_credentials.email AS user_credentials_email, user_credentials.hashed_password AS user_credentials_hashed_password, user_credentials.created_at AS user_credentials_created_at, user_credentials.is_active AS user_credentials_is_active, user_credentials.token_version AS user_credentials_token_version, user_credentials.user_type AS user_credentials_user_type \nFROM user_credentials \nWHERE user_credentials.id = %(pk_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ddab7466-060b-4d47-9edc-c51c917dec55"}
{"timestamp": "2025-12-29T13:49:31.283509+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 95.53s ago] {'pk_1': 89}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ddab7466-060b-4d47-9edc-c51c917dec55"}
{"timestamp": "2025-12-29T13:49:31.286707+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT seat_locks.id AS seat_locks_id, seat_locks.seat_code AS seat_locks_seat_code, seat_locks.showtime_id AS seat_locks_showtime_id, seat_locks.status AS seat_locks_status, seat_locks.locked_by_user_id AS seat_locks_locked_by_user_id, seat_locks.lock_expires_at AS seat_locks_lock_expires_at \nFROM seat_locks \nWHERE seat_locks.showtime_id = %(showtime_id_1)s AND seat_locks.seat_code = %(seat_code_1)s \n LIMIT %(param_1)s", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ddab7466-060b-4d47-9edc-c51c917dec55"}
{"timestamp": "2025-12-29T13:49:31.287078+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 95.52s ago] {'showtime_id_1': 43, 'seat_code_1': 'R9-9', 'param_1': 1}", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "ddab7466-060b-4d47-9edc-c51c917dec55"}
{"timestamp": "2025-12-29T13:49:31.289276+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "ROLLBACK", "module": "base", "function": "_connection_rollback_impl", "line": 2705, "request_id": "ddab7466-060b-4d47-9edc-c51c917dec55"}
{"timestamp": "2025-12-29T13:49:31.297734+00:00", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.core.middleware", "message": "\u2717 POST /reservations/ \u2192 FAILED (0.011s)", "module": "middleware", "function": "dispatch", "line": 83, "request_id": "ddab7466-060b-4d47-9edc-c51c917dec55", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 151, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\streams\\memory.py\", line 126, in receive\n    raise EndOfStream from None\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\core\\middleware.py\", line 57, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    raise app_exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 124, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 110, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 390, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fastapi\\routing.py\", line 291, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\starlette\\concurrency.py\", line 38, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\to_thread.py\", line 56, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 2485, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 976, in run\n    result = context.run(func, *args)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\reservation\\router.py\", line 31, in create_reservation_route\n    return create_reservation(db=db, user_id=current_user.id, data=payload)\n  File \"C:\\Users\\Jayja\\AppData\\Local\\Programs\\Python\\Python313\\python_files\\cinema_backend\\app\\contexts\\reservation\\service.py\", line 53, in create_reservation\n    raise ValidationError(\n    ...<2 lines>...\n    )\napp.core.errors.ValidationError: ('Seat is locked by another user', {'seat_code': 'R9-9'})"}
{"timestamp": "2025-12-29T13:52:17.211558+00:00", "level": "\u001b[32mINFO\u001b[0m", "logger": "main", "message": "Cinema Booking System shutting down...", "module": "main", "function": "shutdown_event", "line": 90}
